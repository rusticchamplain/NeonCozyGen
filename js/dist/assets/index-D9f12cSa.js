function qm(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Xm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $d={exports:{}},ao={},Md={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ms=Symbol.for("react.element"),Jm=Symbol.for("react.portal"),Zm=Symbol.for("react.fragment"),eh=Symbol.for("react.strict_mode"),th=Symbol.for("react.profiler"),nh=Symbol.for("react.provider"),rh=Symbol.for("react.context"),sh=Symbol.for("react.forward_ref"),lh=Symbol.for("react.suspense"),oh=Symbol.for("react.memo"),ih=Symbol.for("react.lazy"),Dc=Symbol.iterator;function ah(e){return e===null||typeof e!="object"?null:(e=Dc&&e[Dc]||e["@@iterator"],typeof e=="function"?e:null)}var Od={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fd=Object.assign,Dd={};function Ur(e,t,n){this.props=e,this.context=t,this.refs=Dd,this.updater=n||Od}Ur.prototype.isReactComponent={};Ur.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ur.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ud(){}Ud.prototype=Ur.prototype;function Ca(e,t,n){this.props=e,this.context=t,this.refs=Dd,this.updater=n||Od}var ba=Ca.prototype=new Ud;ba.constructor=Ca;Fd(ba,Ur.prototype);ba.isPureReactComponent=!0;var Uc=Array.isArray,Bd=Object.prototype.hasOwnProperty,Ea={current:null},Wd={key:!0,ref:!0,__self:!0,__source:!0};function Vd(e,t,n){var r,s={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Bd.call(t,r)&&!Wd.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ms,type:e,key:o,ref:i,props:s,_owner:Ea.current}}function ch(e,t){return{$$typeof:Ms,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function La(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ms}function uh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Bc=/\/+/g;function Ao(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uh(""+e.key):t.toString(36)}function gl(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ms:case Jm:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+Ao(i,0):r,Uc(s)?(n="",e!=null&&(n=e.replace(Bc,"$&/")+"/"),gl(s,t,n,"",function(d){return d})):s!=null&&(La(s)&&(s=ch(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Bc,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",Uc(e))for(var a=0;a<e.length;a++){o=e[a];var c=r+Ao(o,a);i+=gl(o,t,n,c,s)}else if(c=ah(e),typeof c=="function")for(e=c.call(e),a=0;!(o=e.next()).done;)o=o.value,c=r+Ao(o,a++),i+=gl(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function qs(e,t,n){if(e==null)return e;var r=[],s=0;return gl(e,r,"","",function(o){return t.call(n,o,s++)}),r}function dh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ft={current:null},yl={transition:null},fh={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:yl,ReactCurrentOwner:Ea};function Hd(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:qs,forEach:function(e,t,n){qs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qs(e,function(){t++}),t},toArray:function(e){return qs(e,function(t){return t})||[]},only:function(e){if(!La(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=Ur;je.Fragment=Zm;je.Profiler=th;je.PureComponent=Ca;je.StrictMode=eh;je.Suspense=lh;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fh;je.act=Hd;je.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Fd({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Ea.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Bd.call(t,c)&&!Wd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Ms,type:e.type,key:s,ref:o,props:r,_owner:i}};je.createContext=function(e){return e={$$typeof:rh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:nh,_context:e},e.Consumer=e};je.createElement=Vd;je.createFactory=function(e){var t=Vd.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:sh,render:e}};je.isValidElement=La;je.lazy=function(e){return{$$typeof:ih,_payload:{_status:-1,_result:e},_init:dh}};je.memo=function(e,t){return{$$typeof:oh,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=yl.transition;yl.transition={};try{e()}finally{yl.transition=t}};je.unstable_act=Hd;je.useCallback=function(e,t){return ft.current.useCallback(e,t)};je.useContext=function(e){return ft.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return ft.current.useDeferredValue(e)};je.useEffect=function(e,t){return ft.current.useEffect(e,t)};je.useId=function(){return ft.current.useId()};je.useImperativeHandle=function(e,t,n){return ft.current.useImperativeHandle(e,t,n)};je.useInsertionEffect=function(e,t){return ft.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return ft.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return ft.current.useMemo(e,t)};je.useReducer=function(e,t,n){return ft.current.useReducer(e,t,n)};je.useRef=function(e){return ft.current.useRef(e)};je.useState=function(e){return ft.current.useState(e)};je.useSyncExternalStore=function(e,t,n){return ft.current.useSyncExternalStore(e,t,n)};je.useTransition=function(){return ft.current.useTransition()};je.version="18.3.1";Md.exports=je;var u=Md.exports;const Mt=Xm(u),ph=qm({__proto__:null,default:Mt},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mh=u,hh=Symbol.for("react.element"),gh=Symbol.for("react.fragment"),yh=Object.prototype.hasOwnProperty,vh=mh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xh={key:!0,ref:!0,__self:!0,__source:!0};function Gd(e,t,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)yh.call(t,r)&&!xh.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:hh,type:e,key:o,ref:i,props:s,_owner:vh.current}}ao.Fragment=gh;ao.jsx=Gd;ao.jsxs=Gd;$d.exports=ao;var l=$d.exports,gi={},Kd={exports:{}},bt={},Qd={exports:{}},Yd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,I){var E=k.length;k.push(I);e:for(;0<E;){var L=E-1>>>1,M=k[L];if(0<s(M,I))k[L]=I,k[E]=M,E=L;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var I=k[0],E=k.pop();if(E!==I){k[0]=E;e:for(var L=0,M=k.length,z=M>>>1;L<z;){var A=2*(L+1)-1,Z=k[A],H=A+1,D=k[H];if(0>s(Z,E))H<M&&0>s(D,Z)?(k[L]=D,k[H]=E,L=H):(k[L]=Z,k[A]=E,L=A);else if(H<M&&0>s(D,E))k[L]=D,k[H]=E,L=H;else break e}}return I}function s(k,I){var E=k.sortIndex-I.sortIndex;return E!==0?E:k.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var c=[],d=[],h=1,g=null,m=3,x=!1,w=!1,S=!1,j=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(k){for(var I=n(d);I!==null;){if(I.callback===null)r(d);else if(I.startTime<=k)r(d),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(d)}}function N(k){if(S=!1,y(k),!w)if(n(c)!==null)w=!0,le(R);else{var I=n(d);I!==null&&ae(N,I.startTime-k)}}function R(k,I){w=!1,S&&(S=!1,p(_),_=-1),x=!0;var E=m;try{for(y(I),g=n(c);g!==null&&(!(g.expirationTime>I)||k&&!W());){var L=g.callback;if(typeof L=="function"){g.callback=null,m=g.priorityLevel;var M=L(g.expirationTime<=I);I=e.unstable_now(),typeof M=="function"?g.callback=M:g===n(c)&&r(c),y(I)}else r(c);g=n(c)}if(g!==null)var z=!0;else{var A=n(d);A!==null&&ae(N,A.startTime-I),z=!1}return z}finally{g=null,m=E,x=!1}}var P=!1,F=null,_=-1,V=5,$=-1;function W(){return!(e.unstable_now()-$<V)}function ue(){if(F!==null){var k=e.unstable_now();$=k;var I=!0;try{I=F(!0,k)}finally{I?se():(P=!1,F=null)}}else P=!1}var se;if(typeof f=="function")se=function(){f(ue)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,q=pe.port2;pe.port1.onmessage=ue,se=function(){q.postMessage(null)}}else se=function(){j(ue,0)};function le(k){F=k,P||(P=!0,se())}function ae(k,I){_=j(function(){k(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,le(R))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(k){switch(m){case 1:case 2:case 3:var I=3;break;default:I=m}var E=m;m=I;try{return k()}finally{m=E}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,I){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var E=m;m=k;try{return I()}finally{m=E}},e.unstable_scheduleCallback=function(k,I,E){var L=e.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?L+E:L):E=L,k){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=E+M,k={id:h++,callback:I,priorityLevel:k,startTime:E,expirationTime:M,sortIndex:-1},E>L?(k.sortIndex=E,t(d,k),n(c)===null&&k===n(d)&&(S?(p(_),_=-1):S=!0,ae(N,E-L))):(k.sortIndex=M,t(c,k),w||x||(w=!0,le(R))),k},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(k){var I=m;return function(){var E=m;m=I;try{return k.apply(this,arguments)}finally{m=E}}}})(Yd);Qd.exports=Yd;var wh=Qd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jh=u,Ct=wh;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qd=new Set,vs={};function or(e,t){Tr(e,t),Tr(e+"Capture",t)}function Tr(e,t){for(vs[e]=t,e=0;e<t.length;e++)qd.add(t[e])}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yi=Object.prototype.hasOwnProperty,Sh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wc={},Vc={};function Nh(e){return yi.call(Vc,e)?!0:yi.call(Wc,e)?!1:Sh.test(e)?Vc[e]=!0:(Wc[e]=!0,!1)}function kh(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ch(e,t,n,r){if(t===null||typeof t>"u"||kh(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function pt(e,t,n,r,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){st[e]=new pt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];st[t]=new pt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){st[e]=new pt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){st[e]=new pt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){st[e]=new pt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){st[e]=new pt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){st[e]=new pt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){st[e]=new pt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){st[e]=new pt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Pa=/[\-:]([a-z])/g;function _a(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Pa,_a);st[t]=new pt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Pa,_a);st[t]=new pt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Pa,_a);st[t]=new pt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){st[e]=new pt(e,1,!1,e.toLowerCase(),null,!1,!1)});st.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){st[e]=new pt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ra(e,t,n,r){var s=st.hasOwnProperty(t)?st[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ch(t,n,s,r)&&(n=null),r||s===null?Nh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var gn=jh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xs=Symbol.for("react.element"),pr=Symbol.for("react.portal"),mr=Symbol.for("react.fragment"),Ia=Symbol.for("react.strict_mode"),vi=Symbol.for("react.profiler"),Xd=Symbol.for("react.provider"),Jd=Symbol.for("react.context"),Ta=Symbol.for("react.forward_ref"),xi=Symbol.for("react.suspense"),wi=Symbol.for("react.suspense_list"),za=Symbol.for("react.memo"),wn=Symbol.for("react.lazy"),Zd=Symbol.for("react.offscreen"),Hc=Symbol.iterator;function Gr(e){return e===null||typeof e!="object"?null:(e=Hc&&e[Hc]||e["@@iterator"],typeof e=="function"?e:null)}var Ue=Object.assign,$o;function ts(e){if($o===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$o=t&&t[1]||""}return`
`+$o+e}var Mo=!1;function Oo(e,t){if(!e||Mo)return"";Mo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==o[a]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=a);break}}}finally{Mo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ts(e):""}function bh(e){switch(e.tag){case 5:return ts(e.type);case 16:return ts("Lazy");case 13:return ts("Suspense");case 19:return ts("SuspenseList");case 0:case 2:case 15:return e=Oo(e.type,!1),e;case 11:return e=Oo(e.type.render,!1),e;case 1:return e=Oo(e.type,!0),e;default:return""}}function ji(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case mr:return"Fragment";case pr:return"Portal";case vi:return"Profiler";case Ia:return"StrictMode";case xi:return"Suspense";case wi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Jd:return(e.displayName||"Context")+".Consumer";case Xd:return(e._context.displayName||"Context")+".Provider";case Ta:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case za:return t=e.displayName||null,t!==null?t:ji(e.type)||"Memo";case wn:t=e._payload,e=e._init;try{return ji(e(t))}catch{}}return null}function Eh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ji(t);case 8:return t===Ia?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ef(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Lh(e){var t=ef(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Js(e){e._valueTracker||(e._valueTracker=Lh(e))}function tf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ef(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Pl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Si(e,t){var n=t.checked;return Ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Gc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Mn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function nf(e,t){t=t.checked,t!=null&&Ra(e,"checked",t,!1)}function Ni(e,t){nf(e,t);var n=Mn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ki(e,t.type,n):t.hasOwnProperty("defaultValue")&&ki(e,t.type,Mn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Kc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ki(e,t,n){(t!=="number"||Pl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ns=Array.isArray;function Cr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Mn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ci(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Y(92));if(ns(n)){if(1<n.length)throw Error(Y(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Mn(n)}}function rf(e,t){var n=Mn(t.value),r=Mn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Yc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zs,lf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zs=Zs||document.createElement("div"),Zs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var is={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ph=["Webkit","ms","Moz","O"];Object.keys(is).forEach(function(e){Ph.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),is[t]=is[e]})});function of(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||is.hasOwnProperty(e)&&is[e]?(""+t).trim():t+"px"}function af(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=of(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var _h=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ei(e,t){if(t){if(_h[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function Li(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pi=null;function Aa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _i=null,br=null,Er=null;function qc(e){if(e=Ds(e)){if(typeof _i!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=mo(t),_i(e.stateNode,e.type,t))}}function cf(e){br?Er?Er.push(e):Er=[e]:br=e}function uf(){if(br){var e=br,t=Er;if(Er=br=null,qc(e),t)for(e=0;e<t.length;e++)qc(t[e])}}function df(e,t){return e(t)}function ff(){}var Fo=!1;function pf(e,t,n){if(Fo)return e(t,n);Fo=!0;try{return df(e,t,n)}finally{Fo=!1,(br!==null||Er!==null)&&(ff(),uf())}}function ws(e,t){var n=e.stateNode;if(n===null)return null;var r=mo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Y(231,t,typeof n));return n}var Ri=!1;if(fn)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{Ri=!1}function Rh(e,t,n,r,s,o,i,a,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(h){this.onError(h)}}var as=!1,_l=null,Rl=!1,Ii=null,Ih={onError:function(e){as=!0,_l=e}};function Th(e,t,n,r,s,o,i,a,c){as=!1,_l=null,Rh.apply(Ih,arguments)}function zh(e,t,n,r,s,o,i,a,c){if(Th.apply(this,arguments),as){if(as){var d=_l;as=!1,_l=null}else throw Error(Y(198));Rl||(Rl=!0,Ii=d)}}function ir(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function mf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xc(e){if(ir(e)!==e)throw Error(Y(188))}function Ah(e){var t=e.alternate;if(!t){if(t=ir(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Xc(s),e;if(o===r)return Xc(s),t;o=o.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:t}function hf(e){return e=Ah(e),e!==null?gf(e):null}function gf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gf(e);if(t!==null)return t;e=e.sibling}return null}var yf=Ct.unstable_scheduleCallback,Jc=Ct.unstable_cancelCallback,$h=Ct.unstable_shouldYield,Mh=Ct.unstable_requestPaint,He=Ct.unstable_now,Oh=Ct.unstable_getCurrentPriorityLevel,$a=Ct.unstable_ImmediatePriority,vf=Ct.unstable_UserBlockingPriority,Il=Ct.unstable_NormalPriority,Fh=Ct.unstable_LowPriority,xf=Ct.unstable_IdlePriority,co=null,Zt=null;function Dh(e){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(co,e,void 0,(e.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Wh,Uh=Math.log,Bh=Math.LN2;function Wh(e){return e>>>=0,e===0?32:31-(Uh(e)/Bh|0)|0}var el=64,tl=4194304;function rs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Tl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=rs(a):(o&=i,o!==0&&(r=rs(o)))}else i=n&~s,i!==0?r=rs(i):o!==0&&(r=rs(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ut(t),s=1<<n,r|=e[n],t&=~s;return r}function Vh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Ut(o),a=1<<i,c=s[i];c===-1?(!(a&n)||a&r)&&(s[i]=Vh(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}function Ti(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wf(){var e=el;return el<<=1,!(el&4194240)&&(el=64),e}function Do(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Os(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ut(t),e[t]=n}function Gh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ut(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Ma(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ut(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Pe=0;function jf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sf,Oa,Nf,kf,Cf,zi=!1,nl=[],En=null,Ln=null,Pn=null,js=new Map,Ss=new Map,Sn=[],Kh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zc(e,t){switch(e){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":js.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(t.pointerId)}}function Qr(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Ds(t),t!==null&&Oa(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Qh(e,t,n,r,s){switch(t){case"focusin":return En=Qr(En,e,t,n,r,s),!0;case"dragenter":return Ln=Qr(Ln,e,t,n,r,s),!0;case"mouseover":return Pn=Qr(Pn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return js.set(o,Qr(js.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Ss.set(o,Qr(Ss.get(o)||null,e,t,n,r,s)),!0}return!1}function bf(e){var t=Yn(e.target);if(t!==null){var n=ir(t);if(n!==null){if(t=n.tag,t===13){if(t=mf(n),t!==null){e.blockedOn=t,Cf(e.priority,function(){Nf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ai(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Pi=r,n.target.dispatchEvent(r),Pi=null}else return t=Ds(n),t!==null&&Oa(t),e.blockedOn=n,!1;t.shift()}return!0}function eu(e,t,n){vl(e)&&n.delete(t)}function Yh(){zi=!1,En!==null&&vl(En)&&(En=null),Ln!==null&&vl(Ln)&&(Ln=null),Pn!==null&&vl(Pn)&&(Pn=null),js.forEach(eu),Ss.forEach(eu)}function Yr(e,t){e.blockedOn===t&&(e.blockedOn=null,zi||(zi=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,Yh)))}function Ns(e){function t(s){return Yr(s,e)}if(0<nl.length){Yr(nl[0],e);for(var n=1;n<nl.length;n++){var r=nl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(En!==null&&Yr(En,e),Ln!==null&&Yr(Ln,e),Pn!==null&&Yr(Pn,e),js.forEach(t),Ss.forEach(t),n=0;n<Sn.length;n++)r=Sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sn.length&&(n=Sn[0],n.blockedOn===null);)bf(n),n.blockedOn===null&&Sn.shift()}var Lr=gn.ReactCurrentBatchConfig,zl=!0;function qh(e,t,n,r){var s=Pe,o=Lr.transition;Lr.transition=null;try{Pe=1,Fa(e,t,n,r)}finally{Pe=s,Lr.transition=o}}function Xh(e,t,n,r){var s=Pe,o=Lr.transition;Lr.transition=null;try{Pe=4,Fa(e,t,n,r)}finally{Pe=s,Lr.transition=o}}function Fa(e,t,n,r){if(zl){var s=Ai(e,t,n,r);if(s===null)qo(e,t,r,Al,n),Zc(e,r);else if(Qh(s,e,t,n,r))r.stopPropagation();else if(Zc(e,r),t&4&&-1<Kh.indexOf(e)){for(;s!==null;){var o=Ds(s);if(o!==null&&Sf(o),o=Ai(e,t,n,r),o===null&&qo(e,t,r,Al,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else qo(e,t,r,null,n)}}var Al=null;function Ai(e,t,n,r){if(Al=null,e=Aa(r),e=Yn(e),e!==null)if(t=ir(e),t===null)e=null;else if(n=t.tag,n===13){if(e=mf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Al=e,null}function Ef(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oh()){case $a:return 1;case vf:return 4;case Il:case Fh:return 16;case xf:return 536870912;default:return 16}default:return 16}}var kn=null,Da=null,xl=null;function Lf(){if(xl)return xl;var e,t=Da,n=t.length,r,s="value"in kn?kn.value:kn.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[o-r];r++);return xl=s.slice(e,1<r?1-r:void 0)}function wl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function rl(){return!0}function tu(){return!1}function Et(e){function t(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?rl:tu,this.isPropagationStopped=tu,this}return Ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rl)},persist:function(){},isPersistent:rl}),t}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=Et(Br),Fs=Ue({},Br,{view:0,detail:0}),Jh=Et(Fs),Uo,Bo,qr,uo=Ue({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ba,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qr&&(qr&&e.type==="mousemove"?(Uo=e.screenX-qr.screenX,Bo=e.screenY-qr.screenY):Bo=Uo=0,qr=e),Uo)},movementY:function(e){return"movementY"in e?e.movementY:Bo}}),nu=Et(uo),Zh=Ue({},uo,{dataTransfer:0}),eg=Et(Zh),tg=Ue({},Fs,{relatedTarget:0}),Wo=Et(tg),ng=Ue({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),rg=Et(ng),sg=Ue({},Br,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lg=Et(sg),og=Ue({},Br,{data:0}),ru=Et(og),ig={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ag={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ug(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cg[e])?!!t[e]:!1}function Ba(){return ug}var dg=Ue({},Fs,{key:function(e){if(e.key){var t=ig[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ag[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ba,charCode:function(e){return e.type==="keypress"?wl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fg=Et(dg),pg=Ue({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),su=Et(pg),mg=Ue({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ba}),hg=Et(mg),gg=Ue({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),yg=Et(gg),vg=Ue({},uo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xg=Et(vg),wg=[9,13,27,32],Wa=fn&&"CompositionEvent"in window,cs=null;fn&&"documentMode"in document&&(cs=document.documentMode);var jg=fn&&"TextEvent"in window&&!cs,Pf=fn&&(!Wa||cs&&8<cs&&11>=cs),lu=" ",ou=!1;function _f(e,t){switch(e){case"keyup":return wg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hr=!1;function Sg(e,t){switch(e){case"compositionend":return Rf(t);case"keypress":return t.which!==32?null:(ou=!0,lu);case"textInput":return e=t.data,e===lu&&ou?null:e;default:return null}}function Ng(e,t){if(hr)return e==="compositionend"||!Wa&&_f(e,t)?(e=Lf(),xl=Da=kn=null,hr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pf&&t.locale!=="ko"?null:t.data;default:return null}}var kg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!kg[e.type]:t==="textarea"}function If(e,t,n,r){cf(r),t=$l(t,"onChange"),0<t.length&&(n=new Ua("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var us=null,ks=null;function Cg(e){Wf(e,0)}function fo(e){var t=vr(e);if(tf(t))return e}function bg(e,t){if(e==="change")return t}var Tf=!1;if(fn){var Vo;if(fn){var Ho="oninput"in document;if(!Ho){var au=document.createElement("div");au.setAttribute("oninput","return;"),Ho=typeof au.oninput=="function"}Vo=Ho}else Vo=!1;Tf=Vo&&(!document.documentMode||9<document.documentMode)}function cu(){us&&(us.detachEvent("onpropertychange",zf),ks=us=null)}function zf(e){if(e.propertyName==="value"&&fo(ks)){var t=[];If(t,ks,e,Aa(e)),pf(Cg,t)}}function Eg(e,t,n){e==="focusin"?(cu(),us=t,ks=n,us.attachEvent("onpropertychange",zf)):e==="focusout"&&cu()}function Lg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fo(ks)}function Pg(e,t){if(e==="click")return fo(t)}function _g(e,t){if(e==="input"||e==="change")return fo(t)}function Rg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wt=typeof Object.is=="function"?Object.is:Rg;function Cs(e,t){if(Wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!yi.call(t,s)||!Wt(e[s],t[s]))return!1}return!0}function uu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function du(e,t){var n=uu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uu(n)}}function Af(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Af(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $f(){for(var e=window,t=Pl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Pl(e.document)}return t}function Va(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ig(e){var t=$f(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Af(n.ownerDocument.documentElement,n)){if(r!==null&&Va(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=du(n,o);var i=du(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Tg=fn&&"documentMode"in document&&11>=document.documentMode,gr=null,$i=null,ds=null,Mi=!1;function fu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mi||gr==null||gr!==Pl(r)||(r=gr,"selectionStart"in r&&Va(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ds&&Cs(ds,r)||(ds=r,r=$l($i,"onSelect"),0<r.length&&(t=new Ua("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function sl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yr={animationend:sl("Animation","AnimationEnd"),animationiteration:sl("Animation","AnimationIteration"),animationstart:sl("Animation","AnimationStart"),transitionend:sl("Transition","TransitionEnd")},Go={},Mf={};fn&&(Mf=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function po(e){if(Go[e])return Go[e];if(!yr[e])return e;var t=yr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Mf)return Go[e]=t[n];return e}var Of=po("animationend"),Ff=po("animationiteration"),Df=po("animationstart"),Uf=po("transitionend"),Bf=new Map,pu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fn(e,t){Bf.set(e,t),or(t,[e])}for(var Ko=0;Ko<pu.length;Ko++){var Qo=pu[Ko],zg=Qo.toLowerCase(),Ag=Qo[0].toUpperCase()+Qo.slice(1);Fn(zg,"on"+Ag)}Fn(Of,"onAnimationEnd");Fn(Ff,"onAnimationIteration");Fn(Df,"onAnimationStart");Fn("dblclick","onDoubleClick");Fn("focusin","onFocus");Fn("focusout","onBlur");Fn(Uf,"onTransitionEnd");Tr("onMouseEnter",["mouseout","mouseover"]);Tr("onMouseLeave",["mouseout","mouseover"]);Tr("onPointerEnter",["pointerout","pointerover"]);Tr("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$g=new Set("cancel close invalid load scroll toggle".split(" ").concat(ss));function mu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,zh(r,t,void 0,e),e.currentTarget=null}function Wf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==o&&s.isPropagationStopped())break e;mu(s,a,d),o=c}else for(i=0;i<r.length;i++){if(a=r[i],c=a.instance,d=a.currentTarget,a=a.listener,c!==o&&s.isPropagationStopped())break e;mu(s,a,d),o=c}}}if(Rl)throw e=Ii,Rl=!1,Ii=null,e}function ze(e,t){var n=t[Bi];n===void 0&&(n=t[Bi]=new Set);var r=e+"__bubble";n.has(r)||(Vf(t,e,2,!1),n.add(r))}function Yo(e,t,n){var r=0;t&&(r|=4),Vf(n,e,r,t)}var ll="_reactListening"+Math.random().toString(36).slice(2);function bs(e){if(!e[ll]){e[ll]=!0,qd.forEach(function(n){n!=="selectionchange"&&($g.has(n)||Yo(n,!1,e),Yo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ll]||(t[ll]=!0,Yo("selectionchange",!1,t))}}function Vf(e,t,n,r){switch(Ef(t)){case 1:var s=qh;break;case 4:s=Xh;break;default:s=Fa}n=s.bind(null,t,n,e),s=void 0,!Ri||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function qo(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;a!==null;){if(i=Yn(a),i===null)return;if(c=i.tag,c===5||c===6){r=o=i;continue e}a=a.parentNode}}r=r.return}pf(function(){var d=o,h=Aa(n),g=[];e:{var m=Bf.get(e);if(m!==void 0){var x=Ua,w=e;switch(e){case"keypress":if(wl(n)===0)break e;case"keydown":case"keyup":x=fg;break;case"focusin":w="focus",x=Wo;break;case"focusout":w="blur",x=Wo;break;case"beforeblur":case"afterblur":x=Wo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=eg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=hg;break;case Of:case Ff:case Df:x=rg;break;case Uf:x=yg;break;case"scroll":x=Jh;break;case"wheel":x=xg;break;case"copy":case"cut":case"paste":x=lg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=su}var S=(t&4)!==0,j=!S&&e==="scroll",p=S?m!==null?m+"Capture":null:m;S=[];for(var f=d,y;f!==null;){y=f;var N=y.stateNode;if(y.tag===5&&N!==null&&(y=N,p!==null&&(N=ws(f,p),N!=null&&S.push(Es(f,N,y)))),j)break;f=f.return}0<S.length&&(m=new x(m,w,null,n,h),g.push({event:m,listeners:S}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",m&&n!==Pi&&(w=n.relatedTarget||n.fromElement)&&(Yn(w)||w[pn]))break e;if((x||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=d,w=w?Yn(w):null,w!==null&&(j=ir(w),w!==j||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=d),x!==w)){if(S=nu,N="onMouseLeave",p="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(S=su,N="onPointerLeave",p="onPointerEnter",f="pointer"),j=x==null?m:vr(x),y=w==null?m:vr(w),m=new S(N,f+"leave",x,n,h),m.target=j,m.relatedTarget=y,N=null,Yn(h)===d&&(S=new S(p,f+"enter",w,n,h),S.target=y,S.relatedTarget=j,N=S),j=N,x&&w)t:{for(S=x,p=w,f=0,y=S;y;y=cr(y))f++;for(y=0,N=p;N;N=cr(N))y++;for(;0<f-y;)S=cr(S),f--;for(;0<y-f;)p=cr(p),y--;for(;f--;){if(S===p||p!==null&&S===p.alternate)break t;S=cr(S),p=cr(p)}S=null}else S=null;x!==null&&hu(g,m,x,S,!1),w!==null&&j!==null&&hu(g,j,w,S,!0)}}e:{if(m=d?vr(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var R=bg;else if(iu(m))if(Tf)R=_g;else{R=Lg;var P=Eg}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(R=Pg);if(R&&(R=R(e,d))){If(g,R,n,h);break e}P&&P(e,m,d),e==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&ki(m,"number",m.value)}switch(P=d?vr(d):window,e){case"focusin":(iu(P)||P.contentEditable==="true")&&(gr=P,$i=d,ds=null);break;case"focusout":ds=$i=gr=null;break;case"mousedown":Mi=!0;break;case"contextmenu":case"mouseup":case"dragend":Mi=!1,fu(g,n,h);break;case"selectionchange":if(Tg)break;case"keydown":case"keyup":fu(g,n,h)}var F;if(Wa)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else hr?_f(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Pf&&n.locale!=="ko"&&(hr||_!=="onCompositionStart"?_==="onCompositionEnd"&&hr&&(F=Lf()):(kn=h,Da="value"in kn?kn.value:kn.textContent,hr=!0)),P=$l(d,_),0<P.length&&(_=new ru(_,e,null,n,h),g.push({event:_,listeners:P}),F?_.data=F:(F=Rf(n),F!==null&&(_.data=F)))),(F=jg?Sg(e,n):Ng(e,n))&&(d=$l(d,"onBeforeInput"),0<d.length&&(h=new ru("onBeforeInput","beforeinput",null,n,h),g.push({event:h,listeners:d}),h.data=F))}Wf(g,t)})}function Es(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $l(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ws(e,n),o!=null&&r.unshift(Es(e,o,s)),o=ws(e,t),o!=null&&r.push(Es(e,o,s))),e=e.return}return r}function cr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hu(e,t,n,r,s){for(var o=t._reactName,i=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,s?(c=ws(n,o),c!=null&&i.unshift(Es(n,c,a))):s||(c=ws(n,o),c!=null&&i.push(Es(n,c,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Mg=/\r\n?/g,Og=/\u0000|\uFFFD/g;function gu(e){return(typeof e=="string"?e:""+e).replace(Mg,`
`).replace(Og,"")}function ol(e,t,n){if(t=gu(t),gu(e)!==t&&n)throw Error(Y(425))}function Ml(){}var Oi=null,Fi=null;function Di(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ui=typeof setTimeout=="function"?setTimeout:void 0,Fg=typeof clearTimeout=="function"?clearTimeout:void 0,yu=typeof Promise=="function"?Promise:void 0,Dg=typeof queueMicrotask=="function"?queueMicrotask:typeof yu<"u"?function(e){return yu.resolve(null).then(e).catch(Ug)}:Ui;function Ug(e){setTimeout(function(){throw e})}function Xo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ns(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ns(t)}function _n(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wr=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Wr,Ls="__reactProps$"+Wr,pn="__reactContainer$"+Wr,Bi="__reactEvents$"+Wr,Bg="__reactListeners$"+Wr,Wg="__reactHandles$"+Wr;function Yn(e){var t=e[Qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pn]||n[Qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vu(e);e!==null;){if(n=e[Qt])return n;e=vu(e)}return t}e=n,n=e.parentNode}return null}function Ds(e){return e=e[Qt]||e[pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function mo(e){return e[Ls]||null}var Wi=[],xr=-1;function Dn(e){return{current:e}}function Ae(e){0>xr||(e.current=Wi[xr],Wi[xr]=null,xr--)}function Ie(e,t){xr++,Wi[xr]=e.current,e.current=t}var On={},ct=Dn(On),yt=Dn(!1),er=On;function zr(e,t){var n=e.type.contextTypes;if(!n)return On;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function vt(e){return e=e.childContextTypes,e!=null}function Ol(){Ae(yt),Ae(ct)}function xu(e,t,n){if(ct.current!==On)throw Error(Y(168));Ie(ct,t),Ie(yt,n)}function Hf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Y(108,Eh(e)||"Unknown",s));return Ue({},n,r)}function Fl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||On,er=ct.current,Ie(ct,e),Ie(yt,yt.current),!0}function wu(e,t,n){var r=e.stateNode;if(!r)throw Error(Y(169));n?(e=Hf(e,t,er),r.__reactInternalMemoizedMergedChildContext=e,Ae(yt),Ae(ct),Ie(ct,e)):Ae(yt),Ie(yt,n)}var rn=null,ho=!1,Jo=!1;function Gf(e){rn===null?rn=[e]:rn.push(e)}function Vg(e){ho=!0,Gf(e)}function Un(){if(!Jo&&rn!==null){Jo=!0;var e=0,t=Pe;try{var n=rn;for(Pe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rn=null,ho=!1}catch(s){throw rn!==null&&(rn=rn.slice(e+1)),yf($a,Un),s}finally{Pe=t,Jo=!1}}return null}var wr=[],jr=0,Dl=null,Ul=0,Pt=[],_t=0,tr=null,on=1,an="";function Gn(e,t){wr[jr++]=Ul,wr[jr++]=Dl,Dl=e,Ul=t}function Kf(e,t,n){Pt[_t++]=on,Pt[_t++]=an,Pt[_t++]=tr,tr=e;var r=on;e=an;var s=32-Ut(r)-1;r&=~(1<<s),n+=1;var o=32-Ut(t)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,on=1<<32-Ut(t)+s|n<<s|r,an=o+e}else on=1<<o|n<<s|r,an=e}function Ha(e){e.return!==null&&(Gn(e,1),Kf(e,1,0))}function Ga(e){for(;e===Dl;)Dl=wr[--jr],wr[jr]=null,Ul=wr[--jr],wr[jr]=null;for(;e===tr;)tr=Pt[--_t],Pt[_t]=null,an=Pt[--_t],Pt[_t]=null,on=Pt[--_t],Pt[_t]=null}var Nt=null,St=null,$e=!1,Dt=null;function Qf(e,t){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ju(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nt=e,St=_n(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nt=e,St=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=tr!==null?{id:on,overflow:an}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Nt=e,St=null,!0):!1;default:return!1}}function Vi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Hi(e){if($e){var t=St;if(t){var n=t;if(!ju(e,t)){if(Vi(e))throw Error(Y(418));t=_n(n.nextSibling);var r=Nt;t&&ju(e,t)?Qf(r,n):(e.flags=e.flags&-4097|2,$e=!1,Nt=e)}}else{if(Vi(e))throw Error(Y(418));e.flags=e.flags&-4097|2,$e=!1,Nt=e}}}function Su(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nt=e}function il(e){if(e!==Nt)return!1;if(!$e)return Su(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Di(e.type,e.memoizedProps)),t&&(t=St)){if(Vi(e))throw Yf(),Error(Y(418));for(;t;)Qf(e,t),t=_n(t.nextSibling)}if(Su(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){St=_n(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}St=null}}else St=Nt?_n(e.stateNode.nextSibling):null;return!0}function Yf(){for(var e=St;e;)e=_n(e.nextSibling)}function Ar(){St=Nt=null,$e=!1}function Ka(e){Dt===null?Dt=[e]:Dt.push(e)}var Hg=gn.ReactCurrentBatchConfig;function Xr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=s.refs;i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,e))}return e}function al(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nu(e){var t=e._init;return t(e._payload)}function qf(e){function t(p,f){if(e){var y=p.deletions;y===null?(p.deletions=[f],p.flags|=16):y.push(f)}}function n(p,f){if(!e)return null;for(;f!==null;)t(p,f),f=f.sibling;return null}function r(p,f){for(p=new Map;f!==null;)f.key!==null?p.set(f.key,f):p.set(f.index,f),f=f.sibling;return p}function s(p,f){return p=zn(p,f),p.index=0,p.sibling=null,p}function o(p,f,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<f?(p.flags|=2,f):y):(p.flags|=2,f)):(p.flags|=1048576,f)}function i(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,f,y,N){return f===null||f.tag!==6?(f=li(y,p.mode,N),f.return=p,f):(f=s(f,y),f.return=p,f)}function c(p,f,y,N){var R=y.type;return R===mr?h(p,f,y.props.children,N,y.key):f!==null&&(f.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===wn&&Nu(R)===f.type)?(N=s(f,y.props),N.ref=Xr(p,f,y),N.return=p,N):(N=El(y.type,y.key,y.props,null,p.mode,N),N.ref=Xr(p,f,y),N.return=p,N)}function d(p,f,y,N){return f===null||f.tag!==4||f.stateNode.containerInfo!==y.containerInfo||f.stateNode.implementation!==y.implementation?(f=oi(y,p.mode,N),f.return=p,f):(f=s(f,y.children||[]),f.return=p,f)}function h(p,f,y,N,R){return f===null||f.tag!==7?(f=Zn(y,p.mode,N,R),f.return=p,f):(f=s(f,y),f.return=p,f)}function g(p,f,y){if(typeof f=="string"&&f!==""||typeof f=="number")return f=li(""+f,p.mode,y),f.return=p,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Xs:return y=El(f.type,f.key,f.props,null,p.mode,y),y.ref=Xr(p,null,f),y.return=p,y;case pr:return f=oi(f,p.mode,y),f.return=p,f;case wn:var N=f._init;return g(p,N(f._payload),y)}if(ns(f)||Gr(f))return f=Zn(f,p.mode,y,null),f.return=p,f;al(p,f)}return null}function m(p,f,y,N){var R=f!==null?f.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return R!==null?null:a(p,f,""+y,N);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xs:return y.key===R?c(p,f,y,N):null;case pr:return y.key===R?d(p,f,y,N):null;case wn:return R=y._init,m(p,f,R(y._payload),N)}if(ns(y)||Gr(y))return R!==null?null:h(p,f,y,N,null);al(p,y)}return null}function x(p,f,y,N,R){if(typeof N=="string"&&N!==""||typeof N=="number")return p=p.get(y)||null,a(f,p,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Xs:return p=p.get(N.key===null?y:N.key)||null,c(f,p,N,R);case pr:return p=p.get(N.key===null?y:N.key)||null,d(f,p,N,R);case wn:var P=N._init;return x(p,f,y,P(N._payload),R)}if(ns(N)||Gr(N))return p=p.get(y)||null,h(f,p,N,R,null);al(f,N)}return null}function w(p,f,y,N){for(var R=null,P=null,F=f,_=f=0,V=null;F!==null&&_<y.length;_++){F.index>_?(V=F,F=null):V=F.sibling;var $=m(p,F,y[_],N);if($===null){F===null&&(F=V);break}e&&F&&$.alternate===null&&t(p,F),f=o($,f,_),P===null?R=$:P.sibling=$,P=$,F=V}if(_===y.length)return n(p,F),$e&&Gn(p,_),R;if(F===null){for(;_<y.length;_++)F=g(p,y[_],N),F!==null&&(f=o(F,f,_),P===null?R=F:P.sibling=F,P=F);return $e&&Gn(p,_),R}for(F=r(p,F);_<y.length;_++)V=x(F,p,_,y[_],N),V!==null&&(e&&V.alternate!==null&&F.delete(V.key===null?_:V.key),f=o(V,f,_),P===null?R=V:P.sibling=V,P=V);return e&&F.forEach(function(W){return t(p,W)}),$e&&Gn(p,_),R}function S(p,f,y,N){var R=Gr(y);if(typeof R!="function")throw Error(Y(150));if(y=R.call(y),y==null)throw Error(Y(151));for(var P=R=null,F=f,_=f=0,V=null,$=y.next();F!==null&&!$.done;_++,$=y.next()){F.index>_?(V=F,F=null):V=F.sibling;var W=m(p,F,$.value,N);if(W===null){F===null&&(F=V);break}e&&F&&W.alternate===null&&t(p,F),f=o(W,f,_),P===null?R=W:P.sibling=W,P=W,F=V}if($.done)return n(p,F),$e&&Gn(p,_),R;if(F===null){for(;!$.done;_++,$=y.next())$=g(p,$.value,N),$!==null&&(f=o($,f,_),P===null?R=$:P.sibling=$,P=$);return $e&&Gn(p,_),R}for(F=r(p,F);!$.done;_++,$=y.next())$=x(F,p,_,$.value,N),$!==null&&(e&&$.alternate!==null&&F.delete($.key===null?_:$.key),f=o($,f,_),P===null?R=$:P.sibling=$,P=$);return e&&F.forEach(function(ue){return t(p,ue)}),$e&&Gn(p,_),R}function j(p,f,y,N){if(typeof y=="object"&&y!==null&&y.type===mr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Xs:e:{for(var R=y.key,P=f;P!==null;){if(P.key===R){if(R=y.type,R===mr){if(P.tag===7){n(p,P.sibling),f=s(P,y.props.children),f.return=p,p=f;break e}}else if(P.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===wn&&Nu(R)===P.type){n(p,P.sibling),f=s(P,y.props),f.ref=Xr(p,P,y),f.return=p,p=f;break e}n(p,P);break}else t(p,P);P=P.sibling}y.type===mr?(f=Zn(y.props.children,p.mode,N,y.key),f.return=p,p=f):(N=El(y.type,y.key,y.props,null,p.mode,N),N.ref=Xr(p,f,y),N.return=p,p=N)}return i(p);case pr:e:{for(P=y.key;f!==null;){if(f.key===P)if(f.tag===4&&f.stateNode.containerInfo===y.containerInfo&&f.stateNode.implementation===y.implementation){n(p,f.sibling),f=s(f,y.children||[]),f.return=p,p=f;break e}else{n(p,f);break}else t(p,f);f=f.sibling}f=oi(y,p.mode,N),f.return=p,p=f}return i(p);case wn:return P=y._init,j(p,f,P(y._payload),N)}if(ns(y))return w(p,f,y,N);if(Gr(y))return S(p,f,y,N);al(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,f!==null&&f.tag===6?(n(p,f.sibling),f=s(f,y),f.return=p,p=f):(n(p,f),f=li(y,p.mode,N),f.return=p,p=f),i(p)):n(p,f)}return j}var $r=qf(!0),Xf=qf(!1),Bl=Dn(null),Wl=null,Sr=null,Qa=null;function Ya(){Qa=Sr=Wl=null}function qa(e){var t=Bl.current;Ae(Bl),e._currentValue=t}function Gi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pr(e,t){Wl=e,Qa=Sr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gt=!0),e.firstContext=null)}function Tt(e){var t=e._currentValue;if(Qa!==e)if(e={context:e,memoizedValue:t,next:null},Sr===null){if(Wl===null)throw Error(Y(308));Sr=e,Wl.dependencies={lanes:0,firstContext:e}}else Sr=Sr.next=e;return t}var qn=null;function Xa(e){qn===null?qn=[e]:qn.push(e)}function Jf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Xa(t)):(n.next=s.next,s.next=n),t.interleaved=n,mn(e,r)}function mn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var jn=!1;function Ja(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function un(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,mn(e,n)}return s=r.interleaved,s===null?(t.next=t,Xa(r)):(t.next=s.next,s.next=t),r.interleaved=t,mn(e,n)}function jl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ma(e,n)}}function ku(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vl(e,t,n,r){var s=e.updateQueue;jn=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==i&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=c))}if(o!==null){var g=s.baseState;i=0,h=d=c=null,a=o;do{var m=a.lane,x=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:x,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=e,S=a;switch(m=t,x=n,S.tag){case 1:if(w=S.payload,typeof w=="function"){g=w.call(x,g,m);break e}g=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=S.payload,m=typeof w=="function"?w.call(x,g,m):w,m==null)break e;g=Ue({},g,m);break e;case 2:jn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else x={eventTime:x,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=x,c=g):h=h.next=x,i|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=g),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);rr|=i,e.lanes=i,e.memoizedState=g}}function Cu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var Us={},en=Dn(Us),Ps=Dn(Us),_s=Dn(Us);function Xn(e){if(e===Us)throw Error(Y(174));return e}function Za(e,t){switch(Ie(_s,t),Ie(Ps,e),Ie(en,Us),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:bi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=bi(t,e)}Ae(en),Ie(en,t)}function Mr(){Ae(en),Ae(Ps),Ae(_s)}function ep(e){Xn(_s.current);var t=Xn(en.current),n=bi(t,e.type);t!==n&&(Ie(Ps,e),Ie(en,n))}function ec(e){Ps.current===e&&(Ae(en),Ae(Ps))}var Oe=Dn(0);function Hl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zo=[];function tc(){for(var e=0;e<Zo.length;e++)Zo[e]._workInProgressVersionPrimary=null;Zo.length=0}var Sl=gn.ReactCurrentDispatcher,ei=gn.ReactCurrentBatchConfig,nr=0,Fe=null,Ye=null,Ze=null,Gl=!1,fs=!1,Rs=0,Gg=0;function ot(){throw Error(Y(321))}function nc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wt(e[n],t[n]))return!1;return!0}function rc(e,t,n,r,s,o){if(nr=o,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Sl.current=e===null||e.memoizedState===null?qg:Xg,e=n(r,s),fs){o=0;do{if(fs=!1,Rs=0,25<=o)throw Error(Y(301));o+=1,Ze=Ye=null,t.updateQueue=null,Sl.current=Jg,e=n(r,s)}while(fs)}if(Sl.current=Kl,t=Ye!==null&&Ye.next!==null,nr=0,Ze=Ye=Fe=null,Gl=!1,t)throw Error(Y(300));return e}function sc(){var e=Rs!==0;return Rs=0,e}function Kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Fe.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function zt(){if(Ye===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=Ze===null?Fe.memoizedState:Ze.next;if(t!==null)Ze=t,Ye=e;else{if(e===null)throw Error(Y(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},Ze===null?Fe.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function Is(e,t){return typeof t=="function"?t(e):t}function ti(e){var t=zt(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=Ye,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=i=null,c=null,d=o;do{var h=d.lane;if((nr&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var g={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=g,i=r):c=c.next=g,Fe.lanes|=h,rr|=h}d=d.next}while(d!==null&&d!==o);c===null?i=r:c.next=a,Wt(r,t.memoizedState)||(gt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Fe.lanes|=o,rr|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ni(e){var t=zt(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);Wt(o,t.memoizedState)||(gt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function tp(){}function np(e,t){var n=Fe,r=zt(),s=t(),o=!Wt(r.memoizedState,s);if(o&&(r.memoizedState=s,gt=!0),r=r.queue,lc(lp.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,Ts(9,sp.bind(null,n,r,s,t),void 0,null),et===null)throw Error(Y(349));nr&30||rp(n,t,s)}return s}function rp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function sp(e,t,n,r){t.value=n,t.getSnapshot=r,op(t)&&ip(e)}function lp(e,t,n){return n(function(){op(t)&&ip(e)})}function op(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wt(e,n)}catch{return!0}}function ip(e){var t=mn(e,1);t!==null&&Bt(t,e,1,-1)}function bu(e){var t=Kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:e},t.queue=e,e=e.dispatch=Yg.bind(null,Fe,e),[t.memoizedState,e]}function Ts(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ap(){return zt().memoizedState}function Nl(e,t,n,r){var s=Kt();Fe.flags|=e,s.memoizedState=Ts(1|t,n,void 0,r===void 0?null:r)}function go(e,t,n,r){var s=zt();r=r===void 0?null:r;var o=void 0;if(Ye!==null){var i=Ye.memoizedState;if(o=i.destroy,r!==null&&nc(r,i.deps)){s.memoizedState=Ts(t,n,o,r);return}}Fe.flags|=e,s.memoizedState=Ts(1|t,n,o,r)}function Eu(e,t){return Nl(8390656,8,e,t)}function lc(e,t){return go(2048,8,e,t)}function cp(e,t){return go(4,2,e,t)}function up(e,t){return go(4,4,e,t)}function dp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fp(e,t,n){return n=n!=null?n.concat([e]):null,go(4,4,dp.bind(null,t,e),n)}function oc(){}function pp(e,t){var n=zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function mp(e,t){var n=zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function hp(e,t,n){return nr&21?(Wt(n,t)||(n=wf(),Fe.lanes|=n,rr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=n)}function Kg(e,t){var n=Pe;Pe=n!==0&&4>n?n:4,e(!0);var r=ei.transition;ei.transition={};try{e(!1),t()}finally{Pe=n,ei.transition=r}}function gp(){return zt().memoizedState}function Qg(e,t,n){var r=Tn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yp(e))vp(t,n);else if(n=Jf(e,t,n,r),n!==null){var s=dt();Bt(n,e,r,s),xp(n,t,r)}}function Yg(e,t,n){var r=Tn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yp(e))vp(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,a=o(i,n);if(s.hasEagerState=!0,s.eagerState=a,Wt(a,i)){var c=t.interleaved;c===null?(s.next=s,Xa(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Jf(e,t,s,r),n!==null&&(s=dt(),Bt(n,e,r,s),xp(n,t,r))}}function yp(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function vp(e,t){fs=Gl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function xp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ma(e,n)}}var Kl={readContext:Tt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},qg={readContext:Tt,useCallback:function(e,t){return Kt().memoizedState=[e,t===void 0?null:t],e},useContext:Tt,useEffect:Eu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Nl(4194308,4,dp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Nl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Nl(4,2,e,t)},useMemo:function(e,t){var n=Kt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Kt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qg.bind(null,Fe,e),[r.memoizedState,e]},useRef:function(e){var t=Kt();return e={current:e},t.memoizedState=e},useState:bu,useDebugValue:oc,useDeferredValue:function(e){return Kt().memoizedState=e},useTransition:function(){var e=bu(!1),t=e[0];return e=Kg.bind(null,e[1]),Kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Fe,s=Kt();if($e){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=t(),et===null)throw Error(Y(349));nr&30||rp(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Eu(lp.bind(null,r,o,e),[e]),r.flags|=2048,Ts(9,sp.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Kt(),t=et.identifierPrefix;if($e){var n=an,r=on;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Rs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Gg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xg={readContext:Tt,useCallback:pp,useContext:Tt,useEffect:lc,useImperativeHandle:fp,useInsertionEffect:cp,useLayoutEffect:up,useMemo:mp,useReducer:ti,useRef:ap,useState:function(){return ti(Is)},useDebugValue:oc,useDeferredValue:function(e){var t=zt();return hp(t,Ye.memoizedState,e)},useTransition:function(){var e=ti(Is)[0],t=zt().memoizedState;return[e,t]},useMutableSource:tp,useSyncExternalStore:np,useId:gp,unstable_isNewReconciler:!1},Jg={readContext:Tt,useCallback:pp,useContext:Tt,useEffect:lc,useImperativeHandle:fp,useInsertionEffect:cp,useLayoutEffect:up,useMemo:mp,useReducer:ni,useRef:ap,useState:function(){return ni(Is)},useDebugValue:oc,useDeferredValue:function(e){var t=zt();return Ye===null?t.memoizedState=e:hp(t,Ye.memoizedState,e)},useTransition:function(){var e=ni(Is)[0],t=zt().memoizedState;return[e,t]},useMutableSource:tp,useSyncExternalStore:np,useId:gp,unstable_isNewReconciler:!1};function Ot(e,t){if(e&&e.defaultProps){t=Ue({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ki(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ue({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yo={isMounted:function(e){return(e=e._reactInternals)?ir(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dt(),s=Tn(e),o=un(r,s);o.payload=t,n!=null&&(o.callback=n),t=Rn(e,o,s),t!==null&&(Bt(t,e,s,r),jl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dt(),s=Tn(e),o=un(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Rn(e,o,s),t!==null&&(Bt(t,e,s,r),jl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dt(),r=Tn(e),s=un(n,r);s.tag=2,t!=null&&(s.callback=t),t=Rn(e,s,r),t!==null&&(Bt(t,e,r,n),jl(t,e,r))}};function Lu(e,t,n,r,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!Cs(n,r)||!Cs(s,o):!0}function wp(e,t,n){var r=!1,s=On,o=t.contextType;return typeof o=="object"&&o!==null?o=Tt(o):(s=vt(t)?er:ct.current,r=t.contextTypes,o=(r=r!=null)?zr(e,s):On),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Pu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function Qi(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Ja(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Tt(o):(o=vt(t)?er:ct.current,s.context=zr(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Ki(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&yo.enqueueReplaceState(s,s.state,null),Vl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Or(e,t){try{var n="",r=t;do n+=bh(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function ri(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Yi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Zg=typeof WeakMap=="function"?WeakMap:Map;function jp(e,t,n){n=un(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yl||(Yl=!0,la=r),Yi(e,t)},n}function Sp(e,t,n){n=un(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Yi(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Yi(e,t),typeof r!="function"&&(In===null?In=new Set([this]):In.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function _u(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Zg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=py.bind(null,e,t,n),t.then(e,e))}function Ru(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Iu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=un(-1,1),t.tag=2,Rn(n,t,1))),n.lanes|=1),e)}var ey=gn.ReactCurrentOwner,gt=!1;function ut(e,t,n,r){t.child=e===null?Xf(t,null,n,r):$r(t,e.child,n,r)}function Tu(e,t,n,r,s){n=n.render;var o=t.ref;return Pr(t,s),r=rc(e,t,n,r,o,s),n=sc(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hn(e,t,s)):($e&&n&&Ha(t),t.flags|=1,ut(e,t,r,s),t.child)}function zu(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!mc(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Np(e,t,o,r,s)):(e=El(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Cs,n(i,r)&&e.ref===t.ref)return hn(e,t,s)}return t.flags|=1,e=zn(o,r),e.ref=t.ref,e.return=t,t.child=e}function Np(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Cs(o,r)&&e.ref===t.ref)if(gt=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(gt=!0);else return t.lanes=e.lanes,hn(e,t,s)}return qi(e,t,n,r,s)}function kp(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(kr,jt),jt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ie(kr,jt),jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ie(kr,jt),jt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ie(kr,jt),jt|=r;return ut(e,t,s,n),t.child}function Cp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function qi(e,t,n,r,s){var o=vt(n)?er:ct.current;return o=zr(t,o),Pr(t,s),n=rc(e,t,n,r,o,s),r=sc(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hn(e,t,s)):($e&&r&&Ha(t),t.flags|=1,ut(e,t,n,s),t.child)}function Au(e,t,n,r,s){if(vt(n)){var o=!0;Fl(t)}else o=!1;if(Pr(t,s),t.stateNode===null)kl(e,t),wp(t,n,r),Qi(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var c=i.context,d=n.contextType;typeof d=="object"&&d!==null?d=Tt(d):(d=vt(n)?er:ct.current,d=zr(t,d));var h=n.getDerivedStateFromProps,g=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";g||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||c!==d)&&Pu(t,i,r,d),jn=!1;var m=t.memoizedState;i.state=m,Vl(t,r,i,s),c=t.memoizedState,a!==r||m!==c||yt.current||jn?(typeof h=="function"&&(Ki(t,n,h,r),c=t.memoizedState),(a=jn||Lu(t,n,a,r,m,c,d))?(g||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=d,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Zf(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:Ot(t.type,a),i.props=d,g=t.pendingProps,m=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Tt(c):(c=vt(n)?er:ct.current,c=zr(t,c));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==g||m!==c)&&Pu(t,i,r,c),jn=!1,m=t.memoizedState,i.state=m,Vl(t,r,i,s);var w=t.memoizedState;a!==g||m!==w||yt.current||jn?(typeof x=="function"&&(Ki(t,n,x,r),w=t.memoizedState),(d=jn||Lu(t,n,d,r,m,w,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,w,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,w,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),i.props=r,i.state=w,i.context=c,r=d):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Xi(e,t,n,r,o,s)}function Xi(e,t,n,r,s,o){Cp(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&wu(t,n,!1),hn(e,t,o);r=t.stateNode,ey.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=$r(t,e.child,null,o),t.child=$r(t,null,a,o)):ut(e,t,a,o),t.memoizedState=r.state,s&&wu(t,n,!0),t.child}function bp(e){var t=e.stateNode;t.pendingContext?xu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xu(e,t.context,!1),Za(e,t.containerInfo)}function $u(e,t,n,r,s){return Ar(),Ka(s),t.flags|=256,ut(e,t,n,r),t.child}var Ji={dehydrated:null,treeContext:null,retryLane:0};function Zi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ep(e,t,n){var r=t.pendingProps,s=Oe.current,o=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ie(Oe,s&1),e===null)return Hi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=wo(i,r,0,null),e=Zn(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Zi(n),t.memoizedState=Ji,e):ic(t,i));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return ty(e,t,i,r,a,s,n);if(o){o=r.fallback,i=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=zn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=zn(a,o):(o=Zn(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?Zi(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=Ji,r}return o=e.child,e=o.sibling,r=zn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ic(e,t){return t=wo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function cl(e,t,n,r){return r!==null&&Ka(r),$r(t,e.child,null,n),e=ic(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ty(e,t,n,r,s,o,i){if(n)return t.flags&256?(t.flags&=-257,r=ri(Error(Y(422))),cl(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=wo({mode:"visible",children:r.children},s,0,null),o=Zn(o,s,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&$r(t,e.child,null,i),t.child.memoizedState=Zi(i),t.memoizedState=Ji,o);if(!(t.mode&1))return cl(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Y(419)),r=ri(o,r,void 0),cl(e,t,i,r)}if(a=(i&e.childLanes)!==0,gt||a){if(r=et,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,mn(e,s),Bt(r,e,s,-1))}return pc(),r=ri(Error(Y(421))),cl(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=my.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,St=_n(s.nextSibling),Nt=t,$e=!0,Dt=null,e!==null&&(Pt[_t++]=on,Pt[_t++]=an,Pt[_t++]=tr,on=e.id,an=e.overflow,tr=t),t=ic(t,r.children),t.flags|=4096,t)}function Mu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Gi(e.return,t,n)}function si(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Lp(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(ut(e,t,r.children,n),r=Oe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mu(e,n,t);else if(e.tag===19)Mu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ie(Oe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Hl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),si(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Hl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}si(t,!0,n,null,o);break;case"together":si(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),rr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,n=zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ny(e,t,n){switch(t.tag){case 3:bp(t),Ar();break;case 5:ep(t);break;case 1:vt(t.type)&&Fl(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ie(Bl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Oe,Oe.current&1),t.flags|=128,null):n&t.child.childLanes?Ep(e,t,n):(Ie(Oe,Oe.current&1),e=hn(e,t,n),e!==null?e.sibling:null);Ie(Oe,Oe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Lp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Oe,Oe.current),r)break;return null;case 22:case 23:return t.lanes=0,kp(e,t,n)}return hn(e,t,n)}var Pp,ea,_p,Rp;Pp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ea=function(){};_p=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Xn(en.current);var o=null;switch(n){case"input":s=Si(e,s),r=Si(e,r),o=[];break;case"select":s=Ue({},s,{value:void 0}),r=Ue({},r,{value:void 0}),o=[];break;case"textarea":s=Ci(e,s),r=Ci(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ml)}Ei(n,r);var i;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(vs.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(i in a)!a.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&a[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(vs.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ze("scroll",e),o||a===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};Rp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Jr(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function it(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ry(e,t,n){var r=t.pendingProps;switch(Ga(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(t),null;case 1:return vt(t.type)&&Ol(),it(t),null;case 3:return r=t.stateNode,Mr(),Ae(yt),Ae(ct),tc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(il(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Dt!==null&&(aa(Dt),Dt=null))),ea(e,t),it(t),null;case 5:ec(t);var s=Xn(_s.current);if(n=t.type,e!==null&&t.stateNode!=null)_p(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Y(166));return it(t),null}if(e=Xn(en.current),il(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Qt]=t,r[Ls]=o,e=(t.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(s=0;s<ss.length;s++)ze(ss[s],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":Gc(r,o),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ze("invalid",r);break;case"textarea":Qc(r,o),ze("invalid",r)}Ei(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&ol(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&ol(r.textContent,a,e),s=["children",""+a]):vs.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&ze("scroll",r)}switch(n){case"input":Js(r),Kc(r,o,!0);break;case"textarea":Js(r),Yc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ml)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Qt]=t,e[Ls]=r,Pp(e,t,!1,!1),t.stateNode=e;e:{switch(i=Li(n,r),n){case"dialog":ze("cancel",e),ze("close",e),s=r;break;case"iframe":case"object":case"embed":ze("load",e),s=r;break;case"video":case"audio":for(s=0;s<ss.length;s++)ze(ss[s],e);s=r;break;case"source":ze("error",e),s=r;break;case"img":case"image":case"link":ze("error",e),ze("load",e),s=r;break;case"details":ze("toggle",e),s=r;break;case"input":Gc(e,r),s=Si(e,r),ze("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ue({},r,{value:void 0}),ze("invalid",e);break;case"textarea":Qc(e,r),s=Ci(e,r),ze("invalid",e);break;default:s=r}Ei(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?af(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lf(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&xs(e,c):typeof c=="number"&&xs(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(vs.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ze("scroll",e):c!=null&&Ra(e,o,c,i))}switch(n){case"input":Js(e),Kc(e,r,!1);break;case"textarea":Js(e),Yc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Mn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Cr(e,!!r.multiple,o,!1):r.defaultValue!=null&&Cr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ml)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return it(t),null;case 6:if(e&&t.stateNode!=null)Rp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Y(166));if(n=Xn(_s.current),Xn(en.current),il(t)){if(r=t.stateNode,n=t.memoizedProps,r[Qt]=t,(o=r.nodeValue!==n)&&(e=Nt,e!==null))switch(e.tag){case 3:ol(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ol(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qt]=t,t.stateNode=r}return it(t),null;case 13:if(Ae(Oe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&St!==null&&t.mode&1&&!(t.flags&128))Yf(),Ar(),t.flags|=98560,o=!1;else if(o=il(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Y(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[Qt]=t}else Ar(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;it(t),o=!1}else Dt!==null&&(aa(Dt),Dt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Oe.current&1?qe===0&&(qe=3):pc())),t.updateQueue!==null&&(t.flags|=4),it(t),null);case 4:return Mr(),ea(e,t),e===null&&bs(t.stateNode.containerInfo),it(t),null;case 10:return qa(t.type._context),it(t),null;case 17:return vt(t.type)&&Ol(),it(t),null;case 19:if(Ae(Oe),o=t.memoizedState,o===null)return it(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)Jr(o,!1);else{if(qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Hl(e),i!==null){for(t.flags|=128,Jr(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ie(Oe,Oe.current&1|2),t.child}e=e.sibling}o.tail!==null&&He()>Fr&&(t.flags|=128,r=!0,Jr(o,!1),t.lanes=4194304)}else{if(!r)if(e=Hl(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Jr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!$e)return it(t),null}else 2*He()-o.renderingStartTime>Fr&&n!==1073741824&&(t.flags|=128,r=!0,Jr(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=He(),t.sibling=null,n=Oe.current,Ie(Oe,r?n&1|2:n&1),t):(it(t),null);case 22:case 23:return fc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?jt&1073741824&&(it(t),t.subtreeFlags&6&&(t.flags|=8192)):it(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function sy(e,t){switch(Ga(t),t.tag){case 1:return vt(t.type)&&Ol(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mr(),Ae(yt),Ae(ct),tc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ec(t),null;case 13:if(Ae(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));Ar()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ae(Oe),null;case 4:return Mr(),null;case 10:return qa(t.type._context),null;case 22:case 23:return fc(),null;case 24:return null;default:return null}}var ul=!1,at=!1,ly=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Nr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(e,t,r)}else n.current=null}function ta(e,t,n){try{n()}catch(r){We(e,t,r)}}var Ou=!1;function oy(e,t){if(Oi=zl,e=$f(),Va(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,c=-1,d=0,h=0,g=e,m=null;t:for(;;){for(var x;g!==n||s!==0&&g.nodeType!==3||(a=i+s),g!==o||r!==0&&g.nodeType!==3||(c=i+r),g.nodeType===3&&(i+=g.nodeValue.length),(x=g.firstChild)!==null;)m=g,g=x;for(;;){if(g===e)break t;if(m===n&&++d===s&&(a=i),m===o&&++h===r&&(c=i),(x=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=x}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fi={focusedElem:e,selectionRange:n},zl=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var S=w.memoizedProps,j=w.memoizedState,p=t.stateNode,f=p.getSnapshotBeforeUpdate(t.elementType===t.type?S:Ot(t.type,S),j);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(N){We(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return w=Ou,Ou=!1,w}function ps(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&ta(t,n,o)}s=s.next}while(s!==r)}}function vo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function na(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ip(e){var t=e.alternate;t!==null&&(e.alternate=null,Ip(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qt],delete t[Ls],delete t[Bi],delete t[Bg],delete t[Wg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tp(e){return e.tag===5||e.tag===3||e.tag===4}function Fu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ra(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ml));else if(r!==4&&(e=e.child,e!==null))for(ra(e,t,n),e=e.sibling;e!==null;)ra(e,t,n),e=e.sibling}function sa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(sa(e,t,n),e=e.sibling;e!==null;)sa(e,t,n),e=e.sibling}var nt=null,Ft=!1;function xn(e,t,n){for(n=n.child;n!==null;)zp(e,t,n),n=n.sibling}function zp(e,t,n){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(co,n)}catch{}switch(n.tag){case 5:at||Nr(n,t);case 6:var r=nt,s=Ft;nt=null,xn(e,t,n),nt=r,Ft=s,nt!==null&&(Ft?(e=nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(Ft?(e=nt,n=n.stateNode,e.nodeType===8?Xo(e.parentNode,n):e.nodeType===1&&Xo(e,n),Ns(e)):Xo(nt,n.stateNode));break;case 4:r=nt,s=Ft,nt=n.stateNode.containerInfo,Ft=!0,xn(e,t,n),nt=r,Ft=s;break;case 0:case 11:case 14:case 15:if(!at&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&ta(n,t,i),s=s.next}while(s!==r)}xn(e,t,n);break;case 1:if(!at&&(Nr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){We(n,t,a)}xn(e,t,n);break;case 21:xn(e,t,n);break;case 22:n.mode&1?(at=(r=at)||n.memoizedState!==null,xn(e,t,n),at=r):xn(e,t,n);break;default:xn(e,t,n)}}function Du(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ly),t.forEach(function(r){var s=hy.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function At(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,Ft=!1;break e;case 3:nt=a.stateNode.containerInfo,Ft=!0;break e;case 4:nt=a.stateNode.containerInfo,Ft=!0;break e}a=a.return}if(nt===null)throw Error(Y(160));zp(o,i,s),nt=null,Ft=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){We(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ap(t,e),t=t.sibling}function Ap(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(At(t,e),Gt(e),r&4){try{ps(3,e,e.return),vo(3,e)}catch(S){We(e,e.return,S)}try{ps(5,e,e.return)}catch(S){We(e,e.return,S)}}break;case 1:At(t,e),Gt(e),r&512&&n!==null&&Nr(n,n.return);break;case 5:if(At(t,e),Gt(e),r&512&&n!==null&&Nr(n,n.return),e.flags&32){var s=e.stateNode;try{xs(s,"")}catch(S){We(e,e.return,S)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&nf(s,o),Li(a,i);var d=Li(a,o);for(i=0;i<c.length;i+=2){var h=c[i],g=c[i+1];h==="style"?af(s,g):h==="dangerouslySetInnerHTML"?lf(s,g):h==="children"?xs(s,g):Ra(s,h,g,d)}switch(a){case"input":Ni(s,o);break;case"textarea":rf(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?Cr(s,!!o.multiple,x,!1):m!==!!o.multiple&&(o.defaultValue!=null?Cr(s,!!o.multiple,o.defaultValue,!0):Cr(s,!!o.multiple,o.multiple?[]:"",!1))}s[Ls]=o}catch(S){We(e,e.return,S)}}break;case 6:if(At(t,e),Gt(e),r&4){if(e.stateNode===null)throw Error(Y(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(S){We(e,e.return,S)}}break;case 3:if(At(t,e),Gt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ns(t.containerInfo)}catch(S){We(e,e.return,S)}break;case 4:At(t,e),Gt(e);break;case 13:At(t,e),Gt(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(uc=He())),r&4&&Du(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(at=(d=at)||h,At(t,e),at=d):At(t,e),Gt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(oe=e,h=e.child;h!==null;){for(g=oe=h;oe!==null;){switch(m=oe,x=m.child,m.tag){case 0:case 11:case 14:case 15:ps(4,m,m.return);break;case 1:Nr(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(S){We(r,n,S)}}break;case 5:Nr(m,m.return);break;case 22:if(m.memoizedState!==null){Bu(g);continue}}x!==null?(x.return=m,oe=x):Bu(g)}h=h.sibling}e:for(h=null,g=e;;){if(g.tag===5){if(h===null){h=g;try{s=g.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=g.stateNode,c=g.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=of("display",i))}catch(S){We(e,e.return,S)}}}else if(g.tag===6){if(h===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(S){We(e,e.return,S)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;h===g&&(h=null),g=g.return}h===g&&(h=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:At(t,e),Gt(e),r&4&&Du(e);break;case 21:break;default:At(t,e),Gt(e)}}function Gt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Tp(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xs(s,""),r.flags&=-33);var o=Fu(e);sa(e,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=Fu(e);ra(e,a,i);break;default:throw Error(Y(161))}}catch(c){We(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function iy(e,t,n){oe=e,$p(e)}function $p(e,t,n){for(var r=(e.mode&1)!==0;oe!==null;){var s=oe,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||ul;if(!i){var a=s.alternate,c=a!==null&&a.memoizedState!==null||at;a=ul;var d=at;if(ul=i,(at=c)&&!d)for(oe=s;oe!==null;)i=oe,c=i.child,i.tag===22&&i.memoizedState!==null?Wu(s):c!==null?(c.return=i,oe=c):Wu(s);for(;o!==null;)oe=o,$p(o),o=o.sibling;oe=s,ul=a,at=d}Uu(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,oe=o):Uu(e)}}function Uu(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:at||vo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!at)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ot(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Cu(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Cu(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var g=h.dehydrated;g!==null&&Ns(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}at||t.flags&512&&na(t)}catch(m){We(t,t.return,m)}}if(t===e){oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,oe=n;break}oe=t.return}}function Bu(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,oe=n;break}oe=t.return}}function Wu(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vo(4,t)}catch(c){We(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){We(t,s,c)}}var o=t.return;try{na(t)}catch(c){We(t,o,c)}break;case 5:var i=t.return;try{na(t)}catch(c){We(t,i,c)}}}catch(c){We(t,t.return,c)}if(t===e){oe=null;break}var a=t.sibling;if(a!==null){a.return=t.return,oe=a;break}oe=t.return}}var ay=Math.ceil,Ql=gn.ReactCurrentDispatcher,ac=gn.ReactCurrentOwner,It=gn.ReactCurrentBatchConfig,Ce=0,et=null,Qe=null,rt=0,jt=0,kr=Dn(0),qe=0,zs=null,rr=0,xo=0,cc=0,ms=null,ht=null,uc=0,Fr=1/0,nn=null,Yl=!1,la=null,In=null,dl=!1,Cn=null,ql=0,hs=0,oa=null,Cl=-1,bl=0;function dt(){return Ce&6?He():Cl!==-1?Cl:Cl=He()}function Tn(e){return e.mode&1?Ce&2&&rt!==0?rt&-rt:Hg.transition!==null?(bl===0&&(bl=wf()),bl):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:Ef(e.type)),e):1}function Bt(e,t,n,r){if(50<hs)throw hs=0,oa=null,Error(Y(185));Os(e,n,r),(!(Ce&2)||e!==et)&&(e===et&&(!(Ce&2)&&(xo|=n),qe===4&&Nn(e,rt)),xt(e,r),n===1&&Ce===0&&!(t.mode&1)&&(Fr=He()+500,ho&&Un()))}function xt(e,t){var n=e.callbackNode;Hh(e,t);var r=Tl(e,e===et?rt:0);if(r===0)n!==null&&Jc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Jc(n),t===1)e.tag===0?Vg(Vu.bind(null,e)):Gf(Vu.bind(null,e)),Dg(function(){!(Ce&6)&&Un()}),n=null;else{switch(jf(r)){case 1:n=$a;break;case 4:n=vf;break;case 16:n=Il;break;case 536870912:n=xf;break;default:n=Il}n=Vp(n,Mp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Mp(e,t){if(Cl=-1,bl=0,Ce&6)throw Error(Y(327));var n=e.callbackNode;if(_r()&&e.callbackNode!==n)return null;var r=Tl(e,e===et?rt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Xl(e,r);else{t=r;var s=Ce;Ce|=2;var o=Fp();(et!==e||rt!==t)&&(nn=null,Fr=He()+500,Jn(e,t));do try{dy();break}catch(a){Op(e,a)}while(!0);Ya(),Ql.current=o,Ce=s,Qe!==null?t=0:(et=null,rt=0,t=qe)}if(t!==0){if(t===2&&(s=Ti(e),s!==0&&(r=s,t=ia(e,s))),t===1)throw n=zs,Jn(e,0),Nn(e,r),xt(e,He()),n;if(t===6)Nn(e,r);else{if(s=e.current.alternate,!(r&30)&&!cy(s)&&(t=Xl(e,r),t===2&&(o=Ti(e),o!==0&&(r=o,t=ia(e,o))),t===1))throw n=zs,Jn(e,0),Nn(e,r),xt(e,He()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Y(345));case 2:Kn(e,ht,nn);break;case 3:if(Nn(e,r),(r&130023424)===r&&(t=uc+500-He(),10<t)){if(Tl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){dt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ui(Kn.bind(null,e,ht,nn),t);break}Kn(e,ht,nn);break;case 4:if(Nn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-Ut(r);o=1<<i,i=t[i],i>s&&(s=i),r&=~o}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ay(r/1960))-r,10<r){e.timeoutHandle=Ui(Kn.bind(null,e,ht,nn),r);break}Kn(e,ht,nn);break;case 5:Kn(e,ht,nn);break;default:throw Error(Y(329))}}}return xt(e,He()),e.callbackNode===n?Mp.bind(null,e):null}function ia(e,t){var n=ms;return e.current.memoizedState.isDehydrated&&(Jn(e,t).flags|=256),e=Xl(e,t),e!==2&&(t=ht,ht=n,t!==null&&aa(t)),e}function aa(e){ht===null?ht=e:ht.push.apply(ht,e)}function cy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Wt(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nn(e,t){for(t&=~cc,t&=~xo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ut(t),r=1<<n;e[n]=-1,t&=~r}}function Vu(e){if(Ce&6)throw Error(Y(327));_r();var t=Tl(e,0);if(!(t&1))return xt(e,He()),null;var n=Xl(e,t);if(e.tag!==0&&n===2){var r=Ti(e);r!==0&&(t=r,n=ia(e,r))}if(n===1)throw n=zs,Jn(e,0),Nn(e,t),xt(e,He()),n;if(n===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kn(e,ht,nn),xt(e,He()),null}function dc(e,t){var n=Ce;Ce|=1;try{return e(t)}finally{Ce=n,Ce===0&&(Fr=He()+500,ho&&Un())}}function sr(e){Cn!==null&&Cn.tag===0&&!(Ce&6)&&_r();var t=Ce;Ce|=1;var n=It.transition,r=Pe;try{if(It.transition=null,Pe=1,e)return e()}finally{Pe=r,It.transition=n,Ce=t,!(Ce&6)&&Un()}}function fc(){jt=kr.current,Ae(kr)}function Jn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Fg(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(Ga(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ol();break;case 3:Mr(),Ae(yt),Ae(ct),tc();break;case 5:ec(r);break;case 4:Mr();break;case 13:Ae(Oe);break;case 19:Ae(Oe);break;case 10:qa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(et=e,Qe=e=zn(e.current,null),rt=jt=t,qe=0,zs=null,cc=xo=rr=0,ht=ms=null,qn!==null){for(t=0;t<qn.length;t++)if(n=qn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}qn=null}return e}function Op(e,t){do{var n=Qe;try{if(Ya(),Sl.current=Kl,Gl){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Gl=!1}if(nr=0,Ze=Ye=Fe=null,fs=!1,Rs=0,ac.current=null,n===null||n.return===null){qe=1,zs=t,Qe=null;break}e:{var o=e,i=n.return,a=n,c=t;if(t=rt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=a,g=h.tag;if(!(h.mode&1)&&(g===0||g===11||g===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=Ru(i);if(x!==null){x.flags&=-257,Iu(x,i,a,o,t),x.mode&1&&_u(o,d,t),t=x,c=d;var w=t.updateQueue;if(w===null){var S=new Set;S.add(c),t.updateQueue=S}else w.add(c);break e}else{if(!(t&1)){_u(o,d,t),pc();break e}c=Error(Y(426))}}else if($e&&a.mode&1){var j=Ru(i);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Iu(j,i,a,o,t),Ka(Or(c,a));break e}}o=c=Or(c,a),qe!==4&&(qe=2),ms===null?ms=[o]:ms.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var p=jp(o,c,t);ku(o,p);break e;case 1:a=c;var f=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof f.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(In===null||!In.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t;var N=Sp(o,a,t);ku(o,N);break e}}o=o.return}while(o!==null)}Up(n)}catch(R){t=R,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function Fp(){var e=Ql.current;return Ql.current=Kl,e===null?Kl:e}function pc(){(qe===0||qe===3||qe===2)&&(qe=4),et===null||!(rr&268435455)&&!(xo&268435455)||Nn(et,rt)}function Xl(e,t){var n=Ce;Ce|=2;var r=Fp();(et!==e||rt!==t)&&(nn=null,Jn(e,t));do try{uy();break}catch(s){Op(e,s)}while(!0);if(Ya(),Ce=n,Ql.current=r,Qe!==null)throw Error(Y(261));return et=null,rt=0,qe}function uy(){for(;Qe!==null;)Dp(Qe)}function dy(){for(;Qe!==null&&!$h();)Dp(Qe)}function Dp(e){var t=Wp(e.alternate,e,jt);e.memoizedProps=e.pendingProps,t===null?Up(e):Qe=t,ac.current=null}function Up(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=sy(n,t),n!==null){n.flags&=32767,Qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Qe=null;return}}else if(n=ry(n,t,jt),n!==null){Qe=n;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);qe===0&&(qe=5)}function Kn(e,t,n){var r=Pe,s=It.transition;try{It.transition=null,Pe=1,fy(e,t,n,r)}finally{It.transition=s,Pe=r}return null}function fy(e,t,n,r){do _r();while(Cn!==null);if(Ce&6)throw Error(Y(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Gh(e,o),e===et&&(Qe=et=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dl||(dl=!0,Vp(Il,function(){return _r(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=It.transition,It.transition=null;var i=Pe;Pe=1;var a=Ce;Ce|=4,ac.current=null,oy(e,n),Ap(n,e),Ig(Fi),zl=!!Oi,Fi=Oi=null,e.current=n,iy(n),Mh(),Ce=a,Pe=i,It.transition=o}else e.current=n;if(dl&&(dl=!1,Cn=e,ql=s),o=e.pendingLanes,o===0&&(In=null),Dh(n.stateNode),xt(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Yl)throw Yl=!1,e=la,la=null,e;return ql&1&&e.tag!==0&&_r(),o=e.pendingLanes,o&1?e===oa?hs++:(hs=0,oa=e):hs=0,Un(),null}function _r(){if(Cn!==null){var e=jf(ql),t=It.transition,n=Pe;try{if(It.transition=null,Pe=16>e?16:e,Cn===null)var r=!1;else{if(e=Cn,Cn=null,ql=0,Ce&6)throw Error(Y(331));var s=Ce;for(Ce|=4,oe=e.current;oe!==null;){var o=oe,i=o.child;if(oe.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(oe=d;oe!==null;){var h=oe;switch(h.tag){case 0:case 11:case 15:ps(8,h,o)}var g=h.child;if(g!==null)g.return=h,oe=g;else for(;oe!==null;){h=oe;var m=h.sibling,x=h.return;if(Ip(h),h===d){oe=null;break}if(m!==null){m.return=x,oe=m;break}oe=x}}}var w=o.alternate;if(w!==null){var S=w.child;if(S!==null){w.child=null;do{var j=S.sibling;S.sibling=null,S=j}while(S!==null)}}oe=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,oe=i;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ps(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,oe=p;break e}oe=o.return}}var f=e.current;for(oe=f;oe!==null;){i=oe;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,oe=y;else e:for(i=f;oe!==null;){if(a=oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vo(9,a)}}catch(R){We(a,a.return,R)}if(a===i){oe=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,oe=N;break e}oe=a.return}}if(Ce=s,Un(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(co,e)}catch{}r=!0}return r}finally{Pe=n,It.transition=t}}return!1}function Hu(e,t,n){t=Or(n,t),t=jp(e,t,1),e=Rn(e,t,1),t=dt(),e!==null&&(Os(e,1,t),xt(e,t))}function We(e,t,n){if(e.tag===3)Hu(e,e,n);else for(;t!==null;){if(t.tag===3){Hu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(In===null||!In.has(r))){e=Or(n,e),e=Sp(t,e,1),t=Rn(t,e,1),e=dt(),t!==null&&(Os(t,1,e),xt(t,e));break}}t=t.return}}function py(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=dt(),e.pingedLanes|=e.suspendedLanes&n,et===e&&(rt&n)===n&&(qe===4||qe===3&&(rt&130023424)===rt&&500>He()-uc?Jn(e,0):cc|=n),xt(e,t)}function Bp(e,t){t===0&&(e.mode&1?(t=tl,tl<<=1,!(tl&130023424)&&(tl=4194304)):t=1);var n=dt();e=mn(e,t),e!==null&&(Os(e,t,n),xt(e,n))}function my(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Bp(e,n)}function hy(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(t),Bp(e,n)}var Wp;Wp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||yt.current)gt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return gt=!1,ny(e,t,n);gt=!!(e.flags&131072)}else gt=!1,$e&&t.flags&1048576&&Kf(t,Ul,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;kl(e,t),e=t.pendingProps;var s=zr(t,ct.current);Pr(t,n),s=rc(null,t,r,e,s,n);var o=sc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vt(r)?(o=!0,Fl(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ja(t),s.updater=yo,t.stateNode=s,s._reactInternals=t,Qi(t,r,e,n),t=Xi(null,t,r,!0,o,n)):(t.tag=0,$e&&o&&Ha(t),ut(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(kl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=yy(r),e=Ot(r,e),s){case 0:t=qi(null,t,r,e,n);break e;case 1:t=Au(null,t,r,e,n);break e;case 11:t=Tu(null,t,r,e,n);break e;case 14:t=zu(null,t,r,Ot(r.type,e),n);break e}throw Error(Y(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ot(r,s),qi(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ot(r,s),Au(e,t,r,s,n);case 3:e:{if(bp(t),e===null)throw Error(Y(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Zf(e,t),Vl(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Or(Error(Y(423)),t),t=$u(e,t,r,n,s);break e}else if(r!==s){s=Or(Error(Y(424)),t),t=$u(e,t,r,n,s);break e}else for(St=_n(t.stateNode.containerInfo.firstChild),Nt=t,$e=!0,Dt=null,n=Xf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ar(),r===s){t=hn(e,t,n);break e}ut(e,t,r,n)}t=t.child}return t;case 5:return ep(t),e===null&&Hi(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,Di(r,s)?i=null:o!==null&&Di(r,o)&&(t.flags|=32),Cp(e,t),ut(e,t,i,n),t.child;case 6:return e===null&&Hi(t),null;case 13:return Ep(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=$r(t,null,r,n):ut(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ot(r,s),Tu(e,t,r,s,n);case 7:return ut(e,t,t.pendingProps,n),t.child;case 8:return ut(e,t,t.pendingProps.children,n),t.child;case 12:return ut(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,Ie(Bl,r._currentValue),r._currentValue=i,o!==null)if(Wt(o.value,i)){if(o.children===s.children&&!yt.current){t=hn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=un(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Gi(o.return,n,t),a.lanes|=n;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(Y(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Gi(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}ut(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Pr(t,n),s=Tt(s),r=r(s),t.flags|=1,ut(e,t,r,n),t.child;case 14:return r=t.type,s=Ot(r,t.pendingProps),s=Ot(r.type,s),zu(e,t,r,s,n);case 15:return Np(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ot(r,s),kl(e,t),t.tag=1,vt(r)?(e=!0,Fl(t)):e=!1,Pr(t,n),wp(t,r,s),Qi(t,r,s,n),Xi(null,t,r,!0,e,n);case 19:return Lp(e,t,n);case 22:return kp(e,t,n)}throw Error(Y(156,t.tag))};function Vp(e,t){return yf(e,t)}function gy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(e,t,n,r){return new gy(e,t,n,r)}function mc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yy(e){if(typeof e=="function")return mc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ta)return 11;if(e===za)return 14}return 2}function zn(e,t){var n=e.alternate;return n===null?(n=Rt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function El(e,t,n,r,s,o){var i=2;if(r=e,typeof e=="function")mc(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case mr:return Zn(n.children,s,o,t);case Ia:i=8,s|=8;break;case vi:return e=Rt(12,n,t,s|2),e.elementType=vi,e.lanes=o,e;case xi:return e=Rt(13,n,t,s),e.elementType=xi,e.lanes=o,e;case wi:return e=Rt(19,n,t,s),e.elementType=wi,e.lanes=o,e;case Zd:return wo(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Xd:i=10;break e;case Jd:i=9;break e;case Ta:i=11;break e;case za:i=14;break e;case wn:i=16,r=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=Rt(i,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Zn(e,t,n,r){return e=Rt(7,e,r,t),e.lanes=n,e}function wo(e,t,n,r){return e=Rt(22,e,r,t),e.elementType=Zd,e.lanes=n,e.stateNode={isHidden:!1},e}function li(e,t,n){return e=Rt(6,e,null,t),e.lanes=n,e}function oi(e,t,n){return t=Rt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vy(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Do(0),this.expirationTimes=Do(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Do(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hc(e,t,n,r,s,o,i,a,c){return e=new vy(e,t,n,a,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Rt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ja(o),e}function xy(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Hp(e){if(!e)return On;e=e._reactInternals;e:{if(ir(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var n=e.type;if(vt(n))return Hf(e,n,t)}return t}function Gp(e,t,n,r,s,o,i,a,c){return e=hc(n,r,!0,e,s,o,i,a,c),e.context=Hp(null),n=e.current,r=dt(),s=Tn(n),o=un(r,s),o.callback=t??null,Rn(n,o,s),e.current.lanes=s,Os(e,s,r),xt(e,r),e}function jo(e,t,n,r){var s=t.current,o=dt(),i=Tn(s);return n=Hp(n),t.context===null?t.context=n:t.pendingContext=n,t=un(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Rn(s,t,i),e!==null&&(Bt(e,s,i,o),jl(e,s,i)),i}function Jl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function gc(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}function wy(){return null}var Kp=typeof reportError=="function"?reportError:function(e){console.error(e)};function yc(e){this._internalRoot=e}So.prototype.render=yc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));jo(e,t,null,null)};So.prototype.unmount=yc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;sr(function(){jo(null,e,null,null)}),t[pn]=null}};function So(e){this._internalRoot=e}So.prototype.unstable_scheduleHydration=function(e){if(e){var t=kf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sn.length&&t!==0&&t<Sn[n].priority;n++);Sn.splice(n,0,e),n===0&&bf(e)}};function vc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function No(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ku(){}function jy(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=Jl(i);o.call(d)}}var i=Gp(t,r,e,0,null,!1,!1,"",Ku);return e._reactRootContainer=i,e[pn]=i.current,bs(e.nodeType===8?e.parentNode:e),sr(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=Jl(c);a.call(d)}}var c=hc(e,0,!1,null,null,!1,!1,"",Ku);return e._reactRootContainer=c,e[pn]=c.current,bs(e.nodeType===8?e.parentNode:e),sr(function(){jo(t,c,n,r)}),c}function ko(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var a=s;s=function(){var c=Jl(i);a.call(c)}}jo(t,i,e,s)}else i=jy(n,t,e,s,r);return Jl(i)}Sf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=rs(t.pendingLanes);n!==0&&(Ma(t,n|1),xt(t,He()),!(Ce&6)&&(Fr=He()+500,Un()))}break;case 13:sr(function(){var r=mn(e,1);if(r!==null){var s=dt();Bt(r,e,1,s)}}),gc(e,1)}};Oa=function(e){if(e.tag===13){var t=mn(e,134217728);if(t!==null){var n=dt();Bt(t,e,134217728,n)}gc(e,134217728)}};Nf=function(e){if(e.tag===13){var t=Tn(e),n=mn(e,t);if(n!==null){var r=dt();Bt(n,e,t,r)}gc(e,t)}};kf=function(){return Pe};Cf=function(e,t){var n=Pe;try{return Pe=e,t()}finally{Pe=n}};_i=function(e,t,n){switch(t){case"input":if(Ni(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=mo(r);if(!s)throw Error(Y(90));tf(r),Ni(r,s)}}}break;case"textarea":rf(e,n);break;case"select":t=n.value,t!=null&&Cr(e,!!n.multiple,t,!1)}};df=dc;ff=sr;var Sy={usingClientEntryPoint:!1,Events:[Ds,vr,mo,cf,uf,dc]},Zr={findFiberByHostInstance:Yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ny={bundleType:Zr.bundleType,version:Zr.version,rendererPackageName:Zr.rendererPackageName,rendererConfig:Zr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hf(e),e===null?null:e.stateNode},findFiberByHostInstance:Zr.findFiberByHostInstance||wy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fl.isDisabled&&fl.supportsFiber)try{co=fl.inject(Ny),Zt=fl}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sy;bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vc(t))throw Error(Y(200));return xy(e,t,null,n)};bt.createRoot=function(e,t){if(!vc(e))throw Error(Y(299));var n=!1,r="",s=Kp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=hc(e,1,!1,null,null,n,!1,r,s),e[pn]=t.current,bs(e.nodeType===8?e.parentNode:e),new yc(t)};bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=hf(t),e=e===null?null:e.stateNode,e};bt.flushSync=function(e){return sr(e)};bt.hydrate=function(e,t,n){if(!No(t))throw Error(Y(200));return ko(null,e,t,!0,n)};bt.hydrateRoot=function(e,t,n){if(!vc(e))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=Kp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Gp(t,null,e,1,n??null,s,!1,o,i),e[pn]=t.current,bs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new So(t)};bt.render=function(e,t,n){if(!No(t))throw Error(Y(200));return ko(null,e,t,!1,n)};bt.unmountComponentAtNode=function(e){if(!No(e))throw Error(Y(40));return e._reactRootContainer?(sr(function(){ko(null,null,e,!1,function(){e._reactRootContainer=null,e[pn]=null})}),!0):!1};bt.unstable_batchedUpdates=dc;bt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!No(n))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return ko(e,t,n,!1,r)};bt.version="18.3.1-next-f1338f8080-20240426";function Qp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qp)}catch(e){console.error(e)}}Qp(),Kd.exports=bt;var xc=Kd.exports,Qu=xc;gi.createRoot=Qu.createRoot,gi.hydrateRoot=Qu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function As(){return As=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},As.apply(this,arguments)}var bn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(bn||(bn={}));const Yu="popstate";function ky(e){e===void 0&&(e={});function t(s,o){let{pathname:i="/",search:a="",hash:c=""}=ar(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),ca("",{pathname:i,search:a,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let i=s.document.querySelector("base"),a="";if(i&&i.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");a=d===-1?c:c.slice(0,d)}return a+"#"+(typeof o=="string"?o:Zl(o))}function r(s,o){wc(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return by(t,n,r,e)}function De(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function wc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Cy(){return Math.random().toString(36).substr(2,8)}function qu(e,t){return{usr:e.state,key:e.key,idx:t}}function ca(e,t,n,r){return n===void 0&&(n=null),As({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ar(t):t,{state:n,key:t&&t.key||r||Cy()})}function Zl(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ar(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function by(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,a=bn.Pop,c=null,d=h();d==null&&(d=0,i.replaceState(As({},i.state,{idx:d}),""));function h(){return(i.state||{idx:null}).idx}function g(){a=bn.Pop;let j=h(),p=j==null?null:j-d;d=j,c&&c({action:a,location:S.location,delta:p})}function m(j,p){a=bn.Push;let f=ca(S.location,j,p);n&&n(f,j),d=h()+1;let y=qu(f,d),N=S.createHref(f);try{i.pushState(y,"",N)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(N)}o&&c&&c({action:a,location:S.location,delta:1})}function x(j,p){a=bn.Replace;let f=ca(S.location,j,p);n&&n(f,j),d=h();let y=qu(f,d),N=S.createHref(f);i.replaceState(y,"",N),o&&c&&c({action:a,location:S.location,delta:0})}function w(j){let p=s.location.origin!=="null"?s.location.origin:s.location.href,f=typeof j=="string"?j:Zl(j);return f=f.replace(/ $/,"%20"),De(p,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,p)}let S={get action(){return a},get location(){return e(s,i)},listen(j){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Yu,g),c=j,()=>{s.removeEventListener(Yu,g),c=null}},createHref(j){return t(s,j)},createURL:w,encodeLocation(j){let p=w(j);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:m,replace:x,go(j){return i.go(j)}};return S}var Xu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Xu||(Xu={}));function Ey(e,t,n){return n===void 0&&(n="/"),Ly(e,t,n)}function Ly(e,t,n,r){let s=typeof t=="string"?ar(t):t,o=Dr(s.pathname||"/",n);if(o==null)return null;let i=Yp(e);Py(i);let a=null;for(let c=0;a==null&&c<i.length;++c){let d=Dy(o);a=Oy(i[c],d)}return a}function Yp(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,i,a)=>{let c={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(De(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=An([r,c.relativePath]),h=n.concat(c);o.children&&o.children.length>0&&(De(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Yp(o.children,t,h,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:$y(d,o.index),routesMeta:h})};return e.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,i);else for(let c of qp(o.path))s(o,i,c)}),t}function qp(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=qp(r.join("/")),a=[];return a.push(...i.map(c=>c===""?o:[o,c].join("/"))),s&&a.push(...i),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function Py(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:My(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _y=/^:[\w-]+$/,Ry=3,Iy=2,Ty=1,zy=10,Ay=-2,Ju=e=>e==="*";function $y(e,t){let n=e.split("/"),r=n.length;return n.some(Ju)&&(r+=Ay),t&&(r+=Iy),n.filter(s=>!Ju(s)).reduce((s,o)=>s+(_y.test(o)?Ry:o===""?Ty:zy),r)}function My(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Oy(e,t,n){let{routesMeta:r}=e,s={},o="/",i=[];for(let a=0;a<r.length;++a){let c=r[a],d=a===r.length-1,h=o==="/"?t:t.slice(o.length)||"/",g=ua({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!g)return null;Object.assign(s,g.params),i.push({params:s,pathname:An([o,g.pathname]),pathnameBase:Vy(An([o,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(o=An([o,g.pathnameBase]))}return i}function ua(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Fy(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((d,h,g)=>{let{paramName:m,isOptional:x}=h;if(m==="*"){let S=a[g]||"";i=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const w=a[g];return x&&!w?d[m]=void 0:d[m]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:e}}function Fy(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),wc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Dy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return wc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Dr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Uy(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?ar(e):e;return{pathname:n?n.startsWith("/")?n:By(n,t):t,search:Hy(r),hash:Gy(s)}}function By(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ii(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Wy(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function jc(e,t){let n=Wy(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Sc(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=ar(e):(s=As({},e),De(!s.pathname||!s.pathname.includes("?"),ii("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),ii("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),ii("#","search","hash",s)));let o=e===""||s.pathname==="",i=o?"/":s.pathname,a;if(i==null)a=n;else{let g=t.length-1;if(!r&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),g-=1;s.pathname=m.join("/")}a=g>=0?t[g]:"/"}let c=Uy(s,a),d=i&&i!=="/"&&i.endsWith("/"),h=(o||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const An=e=>e.join("/").replace(/\/\/+/g,"/"),Vy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Hy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Gy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ky(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Xp=["post","put","patch","delete"];new Set(Xp);const Qy=["get",...Xp];new Set(Qy);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $s(){return $s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$s.apply(this,arguments)}const Co=u.createContext(null),Jp=u.createContext(null),yn=u.createContext(null),bo=u.createContext(null),vn=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Zp=u.createContext(null);function Yy(e,t){let{relative:n}=t===void 0?{}:t;Vr()||De(!1);let{basename:r,navigator:s}=u.useContext(yn),{hash:o,pathname:i,search:a}=Eo(e,{relative:n}),c=i;return r!=="/"&&(c=i==="/"?r:An([r,i])),s.createHref({pathname:c,search:a,hash:o})}function Vr(){return u.useContext(bo)!=null}function Lt(){return Vr()||De(!1),u.useContext(bo).location}function em(e){u.useContext(yn).static||u.useLayoutEffect(e)}function tn(){let{isDataRoute:e}=u.useContext(vn);return e?uv():qy()}function qy(){Vr()||De(!1);let e=u.useContext(Co),{basename:t,future:n,navigator:r}=u.useContext(yn),{matches:s}=u.useContext(vn),{pathname:o}=Lt(),i=JSON.stringify(jc(s,n.v7_relativeSplatPath)),a=u.useRef(!1);return em(()=>{a.current=!0}),u.useCallback(function(d,h){if(h===void 0&&(h={}),!a.current)return;if(typeof d=="number"){r.go(d);return}let g=Sc(d,JSON.parse(i),o,h.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:An([t,g.pathname])),(h.replace?r.replace:r.push)(g,h.state,h)},[t,r,i,o,e])}const Xy=u.createContext(null);function Jy(e){let t=u.useContext(vn).outlet;return t&&u.createElement(Xy.Provider,{value:e},t)}function Eo(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=u.useContext(yn),{matches:s}=u.useContext(vn),{pathname:o}=Lt(),i=JSON.stringify(jc(s,r.v7_relativeSplatPath));return u.useMemo(()=>Sc(e,JSON.parse(i),o,n==="path"),[e,i,o,n])}function Zy(e,t){return ev(e,t)}function ev(e,t,n,r){Vr()||De(!1);let{navigator:s}=u.useContext(yn),{matches:o}=u.useContext(vn),i=o[o.length-1],a=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Lt(),h;if(t){var g;let j=typeof t=="string"?ar(t):t;c==="/"||(g=j.pathname)!=null&&g.startsWith(c)||De(!1),h=j}else h=d;let m=h.pathname||"/",x=m;if(c!=="/"){let j=c.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(j.length).join("/")}let w=Ey(e,{pathname:x}),S=lv(w&&w.map(j=>Object.assign({},j,{params:Object.assign({},a,j.params),pathname:An([c,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:An([c,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,n,r);return t&&S?u.createElement(bo.Provider,{value:{location:$s({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:bn.Pop}},S):S}function tv(){let e=cv(),t=Ky(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const nv=u.createElement(tv,null);class rv extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(vn.Provider,{value:this.props.routeContext},u.createElement(Zp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sv(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(Co);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(vn.Provider,{value:t},r)}function lv(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=i.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);h>=0||De(!1),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<i.length;h++){let g=i[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=h),g.route.id){let{loaderData:m,errors:x}=n,w=g.route.loader&&m[g.route.id]===void 0&&(!x||x[g.route.id]===void 0);if(g.route.lazy||w){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((h,g,m)=>{let x,w=!1,S=null,j=null;n&&(x=a&&g.route.id?a[g.route.id]:void 0,S=g.route.errorElement||nv,c&&(d<0&&m===0?(dv("route-fallback"),w=!0,j=null):d===m&&(w=!0,j=g.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,m+1)),f=()=>{let y;return x?y=S:w?y=j:g.route.Component?y=u.createElement(g.route.Component,null):g.route.element?y=g.route.element:y=h,u.createElement(sv,{match:g,routeContext:{outlet:h,matches:p,isDataRoute:n!=null},children:y})};return n&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?u.createElement(rv,{location:n.location,revalidation:n.revalidation,component:S,error:x,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()},null)}var tm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(tm||{}),nm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(nm||{});function ov(e){let t=u.useContext(Co);return t||De(!1),t}function iv(e){let t=u.useContext(Jp);return t||De(!1),t}function av(e){let t=u.useContext(vn);return t||De(!1),t}function rm(e){let t=av(),n=t.matches[t.matches.length-1];return n.route.id||De(!1),n.route.id}function cv(){var e;let t=u.useContext(Zp),n=iv(),r=rm();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function uv(){let{router:e}=ov(tm.UseNavigateStable),t=rm(nm.UseNavigateStable),n=u.useRef(!1);return em(()=>{n.current=!0}),u.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,$s({fromRouteId:t},o)))},[e,t])}const Zu={};function dv(e,t,n){Zu[e]||(Zu[e]=!0)}function fv(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function da(e){let{to:t,replace:n,state:r,relative:s}=e;Vr()||De(!1);let{future:o,static:i}=u.useContext(yn),{matches:a}=u.useContext(vn),{pathname:c}=Lt(),d=tn(),h=Sc(t,jc(a,o.v7_relativeSplatPath),c,s==="path"),g=JSON.stringify(h);return u.useEffect(()=>d(JSON.parse(g),{replace:n,state:r,relative:s}),[d,g,s,n,r]),null}function pv(e){return Jy(e.context)}function $t(e){De(!1)}function mv(e){let{basename:t="/",children:n=null,location:r,navigationType:s=bn.Pop,navigator:o,static:i=!1,future:a}=e;Vr()&&De(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:o,static:i,future:$s({v7_relativeSplatPath:!1},a)}),[c,a,o,i]);typeof r=="string"&&(r=ar(r));let{pathname:h="/",search:g="",hash:m="",state:x=null,key:w="default"}=r,S=u.useMemo(()=>{let j=Dr(h,c);return j==null?null:{location:{pathname:j,search:g,hash:m,state:x,key:w},navigationType:s}},[c,h,g,m,x,w,s]);return S==null?null:u.createElement(yn.Provider,{value:d},u.createElement(bo.Provider,{children:n,value:S}))}function hv(e){let{children:t,location:n}=e;return Zy(fa(t),n)}new Promise(()=>{});function fa(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let o=[...t,s];if(r.type===u.Fragment){n.push.apply(n,fa(r.props.children,o));return}r.type!==$t&&De(!1),!r.props.index||!r.props.children||De(!1);let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=fa(r.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eo(){return eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eo.apply(this,arguments)}function sm(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function gv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function yv(e,t){return e.button===0&&(!t||t==="_self")&&!gv(e)}function pa(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function vv(e,t){let n=pa(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(o=>{n.append(s,o)})}),n}const xv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wv=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],jv="6";try{window.__reactRouterVersion=jv}catch{}const Sv=u.createContext({isTransitioning:!1}),Nv="startTransition",ed=ph[Nv];function kv(e){let{basename:t,children:n,future:r,window:s}=e,o=u.useRef();o.current==null&&(o.current=ky({window:s,v5Compat:!0}));let i=o.current,[a,c]=u.useState({action:i.action,location:i.location}),{v7_startTransition:d}=r||{},h=u.useCallback(g=>{d&&ed?ed(()=>c(g)):c(g)},[c,d]);return u.useLayoutEffect(()=>i.listen(h),[i,h]),u.useEffect(()=>fv(r),[r]),u.createElement(mv,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:i,future:r})}const Cv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lm=u.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:i,state:a,target:c,to:d,preventScrollReset:h,viewTransition:g}=t,m=sm(t,xv),{basename:x}=u.useContext(yn),w,S=!1;if(typeof d=="string"&&bv.test(d)&&(w=d,Cv))try{let y=new URL(window.location.href),N=d.startsWith("//")?new URL(y.protocol+d):new URL(d),R=Dr(N.pathname,x);N.origin===y.origin&&R!=null?d=R+N.search+N.hash:S=!0}catch{}let j=Yy(d,{relative:s}),p=Lv(d,{replace:i,state:a,target:c,preventScrollReset:h,relative:s,viewTransition:g});function f(y){r&&r(y),y.defaultPrevented||p(y)}return u.createElement("a",eo({},m,{href:w||j,onClick:S||o?r:f,ref:n,target:c}))}),ur=u.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:o="",end:i=!1,style:a,to:c,viewTransition:d,children:h}=t,g=sm(t,wv),m=Eo(c,{relative:g.relative}),x=Lt(),w=u.useContext(Jp),{navigator:S,basename:j}=u.useContext(yn),p=w!=null&&Pv(m)&&d===!0,f=S.encodeLocation?S.encodeLocation(m).pathname:m.pathname,y=x.pathname,N=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(y=y.toLowerCase(),N=N?N.toLowerCase():null,f=f.toLowerCase()),N&&j&&(N=Dr(N,j)||N);const R=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let P=y===f||!i&&y.startsWith(f)&&y.charAt(R)==="/",F=N!=null&&(N===f||!i&&N.startsWith(f)&&N.charAt(f.length)==="/"),_={isActive:P,isPending:F,isTransitioning:p},V=P?r:void 0,$;typeof o=="function"?$=o(_):$=[o,P?"active":null,F?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let W=typeof a=="function"?a(_):a;return u.createElement(lm,eo({},g,{"aria-current":V,className:$,ref:n,style:W,to:c,viewTransition:d}),typeof h=="function"?h(_):h)});var ma;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ma||(ma={}));var td;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(td||(td={}));function Ev(e){let t=u.useContext(Co);return t||De(!1),t}function Lv(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:i,viewTransition:a}=t===void 0?{}:t,c=tn(),d=Lt(),h=Eo(e,{relative:i});return u.useCallback(g=>{if(yv(g,n)){g.preventDefault();let m=r!==void 0?r:Zl(d)===Zl(h);c(e,{replace:m,state:s,preventScrollReset:o,relative:i,viewTransition:a})}},[d,c,h,r,s,n,e,o,i,a])}function om(e){let t=u.useRef(pa(e)),n=u.useRef(!1),r=Lt(),s=u.useMemo(()=>vv(r.search,n.current?null:t.current),[r.search]),o=tn(),i=u.useCallback((a,c)=>{const d=pa(typeof a=="function"?a(s):a);n.current=!0,o("?"+d,c)},[o,s]);return[s,i]}function Pv(e,t){t===void 0&&(t={});let n=u.useContext(Sv);n==null&&De(!1);let{basename:r}=Ev(ma.useViewTransitionState),s=Eo(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Dr(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Dr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ua(s.pathname,i)!=null||ua(s.pathname,o)!=null}function im(){const[e,t]=u.useState(()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("cozygen_gallery_pending")==="1"}catch{return!1}});return u.useEffect(()=>{const n=()=>t(!0),r=()=>t(!1),s=o=>{o.key==="cozygen_gallery_pending"&&t(o.newValue==="1")};return window.addEventListener("cozygen:gallery-pending",n),window.addEventListener("cozygen:gallery-viewed",r),window.addEventListener("storage",s),()=>{window.removeEventListener("cozygen:gallery-pending",n),window.removeEventListener("cozygen:gallery-viewed",r),window.removeEventListener("storage",s)}},[]),e}const ha="cozygen_token";function Nc(){try{return typeof window>"u"?null:localStorage.getItem(ha)}catch{return null}}function am(e){try{if(typeof window>"u")return;e?localStorage.setItem(ha,e):localStorage.removeItem(ha)}catch{}}function ai(){am(null)}function Bs(){const e=Nc();return e?{Authorization:`Bearer ${e}`}:{}}const Ws=async(e,t)=>{if(t.status===401){const r=new Error("unauthorized");throw r.unauthorized=!0,r.status=401,r}if(!t.ok)throw new Error(`${e} failed`);return(t.headers.get("content-type")||"").includes("application/json")?t.json():t.text()},Bn=async(e,t={})=>{const{signal:n}=t,r=await fetch(e,{headers:{...Bs()},credentials:"include",signal:n});return Ws(e,r)},Vs=async(e,t,n={})=>{const{signal:r}=n,s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...Bs()},body:JSON.stringify(t),credentials:"include",signal:r});return Ws(e,s)};async function _v(e={}){return Bn("/cozygen/workflows",e)}async function Rv(e,t={}){return Bn(`/cozygen/workflows/${encodeURIComponent(e)}`,t)}async function Iv(e,t={}){return Bn(`/cozygen/get_choices?type=${encodeURIComponent(e)}`,t)}async function cm(e){const t=await fetch("/prompt",{method:"POST",headers:{"Content-Type":"application/json",...Bs()},body:JSON.stringify(e),credentials:"include"});return Ws("/prompt",t)}async function Tv(e){const t=new FormData;t.append("image",e);const n=await fetch("/cozygen/upload_image",{method:"POST",headers:{...Bs()},body:t,credentials:"include"});return Ws("/cozygen/upload_image",n)}async function um(e="",t=1,n=50,r=!1,s=!1,o="all",i="",a={}){const c=new URLSearchParams({subfolder:e,page:String(t),per_page:String(n),show_hidden:r?"1":"0",recursive:s?"1":"0",kind:o});return i&&c.set("cache_bust",String(i)),Bn(`/cozygen/api/gallery?${c.toString()}`,a)}async function zv(){return Bn("/cozygen/api/aliases")}async function Av(e){return Vs("/cozygen/api/aliases",e||{})}async function dm(e={}){return Bn("/cozygen/api/tags/categories",e)}async function to({q:e="",category:t="",sort:n="count",limit:r=80,offset:s=0}={},o={}){const i=new URLSearchParams({q:String(e||""),category:String(t||""),sort:String(n||"count"),limit:String(r||80),offset:String(s||0)});return Bn(`/cozygen/api/tags/search?${i.toString()}`,o)}async function ci(e=[],t={}){return Vs("/cozygen/api/tags/validate",{tags:Array.isArray(e)?e:[]},t)}async function $v(e,t={}){const n=new URLSearchParams;return e&&n.set("workflow",e),Bn(`/cozygen/api/workflow_presets?${n.toString()}`,t)}async function Mv(e,t,n={}){return Vs("/cozygen/api/workflow_presets",{workflow:e,preset:t},n)}async function Ov(e,t,n={}){return Vs("/cozygen/api/workflow_presets",{workflow:e,delete:t},n)}async function Fv(e,t){return Vs("/cozygen/api/login",{username:e,password:t})}async function Dv(){return fetch("/cozygen/api/auth_status",{headers:{...Bs()},credentials:"include"}).then(e=>Ws("/cozygen/api/auth_status",e))}const Uv=30*60*1e3,nd="cozygen_idle_logout",fm=u.createContext(null);function Bv({children:e}){const[t,n]=u.useState(!1),[r,s]=u.useState(null),[o,i]=u.useState(!1),[a,c]=u.useState(null),d=u.useCallback(async()=>{if(!Nc()){s(null),i(!1),n(!0);return}try{const w=await Dv();s((w==null?void 0:w.user)||null),i(!!(w!=null&&w.default_credentials))}catch{ai(),s(null),i(!1)}finally{n(!0)}},[]);u.useEffect(()=>{d()},[d]);const h=u.useCallback(async(x,w)=>{const S=await Fv(x,w);am((S==null?void 0:S.token)||""),s((S==null?void 0:S.user)||x),i(!!(S!=null&&S.default_credentials));try{localStorage.removeItem(nd)}catch{}return S},[]),g=u.useCallback(()=>{ai(),s(null),i(!1)},[]);u.useEffect(()=>{if(!t)return;const x=()=>{a&&clearTimeout(a);const S=setTimeout(()=>{ai(),s(null),i(!1);try{localStorage.setItem(nd,"1")}catch{}window.location.hash="#/login"},Uv);c(S)};x();const w=["pointerdown","keydown","visibilitychange"];return w.forEach(S=>window.addEventListener(S,x,{passive:!0})),()=>{a&&clearTimeout(a),w.forEach(S=>window.removeEventListener(S,x))}},[t,a]);const m=u.useMemo(()=>({ready:t,user:r,authed:!!r,defaultCreds:o,login:h,logout:g,refresh:d}),[t,r,o,h,g,d]);return l.jsx(fm.Provider,{value:m,children:e})}function Lo(){const e=u.useContext(fm);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function Wv({children:e}){return l.jsx(Bv,{children:e})}const pm="cozygen_last_render_payload";function Vv(e){if(e)try{if(typeof window>"u")return;window.localStorage.setItem(pm,JSON.stringify(e))}catch{}}function mm(){try{if(typeof window>"u")return null;const e=window.localStorage.getItem(pm);return e?JSON.parse(e):null}catch{return null}}async function hm(){const e=mm();if(!e||!e.workflow)return{success:!1,error:"No previous render to repeat"};try{return window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!0}})),await cm({prompt:e.workflow}),window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!1}})),{success:!0}}catch(t){return console.error("Failed to requeue prompt",t),window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!1}})),t!=null&&t.unauthorized?(window.location.hash="#/login",{success:!1,error:"Session expired"}):{success:!1,error:"Failed to queue prompt"}}}function gm(){const e=mm();return!!(e&&e.workflow)}function no(e,t=!1){const n=()=>typeof window>"u"||!window.matchMedia?t:window.matchMedia(e).matches,[r,s]=u.useState(n);return u.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const o=window.matchMedia(e),i=()=>s(o.matches);return i(),typeof o.addEventListener=="function"?(o.addEventListener("change",i),()=>o.removeEventListener("change",i)):(o.addListener(i),()=>o.removeListener(i))},[e]),r}const ym=({size:e=32,className:t=""})=>l.jsxs("svg",{width:e,height:e,viewBox:"0 0 32 32",fill:"none",className:t,"aria-hidden":"true",children:[l.jsx("path",{d:"M8 24L20 4",stroke:"url(#logo-gradient)",strokeWidth:"3",strokeLinecap:"round"}),l.jsx("path",{d:"M6 26C6 26 7 24 8 24C9 24 10 25 8 27C6 29 4 28 6 26Z",fill:"url(#logo-warm)"}),l.jsx("circle",{cx:"22",cy:"8",r:"2",fill:"url(#logo-spark)"}),l.jsx("circle",{cx:"26",cy:"12",r:"1.5",fill:"url(#logo-spark)",opacity:"0.8"}),l.jsx("circle",{cx:"24",cy:"16",r:"1",fill:"url(#logo-spark)",opacity:"0.6"}),l.jsxs("defs",{children:[l.jsxs("linearGradient",{id:"logo-gradient",x1:"8",y1:"24",x2:"20",y2:"4",gradientUnits:"userSpaceOnUse",children:[l.jsx("stop",{stopColor:"#FF9F7A"}),l.jsx("stop",{offset:"0.5",stopColor:"#9F8CFF"}),l.jsx("stop",{offset:"1",stopColor:"#44E1C5"})]}),l.jsxs("linearGradient",{id:"logo-warm",x1:"4",y1:"24",x2:"10",y2:"28",gradientUnits:"userSpaceOnUse",children:[l.jsx("stop",{stopColor:"#FF9F7A"}),l.jsx("stop",{offset:"1",stopColor:"#FFD666"})]}),l.jsxs("radialGradient",{id:"logo-spark",cx:"0.3",cy:"0.3",r:"0.7",children:[l.jsx("stop",{stopColor:"#FFFFFF"}),l.jsx("stop",{offset:"0.5",stopColor:"#44E1C5"}),l.jsx("stop",{offset:"1",stopColor:"#9F8CFF"})]})]})]}),Ve=({children:e,size:t=16,className:n="",...r})=>l.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,"aria-hidden":"true",...r,children:e}),Hv=e=>l.jsxs(Ve,{...e,children:[l.jsx("path",{d:"M3 10l9-7 9 7"}),l.jsx("path",{d:"M5 10v10h14V10"}),l.jsx("path",{d:"M9 20v-6h6v6"})]}),kc=e=>l.jsxs(Ve,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5",fill:"currentColor",stroke:"none"}),l.jsx("path",{d:"M21 15l-5-5L5 21"})]}),lr=e=>l.jsxs(Ve,{...e,children:[l.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"}),l.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7",strokeWidth:"3"})]}),Po=e=>l.jsxs(Ve,{...e,children:[l.jsx("path",{d:"M14 3H4a2 2 0 00-2 2v10l6 6h10a2 2 0 002-2V9l-6-6z"}),l.jsx("path",{d:"M14 3v6h6"}),l.jsx("path",{d:"M7 7h5"}),l.jsx("path",{d:"M7 11h7"})]}),Cc=e=>l.jsx(Ve,{...e,children:l.jsx("path",{d:"M17 3a2.828 2.828 0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),vm=e=>l.jsx(Ve,{...e,children:l.jsx("polygon",{points:"5 3 19 12 5 21 5 3",fill:"currentColor",stroke:"none"})}),rd=e=>l.jsxs(Ve,{...e,children:[l.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),bc=e=>l.jsxs(Ve,{...e,children:[l.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),l.jsx("line",{x1:"9",y1:"9",x2:"9",y2:"15"}),l.jsx("line",{x1:"15",y1:"9",x2:"15",y2:"15"}),l.jsx("circle",{cx:"9",cy:"12",r:"1.5",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"10",r:"1.5",fill:"currentColor",stroke:"none"})]}),Gv=e=>l.jsxs(Ve,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("circle",{cx:"12",cy:"12",r:"4"}),l.jsx("line",{x1:"3",y1:"9",x2:"6",y2:"9"})]}),sd=e=>l.jsxs(Ve,{...e,children:[l.jsx("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"}),l.jsx("path",{d:"M2 10h20"})]}),ld=e=>l.jsx(Ve,{...e,children:l.jsx("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"})}),od=e=>l.jsxs(Ve,{...e,children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),id=e=>l.jsxs(Ve,{...e,children:[l.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"}),l.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),ad=e=>l.jsx(Ve,{...e,children:l.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),cd=e=>l.jsxs(Ve,{...e,children:[l.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),l.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}),ga=e=>l.jsxs(Ve,{...e,children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 11-2.12-9.36L23 10"})]}),Kv=e=>l.jsx(Ve,{...e,children:l.jsx("polyline",{points:"15 18 9 12 15 6"})}),Ec=e=>l.jsx(Ve,{...e,children:l.jsx("polyline",{points:"9 18 15 12 9 6"})}),ya=e=>l.jsxs(Ve,{...e,children:[l.jsx("circle",{cx:"9",cy:"6",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"6",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"9",cy:"12",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"12",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"9",cy:"18",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"18",r:"1",fill:"currentColor",stroke:"none"})]}),va=e=>l.jsxs(Ve,{...e,children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Qv=e=>l.jsxs(Ve,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",strokeDasharray:"4 2"}),l.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]}),Yv=e=>l.jsxs(Ve,{...e,children:[l.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),l.jsx("polyline",{points:"5 12 12 5 19 12"})]}),ud=[{to:"/studio",label:"Studio",Icon:Hv,end:!0},{to:"/controls",label:"Controls",Icon:bc}],qv=[{to:"/gallery",label:"Gallery",Icon:kc},{to:"/tags",label:"Tag Library",Icon:lr},{to:"/aliases",label:"Aliases",Icon:Po}],es=({isActive:e})=>["slim-nav-link btn-touch",e?"is-active":null].filter(Boolean).join(" ");function Xv(){const[e,t]=u.useState(!1),{pathname:n}=Lt(),r=im(),{logout:s,user:o}=Lo(),[i,a]=u.useState(!1),c=no("(min-width: 768px)"),d=()=>t(j=>!j),h=()=>t(!1),m=!(n==="/login")&&c;u.useEffect(()=>{const j=p=>{var y;const f=!!((y=p==null?void 0:p.detail)!=null&&y.active);a(f)};return window.addEventListener("cozygen:render-state",j),()=>window.removeEventListener("cozygen:render-state",j)},[]);const x=async()=>{if(i)return;if(n==="/controls"){try{window.dispatchEvent(new Event("cozygen:request-render"))}catch{}return}if(!gm()){alert("No previous render found yet. Render once from Studio first.");return}a(!0);const p=await hm();a(!1),p!=null&&p.success||alert((p==null?void 0:p.error)||"Failed to render.")},w=()=>{try{s()}catch{}window.location.hash="#/login"},S=[...ud,...qv];return l.jsxs("header",{className:"top-bar",children:[l.jsx("div",{className:"top-bar-shell",children:l.jsxs("div",{className:"brand-row",children:[l.jsxs(lm,{to:"/studio",className:"brand-mark",onClick:h,children:[l.jsx(ym,{size:28,className:"brand-logo"}),l.jsx("span",{className:"brand-text",children:"CozyGen"})]}),l.jsx("nav",{className:"desktop-nav","aria-label":"Main navigation",children:S.map(j=>l.jsx(ur,{to:j.to,end:j.end,className:es,children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[l.jsx(j.Icon,{size:16}),l.jsx("span",{children:j.label}),j.to==="/gallery"&&r?l.jsx("span",{className:"badge-dot","aria-hidden":"true"}):null]})},j.to))}),l.jsx("div",{className:"flex-1"}),m?l.jsxs("button",{type:"button",className:`desktop-render-btn ${i?"is-busy":""}`,onClick:x,title:i?"Rendering":"Render","aria-busy":i,"aria-disabled":i,disabled:i,children:[l.jsx("span",{className:"render-icon",children:i?l.jsx("span",{className:"render-spinner","aria-hidden":"true"}):l.jsx(vm,{size:16})}),l.jsx("span",{className:"render-label",children:i?"Rendering":"Render"})]}):null,l.jsxs("button",{type:"button",className:"desktop-logout-btn",onClick:w,title:"Sign out",children:[l.jsx("span",{className:"logout-icon",children:l.jsx(rd,{size:16})}),l.jsx("span",{className:"logout-label",children:"Logout"}),o?l.jsxs("span",{className:"logout-user",children:["@",o]}):null]}),l.jsx("button",{type:"button",className:`mobile-menu-toggle btn-touch ${e?"is-active":""} md:hidden`,onClick:d,"aria-expanded":e,"aria-controls":"cozygen-mobile-nav","aria-label":e?"Close menu":"Open menu",children:l.jsx("span",{className:"mobile-menu-icon",children:l.jsx("span",{})})})]})}),l.jsxs("div",{id:"cozygen-mobile-nav",className:`mobile-nav-drawer md:hidden ${e?"is-open":""}`,role:"menu",children:[l.jsx("div",{className:"mobile-nav-section",children:ud.map(j=>l.jsx(ur,{to:j.to,end:j.end,className:es,onClick:h,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(j.Icon,{size:16}),l.jsx("span",{children:j.label})]})},j.to))}),l.jsxs("div",{className:"mobile-nav-section secondary",children:[l.jsx(ur,{to:"/gallery",className:es,onClick:h,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(kc,{size:16}),l.jsx("span",{children:"Gallery"}),r?l.jsx("span",{className:"badge-dot","aria-hidden":"true"}):null]})}),l.jsx(ur,{to:"/tags",className:es,onClick:h,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(lr,{size:16}),l.jsx("span",{children:"Tag Library"})]})}),l.jsx(ur,{to:"/aliases",className:es,onClick:h,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Po,{size:16}),l.jsx("span",{children:"Aliases"})]})}),l.jsx("button",{type:"button",className:"slim-nav-link btn-touch text-left",onClick:()=>{h(),w()},role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(rd,{size:16}),l.jsx("span",{children:"Logout"}),o?l.jsxs("span",{className:"text-[rgba(159,178,215,0.75)] text-xs",children:["@",o]}):null]})})]})]})]})}const Jv=[{to:"/controls",label:"Controls",Icon:bc},{to:"/compose",label:"Compose",Icon:Cc},{to:"/gallery",label:"Gallery",Icon:kc}],Zv=({isActive:e})=>["bottom-nav-link",e?"is-active":""].filter(Boolean).join(" ");function ex(){const e=Lt(),t=tn(),n=im(),[r,s]=Mt.useState(!1),[o,i]=Mt.useState(!1),[a,c]=Mt.useState(!1),[d,h]=Mt.useState({}),g=Mt.useRef(null),m=Mt.useRef(null),x=e.pathname==="/controls",w=async()=>{if(!(typeof window>"u"))if(s(!0),setTimeout(()=>s(!1),400),x)try{window.dispatchEvent(new CustomEvent("cozygen:request-render"))}catch{}else{if(!gm())return;const S=await hm();S.success||console.warn("Requeue failed:",S.error)}};return Mt.useEffect(()=>{const S=j=>{var f;const p=!!((f=j==null?void 0:j.detail)!=null&&f.active);i(p),p&&(s(!0),setTimeout(()=>s(!1),400))};return window.addEventListener("cozygen:render-state",S),()=>window.removeEventListener("cozygen:render-state",S)},[]),Mt.useEffect(()=>{if(!a)return;const S=j=>{g.current&&g.current.contains(j.target)||m.current&&m.current.contains(j.target)||c(!1)};return window.addEventListener("pointerdown",S),()=>window.removeEventListener("pointerdown",S)},[a]),Mt.useEffect(()=>{if(!a||!m.current)return;const S=m.current.getBoundingClientRect(),j=S.left+S.width/2,p=window.innerHeight-S.top+8;h({left:`${Math.min(window.innerWidth-80,Math.max(40,j))}px`,bottom:`${p}px`})},[a]),l.jsxs(l.Fragment,{children:[l.jsxs("nav",{className:"bottom-nav","aria-label":"Bottom navigation",children:[Jv.map(S=>l.jsxs(ur,{to:S.to,end:S.end,className:Zv,children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(S.Icon,{size:20})}),l.jsxs("span",{className:"bottom-nav-label",children:[S.label,S.to==="/gallery"&&n?l.jsx("span",{className:"badge-dot pulse","aria-hidden":"true"}):null]})]},S.to)),l.jsxs("button",{ref:m,type:"button",className:"bottom-nav-link",onClick:()=>c(S=>!S),"aria-expanded":a,"aria-label":"Open library",children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(lr,{size:20})}),l.jsx("span",{className:"bottom-nav-label",children:"Library"})]},"library"),l.jsxs("button",{type:"button",className:`bottom-nav-link is-action ${r?"is-flash":""} ${o?"is-rendering":""}`,onClick:w,"aria-label":"Render",children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(vm,{size:20})}),l.jsx("span",{className:"bottom-nav-label",children:"Render"})]},"render")]}),l.jsxs("div",{ref:g,className:`library-popover ${a?"is-open":""}`,style:d,children:[l.jsxs("button",{type:"button",className:"library-popover-btn",onClick:()=>{c(!1),t("/aliases")},children:[l.jsx(Po,{size:18}),l.jsx("span",{children:"Aliases"})]}),l.jsxs("button",{type:"button",className:"library-popover-btn",onClick:()=>{c(!1),t("/tags")},children:[l.jsx(lr,{size:18}),l.jsx("span",{children:"Tags"})]})]})]})}function tx(e,t){if(!t||t<=0)return null;const n=Number(e)||0,r=Number(t)||0,s=Math.round(n/r*100);return Number.isFinite(s)?Math.max(0,Math.min(100,s)):null}function nx({busy:e=!1,progressValue:t=0,progressMax:n=0,statusText:r="Idle",statusPhase:s="idle",primaryLabel:o="Render",onPrimary:i,primaryDisabled:a=!1,onLogs:c,logsLabel:d="Logs"}){const h=tx(t,n),g=s==="queued"?"rgba(255, 143, 112, 0.95)":s==="running"?"rgba(68, 225, 197, 0.95)":s==="finished"?"rgba(92, 255, 154, 0.95)":s==="error"?"rgba(255, 143, 112, 0.95)":"rgba(159, 178, 215, 0.55)",x={idle:"Idle",queued:"Queued",running:"Running",finished:"Finished",error:"Error"}[s]||"Status",w=e||a;return l.jsxs("div",{className:"dock-bar-inner",children:[l.jsx("button",{type:"button",onClick:i,disabled:w,className:"dock-primary-btn",children:e?"Rendering":o}),l.jsxs("div",{className:"dock-status-row",children:[l.jsxs("span",{className:"dock-status-left",children:[l.jsx("span",{className:"dock-status-dot",style:{background:g}}),l.jsx("span",{className:"dock-status-label",children:x})]}),l.jsxs("span",{className:"dock-status-right",children:[h!=null&&e?l.jsxs("span",{className:"dock-progress",children:[l.jsx("span",{className:"dock-progress-bar","aria-hidden":"true",children:l.jsx("span",{className:"dock-progress-fill",style:{width:`${h}%`}})}),l.jsxs("span",{children:[h,"%"]})]}):null,l.jsx("span",{className:"dock-status-text",children:r||(e?"Working":"Idle")}),c?l.jsx("button",{type:"button",className:"dock-logs-btn",onClick:c,children:d}):null]})]})]})}const xm="jpg,jpeg,png,webp,gif,bmp,tif,tiff",Lc=(e="")=>/\.(png|jpe?g|gif|webp|bmp|tif?f)$/i.test(e),wm=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e);async function ui({subfolder:e="",page:t=1,perPage:n=50,exts:r=xm}={}){const s=new URLSearchParams({subfolder:e,page:String(t),per_page:String(n),exts:r}),o=await fetch(`/cozygen/input?${s.toString()}`);if(!o.ok)throw new Error(`Input list failed: ${o.status}`);return o.json()}const ro=e=>`/cozygen/input/file?path=${encodeURIComponent(e)}`,xa="output::",_o=(e="")=>e.replace(/\\/g,"/").replace(/^\/+/,"").replace(/\/+$/,""),jm=(e="")=>{const t=e.replace(/\\/g,"/").split("/").filter(Boolean);return t[t.length-1]||""},rx=({subfolder:e="",filename:t=""}={})=>{const n=jm(t);if(!n)return"";const r=_o(e);return`${xa}${r}::${n}`},wa=(e="")=>{if(typeof e!="string"||!e.startsWith(xa))return null;const t=e.slice(xa.length);if(!t)return null;const n=t.lastIndexOf("::"),r=n===-1?t:t.slice(n+2);return r?{subfolder:n===-1?"":t.slice(0,n),filename:r}:null},so=({filename:e="",subfolder:t="",type:n="output"}={})=>{const r=jm(e);return r?`/view?${new URLSearchParams({filename:r,subfolder:_o(t),type:n||"output"}).toString()}`:""},ja=(e="")=>e.split("/").slice(0,-1).join("/"),sx=e=>{if(typeof e!="string"||!e)return e!=null&&e.path?ja(e.path):"";const t=wa(e);return t?_o(t.subfolder):ja(e)},dd=(e=[])=>e.map(t=>{const n=t.rel_path||t.name||"",r=t.name||n||"Untitled",s=!!t.is_dir,o=s?"":ro(n);return{...t,name:r,rel_path:n,is_dir:s,is_image:!s&&Lc(r),is_video:!s&&wm(r),source:"input",preview_url:o}}),lx=(e=[])=>e.map(t=>{const n=t.filename||"",r=t.subfolder||"",s=t.type==="directory",o=s?r||n:[r,n].filter(Boolean).join("/"),i=n||r||o||"Untitled",a=s?"":so({filename:n,subfolder:r,type:t.type});return{...t,name:i,rel_path:o,is_dir:s,is_image:!s&&Lc(n),is_video:!s&&wm(n),source:"output",preview_url:a}}),Hn={get(e,t){try{return(typeof window<"u"?JSON.parse(localStorage.getItem(e)):null)??t}catch{return t}},set(e,t){try{typeof window<"u"&&localStorage.setItem(e,JSON.stringify(t))}catch{}}};function ox({input:e,value:t,onFormChange:n}){var H;const r=((H=e==null?void 0:e.inputs)==null?void 0:H.param_name)||"Image Input",s=(e==null?void 0:e.class_type)||"CozyGenImageInput",o=`cg_last_input_cwd::${r}`,i=`cg_last_picker_source::${r}`,[a,c]=u.useState(""),[d,h]=u.useState(!1),[g,m]=u.useState(!1),[x,w]=u.useState(Hn.get(o,"")),[S,j]=u.useState(1),[p,f]=u.useState(50),[y,N]=u.useState([]),[R,P]=u.useState(1),[F,_]=u.useState(!1),[V,$]=u.useState(""),[W,ue]=u.useState([]),[se,pe]=u.useState(!0),[q,le]=u.useState(()=>Hn.get(i,"inputs")==="outputs"?"outputs":"inputs"),ae=q,k=u.useCallback(D=>{const U=D==="outputs"?"outputs":"inputs";le(U),Hn.set(i,U),w(""),j(1)},[]),I=u.useMemo(()=>{if(a)try{const D=new URL(a,window.location.origin);return(D.searchParams.get("path")||D.searchParams.get("filename")||D.pathname.split("/").pop()||"").split("/").pop()||"No file selected."}catch{}if(!t)return"No file selected.";if(typeof t=="string"){const D=wa(t);return D!=null&&D.filename?D.filename.split("/").pop():t.split("/").pop()}return t!=null&&t.path?t.path.split("/").pop():"No file selected."},[a,t]);u.useEffect(()=>{if(typeof t=="string"&&t){const D=wa(t);D!=null&&D.filename?c(so({filename:D.filename,subfolder:D.subfolder,type:"output"})):c(ro(t)),h(!1)}else t!=null&&t.url?(c(t.url),h(!1)):(c(""),h(!1))},[t]);const E=u.useCallback(async D=>{const U=await Tv(D),te=`/view?filename=${U.filename}&type=input`;c(te),h(!1),Hn.set(o,""),s==="CozyGenImageInput"?n(r,U.filename):n(r,{source:"Upload",path:U.filename,url:te})},[s,n,r]),L=u.useCallback(()=>{c(""),h(!1),s==="CozyGenImageInput"?n(r,""):n(r,{source:"Upload",path:"",url:""})},[s,n,r]),M=u.useCallback(()=>{const U=sx(t)||Hn.get(o,"");w(U),j(1),m(!0)},[t]),z=u.useCallback(()=>{m(!1)},[]);u.useEffect(()=>{if(g){if(ae!=="inputs"){ue([]);return}(async()=>{try{const D=await ui({subfolder:"",page:1,perPage:0,exts:""});ue((D.items||[]).filter(U=>U.is_dir))}catch{}})()}},[g,ae]),u.useEffect(()=>{if(!g)return;let D=!1;async function U(){_(!0);try{if(ae==="outputs"){const te=await um(x,S,p);if(D)return;const J=lx(te&&te.items||[]);D||(N(J),P(te&&te.total_pages||1))}else{const J=await ui({subfolder:x,page:S,perPage:p,exts:se?xm:""}),X=(J.items||[]).some(de=>!de.is_dir);if(se&&!X){const de=await ui({subfolder:x,page:S,perPage:p,exts:""});D||(N(dd(de.items||[])),P(de.total_pages||1),pe(!1));return}D||(N(dd(J.items||[])),P(J.total_pages||1))}}catch(te){console.error(ae==="outputs"?"Failed to load output directory":"Failed to load input directory",te),D||(N([]),P(1))}finally{D||_(!1)}}return U(),()=>{D=!0}},[g,x,S,p,se,ae]);const A=u.useMemo(()=>{const D=V.trim().toLowerCase();let U=y;return se&&(U=U.filter(te=>{if(te.is_dir)return!0;const J=te.name||te.filename||te.rel_path||"";return Lc(String(J))})),D?U.filter(te=>(te.name||te.filename||te.rel_path||"").toLowerCase().includes(D)):U},[y,V,se]),Z=u.useCallback(D=>{if(!D)return;const U=typeof D=="object"?D:null;if(((U==null?void 0:U.source)||"inputs")==="output"){const de=rx({subfolder:(U==null?void 0:U.subfolder)||"",filename:(U==null?void 0:U.filename)||(U==null?void 0:U.name)||""});if(!de)return;const Le=(U==null?void 0:U.preview_url)||so({filename:U==null?void 0:U.filename,subfolder:U==null?void 0:U.subfolder,type:U==null?void 0:U.type});c(Le),h(!1),Hn.set(o,_o((U==null?void 0:U.subfolder)||"")),s==="CozyGenImageInput"?n(r,de):n(r,{source:"OutputGallery",path:de,url:Le}),m(!1);return}const J=typeof D=="string"?D:(U==null?void 0:U.rel_path)||(U==null?void 0:U.path)||"";if(!J)return;const X=(U==null?void 0:U.preview_url)||ro(J);c(X),h(!1),Hn.set(o,ja(J)),s==="CozyGenImageInput"?n(r,J):n(r,{source:"Server",path:J,url:X}),m(!1)},[s,n,r]);return{param:r,previewUrl:a,imgReady:d,setImgReady:h,displayName:I,serverOpen:g,openServer:M,closeServer:z,cwd:x,setCwd:w,page:S,setPage:j,perPage:p,setPerPage:f,totalPages:R,loading:F,search:V,setSearch:$,topDirs:W,imagesOnly:se,setImagesOnly:pe,shownEntries:A,pickerSource:ae,setPickerSource:k,handleUpload:E,clearImage:L,selectServer:Z}}function kt({open:e,onClose:t,title:n,children:r,footer:s,variant:o="sheet",className:i="",contentClassName:a="",shouldCloseOnOverlayClick:c=!0,shouldCloseOnEsc:d=!0}){const h=u.useRef(!1),g=u.useMemo(()=>["bottom-sheet-content",o==="fullscreen"?"is-fullscreen":"is-sheet",a].filter(Boolean).join(" "),[a,o]),m=u.useMemo(()=>["bottom-sheet-overlay",i].filter(Boolean).join(" "),[i]);return u.useEffect(()=>{if(!e||!d)return;const x=w=>{w.key==="Escape"&&(t==null||t())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[e,t,d]),!e||typeof document>"u"?null:xc.createPortal(l.jsx("div",{className:m,role:"presentation",onPointerDown:x=>{h.current=x.target===x.currentTarget},onClick:x=>{c&&h.current&&x.target===x.currentTarget&&(t==null||t())},children:l.jsx("div",{className:g,role:"dialog","aria-modal":"true","aria-label":n||"Sheet",onClick:x=>x.stopPropagation(),children:l.jsxs("div",{className:"bottom-sheet-panel",children:[l.jsxs("header",{className:"bottom-sheet-head",children:[l.jsx("div",{className:"bottom-sheet-title",children:n||""}),l.jsx("button",{type:"button",className:"bottom-sheet-close",onClick:t,"aria-label":"Close",children:""})]}),l.jsx("div",{className:"bottom-sheet-body",children:r}),s?l.jsx("footer",{className:"bottom-sheet-foot",children:s}):null]})})}),document.body)}function ix({items:e=[],value:t,onChange:n,ariaLabel:r,role:s="tablist",className:o="",tabClassName:i="",size:a="md",layout:c="equal",wrap:d=!1}){const h=["segmented-tabs",a==="sm"?"is-compact":"",c==="auto"?"is-auto":"",c==="icon"?"is-icon":"",d?"is-wrap":"",o].filter(Boolean).join(" "),g=s==="tablist"?"tab":"button";return l.jsx("div",{className:h,role:s,"aria-label":r,children:e.map(m=>{const x=m.key===t,w=m.label?String(m.label):"";return l.jsxs("button",{type:"button",role:g,"aria-selected":s==="tablist"?x:void 0,"aria-pressed":s!=="tablist"?x:void 0,className:["segmented-tab",x?"is-active":"",m.icon&&!w?"is-icon":"",m.className||"",i].filter(Boolean).join(" "),onClick:()=>{m.disabled||n==null||n(m.key)},disabled:m.disabled,title:m.title||w||m.ariaLabel,"aria-label":m.ariaLabel,children:[m.icon?l.jsx("span",{className:"segmented-tab-icon",children:m.icon}):null,w?l.jsx("span",{className:"segmented-tab-label",children:w}):null,m.badge?l.jsx("span",{className:"segmented-tab-badge",children:m.badge}):null]},m.key)})})}const Rr=u.memo(ix);function ax({open:e,cwd:t,setCwd:n,page:r,setPage:s,perPage:o,setPerPage:i,totalPages:a,topDirs:c,loading:d,imagesOnly:h,setImagesOnly:g,search:m,setSearch:x,shownEntries:w,onSelect:S,onClose:j,pickerSource:p,setPickerSource:f}){if(!e)return null;const y=p||"inputs",N=typeof f=="function",R=()=>{n(""),s(1)},P=W=>{N&&W!==y&&(f(W),n(""),s(1))},F=t.split("/").filter(Boolean),_=y==="outputs"?"Choose output":"Choose input",V=[{key:"",label:"Root"},...c.map(W=>({key:W.rel_path,label:W.name}))],$=W=>{n(W),s(1)};return l.jsx(kt,{open:e,onClose:j,title:_,variant:"fullscreen",footer:l.jsxs("div",{className:"flex items-center gap-2 w-full",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",disabled:r<=1||d,onClick:()=>s(W=>Math.max(1,W-1)),children:"Prev"}),l.jsxs("div",{className:"text-xs text-center text-[rgba(159,178,215,0.75)] min-w-[92px]",children:[r," / ",a]}),l.jsx("button",{type:"button",className:"ui-button is-muted w-full",disabled:r>=a||d,onClick:()=>s(W=>W<a?W+1:W),children:"Next"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Location"}),l.jsxs("div",{className:"imagepicker-breadcrumb",children:[l.jsx("button",{type:"button",className:"imagepicker-crumb",onClick:R,children:"Root"}),F.map((W,ue)=>{const se=F.slice(0,ue+1).join("/");return l.jsx("button",{type:"button",className:"imagepicker-crumb",onClick:()=>{n(se),s(1)},children:W},se)})]})]}),N?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Source"}),l.jsx(Rr,{ariaLabel:"Source",value:y,onChange:P,size:"sm",items:[{key:"inputs",label:"Inputs"},{key:"outputs",label:"Outputs"}]})]}):null,l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Filters"}),l.jsxs("div",{className:"composer-filters",children:[l.jsxs("label",{className:"inline-flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:h,onChange:W=>{g(W.target.checked),s(1)}}),l.jsx("span",{className:"text-sm text-[rgba(159,178,215,0.85)]",children:"Images only"})]}),l.jsx("input",{type:"search",value:m,onChange:W=>x(W.target.value),placeholder:"Search files",className:"sheet-input ui-control ui-input"}),l.jsxs("select",{className:"sheet-select ui-control ui-select",value:o,onChange:W=>{const ue=parseInt(W.target.value,10)||50;i(ue),s(1)},"aria-label":"Items per page",children:[l.jsx("option",{value:25,children:"25"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]})]}),c.length>0?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Quick folders"}),l.jsx(Rr,{ariaLabel:"Quick folders",value:t,onChange:$,size:"sm",layout:"auto",wrap:!0,className:"imagepicker-chips",items:V})]}):null,l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Results"}),d?l.jsxs("div",{className:"sheet-hint",children:["Scanning ",y==="outputs"?"output":"input"," folders"]}):w.length===0?l.jsx("div",{className:"sheet-hint",children:"Nothing here yet. Try a different folder or turn off Images only."}):null,l.jsx("div",{className:"imagepicker-grid",children:!d&&w.map(W=>{const ue=`${W.source||"input"}::${W.rel_path||W.name}`,se=W.is_dir?"":W.preview_url||(W.source==="output"?so({filename:W.filename,subfolder:W.subfolder,type:W.type}):ro(W.rel_path||""));return l.jsx("button",{type:"button",className:`imagepicker-item ${W.is_dir?"is-dir":""}`,onClick:()=>{W.is_dir?(n(W.rel_path||""),s(1)):S(W)},children:W.is_dir?l.jsxs("div",{className:"imagepicker-dir-row",children:[l.jsx("div",{className:"imagepicker-dir-dot","aria-hidden":"true"}),l.jsx("div",{className:"imagepicker-name",children:W.name})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"imagepicker-thumb",children:se?l.jsx("img",{className:"imagepicker-img",alt:W.name,src:se}):l.jsx("div",{className:"imagepicker-img is-placeholder"})}),l.jsx("div",{className:"imagepicker-name",children:W.name})]})},ue)})})]})]})})}function cx({open:e,onClose:t,title:n,url:r,kind:s="image"}){return r?l.jsx(kt,{open:e,onClose:t,title:n||"Preview",variant:"fullscreen",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("a",{href:r,target:"_blank",rel:"noreferrer",className:"ui-button is-muted w-full text-center",children:"Open"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Close"})]}),children:l.jsx("div",{className:"url-viewer-stage",children:s==="video"?l.jsx("video",{src:r,controls:!0,className:"url-viewer-media",autoPlay:!0}):l.jsx("img",{src:r,alt:n||"Preview",className:"url-viewer-media"})})}):null}function ux({input:e,value:t,onFormChange:n}){const{previewUrl:r,imgReady:s,setImgReady:o,displayName:i,serverOpen:a,openServer:c,closeServer:d,cwd:h,setCwd:g,page:m,setPage:x,perPage:w,setPerPage:S,totalPages:j,topDirs:p,loading:f,search:y,setSearch:N,imagesOnly:R,setImagesOnly:P,shownEntries:F,pickerSource:_,setPickerSource:V,handleUpload:$,clearImage:W,selectServer:ue}=ox({input:e,value:t,onFormChange:n}),se=u.useRef(null),pe=u.useRef(null),[q,le]=u.useState(0),[ae,k]=u.useState(!1);u.useEffect(()=>{const L=pe.current;if(!L)return;const M=A=>{A.preventDefault(),A.stopPropagation()},z=async A=>{var H,D;M(A);const Z=(D=(H=A.dataTransfer)==null?void 0:H.files)==null?void 0:D[0];Z&&(await $(Z),se.current&&(se.current.value=""),le(U=>U+1))};return["dragenter","dragover","dragleave","drop"].forEach(A=>L.addEventListener(A,A==="drop"?z:M)),()=>{["dragenter","dragover","dragleave","drop"].forEach(A=>L.removeEventListener(A,A==="drop"?z:M))}},[$]);const I=async L=>{var z;const M=(z=L.target.files)==null?void 0:z[0];M&&(await $(M),se.current&&(se.current.value=""),le(A=>A+1))},E=()=>{se.current&&se.current.click()};return l.jsxs("div",{className:"asset-card",children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[l.jsx("h3",{className:"text-sm font-semibold text-[#F8F4FF] truncate",children:i}),l.jsx("span",{className:"text-[11px] text-[#C3C7FFB3] truncate",children:"Image"})]}),l.jsx("div",{ref:pe,className:"mb-3 rounded-xl border border-dashed border-[rgba(255,255,255,0.14)] bg-[rgba(255,255,255,0.02)] flex items-center justify-center min-h-[140px] sm:min-h-[180px] overflow-hidden",children:r?l.jsx("button",{type:"button",className:"asset-preview-btn",onClick:()=>k(!0),"aria-label":`Preview ${i}`,title:"Open preview",children:l.jsx("img",{src:r,alt:i,className:`max-h-64 max-w-full object-contain transition-opacity ${s?"opacity-100":"opacity-0"}`,onLoad:()=>o(!0)})}):l.jsx("div",{className:"text-[11px] text-[#9DA3FFCC] text-center px-6",children:"Drop an image here, upload from your device, or choose one from your server."})}),l.jsx("input",{ref:se,type:"file",accept:"image/*",className:"hidden",onChange:I},q),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:"ui-button is-primary is-compact",onClick:c,children:"Choose"}),l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:E,children:"Upload"}),l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:W,children:"Clear"})]}),l.jsx(ax,{open:a,cwd:h,setCwd:g,page:m,setPage:x,perPage:w,setPerPage:S,totalPages:j,topDirs:p,loading:f,imagesOnly:R,setImagesOnly:P,search:y,setSearch:N,shownEntries:F,pickerSource:_,setPickerSource:V,onSelect:ue,onClose:d}),l.jsx(cx,{open:ae,onClose:()=>k(!1),title:i||"Preview",url:r,kind:"image"})]})}function dx({open:e,onClose:t,title:n,description:r,render:s,index:o=0,total:i=0,children:a}){const[c,d]=u.useState("idle");if(u.useEffect(()=>{if(c==="queued"){const g=setTimeout(()=>d("idle"),1600);return()=>clearTimeout(g)}},[c]),!e)return null;const h=typeof s=="function"?s():a;return l.jsxs("div",{className:"spotlight-overlay",role:"dialog","aria-modal":"true",children:[l.jsx("div",{className:"spotlight-backdrop",onClick:t}),l.jsxs("div",{className:"spotlight-sheet",children:[l.jsxs("div",{className:"spotlight-header",children:[l.jsxs("div",{className:"spotlight-meta",children:[l.jsx("div",{className:"spotlight-kicker",children:"Focused control"}),l.jsx("div",{className:"spotlight-title",children:n||"Control"}),r?l.jsx("div",{className:"spotlight-hint",children:r}):null]}),l.jsx("button",{type:"button",className:"spotlight-close",onClick:t,"aria-label":"Close",children:""})]}),l.jsx("div",{className:"spotlight-body",children:h}),l.jsx("div",{className:"spotlight-footer",children:l.jsx("div",{className:"spotlight-footer-right",children:l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:t,"aria-label":"Close",children:"Close"})})})]})]})}function fx({open:e,onClose:t,title:n,value:r,onChange:s,placeholder:o="",description:i}){const a=n||"Edit",c=u.useMemo(()=>`sheet-textarea-${Math.random().toString(36).slice(2,9)}`,[]);return l.jsxs(kt,{open:e,onClose:t,title:a,variant:"fullscreen",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Done"}),children:[i?l.jsx("div",{className:"text-[12px] text-[rgba(159,178,215,0.75)] mb-3",children:i}):null,l.jsx("textarea",{id:c,value:r??"",onChange:d=>s==null?void 0:s(d.target.value),placeholder:o,className:"sheet-textarea ui-control ui-textarea",rows:12})]})}function cn(e){const t=Number(e);return Number.isFinite(t)?t.toFixed(2).replace(/\.?0+$/u,""):"1"}function px(e=""){const t=String(e||"");if(!t.trim())return[];const n=[];let r=0;for(;r<t.length;){for(;r<t.length&&/[\s,]/.test(t[r]);)r++;if(r>=t.length)break;let s=r,o=r,i="tag",a="";const c=t[r]==="(";if(c&&(s=r,r++),t[r]==="$"){i="alias";const d=r;for(r++;r<t.length&&t[r]!=="$"&&t[r]!==","&&t[r]!==`
`;)a+=t[r],r++;t[r]==="$"&&r++,c||(s=d)}else{i="tag";const d=r;for(;r<t.length&&!(t[r]===","||t[r]==="$"||t[r]===`
`||c&&t[r]===":"||!c&&t[r]==="(");)a+=t[r],r++;a=a.trim(),c||(s=d)}if(c&&t[r]===":"){for(r++;r<t.length&&t[r]!==")"&&t[r]!==","&&t[r]!==`
`;)r++;t[r]===")"&&r++}o=r,a&&n.push({type:i,text:a,start:s,end:o})}return n}function fd(e="",t){if(!t||typeof t.start!="number"||typeof t.end!="number")return null;const r=String(e||"").slice(t.start,t.end);if(!r.startsWith("(")||!r.includes(":"))return null;const s=r.lastIndexOf(":");if(s===-1)return null;const o=r.slice(s+1);if(!o.endsWith(")"))return null;const i=o.slice(0,-1).trim();if(!/^\d+(\.\d+)?$/u.test(i))return null;const a=Number.parseFloat(i);return Number.isFinite(a)?{weight:a,wrapperStart:t.start,wrapperEnd:t.end}:null}function pd(e="",t,n){const r=String(e||"");if(!t||typeof t.start!="number"||typeof t.end!="number")return r;const s=n==null?null:Number(n),o=s===null||!Number.isFinite(s)||Math.abs(s-1)<1e-6,i=t.type==="alias"?`$${t.text}$`:t.text;if(o)return r.slice(0,t.start)+i+r.slice(t.end);const a=cn(s),c=`(${i}:${a})`;return r.slice(0,t.start)+c+r.slice(t.end)}function md(e="",t,n,r){var m;if(n===r||n===null||r===null||!(t!=null&&t.length))return e;const s=String(e||""),o=t.map(x=>({start:x.start,end:x.end,text:s.slice(x.start,x.end)})),i=o.slice(0,-1).map((x,w)=>{const S=o[w+1];return s.slice(x.end,S.start)}),a=o.length?s.slice(0,o[0].start):"",c=o.length?s.slice(o[o.length-1].end):"",d=[...o],[h]=d.splice(n,1);d.splice(r,0,h);let g=a+(((m=d[0])==null?void 0:m.text)||"");for(let x=1;x<d.length;x++)g+=(i[x-1]??", ")+d[x].text;return g+=c,g}function mx(e="",t){const n=String(e||"");if(!t||typeof t.start!="number"||typeof t.end!="number")return n;const r=n.slice(0,t.start).replace(/[\s,]*$/,""),s=n.slice(t.end).replace(/^[\s,]*/,"");return r?`${r}, ${s}`.trim():s.trim()}function dr(e="",t){if(!t||typeof t.index!="number"||typeof t.length!="number")return null;const n=String(e||""),r=t.index,s=t.index+t.length;if(r<=0||n[r-1]!=="("||n[s]!==":")return null;let o=s+1,i="";for(;o<n.length&&n[o]!==")";)if(i+=n[o],o+=1,i.length>12)return null;if(o>=n.length||n[o]!==")")return null;const a=i.trim();if(!/^\d+(\.\d+)?$/u.test(a))return null;const c=Number.parseFloat(a);return Number.isFinite(c)?{weight:c,wrapperStart:r-1,wrapperEnd:o+1}:null}function pl(e="",t,n){const r=String(e||"");if(!t||typeof t.index!="number"||typeof t.length!="number")return r;const s=t.index,o=t.index+t.length,i=dr(r,t),a=n==null?null:Number(n),c=a===null||!Number.isFinite(a)||Math.abs(a-1)<1e-6;if(i){if(c)return r.slice(0,i.wrapperStart)+r.slice(s,o)+r.slice(i.wrapperEnd);const h=cn(a);return r.slice(0,o+1)+h+r.slice(i.wrapperEnd-1)}if(c)return r;const d=cn(a);return r.slice(0,s)+"("+r.slice(s,o)+":"+d+")"+r.slice(o)}function ml(e,t,n){const r=Number(e);return Number.isFinite(r)?Math.max(t,Math.min(n,r)):t}function Sa({open:e,onClose:t,title:n="Alias strength",tokenLabel:r="",weight:s=1,onApply:o,onRemoveWeight:i,onDeleteToken:a}){const c=u.useMemo(()=>ml(s||1,.2,2),[s]),[d,h]=u.useState(c);u.useEffect(()=>{e&&h(c)},[e,c]);const g=cn(d);return l.jsx(kt,{open:e,onClose:t,title:n,footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:t,children:"Cancel"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>{o==null||o(d),t==null||t()},children:"Done"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Alias"}),l.jsx("div",{className:"sheet-hint",children:r||""})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Strength"}),l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>h(m=>ml(m-.05,.2,2)),children:""}),l.jsxs("div",{className:"text-sm text-[rgba(237,242,255,0.92)] tabular-nums",children:[g,""]}),l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>h(m=>ml(m+.05,.2,2)),children:"+"})]}),l.jsx("input",{type:"range",min:.2,max:2,step:.05,value:d,onChange:m=>h(ml(m.target.value,.2,2)),className:"w-full","aria-label":"Alias strength"}),l.jsx("div",{className:"sheet-hint",children:"1.0 is normal. Increase to emphasize or reduce to soften."})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Actions"}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>h(1),children:"Reset to 1.0"}),l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>{i==null||i(),t==null||t()},children:"Remove strength"}),l.jsx("button",{type:"button",className:"ui-button is-danger is-compact",onClick:()=>{a==null||a(),t==null||t()},children:"Remove alias"})]})]})]})})}function Qn(e){const t=String(e||"").trim();if(!t)return"";const n=t.toLowerCase(),r={scifi:"Sci-Fi",sci:"Sci",ui:"UI",vfx:"VFX",hdr:"HDR",dof:"DoF",bokeh:"Bokeh",vhs:"VHS",jpeg:"JPEG",jpg:"JPG",png:"PNG",gif:"GIF",webp:"WebP",api:"API",nsfw:"NSFW",sfw:"SFW",sfx:"SFX",fx:"FX",lora:"LoRA",loras:"LoRAs",ip:"IP",egirl:"E-girl",i2v:"I2V",t2i:"T2I",img2img:"Img2Img",txt2img:"Txt2Img",tts:"TTS",asmr:"ASMR",ai:"AI",highleg:"High-Leg","one-piece":"One-Piece","three-quarter":"Three-Quarter"};return r[n]?r[n]:/^\d+$/.test(n)?n:n==="3d"?"3D":n==="2d"?"2D":n.length===1?n.toUpperCase():n.charAt(0).toUpperCase()+n.slice(1)}function hx(e=""){const t=String(e||"").trim().toLowerCase();return t?t.startsWith("flirty_")?"flirty":t.startsWith("action_")||t.startsWith("dynamic_")||t.startsWith("stealth_")||t.startsWith("athletic_")||t.startsWith("running_")||t.startsWith("walking_")?"action":t.startsWith("sleepy_")||t.startsWith("relaxed_")||t.startsWith("reclining_")||t.startsWith("sitting_")||t.startsWith("kneeling_")?"rest":t.startsWith("happy_")||t.startsWith("sad_")||t.startsWith("angry_")||t.startsWith("nervous_")||t.startsWith("smug_")||t.startsWith("surprised_")||t.startsWith("scared_")||t.startsWith("tipsy_")?"emotion":t.startsWith("composed_")||t.startsWith("contemplative_")||t.startsWith("looking_")?"posed":"everyday":""}function gx(e=""){const t=String(e||"").trim().toLowerCase();if(!t)return"";const n=t.split("_")[0]||"";return n==="lingerie"?"lingerie":n==="swimwear"||n==="swim"?"swimwear":n==="costumes"||n==="tech"?"costumes":n==="uniform"?"uniform":n==="formal"?"formal":n==="alt"?"alt":n==="casual"||n==="street"||n==="lounge"||n==="sporty"||n==="dress"?"everyday":n||"everyday"}function yx(e=""){const t=String(e||"").trim().toLowerCase();if(!t)return"";const n=t.split("_")[0]||"";return["fire","candlelight","embers"].includes(n)?"fire":["moonlight"].includes(n)?"night":["neon"].includes(n)?"neon":["studio","stage","sidelighting","dim"].includes(n)?"studio":["golden","sunbeam","dappled"].includes(n)?"natural":["lens","light"].includes(n)?"effects":n||"other"}function ls(e="",t=""){const n=String(e||"").trim(),r=String(t||"").trim().toLowerCase();if(!n)return"";if(r==="outfit")return gx(n)||"everyday";if(r==="pose")return hx(n)||"everyday";if(r==="lighting")return yx(n)||"effects";const s=n.indexOf("_");return s<=0?"":n.slice(0,s).trim()}function Sm(e=""){const t=String(e||"").trim();return t?t.includes(":")?t.split(":").slice(1).join(":"):t:""}function Ll({token:e="",name:t=""}={}){const n=String(t||"").trim()||Sm(e);if(!n)return"";let s=n.replace(/_(\d+)$/u,"").split("_").filter(Boolean);if(s.length===0)return n;const o=[];for(let g=0;g<s.length;g++){const m=s[g],x=s[g+1];if(m&&x&&m.toLowerCase()==="one"&&x.toLowerCase()==="piece"){o.push("one-piece"),g+=1;continue}if(m&&x&&m.toLowerCase()==="three"&&x.toLowerCase()==="quarter"){o.push("three-quarter"),g+=1;continue}o.push(m)}if(s=o,Array.from(new Set(s.map(g=>String(g).toLowerCase()))).length===1)return Qn(s[0]);const a=s[0],c=s.slice(1),d=Qn(a),h=c.map(Qn).join(" ").trim();return h?h.toLowerCase()===d.toLowerCase()?c.length===1&&String(c[0]).toLowerCase()===String(a).toLowerCase()?d||n:s.map(Qn).join(" ").trim()||n:`${d} - ${h}`:s.map(Qn).join(" ").trim()||n}function Pc(e){if(!e)return{subcategory:"",displayName:""};const t=e.name||"",n=e.token||"",r=Sm(n)||t,s=ls(r,e.category)||"other",o=Ll({token:n,name:t})||n||t||"Alias";return{subcategory:s,displayName:o}}function ln(e=""){const t=String(e||"").trim();return t?t==="All"?"All":{action:"Actions",camera:"Camera",body:"Body",char:"Characters",mood:"Mood",outfit:"Outfits",pose:"Poses",prop:"Props",scene:"Scenes",weather:"Weather",style:"Style",hair:"Hair",lighting:"Lighting"}[t]||Qn(t):""}function $n(e=""){const t=String(e||"").trim();return t?t==="All"?"All":t.split(/[_-]+/u).filter(Boolean).map(n=>Qn(n)).join(" ").trim():""}function vx({name:e,label:t,description:n,value:r,onChange:s,onEnter:o,disabled:i=!1,multiline:a=!1,aliasOptions:c=[],aliasCatalog:d=[],onOpenComposer:h}){var tt,lt;const g=u.useRef(null),m=u.useRef(null),x=u.useRef({start:null,end:null}),w=u.useRef(null),S=u.useRef(null),[j,p]=u.useState(null),[f,y]=u.useState(null),[N,R]=u.useState(!1),[P,F]=u.useState(""),[_,V]=u.useState("All"),[$,W]=u.useState("All"),[ue]=u.useState([]),se=u.useRef(null),[pe,q]=u.useState(!1),[le,ae]=u.useState(!1),[k,I]=u.useState(null),E=typeof r=="string"?r:String(r??"");u.useMemo(()=>Array.isArray(c)?c.filter(Boolean):[],[c]);const L=u.useMemo(()=>(Array.isArray(d)?d.filter(v=>v&&v.name):[]).map(v=>({...v,...Pc(v)})),[d]),M=u.useMemo(()=>L,[L]),z=v=>{const b=v.target.value;s==null||s(b)},A=v=>{if(!a&&v.key==="Enter"){v.preventDefault(),o==null||o(v.target.value,v);return}},Z=u.useMemo(()=>{const v=new Map;return M.forEach(b=>{b!=null&&b.token&&v.set(String(b.token).toLowerCase(),b)}),v},[M]),H=u.useMemo(()=>{const v=new Set(["All"]);return L.forEach(b=>{b.category&&v.add(b.category)}),Array.from(v).sort((b,B)=>b.localeCompare(B))},[L]),D=u.useMemo(()=>{const v=new Set(["All"]);return M.forEach(b=>{(!_||_==="All"||b.category===_)&&b.subcategory&&v.add(b.subcategory)}),Array.from(v).sort((b,B)=>b.localeCompare(B))},[M,_]);u.useEffect(()=>{W("All")},[_]);const U=u.useMemo(()=>{const v=E||"";if(!v||!v.includes("$"))return[];const b=[],B=/\$([a-z0-9_:-]+)\$/gi;let Q;for(;Q=B.exec(v);)b.push({token:Q[1],index:Q.index,length:Q[0].length});return b},[E]),te=()=>{try{const v=g.current;v?x.current={start:v.selectionStart??null,end:v.selectionEnd??null}:x.current={start:null,end:null}}catch{x.current={start:null,end:null}}m.current&&m.current.scrollIntoView({block:"center",behavior:"smooth"}),R(!0)},J=u.useMemo(()=>{const v=P.trim().toLowerCase();return M.filter(b=>{var B,Q,ie,ee;return _!=="All"&&(b.category||"")!==_||$!=="All"&&(b.subcategory||"other")!==$?!1:v?((B=b.token)==null?void 0:B.toLowerCase().includes(v))||((Q=b.text)==null?void 0:Q.toLowerCase().includes(v))||((ie=b.name)==null?void 0:ie.toLowerCase().includes(v))||((ee=b.displayName)==null?void 0:ee.toLowerCase().includes(v)):!0}).sort((b,B)=>{const Q=(b.subcategory||"").toLowerCase(),ie=(B.subcategory||"").toLowerCase();return Q!==ie?Q.localeCompare(ie):b.token.localeCompare(B.token)})},[M,_,$,P]),[X,de]=u.useState(30),Le=u.useMemo(()=>J.slice(0,X),[J,X]);u.useEffect(()=>{de(30)},[_,$,P,L]),u.useEffect(()=>{W("All")},[_]);const me=(v,{closeAfter:b=!0}={})=>{var Gs,Ks;const B=g.current,Q=`$${v}$`,ie=E||"",ee=(Gs=x.current)==null?void 0:Gs.start,Ne=(Ks=x.current)==null?void 0:Ks.end,we=(B==null?void 0:B.selectionStart)??(typeof ee=="number"?ee:ie.length),ye=(B==null?void 0:B.selectionEnd)??(typeof Ne=="number"?Ne:ie.length),Te=ie.slice(0,we),mt=ie.slice(ye),Be=Te.match(/[^\s]$/),wt=mt.match(/^[^\s]/),Ht=Be&&Be[0]!==","?", ":"",Wn=wt&&wt[0]!==","?", ":"",To=Te+Ht+Q+Wn+mt;s==null||s(To);const Hs=(Te+Ht+Q+Wn).length;x.current={start:Hs,end:Hs},b&&(R(!1),requestAnimationFrame(()=>{var Qs;(Qs=B==null?void 0:B.blur)==null||Qs.call(B)}))},xe=v=>{const b=E||"",B=dr(b,v),Q=B?B.wrapperStart:v.index,ie=B?B.wrapperEnd:v.index+v.length,ee=b.slice(0,Q).replace(/[\s,]*$/,""),Ne=b.slice(ie).replace(/^[\s,]*/,""),we=ee?`${ee} ${Ne}`.trim():Ne.trim();s==null||s(we)},K=v=>{if(!v)return;const b=Z.get(v.token.toLowerCase()),B=(b==null?void 0:b.displayName)||v.token,Q=dr(E||"",v);I({tokenObj:v,displayName:B,weight:(Q==null?void 0:Q.weight)??1}),ae(!0),requestAnimationFrame(()=>{var ie,ee;return(ee=(ie=g.current)==null?void 0:ie.blur)==null?void 0:ee.call(ie)})},ve=u.useMemo(()=>(v,b)=>{var mt;if(v===b||v===null||b===null||!(U!=null&&U.length))return;const B=E||"",Q=U.map(Be=>{const wt=dr(B,Be),Ht=wt?wt.wrapperStart:Be.index,Wn=wt?wt.wrapperEnd:Be.index+Be.length;return{start:Ht,end:Wn,text:B.slice(Ht,Wn)||`$${Be.token}$`}}),ie=Q.slice(0,-1).map((Be,wt)=>{const Ht=Q[wt+1];return B.slice(Be.end,Ht.start)}),ee=Q.length?B.slice(0,Q[0].start):"",Ne=Q.length?B.slice(Q[Q.length-1].end):"",we=[...Q],[ye]=we.splice(v,1);we.splice(b,0,ye);let Te=ee+(((mt=we[0])==null?void 0:mt.text)||"");for(let Be=1;Be<we.length;Be+=1)Te+=(ie[Be-1]??", ")+we[Be].text;Te+=Ne,s==null||s(Te)},[s,U,E]),ke=(v,b)=>{p(b),w.current=v.currentTarget,v.dataTransfer.effectAllowed="move",v.dataTransfer.setData("text/plain",String(b)),requestAnimationFrame(()=>{w.current&&w.current.classList.add("is-dragging")})},_e=(v,b)=>{v.preventDefault(),v.dataTransfer.dropEffect="move",b!==f&&y(b)},Xe=v=>{v!==f&&y(v)},Je=v=>{j!==null&&v!==null&&j!==v&&ve(j,v),p(null),y(null),w.current=null},be=()=>{w.current&&w.current.classList.remove("is-dragging"),Je(f)},re=(v,b)=>{v.preventDefault(),Je(b)},O=(v,b)=>{var ie,ee;if(!((ee=(ie=v.target)==null?void 0:ie.closest)==null?void 0:ee.call(ie,".token-chip-drag-handle")))return;const Q=v.touches[0];S.current={idx:b,startX:Q.clientX,startY:Q.clientY,moved:!1}},G=v=>{if(!S.current)return;const b=v.touches[0],B=Math.abs(b.clientX-S.current.startX),Q=Math.abs(b.clientY-S.current.startY);if(B<=10&&Q<=10)return;S.current.moved=!0,p(S.current.idx),v.preventDefault();const ie=m.current,ee=ie?ie.querySelectorAll(".token-chip-draggable"):document.querySelectorAll(".token-chip-draggable"),Ne=b.clientX,we=b.clientY;for(let ye=0;ye<ee.length;ye++){const Te=ee[ye].getBoundingClientRect();if(Ne>=Te.left&&Ne<=Te.right&&we>=Te.top&&we<=Te.bottom){y(ye);break}}},ne=()=>{var v;(v=S.current)!=null&&v.moved&&j!==null&&f!==null&&j!==f&&ve(j,f),S.current=null,p(null),y(null)},fe={id:e,name:e,value:E,onChange:z,disabled:i,className:"ui-control ui-input pr-10 text-[13px] sm:text-sm",placeholder:"","aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0},he=()=>{R(!1),requestAnimationFrame(()=>{var v,b;(b=(v=g.current)==null?void 0:v.blur)==null||b.call(v)})},Ee=(()=>{const v=String(e||"").toLowerCase(),b=String(t||"").toLowerCase();return!!`${v} ${b}`.trim().includes("prompt")})(),Se=()=>l.jsx(kt,{open:N,onClose:he,title:Ee?"Insert alias":"Aliases",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:he,children:"Done"}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Search"}),l.jsxs("div",{className:"composer-filters",children:[l.jsx("input",{ref:se,type:"text",value:P,onChange:v=>F(v.target.value),placeholder:"Search aliases",className:"composer-search ui-control ui-input"}),l.jsx("select",{value:_,onChange:v=>V(v.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Filter by category",children:["All",...H.filter(v=>v!=="All")].map(v=>l.jsx("option",{value:v,children:v==="All"?"Category: All":ln(v)},`cat-${v}`))}),D.length>2?l.jsx("select",{value:$,onChange:v=>W(v.target.value),className:"composer-subcategory-select ui-control ui-select is-compact",children:D.map(v=>l.jsx("option",{value:v,children:v==="All"?"All subcategories":$n(v)},v))}):null]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Results"}),l.jsx("div",{className:"composer-alias-list",children:J.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases found."}):l.jsxs(l.Fragment,{children:[Le.map(v=>l.jsxs("button",{type:"button",onClick:()=>me(v.token,{closeAfter:!Ee}),className:"composer-alias-item",children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:v.displayName||v.token}),v.category?l.jsx("span",{className:"composer-alias-category",children:ln(v.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",v.token,"$"]}),l.jsx("div",{className:"composer-alias-text",children:v.text})]},v.key)),X<J.length?l.jsxs("button",{type:"button",onClick:()=>de(v=>Math.min(v+30,J.length)),className:"ui-button is-muted w-full",children:["Show more (",J.length-X," left)"]}):null]})})]})]})});return a?l.jsxs("div",{className:"relative space-y-2",ref:m,children:[h&&!Ee?l.jsxs("div",{className:"stringinput-toolbar",children:[l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>h(e),children:"Open composer"}),L.length?l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:te,children:"Aliases"}):null,l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>q(!0),children:"Expand"})]}):null,l.jsx("textarea",{ref:g,...fe,rows:3,wrap:"soft",onKeyDown:A,className:fe.className+" resize-none min-h-[88px] max-h-[160px] leading-relaxed overflow-y-auto overflow-x-hidden break-words whitespace-pre-wrap",style:{whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"}}),h&&Ee?l.jsx("div",{className:"stringinput-underbar",children:l.jsxs("div",{className:"stringinput-underbar-actions",children:[l.jsx("button",{type:"button",className:"stringinput-action-link",onClick:()=>h(e),children:"Open composer"}),L.length?l.jsx("button",{type:"button",className:"stringinput-action-link",onClick:te,children:"Insert alias"}):null]})}):null,l.jsx(fx,{open:pe,onClose:()=>q(!1),title:t||e,value:E,onChange:s,description:n}),U.length?l.jsxs("div",{className:"stringinput-tokens",children:[l.jsxs("div",{className:"stringinput-tokens-label",children:["Active aliases ",l.jsx("span",{className:"stringinput-tokens-hint",children:"(drag to reorder)"})]}),l.jsx("div",{className:"stringinput-tokens-list",children:U.map((v,b)=>{var we;const B=Z.get(v.token.toLowerCase()),Q=(B==null?void 0:B.displayName)||v.token,ie=j===b,ee=f===b&&j!==null&&j!==b,Ne=((we=dr(E||"",v))==null?void 0:we.weight)??1;return l.jsxs("div",{className:`token-chip token-chip-draggable ${ie?"is-dragging":""} ${ee?"is-drop-target":""}`,title:`$${v.token}$`,role:"button",tabIndex:0,draggable:!0,onDragStart:ye=>ke(ye,b),onDragEnd:be,onDragEnter:()=>Xe(b),onDragOver:ye=>_e(ye,b),onDrop:ye=>re(ye,b),onTouchStart:ye=>O(ye,b),onTouchMove:G,onTouchEnd:ne,onClick:()=>{j===null&&K(v)},onKeyDown:ye=>{(ye.key==="Enter"||ye.key===" ")&&(ye.preventDefault(),K(v))},children:[l.jsx("span",{className:"token-chip-drag-handle","aria-hidden":"true",children:l.jsx(ya,{size:14})}),l.jsx("span",{className:"token-chip-label",children:Q}),Math.abs(Ne-1)>1e-6?l.jsxs("span",{className:"token-chip-weight","aria-label":`Strength ${cn(Ne)}x`,children:["",cn(Ne)]}):null,l.jsx("button",{type:"button",className:"token-chip-remove",onClick:ye=>{ye.stopPropagation(),xe(v)},"aria-label":`Remove ${v.token}`,children:l.jsx(va,{size:12})})]},`${v.token}-${v.index}`)})})]}):null,l.jsx(Sa,{open:le,onClose:()=>ae(!1),title:"Alias strength",tokenLabel:k?`${k.displayName}  $${(tt=k.tokenObj)==null?void 0:tt.token}$`:"",weight:(k==null?void 0:k.weight)??1,onApply:v=>{k!=null&&k.tokenObj&&(s==null||s(pl(E||"",k.tokenObj,v)))},onRemoveWeight:()=>{k!=null&&k.tokenObj&&(s==null||s(pl(E||"",k.tokenObj,null)))},onDeleteToken:()=>{k!=null&&k.tokenObj&&xe(k.tokenObj)}}),N?l.jsx(Se,{}):null]}):l.jsxs("div",{className:"relative space-y-2",ref:m,children:[l.jsx("input",{...fe,type:"text",inputMode:"text",autoComplete:"off",onKeyDown:A,className:fe.className+" min-h-[44px]",ref:g}),U.length?l.jsxs("div",{className:"stringinput-tokens",children:[l.jsxs("div",{className:"stringinput-tokens-label",children:["Active aliases ",l.jsx("span",{className:"stringinput-tokens-hint",children:"(drag to reorder)"})]}),l.jsx("div",{className:"stringinput-tokens-list",children:U.map((v,b)=>{var we;const B=Z.get(v.token.toLowerCase()),Q=(B==null?void 0:B.displayName)||v.token,ie=j===b,ee=f===b&&j!==null&&j!==b,Ne=((we=dr(E||"",v))==null?void 0:we.weight)??1;return l.jsxs("div",{className:`token-chip token-chip-draggable ${ie?"is-dragging":""} ${ee?"is-drop-target":""}`,title:`$${v.token}$`,onClick:()=>{j===null&&K(v)},role:"button",tabIndex:0,draggable:!0,onDragStart:ye=>ke(ye,b),onDragEnd:be,onDragEnter:()=>Xe(b),onDragOver:ye=>_e(ye,b),onDrop:ye=>re(ye,b),onTouchStart:ye=>O(ye,b),onTouchMove:G,onTouchEnd:ne,onKeyDown:ye=>{(ye.key==="Enter"||ye.key===" ")&&(ye.preventDefault(),K(v))},children:[l.jsx("span",{className:"token-chip-drag-handle","aria-hidden":"true",children:l.jsx(ya,{size:14})}),l.jsx("span",{className:"token-chip-label",children:Q}),Math.abs(Ne-1)>1e-6?l.jsxs("span",{className:"token-chip-weight","aria-label":`Strength ${cn(Ne)}x`,children:["",cn(Ne)]}):null,l.jsx("button",{type:"button",className:"token-chip-remove",onClick:ye=>{ye.stopPropagation(),xe(v)},"aria-label":`Remove ${v.token}`,children:l.jsx(va,{size:12})})]},`${v.token}-${v.index}`)})})]}):null,l.jsx(Sa,{open:le,onClose:()=>ae(!1),title:"Alias strength",tokenLabel:k?`${k.displayName}  $${(lt=k.tokenObj)==null?void 0:lt.token}$`:"",weight:(k==null?void 0:k.weight)??1,onApply:v=>{k!=null&&k.tokenObj&&(s==null||s(pl(E||"",k.tokenObj,v)))},onRemoveWeight:()=>{k!=null&&k.tokenObj&&(s==null||s(pl(E||"",k.tokenObj,null)))},onDeleteToken:()=>{k!=null&&k.tokenObj&&xe(k.tokenObj)}}),L.length?l.jsx("button",{type:"button",className:"stringinput-trailing ui-button is-ghost is-compact",onClick:()=>h?h(e):te(),title:h?"Open prompt composer":"Insert alias",children:h?l.jsx(Cc,{size:16}):l.jsx(lr,{size:16})}):null,l.jsx(Se,{})]})}const hd=u.memo(vx),gd=e=>e==null?void 0:String(e).trim().replace(/[^A-Za-z0-9_-]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")||void 0;function xx({name:e,label:t,description:n,value:r,onChange:s,disabled:o=!1,min:i,max:a,step:c,isFloat:d=!1,inputId:h}){const g=c??(d?.01:1),m=h??gd(e),x=j=>{if(j===""||j===null||j===void 0)return"";const p=d?parseFloat(j):parseInt(j,10);return Number.isNaN(p)?"":p},w=j=>{const p=j.target.value,f=x(p);s==null||s(f)},S=j=>{if(j.key!=="ArrowUp"&&j.key!=="ArrowDown")return;j.preventDefault();const p=typeof r=="number"?r:x(String(r??""))||0,f=j.key==="ArrowUp"?g:-g;let y=p+f;if(typeof i=="number"&&(y=Math.max(i,y)),typeof a=="number"&&(y=Math.min(a,y)),d){const N=typeof g=="number"?(String(g).split(".")[1]||"").length:2;y=parseFloat(y.toFixed(Math.max(N,2)))}s==null||s(y)};return l.jsxs("div",{className:"w-full flex items-center gap-2",children:[l.jsx("input",{id:m,name:e,type:"number",inputMode:d?"decimal":"numeric",value:r??"",onChange:w,onKeyDown:S,disabled:o,min:i,max:a,step:g,"aria-label":t||e,"aria-describedby":n?`${m||gd(e)||e}-description`:void 0,className:"ui-control ui-input"}),typeof i=="number"||typeof a=="number"?l.jsxs("div",{className:"hidden sm:flex flex-col text-[10px] text-[#6A6FA8] text-right leading-tight",children:[typeof i=="number"&&l.jsxs("span",{children:["min ",i]}),typeof a=="number"&&l.jsxs("span",{children:["max ",a]})]}):null]})}const gs=u.memo(xx);function wx({name:e,label:t,description:n,value:r,onChange:s,disabled:o=!1}){const i=!!r,a=()=>{o||s==null||s(!i)},c=d=>{(d.key===" "||d.key==="Enter")&&(d.preventDefault(),a())};return l.jsxs("button",{id:e,type:"button",role:"switch","aria-checked":i,"aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0,onClick:a,onKeyDown:c,disabled:o,className:`ui-switch ${i?"is-on":""}`,children:[l.jsx("span",{className:"ui-switch-track",children:l.jsx("span",{className:"ui-switch-knob"})}),l.jsx("span",{className:"ui-switch-state",children:i?"On":"Off"})]})}const yd=u.memo(wx),jx=/\.(safetensors|ckpt|pt|pth)$/i;function _c(e){if(typeof e!="string")return!1;const t=e.trim();if(!t)return!1;const r=t.replace(/\\/g,"/").split("/").filter(Boolean).pop()||"";return jx.test(r)}function Nm(e){if(typeof e!="string")return{folder:"",base:""};const n=e.trim().replace(/\\/g,"/").split("/").filter(Boolean),s=(n.pop()||"").replace(/\.[^.]+$/,"");return{folder:n.join(" ").trim(),base:s}}function Na(e){if(!_c(e))return e;const{folder:t,base:n}=Nm(e);if(!n)return e;if(!t)return n;const r=t.split(/\s+/).filter(Boolean),s=r[r.length-1]||"";if(s&&n.toLowerCase().startsWith(s.toLowerCase())){const o=n.slice(s.length);return o?`${t}${o}`:t}return`${t} ${n}`.trim()}function Sx(e,t){try{if(typeof window>"u"||!e)return null;const n=e.getItem(t);return n?JSON.parse(n):null}catch{return null}}function Ro(e,t,n){try{if(typeof window>"u"||!e)return;e.setItem(t,JSON.stringify(n))}catch{}}function Vt(){try{return typeof window>"u"?null:window.sessionStorage||null}catch{return null}}function Hr(){try{return typeof window>"u"?null:window.localStorage||null}catch{return null}}const km=750,dn=new Map,Yt=new Map,qt=new Map,Ir=new Map,Xt=new Map,Jt=new Map;function Cm(e){var t;if(Yt.has(e)&&(clearTimeout(Yt.get(e)),Yt.delete(e)),qt.has(e)){try{(t=window.cancelIdleCallback)==null||t.call(window,qt.get(e))}catch{}qt.delete(e)}dn.has(e)&&(Ro(Vt(),e,dn.get(e)),dn.delete(e))}function Nx(e){var r;if(Yt.has(e)&&(clearTimeout(Yt.get(e)),Yt.delete(e)),qt.has(e)){try{(r=window.cancelIdleCallback)==null||r.call(window,qt.get(e))}catch{}qt.delete(e)}const t=()=>{dn.has(e)&&(Ro(Vt(),e,dn.get(e)),dn.delete(e))},n=setTimeout(()=>{Yt.delete(e);try{if(typeof window<"u"&&typeof window.requestIdleCallback=="function"){const s=window.requestIdleCallback(()=>{qt.delete(e),t()},{timeout:2500});qt.set(e,s);return}}catch{}t()},km);Yt.set(e,n)}function kx(){Array.from(Yt.values()).forEach(e=>clearTimeout(e)),Yt.clear(),Array.from(qt.values()).forEach(e=>{var t;try{(t=window.cancelIdleCallback)==null||t.call(window,e)}catch{}}),qt.clear(),Array.from(dn.entries()).forEach(([e,t])=>{Ro(Vt(),e,t)}),dn.clear(),Array.from(Xt.values()).forEach(e=>clearTimeout(e)),Xt.clear(),Array.from(Jt.values()).forEach(e=>{var t;try{(t=window.cancelIdleCallback)==null||t.call(window,e)}catch{}}),Jt.clear(),Array.from(Ir.entries()).forEach(([e,t])=>{try{const n=Vt();n&&n.setItem(e,t)}catch{}}),Ir.clear()}if(typeof window<"u"&&!window.__cozygenFormStateFlush){const e=()=>kx();window.addEventListener("beforeunload",e),window.addEventListener("pagehide",e),window.__cozygenFormStateFlush=!0}function Cx(e){var r;if(!e)return{};const t=`${e}_formData`,n=Sx(Vt(),t);if(n&&typeof n=="object")return n;try{const s=Hr();(r=s==null?void 0:s.removeItem)==null||r.call(s,t)}catch{}return{}}function lo(e,t,n={}){var o;if(!e)return;const{immediate:r=!1}=n||{},s=`${e}_formData`;if(r){Cm(s),Ro(Vt(),s,t||{});try{const i=Hr();(o=i==null?void 0:i.removeItem)==null||o.call(i,s)}catch{}return}dn.set(s,t||{}),Nx(s)}function bx(e){e&&Cm(`${e}_formData`)}function Ex(e,t,n=km){var o;if(Ir.set(e,t),Xt.has(e)&&(clearTimeout(Xt.get(e)),Xt.delete(e)),Jt.has(e)){try{(o=window.cancelIdleCallback)==null||o.call(window,Jt.get(e))}catch{}Jt.delete(e)}const r=()=>{const i=Ir.get(e);Ir.delete(e);try{const a=Vt();a&&a.setItem(e,i)}catch{}},s=setTimeout(()=>{Xt.delete(e);try{if(typeof window<"u"&&typeof window.requestIdleCallback=="function"){const i=window.requestIdleCallback(()=>{Jt.delete(e),r()},{timeout:2e3});Jt.set(e,i);return}}catch{}r()},n);Xt.set(e,s)}function Lx(e,t={}){var s,o;const{immediate:n=!1}=t||{},r="cozygen_last_param";if(n){if(Xt.has(r)&&(clearTimeout(Xt.get(r)),Xt.delete(r)),Jt.has(r)){try{(s=window.cancelIdleCallback)==null||s.call(window,Jt.get(r))}catch{}Jt.delete(r)}Ir.delete(r);try{const i=Vt();i&&i.setItem(r,e||"");const a=Hr();(o=a==null?void 0:a.removeItem)==null||o.call(a,r)}catch{}return}Ex(r,e||"")}function Px(){var t,n;const e="cozygen_last_param";try{const r=Vt(),s=((t=r==null?void 0:r.getItem)==null?void 0:t.call(r,e))||"";if(s)return s;const o=Hr();(n=o==null?void 0:o.removeItem)==null||n.call(o,e)}catch{}return""}function bm(e,t){const n=e?String(e):"global",r=t?String(t):"";return`cozygen_dropdown_folder:${n}:${r}`}function vd(e,t){var r,s;const n=bm(e,t);try{const o=Vt(),i=((r=o==null?void 0:o.getItem)==null?void 0:r.call(o,n))||"";if(i)return i;const a=Hr();(s=a==null?void 0:a.removeItem)==null||s.call(a,n)}catch{}return""}function _x(e,t,n){var s;const r=bm(e,t);try{const o=Vt();o&&o.setItem(r,String(n||""));const i=Hr();(s=i==null?void 0:i.removeItem)==null||s.call(i,r)}catch{}}function Rx({workflowName:e,name:t,label:n,description:r,value:s,onChange:o,disabled:i=!1,options:a=[]}){const c=s??"",[d,h]=u.useState(()=>vd(e,t)||"All");u.useEffect(()=>{const p=vd(e,t);h(p||"All")},[e,t]);const g=u.useMemo(()=>(a||[]).map(p=>typeof p=="string"?{value:p,label:p}:{value:p.value??p.name??"",label:p.label??p.name??String(p.value??"")}),[a]),m=(p="")=>{if(typeof p!="string")return"Other";if(!p.includes("/"))return"root";const f=p.split("/");return f.slice(0,f.length-1).join("/")||"root"},x=u.useMemo(()=>{const p=new Set(["All"]);return g.forEach(f=>p.add(m(f.label))),Array.from(p).sort((f,y)=>f.localeCompare(y))},[g]);u.useEffect(()=>{x.includes(d)||h("All")},[x,d]),u.useEffect(()=>{_x(e,t,d)},[e,t,d]);const w=u.useMemo(()=>{const p=f=>f.replace(/\.[^.]+$/,"");return g.filter(f=>{const y=m(f.label);return d==="All"||y===d}).map(f=>{const y=f.label||"";if(_c(y)){const{base:P}=Nm(y),F=Na(y);return{...f,label:d==="All"?F:P||F}}if(d==="All")return f;const N=y.split("/"),R=p(N[N.length-1]||y);return{...f,label:R}}).sort((f,y)=>f.label.localeCompare(y.label))},[g,d]),S=u.useMemo(()=>c===""||c===null||c===void 0?!0:w.some(p=>String(p.value)===String(c)),[w,c]),j=p=>{o==null||o(p.target.value)};return l.jsxs("div",{className:"w-full space-y-2",children:[l.jsx("div",{className:"relative w-full",children:l.jsx("select",{value:d,onChange:p=>h(p.target.value),disabled:i,className:"ui-control ui-select is-compact","aria-label":`Choose folder for ${n||t}`,children:x.map(p=>l.jsx("option",{value:p,children:p},p))})}),l.jsx("div",{className:"relative w-full",children:l.jsxs("select",{id:t,name:t,value:c,onChange:j,disabled:i,"aria-label":n||t,"aria-describedby":r?`${t}-description`:void 0,className:"ui-control ui-select",children:[!S&&c!==""&&l.jsx("option",{value:c,children:Na(String(c))}),w.length>0&&(c===void 0||c==="")&&l.jsx("option",{value:"",children:"Select"}),w.map(p=>l.jsx("option",{value:p.value,children:p.label},p.value)),w.length===0&&l.jsx("option",{value:"",children:"No matches"})]},`${t||"field"}:${d}`)})]})}const ka=u.memo(Rx);function xd(e=[]){return e.map(t=>typeof t=="string"?{value:t,label:t}:{value:t.value??t.name??"",label:t.label??t.name??String(t.value??"")})}function wd(e,t){if(!e)return null;const n=String(e);if(t==="high"){const r=n.match(/(.+)-high(\.[^.]*)?$/i);return r?r[1]:null}if(t==="low"){const r=n.match(/(.+)-low(\.[^.]*)?$/i);return r?r[1]:null}return null}function Ix(e){return e?e.replace(/[_-]+/g," ").replace(/\s+/g," ").trim().replace(/^./,t=>t.toUpperCase()):""}const Tx=(...e)=>e.flat().map(n=>String(n??"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")).filter(Boolean).join("-")||"field";function zx({name:e,label:t,description:n,highParam:r,lowParam:s,highChoices:o=[],lowChoices:i=[],formData:a={},onChangeParam:c,highStrengthParam:d,lowStrengthParam:h,strengthValue:g,onChangeStrength:m,highStrengthValue:x,lowStrengthValue:w,onChangeHighStrength:S,onChangeLowStrength:j,disabled:p=!1}){const f=u.useMemo(()=>xd(o),[o]),y=u.useMemo(()=>xd(i),[i]),N=u.useMemo(()=>{const H=new Map;y.forEach(U=>{const te=wd(U.value,"low");te&&(H.has(te)||H.set(te,U))});const D=[];return f.forEach(U=>{const te=wd(U.value,"high");if(!te)return;const J=H.get(te);J&&D.push({base:te,label:Ix(te),highValue:U.value,lowValue:J.value})}),D.sort((U,te)=>U.label.localeCompare(te.label)),D},[f,y]),R=u.useMemo(()=>{const H=a[r],D=a[s];if(!H||!D)return"";const U=N.find(te=>te.highValue===H&&te.lowValue===D);return U?U.base:""},[a,r,s,N]),P=d||h||`${e}_strength`,F=u.useMemo(()=>Tx(e||"lora",P||"strength"),[e,P]),_=!!(d||h),V=!!(d&&h),$=(H,D=1)=>typeof H=="number"?H:D,W=$(typeof g=="number"?g:typeof x=="number"?x:typeof w=="number"?w:void 0,1),ue=$(typeof x=="number"?x:void 0,W),se=$(typeof w=="number"?w:void 0,V?W:ue),pe=V&&Math.abs(ue-se)>1e-4,[q,le]=u.useState(pe);u.useEffect(()=>{le(pe)},[pe,r,s]);const ae=H=>{if(!c)return;const D=N.find(U=>U.base===H);D&&(c(r,D.highValue),c(s,D.lowValue))};if(N.length===0)return l.jsxs("div",{className:"text-[11px] text-[#9DA3FFCC]",children:["No matching ",l.jsx("span",{className:"font-semibold",children:"-high"})," /"," ",l.jsx("span",{className:"font-semibold",children:"-low"})," LoRA pairs found."]});const k=`${F}-linked`,I=`${F}-high`,E=`${F}-low`,L=V?"Linked":"Strength",M=V?"Applies to high + low":d||h||"",z=(H,D)=>{const U=Array.isArray(H)?H:[H];let te=!1;U.forEach(J=>{if(J==="high"&&typeof S=="function"){S(D);return}if(J==="low"&&typeof j=="function"){j(D);return}typeof m=="function"&&!te&&(m(D),te=!0)})},A=H=>{(d||!d&&!h)&&z("high",H),h&&z("low",H)},Z=()=>{V&&le(H=>{const D=!H;return D||A(typeof ue=="number"?ue:typeof se=="number"?se:W),D})};return l.jsxs("div",{className:"space-y-2",children:[l.jsx(ka,{name:`${e}_pair`,label:t,description:n,value:R||"",onChange:ae,disabled:p,options:N.map(H=>({value:H.base,label:H.label}))}),_&&l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[10px] uppercase tracking-[0.16em] text-[#9DA3FFCC]",children:"Strength"}),V&&l.jsx("button",{type:"button",className:"text-[10px] font-semibold tracking-[0.12em] uppercase text-[#E5E7FF]",onClick:Z,disabled:p,children:q?"Link values":"Split values"})]}),q&&V?l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-3",children:[l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:I,className:"lora-strength-label is-high",children:[l.jsx("span",{className:"lora-strength-label-pill",children:"High"}),l.jsxs("span",{className:"lora-strength-label-text",children:["High strength",d&&l.jsx("span",{className:"lora-strength-label-hint",children:d})]})]}),l.jsx(gs,{name:`${P}_high`,label:"High strength",description:"",value:ue,onChange:H=>z("high",H),disabled:p,isFloat:!0,min:0,max:2,step:.05,inputId:I})]}),l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:E,className:"lora-strength-label is-low",children:[l.jsx("span",{className:"lora-strength-label-pill",children:"Low"}),l.jsxs("span",{className:"lora-strength-label-text",children:["Low strength",h&&l.jsx("span",{className:"lora-strength-label-hint",children:h})]})]}),l.jsx(gs,{name:`${P}_low`,label:"Low strength",description:"",value:se,onChange:H=>z("low",H),disabled:p,isFloat:!0,min:0,max:2,step:.05,inputId:E})]})]}):l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:k,className:"lora-strength-label is-linked",children:[l.jsx("span",{className:"lora-strength-label-pill",children:L}),l.jsxs("span",{className:"lora-strength-label-text",children:["LoRA strength",M&&l.jsx("span",{className:"lora-strength-label-hint",children:M})]})]}),l.jsx(gs,{name:P,label:"LoRA strength",description:"",value:W,onChange:A,disabled:p,isFloat:!0,min:0,max:2,step:.05,inputId:k})]})]})]})}function Ax(e,t){if(e.disabled!==t.disabled||e.name!==t.name||e.label!==t.label||e.description!==t.description||e.highParam!==t.highParam||e.lowParam!==t.lowParam||e.highStrengthParam!==t.highStrengthParam||e.lowStrengthParam!==t.lowStrengthParam||e.strengthValue!==t.strengthValue||e.highStrengthValue!==t.highStrengthValue||e.lowStrengthValue!==t.lowStrengthValue||e.highChoices!==t.highChoices||e.lowChoices!==t.lowChoices||e.onChangeParam!==t.onChangeParam||e.onChangeStrength!==t.onChangeStrength||e.onChangeHighStrength!==t.onChangeHighStrength||e.onChangeLowStrength!==t.onChangeLowStrength)return!1;const n=e.formData||{},r=t.formData||{};return!(n[e.highParam]!==r[t.highParam]||n[e.lowParam]!==r[t.lowParam])}const jd=u.memo(zx,Ax);function $x({id:e,label:t,description:n,preview:r,expanded:s=!1,onToggle:o,children:i,trailing:a,className:c=""}){const d=typeof o=="function",h=e?`${e}-description`:void 0,g=e?`${e}-panel`:void 0,m=typeof t=="string"?t.trim().replace(/\s+/gu," ").replace(/:\s*$/u,""):t,x=typeof n=="string"?n.trim().replace(/\s+/gu," "):n,w=typeof r=="string"||typeof r=="number"?String(r):void 0,S=d?"button":"div",j=d?{type:"button",onClick:o,"aria-expanded":s,"aria-controls":g,"aria-describedby":x?h:void 0}:{};return l.jsxs("div",{className:["field-row",c].filter(Boolean).join(" "),children:[l.jsxs(S,{...j,className:["field-row-head",d?"is-collapsible":"is-static",s?"is-expanded":""].filter(Boolean).join(" "),children:[l.jsxs("div",{className:"field-row-main",children:[l.jsx("div",{className:"field-row-label",children:m}),x?l.jsx("div",{id:h,className:"field-row-description",children:x}):null]}),l.jsxs("div",{className:"field-row-trailing",children:[a?l.jsx("div",{className:"field-row-trailing-control",children:a}):null,r?l.jsx("div",{className:"field-row-preview",title:w,children:r}):null,d?l.jsx("div",{className:"field-row-chevron","aria-hidden":"true",children:l.jsx(Ec,{size:16})}):null]})]}),d&&s?l.jsx("div",{id:g,className:"field-row-body",children:i}):null]})}const di=u.memo($x),Mx=16,Ox=[" - "," ","-","_"],Em=e=>[...new Set(e.filter(Boolean))],oo=(e,t)=>{const n=String(e||"").trim(),r=Ox.map(s=>`${n}${s}${t}`);return r.push(`${n}${t}`),Em(r)},Sd=(e,t)=>{const n=oo(`${e} Strength`,t),r=oo(e,t).map(s=>`${s} Strength`);return Em([...n,...r])},Nd=e=>String(e||"").toLowerCase().replace(/[\s_-]+/g,""),hl=(e,t=[])=>{if(!e)return null;const n=Array.isArray(t)?t:[t];for(const s of n){if(!s)continue;const o=e.get(s);if(o)return{name:s,input:o}}const r=new Map;n.forEach(s=>{s&&r.set(Nd(s),s)});for(const[s,o]of e.entries()){const i=Nd(s);if(r.has(i))return{name:s,input:o}}return null},Fx=Array.from({length:Mx},(e,t)=>{const n=t+1,r=oo("Lora High",n),s=oo("Lora Low",n),o=Sd("Lora High",n),i=Sd("Lora Low",n);return{id:`video_lora_${n}`,label:`Video LoRA ${n}`,highParam:r[0],lowParam:s[0],highParamAliases:r,lowParamAliases:s,highStrengthParam:o[0],lowStrengthParam:i[0],highStrengthParamAliases:o,lowStrengthParamAliases:i}});function Dx(e){var r,s;const t=((r=e==null?void 0:e.inputs)==null?void 0:r.param_type)||((s=e==null?void 0:e.inputs)==null?void 0:s.Param_type),n=String(t||"STRING").toUpperCase();return["NUMBER","FLOAT","INT"].includes(n)?"NUMBER":["BOOLEAN","BOOL"].includes(n)?"BOOLEAN":["DROPDOWN","CHOICE","SELECT"].includes(n)?"DROPDOWN":"STRING"}function Ux(e){const t=(e==null?void 0:e.inputs)||{};return t.label||t.display_name||t.title||t.param_name||(e==null?void 0:e.title)||(e==null?void 0:e.class_type)||"Parameter"}function Bx(e){const t=(e==null?void 0:e.inputs)||{};return t.description||t.help||t.tooltip||t.doc||""}function fr(e){const t=(e==null?void 0:e.inputs)||{};return t.param_name||t.name||t.key||t.id||`param_${(e==null?void 0:e.id)||"unknown"}`}function os(e){const t=(e==null?void 0:e.inputs)||{},n=t.choices||t.options||[],r=t.default_value??t.value??t.default_choice??(n&&n.length?n[0]:"")??"";return{paramName:fr(e),label:Ux(e),description:Bx(e),paramType:Dx(e),multiline:!!t.multiline,min:typeof t.min=="number"?t.min:void 0,max:typeof t.max=="number"?t.max:void 0,step:typeof t.step=="number"?t.step:void 0,choices:n,defaultValue:r}}function Wx({inputs:e=[],formData:t={},onFormChange:n,workflowName:r,onParamEdited:s,onSpotlight:o,compactControls:i=!0,collapseAllKey:a=0,collapseAllCollapsed:c=!0,lastEditedParam:d="",spotlightName:h="",onCloseSpotlight:g=()=>{},onVisibleParamsChange:m=()=>{},aliasOptions:x=[],aliasCatalog:w=[],onOpenComposer:S}){const[j,p]=u.useState({}),[f,y]=u.useState(0),N=u.useRef(t);u.useEffect(()=>{N.current=t},[t]);const R=u.useCallback((I,E)=>{if((I==null?void 0:I.paramType)==="BOOLEAN")return E?"On":"Off";if(E==null||E==="")return"Empty";if(typeof E=="string"){const L=E.trim();if(!L)return"Empty";const M=240,z=140,A=L.length>M?L.slice(0,M):L,H=/[\r\n\t]/.test(A)||/\s{2,}/u.test(A)?A.replace(/\s+/gu," ").trim():A;if(H.length>z)return`${H.slice(0,z)}`;const D=Na(H);return L.length>M?`${D}`:D}return String(E)},[]),P=u.useCallback((I,E)=>{!n||!I||(n(I,E),s==null||s(I),p(L=>(L==null?void 0:L[I])===!1?L:{...L,[I]:!1}))},[n,s]),F=u.useCallback(I=>{I&&p(E=>({...E,[I]:!(E!=null&&E[I])}))},[]),_=u.useMemo(()=>e||[],[e]),V=u.useMemo(()=>{const I=new Map;return(_||[]).forEach(E=>{const L=fr(E);L&&I.set(L,M=>P(L,M))}),I},[P,_]),$=u.useMemo(()=>{const I=new Map;return(_||[]).forEach(E=>{const L=fr(E);L&&I.set(L,(M,z)=>{var A,Z;P(L,M),(Z=(A=z==null?void 0:z.target)==null?void 0:A.blur)==null||Z.call(A),h===L&&(g==null||g())})}),I},[P,g,h,_]),W=u.useMemo(()=>{const I=new Map;return(_||[]).forEach(E=>{const L=fr(E);L&&I.set(L,()=>F(L))}),I},[F,_]);u.useEffect(()=>{const I={};(e||[]).forEach(E=>{const L=fr(E);L&&(I[L]=c)}),d&&(I[d]=!1),p(I)},[a,c,e,d]);const ue=u.useMemo(()=>{const I=new Map;return(e||[]).forEach(E=>{const L=fr(E);L&&I.set(L,E)}),I},[e]),se=u.useMemo(()=>{const I=[];return Fx.forEach(E=>{const L=hl(ue,E.highParamAliases||E.highParam),M=hl(ue,E.lowParamAliases||E.lowParam);if(!L||!M)return;const z=L.input,A=M.input,Z=os(z),H=os(A);if(Z.paramType!=="DROPDOWN"||H.paramType!=="DROPDOWN")return;const D=Z.choices||[],U=H.choices||[];if(!D.length||!U.length)return;const te=hl(ue,E.highStrengthParamAliases||E.highStrengthParam),J=hl(ue,E.lowStrengthParamAliases||E.lowStrengthParam);I.push({...E,highParam:L.name,lowParam:M.name,highStrengthParam:te==null?void 0:te.name,lowStrengthParam:J==null?void 0:J.name,highInput:z,lowInput:A,highCfg:Z,lowCfg:H})}),I},[ue]),pe=u.useMemo(()=>{const I=new Map;return se.forEach(E=>{I.set(E.highParam,E)}),I},[se]),q=u.useMemo(()=>{const I=new Set;return se.forEach(E=>{I.add(E.highParam),I.add(E.lowParam),E.highStrengthParam&&I.add(E.highStrengthParam),E.lowStrengthParam&&I.add(E.lowStrengthParam)}),I},[se]),le=u.useMemo(()=>{const I=[];return(_||[]).forEach(E=>{const L=os(E),M=L.paramName,z=pe.get(M);if(z){I.push({name:M,label:z.label||L.label,description:L.description,render:A=>{const Z=A||N.current||{},H=z.highStrengthParam?Z[z.highStrengthParam]:void 0,D=z.lowStrengthParam?Z[z.lowStrengthParam]:void 0,U=H??D??1;return l.jsx(jd,{name:z.id||z.highParam,label:z.label||L.label,highParam:z.highParam,lowParam:z.lowParam,highChoices:z.highCfg.choices,lowChoices:z.lowCfg.choices,formData:Z,onChangeParam:P,highStrengthParam:z.highStrengthParam,lowStrengthParam:z.lowStrengthParam,strengthValue:U,highStrengthValue:H,lowStrengthValue:D,onChangeHighStrength:z.highStrengthParam?V.get(z.highStrengthParam):void 0,onChangeLowStrength:z.lowStrengthParam?V.get(z.lowStrengthParam):void 0,disabled:!1},`lora-${M}-${f}`)}});return}q.has(M)||I.push({name:M,label:L.label,description:L.description,render:A=>{const Z=A||N.current||{},H={name:M,label:L.label,description:L.description,value:Z[M],defaultValue:L.defaultValue,disabled:!1};return L.paramType==="NUMBER"?l.jsx(gs,{...H,onChange:V.get(M),min:L.min,max:L.max,step:L.step,isFloat:!0},`field-${M}-number-${f}`):L.paramType==="BOOLEAN"?l.jsx(yd,{...H,onChange:V.get(M)},`field-${M}-bool-${f}`):L.paramType==="DROPDOWN"?l.jsx(ka,{...H,workflowName:r,onChange:V.get(M),options:L.choices||[]},`field-${M}-dropdown-${f}`):l.jsx(hd,{...H,aliasOptions:x,aliasCatalog:w,onOpenComposer:S,onChange:V.get(M),onEnter:$.get(M),multiline:L.multiline},`field-${M}-string-${f}`)}})}),I},[_,pe,q,f,r,x,w,S,P,V,$,h,g]),ae=u.useMemo(()=>{const I=new Map;return le.forEach(E=>I.set(E.name,E)),I},[le]);u.useEffect(()=>{m==null||m(le.map(I=>I.name))},[le,m]);const k=u.useCallback(I=>{const E=le.map(Z=>Z.name),L=ae.get(I);if(!L)return;const M=E.indexOf(I),z=M>0?E[M-1]:null,A=M>=0&&M<E.length-1?E[M+1]:null;y(Z=>Z+1),o==null||o({name:I,label:L.label,description:L.description,render:Z=>L.render(Z||N.current),order:E,index:M>=0?M:0,total:E.length,onPrev:z?()=>k(z):null,onNext:A?()=>k(A):null})},[ae,o,le]);return l.jsx("div",{className:"settings-list",children:_.map(I=>{const E=os(I),L=E.paramName,M=pe.get(L);if(M){const{id:J,label:X,highParam:de,lowParam:Le,highStrengthParam:me,lowStrengthParam:xe,highCfg:K,lowCfg:ve}=M,ke=me?t[me]:void 0,_e=xe?t[xe]:void 0,Xe=ke??_e??1,Je=L?`param-${L}`:void 0,be=i?j[L]??!0:!!j[L],re=be?R(E,[t[de],t[Le]].filter(Boolean).join("  ")):null,O=(G=t)=>{const ne=me?G==null?void 0:G[me]:void 0,fe=xe?G==null?void 0:G[xe]:void 0,he=ne??fe??Xe;return l.jsx(jd,{name:J||de,label:X||E.label,highParam:de,lowParam:Le,highChoices:K.choices,lowChoices:ve.choices,formData:G,onChangeParam:P,highStrengthParam:me,lowStrengthParam:xe,strengthValue:he,highStrengthValue:ne,lowStrengthValue:fe,onChangeHighStrength:me?V.get(me):void 0,onChangeLowStrength:xe?V.get(xe):void 0,disabled:!1},`lora-${L}`)};return l.jsx("div",{id:Je,"data-param-name":L,"data-param-label":X||E.label,"data-param-type":"lora_pair",className:"settings-row",children:l.jsx(di,{id:L,label:X||E.label,description:E.description,preview:re,expanded:!be,onToggle:W.get(L),children:be?null:O(t)})},`lora_pair_${J||de}`)}if(q.has(L))return null;const z=t[L],Z={name:L,label:E.label,description:E.description,value:z,disabled:!1,defaultValue:E.defaultValue},H=(J=t,X=!1)=>{const de={...Z,value:J==null?void 0:J[L]};return E.paramType==="NUMBER"?l.jsx(gs,{...de,inputId:L,onChange:V.get(L),min:E.min,max:E.max,step:E.step,isFloat:!0},`field-${L}-number-${f}`):E.paramType==="BOOLEAN"?l.jsx(yd,{...de,onChange:V.get(L)},`field-${L}-bool-${f}`):E.paramType==="DROPDOWN"?l.jsx(ka,{...de,workflowName:r,onChange:V.get(L),options:E.choices||[]},`field-${L}-dropdown-${f}`):l.jsx(hd,{...de,aliasOptions:x,aliasCatalog:w,onOpenComposer:S,onChange:V.get(L),onEnter:$.get(L),multiline:E.multiline||h===L||X},`field-${L}-string-${f}`)},D=L?`param-${L}`:void 0,U=i?j[L]??!0:!!j[L];if(E.paramType==="BOOLEAN")return l.jsx("div",{id:D,"data-param-name":L,"data-param-label":E.label,"data-param-type":"single",className:"settings-row",children:l.jsx(di,{id:L,label:E.label,description:E.description,trailing:H(t,!0)})},L);const te=U?R(E,z):null;return l.jsx("div",{id:D,"data-param-name":L,"data-param-label":E.label,"data-param-type":"single",className:"settings-row",children:l.jsx(di,{id:L,label:E.label,description:E.description,preview:te,expanded:!U,onToggle:W.get(L),children:U?null:H(t,!0)})},L)})})}function Vx(e){return(e||[]).map(t=>{var n;if(["CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput","CozyGenChoiceInput"].includes(t.class_type)){let r=t.class_type.replace("CozyGen","").replace("Input","").toUpperCase();return r==="CHOICE"&&(r="DROPDOWN"),{...t,inputs:{...t.inputs,param_type:r,Multiline:((n=t.inputs)==null?void 0:n.display_multiline)||!1}}}return t})}function Hx({workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,sectionRef:s,compactControls:o=!1,collapseAllState:i=null,onSpotlight:a,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:h,aliasOptions:g=[],aliasCatalog:m=[],onOpenComposer:x}){const w=u.useMemo(()=>Vx((t||[]).filter(S=>S.class_type!=="CozyGenImageInput")),[t]);return l.jsx("section",{className:"settings-surface scroll-mt-24",ref:s,children:l.jsx(Wx,{workflowName:e,inputs:w,formData:n,onFormChange:r,compactControls:o,collapseAllKey:(i==null?void 0:i.key)??0,collapseAllCollapsed:(i==null?void 0:i.collapsed)??!0,onSpotlight:a,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:h,aliasOptions:g,aliasCatalog:m,onOpenComposer:x})})}function Gx({workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,parameterSectionRef:s,compactControls:o=!0,collapseAllState:i=null,onSpotlight:a,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:h,aliasOptions:g=[],aliasCatalog:m=[],onOpenComposer:x}){return l.jsx(Hx,{workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,sectionRef:s,compactControls:o,collapseAllState:i,onSpotlight:a,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:h,aliasOptions:g,aliasCatalog:m,onOpenComposer:x})}const kd=u.forwardRef(function({title:t,kicker:n,meta:r,defaultOpen:s=!0,variant:o="card",className:i="",bodyClassName:a,children:c},d){const h=o==="bare",g=(h?["collapsible-section","collapsible-section--bare",i]:["ui-panel","collapsible-card","sectioned-card",i]).filter(Boolean).join(" "),m=(h?["collapsible-section-body",a||"space-y-4"]:["collapsible-card-body",a||"space-y-4"]).filter(Boolean).join(" "),x=r!=null?l.jsx("div",{className:"collapsible-card-summary-meta",children:r}):null;return l.jsxs("details",{ref:d,className:g,open:s,children:[l.jsxs("summary",{className:h?"collapsible-section-summary":"collapsible-card-summary",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[n?l.jsx("span",{className:"ui-kicker",children:n}):null,l.jsx("span",{className:"text-sm font-semibold tracking-wide",children:t})]}),x,h?l.jsx("span",{className:"collapsible-section-chevron","aria-hidden":"true",children:l.jsx(Ec,{size:16})}):null]}),l.jsx("div",{className:m,children:c})]})});function Cd(e){try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return""}}function Kx({open:e,onClose:t,logs:n=[],onClear:r}){const s=u.useMemo(()=>(n||[]).map(o=>`[${Cd(o.ts)}] ${String(o.level||"info").toUpperCase()} ${o.message}`).join(`
`),[n]);return l.jsx(kt,{open:e,onClose:t,title:"Run logs",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>{var o,i;try{(i=(o=navigator.clipboard)==null?void 0:o.writeText)==null||i.call(o,s||"")}catch{}},children:"Copy"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:r,children:"Clear"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Close"})]}),children:l.jsx("pre",{className:"runlog-pre",children:n!=null&&n.length?n.map((o,i)=>l.jsxs("div",{className:`runlog-line is-${o.level||"info"}`,children:[l.jsx("span",{className:"runlog-ts",children:Cd(o.ts)}),l.jsx("span",{className:"runlog-msg",children:o.message})]},`${o.ts}-${i}`)):"No logs yet."})})}const Qx="cozygen_field_order_v1";function Yx(e,t){if(!e)return t;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:t}catch{return t}}function qx(){if(typeof window>"u")return{};try{return Yx(window.localStorage.getItem(Qx),{})}catch{return{}}}function Xx(e){if(Array.isArray(e))return{order:e.filter(Boolean),hidden:{}};if(!e||typeof e!="object")return{order:[],hidden:{}};const t=Array.isArray(e.order)?e.order.filter(Boolean):[],n=e.hidden&&typeof e.hidden=="object"?e.hidden:{};return{order:t,hidden:n}}function Jx(e){if(!e)return{order:[],hidden:{}};const n=qx()[e];return Xx(n)}function Zx(e,t){let n=Array.isArray(t)?t:[];if(!e||n.length===0)return n;const{order:r,hidden:s}=Jx(e);if(r&&r.length){const o=new Map;n.forEach(a=>{var d;const c=(d=a==null?void 0:a.inputs)==null?void 0:d.param_name;c&&!o.has(c)&&o.set(c,a)});const i=[];r.forEach(a=>{const c=o.get(a);c&&(i.push(c),o.delete(a))}),n.forEach(a=>{var d;const c=(d=a==null?void 0:a.inputs)==null?void 0:d.param_name;if(!c){i.push(a);return}o.has(c)&&(i.push(a),o.delete(c))}),n=i}return n=n.filter(o=>{var a;const i=(a=o==null?void 0:o.inputs)==null?void 0:a.param_name;return i?!s[i]:!0}),n}function ew(){const[e,t]=u.useState([]),[n,r]=u.useState(null),[s,o]=u.useState(!0),[i,a]=u.useState(null);u.useEffect(()=>{let d=!1;async function h(){o(!0),a(null);try{const g=await _v();if(d)return;const m=(g==null?void 0:g.workflows)||[];t(m);let x=null;try{if(x=typeof window<"u"?sessionStorage.getItem("selectedWorkflow"):null,typeof window<"u")try{localStorage.removeItem("selectedWorkflow")}catch{}}catch{x=null}if(x&&m.includes(x))r(x);else if(m.length>0){r(m[0]);try{typeof window<"u"&&sessionStorage.setItem("selectedWorkflow",m[0])}catch{}}else r(null)}catch(g){if(d)return;console.error("Failed to load workflows",g),a(g)}finally{d||o(!1)}}return h(),()=>{d=!0}},[]);const c=u.useCallback(d=>{r(d);try{if(typeof window<"u"&&sessionStorage.setItem("selectedWorkflow",d),typeof window<"u")try{localStorage.removeItem("selectedWorkflow")}catch{}}catch{}},[]);return{workflows:e,selectedWorkflow:n,selectWorkflow:c,loading:s,error:i}}const tw={clip_name1:"clip",clip_name2:"clip",unet_name:"unet",vae_name:"vae",sampler_name:"sampler",scheduler:"scheduler"},nw=["CozyGenDynamicInput","CozyGenImageInput","CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput","CozyGenChoiceInput"];function rw(e){const[t,n]=u.useState(null),[r,s]=u.useState([]),[o,i]=u.useState({}),[a,c]=u.useState(!1),[d,h]=u.useState(null);u.useEffect(()=>{if(!e){n(null),s([]),i({});return}let w=!1;const S=new AbortController;async function j(){c(!0),h(null);try{typeof performance<"u"&&performance.mark&&performance.mark("cozygen:workflow:load")}catch{}try{const p=await Rv(e,{signal:S.signal});if(w)return;for(const P in p){const F=p[P];F.class_type==="CozyGenImageInput"&&!F.inputs.param_name&&(F.inputs.param_name="Image Input"),p[P].id=P}n(p);const f=Object.values(p).filter(P=>nw.includes(P.class_type)),y=await Promise.all(f.map(async P=>{const F=P.class_type==="CozyGenDynamicInput"&&P.inputs.param_type==="DROPDOWN",_=P.class_type==="CozyGenChoiceInput";if(F||_){const V=P.inputs.param_name;let $=P.inputs.choice_type||P.properties&&P.properties.choice_type;if(!$&&F&&($=tw[V]),$)try{const W=await Iv($,{signal:S.signal});P.inputs.choices=W.choices||[]}catch(W){(W==null?void 0:W.name)!=="AbortError"&&console.error(`Choices for ${V} failed`,W),P.inputs.choices=[]}}return P}));if(w)return;s(y);const N=Cx(e),R={};y.forEach(P=>{const F=P.inputs.param_name;if(!F)return;if(N[F]!==void 0){R[F]=N[F];return}let _;if(["CozyGenDynamicInput","CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput"].includes(P.class_type)){if(_=P.inputs.default_value,P.class_type==="CozyGenIntInput"){const V=parseInt(_,10);_=Number.isNaN(V)?0:V}else if(P.class_type==="CozyGenFloatInput"){const V=parseFloat(_);_=Number.isNaN(V)?0:V}}else if(P.class_type==="CozyGenChoiceInput"){const V=P.inputs.choices||[];_=V.length?V[0]:""}else P.class_type,_="";R[F]=_}),i(R);try{typeof performance<"u"&&performance.measure&&(performance.mark("cozygen:workflow:ready"),performance.measure(`cozygen:workflow:ready:${e||"unknown"}`,"cozygen:workflow:load","cozygen:workflow:ready"))}catch{}}catch(p){if(w)return;console.error("Failed to load workflow",p),h(p),n(null),s([])}finally{w||c(!1)}}return j(),()=>{bx(e),w=!0,S.abort()}},[e]);const g=u.useMemo(()=>r.filter(w=>w.class_type==="CozyGenImageInput"),[r]),m=g[0]||null,x=u.useCallback((w,S)=>{i(j=>{const p={...j,[w]:S};return e&&lo(e,p),p})},[e]);return{workflowData:t,dynamicInputs:r,imageInputs:g,primaryImageInput:m,formData:o,setFormData:i,handleFormChange:x,loading:a,error:d}}const bd="::";function ys(e){const t={};return Object.entries(e||{}).forEach(([n,r])=>{const s=String(n||"").trim();if(!s||typeof r!="string")return;const o=r.trim();o&&(t[s]=o)}),t}function Rc(e){const t=new Map;return Object.entries(ys(e)).forEach(([n,r])=>{const s=n.toLowerCase();t.set(s,r),s.includes(bd)&&t.set(s.replace(bd,":"),r)}),t}function Lm(e,t){if(typeof e!="string"||!e.includes("$"))return e;const n=t instanceof Map?t:Rc(t);return n.size?e.replace(/\$([a-z0-9_:-]+)\$/gi,(r,s)=>{const o=n.get(s.toLowerCase());return typeof o=="string"?o:r}):e}function sw(e,t){const n=t instanceof Map?t:Rc(t);if(!n.size||!e||typeof e!="object")return e;let r=!1;const s={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"){const a=Lm(i,n);s[o]=a,a!==i&&(r=!0)}else s[o]=i}),r?s:e}function lw(e){return e?JSON.parse(JSON.stringify(e)):{}}function ow(e,t,n){const r=lw(e),s={...n||{}};if(!t||!Array.isArray(t))return{workflow:r,formData:s};for(const o of t){if(!o||!o.id||!o.inputs||!r[o.id])continue;const i=o.inputs.param_name;if(!i||o.class_type==="CozyGenImageInput")continue;let a=s[i];const c=r[o.id];if(!c||!c.inputs)continue;const d=o.class_type;a===void 0&&(d==="CozyGenChoiceInput"?a=o.inputs.value??o.inputs.default_choice??(o.inputs.choices&&o.inputs.choices[0])??"":a=o.inputs.default_value),a===void 0&&(a=""),s[i]=a,d==="CozyGenFloatInput"||d==="CozyGenIntInput"||d==="CozyGenStringInput"||d==="CozyGenDynamicInput"?c.inputs.default_value=a:d==="CozyGenChoiceInput"&&(c.inputs.value=a)}return{workflow:r,formData:s}}function iw({selectedWorkflow:e,workflowData:t,dynamicInputs:n,imageInputs:r,formData:s,setFormData:o,promptAliases:i=null}){const[a,c]=u.useState(!1),[d,h]=u.useState(!1),[g,m]=u.useState(0),[x,w]=u.useState(0),[S,j]=u.useState("Idle"),[p,f]=u.useState("idle"),[y,N]=u.useState([]),R=u.useRef({ts:0,value:0,max:0}),P=u.useRef(null),F=u.useRef(t),_=u.useRef(s),V=u.useRef(!1),$=u.useRef(0),W=u.useRef(0),ue=u.useRef("idle"),se=u.useRef(null),pe=u.useRef(null);u.useEffect(()=>{F.current=t},[t]),u.useEffect(()=>{V.current=d},[d]),u.useEffect(()=>{$.current=g},[g]),u.useEffect(()=>{W.current=x},[x]),u.useEffect(()=>{ue.current=p},[p]),u.useEffect(()=>{_.current=s},[s]);const q=()=>{se.current&&(clearTimeout(se.current),se.current=null)},le=()=>{pe.current&&(clearTimeout(pe.current),pe.current=null)},ae=u.useCallback((A,Z,H=null)=>{const D={ts:Date.now(),level:A||"info",message:String(Z||""),extra:H||null};N(U=>{const te=[...U||[],D];return te.length>250?te.slice(te.length-250):te})},[]),k=u.useCallback(()=>N([]),[]),I=()=>{if(!(typeof window>"u"||typeof window.dispatchEvent!="function"))try{window.dispatchEvent(new CustomEvent("cozygen:queue-finished"))}catch{}},E=()=>{le(),pe.current=setTimeout(()=>{V.current||(f("idle"),j("Idle"),m(0),w(0))},8e3)},L=u.useCallback(()=>{q(),c(!1),h(!1),m(0),w(0),j("Finished"),f("finished"),ae("success","Finished"),E(),I()},[ae]),M=u.useCallback((A="Error")=>{q(),c(!1),h(!1),j(A),f("error"),ae("error",A||"Error"),E()},[ae]);u.useEffect(()=>{q(),!(!d||!x||x<=0||g<x)&&(se.current=setTimeout(()=>{const A=V.current,Z=$.current,H=W.current,D=ue.current;A&&H>0&&Z>=H&&D!=="finished"&&D!=="error"&&L()},800))},[d,g,x,L]),u.useEffect(()=>{const A=()=>{const Z=window.location.protocol==="https:"?"wss":"ws",H=window.location.host,D=Nc(),U=`${Z}://${H}/ws${D?`?token=${encodeURIComponent(D)}`:""}`,te=new WebSocket(U);P.current=te,te.onmessage=J=>{var Le,me,xe;if(typeof J.data!="string")return;let X;try{X=JSON.parse(J.data)}catch{return}const de=X.type;if(de==="cozygen_batch_ready"){L();return}if(de==="execution_success"||de==="execution_finished"){V.current&&L();return}if(de==="execution_error"||de==="execution_interrupted"){ae("error","Execution error"),M("Execution error");return}if(de==="status"){const K=X.data||{},ve=K.status||K,ke=ve.exec_info||K.exec_info||ve;if(ke&&V.current){const _e=ke.queue_remaining??ke.queue_pending??ke.queue_remaining_items??0;(ke.queue_running??ke.running??0)===0&&_e===0&&L()}return}if(de==="executing"){le(),f("running");const K=(Le=X.data)==null?void 0:Le.node,ve=F.current;if(K&&ve&&ve[K]){const ke=ve[K],_e=ke.title||ke.class_type||"Node";ae("info",`Executing: ${_e}`,{nodeId:K}),j(`Executing: ${_e}`)}else ae("info","Executing"),j("Executing");return}if(de==="progress"){const K=((me=X.data)==null?void 0:me.value)??0,ve=((xe=X.data)==null?void 0:xe.max)??0;m(K),w(ve);const ke=Date.now(),_e=R.current;ke-_e.ts>2500&&(K!==_e.value||ve!==_e.max)&&ve>0&&(R.current={ts:ke,value:K,max:ve},ae("info",`Progress: ${K}/${ve}`));return}},te.onclose=()=>{setTimeout(A,1e3)}};return A(),()=>{q(),le(),P.current&&(P.current.onclose=null,P.current.close())}},[ae,M,L]);const z=u.useCallback(async(A={})=>{if(!t)return;const{overrides:Z=null,persistFormState:H=!0}=A||{};q(),le(),c(!0),h(!0),j("Queuing prompt"),f("queued"),m(0),w(0),ae("info","Queuing prompt",{workflow:e||""});const D=_.current||{},U=Z?{...D,...Z||{}}:D,te=sw(U,i||{}),{workflow:J,formData:X}=ow(t,n||[],te||{}),de={...X,...U};H&&e&&lo(e,de),H&&o(de);const Le=r||[];for(const me of Le){if(!me||!me.id||!me.inputs)continue;const xe=me.inputs.param_name;if(!xe)continue;const K=de[xe];if(!K){alert(`Please upload or select an image for "${xe}" before generating.`),M("Missing image input");return}J[me.id]&&J[me.id].inputs&&(J[me.id].inputs.image_filename=K)}try{let me=J;if(i){const xe=K=>{if(typeof K=="string")return Lm(K,i);if(Array.isArray(K))return K.map(ve=>xe(ve));if(K&&typeof K=="object"){const ve=Array.isArray(K)?[]:{};return Object.entries(K).forEach(([ke,_e])=>{ve[ke]=xe(_e)}),ve}return K};try{me=xe(J)}catch{me=J}}Vv({workflowName:e,workflow:me,timestamp:Date.now()}),await cm({prompt:me}),ae("info","Prompt queued")}catch(me){console.error("Failed to queue prompt",me),me!=null&&me.unauthorized?(ae("error","Session expired. Please sign in again."),M("Session expired. Please sign in again."),window.location.hash="#/login"):(ae("error","Error queuing prompt"),M("Error queuing prompt"))}},[t,n,r,i,e,o,M,ae]);return{isLoading:a,progressValue:g,progressMax:x,statusText:S,statusPhase:p,handleGenerate:z,logEntries:y,clearLogs:k}}const Pm="cozygen_prompt_aliases",_m="cozygen_alias_categories",Rm="cozygen_alias_category_list";function Ed(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem(Pm);return e?JSON.parse(e)||{}:{}}catch{return{}}}function fi(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Pm,JSON.stringify(e||{}))}catch{}}function Ld(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem(_m);return e?JSON.parse(e)||{}:{}}catch{return{}}}function pi(e){if(!(typeof window>"u"))try{window.localStorage.setItem(_m,JSON.stringify(e||{}))}catch{}}function Pd(){if(typeof window>"u")return[];try{const e=window.localStorage.getItem(Rm);return Array.isArray(JSON.parse(e))?JSON.parse(e):[]}catch{return[]}}function mi(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Rm,JSON.stringify(e||[]))}catch{}}function Im(){const[e,t]=u.useState(()=>Ed()),[n,r]=u.useState(()=>Ld()),[s,o]=u.useState(()=>Pd()),[i,a]=u.useState(!1),[c,d]=u.useState(!1),[h,g]=u.useState(null),m=u.useCallback(async()=>{a(!0),g(null);try{const j=await zv(),p=ys((j==null?void 0:j.items)||j||{}),f=(j==null?void 0:j.categories)||{},y=Array.isArray(j==null?void 0:j.categoryList)?j.categoryList:[];t(p),r(f),o(y),fi(p),pi(f),mi(y)}catch(j){console.error("Failed to load prompt aliases",j),g(j);const p=ys(Ed()),f=Ld(),y=Pd();t(p),r(f),o(y)}finally{a(!1)}},[]),x=u.useCallback(async j=>{const p=(j==null?void 0:j.items)||j||{},f=(j==null?void 0:j.categories)||n||{},y=Array.isArray(j==null?void 0:j.categoryList)&&j.categoryList.length?j.categoryList:s.length?s:Array.from(new Set(Object.values(f).filter(Boolean))),N=ys(p||{});d(!0),g(null);try{await Av({items:N,categories:f,categoryList:y}),t(N),r(f),o(y),fi(N),pi(f),mi(y)}catch(R){throw console.error("Failed to save prompt aliases",R),g(R),fi(N),pi(f),mi(y),R}finally{d(!1)}},[n,s]);u.useEffect(()=>{m()},[m]);const w=u.useMemo(()=>{const j=Rc(e),p=new Map(j);return Object.entries(n||{}).forEach(([f,y])=>{const N=String(y||"").trim();N&&(e!=null&&e[f])&&p.set(`${N}:${f}`,e[f])}),p},[e,n]),S=u.useMemo(()=>{const j=new Set,p=[];return w.forEach((f,y)=>{let N=y.includes("::")?y.replace("::",":"):y;const R=N.split(":");R.length>=3&&R[0]&&R[1]&&R[0].toLowerCase()===R[1].toLowerCase()&&(N=[R[0],...R.slice(2)].join(":"));const P=N.toLowerCase();j.has(P)||(j.add(P),p.push(N))}),p},[w]);return{aliases:e,aliasCategories:n,categoryList:s,aliasLookup:w,aliasOptions:S,loading:i,saving:c,error:h,refreshAliases:m,persistAliases:x}}const Tm=u.createContext(null);function zm(){const e=u.useContext(Tm);if(!e)throw new Error("useStudioContext must be used within a StudioProvider");return e}function aw({children:e}){const{workflows:t,selectedWorkflow:n,selectWorkflow:r,loading:s,error:o}=ew(),{workflowData:i,dynamicInputs:a,imageInputs:c,primaryImageInput:d,formData:h,setFormData:g,handleFormChange:m,loading:x,error:w}=rw(n),S=Im(),j=u.useMemo(()=>{const ue=[];return Object.entries(S.aliases||{}).forEach(([se,pe])=>{const q=String(se).split("::"),le=q.length>1,ae=S.aliasCategories&&S.aliasCategories[se]||(le?q[0]:""),k=le?q.slice(1).join("::"):se,I={key:se,name:k,category:ae,text:pe,token:ae?`${ae}:${k}`:k};ue.push({...I,...Pc(I)})}),ue},[S.aliases,S.aliasCategories]),p=u.useMemo(()=>Zx(n,a),[n,a]),f=u.useMemo(()=>{const ue=(p||a||[]).filter(k=>(k==null?void 0:k.class_type)!=="CozyGenImageInput"),se=/\b(checkpoint|ckpt|lora|model|vae|embedding|clip|sampler|scheduler|seed)\b/i,pe=k=>{const I=String((k==null?void 0:k.paramName)||"").toLowerCase(),E=String((k==null?void 0:k.label)||"").toLowerCase(),L=`${I} ${E}`,M=h==null?void 0:h[k==null?void 0:k.paramName],z=typeof M=="string"?M:"";let A=0;return L.includes("prompt")&&(A+=100),L.includes("negative")&&L.includes("prompt")&&(A-=15),k!=null&&k.multiline&&(A+=10),z.includes("$")&&(A+=20),se.test(L)&&(A-=200),_c(z)&&(A-=200),A};if(typeof(h==null?void 0:h.prompt)=="string")return"prompt";const q=ue.map(k=>os(k)).filter(k=>(k==null?void 0:k.paramType)==="STRING"&&(k==null?void 0:k.paramName));if(!q.length)return"prompt";let le=q[0],ae=pe(le);for(let k=1;k<q.length;k+=1){const I=q[k],E=pe(I);E>ae&&(le=I,ae=E)}return(le==null?void 0:le.paramName)||"prompt"},[a,h,p]),{isLoading:y,progressValue:N,progressMax:R,statusText:P,statusPhase:F,handleGenerate:_,logEntries:V,clearLogs:$}=iw({selectedWorkflow:n,workflowData:i,dynamicInputs:a,imageInputs:c,formData:h,setFormData:g,promptAliases:S.aliasLookup}),W=u.useMemo(()=>({workflows:t,selectedWorkflow:n,selectWorkflow:r,workflowsLoading:s,workflowsError:o,workflowData:i,dynamicInputs:a,orderedDynamicInputs:p,imageInputs:c,primaryImageInput:d,formData:h,setFormData:g,handleFormChange:m,workflowLoading:x,workflowError:w,promptFieldName:f,aliasOptions:S.aliasOptions,aliasCatalog:j,aliasLookup:S.aliasLookup,aliasCategories:S.aliasCategories,aliasLoading:S.loading,aliasSaving:S.saving,aliasError:S.error,refreshAliases:S.refreshAliases,persistAliases:S.persistAliases,isLoading:y,progressValue:N,progressMax:R,statusText:P,statusPhase:F,handleGenerate:_,logEntries:V,clearLogs:$}),[t,n,r,s,o,i,a,p,c,d,h,g,m,x,w,f,S.aliasOptions,S.aliasLookup,S.aliasCategories,j,S.loading,S.saving,S.error,S.refreshAliases,S.persistAliases,y,N,R,P,F,_,V,$]);return l.jsx(Tm.Provider,{value:W,children:e})}const cw=u.memo(function({workflows:t,selectedWorkflow:n,onWorkflowChange:r,workflowData:s,presets:o,presetName:i,onPresetNameChange:a,selectedPresetId:c,onPresetSelect:d,onPresetSave:h,onPresetApply:g,onPresetDelete:m,presetStatus:x}){const w=o.length,S=w?`${w} saved`:"No presets yet",[j,p]=u.useState(!1),f=()=>p(N=>!N),y=()=>p(!1);return l.jsxs("div",{className:"controls-context",children:[l.jsxs("div",{className:"controls-context-row",children:[l.jsxs("div",{className:"controls-context-field",children:[l.jsx("label",{className:"controls-context-label",htmlFor:"workflow-select",children:"Workflow"}),l.jsxs("select",{id:"workflow-select",value:n||"",onChange:N=>r(N.target.value),className:"controls-context-select","aria-label":"Workflow",children:[l.jsx("option",{value:"",children:"Select workflow"}),t.map(N=>l.jsx("option",{value:N,children:N},N))]})]}),l.jsxs("div",{className:"controls-context-field",children:[l.jsx("label",{className:"controls-context-label",htmlFor:"preset-select",children:"Preset"}),l.jsxs("select",{id:"preset-select",value:c||"",onChange:N=>d(N.target.value),className:"controls-context-select","aria-label":"Workflow preset",disabled:!s,children:[l.jsx("option",{value:"",children:"Presets"}),o.map(N=>l.jsx("option",{value:N.id,children:N.name},N.id))]})]}),l.jsxs("div",{className:"controls-context-actions",children:[l.jsx("button",{type:"button",className:"controls-context-btn is-primary",onClick:g,disabled:!s||!c,children:"Apply"}),l.jsxs("div",{className:"controls-context-menu",children:[l.jsx("button",{type:"button",className:"controls-context-btn is-ghost",onClick:f,"aria-haspopup":"true","aria-expanded":j,children:""}),j?l.jsxs("div",{className:"controls-context-menu-items",role:"menu",children:[l.jsxs("div",{className:"controls-context-menu-row",children:[l.jsx("input",{type:"text",value:i,onChange:N=>a(N.target.value),className:"controls-context-input",placeholder:"Preset name","aria-label":"Preset name",disabled:!s}),l.jsx("button",{type:"button",className:"controls-context-menu-btn",onClick:()=>{h(),y()},disabled:!s||!i.trim(),role:"menuitem",children:"Save"})]}),l.jsx("button",{type:"button",className:"controls-context-menu-btn is-danger",onClick:()=>{m(),y()},disabled:!s||!c,role:"menuitem",children:"Delete"})]}):null]})]})]}),l.jsxs("div",{className:"controls-context-meta",children:[l.jsx("span",{children:S}),x?l.jsx("span",{className:"controls-context-status",children:x}):null]})]})});function uw(){const e=tn(),{workflows:t=[],selectedWorkflow:n,selectWorkflow:r,workflowData:s,dynamicInputs:o=[],imageInputs:i=[],formData:a,setFormData:c,handleFormChange:d,aliasOptions:h,aliasCatalog:g,isLoading:m,progressValue:x,progressMax:w,statusText:S,statusPhase:j,handleGenerate:p,logEntries:f,clearLogs:y,promptFieldName:N,orderedDynamicInputs:R}=zm(),P=u.useRef(null),F=u.useRef(null),[_,V]=u.useState(()=>Px()),[$,W]=u.useState(null),ue=($==null?void 0:$.name)||"",se=u.useCallback(()=>W(null),[]),[pe,q]=u.useState(!1),[le,ae]=u.useState([]),[k,I]=u.useState([]),[E,L]=u.useState(""),[M,z]=u.useState(""),[A,Z]=u.useState(""),H=u.useRef(new Map),D=u.useCallback((re="")=>{const G=`?field=${encodeURIComponent(re||N||"prompt")}`;e(`/compose${G}`)},[e,N]);u.useEffect(()=>{if(j==="finished"&&typeof window<"u"){try{window.localStorage.setItem("cozygen_gallery_pending","1")}catch{}window.dispatchEvent(new Event("cozygen:gallery-pending"))}},[j]);const U=u.useCallback(re=>{!re||re===n||(n&&lo(n,a||{},{immediate:!0}),L(""),z(""),Z(""),r(re))},[a,n,r]),te=u.useCallback(re=>{z(re);const O=k.find(G=>G.id===re);L((O==null?void 0:O.name)||"")},[k]),J=i||[],X=!!(s&&n),de=J.length>0,Le=u.useCallback((re,O)=>{const G=H.current;O&&re&&G.set(re,O);const ne=le.length?le:(O==null?void 0:O.order)||[],fe=ne.length,he=fe>0?ne.indexOf(re):-1,Ee=he>0?ne[he-1]:null,Se=he>=0&&he<fe-1?ne[he+1]:null,tt=Ee?G.get(Ee):null,lt=Se?G.get(Se):null;return{...O,index:he>=0?he:0,total:fe,onPrev:tt?()=>W(Le(Ee,tt)):null,onNext:lt?()=>W(Le(Se,lt)):null,onRender:p}},[le,p]),me=u.useCallback(re=>{const O=re||[];ae(G=>G.length===O.length&&G.every((ne,fe)=>ne===O[fe])?G:O)},[]),xe=u.useCallback(re=>{const O=re||"";V(O),Lx(O)},[]),K=u.useCallback(re=>{re!=null&&re.name&&W(Le(re.name,re))},[Le]),ve=u.useMemo(()=>{const O=[...R||[],...i||[]].map(G=>{var ne;return(ne=G==null?void 0:G.inputs)==null?void 0:ne.param_name}).filter(G=>G&&typeof G=="string");return new Set(O)},[R,i]),ke=u.useCallback(async re=>{if(!re){I([]),z("");return}try{const O=await $v(re),G=Array.isArray(O==null?void 0:O.presets)?O.presets:[];I(G),z(ne=>ne&&G.some(fe=>fe.id===ne)?ne:""),setPresetMenuOpen(!1)}catch(O){console.error("Failed to load workflow presets",O),I([]),Z("Presets unavailable.")}},[]);u.useEffect(()=>{ke(n)},[n,ke]);const _e=u.useCallback(async()=>{if(!n)return;const re=E.trim();if(!re){Z("Name a preset to save.");return}const O={},G=ve;Object.entries(a||{}).forEach(([he,Ee])=>{(!G.size||G.has(he))&&(O[he]=Ee)});const ne=k.find(he=>he.id===M),fe=ne&&ne.name.toLowerCase()===re.toLowerCase()?ne.id:void 0;try{const he=await Mv(n,{id:fe,name:re,values:O}),Ee=Array.isArray(he==null?void 0:he.presets)?he.presets:[],Se=he==null?void 0:he.preset;I(Ee),Se!=null&&Se.id&&z(Se.id),Z(`Saved "${re}".`)}catch(he){console.error("Failed to save preset",he),Z("Save failed.")}},[ve,a,E,k,M,n]),Xe=u.useCallback(()=>{if(!n||!M)return;const re=k.find(ne=>ne.id===M);if(!(re!=null&&re.values))return;const O=ve,G={};Object.entries(re.values).forEach(([ne,fe])=>{(!O.size||O.has(ne))&&(G[ne]=fe)}),c(ne=>{const fe={...ne,...G};return lo(n,fe,{immediate:!0}),fe}),Z(`Applied "${re.name}".`)},[ve,k,M,n,c]),Je=u.useCallback(async()=>{if(!(!n||!M))try{const re=await Ov(n,M),O=Array.isArray(re==null?void 0:re.presets)?re.presets:[];I(O),z(""),Z("Preset deleted.")}catch(re){console.error("Failed to delete preset",re),Z("Delete failed.")}},[M,n]),be=u.useCallback(()=>{var re;return(re=$==null?void 0:$.render)==null?void 0:re.call($,a)},[$,a]);return u.useEffect(()=>{const re=()=>{!X||m||p()};return window.addEventListener("cozygen:request-render",re),()=>window.removeEventListener("cozygen:request-render",re)},[p,X,m]),u.useEffect(()=>{const re=j==="queued"||j==="running"||m;try{window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:re}}))}catch{}},[j,m]),!t||t.length===0?l.jsx("div",{className:"page-shell",children:l.jsx("div",{className:"neon-card px-3 py-3 sm:px-4 sm:py-4",children:l.jsx("p",{className:"text-sm text-[#9DA3FFCC]",children:"No workflows found. Drop a workflow file in CozyGen and refresh."})})}):l.jsxs("div",{className:"page-shell page-stack has-dock controls-page",children:[l.jsxs("div",{className:"page-bar controls-bar",children:[l.jsx("h1",{className:"page-bar-title",children:"Controls"}),l.jsx("div",{className:"page-bar-actions",children:_?l.jsxs("span",{className:"controls-meta",children:["Last: ",_]}):null})]}),l.jsxs("section",{className:"controls-board",children:[l.jsxs(kd,{title:l.jsxs(l.Fragment,{children:[l.jsx(bc,{size:18,className:"inline-block mr-2 align-text-bottom"}),"Parameters"]}),bodyClassName:"control-shell controls-body",defaultOpen:!0,className:"controls-panel",children:[l.jsx(cw,{workflows:t,selectedWorkflow:n,onWorkflowChange:U,workflowData:s,presets:k,presetName:E,onPresetNameChange:L,selectedPresetId:M,onPresetSelect:te,onPresetSave:_e,onPresetApply:Xe,onPresetDelete:Je,presetStatus:A}),s?l.jsx(Gx,{workflowName:n,dynamicInputs:R,formData:a,onFormChange:d,parameterSectionRef:P,compactControls:!0,lastEditedParam:_,spotlightName:ue,onCloseSpotlight:se,onVisibleParamsChange:me,aliasOptions:h,aliasCatalog:g,onOpenComposer:D,onParamEdited:xe,onSpotlight:K}):l.jsxs("div",{className:"empty-state-inline",children:[l.jsx("span",{className:"empty-state-arrow",children:l.jsx(Yv,{size:20})}),l.jsx("span",{children:"Select a workflow above to get started"})]})]}),de?l.jsx(kd,{ref:F,className:"scroll-mt-24 controls-panel controls-subpanel",title:l.jsxs(l.Fragment,{children:[l.jsx(Gv,{size:18,className:"inline-block mr-2 align-text-bottom"}),"Images"]}),defaultOpen:!1,variant:"bare",children:s?l.jsx("div",{className:"grid grid-cols-1 gap-3 lg:grid-cols-2",children:J.map(re=>l.jsx(ux,{input:re,value:a[re.inputs.param_name]||"",onFormChange:d},re.id))}):null}):null]}),l.jsxs("div",{className:"controls-status-strip",children:[l.jsxs("div",{className:"controls-status-left",children:[l.jsx("span",{className:`controls-status-dot is-${j||"idle"}`,"aria-hidden":"true"}),l.jsxs("div",{className:"controls-status-text",children:[l.jsx("span",{className:"controls-status-phase",children:j||"idle"}),l.jsx("span",{className:"controls-status-msg",children:S||"Idle"})]})]}),l.jsxs("div",{className:"controls-status-right",children:[m&&w>0?l.jsx("div",{className:"controls-status-meter","aria-label":"Progress",children:l.jsx("div",{className:"controls-status-meter-fill",style:{width:`${Math.max(0,Math.min(100,Math.round((x||0)/w*100)))}%`}})}):null,l.jsx("button",{type:"button",className:"controls-status-btn",onClick:()=>q(!0),children:"Logs"})]})]}),l.jsx("section",{className:"dock-panel",children:l.jsx(nx,{busy:m,progressValue:x,progressMax:w,statusText:S,statusPhase:j,primaryLabel:"Render",onPrimary:p,primaryDisabled:!X,onLogs:()=>q(!0)})}),l.jsx(dx,{open:!!$,onClose:se,title:$==null?void 0:$.label,description:$==null?void 0:$.description,render:be,index:($==null?void 0:$.index)??0,total:($==null?void 0:$.total)??0,onPrev:($==null?void 0:$.onPrev)||null,onNext:($==null?void 0:$.onNext)||null,onRender:($==null?void 0:$.onRender)||null,children:null}),l.jsx(Kx,{open:pe,onClose:()=>q(!1),logs:f,onClear:y})]})}function dw(){return l.jsx("div",{className:"page-shell page-stack",children:l.jsxs("section",{className:"home-hero",children:[l.jsx("span",{className:"home-hero-orb is-warm","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-orb is-cool","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-spark","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-beam","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-ring","aria-hidden":"true"}),l.jsxs("div",{className:"home-hero-inner home-hero-full",children:[l.jsx("div",{className:"home-hero-kicker",children:"CozyGen Studio"}),l.jsx("h1",{className:"home-hero-title",children:"Creative studio for prompt-first storytelling"}),l.jsx("p",{className:"home-hero-description",children:"CozyGen is a quiet, cinematic workspace for people who sketch with wordsshape the mood, stage the scene, then send it down the render runway without losing your flow."}),l.jsxs("div",{className:"home-info-grid",children:[l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Control as composition"}),l.jsx("p",{children:"Dial the palette, tempo, and texture in one place. The controls read like a creative brief, not a checklist."})]}),l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Alias & tag storyboards"}),l.jsx("p",{children:"Save characters, atmospheres, and motifs as building blocks, then arrange them like panels in a storyboard."})]}),l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Gallery inspiration"}),l.jsx("p",{children:"Pin your strongest frames, compare variations, and carry the aesthetic through to your next scene."})]}),l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Render runway"}),l.jsx("p",{children:"Stack iterations like takes on a set. Keep composing while the queue runs in the background."})]})]})]})]})})}function fw({subfolder:e,crumbs:t=[],dirChips:n=[],onBack:r,onRoot:s,onCrumb:o,onSelectDir:i}){return l.jsxs("div",{className:"gallery-nav",children:[l.jsx("div",{className:"gallery-crumbs",role:"navigation","aria-label":"Gallery path",children:t.map((a,c)=>l.jsxs(u.Fragment,{children:[l.jsx("span",{className:"text-[#6A6FA8]",children:"/"}),l.jsx("button",{type:"button",className:"gallery-chip-btn",onClick:()=>o==null?void 0:o(a.path),"aria-current":c===t.length-1?"page":void 0,children:a.name})]},a.path||a.name||c))}),n.length>0?l.jsx("div",{className:"gallery-dir-chips",children:n.map(a=>l.jsx("button",{type:"button",className:"gallery-chip-btn",onClick:()=>i==null?void 0:i(a.subfolder),children:a.filename||a.subfolder||"Collection"},a.subfolder||a.filename))}):null]})}const pw=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e),mw=({src:e,poster:t,autoPlay:n})=>{const r=u.useRef(null);return u.useEffect(()=>{const s=r.current;s&&(s.pause(),s.currentTime=0,s.load())},[e]),u.useEffect(()=>{const s=r.current;if(!s)return;let o;const i=()=>{const c=s.play();c&&typeof c.catch=="function"&&c.catch(()=>{})},a=()=>{s.pause()};return n?typeof window<"u"&&"IntersectionObserver"in window?(o=new IntersectionObserver(d=>{d.forEach(h=>{h.isIntersecting?i():a()})},{threshold:.65}),o.observe(s)):i():(a(),s.currentTime=0),()=>{o&&o.disconnect(),a()}},[n,e]),e?l.jsx("video",{ref:r,src:e,poster:t||void 0,muted:!0,playsInline:!0,loop:!0,preload:"metadata",className:"w-full h-auto max-h-[80vh] rounded-2xl object-contain bg-black/40"}):l.jsx("div",{className:"flex items-center justify-center py-16 text-[11px] text-[#9DA3FFCC]",children:"No preview available"})},_d={contentVisibility:"auto",containIntrinsicSize:"260px 320px"};function hw({item:e,onSelect:t,variant:n="grid",autoPlay:r=!1}){if(!e)return null;const s=e.type==="directory",o=e.filename||"",i=e.subfolder||"",a=o||i||"Unknown",c=()=>{t&&t(e)},d=n==="feed"?768:384,h=!s&&o?`/cozygen/thumb?type=output&subfolder=${encodeURIComponent(i)}&filename=${encodeURIComponent(o)}&w=${d}`:null,g=!s&&o?(()=>{const x=e.type&&e.type!=="directory"?e.type:"output",w=e.mtime?`&v=${encodeURIComponent(String(e.mtime))}`:"";return`/view?filename=${encodeURIComponent(o)}&subfolder=${encodeURIComponent(i)}&type=${encodeURIComponent(x)}${w}`})():null,m=pw(o);if(s)return l.jsx("button",{type:"button",onClick:c,className:"gallery-dir-tile",style:_d,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-7 w-7 rounded-lg bg-gradient-to-br from-[#6B5BFF] to-[#FF4F9A] opacity-80 group-hover:opacity-100 flex items-center justify-center text-[11px] text-white",children:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-[11px] font-medium text-[#E5E7FF] truncate",children:a}),l.jsx("div",{className:"text-[10px] text-[#9DA3FFCC] truncate",children:"Collection"})]})]})});if(n==="feed"){const x={contentVisibility:"auto",containIntrinsicSize:"520px 720px"};return l.jsxs("div",{className:"gallery-feed-item",style:x,children:[l.jsxs("button",{type:"button",onClick:c,className:"gallery-feed-media",children:[l.jsx("div",{className:"relative w-full flex items-center justify-center bg-[#020312]",children:m?l.jsx(mw,{src:g,poster:h,autoPlay:r}):h?l.jsx("img",{src:h,alt:a,className:"w-full h-auto max-h-[80vh] rounded-2xl object-contain bg-black/40",loading:"lazy",decoding:"async"}):l.jsx("div",{className:"flex items-center justify-center py-16 text-[11px] text-[#9DA3FFCC]",children:"No preview available"})}),l.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-[#05071680] opacity-0 group-hover:opacity-100 transition-opacity"}),m&&l.jsx("div",{className:"pointer-events-none absolute left-2 top-2 rounded-md bg-[#050716CC] px-2 py-[1px] text-[10px] text-[#CFFAFE] border border-[#3EF0FF80]",children:"Video"})]}),l.jsx("div",{className:"gallery-feed-meta",children:l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"gallery-feed-title",children:a}),i&&l.jsx("div",{className:"gallery-feed-subfolder",children:i})]})})]})}return l.jsxs("button",{type:"button",onClick:c,className:"gallery-tile",style:_d,children:[l.jsxs("div",{className:"gallery-tile-media",children:[h?l.jsx("img",{src:h,alt:a,className:"gallery-tile-img",loading:"lazy",decoding:"async"}):l.jsx("div",{className:"gallery-tile-empty",children:"No preview"}),m&&l.jsx("div",{className:"gallery-badge",children:"Video"})]}),l.jsx("div",{className:"gallery-tile-caption",children:l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsx("div",{className:"gallery-tile-title",children:a}),m&&l.jsx("span",{className:"gallery-tile-flag",children:"Vid"})]})})]})}const Rd=u.memo(hw),gw=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e),yw=e=>{if(!e)return"";const t=e.filename||"",n=e.subfolder||"",r=e.type||"output",s=e.mtime?`&v=${encodeURIComponent(String(e.mtime))}`:"";return`/view?filename=${encodeURIComponent(t)}&subfolder=${encodeURIComponent(n)}&type=${encodeURIComponent(r)}${s}`};function vw({isOpen:e,media:t,onClose:n,onPrev:r,onNext:s,total:o=0,canPrev:i=!1,canNext:a=!1}){const c=u.useRef(!1),d=u.useRef(null);if(u.useEffect(()=>{if(!e)return;const w=S=>{S.key==="Escape"&&(n==null||n()),S.key==="ArrowLeft"&&i&&(r==null||r()),S.key==="ArrowRight"&&a&&(s==null||s())};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[e,n,s,r,i,a]),u.useEffect(()=>{var w,S;e&&((S=(w=d.current)==null?void 0:w.focus)==null||S.call(w))},[e]),!t||!e||typeof document>"u")return null;const h=yw(t),g=t.subfolder||"Gallery",m=gw(t.filename),x=o>1;return xc.createPortal(l.jsx("div",{className:"react-modal-overlay",role:"presentation",onPointerDown:w=>{c.current=w.target===w.currentTarget},onClick:w=>{c.current&&w.target===w.currentTarget&&(n==null||n())},children:l.jsx("div",{className:"react-modal-content",role:"dialog","aria-modal":"true","aria-label":"Preview",onClick:w=>w.stopPropagation(),children:l.jsxs("div",{className:"media-viewer-panel",children:[l.jsxs("header",{className:"media-viewer-head",children:[l.jsxs("div",{className:"media-viewer-meta",children:[l.jsx("div",{className:"media-viewer-title",title:t.filename,children:t.filename}),l.jsxs("div",{className:"media-viewer-sub",children:[l.jsx("span",{className:"media-chip",children:g}),l.jsx("span",{className:`media-chip ${m?"is-clip":"is-still"}`,children:m?"Video":"Image"})]})]}),l.jsxs("div",{className:"media-viewer-actions",children:[l.jsx("a",{href:h,target:"_blank",rel:"noreferrer",className:"media-btn",children:"Open"}),l.jsx("button",{ref:d,type:"button",className:"media-btn solid",onClick:n,children:"Close"})]})]}),l.jsxs("div",{className:"media-viewer-stage",children:[x?l.jsx("button",{type:"button",className:`media-stage-nav is-left ${i?"":"is-disabled"}`,onClick:r,"aria-label":"Previous",disabled:!i,children:""}):null,l.jsx("div",{className:"media-viewer-frame",children:m?l.jsx("video",{src:h,controls:!0,className:"media-viewer-media",autoPlay:!0,muted:!0,playsInline:!0}):l.jsx("img",{src:h,alt:t.filename,className:"media-viewer-media"})}),x?l.jsx("button",{type:"button",className:`media-stage-nav is-right ${a?"":"is-disabled"}`,onClick:s,"aria-label":"Next",disabled:!a,children:""}):null]})]})})}),document.body)}const xw=(e="")=>e.startsWith("."),ww=(e="")=>/\.(png|jpe?g|gif|webp|bmp|tif?f)$/i.test(e),jw=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e);function Sw(){const e=(z,A="")=>{try{return typeof window<"u"&&localStorage.getItem(z)||A}catch{return A}},t=(z,A)=>{try{typeof window<"u"&&localStorage.setItem(z,A)}catch{}},[n,r]=u.useState(e("galleryPath","")),[s,o]=u.useState([]),[i,a]=u.useState(!1),[c,d]=u.useState(!1),[h,g]=u.useState(1),[m,x]=u.useState(1),[w,S]=u.useState(()=>{const z=e("galleryPageSize","30"),A=parseInt(z,10);return Number.isFinite(A)?A:30}),[j,p]=u.useState("all"),[f,y]=u.useState(!1),[N,R]=u.useState(""),[P,F]=u.useState(()=>e("galleryRecursive","0")==="1"),[_,V]=u.useState(0);u.useEffect(()=>{let z=!1;const A=new AbortController;return(async()=>{a(!0);try{typeof performance<"u"&&performance.mark&&performance.mark("cozygen:gallery:fetch")}catch{}try{const H=await um(n,h,w,f,P,j,_,{signal:A.signal});if(z)return;H&&H.items?(o(H.items),x(H.total_pages||1)):(o([]),x(1));try{typeof performance<"u"&&performance.measure&&(performance.mark("cozygen:gallery:ready"),performance.measure("cozygen:gallery:first-paint","cozygen:gallery:fetch","cozygen:gallery:ready"))}catch{}}catch(H){if((H==null?void 0:H.name)==="AbortError")return;console.error("Failed to load gallery",H),z||(o([]),x(1))}finally{!z&&!A.signal.aborted&&(a(!1),d(!0))}})(),t("galleryPath",n),t("galleryPageSize",String(w)),()=>{z=!0,A.abort()}},[n,h,w,_,f,P,j]);const $=u.useMemo(()=>{if(!n)return[];const z=n.replace(/\\/g,"/").split("/").filter(Boolean),A=[];for(let Z=0;Z<z.length;Z++)A.push({name:z[Z],path:z.slice(0,Z+1).join("/")});return A},[n]),W=u.useMemo(()=>s.filter(z=>z.type==="directory").map(z=>({filename:z.filename,subfolder:z.subfolder})),[s]),ue=u.useMemo(()=>{const z=(N||"").trim().toLowerCase();return s.filter(A=>{const Z=(A.filename||"").toLowerCase();return!(!f&&xw(Z)||A.type!=="directory"&&(j==="image"&&!ww(Z)||j==="video"&&!jw(Z))||z&&!Z.includes(z))})},[s,f,j,N]),se=u.useMemo(()=>ue.filter(z=>z.type!=="directory"),[ue]),pe=u.useCallback(()=>{if(!n)return;const z=n.replace(/\\/g,"/").lastIndexOf("/"),A=z===-1?"":n.slice(0,z);r(A),g(1)},[n]),q=u.useCallback(()=>{r(""),g(1)},[]),le=u.useCallback(z=>{r(z||""),g(1)},[]),ae=u.useCallback(z=>{r(z),g(1)},[]),k=u.useCallback(z=>{const A=parseInt(String(z),10)||30;S(A),g(1)},[]),I=u.useCallback(z=>{p(z),g(1)},[]),E=u.useCallback(z=>{const A=!!z;F(A),g(1),t("galleryRecursive",A?"1":"0")},[]),L=u.useCallback(z=>{R(z),g(1)},[]),M=u.useCallback(()=>{V(z=>z+1)},[]);return u.useEffect(()=>{const z=()=>M();return typeof window<"u"&&window.addEventListener&&window.addEventListener("cozygen:queue-finished",z),()=>{typeof window<"u"&&window.removeEventListener&&window.removeEventListener("cozygen:queue-finished",z)}},[M]),u.useEffect(()=>{if(typeof window>"u")return;let z=!1,A,Z;const H=()=>{Z&&(clearTimeout(Z),Z=null)},D=(te=8e3)=>{H(),Z=window.setTimeout(()=>{z||(M(),D(8e3))},te)};return(()=>{if(!("EventSource"in window)){D();return}const te=new URLSearchParams({subfolder:n||"",recursive:P?"1":"0",show_hidden:f?"1":"0"});A=new EventSource(`/cozygen/api/gallery/stream?${te.toString()}`),A.onmessage=()=>{z||M()},A.onerror=()=>{A&&(A.close(),A=null),D()}})(),()=>{z=!0,H(),A&&(A.close(),A=null)}},[n,P,f,M]),{path:n,items:s,loading:i,hasLoaded:c,page:h,totalPages:m,perPage:w,kind:j,showHidden:f,query:N,recursive:P,crumbs:$,dirChips:W,filtered:ue,mediaItems:se,setPage:g,setPerPage:k,setShowHidden:y,setQuery:L,setKind:I,setRecursive:E,goBack:pe,goRoot:q,goToPath:le,selectDir:ae,refresh:M}}function Nw(e){const[t,n]=u.useState(!1),[r,s]=u.useState(null);u.useEffect(()=>{if(!e||e.length===0){s(null),n(!1);return}s(x=>x==null?x:x>=e.length?e.length-1:x)},[e]);const o=u.useCallback(x=>{if(!e||!e.length||!x)return;const w=e.indexOf(x);w!==-1&&(s(w),n(!0))},[e]),i=u.useCallback(()=>{n(!1),s(null)},[]),a=u.useCallback(()=>{!e||!e.length||s(x=>x==null||x>=e.length-1?x:x+1)},[e]),c=u.useCallback(()=>{!e||!e.length||s(x=>x==null||x<=0?x:x-1)},[e]),d=r!=null&&r>=0&&e&&r<e.length?e[r]:null,h=(e==null?void 0:e.length)||0,g=r!==null&&r>0,m=r!==null&&r<h-1;return{viewerOpen:t,viewerIndex:r,currentMedia:d,total:h,canPrev:g,canNext:m,open:o,close:i,next:a,prev:c,setViewerOpen:n}}const Id="cozygen_gallery_view_mode",Td="cozygen_gallery_feed_autoplay";function kw(e,t){const n=u.useRef(null),[r,s]=u.useState(0),[o,i]=u.useState({width:0,cols:0,top:0,viewport:typeof window<"u"&&window.innerHeight||800}),a=m=>{if(!m||typeof window>"u")return null;let x=m.parentElement;for(;x;){const w=window.getComputedStyle(x);if(w.overflowY==="auto"||w.overflowY==="scroll")return x;x=x.parentElement}return window};u.useEffect(()=>{if(!t)return;const m=n.current;if(!m||typeof window>"u"||typeof ResizeObserver>"u")return;const x=a(m)||window,w=()=>{const f=m.getBoundingClientRect(),y=f.width||m.clientWidth||1,N=Math.max(1,Math.floor(y/160)),R=x===window?window.scrollY||0:x.scrollTop||0,P=x===window?{top:0}:x.getBoundingClientRect(),F=x===window?f.top+(window.scrollY||0):f.top-P.top+R,_=x===window?window.innerHeight||800:x.clientHeight||800;i(V=>V.width===y&&V.cols===N&&V.top===F&&V.viewport===_?V:{width:y,cols:N,top:F,viewport:_}),s(R)};w();const S=new ResizeObserver(()=>w());S.observe(m),window.addEventListener("resize",w);let j=!1;const p=()=>{j||(j=!0,window.requestAnimationFrame(()=>{j=!1;const f=x===window?window.scrollY||0:x.scrollTop||0;s(f)}))};return x.addEventListener("scroll",p,{passive:!0}),()=>{S.disconnect(),window.removeEventListener("resize",w),x.removeEventListener("scroll",p)}},[t]);const c=t&&o.cols>0&&e.length>60,{visibleItems:d,topSpacer:h,bottomSpacer:g}=u.useMemo(()=>{if(!c)return{visibleItems:e,topSpacer:0,bottomSpacer:0};const m=o.width/o.cols,x=Math.max(180,Math.ceil(m*1.25)+32),w=Math.ceil(e.length/o.cols),S=Math.max(0,r-o.top),j=Math.max(0,Math.floor(S/x)-2),p=Math.min(w,Math.ceil((S+o.viewport)/x)+2),f=j*o.cols,y=Math.min(e.length,p*o.cols);return{visibleItems:e.slice(f,y),topSpacer:j*x,bottomSpacer:Math.max(0,(w-p)*x)}},[e,o,r,c]);return{containerRef:n,visibleItems:d,topSpacer:h,bottomSpacer:g,virtualized:c}}function Cw(){const{path:e,loading:t,hasLoaded:n,page:r,totalPages:s,perPage:o,kind:i,showHidden:a,recursive:c,crumbs:d,dirChips:h,filtered:g,mediaItems:m,setPage:x,setPerPage:w,setShowHidden:S,setKind:j,setRecursive:p,goBack:f,goRoot:y,goToPath:N,selectDir:R,refresh:P}=Sw(),{viewerOpen:F,currentMedia:_,total:V,canPrev:$,canNext:W,open:ue,close:se,next:pe,prev:q}=Nw(m),[le,ae]=u.useState(()=>{if(typeof window>"u")return"grid";const K=window.localStorage.getItem(Id);return K==="feed"||K==="grid"?K:"grid"}),[k,I]=u.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(Td)==="true");u.useEffect(()=>{try{window.localStorage.setItem(Id,le)}catch{}},[le]),u.useEffect(()=>{try{window.localStorage.setItem(Td,k?"true":"false")}catch{}},[k]);const E=u.useCallback(K=>{if(K.type==="directory"){R(K.subfolder);return}ue(K)},[ue,R]),L=le==="grid",[M,z]=u.useState(!1),A=u.useMemo(()=>[{key:"all",label:"All"},{key:"image",label:"Images"},{key:"video",label:"Videos"}],[]),Z=u.useMemo(()=>[{key:"grid",ariaLabel:"Grid view",icon:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("rect",{x:"1",y:"1",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"9",y:"1",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"1",y:"9",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"9",y:"9",width:"6",height:"6",rx:"1"})]})},{key:"feed",ariaLabel:"Feed view",icon:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("rect",{x:"2",y:"1",width:"12",height:"5",rx:"1"}),l.jsx("rect",{x:"2",y:"8",width:"12",height:"5",rx:"1"})]})}],[]),H=K=>K.type==="directory"?`dir:${K.subfolder||K.filename}`:`${K.subfolder||""}|${K.filename}`;u.useEffect(()=>{try{window.localStorage.setItem("cozygen_gallery_pending","0")}catch{}window.dispatchEvent(new Event("cozygen:gallery-viewed"))},[]);const D=t&&!n,U=t&&n,te=`${g.length} items`,J=D?"Loading":te,{containerRef:X,visibleItems:de,topSpacer:Le,bottomSpacer:me,virtualized:xe}=kw(g,L);return l.jsxs("div",{className:"page-shell gallery-shell",children:[l.jsx("div",{className:"screen-sticky gallery-header",children:l.jsxs("div",{className:"gallery-header-inner",children:[l.jsxs("div",{className:"page-bar gallery-bar",children:[l.jsx("h1",{className:"page-bar-title",children:"Gallery"}),l.jsxs("div",{className:"page-bar-actions",children:[l.jsx("span",{className:"gallery-status",children:J}),l.jsx(Rr,{ariaLabel:"View mode",value:le,onChange:ae,layout:"icon",size:"sm",items:Z}),l.jsx("button",{type:"button",className:"page-bar-btn gallery-filter-btn",onClick:()=>z(!0),children:"Filters"})]})]}),l.jsx("div",{className:"gallery-nav-row",children:l.jsx(fw,{subfolder:e,crumbs:d,dirChips:h,onBack:f,onRoot:y,onCrumb:K=>N(K),onSelectDir:K=>R(K)})}),l.jsxs("div",{className:"gallery-toolbar",children:[l.jsx("div",{className:"gallery-toolbar-left",children:l.jsx(Rr,{ariaLabel:"Filter by type",value:i,onChange:j,size:"sm",items:A})}),l.jsx("div",{className:"gallery-toolbar-right",children:l.jsxs("div",{className:"gallery-options",children:[l.jsx("button",{type:"button",className:`gallery-option-btn ${c?"is-active":""}`,onClick:()=>p(K=>!K),title:c?"Showing subfolders":"This folder only",children:c?l.jsx(sd,{size:16}):l.jsx(ld,{size:16})}),l.jsx("button",{type:"button",className:`gallery-option-btn ${a?"is-active":""}`,onClick:()=>S(K=>!K),title:a?"Showing hidden":"Hiding hidden",children:a?l.jsx(od,{size:16}):l.jsx(id,{size:16})}),le==="feed"&&l.jsx("button",{type:"button",className:`gallery-option-btn ${k?"is-active":""}`,onClick:()=>I(K=>!K),title:k?"Autoplay on":"Autoplay off",children:k?l.jsx(ad,{size:16}):l.jsx(cd,{size:16})}),l.jsx("button",{type:"button",className:"gallery-option-btn",onClick:P,title:"Refresh",children:l.jsx(ga,{size:16})})]})})]}),l.jsxs("div",{className:"gallery-pagination",children:[l.jsxs("div",{className:"gallery-pagination-info",children:[U?l.jsx("span",{className:"loading-spinner","aria-hidden":"true"}):null,l.jsx("span",{className:D?"gallery-loading-text":"",children:J})]}),l.jsxs("div",{className:"gallery-pagination-controls",children:[l.jsx("button",{type:"button",className:"gallery-page-btn",onClick:()=>x(K=>Math.max(1,K-1)),disabled:r<=1||t,"aria-label":"Previous page",children:l.jsx(Kv,{size:16})}),l.jsxs("span",{className:"gallery-page-indicator",children:[r," / ",s]}),l.jsx("button",{type:"button",className:"gallery-page-btn",onClick:()=>x(K=>K<s?K+1:K),disabled:r>=s||t,"aria-label":"Next page",children:l.jsx(Ec,{size:16})}),l.jsxs("select",{value:o,onChange:K=>w(parseInt(K.target.value,10)||30),className:"gallery-page-size","aria-label":"Items per page",children:[l.jsx("option",{value:15,children:"15"}),l.jsx("option",{value:30,children:"30"}),l.jsx("option",{value:60,children:"60"}),l.jsx("option",{value:120,children:"120"})]})]})]})]})}),D&&g.length===0?l.jsx("div",{className:"gallery-grid-responsive",children:Array.from({length:8}).map((K,ve)=>l.jsxs("div",{className:"gallery-skeleton-item",children:[l.jsx("div",{className:"gallery-skeleton-thumb skeleton"}),l.jsx("div",{className:"gallery-skeleton-label skeleton skeleton-text"})]},ve))}):g.length===0?l.jsxs("div",{className:"gallery-empty",children:[l.jsx("div",{className:"gallery-empty-icon",children:l.jsx(Qv,{size:48})}),l.jsx("div",{className:"gallery-empty-title",children:"No media found"}),l.jsx("div",{className:"gallery-empty-desc",children:i!=="all"?`No ${i}s match your filters. Try selecting "All" or adjusting your search.`:"This folder is empty. Render something new or navigate to a different folder."})]}):L?l.jsx("div",{className:"w-full overflow-hidden",children:l.jsxs("div",{className:"gallery-grid-responsive",ref:X,children:[xe&&Le>0?l.jsx("div",{"aria-hidden":!0,style:{gridColumn:"1 / -1",height:`${Le}px`}}):null,de.map(K=>l.jsx(Rd,{item:K,onSelect:E,variant:"grid",autoPlay:!1},H(K))),xe&&me>0?l.jsx("div",{"aria-hidden":!0,style:{gridColumn:"1 / -1",height:`${me}px`}}):null]})}):l.jsx("div",{className:"flex flex-col gap-6 items-center",children:g.filter(K=>K.type!=="directory").map(K=>l.jsx("div",{className:"w-full flex justify-center",children:l.jsx(Rd,{item:K,onSelect:E,variant:"feed",autoPlay:k})},H(K)))}),l.jsx(vw,{isOpen:F,media:_,onClose:se,onPrev:q,onNext:pe,total:V,canPrev:$,canNext:W}),l.jsx(kt,{open:M,onClose:()=>z(!1),title:"Gallery filters",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>z(!1),children:"Done"}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Type"}),l.jsx(Rr,{ariaLabel:"Filter by type",value:i,onChange:j,size:"sm",items:A})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Options"}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:`ui-button is-compact ${c?"is-primary":"is-muted"}`,onClick:()=>p(K=>!K),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[c?l.jsx(sd,{size:14}):l.jsx(ld,{size:14}),l.jsx("span",{children:c?"Subfolders":"This folder"})]})}),l.jsx("button",{type:"button",className:`ui-button is-compact ${a?"is-primary":"is-muted"}`,onClick:()=>S(K=>!K),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[a?l.jsx(od,{size:14}):l.jsx(id,{size:14}),l.jsx("span",{children:a?"Hidden on":"Hidden off"})]})}),le==="feed"?l.jsx("button",{type:"button",className:`ui-button is-compact ${k?"is-primary":"is-muted"}`,onClick:()=>I(K=>!K),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[k?l.jsx(ad,{size:14}):l.jsx(cd,{size:14}),l.jsx("span",{children:k?"Autoplay":"No autoplay"})]})}):null,l.jsx("button",{type:"button",className:"ui-button is-compact is-ghost",onClick:P,children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[l.jsx(ga,{size:14}),l.jsx("span",{children:"Refresh"})]})})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Page size"}),l.jsxs("select",{value:o,onChange:K=>w(parseInt(K.target.value,10)||30),className:"sheet-select ui-control ui-select","aria-label":"Items per page",children:[l.jsx("option",{value:15,children:"15"}),l.jsx("option",{value:30,children:"30"}),l.jsx("option",{value:60,children:"60"}),l.jsx("option",{value:120,children:"120"})]}),l.jsxs("div",{className:"sheet-hint",children:[U?l.jsx("span",{className:"loading-spinner","aria-hidden":"true"}):null,l.jsxs("span",{children:[J,"  Page ",r," of ",s]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>x(K=>Math.max(1,K-1)),disabled:r<=1||t,children:"Prev"}),l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>x(K=>K<s?K+1:K),disabled:r>=s||t,children:"Next"})]})]})]})})]})}const io="::";function bw(){return`alias-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`}function sn(e){return String(e||"").split(",").map(t=>t.trim()).filter(Boolean)}function Io(e){return(e||[]).map(t=>String(t||"").trim()).filter(Boolean).join(", ")}function Ew(e,t){const n=String(t||"").trim();if(!n)return String(e||"");const r=sn(e);return new Set(r.map(o=>o.toLowerCase())).has(n.toLowerCase())||r.push(n),Io(r)}function Lw(e,t){const n=String(t||"").trim().toLowerCase();if(!n)return String(e||"");const r=sn(e).filter(s=>s.toLowerCase()!==n);return Io(r)}function Pw(e,t,n){const r=String(t||"").trim().toLowerCase(),s=String(n||"").trim();if(!r||!s)return String(e||"");const o=sn(e).map(c=>c.toLowerCase()===r?s:c),i=new Set,a=[];return o.forEach(c=>{const d=String(c||"").trim().toLowerCase();!d||i.has(d)||(i.add(d),a.push(c))}),Io(a)}function hi(e,t={}){return Object.entries(ys(e)).map(([n,r],s)=>{const[o,i]=String(n).includes(io)?n.split(io):["",n],a=i||n,c=t[n]||t[a]||o||"";return{id:`existing-${s}-${n}`,name:a,text:r,category:c}})}function zd(e){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.name)||"").trim(),s=typeof(n==null?void 0:n.text)=="string"?n.text.trim():"";if(r&&s){const o=String((n==null?void 0:n.category)||"").trim(),i=o?`${o}${io}${r}`:r;t[i]=s}}),t}function Ad(e){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.name)||"").trim(),s=typeof(n==null?void 0:n.category)=="string"?n.category.trim():"";if(r){const o=s?`${s}${io}${r}`:r;t[o]=s}}),t}function _w(){var lt;const e=tn(),{aliases:t,aliasCategories:n,categoryList:r,loading:s,saving:o,error:i,persistAliases:a}=Im(),[c,d]=u.useState(()=>hi(t,n)),[h,g]=u.useState(()=>Array.isArray(r)?r:[]),[m,x]=u.useState("All"),[w,S]=u.useState("All"),[j,p]=u.useState(""),[f,y]=u.useState(""),[N,R]=u.useState(!1),[P,F]=u.useState(!1),[_,V]=u.useState({loading:!1,invalid:[],suggestions:{}}),[$,W]=u.useState(!1),[ue,se]=u.useState(null),[pe,q]=u.useState(""),le=u.useRef(null),ae=u.useRef(null),[k,I]=u.useState(!1),[E,L]=u.useState(""),[M,z]=u.useState(""),A=no("(min-width: 1024px)");u.useEffect(()=>{if(k)return;const v=hi(t,n||{});d(v),f&&!v.some(b=>b.id===f)&&(y(""),R(!1))},[n,k]),u.useEffect(()=>{k||Array.isArray(r)&&g(r)},[r,k]),u.useEffect(()=>{if(k)return;const v=hi(t,n||{});d(v),f&&!v.some(b=>b.id===f)&&(y(""),R(!1))},[t,n,f,k]);const Z=u.useMemo(()=>zd(c),[c]),H=()=>{const v={id:bw(),name:"",text:"",category:""};d(b=>[...b,v]),y(v.id),q(""),I(!0),R(!0)},D=(v,b,B)=>{I(!0),d(Q=>Q.map((ie,ee)=>ee===v?{...ie,[b]:B}:ie))},U=v=>{I(!0),d(b=>{var Q;const B=b.filter((ie,ee)=>ee!==v);return(B.length===0||f===((Q=b[v])==null?void 0:Q.id))&&(y(""),R(!1)),B})},te=async()=>{q("");try{const v=new Map;if(c.forEach(B=>{sn((B==null?void 0:B.text)||"").forEach(ie=>{const ee=String(ie).toLowerCase();ee&&(v.has(ee)||v.set(ee,{tag:ie,rows:[]}),v.get(ee).rows.push(B.id))})}),v.size){const B=Array.from(v.values()).map(Q=>Q.tag);try{const Q=await ci(B),ie=Array.isArray(Q==null?void 0:Q.invalid)?Q.invalid:[],ee=new Set(ie.map(Ne=>String(Ne).toLowerCase()));if(ee.size){const Ne=c.map(we=>{const Te=sn((we==null?void 0:we.text)||"").filter(Be=>ee.has(String(Be).toLowerCase()));if(!Te.length)return null;const mt=we.category?`${we.category}:${we.name}`:we.name;return{id:we.id,token:mt,friendlyName:Ll({name:we.name})||we.name||"Untitled",category:we.category||"",invalid:Te}}).filter(Boolean);se({invalid:ie,invalidLower:Array.from(ee),rows:Ne,suggestions:(Q==null?void 0:Q.suggestions)||{}}),W(!0),q("Fix invalid tags before saving.");return}}catch(Q){console.error("Unable to validate tags",Q),q("Unable to validate tags right now.");return}}const b=Ad(c);await a({items:Z,categories:b,categoryList:h}),I(!1),q("Saved.")}catch{q("Unable to save right now.")}},J=u.useMemo(()=>{const v=j.trim().toLowerCase(),B=[...c.filter(Q=>{const ie=(Q.category||"").trim();if(m===""&&ie||m!=="All"&&m!==""&&ie!==m)return!1;const ee=ls(Q.name||"",Q.category||"");if(w!=="All"&&ee!==w)return!1;if(!v)return!0;const Ne=ie?`${ie}:${Q.name}`:Q.name;return(Q.name||"").toLowerCase().includes(v)||(Q.text||"").toLowerCase().includes(v)||(ie||"").toLowerCase().includes(v)||(Ne||"").toLowerCase().includes(v)})];return B.sort((Q,ie)=>(Q.name||"").localeCompare(ie.name||"")),B},[c,m,w,j]),X=J.find(v=>v.id===f)||c.find(v=>v.id===f)||null,de=X?X.category?`${X.category}:${X.name}`:X.name||"alias":"",Le=X&&(Ll({name:X.name})||X.name)||"Alias",me=de?`$${de}$`:"$alias$",xe=J.length?J:c,K=X?xe.findIndex(v=>v.id===X.id):-1,ve=K>0?xe[K-1]:null,ke=K>=0&&K<xe.length-1?xe[K+1]:null,_e=v=>{v&&(y(v.id),R(!0),q(""))},Xe=u.useMemo(()=>{const v=new Set(h||[]);return c.forEach(b=>{b.category&&v.add(b.category)}),Array.from(v).sort((b,B)=>b.localeCompare(B))},[c,h]),Je=u.useMemo(()=>{const v=new Set;return c.forEach(b=>{const B=(b.category||"").trim();if(m===""&&B||m!=="All"&&m!==""&&B!==m)return;const Q=ls(b.name||"",b.category||"");Q&&v.add(Q)}),Array.from(v).sort((b,B)=>b.localeCompare(B))},[c,m]);u.useEffect(()=>{w!=="All"&&(Je.includes(w)||S("All"))},[Je,w]),u.useEffect(()=>{z("")},[f]);const be=u.useMemo(()=>sn((X==null?void 0:X.text)||""),[X==null?void 0:X.text]),re=u.useMemo(()=>{const v=Array.isArray(_==null?void 0:_.invalid)?_.invalid:[];return new Set(v.map(b=>String(b).toLowerCase()))},[_]);u.useEffect(()=>{if(!X||!(N||A))return;const v=be,b=[],B=new Set;if(v.forEach(ee=>{const Ne=String(ee).toLowerCase();!Ne||B.has(Ne)||(B.add(Ne),b.push(ee))}),!b.length){V({loading:!1,invalid:[],suggestions:{}});return}let Q=!1;const ie=window.setTimeout(async()=>{V(ee=>({...ee,loading:!0}));try{const ee=await ci(b);if(Q)return;V({loading:!1,invalid:Array.isArray(ee==null?void 0:ee.invalid)?ee.invalid:[],suggestions:(ee==null?void 0:ee.suggestions)||{}})}catch(ee){console.error("Failed to validate tags",ee),Q||V({loading:!1,invalid:[],suggestions:{}})}},260);return()=>{Q=!0,window.clearTimeout(ie)}},[N,A,X,be]);const O=v=>{var B,Q;const b=String(v||"");if(!b)return!1;try{return(Q=(B=navigator.clipboard)==null?void 0:B.writeText)==null||Q.call(B,b),!0}catch{return!1}},G=(v="")=>{const b=v?`?q=${encodeURIComponent(v)}`:"";e(`/tags${b}`)},ne=()=>{var Q;if(!X)return;const v=sn(M);if(!v.length){q("Enter a tag to add.");return}const b=c.findIndex(ie=>ie.id===X.id);if(b===-1)return;let B=((Q=c[b])==null?void 0:Q.text)||"";v.forEach(ie=>{B=Ew(B,ie)}),D(b,"text",B),z(""),q(`Added ${v.length} tag${v.length===1?"":"s"}.`)},fe=async()=>{const v=E.trim();if(!v){q("Enter a category name.");return}const b=Array.from(new Set([...h||[],v]));g(b),L(""),q("Category added.");const B=zd(c),Q=Ad(c);I(!0);try{await a({items:B,categories:Q,categoryList:b}),I(!1),q("Category saved.")}catch{q("Unable to save right now.")}},he=v=>{v&&(y(v.id),R(!0),q(""))},Ee=()=>{A&&y(""),R(!1),q("")};u.useMemo(()=>{const v=c.length,b=J.length;return s&&v===0?"Loading":v===b?`${v} aliases`:`${b} of ${v} aliases`},[c.length,J.length,s]),u.useEffect(()=>{const v=b=>{var we,ye;if(b.defaultPrevented)return;const B=b.target,Q=(B==null?void 0:B.tagName)||"",ie=["INPUT","TEXTAREA","SELECT"].includes(Q)||(B==null?void 0:B.isContentEditable),ee=String(b.key||"").toLowerCase(),Ne=b.metaKey||b.ctrlKey;if(Ne&&ee==="s"){b.preventDefault(),k&&!o&&te();return}if(Ne&&ee==="n"){b.preventDefault(),H();return}if(!ie&&ee==="/"){b.preventDefault(),(ye=(we=ae.current)==null?void 0:we.focus)==null||ye.call(we);return}ee==="escape"&&N&&!A&&(b.preventDefault(),Ee())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[H,Ee,k,N,te,A,o]);const Se=l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:Ee,children:A?"Clear selection":"Close"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:te,disabled:o||!k,children:o?"Saving":k?"Save":"Saved"})]}),tt=X?l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"alias-editor-toolbar",children:[l.jsxs("div",{className:"alias-editor-heading",children:[l.jsx("div",{className:"alias-editor-title",children:Le}),l.jsx("div",{className:"alias-editor-meta",children:me})]}),l.jsxs("div",{className:"alias-editor-actions",children:[l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>_e(ve),disabled:!ve,title:"Previous alias",children:"Prev"}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>_e(ke),disabled:!ke,title:"Next alias",children:"Next"}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>{de&&O(me)?q("Token copied."):q("Copy not available on this browser.")},title:"Copy token",children:"Copy token"})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Token"}),l.jsx("div",{className:"composer-token",children:me}),ls(X.name||"",X.category||"")?l.jsxs("div",{className:"sheet-hint",children:["Subcategory: ",$n(ls(X.name||"",X.category||""))]}):null]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Friendly name"}),l.jsx("div",{className:"composer-field",children:Le})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Alias name"}),l.jsx("input",{ref:le,type:"text",value:X.name||"",onChange:v=>{const b=c.findIndex(B=>B.id===X.id);b!==-1&&D(b,"name",v.target.value)},placeholder:"e.g. cherry_fruit",className:"sheet-input ui-control ui-input"})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Category"}),l.jsxs("select",{value:X.category||"",onChange:v=>{const b=c.findIndex(B=>B.id===X.id);b!==-1&&D(b,"category",v.target.value)},className:"sheet-select ui-control ui-select",children:[l.jsx("option",{value:"",children:"Uncategorized"}),Xe.map(v=>l.jsx("option",{value:v,children:v?ln(v):"Uncategorized"},v||"uncat"))]}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>F(!0),children:"Manage categories"})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Expands to"}),l.jsx("textarea",{value:X.text,onChange:v=>{const b=c.findIndex(B=>B.id===X.id);b!==-1&&D(b,"text",v.target.value)},placeholder:"Prompt text for this alias",className:"sheet-textarea ui-control ui-textarea is-compact",rows:6}),l.jsxs("div",{className:"tag-quick-add",children:[l.jsx("input",{type:"text",value:M,onChange:v=>z(v.target.value),onKeyDown:v=>{v.key==="Enter"&&(v.preventDefault(),ne())},placeholder:"Add tags (comma separated)",className:"ui-control ui-input tag-quick-input","aria-label":"Add tags"}),l.jsx("button",{type:"button",className:"ui-button is-compact is-primary",onClick:ne,disabled:!M.trim(),children:"Add"})]}),l.jsxs("div",{className:"tag-editor-actions",children:[l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>G(""),children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(lr,{size:14}),"Open tag library"]})}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>{V(b=>({...b,loading:!0}));const v=sn(X.text||"");ci(v).then(b=>{V({loading:!1,invalid:Array.isArray(b==null?void 0:b.invalid)?b.invalid:[],suggestions:(b==null?void 0:b.suggestions)||{}})}).catch(()=>V({loading:!1,invalid:[],suggestions:{}}))},disabled:_.loading,title:"Validate against danbooru_tags.md",children:_.loading?"Validating":"Validate"})]}),be.length?l.jsx("div",{className:"tag-chip-list","aria-label":"Alias tags",children:be.map(v=>{const b=re.has(String(v).toLowerCase());return l.jsxs("span",{className:`tag-chip ${b?"is-invalid":""}`,children:[l.jsx("code",{className:"tag-chip-code",children:v}),l.jsx("button",{type:"button",className:"tag-chip-remove",onClick:()=>{const B=c.findIndex(Q=>Q.id===X.id);B!==-1&&D(B,"text",Lw(X.text||"",v))},"aria-label":`Remove ${v}`,title:"Remove",children:""})]},v)})}):l.jsx("div",{className:"sheet-hint",children:"Tip: Use the Tag library to add validated tags quickly."}),!_.loading&&Array.isArray(_.invalid)&&_.invalid.length?l.jsxs("div",{className:"tag-invalid-panel",role:"alert",children:[l.jsxs("div",{className:"tag-invalid-title",children:["Invalid tags (",_.invalid.length,")"]}),l.jsx("div",{className:"tag-invalid-body",children:_.invalid.map(v=>{var B;const b=((B=_==null?void 0:_.suggestions)==null?void 0:B[v])||[];return l.jsxs("div",{className:"tag-invalid-row",children:[l.jsxs("div",{className:"tag-invalid-tag",children:[l.jsx("code",{children:v}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>G(v),children:"Find"})]}),Array.isArray(b)&&b.length?l.jsx("div",{className:"tag-invalid-suggestions",children:b.slice(0,6).map(Q=>l.jsx("button",{type:"button",className:"tag-suggestion",onClick:()=>{const ie=c.findIndex(ee=>ee.id===X.id);ie!==-1&&D(ie,"text",Pw(X.text||"",v,Q))},title:`Replace ${v} with ${Q}`,children:Q},`${v}-${Q}`))}):l.jsx("div",{className:"sheet-hint",children:"No suggestions found for this tag."})]},v)})})]}):null]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("button",{type:"button",className:"ui-button is-danger",onClick:()=>{const v=c.findIndex(b=>b.id===X.id);v!==-1&&(U(v),R(!1))},children:"Delete alias"}),l.jsx("div",{className:"sheet-hint",children:"Deleting removes it from your library. Use Save changes to persist."})]})]}):l.jsx("div",{className:"alias-editor-empty",children:"Select an alias to edit, or create a new one."});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"page-shell page-stack alias-page",children:[l.jsxs("div",{className:"page-bar",children:[l.jsx("h1",{className:"page-bar-title",children:"Aliases"}),l.jsxs("div",{className:"page-bar-actions",children:[l.jsx("button",{type:"button",className:"page-bar-btn",onClick:()=>openTagLibrary({query:j||"",targetId:""}),title:"Browse danbooru tags",children:"Tags"}),l.jsx("button",{type:"button",className:"page-bar-btn is-primary",onClick:H,children:"Add"})]})]}),l.jsx("div",{className:"library-toolbar screen-sticky",children:l.jsxs("div",{className:"library-toolbar-inner",children:[l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:ae,type:"search",value:j,onChange:v=>p(v.target.value),className:"composer-search ui-control ui-input",placeholder:"Search aliases","aria-label":"Search aliases"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>p(""),disabled:!j,children:"Clear"})]}),l.jsxs("select",{className:"composer-subcategory-select ui-control ui-select is-compact",value:m,onChange:v=>x(v.target.value),"aria-label":"Filter by category",children:[l.jsx("option",{value:"All",children:"Category: All"}),l.jsx("option",{value:"",children:"Uncategorized"}),Xe.map(v=>l.jsx("option",{value:v,children:v?ln(v):"Uncategorized"},v||"uncat"))]}),l.jsxs("select",{className:"composer-subcategory-select ui-control ui-select is-compact",value:w,onChange:v=>S(v.target.value),"aria-label":"Filter by subcategory",children:[l.jsx("option",{value:"All",children:"Subcategory: All"}),Je.map(v=>l.jsx("option",{value:v,children:$n(v)},v))]}),k?l.jsx("button",{type:"button",className:"ui-button is-compact is-primary",onClick:te,disabled:o,children:o?"Saving":"Save changes"}):null]}),i?l.jsx("div",{className:"library-toolbar-status is-error",children:"Could not load aliases. Try again later."}):null,pe?l.jsx("div",{className:"library-toolbar-status",children:pe}):null]})}),l.jsxs("div",{className:"alias-layout",children:[l.jsx("div",{className:"alias-list",children:c.length===0&&!s?l.jsx("section",{className:"ui-panel text-center py-16",children:l.jsx("p",{className:"text-base text-[rgba(159,178,215,0.8)]",children:"No aliases yet. Add your first one."})}):l.jsxs("div",{className:"composer-alias-list",role:"list",children:[J.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases match your filters."}):null,J.map(v=>{const b=(v.category||"").trim(),B=b?`${b}:${v.name}`:v.name,Q=(v.text||"").slice(0,140)+((v.text||"").length>140?"":"");return l.jsxs("button",{type:"button",role:"listitem",className:`composer-alias-item ${f===v.id?"is-selected":""}`,onClick:()=>he(v),children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:Ll({name:v.name})||v.name||"Untitled"}),b?l.jsx("span",{className:"composer-alias-category",children:ln(b)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",B||"alias","$"]}),l.jsx("div",{className:"composer-alias-text",children:Q||""})]},v.id)})]})}),l.jsx("aside",{className:"alias-editor-panel",children:l.jsxs("div",{className:"alias-editor-card ui-panel",children:[tt,X?l.jsx("div",{className:"alias-editor-footer",children:Se}):null]})})]})]}),l.jsx(kt,{open:N&&!!X&&!A,onClose:Ee,title:"Alias",variant:"fullscreen",footer:Se,children:tt}),l.jsx(kt,{open:P,onClose:()=>{F(!1),L(""),q("")},title:"Categories",variant:"sheet",footer:l.jsx("div",{className:"sheet-hint",children:"Categories help you organize aliases and improve the Insert alias picker."}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Add category"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:E,onChange:v=>L(v.target.value),placeholder:"e.g. styles",className:"sheet-input ui-control ui-input"}),l.jsx("button",{type:"button",className:"ui-button is-primary is-compact",onClick:fe,children:"Add"})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Existing"}),Xe.length===0?l.jsx("div",{className:"sheet-hint",children:"No categories yet."}):l.jsxs("select",{className:"sheet-select ui-control ui-select",defaultValue:"",onChange:v=>{const b=v.target.value;b&&(x(b),F(!1))},children:[l.jsx("option",{value:"",children:"Select a category"}),Xe.map(v=>l.jsx("option",{value:v,children:ln(v)},v))]})]})]})}),l.jsx(kt,{open:$,onClose:()=>W(!1),title:"Fix invalid tags",variant:"fullscreen",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>W(!1),children:"Close"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>{const v=new Set(((ue==null?void 0:ue.invalidLower)||[]).map(b=>String(b).toLowerCase()));if(!v.size){W(!1);return}d(b=>b.map(B=>{const ie=sn((B==null?void 0:B.text)||"").filter(Ne=>!v.has(String(Ne).toLowerCase())),ee=Io(ie);return ee===((B==null?void 0:B.text)||"")?B:{...B,text:ee}})),I(!0),W(!1),q("Removed invalid tags. Review and save again.")},children:"Remove invalid tags"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsx("div",{className:"sheet-section",children:l.jsxs("div",{className:"sheet-hint",children:["These aliases contain tags not found in ",l.jsx("code",{className:"font-mono",children:"danbooru_tags.md"}),". Fix them before saving."]})}),(lt=ue==null?void 0:ue.rows)!=null&&lt.length?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Aliases with issues"}),l.jsx("div",{className:"composer-alias-list",role:"list",children:ue.rows.map(v=>l.jsxs("button",{type:"button",role:"listitem",className:"composer-alias-item",onClick:()=>{y(v.id),R(!0),W(!1)},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:v.friendlyName}),v.category?l.jsx("span",{className:"composer-alias-category",children:ln(v.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",v.token,"$"]}),l.jsx("div",{className:"tag-invalid-inline",children:v.invalid.map(b=>l.jsx("span",{className:"tag-chip is-invalid",children:l.jsx("code",{className:"tag-chip-code",children:b})},`${v.id}-${b}`))})]},v.id))})]}):null]})})]})}function Rw(e){var n,r;const t=String(e||"");if(!t)return!1;try{return(r=(n=navigator.clipboard)==null?void 0:n.writeText)==null||r.call(n,t),!0}catch{return!1}}function Iw({open:e,onClose:t,onSelectTag:n,initialQuery:r="",title:s="Tag library",contextTitle:o="",contextToken:i="",contextText:a="",contextTagCount:c=null,inline:d=!1}){const[h,g]=u.useState(r||""),[m,x]=u.useState(""),[w,S]=u.useState("count"),[j,p]=u.useState([]),[f,y]=u.useState([]),[N,R]=u.useState(0),[P,F]=u.useState(0),[_,V]=u.useState(!1),[$,W]=u.useState(!1),[ue,se]=u.useState(""),[pe,q]=u.useState(""),[le,ae]=u.useState([]),[k,I]=u.useState(!1),[E,L]=u.useState(null),[M,z]=u.useState(null),A=u.useRef(null),Z=u.useRef(null),H=u.useRef(null),D=u.useRef(null),U=u.useRef(null),te=f.length<N,J=d||e,X=u.useMemo(()=>le.join(", "),[le]),de=u.useMemo(()=>new Set(le.map(O=>O.toLowerCase())),[le]),Le=u.useCallback(O=>{const G=String(O||"").trim();G&&ae(ne=>new Set(ne.map(he=>he.toLowerCase())).has(G.toLowerCase())?ne:[...ne,G])},[]),me=u.useCallback(O=>{const G=String(O||"").trim().toLowerCase();G&&ae(ne=>ne.filter(fe=>fe.toLowerCase()!==G))},[]),xe=u.useCallback(()=>{ae([]),q("Cleared collected tags.")},[]),K=u.useCallback(()=>{var G,ne;if(!le.length){q("No tags to copy.");return}if(Rw(X)){q(`Copied ${le.length} tag${le.length===1?"":"s"}.`);return}const O=H.current;if(O)try{O.value=X,O.removeAttribute("readonly"),O.select(),O.setSelectionRange(0,X.length);const fe=document.execCommand&&document.execCommand("copy");if(O.setAttribute("readonly","readonly"),(ne=(G=window.getSelection())==null?void 0:G.removeAllRanges)==null||ne.call(G),fe){q(`Copied ${le.length} tag${le.length===1?"":"s"}.`);return}}catch{}q("Copy not available on this browser.")},[le,X]),ve=u.useCallback((O,G)=>{ae(ne=>{const fe=[...ne],[he]=fe.splice(O,1);return fe.splice(G,0,he),fe})},[]);u.useCallback((O,G)=>{L(G),D.current=O.target,O.dataTransfer.effectAllowed="move",O.dataTransfer.setData("text/plain",G.toString()),requestAnimationFrame(()=>{D.current&&D.current.classList.add("is-dragging")})},[]),u.useCallback(()=>{D.current&&D.current.classList.remove("is-dragging"),E!==null&&M!==null&&E!==M&&ve(E,M),L(null),z(null),D.current=null},[E,M,ve]),u.useCallback((O,G)=>{O.preventDefault(),O.dataTransfer.dropEffect="move",z(G)},[]),u.useCallback(()=>{},[]),u.useCallback((O,G)=>{const ne=O.touches[0];U.current={idx:G,startX:ne.clientX,startY:ne.clientY,moved:!1}},[]),u.useCallback(O=>{if(!U.current)return;const G=O.touches[0],ne=Math.abs(G.clientX-U.current.startX),fe=Math.abs(G.clientY-U.current.startY);if(ne>10||fe>10){U.current.moved=!0,L(U.current.idx),O.preventDefault();const he=document.querySelectorAll(".collected-tag-chip"),Ee=G.clientX,Se=G.clientY;for(let tt=0;tt<he.length;tt++){const lt=he[tt].getBoundingClientRect();if(Ee>=lt.left&&Ee<=lt.right&&Se>=lt.top&&Se<=lt.bottom){z(tt);break}}}},[]),u.useCallback(()=>{var O;(O=U.current)!=null&&O.moved&&E!==null&&M!==null&&E!==M&&ve(E,M),U.current=null,L(null),z(null)},[E,M,ve]);const ke=u.useCallback(async({nextQuery:O,nextCategory:G,nextSort:ne}={})=>{const fe=typeof O=="string"?O:h,he=typeof G=="string"?G:m,Ee=typeof ne=="string"?ne:w;V(!0),se(""),q(""),F(0);try{const Se=await to({q:fe,category:he,sort:Ee,limit:80,offset:0});y((Se==null?void 0:Se.items)||[]),R(Number((Se==null?void 0:Se.total)||0))}catch(Se){console.error("Failed to search tags",Se),se("Unable to load tags right now."),y([]),R(0)}finally{V(!1)}},[m,h,w]),_e=u.useCallback(async()=>{if(_||$||!te)return;const O=P+80;W(!0),se("");try{const G=await to({q:h,category:m,sort:w,limit:80,offset:O}),ne=(G==null?void 0:G.items)||[];y(fe=>[...fe,...ne]),R(Number((G==null?void 0:G.total)||0)),F(O)}catch(G){console.error("Failed to load more tags",G),se("Unable to load more tags.")}finally{W(!1)}},[te,m,_,$,P,h,w]);u.useEffect(()=>{if(!J)return;se(""),q("");let O=!1;return(async()=>{try{const G=await dm();if(O)return;p(Array.isArray(G==null?void 0:G.categories)?G.categories:[])}catch(G){console.error("Failed to load tag categories",G),O||p([])}})(),()=>{O=!0}},[J]),u.useEffect(()=>{J&&(g(r||""),x(""),S("count"),y([]),R(0),F(0),V(!1),W(!1),se(""),q(""),ae([]))},[r,J]),u.useEffect(()=>{if(!J)return;const O=window.setTimeout(()=>{ke()},220);return()=>window.clearTimeout(O)},[m,J,h,ke,w]),u.useEffect(()=>{if(!J)return;const O=A.current;if(!O||typeof IntersectionObserver>"u")return;const G=new IntersectionObserver(ne=>{const fe=ne[0];fe!=null&&fe.isIntersecting&&_e()},{threshold:.1});return G.observe(O),()=>G.disconnect()},[J,_e]);const Xe=u.useMemo(()=>d?null:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:t,children:"Done"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:()=>ke(),disabled:_||$,children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(ga,{size:14}),"Refresh"]})})]}),[d,_,$,t,ke]),Je=!!(n&&(o||i||a)),be=Number.isFinite(c)?`${c} tags`:"",re=l.jsxs("div",{className:`sheet-stack ${d?"tag-library-page":""}`,children:[Je?l.jsxs("div",{className:"tag-library-context",children:[l.jsxs("div",{className:"tag-library-context-head",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"sheet-label",children:"Adding to alias"}),l.jsx("div",{className:"tag-library-context-title",children:o||"Alias"}),i?l.jsx("div",{className:"tag-library-context-token",children:i}):null]}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:t,children:"Back"})]}),l.jsx("div",{className:"tag-library-context-preview",children:a||""}),be?l.jsx("div",{className:"tag-library-context-meta",children:be}):null]}):null,l.jsxs("div",{className:"sheet-section",children:[d?null:l.jsx("div",{className:"sheet-label",children:"Browse"}),l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:Z,type:"search",value:h,onChange:O=>g(O.target.value),placeholder:"Search tags (e.g. smile, city, sword)",className:"composer-search ui-control ui-input","aria-label":"Search tags"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>g(""),disabled:!h,children:"Clear"})]}),l.jsxs("select",{value:m,onChange:O=>x(O.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Filter by category",children:[l.jsx("option",{value:"",children:"Category: All"}),j.map(O=>l.jsxs("option",{value:O.key,children:[$n(O.key)," (",Number(O.actual||O.count||0).toLocaleString(),")"]},O.key))]}),l.jsxs("select",{value:w,onChange:O=>S(O.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Sort tags",children:[l.jsx("option",{value:"count",children:"Sort: Popular"}),l.jsx("option",{value:"alpha",children:"Sort: AZ"})]})]}),pe?l.jsx("div",{className:"text-xs text-[#9DA3FFCC]",children:pe}):null,ue?l.jsx("div",{className:"text-xs text-[#FF8F70]",children:ue}):null]}),l.jsx("div",{className:"composer-alias-list tag-library-grid",role:"list",children:_?l.jsx("div",{className:"composer-alias-empty",children:"Loading tags"}):f.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No tags found."}):l.jsxs(l.Fragment,{children:[f.map(O=>l.jsx("div",{className:"tag-library-row",role:"listitem",children:l.jsxs("button",{type:"button",className:`composer-alias-item tag-library-item ${!n&&de.has(String(O.tag||"").toLowerCase())?"is-collected":""}`,onClick:()=>{if(n){n(String(O.tag||"")),q(`Added: ${O.tag}`);return}const G=String(O.tag||"");de.has(G.toLowerCase())?(me(G),q(`Removed: ${O.tag}`)):(Le(G),q(`Added: ${O.tag}`))},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name tag-library-name",children:l.jsx("code",{className:"tag-library-code",children:O.tag})}),O.category?l.jsx("span",{className:"composer-alias-category",children:$n(O.category)}):null]}),l.jsx("div",{className:"composer-alias-token",children:Number(O.count||0).toLocaleString()})]})},`${O.tag}-${O.category}`)),l.jsx("div",{ref:A,className:"composer-sentinel"}),$?l.jsx("div",{className:"composer-alias-empty",children:"Loading more"}):null]})})]});return J?d?l.jsxs("section",{className:"tag-library-surface",children:[s?l.jsx("div",{className:"sheet-label tag-library-page-title",children:s}):null,re,n?null:l.jsxs("div",{className:"tag-collection-bar","aria-live":"polite",children:[l.jsxs("div",{className:"tag-collection-bar-main",children:[l.jsx("div",{className:"tag-collection-bar-title",children:"Tags"}),l.jsx("div",{className:"tag-collection-bar-count","aria-live":"polite",children:le.length===0?"No tags selected":`${le.length} selected`})]}),l.jsx("button",{type:"button",className:"tag-collection-menu-btn",onClick:()=>I(!0),"aria-label":"Manage collected tags",children:""}),l.jsx("textarea",{ref:H,value:X,onChange:O=>{const G=O.target.value.split(",").map(he=>he.trim()).filter(Boolean),ne=new Set,fe=[];G.forEach(he=>{const Ee=he.toLowerCase();ne.has(Ee)||(ne.add(Ee),fe.push(he))}),ae(fe)},className:"sr-only","aria-label":"Collected tags text"})]}),n?null:l.jsx(kt,{open:k,onClose:()=>I(!1),title:"Collected tags",variant:"sheet",shouldCloseOnOverlayClick:!0,children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsxs("div",{className:"sheet-label",children:["Tags (",le.length,")"]}),l.jsxs("div",{className:"tag-collection-codeblock",children:[l.jsx("pre",{className:"tag-collection-pre",children:X||""}),l.jsx("button",{type:"button",className:"tag-collection-copy-btn",onClick:K,disabled:le.length===0,"aria-label":"Copy collected tags",children:""}),l.jsx("textarea",{ref:H,value:X,readOnly:!0,className:"sr-only","aria-label":"Collected tags text"})]}),le.length?l.jsx("div",{className:"tag-collection-chips",children:le.map((O,G)=>l.jsxs("span",{className:"collected-tag-chip",onClick:()=>me(O),children:[l.jsx("code",{className:"collected-tag-code",children:O}),l.jsx("button",{type:"button",className:"collected-tag-remove","aria-label":`Remove ${O}`,onClick:ne=>{ne.stopPropagation(),me(O)},children:""})]},`${O}-${G}`))}):l.jsx("div",{className:"sheet-hint",children:"No tags collected yet."})]}),l.jsxs("div",{className:"sheet-section flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>I(!1),children:"Close"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:xe,disabled:le.length===0,children:"Clear"})]})]})})]}):l.jsx(kt,{open:e,onClose:t,title:s,variant:"fullscreen",contentClassName:"tag-library-sheet",footer:Xe,shouldCloseOnOverlayClick:!1,children:re}):null}function Tw(){const e=tn(),[t]=om(),n=t.get("q")||"",r=u.useMemo(()=>n?`Tag Library  ${n}`:"Tag Library",[n]);return l.jsxs("div",{className:"page-shell page-stack",children:[l.jsxs("div",{className:"page-bar",children:[l.jsx("h1",{className:"page-bar-title",children:r}),l.jsxs("div",{className:"page-bar-actions",children:[l.jsx("button",{type:"button",className:"page-bar-btn",onClick:()=>e("/aliases"),children:"Aliases"}),l.jsx("button",{type:"button",className:"page-bar-btn",onClick:()=>e("/compose"),children:"Composer"})]})]}),l.jsx(Iw,{inline:!0,initialQuery:n,title:"Browse",onSelectTag:null})]})}function zw({open:e=!1,onClose:t,value:n="",onChange:r,aliasOptions:s=[],aliasCatalog:o=[],fieldLabel:i="Prompt",variant:a="sheet"}){var Mc,Oc,Fc;const c=u.useRef(null),d=u.useRef(null),h=u.useRef(null),g=u.useRef(null),[m,x]=u.useState(n),[w,S]=u.useState(""),[j,p]=u.useState("All"),[f,y]=u.useState("All"),[N,R]=u.useState(30),[P,F]=u.useState("compose"),[_,V]=u.useState(null),[$,W]=u.useState(null),[ue,se]=u.useState(null),pe=u.useRef(null),q=u.useRef(null),[le,ae]=u.useState(!1),[k,I]=u.useState(null),E=u.useRef(null),L=u.useRef(null),[M,z]=u.useState(""),[A,Z]=u.useState(""),[H,D]=u.useState("count"),[U,te]=u.useState([]),[J,X]=u.useState([]),[de,Le]=u.useState(0),[me,xe]=u.useState(0),[K,ve]=u.useState(!1),[ke,_e]=u.useState(!1),[Xe,Je]=u.useState(""),[be,re]=u.useState([]),[O,G]=u.useState(""),[ne,fe]=u.useState([]),[he,Ee]=u.useState("");u.useEffect(()=>{e&&(x(n),F("compose"),S(""),p("All"),y("All"),R(30),V(null),W(null),se(null),ae(!1),I(null),wt(""),z(""),Z(""),D("count"),X([]),Le(0),xe(0),ve(!1),_e(!1),Je(""))},[e,n]),u.useEffect(()=>{if(_===null||typeof document>"u")return;const C=document.querySelector("main.app-content"),T={htmlOverscroll:document.documentElement.style.overscrollBehavior,bodyOverscroll:document.body.style.overscrollBehavior,bodyOverflow:document.body.style.overflow,scrollOverflow:C==null?void 0:C.style.overflow,scrollTouch:C==null?void 0:C.style.touchAction,scrollOverscroll:C==null?void 0:C.style.overscrollBehavior};return document.documentElement.style.overscrollBehavior="none",document.body.style.overscrollBehavior="none",document.body.style.overflow="hidden",C&&(C.style.overflow="hidden",C.style.touchAction="none",C.style.overscrollBehavior="none"),()=>{document.documentElement.style.overscrollBehavior=T.htmlOverscroll||"",document.body.style.overscrollBehavior=T.bodyOverscroll||"",document.body.style.overflow=T.bodyOverflow||"",C&&(C.style.overflow=T.scrollOverflow||"",C.style.touchAction=T.scrollTouch||"",C.style.overscrollBehavior=T.scrollOverscroll||"")}},[_]);const Se=u.useMemo(()=>(Array.isArray(o)?o.filter(C=>C&&C.name):[]).map(C=>({...C,...Pc(C)})),[o]),tt=u.useMemo(()=>{const C=new Map;return Se.forEach(T=>{T!=null&&T.token&&C.set(String(T.token).toLowerCase(),T)}),C},[Se]),lt=u.useMemo(()=>{const C=new Set(["All"]);return Se.forEach(T=>{T.category&&C.add(T.category)}),Array.from(C).sort((T,ce)=>T.localeCompare(ce))},[Se]),v=u.useMemo(()=>{const C=new Set(["All"]);return Se.forEach(T=>{(!j||j==="All"||T.category===j)&&T.subcategory&&C.add(T.subcategory)}),Array.from(C).sort((T,ce)=>T.localeCompare(ce))},[Se,j]),b=u.useMemo(()=>["All",...lt.filter(C=>C!=="All")],[lt]),B=u.useMemo(()=>["All",...v.filter(C=>C!=="All")],[v]),Q=u.useMemo(()=>{const C=w.trim().toLowerCase();return Se.filter(T=>{var ce,ge,Ge,Re;return j!=="All"&&(T.category||"")!==j||f!=="All"&&(T.subcategory||"other")!==f?!1:C?((ce=T.token)==null?void 0:ce.toLowerCase().includes(C))||((ge=T.text)==null?void 0:ge.toLowerCase().includes(C))||((Ge=T.name)==null?void 0:Ge.toLowerCase().includes(C))||((Re=T.displayName)==null?void 0:Re.toLowerCase().includes(C)):!0}).sort((T,ce)=>{const ge=(T.subcategory||"").toLowerCase(),Ge=(ce.subcategory||"").toLowerCase();return ge!==Ge?ge.localeCompare(Ge):T.token.localeCompare(ce.token)})},[Se,j,f,w]),ie=u.useMemo(()=>Q.slice(0,N),[Q,N]);u.useEffect(()=>{R(30)},[j,f,w,Se]),u.useEffect(()=>{y("All")},[j]),u.useEffect(()=>{const C=h.current;if(!C)return;const T=new IntersectionObserver(ce=>{ce[0].isIntersecting&&N<Q.length&&R(Ge=>Math.min(Ge+20,Q.length))},{threshold:.1});return T.observe(C),()=>T.disconnect()},[N,Q.length]);const ee=u.useMemo(()=>typeof m!="string"?[]:px(m),[m]);u.useEffect(()=>{if(!e||P!=="tags"||U.length>0)return;let C=!1;return(async()=>{try{const T=await dm();if(C)return;te(Array.isArray(T==null?void 0:T.categories)?T.categories:[])}catch(T){console.error("Failed to load tag categories",T),C||te([])}})(),()=>{C=!0}},[e,P,U.length]);const Ne=u.useCallback(async({nextQuery:C,nextCategory:T,nextSort:ce}={})=>{const ge=typeof C=="string"?C:M,Ge=typeof T=="string"?T:A,Re=typeof ce=="string"?ce:H;ve(!0),Je(""),xe(0);try{const Ke=await to({q:ge,category:Ge,sort:Re,limit:80,offset:0});X((Ke==null?void 0:Ke.items)||[]),Le(Number((Ke==null?void 0:Ke.total)||0))}catch(Ke){console.error("Failed to search tags",Ke),Je("Unable to load tags right now."),X([]),Le(0)}finally{ve(!1)}},[A,M,H]),we=u.useCallback(async()=>{if(K||ke||J.length>=de)return;const C=me+80;_e(!0),Je("");try{const T=await to({q:M,category:A,sort:H,limit:80,offset:C}),ce=(T==null?void 0:T.items)||[];X(ge=>[...ge,...ce]),Le(Number((T==null?void 0:T.total)||0)),xe(C)}catch(T){console.error("Failed to load more tags",T),Je("Unable to load more tags.")}finally{_e(!1)}},[A,K,ke,me,M,H,J.length,de]);u.useEffect(()=>{if(!e||P!=="tags")return;const C=window.setTimeout(()=>{Ne()},220);return()=>window.clearTimeout(C)},[e,P,M,A,H,Ne]),u.useEffect(()=>{if(!e||P!=="tags")return;const C=L.current;if(!C||typeof IntersectionObserver>"u")return;const T=new IntersectionObserver(ce=>{const ge=ce[0];ge!=null&&ge.isIntersecting&&we()},{threshold:.1});return T.observe(C),()=>T.disconnect()},[e,P,we]);const ye=de?`${J.length.toLocaleString()} / ${de.toLocaleString()}`:`${J.length.toLocaleString()}`,Te=u.useCallback(C=>{x(T=>{const ge=typeof C=="function"?C(typeof T=="string"?T:""):String(C||"");return a==="page"&&(r==null||r(ge)),ge})},[r,a]),mt=u.useCallback(C=>{const T=String(C||"").trim();if(T&&(Te(ce=>{const ge=ce.length,Ge=ce.length,Re=ce.slice(0,ge),Ke=ce.slice(Ge),Me=Re.match(/[^\s]$/),Vn=Ke.match(/^[^\s]/),Qm=Me&&Me[0]!==","?", ":"",Ym=Vn&&Vn[0]!==","?", ":"";return Re+Qm+T+Ym+Ke}),c.current))try{c.current.blur()}catch{}},[Te]),[Be,wt]=u.useState(""),Ht=u.useCallback(()=>{const C=String(Be||"").trim();if(!C)return;const ce=C.split(",").map(ge=>ge.trim()).filter(Boolean).join(", ");ce&&(mt(ce),wt(""),F("compose"))},[Be,mt]),Wn=u.useCallback(()=>{re([]),G("Cleared collected tags.")},[]),To=u.useCallback(C=>{const T=String(C||"").trim().toLowerCase();T&&re(ce=>ce.filter(ge=>ge.toLowerCase()!==T))},[]),Hs=u.useCallback(()=>{if(!be.length){G("No tags to apply.");return}mt(be.join(", ")),G(`Applied ${be.length} tag${be.length===1?"":"s"}.`),re([]),F("compose")},[be,mt]),Gs=u.useCallback(C=>{const T=String(C||"").trim();T&&re(ce=>{const ge=T.toLowerCase();return ce.some(Re=>Re.toLowerCase()===ge)?(G(`Removed: ${T}`),ce.filter(Re=>Re.toLowerCase()!==ge)):(G(`Selected: ${T}`),[...ce,T])})},[]),Ks=u.useCallback(C=>{const T=String(C||"").trim();T&&fe(ce=>{const ge=T.toLowerCase();return ce.some(Re=>Re.toLowerCase()===ge)?(Ee(`Removed: ${T}`),ce.filter(Re=>Re.toLowerCase()!==ge)):(Ee(`Selected: ${T}`),[...ce,T])})},[]),Qs=u.useCallback(()=>{fe([]),Ee("Cleared selected aliases.")},[]),Am=u.useCallback(C=>{const T=String(C||"").trim().toLowerCase();T&&fe(ce=>ce.filter(ge=>ge.toLowerCase()!==T))},[]),$m=u.useCallback(()=>{if(!ne.length){Ee("No aliases to apply.");return}const C=ne.map(T=>`$${T}$`).join(", ");mt(C),Ee(`Applied ${ne.length} alias${ne.length===1?"":"es"}.`),fe([]),F("compose")},[ne,mt]),Ic=C=>{Te(T=>mx(T||"",C))},Tc=u.useCallback((C,T)=>{if(!(ee!=null&&ee.length))return;const ce=C+T;ce<0||ce>=ee.length||(Te(ge=>md(ge||"",ee,C,ce)),se(ce))},[ee,Te]),Mm=C=>{if(!C)return;let T=C.text;if(C.type==="alias"){const ge=tt.get(C.text.toLowerCase());T=(ge==null?void 0:ge.displayName)||C.text}const ce=fd(m||"",C);I({element:C,displayName:T,weight:(ce==null?void 0:ce.weight)??1}),ae(!0)},Ys=u.useCallback((C,T)=>{C===T||C===null||T===null||ee!=null&&ee.length&&Te(ce=>md(ce||"",ee,C,T))},[ee,Te]),Om=u.useCallback((C,T)=>{V(T),pe.current=C.target,C.dataTransfer.effectAllowed="move",C.dataTransfer.setData("text/plain",T.toString()),requestAnimationFrame(()=>{pe.current&&pe.current.classList.add("is-dragging")})},[]),Fm=u.useCallback(()=>{pe.current&&pe.current.classList.remove("is-dragging"),_!==null&&$!==null&&_!==$&&Ys(_,$),V(null),W(null),pe.current=null},[_,$,Ys]),Dm=u.useCallback((C,T)=>{C.preventDefault(),C.dataTransfer.dropEffect="move",T!==$&&W(T)},[$]),Um=u.useCallback(()=>{},[]),Bm=u.useCallback((C,T)=>{var Re,Ke;if(!((Ke=(Re=C.target)==null?void 0:Re.closest)==null?void 0:Ke.call(Re,".composer-token-drag-handle")))return;const ge=C.touches[0],Ge=window.setTimeout(()=>{q.current&&(q.current.active=!0,V(T),W(T))},240);q.current={idx:T,startX:ge.clientX,startY:ge.clientY,active:!1,timer:Ge}},[]),Wm=u.useCallback(C=>{if(!q.current)return;const T=C.touches[0],ce=Math.abs(T.clientX-q.current.startX),ge=Math.abs(T.clientY-q.current.startY);if(!q.current.active){(ce>8||ge>8)&&(window.clearTimeout(q.current.timer),q.current=null);return}C.preventDefault();const Ge=document.querySelectorAll(".composer-token-draggable"),Re=T.clientX,Ke=T.clientY;for(let Me=0;Me<Ge.length;Me++){const Vn=Ge[Me].getBoundingClientRect();if(Re>=Vn.left&&Re<=Vn.right&&Ke>=Vn.top&&Ke<=Vn.bottom){W(Me);break}}},[]),Vm=u.useCallback(()=>{var C,T;(C=q.current)!=null&&C.timer&&window.clearTimeout(q.current.timer),(T=q.current)!=null&&T.active&&_!==null&&$!==null&&_!==$&&Ys(_,$),q.current=null,V(null),W(null)},[_,$,Ys]),Hm=u.useCallback(()=>{var C;(C=q.current)!=null&&C.timer&&window.clearTimeout(q.current.timer),q.current=null,V(null),W(null)},[]),Gm=()=>{r==null||r(m),t==null||t()},zc=()=>{t==null||t()},zo=a==="page";if(!(zo||e))return null;const Ac=l.jsxs("div",{className:`composer-shell ${zo?"is-page":""}`,children:[l.jsx(Rr,{ariaLabel:"Composer tabs",value:P,onChange:F,items:[{key:"compose",label:"Compose",icon:l.jsx(Cc,{size:14})},{key:"aliases",label:"Aliases",icon:l.jsx(Po,{size:14})},{key:"tags",label:"Tags",icon:l.jsx(lr,{size:14})}]}),l.jsxs("div",{className:`composer-panel composer-panel-compose ${P==="compose"?"is-visible":""}`,children:[l.jsx("div",{className:"composer-editor",children:l.jsxs("div",{className:"composer-input-row",children:[l.jsx("input",{ref:c,type:"text",value:Be,onChange:C=>wt(C.target.value),onKeyDown:C=>{C.key==="Enter"&&(C.preventDefault(),Ht())},className:"composer-input ui-control ui-input is-compact",placeholder:"Add prompt text"}),l.jsx("button",{type:"button",className:"composer-add-btn",onClick:Ht,disabled:!Be.trim(),"aria-label":"Add prompt text",children:"+"})]})}),l.jsxs("div",{className:"composer-tokens",children:[l.jsxs("div",{className:"composer-tokens-header",children:[l.jsxs("span",{className:"composer-tokens-label",children:["Elements",l.jsx("span",{className:"composer-tokens-count",children:ee.length})]}),l.jsx("span",{className:"composer-tokens-hint",children:"Drag to reorder  Tap to adjust"})]}),ee.length?l.jsx("div",{ref:g,className:`composer-tokens-list ${_!==null?"is-dragging":""}`,children:ee.map((C,T)=>{let ce=C.text;if(C.type==="alias"){const Me=tt.get(C.text.toLowerCase());ce=(Me==null?void 0:Me.displayName)||C.text}const ge=_===T,Ge=$===T&&_!==null&&_!==T,Re=fd(m||"",C),Ke=(Re==null?void 0:Re.weight)??1;return l.jsxs("span",{className:`composer-token composer-token-draggable ${C.type==="alias"?"is-alias":"is-tag"} ${ge?"is-dragging":""} ${Ge?"is-drop-target":""} ${ue===T?"is-selected":""}`,title:C.type==="alias"?`Alias: $${C.text}$`:`Tag: ${C.text}`,draggable:!0,onDragStart:Me=>Om(Me,T),onDragEnd:Fm,onDragOver:Me=>Dm(Me,T),onDragLeave:Um,onTouchStart:Me=>Bm(Me,T),onTouchMove:Wm,onTouchEnd:Vm,onTouchCancel:Hm,onClick:()=>{_===null&&(se(T),Mm(C))},children:[l.jsx("span",{className:"composer-token-order",children:T+1}),l.jsx("span",{className:"composer-token-drag-handle","aria-hidden":"true",children:l.jsx(ya,{size:10})}),l.jsx("span",{className:"composer-token-name",children:ce}),C.type==="alias"&&l.jsx("span",{className:"composer-token-type",children:"$"}),Math.abs(Ke-1)>1e-6&&l.jsxs("span",{className:"composer-token-weight",children:[cn(Ke),""]}),l.jsxs("div",{className:"composer-token-shift",role:"group","aria-label":"Reorder token",children:[l.jsx("button",{type:"button",className:"composer-token-shift-btn",onClick:Me=>{Me.stopPropagation(),Tc(T,-1)},"aria-label":"Move up",disabled:T===0,children:""}),l.jsx("button",{type:"button",className:"composer-token-shift-btn",onClick:Me=>{Me.stopPropagation(),Tc(T,1)},"aria-label":"Move down",disabled:T===ee.length-1,children:""})]}),l.jsx("button",{type:"button",className:"composer-token-remove",onClick:Me=>{Me.stopPropagation(),Ic(C)},"aria-label":`Remove ${C.text}`,children:l.jsx(va,{size:9})})]},`${C.type}-${C.text}-${C.start}`)})}):l.jsx("div",{className:"composer-empty",children:"No elements yet."})]}),l.jsxs("div",{className:"composer-expanded",children:[l.jsxs("div",{className:"composer-expanded-header",children:[l.jsx("span",{className:"composer-expanded-label",children:"Expanded prompt"}),l.jsx("span",{className:"composer-expanded-meta",children:m?`${m.length} chars`:"Empty"})]}),l.jsx("div",{className:"composer-expanded-box","aria-label":"Expanded prompt",children:m||"No prompt yet."})]})]}),l.jsxs("div",{className:`composer-panel composer-panel-aliases ${P==="aliases"?"is-visible":""}`,children:[l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:d,type:"text",value:w,onChange:C=>S(C.target.value),placeholder:"Search aliases",className:"composer-search ui-control ui-input"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>S(""),disabled:!w,children:"Clear"})]}),l.jsx("select",{value:j,onChange:C=>p(C.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Filter by category",children:b.map(C=>l.jsx("option",{value:C,children:C==="All"?"Category: All":ln(C)},`cat-${C}`))}),B.length>2&&l.jsx("select",{value:f,onChange:C=>y(C.target.value),className:"composer-subcategory-select ui-control ui-select is-compact",children:B.map(C=>l.jsx("option",{value:C,children:C==="All"?"All subcategories":$n(C)},C))})]}),l.jsxs("div",{className:"composer-tag-collection-bar is-sticky",children:[l.jsxs("div",{children:[l.jsx("div",{className:"composer-tag-collection-label",children:ne.length?`${ne.length} selected`:"No aliases selected"}),he?l.jsx("div",{className:"composer-tag-collection-status",children:he}):null]}),l.jsxs("div",{className:"composer-tag-collection-actions",children:[l.jsx("button",{type:"button",className:"composer-tag-collection-btn",onClick:Qs,disabled:!ne.length,children:"Clear"}),l.jsx("button",{type:"button",className:"composer-tag-collection-btn is-primary",onClick:$m,disabled:!ne.length,children:"Apply"})]})]}),ne.length?l.jsxs("div",{className:"composer-collection-inline",role:"list",children:[ne.slice(0,3).map(C=>{const T=tt.get(C.toLowerCase()),ce=(T==null?void 0:T.displayName)||C;return l.jsxs("button",{type:"button",className:"collected-tag-chip",onClick:()=>Am(C),"aria-label":`Remove ${C}`,title:`$${C}$`,children:[l.jsx("code",{className:"collected-tag-code",children:ce}),l.jsx("span",{"aria-hidden":"true",children:""})]},C)}),ne.length>3?l.jsxs("div",{className:"collected-tag-chip tag-overflow-chip","aria-hidden":"true",children:["+",ne.length-3," more"]}):null]}):null,l.jsx("div",{className:"composer-alias-list",children:Q.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases found."}):l.jsxs(l.Fragment,{children:[ie.map(C=>l.jsxs("button",{type:"button",onClick:()=>Ks(C.token),className:`composer-alias-item ${ne.some(T=>T.toLowerCase()===C.token.toLowerCase())?"is-collected":""}`,children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:C.displayName||C.token}),C.category?l.jsx("span",{className:"composer-alias-category",children:ln(C.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",C.token,"$"]}),l.jsx("div",{className:"composer-alias-text",children:C.text})]},C.key)),N<Q.length&&l.jsx("div",{ref:h,className:"composer-sentinel"})]})})]}),l.jsxs("div",{className:`composer-panel composer-panel-tags ${P==="tags"?"is-visible":""}`,onClick:C=>C.stopPropagation(),children:[l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:E,type:"search",value:M,onChange:C=>z(C.target.value),placeholder:"Search tags (e.g. smile, city, sword)",className:"composer-search ui-control ui-input","aria-label":"Search tags"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>z(""),disabled:!M,children:"Clear"})]}),l.jsxs("select",{value:A,onChange:C=>Z(C.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Filter by category",children:[l.jsx("option",{value:"",children:"Category: All"}),U.map(C=>l.jsxs("option",{value:C.key,children:[$n(C.key)," (",Number(C.actual||C.count||0).toLocaleString(),")"]},C.key))]}),l.jsxs("select",{value:H,onChange:C=>D(C.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Sort tags",children:[l.jsx("option",{value:"count",children:"Sort: Popular"}),l.jsx("option",{value:"alpha",children:"Sort: AZ"})]})]}),l.jsx("div",{className:"composer-tags-header",children:l.jsx("div",{className:"composer-tags-hint",children:l.jsx("span",{className:"ml-3 opacity-80",children:ye})})}),l.jsxs("div",{className:"composer-tag-collection-bar is-sticky",children:[l.jsxs("div",{children:[l.jsx("div",{className:"composer-tag-collection-label",children:be.length?`${be.length} selected`:"No tags selected"}),O?l.jsx("div",{className:"composer-tag-collection-status",children:O}):null]}),l.jsxs("div",{className:"composer-tag-collection-actions",children:[l.jsx("button",{type:"button",className:"composer-tag-collection-btn",onClick:Wn,disabled:!be.length,children:"Clear"}),l.jsx("button",{type:"button",className:"composer-tag-collection-btn is-primary",onClick:Hs,disabled:!be.length,children:"Apply"})]})]}),be.length?l.jsxs("div",{className:"composer-collection-inline",role:"list",children:[be.slice(0,3).map(C=>l.jsxs("button",{type:"button",className:"collected-tag-chip",onClick:()=>To(C),"aria-label":`Remove ${C}`,children:[l.jsx("code",{className:"collected-tag-code",children:C}),l.jsx("span",{"aria-hidden":"true",children:""})]},C)),be.length>3?l.jsxs("div",{className:"collected-tag-chip tag-overflow-chip","aria-hidden":"true",children:["+",be.length-3," more"]}):null]}):null,Xe?l.jsx("div",{className:"composer-tags-error",children:Xe}):null,l.jsx("div",{className:"composer-alias-list composer-tags-grid",role:"list",children:K?l.jsx("div",{className:"composer-alias-empty",children:"Loading tags"}):J.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No tags found."}):l.jsxs(l.Fragment,{children:[J.map(C=>{const T=be.some(ce=>ce.toLowerCase()===String(C.tag||"").toLowerCase());return l.jsxs("button",{type:"button",className:`composer-alias-item composer-tag-item ${T?"is-collected":""}`,onClick:ce=>{ce.stopPropagation(),Gs(C.tag)},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name composer-tag-name",children:l.jsx("code",{className:"composer-tag-code",children:C.tag})}),C.category?l.jsx("span",{className:"composer-alias-category",children:$n(C.category)}):null]}),l.jsx("div",{className:"composer-alias-token composer-tag-count",children:Number(C.count||0).toLocaleString()})]},`${C.tag}-${C.category}`)}),J.length<de&&l.jsx("div",{ref:L,className:"composer-sentinel"}),ke?l.jsx("div",{className:"composer-alias-empty",children:"Loading more"}):null]})})]})]}),$c=l.jsx(Sa,{open:le,onClose:()=>ae(!1),title:((Mc=k==null?void 0:k.element)==null?void 0:Mc.type)==="alias"?"Alias strength":"Tag strength",tokenLabel:k?((Oc=k.element)==null?void 0:Oc.type)==="alias"?`${k.displayName}  $${(Fc=k.element)==null?void 0:Fc.text}$`:k.displayName:"",weight:(k==null?void 0:k.weight)??1,onApply:C=>{k!=null&&k.element&&Te(T=>pd(T||"",k.element,C))},onRemoveWeight:()=>{k!=null&&k.element&&Te(C=>pd(C||"",k.element,null))},onDeleteToken:()=>{k!=null&&k.element&&Ic(k.element)}}),Km=l.jsx("div",{className:"page-bar composer-bar",children:l.jsx("h1",{className:"page-bar-title",children:i||"Prompt"})});return zo?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"page-shell page-stack",children:[Km,Ac]}),$c]}):l.jsxs(l.Fragment,{children:[l.jsx(kt,{open:e,onClose:zc,title:"Composer",variant:"fullscreen",shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:zc,children:"Cancel"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:Gm,children:"Apply"})]}),children:Ac}),$c]})}function Aw(){const e=tn(),[t]=om(),{formData:n,handleFormChange:r,aliasOptions:s,aliasCatalog:o,promptFieldName:i}=zm(),c=t.get("field")||i||"prompt",d=(n==null?void 0:n[c])||"";return u.useEffect(()=>{if(!(typeof document>"u"))return document.body.classList.add("no-pull-refresh"),document.documentElement.classList.add("no-pull-refresh"),()=>{document.body.classList.remove("no-pull-refresh"),document.documentElement.classList.remove("no-pull-refresh")}},[]),l.jsx(zw,{open:!0,onClose:()=>e("/controls"),value:d,onChange:h=>r(c,h),aliasOptions:s,aliasCatalog:o,fieldLabel:c,variant:"page"})}function $w(){var p,f;const{authed:e,ready:t,login:n}=Lo(),r=tn(),o=((f=(p=Lt().state)==null?void 0:p.from)==null?void 0:f.pathname)||"/studio",[i,a]=u.useState(""),[c,d]=u.useState(""),[h,g]=u.useState(""),[m,x]=u.useState(!1),[w,S]=u.useState(!1);u.useEffect(()=>{try{localStorage.getItem("cozygen_idle_logout")&&(S(!0),localStorage.removeItem("cozygen_idle_logout"))}catch{}},[]),u.useEffect(()=>{t&&e&&r(o,{replace:!0})},[t,e,o,r]);const j=async y=>{y.preventDefault(),g(""),x(!0);try{await n(i,c),r(o,{replace:!0})}catch(N){N!=null&&N.unauthorized?g("Invalid username or password."):g("Unable to sign in. Please try again.")}finally{x(!1)}};return l.jsx("div",{className:"login-shell",children:l.jsxs("div",{className:"neon-card login-card",children:[l.jsxs("div",{className:"login-brand",children:[l.jsx(ym,{size:34}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"login-title",children:"Sign in"}),l.jsx("div",{className:"login-subtitle",children:"Continue to CozyGen Studio"})]})]}),l.jsxs("form",{className:"login-form",onSubmit:j,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"login-username",className:"login-label",children:"Username"}),l.jsx("input",{id:"login-username",type:"text",className:"ui-control ui-input",value:i,onChange:y=>a(y.target.value),autoComplete:"username",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"login-password",className:"login-label",children:"Password"}),l.jsx("input",{id:"login-password",type:"password",className:"ui-control ui-input",value:c,onChange:y=>d(y.target.value),autoComplete:"current-password",required:!0})]}),h?l.jsx("div",{className:"ui-alert",children:h}):w?l.jsx("div",{className:"ui-alert is-warn",children:"You were signed out due to inactivity. Please sign in again."}):null,l.jsx("button",{type:"submit",disabled:m,className:"ui-button is-primary w-full",children:m?"Signing in":"Sign in"})]}),l.jsxs("p",{className:"login-footnote",children:["Access is protected by CozyGen auth. Set ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /"," ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server to enable."]})]})})}function Mw({containerRef:e}){const{pathname:t,hash:n}=Lt();return u.useEffect(()=>{if(n)return;const r=e==null?void 0:e.current;if(r&&typeof r.scrollTo=="function"){r.scrollTo({top:0,left:0,behavior:"auto"});return}typeof window<"u"&&window.scrollTo(0,0)},[t,n,e]),null}function Ow({children:e}){const{authed:t,ready:n}=Lo(),r=Lt();return n?t?e:l.jsx(da,{to:"/login",state:{from:r},replace:!0}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-200",children:l.jsxs("div",{className:"page-loading",children:[l.jsx("span",{className:"loading-spinner lg","aria-hidden":"true"}),l.jsx("span",{className:"sr-only",children:"Checking session"})]})})}function Fw(){const{pathname:e}=Lt(),t=tn(),{defaultCreds:n,authed:r}=Lo(),s=e==="/login",o=u.useRef(null),i=no("(max-width: 767px)"),a=no("(pointer: coarse)"),c=!s&&(i||a);return u.useEffect(()=>{if(!r)return;const d=h=>{var x;const g=String(((x=h==null?void 0:h.detail)==null?void 0:x.fieldName)||"").trim(),m=g?`?field=${encodeURIComponent(g)}`:"";t(`/compose${m}`)};return window.addEventListener("cozygen:open-composer",d),()=>window.removeEventListener("cozygen:open-composer",d)},[r,t]),l.jsxs("div",{className:"app-shell",children:[!s&&l.jsx(Xv,{}),!s&&r&&n&&l.jsxs("div",{className:"flex-shrink-0 bg-amber-500/10 text-amber-200 border-b border-amber-400/50 px-4 py-2 text-sm text-center",children:["Default CozyGen credentials are still in use. Change ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server."]}),l.jsx(Mw,{containerRef:o}),l.jsx("main",{ref:o,className:s?"app-content is-login":"app-content",children:l.jsxs(hv,{children:[l.jsx($t,{path:"/login",element:l.jsx($w,{})}),l.jsxs($t,{element:l.jsx(Ow,{children:l.jsx(aw,{children:l.jsx(pv,{})})}),children:[l.jsx($t,{path:"/",element:l.jsx(da,{to:"/studio",replace:!0})}),l.jsx($t,{path:"/studio",element:l.jsx(dw,{})}),l.jsx($t,{path:"/controls",element:l.jsx(uw,{})}),l.jsx($t,{path:"/compose",element:l.jsx(Aw,{})}),l.jsx($t,{path:"/gallery",element:l.jsx(Cw,{})}),l.jsx($t,{path:"/aliases",element:l.jsx(_w,{})}),l.jsx($t,{path:"/tags",element:l.jsx(Tw,{})})]}),l.jsx($t,{path:"*",element:l.jsx(da,{to:"/studio",replace:!0})})]})}),c?l.jsx(ex,{}):null]})}function Dw(){return l.jsx(kv,{children:l.jsx(Wv,{children:l.jsx(Fw,{})})})}gi.createRoot(document.getElementById("root")).render(l.jsx(Mt.StrictMode,{children:l.jsx(Dw,{})}));
