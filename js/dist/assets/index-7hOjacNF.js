function Rm(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in e)){const s=Object.getOwnPropertyDescriptor(r,l);s&&Object.defineProperty(e,l,s.get?s:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();function wd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Om(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var l=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,l.get?l:{enumerable:!0,get:function(){return e[r]}})}),n}var Nd={exports:{}},Gs={},Sd={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bl=Symbol.for("react.element"),Tm=Symbol.for("react.portal"),Im=Symbol.for("react.fragment"),Mm=Symbol.for("react.strict_mode"),zm=Symbol.for("react.profiler"),Dm=Symbol.for("react.provider"),$m=Symbol.for("react.context"),Um=Symbol.for("react.forward_ref"),Bm=Symbol.for("react.suspense"),Wm=Symbol.for("react.memo"),Vm=Symbol.for("react.lazy"),Eu=Symbol.iterator;function Hm(e){return e===null||typeof e!="object"?null:(e=Eu&&e[Eu]||e["@@iterator"],typeof e=="function"?e:null)}var jd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cd=Object.assign,Ed={};function jr(e,t,n){this.props=e,this.context=t,this.refs=Ed,this.updater=n||jd}jr.prototype.isReactComponent={};jr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};jr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bd(){}bd.prototype=jr.prototype;function ii(e,t,n){this.props=e,this.context=t,this.refs=Ed,this.updater=n||jd}var ui=ii.prototype=new bd;ui.constructor=ii;Cd(ui,jr.prototype);ui.isPureReactComponent=!0;var bu=Array.isArray,kd=Object.prototype.hasOwnProperty,ci={current:null},_d={key:!0,ref:!0,__self:!0,__source:!0};function Fd(e,t,n){var r,l={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)kd.call(t,r)&&!_d.hasOwnProperty(r)&&(l[r]=t[r]);var i=arguments.length-2;if(i===1)l.children=n;else if(1<i){for(var u=Array(i),c=0;c<i;c++)u[c]=arguments[c+2];l.children=u}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)l[r]===void 0&&(l[r]=i[r]);return{$$typeof:bl,type:e,key:s,ref:a,props:l,_owner:ci.current}}function Gm(e,t){return{$$typeof:bl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function di(e){return typeof e=="object"&&e!==null&&e.$$typeof===bl}function Km(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ku=/\/+/g;function vo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Km(""+e.key):t.toString(36)}function Zl(e,t,n,r,l){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case bl:case Tm:a=!0}}if(a)return a=e,l=l(a),e=r===""?"."+vo(a,0):r,bu(l)?(n="",e!=null&&(n=e.replace(ku,"$&/")+"/"),Zl(l,t,n,"",function(c){return c})):l!=null&&(di(l)&&(l=Gm(l,n+(!l.key||a&&a.key===l.key?"":(""+l.key).replace(ku,"$&/")+"/")+e)),t.push(l)),1;if(a=0,r=r===""?".":r+":",bu(e))for(var i=0;i<e.length;i++){s=e[i];var u=r+vo(s,i);a+=Zl(s,t,n,u,l)}else if(u=Hm(e),typeof u=="function")for(e=u.call(e),i=0;!(s=e.next()).done;)s=s.value,u=r+vo(s,i++),a+=Zl(s,t,n,u,l);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Tl(e,t,n){if(e==null)return e;var r=[],l=0;return Zl(e,r,"","",function(s){return t.call(n,s,l++)}),r}function Qm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Je={current:null},es={transition:null},Ym={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:es,ReactCurrentOwner:ci};function Pd(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:Tl,forEach:function(e,t,n){Tl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Tl(e,function(){t++}),t},toArray:function(e){return Tl(e,function(t){return t})||[]},only:function(e){if(!di(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};de.Component=jr;de.Fragment=Im;de.Profiler=zm;de.PureComponent=ii;de.StrictMode=Mm;de.Suspense=Bm;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ym;de.act=Pd;de.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Cd({},e.props),l=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=ci.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(u in t)kd.call(t,u)&&!_d.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&i!==void 0?i[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){i=Array(u);for(var c=0;c<u;c++)i[c]=arguments[c+2];r.children=i}return{$$typeof:bl,type:e.type,key:l,ref:s,props:r,_owner:a}};de.createContext=function(e){return e={$$typeof:$m,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Dm,_context:e},e.Consumer=e};de.createElement=Fd;de.createFactory=function(e){var t=Fd.bind(null,e);return t.type=e,t};de.createRef=function(){return{current:null}};de.forwardRef=function(e){return{$$typeof:Um,render:e}};de.isValidElement=di;de.lazy=function(e){return{$$typeof:Vm,_payload:{_status:-1,_result:e},_init:Qm}};de.memo=function(e,t){return{$$typeof:Wm,type:e,compare:t===void 0?null:t}};de.startTransition=function(e){var t=es.transition;es.transition={};try{e()}finally{es.transition=t}};de.unstable_act=Pd;de.useCallback=function(e,t){return Je.current.useCallback(e,t)};de.useContext=function(e){return Je.current.useContext(e)};de.useDebugValue=function(){};de.useDeferredValue=function(e){return Je.current.useDeferredValue(e)};de.useEffect=function(e,t){return Je.current.useEffect(e,t)};de.useId=function(){return Je.current.useId()};de.useImperativeHandle=function(e,t,n){return Je.current.useImperativeHandle(e,t,n)};de.useInsertionEffect=function(e,t){return Je.current.useInsertionEffect(e,t)};de.useLayoutEffect=function(e,t){return Je.current.useLayoutEffect(e,t)};de.useMemo=function(e,t){return Je.current.useMemo(e,t)};de.useReducer=function(e,t,n){return Je.current.useReducer(e,t,n)};de.useRef=function(e){return Je.current.useRef(e)};de.useState=function(e){return Je.current.useState(e)};de.useSyncExternalStore=function(e,t,n){return Je.current.useSyncExternalStore(e,t,n)};de.useTransition=function(){return Je.current.useTransition()};de.version="18.3.1";Sd.exports=de;var d=Sd.exports;const Vr=wd(d),qm=Rm({__proto__:null,default:Vr},[d]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jm=d,Xm=Symbol.for("react.element"),Zm=Symbol.for("react.fragment"),eh=Object.prototype.hasOwnProperty,th=Jm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nh={key:!0,ref:!0,__self:!0,__source:!0};function Ad(e,t,n){var r,l={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)eh.call(t,r)&&!nh.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:Xm,type:e,key:s,ref:a,props:l,_owner:th.current}}Gs.Fragment=Zm;Gs.jsx=Ad;Gs.jsxs=Ad;Nd.exports=Gs;var o=Nd.exports,Xo={},Ld={exports:{}},it={},Rd={exports:{}},Od={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(S,$){var M=S.length;S.push($);e:for(;0<M;){var I=M-1>>>1,O=S[I];if(0<l(O,$))S[I]=$,S[M]=O,M=I;else break e}}function n(S){return S.length===0?null:S[0]}function r(S){if(S.length===0)return null;var $=S[0],M=S.pop();if(M!==$){S[0]=M;e:for(var I=0,O=S.length,X=O>>>1;I<X;){var ee=2*(I+1)-1,v=S[ee],E=ee+1,L=S[E];if(0>l(v,M))E<O&&0>l(L,v)?(S[I]=L,S[E]=M,I=E):(S[I]=v,S[ee]=M,I=ee);else if(E<O&&0>l(L,M))S[I]=L,S[E]=M,I=E;else break e}}return $}function l(S,$){var M=S.sortIndex-$.sortIndex;return M!==0?M:S.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var u=[],c=[],m=1,f=null,h=3,N=!1,x=!1,C=!1,j=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(S){for(var $=n(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=S)r(c),$.sortIndex=$.expirationTime,t(u,$);else break;$=n(c)}}function w(S){if(C=!1,y(S),!x)if(n(u)!==null)x=!0,z(_);else{var $=n(c);$!==null&&k(w,$.startTime-S)}}function _(S,$){x=!1,C&&(C=!1,g(P),P=-1),N=!0;var M=h;try{for(y($),f=n(u);f!==null&&(!(f.expirationTime>$)||S&&!V());){var I=f.callback;if(typeof I=="function"){f.callback=null,h=f.priorityLevel;var O=I(f.expirationTime<=$);$=e.unstable_now(),typeof O=="function"?f.callback=O:f===n(u)&&r(u),y($)}else r(u);f=n(u)}if(f!==null)var X=!0;else{var ee=n(c);ee!==null&&k(w,ee.startTime-$),X=!1}return X}finally{f=null,h=M,N=!1}}var D=!1,T=null,P=-1,G=5,U=-1;function V(){return!(e.unstable_now()-U<G)}function Z(){if(T!==null){var S=e.unstable_now();U=S;var $=!0;try{$=T(!0,S)}finally{$?J():(D=!1,T=null)}}else D=!1}var J;if(typeof p=="function")J=function(){p(Z)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,A=F.port2;F.port1.onmessage=Z,J=function(){A.postMessage(null)}}else J=function(){j(Z,0)};function z(S){T=S,D||(D=!0,J())}function k(S,$){P=j(function(){S(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(S){S.callback=null},e.unstable_continueExecution=function(){x||N||(x=!0,z(_))},e.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<S?Math.floor(1e3/S):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(S){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var M=h;h=$;try{return S()}finally{h=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(S,$){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var M=h;h=S;try{return $()}finally{h=M}},e.unstable_scheduleCallback=function(S,$,M){var I=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?I+M:I):M=I,S){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=M+O,S={id:m++,callback:$,priorityLevel:S,startTime:M,expirationTime:O,sortIndex:-1},M>I?(S.sortIndex=M,t(c,S),n(u)===null&&S===n(c)&&(C?(g(P),P=-1):C=!0,k(w,M-I))):(S.sortIndex=O,t(u,S),x||N||(x=!0,z(_))),S},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(S){var $=h;return function(){var M=h;h=$;try{return S.apply(this,arguments)}finally{h=M}}}})(Od);Rd.exports=Od;var rh=Rd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh=d,at=rh;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Td=new Set,ll={};function Wn(e,t){pr(e,t),pr(e+"Capture",t)}function pr(e,t){for(ll[e]=t,e=0;e<t.length;e++)Td.add(t[e])}var Wt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zo=Object.prototype.hasOwnProperty,sh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_u={},Fu={};function oh(e){return Zo.call(Fu,e)?!0:Zo.call(_u,e)?!1:sh.test(e)?Fu[e]=!0:(_u[e]=!0,!1)}function ah(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ih(e,t,n,r){if(t===null||typeof t>"u"||ah(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xe(e,t,n,r,l,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Ue={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ue[e]=new Xe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ue[t]=new Xe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ue[e]=new Xe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ue[e]=new Xe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ue[e]=new Xe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ue[e]=new Xe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ue[e]=new Xe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ue[e]=new Xe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ue[e]=new Xe(e,5,!1,e.toLowerCase(),null,!1,!1)});var fi=/[\-:]([a-z])/g;function pi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(fi,pi);Ue[t]=new Xe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(fi,pi);Ue[t]=new Xe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(fi,pi);Ue[t]=new Xe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ue[e]=new Xe(e,1,!1,e.toLowerCase(),null,!1,!1)});Ue.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ue[e]=new Xe(e,1,!1,e.toLowerCase(),null,!0,!0)});function mi(e,t,n,r){var l=Ue.hasOwnProperty(t)?Ue[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ih(t,n,l,r)&&(n=null),r||l===null?oh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Kt=lh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Il=Symbol.for("react.element"),Qn=Symbol.for("react.portal"),Yn=Symbol.for("react.fragment"),hi=Symbol.for("react.strict_mode"),ea=Symbol.for("react.profiler"),Id=Symbol.for("react.provider"),Md=Symbol.for("react.context"),gi=Symbol.for("react.forward_ref"),ta=Symbol.for("react.suspense"),na=Symbol.for("react.suspense_list"),vi=Symbol.for("react.memo"),Xt=Symbol.for("react.lazy"),zd=Symbol.for("react.offscreen"),Pu=Symbol.iterator;function Lr(e){return e===null||typeof e!="object"?null:(e=Pu&&e[Pu]||e["@@iterator"],typeof e=="function"?e:null)}var ke=Object.assign,yo;function $r(e){if(yo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);yo=t&&t[1]||""}return`
`+yo+e}var xo=!1;function wo(e,t){if(!e||xo)return"";xo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var l=c.stack.split(`
`),s=r.stack.split(`
`),a=l.length-1,i=s.length-1;1<=a&&0<=i&&l[a]!==s[i];)i--;for(;1<=a&&0<=i;a--,i--)if(l[a]!==s[i]){if(a!==1||i!==1)do if(a--,i--,0>i||l[a]!==s[i]){var u=`
`+l[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=i);break}}}finally{xo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$r(e):""}function uh(e){switch(e.tag){case 5:return $r(e.type);case 16:return $r("Lazy");case 13:return $r("Suspense");case 19:return $r("SuspenseList");case 0:case 2:case 15:return e=wo(e.type,!1),e;case 11:return e=wo(e.type.render,!1),e;case 1:return e=wo(e.type,!0),e;default:return""}}function ra(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yn:return"Fragment";case Qn:return"Portal";case ea:return"Profiler";case hi:return"StrictMode";case ta:return"Suspense";case na:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Md:return(e.displayName||"Context")+".Consumer";case Id:return(e._context.displayName||"Context")+".Provider";case gi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vi:return t=e.displayName||null,t!==null?t:ra(e.type)||"Memo";case Xt:t=e._payload,e=e._init;try{return ra(e(t))}catch{}}return null}function ch(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ra(t);case 8:return t===hi?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function dh(e){var t=Dd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ml(e){e._valueTracker||(e._valueTracker=dh(e))}function $d(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Dd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ps(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function la(e,t){var n=t.checked;return ke({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Au(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=xn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ud(e,t){t=t.checked,t!=null&&mi(e,"checked",t,!1)}function sa(e,t){Ud(e,t);var n=xn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?oa(e,t.type,n):t.hasOwnProperty("defaultValue")&&oa(e,t.type,xn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Lu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function oa(e,t,n){(t!=="number"||ps(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ur=Array.isArray;function ar(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+xn(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function aa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return ke({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ru(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(K(92));if(Ur(n)){if(1<n.length)throw Error(K(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:xn(n)}}function Bd(e,t){var n=xn(t.value),r=xn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ou(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Wd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ia(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Wd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zl,Vd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zl=zl||document.createElement("div"),zl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fh=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(e){fh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hr[t]=Hr[e]})});function Hd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Hr.hasOwnProperty(e)&&Hr[e]?(""+t).trim():t+"px"}function Gd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=Hd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var ph=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ua(e,t){if(t){if(ph[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function ca(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var da=null;function yi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fa=null,ir=null,ur=null;function Tu(e){if(e=Fl(e)){if(typeof fa!="function")throw Error(K(280));var t=e.stateNode;t&&(t=Js(t),fa(e.stateNode,e.type,t))}}function Kd(e){ir?ur?ur.push(e):ur=[e]:ir=e}function Qd(){if(ir){var e=ir,t=ur;if(ur=ir=null,Tu(e),t)for(e=0;e<t.length;e++)Tu(t[e])}}function Yd(e,t){return e(t)}function qd(){}var No=!1;function Jd(e,t,n){if(No)return e(t,n);No=!0;try{return Yd(e,t,n)}finally{No=!1,(ir!==null||ur!==null)&&(qd(),Qd())}}function ol(e,t){var n=e.stateNode;if(n===null)return null;var r=Js(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(K(231,t,typeof n));return n}var pa=!1;if(Wt)try{var Rr={};Object.defineProperty(Rr,"passive",{get:function(){pa=!0}}),window.addEventListener("test",Rr,Rr),window.removeEventListener("test",Rr,Rr)}catch{pa=!1}function mh(e,t,n,r,l,s,a,i,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(m){this.onError(m)}}var Gr=!1,ms=null,hs=!1,ma=null,hh={onError:function(e){Gr=!0,ms=e}};function gh(e,t,n,r,l,s,a,i,u){Gr=!1,ms=null,mh.apply(hh,arguments)}function vh(e,t,n,r,l,s,a,i,u){if(gh.apply(this,arguments),Gr){if(Gr){var c=ms;Gr=!1,ms=null}else throw Error(K(198));hs||(hs=!0,ma=c)}}function Vn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Xd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Iu(e){if(Vn(e)!==e)throw Error(K(188))}function yh(e){var t=e.alternate;if(!t){if(t=Vn(e),t===null)throw Error(K(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var s=l.alternate;if(s===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===s.child){for(s=l.child;s;){if(s===n)return Iu(l),e;if(s===r)return Iu(l),t;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=l,r=s;else{for(var a=!1,i=l.child;i;){if(i===n){a=!0,n=l,r=s;break}if(i===r){a=!0,r=l,n=s;break}i=i.sibling}if(!a){for(i=s.child;i;){if(i===n){a=!0,n=s,r=l;break}if(i===r){a=!0,r=s,n=l;break}i=i.sibling}if(!a)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?e:t}function Zd(e){return e=yh(e),e!==null?ef(e):null}function ef(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ef(e);if(t!==null)return t;e=e.sibling}return null}var tf=at.unstable_scheduleCallback,Mu=at.unstable_cancelCallback,xh=at.unstable_shouldYield,wh=at.unstable_requestPaint,Fe=at.unstable_now,Nh=at.unstable_getCurrentPriorityLevel,xi=at.unstable_ImmediatePriority,nf=at.unstable_UserBlockingPriority,gs=at.unstable_NormalPriority,Sh=at.unstable_LowPriority,rf=at.unstable_IdlePriority,Ks=null,Ot=null;function jh(e){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Ks,e,void 0,(e.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:bh,Ch=Math.log,Eh=Math.LN2;function bh(e){return e>>>=0,e===0?32:31-(Ch(e)/Eh|0)|0}var Dl=64,$l=4194304;function Br(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~l;i!==0?r=Br(i):(s&=a,s!==0&&(r=Br(s)))}else a=n&~l,a!==0?r=Br(a):s!==0&&(r=Br(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,s=t&-t,l>=s||l===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-jt(t),l=1<<n,r|=e[n],t&=~l;return r}function kh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _h(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-jt(s),i=1<<a,u=l[a];u===-1?(!(i&n)||i&r)&&(l[a]=kh(i,t)):u<=t&&(e.expiredLanes|=i),s&=~i}}function ha(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function lf(){var e=Dl;return Dl<<=1,!(Dl&4194240)&&(Dl=64),e}function So(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-jt(t),e[t]=n}function Fh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-jt(n),s=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~s}}function wi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-jt(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var ve=0;function sf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var of,Ni,af,uf,cf,ga=!1,Ul=[],un=null,cn=null,dn=null,al=new Map,il=new Map,en=[],Ph="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zu(e,t){switch(e){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":al.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":il.delete(t.pointerId)}}function Or(e,t,n,r,l,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[l]},t!==null&&(t=Fl(t),t!==null&&Ni(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Ah(e,t,n,r,l){switch(t){case"focusin":return un=Or(un,e,t,n,r,l),!0;case"dragenter":return cn=Or(cn,e,t,n,r,l),!0;case"mouseover":return dn=Or(dn,e,t,n,r,l),!0;case"pointerover":var s=l.pointerId;return al.set(s,Or(al.get(s)||null,e,t,n,r,l)),!0;case"gotpointercapture":return s=l.pointerId,il.set(s,Or(il.get(s)||null,e,t,n,r,l)),!0}return!1}function df(e){var t=An(e.target);if(t!==null){var n=Vn(t);if(n!==null){if(t=n.tag,t===13){if(t=Xd(n),t!==null){e.blockedOn=t,cf(e.priority,function(){af(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ts(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=va(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);da=r,n.target.dispatchEvent(r),da=null}else return t=Fl(n),t!==null&&Ni(t),e.blockedOn=n,!1;t.shift()}return!0}function Du(e,t,n){ts(e)&&n.delete(t)}function Lh(){ga=!1,un!==null&&ts(un)&&(un=null),cn!==null&&ts(cn)&&(cn=null),dn!==null&&ts(dn)&&(dn=null),al.forEach(Du),il.forEach(Du)}function Tr(e,t){e.blockedOn===t&&(e.blockedOn=null,ga||(ga=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,Lh)))}function ul(e){function t(l){return Tr(l,e)}if(0<Ul.length){Tr(Ul[0],e);for(var n=1;n<Ul.length;n++){var r=Ul[n];r.blockedOn===e&&(r.blockedOn=null)}}for(un!==null&&Tr(un,e),cn!==null&&Tr(cn,e),dn!==null&&Tr(dn,e),al.forEach(t),il.forEach(t),n=0;n<en.length;n++)r=en[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<en.length&&(n=en[0],n.blockedOn===null);)df(n),n.blockedOn===null&&en.shift()}var cr=Kt.ReactCurrentBatchConfig,ys=!0;function Rh(e,t,n,r){var l=ve,s=cr.transition;cr.transition=null;try{ve=1,Si(e,t,n,r)}finally{ve=l,cr.transition=s}}function Oh(e,t,n,r){var l=ve,s=cr.transition;cr.transition=null;try{ve=4,Si(e,t,n,r)}finally{ve=l,cr.transition=s}}function Si(e,t,n,r){if(ys){var l=va(e,t,n,r);if(l===null)Lo(e,t,r,xs,n),zu(e,r);else if(Ah(l,e,t,n,r))r.stopPropagation();else if(zu(e,r),t&4&&-1<Ph.indexOf(e)){for(;l!==null;){var s=Fl(l);if(s!==null&&of(s),s=va(e,t,n,r),s===null&&Lo(e,t,r,xs,n),s===l)break;l=s}l!==null&&r.stopPropagation()}else Lo(e,t,r,null,n)}}var xs=null;function va(e,t,n,r){if(xs=null,e=yi(r),e=An(e),e!==null)if(t=Vn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Xd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xs=e,null}function ff(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nh()){case xi:return 1;case nf:return 4;case gs:case Sh:return 16;case rf:return 536870912;default:return 16}default:return 16}}var nn=null,ji=null,ns=null;function pf(){if(ns)return ns;var e,t=ji,n=t.length,r,l="value"in nn?nn.value:nn.textContent,s=l.length;for(e=0;e<n&&t[e]===l[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===l[s-r];r++);return ns=l.slice(e,1<r?1-r:void 0)}function rs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bl(){return!0}function $u(){return!1}function ut(e){function t(n,r,l,s,a){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(s):s[i]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Bl:$u,this.isPropagationStopped=$u,this}return ke(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bl)},persist:function(){},isPersistent:Bl}),t}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ci=ut(Cr),_l=ke({},Cr,{view:0,detail:0}),Th=ut(_l),jo,Co,Ir,Qs=ke({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ei,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ir&&(Ir&&e.type==="mousemove"?(jo=e.screenX-Ir.screenX,Co=e.screenY-Ir.screenY):Co=jo=0,Ir=e),jo)},movementY:function(e){return"movementY"in e?e.movementY:Co}}),Uu=ut(Qs),Ih=ke({},Qs,{dataTransfer:0}),Mh=ut(Ih),zh=ke({},_l,{relatedTarget:0}),Eo=ut(zh),Dh=ke({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),$h=ut(Dh),Uh=ke({},Cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bh=ut(Uh),Wh=ke({},Cr,{data:0}),Bu=ut(Wh),Vh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gh[e])?!!t[e]:!1}function Ei(){return Kh}var Qh=ke({},_l,{key:function(e){if(e.key){var t=Vh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=rs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ei,charCode:function(e){return e.type==="keypress"?rs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?rs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Yh=ut(Qh),qh=ke({},Qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wu=ut(qh),Jh=ke({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ei}),Xh=ut(Jh),Zh=ke({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),eg=ut(Zh),tg=ke({},Qs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ng=ut(tg),rg=[9,13,27,32],bi=Wt&&"CompositionEvent"in window,Kr=null;Wt&&"documentMode"in document&&(Kr=document.documentMode);var lg=Wt&&"TextEvent"in window&&!Kr,mf=Wt&&(!bi||Kr&&8<Kr&&11>=Kr),Vu=" ",Hu=!1;function hf(e,t){switch(e){case"keyup":return rg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qn=!1;function sg(e,t){switch(e){case"compositionend":return gf(t);case"keypress":return t.which!==32?null:(Hu=!0,Vu);case"textInput":return e=t.data,e===Vu&&Hu?null:e;default:return null}}function og(e,t){if(qn)return e==="compositionend"||!bi&&hf(e,t)?(e=pf(),ns=ji=nn=null,qn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mf&&t.locale!=="ko"?null:t.data;default:return null}}var ag={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ag[e.type]:t==="textarea"}function vf(e,t,n,r){Kd(r),t=ws(t,"onChange"),0<t.length&&(n=new Ci("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qr=null,cl=null;function ig(e){_f(e,0)}function Ys(e){var t=Zn(e);if($d(t))return e}function ug(e,t){if(e==="change")return t}var yf=!1;if(Wt){var bo;if(Wt){var ko="oninput"in document;if(!ko){var Ku=document.createElement("div");Ku.setAttribute("oninput","return;"),ko=typeof Ku.oninput=="function"}bo=ko}else bo=!1;yf=bo&&(!document.documentMode||9<document.documentMode)}function Qu(){Qr&&(Qr.detachEvent("onpropertychange",xf),cl=Qr=null)}function xf(e){if(e.propertyName==="value"&&Ys(cl)){var t=[];vf(t,cl,e,yi(e)),Jd(ig,t)}}function cg(e,t,n){e==="focusin"?(Qu(),Qr=t,cl=n,Qr.attachEvent("onpropertychange",xf)):e==="focusout"&&Qu()}function dg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ys(cl)}function fg(e,t){if(e==="click")return Ys(t)}function pg(e,t){if(e==="input"||e==="change")return Ys(t)}function mg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bt=typeof Object.is=="function"?Object.is:mg;function dl(e,t){if(bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!Zo.call(t,l)||!bt(e[l],t[l]))return!1}return!0}function Yu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qu(e,t){var n=Yu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yu(n)}}function wf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Nf(){for(var e=window,t=ps();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ps(e.document)}return t}function ki(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hg(e){var t=Nf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wf(n.ownerDocument.documentElement,n)){if(r!==null&&ki(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,s=Math.min(r.start,l);r=r.end===void 0?s:Math.min(r.end,l),!e.extend&&s>r&&(l=r,r=s,s=l),l=qu(n,s);var a=qu(n,r);l&&a&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gg=Wt&&"documentMode"in document&&11>=document.documentMode,Jn=null,ya=null,Yr=null,xa=!1;function Ju(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xa||Jn==null||Jn!==ps(r)||(r=Jn,"selectionStart"in r&&ki(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yr&&dl(Yr,r)||(Yr=r,r=ws(ya,"onSelect"),0<r.length&&(t=new Ci("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jn)))}function Wl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xn={animationend:Wl("Animation","AnimationEnd"),animationiteration:Wl("Animation","AnimationIteration"),animationstart:Wl("Animation","AnimationStart"),transitionend:Wl("Transition","TransitionEnd")},_o={},Sf={};Wt&&(Sf=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function qs(e){if(_o[e])return _o[e];if(!Xn[e])return e;var t=Xn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Sf)return _o[e]=t[n];return e}var jf=qs("animationend"),Cf=qs("animationiteration"),Ef=qs("animationstart"),bf=qs("transitionend"),kf=new Map,Xu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nn(e,t){kf.set(e,t),Wn(t,[e])}for(var Fo=0;Fo<Xu.length;Fo++){var Po=Xu[Fo],vg=Po.toLowerCase(),yg=Po[0].toUpperCase()+Po.slice(1);Nn(vg,"on"+yg)}Nn(jf,"onAnimationEnd");Nn(Cf,"onAnimationIteration");Nn(Ef,"onAnimationStart");Nn("dblclick","onDoubleClick");Nn("focusin","onFocus");Nn("focusout","onBlur");Nn(bf,"onTransitionEnd");pr("onMouseEnter",["mouseout","mouseover"]);pr("onMouseLeave",["mouseout","mouseover"]);pr("onPointerEnter",["pointerout","pointerover"]);pr("onPointerLeave",["pointerout","pointerover"]);Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wr));function Zu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,vh(r,t,void 0,e),e.currentTarget=null}function _f(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],u=i.instance,c=i.currentTarget;if(i=i.listener,u!==s&&l.isPropagationStopped())break e;Zu(l,i,c),s=u}else for(a=0;a<r.length;a++){if(i=r[a],u=i.instance,c=i.currentTarget,i=i.listener,u!==s&&l.isPropagationStopped())break e;Zu(l,i,c),s=u}}}if(hs)throw e=ma,hs=!1,ma=null,e}function Ne(e,t){var n=t[Ca];n===void 0&&(n=t[Ca]=new Set);var r=e+"__bubble";n.has(r)||(Ff(t,e,2,!1),n.add(r))}function Ao(e,t,n){var r=0;t&&(r|=4),Ff(n,e,r,t)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function fl(e){if(!e[Vl]){e[Vl]=!0,Td.forEach(function(n){n!=="selectionchange"&&(xg.has(n)||Ao(n,!1,e),Ao(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vl]||(t[Vl]=!0,Ao("selectionchange",!1,t))}}function Ff(e,t,n,r){switch(ff(t)){case 1:var l=Rh;break;case 4:l=Oh;break;default:l=Si}n=l.bind(null,t,n,e),l=void 0,!pa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Lo(e,t,n,r,l){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===l||i.nodeType===8&&i.parentNode===l)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===l||u.nodeType===8&&u.parentNode===l))return;a=a.return}for(;i!==null;){if(a=An(i),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}i=i.parentNode}}r=r.return}Jd(function(){var c=s,m=yi(n),f=[];e:{var h=kf.get(e);if(h!==void 0){var N=Ci,x=e;switch(e){case"keypress":if(rs(n)===0)break e;case"keydown":case"keyup":N=Yh;break;case"focusin":x="focus",N=Eo;break;case"focusout":x="blur",N=Eo;break;case"beforeblur":case"afterblur":N=Eo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=Uu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=Mh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=Xh;break;case jf:case Cf:case Ef:N=$h;break;case bf:N=eg;break;case"scroll":N=Th;break;case"wheel":N=ng;break;case"copy":case"cut":case"paste":N=Bh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Wu}var C=(t&4)!==0,j=!C&&e==="scroll",g=C?h!==null?h+"Capture":null:h;C=[];for(var p=c,y;p!==null;){y=p;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,g!==null&&(w=ol(p,g),w!=null&&C.push(pl(p,w,y)))),j)break;p=p.return}0<C.length&&(h=new N(h,x,null,n,m),f.push({event:h,listeners:C}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",N=e==="mouseout"||e==="pointerout",h&&n!==da&&(x=n.relatedTarget||n.fromElement)&&(An(x)||x[Vt]))break e;if((N||h)&&(h=m.window===m?m:(h=m.ownerDocument)?h.defaultView||h.parentWindow:window,N?(x=n.relatedTarget||n.toElement,N=c,x=x?An(x):null,x!==null&&(j=Vn(x),x!==j||x.tag!==5&&x.tag!==6)&&(x=null)):(N=null,x=c),N!==x)){if(C=Uu,w="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(C=Wu,w="onPointerLeave",g="onPointerEnter",p="pointer"),j=N==null?h:Zn(N),y=x==null?h:Zn(x),h=new C(w,p+"leave",N,n,m),h.target=j,h.relatedTarget=y,w=null,An(m)===c&&(C=new C(g,p+"enter",x,n,m),C.target=y,C.relatedTarget=j,w=C),j=w,N&&x)t:{for(C=N,g=x,p=0,y=C;y;y=Gn(y))p++;for(y=0,w=g;w;w=Gn(w))y++;for(;0<p-y;)C=Gn(C),p--;for(;0<y-p;)g=Gn(g),y--;for(;p--;){if(C===g||g!==null&&C===g.alternate)break t;C=Gn(C),g=Gn(g)}C=null}else C=null;N!==null&&ec(f,h,N,C,!1),x!==null&&j!==null&&ec(f,j,x,C,!0)}}e:{if(h=c?Zn(c):window,N=h.nodeName&&h.nodeName.toLowerCase(),N==="select"||N==="input"&&h.type==="file")var _=ug;else if(Gu(h))if(yf)_=pg;else{_=dg;var D=cg}else(N=h.nodeName)&&N.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=fg);if(_&&(_=_(e,c))){vf(f,_,n,m);break e}D&&D(e,h,c),e==="focusout"&&(D=h._wrapperState)&&D.controlled&&h.type==="number"&&oa(h,"number",h.value)}switch(D=c?Zn(c):window,e){case"focusin":(Gu(D)||D.contentEditable==="true")&&(Jn=D,ya=c,Yr=null);break;case"focusout":Yr=ya=Jn=null;break;case"mousedown":xa=!0;break;case"contextmenu":case"mouseup":case"dragend":xa=!1,Ju(f,n,m);break;case"selectionchange":if(gg)break;case"keydown":case"keyup":Ju(f,n,m)}var T;if(bi)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else qn?hf(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(mf&&n.locale!=="ko"&&(qn||P!=="onCompositionStart"?P==="onCompositionEnd"&&qn&&(T=pf()):(nn=m,ji="value"in nn?nn.value:nn.textContent,qn=!0)),D=ws(c,P),0<D.length&&(P=new Bu(P,e,null,n,m),f.push({event:P,listeners:D}),T?P.data=T:(T=gf(n),T!==null&&(P.data=T)))),(T=lg?sg(e,n):og(e,n))&&(c=ws(c,"onBeforeInput"),0<c.length&&(m=new Bu("onBeforeInput","beforeinput",null,n,m),f.push({event:m,listeners:c}),m.data=T))}_f(f,t)})}function pl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ws(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,s=l.stateNode;l.tag===5&&s!==null&&(l=s,s=ol(e,n),s!=null&&r.unshift(pl(e,s,l)),s=ol(e,t),s!=null&&r.push(pl(e,s,l))),e=e.return}return r}function Gn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ec(e,t,n,r,l){for(var s=t._reactName,a=[];n!==null&&n!==r;){var i=n,u=i.alternate,c=i.stateNode;if(u!==null&&u===r)break;i.tag===5&&c!==null&&(i=c,l?(u=ol(n,s),u!=null&&a.unshift(pl(n,u,i))):l||(u=ol(n,s),u!=null&&a.push(pl(n,u,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var wg=/\r\n?/g,Ng=/\u0000|\uFFFD/g;function tc(e){return(typeof e=="string"?e:""+e).replace(wg,`
`).replace(Ng,"")}function Hl(e,t,n){if(t=tc(t),tc(e)!==t&&n)throw Error(K(425))}function Ns(){}var wa=null,Na=null;function Sa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ja=typeof setTimeout=="function"?setTimeout:void 0,Sg=typeof clearTimeout=="function"?clearTimeout:void 0,nc=typeof Promise=="function"?Promise:void 0,jg=typeof queueMicrotask=="function"?queueMicrotask:typeof nc<"u"?function(e){return nc.resolve(null).then(e).catch(Cg)}:ja;function Cg(e){setTimeout(function(){throw e})}function Ro(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),ul(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);ul(t)}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function rc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Er=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Er,ml="__reactProps$"+Er,Vt="__reactContainer$"+Er,Ca="__reactEvents$"+Er,Eg="__reactListeners$"+Er,bg="__reactHandles$"+Er;function An(e){var t=e[Rt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vt]||n[Rt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=rc(e);e!==null;){if(n=e[Rt])return n;e=rc(e)}return t}e=n,n=e.parentNode}return null}function Fl(e){return e=e[Rt]||e[Vt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function Js(e){return e[ml]||null}var Ea=[],er=-1;function Sn(e){return{current:e}}function Se(e){0>er||(e.current=Ea[er],Ea[er]=null,er--)}function xe(e,t){er++,Ea[er]=e.current,e.current=t}var wn={},Ge=Sn(wn),tt=Sn(!1),Mn=wn;function mr(e,t){var n=e.type.contextTypes;if(!n)return wn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},s;for(s in n)l[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function nt(e){return e=e.childContextTypes,e!=null}function Ss(){Se(tt),Se(Ge)}function lc(e,t,n){if(Ge.current!==wn)throw Error(K(168));xe(Ge,t),xe(tt,n)}function Pf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(K(108,ch(e)||"Unknown",l));return ke({},n,r)}function js(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wn,Mn=Ge.current,xe(Ge,e),xe(tt,tt.current),!0}function sc(e,t,n){var r=e.stateNode;if(!r)throw Error(K(169));n?(e=Pf(e,t,Mn),r.__reactInternalMemoizedMergedChildContext=e,Se(tt),Se(Ge),xe(Ge,e)):Se(tt),xe(tt,n)}var zt=null,Xs=!1,Oo=!1;function Af(e){zt===null?zt=[e]:zt.push(e)}function kg(e){Xs=!0,Af(e)}function jn(){if(!Oo&&zt!==null){Oo=!0;var e=0,t=ve;try{var n=zt;for(ve=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}zt=null,Xs=!1}catch(l){throw zt!==null&&(zt=zt.slice(e+1)),tf(xi,jn),l}finally{ve=t,Oo=!1}}return null}var tr=[],nr=0,Cs=null,Es=0,ft=[],pt=0,zn=null,Dt=1,$t="";function _n(e,t){tr[nr++]=Es,tr[nr++]=Cs,Cs=e,Es=t}function Lf(e,t,n){ft[pt++]=Dt,ft[pt++]=$t,ft[pt++]=zn,zn=e;var r=Dt;e=$t;var l=32-jt(r)-1;r&=~(1<<l),n+=1;var s=32-jt(t)+l;if(30<s){var a=l-l%5;s=(r&(1<<a)-1).toString(32),r>>=a,l-=a,Dt=1<<32-jt(t)+l|n<<l|r,$t=s+e}else Dt=1<<s|n<<l|r,$t=e}function _i(e){e.return!==null&&(_n(e,1),Lf(e,1,0))}function Fi(e){for(;e===Cs;)Cs=tr[--nr],tr[nr]=null,Es=tr[--nr],tr[nr]=null;for(;e===zn;)zn=ft[--pt],ft[pt]=null,$t=ft[--pt],ft[pt]=null,Dt=ft[--pt],ft[pt]=null}var ot=null,st=null,je=!1,St=null;function Rf(e,t){var n=mt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function oc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ot=e,st=fn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ot=e,st=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=zn!==null?{id:Dt,overflow:$t}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=mt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ot=e,st=null,!0):!1;default:return!1}}function ba(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ka(e){if(je){var t=st;if(t){var n=t;if(!oc(e,t)){if(ba(e))throw Error(K(418));t=fn(n.nextSibling);var r=ot;t&&oc(e,t)?Rf(r,n):(e.flags=e.flags&-4097|2,je=!1,ot=e)}}else{if(ba(e))throw Error(K(418));e.flags=e.flags&-4097|2,je=!1,ot=e}}}function ac(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ot=e}function Gl(e){if(e!==ot)return!1;if(!je)return ac(e),je=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Sa(e.type,e.memoizedProps)),t&&(t=st)){if(ba(e))throw Of(),Error(K(418));for(;t;)Rf(e,t),t=fn(t.nextSibling)}if(ac(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){st=fn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}st=null}}else st=ot?fn(e.stateNode.nextSibling):null;return!0}function Of(){for(var e=st;e;)e=fn(e.nextSibling)}function hr(){st=ot=null,je=!1}function Pi(e){St===null?St=[e]:St.push(e)}var _g=Kt.ReactCurrentBatchConfig;function Mr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,e));var l=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var i=l.refs;a===null?delete i[s]:i[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,e))}return e}function Kl(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ic(e){var t=e._init;return t(e._payload)}function Tf(e){function t(g,p){if(e){var y=g.deletions;y===null?(g.deletions=[p],g.flags|=16):y.push(p)}}function n(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function l(g,p){return g=gn(g,p),g.index=0,g.sibling=null,g}function s(g,p,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<p?(g.flags|=2,p):y):(g.flags|=2,p)):(g.flags|=1048576,p)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,p,y,w){return p===null||p.tag!==6?(p=Uo(y,g.mode,w),p.return=g,p):(p=l(p,y),p.return=g,p)}function u(g,p,y,w){var _=y.type;return _===Yn?m(g,p,y.props.children,w,y.key):p!==null&&(p.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Xt&&ic(_)===p.type)?(w=l(p,y.props),w.ref=Mr(g,p,y),w.return=g,w):(w=cs(y.type,y.key,y.props,null,g.mode,w),w.ref=Mr(g,p,y),w.return=g,w)}function c(g,p,y,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=Bo(y,g.mode,w),p.return=g,p):(p=l(p,y.children||[]),p.return=g,p)}function m(g,p,y,w,_){return p===null||p.tag!==7?(p=Tn(y,g.mode,w,_),p.return=g,p):(p=l(p,y),p.return=g,p)}function f(g,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Uo(""+p,g.mode,y),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Il:return y=cs(p.type,p.key,p.props,null,g.mode,y),y.ref=Mr(g,null,p),y.return=g,y;case Qn:return p=Bo(p,g.mode,y),p.return=g,p;case Xt:var w=p._init;return f(g,w(p._payload),y)}if(Ur(p)||Lr(p))return p=Tn(p,g.mode,y,null),p.return=g,p;Kl(g,p)}return null}function h(g,p,y,w){var _=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return _!==null?null:i(g,p,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Il:return y.key===_?u(g,p,y,w):null;case Qn:return y.key===_?c(g,p,y,w):null;case Xt:return _=y._init,h(g,p,_(y._payload),w)}if(Ur(y)||Lr(y))return _!==null?null:m(g,p,y,w,null);Kl(g,y)}return null}function N(g,p,y,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(y)||null,i(p,g,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Il:return g=g.get(w.key===null?y:w.key)||null,u(p,g,w,_);case Qn:return g=g.get(w.key===null?y:w.key)||null,c(p,g,w,_);case Xt:var D=w._init;return N(g,p,y,D(w._payload),_)}if(Ur(w)||Lr(w))return g=g.get(y)||null,m(p,g,w,_,null);Kl(p,w)}return null}function x(g,p,y,w){for(var _=null,D=null,T=p,P=p=0,G=null;T!==null&&P<y.length;P++){T.index>P?(G=T,T=null):G=T.sibling;var U=h(g,T,y[P],w);if(U===null){T===null&&(T=G);break}e&&T&&U.alternate===null&&t(g,T),p=s(U,p,P),D===null?_=U:D.sibling=U,D=U,T=G}if(P===y.length)return n(g,T),je&&_n(g,P),_;if(T===null){for(;P<y.length;P++)T=f(g,y[P],w),T!==null&&(p=s(T,p,P),D===null?_=T:D.sibling=T,D=T);return je&&_n(g,P),_}for(T=r(g,T);P<y.length;P++)G=N(T,g,P,y[P],w),G!==null&&(e&&G.alternate!==null&&T.delete(G.key===null?P:G.key),p=s(G,p,P),D===null?_=G:D.sibling=G,D=G);return e&&T.forEach(function(V){return t(g,V)}),je&&_n(g,P),_}function C(g,p,y,w){var _=Lr(y);if(typeof _!="function")throw Error(K(150));if(y=_.call(y),y==null)throw Error(K(151));for(var D=_=null,T=p,P=p=0,G=null,U=y.next();T!==null&&!U.done;P++,U=y.next()){T.index>P?(G=T,T=null):G=T.sibling;var V=h(g,T,U.value,w);if(V===null){T===null&&(T=G);break}e&&T&&V.alternate===null&&t(g,T),p=s(V,p,P),D===null?_=V:D.sibling=V,D=V,T=G}if(U.done)return n(g,T),je&&_n(g,P),_;if(T===null){for(;!U.done;P++,U=y.next())U=f(g,U.value,w),U!==null&&(p=s(U,p,P),D===null?_=U:D.sibling=U,D=U);return je&&_n(g,P),_}for(T=r(g,T);!U.done;P++,U=y.next())U=N(T,g,P,U.value,w),U!==null&&(e&&U.alternate!==null&&T.delete(U.key===null?P:U.key),p=s(U,p,P),D===null?_=U:D.sibling=U,D=U);return e&&T.forEach(function(Z){return t(g,Z)}),je&&_n(g,P),_}function j(g,p,y,w){if(typeof y=="object"&&y!==null&&y.type===Yn&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Il:e:{for(var _=y.key,D=p;D!==null;){if(D.key===_){if(_=y.type,_===Yn){if(D.tag===7){n(g,D.sibling),p=l(D,y.props.children),p.return=g,g=p;break e}}else if(D.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Xt&&ic(_)===D.type){n(g,D.sibling),p=l(D,y.props),p.ref=Mr(g,D,y),p.return=g,g=p;break e}n(g,D);break}else t(g,D);D=D.sibling}y.type===Yn?(p=Tn(y.props.children,g.mode,w,y.key),p.return=g,g=p):(w=cs(y.type,y.key,y.props,null,g.mode,w),w.ref=Mr(g,p,y),w.return=g,g=w)}return a(g);case Qn:e:{for(D=y.key;p!==null;){if(p.key===D)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(g,p.sibling),p=l(p,y.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else t(g,p);p=p.sibling}p=Bo(y,g.mode,w),p.return=g,g=p}return a(g);case Xt:return D=y._init,j(g,p,D(y._payload),w)}if(Ur(y))return x(g,p,y,w);if(Lr(y))return C(g,p,y,w);Kl(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(g,p.sibling),p=l(p,y),p.return=g,g=p):(n(g,p),p=Uo(y,g.mode,w),p.return=g,g=p),a(g)):n(g,p)}return j}var gr=Tf(!0),If=Tf(!1),bs=Sn(null),ks=null,rr=null,Ai=null;function Li(){Ai=rr=ks=null}function Ri(e){var t=bs.current;Se(bs),e._currentValue=t}function _a(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function dr(e,t){ks=e,Ai=rr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(et=!0),e.firstContext=null)}function gt(e){var t=e._currentValue;if(Ai!==e)if(e={context:e,memoizedValue:t,next:null},rr===null){if(ks===null)throw Error(K(308));rr=e,ks.dependencies={lanes:0,firstContext:e}}else rr=rr.next=e;return t}var Ln=null;function Oi(e){Ln===null?Ln=[e]:Ln.push(e)}function Mf(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,Oi(t)):(n.next=l.next,l.next=n),t.interleaved=n,Ht(e,r)}function Ht(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Zt=!1;function Ti(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ut(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,Ht(e,n)}return l=r.interleaved,l===null?(t.next=t,Oi(r)):(t.next=l.next,l.next=t),r.interleaved=t,Ht(e,n)}function ls(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,wi(e,n)}}function uc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?l=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?l=s=t:s=s.next=t}else l=s=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function _s(e,t,n,r){var l=e.updateQueue;Zt=!1;var s=l.firstBaseUpdate,a=l.lastBaseUpdate,i=l.shared.pending;if(i!==null){l.shared.pending=null;var u=i,c=u.next;u.next=null,a===null?s=c:a.next=c,a=u;var m=e.alternate;m!==null&&(m=m.updateQueue,i=m.lastBaseUpdate,i!==a&&(i===null?m.firstBaseUpdate=c:i.next=c,m.lastBaseUpdate=u))}if(s!==null){var f=l.baseState;a=0,m=c=u=null,i=s;do{var h=i.lane,N=i.eventTime;if((r&h)===h){m!==null&&(m=m.next={eventTime:N,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var x=e,C=i;switch(h=t,N=n,C.tag){case 1:if(x=C.payload,typeof x=="function"){f=x.call(N,f,h);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=C.payload,h=typeof x=="function"?x.call(N,f,h):x,h==null)break e;f=ke({},f,h);break e;case 2:Zt=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,h=l.effects,h===null?l.effects=[i]:h.push(i))}else N={eventTime:N,lane:h,tag:i.tag,payload:i.payload,callback:i.callback,next:null},m===null?(c=m=N,u=f):m=m.next=N,a|=h;if(i=i.next,i===null){if(i=l.shared.pending,i===null)break;h=i,i=h.next,h.next=null,l.lastBaseUpdate=h,l.shared.pending=null}}while(!0);if(m===null&&(u=f),l.baseState=u,l.firstBaseUpdate=c,l.lastBaseUpdate=m,t=l.shared.interleaved,t!==null){l=t;do a|=l.lane,l=l.next;while(l!==t)}else s===null&&(l.shared.lanes=0);$n|=a,e.lanes=a,e.memoizedState=f}}function cc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(K(191,l));l.call(r)}}}var Pl={},Tt=Sn(Pl),hl=Sn(Pl),gl=Sn(Pl);function Rn(e){if(e===Pl)throw Error(K(174));return e}function Ii(e,t){switch(xe(gl,t),xe(hl,e),xe(Tt,Pl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ia(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ia(t,e)}Se(Tt),xe(Tt,t)}function vr(){Se(Tt),Se(hl),Se(gl)}function Df(e){Rn(gl.current);var t=Rn(Tt.current),n=ia(t,e.type);t!==n&&(xe(hl,e),xe(Tt,n))}function Mi(e){hl.current===e&&(Se(Tt),Se(hl))}var Ce=Sn(0);function Fs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var To=[];function zi(){for(var e=0;e<To.length;e++)To[e]._workInProgressVersionPrimary=null;To.length=0}var ss=Kt.ReactCurrentDispatcher,Io=Kt.ReactCurrentBatchConfig,Dn=0,Ee=null,Le=null,Ie=null,Ps=!1,qr=!1,vl=0,Fg=0;function Be(){throw Error(K(321))}function Di(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bt(e[n],t[n]))return!1;return!0}function $i(e,t,n,r,l,s){if(Dn=s,Ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ss.current=e===null||e.memoizedState===null?Rg:Og,e=n(r,l),qr){s=0;do{if(qr=!1,vl=0,25<=s)throw Error(K(301));s+=1,Ie=Le=null,t.updateQueue=null,ss.current=Tg,e=n(r,l)}while(qr)}if(ss.current=As,t=Le!==null&&Le.next!==null,Dn=0,Ie=Le=Ee=null,Ps=!1,t)throw Error(K(300));return e}function Ui(){var e=vl!==0;return vl=0,e}function Lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?Ee.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function vt(){if(Le===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=Ie===null?Ee.memoizedState:Ie.next;if(t!==null)Ie=t,Le=e;else{if(e===null)throw Error(K(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Ie===null?Ee.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function yl(e,t){return typeof t=="function"?t(e):t}function Mo(e){var t=vt(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=Le,l=r.baseQueue,s=n.pending;if(s!==null){if(l!==null){var a=l.next;l.next=s.next,s.next=a}r.baseQueue=l=s,n.pending=null}if(l!==null){s=l.next,r=r.baseState;var i=a=null,u=null,c=s;do{var m=c.lane;if((Dn&m)===m)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:m,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(i=u=f,a=r):u=u.next=f,Ee.lanes|=m,$n|=m}c=c.next}while(c!==null&&c!==s);u===null?a=r:u.next=i,bt(r,t.memoizedState)||(et=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do s=l.lane,Ee.lanes|=s,$n|=s,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zo(e){var t=vt(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,s=t.memoizedState;if(l!==null){n.pending=null;var a=l=l.next;do s=e(s,a.action),a=a.next;while(a!==l);bt(s,t.memoizedState)||(et=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function $f(){}function Uf(e,t){var n=Ee,r=vt(),l=t(),s=!bt(r.memoizedState,l);if(s&&(r.memoizedState=l,et=!0),r=r.queue,Bi(Vf.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ie!==null&&Ie.memoizedState.tag&1){if(n.flags|=2048,xl(9,Wf.bind(null,n,r,l,t),void 0,null),Me===null)throw Error(K(349));Dn&30||Bf(n,t,l)}return l}function Bf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Wf(e,t,n,r){t.value=n,t.getSnapshot=r,Hf(t)&&Gf(e)}function Vf(e,t,n){return n(function(){Hf(t)&&Gf(e)})}function Hf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bt(e,n)}catch{return!0}}function Gf(e){var t=Ht(e,1);t!==null&&Ct(t,e,1,-1)}function dc(e){var t=Lt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:e},t.queue=e,e=e.dispatch=Lg.bind(null,Ee,e),[t.memoizedState,e]}function xl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Kf(){return vt().memoizedState}function os(e,t,n,r){var l=Lt();Ee.flags|=e,l.memoizedState=xl(1|t,n,void 0,r===void 0?null:r)}function Zs(e,t,n,r){var l=vt();r=r===void 0?null:r;var s=void 0;if(Le!==null){var a=Le.memoizedState;if(s=a.destroy,r!==null&&Di(r,a.deps)){l.memoizedState=xl(t,n,s,r);return}}Ee.flags|=e,l.memoizedState=xl(1|t,n,s,r)}function fc(e,t){return os(8390656,8,e,t)}function Bi(e,t){return Zs(2048,8,e,t)}function Qf(e,t){return Zs(4,2,e,t)}function Yf(e,t){return Zs(4,4,e,t)}function qf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jf(e,t,n){return n=n!=null?n.concat([e]):null,Zs(4,4,qf.bind(null,t,e),n)}function Wi(){}function Xf(e,t){var n=vt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Di(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zf(e,t){var n=vt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Di(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ep(e,t,n){return Dn&21?(bt(n,t)||(n=lf(),Ee.lanes|=n,$n|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,et=!0),e.memoizedState=n)}function Pg(e,t){var n=ve;ve=n!==0&&4>n?n:4,e(!0);var r=Io.transition;Io.transition={};try{e(!1),t()}finally{ve=n,Io.transition=r}}function tp(){return vt().memoizedState}function Ag(e,t,n){var r=hn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},np(e))rp(t,n);else if(n=Mf(e,t,n,r),n!==null){var l=qe();Ct(n,e,r,l),lp(n,t,r)}}function Lg(e,t,n){var r=hn(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(np(e))rp(t,l);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,i=s(a,n);if(l.hasEagerState=!0,l.eagerState=i,bt(i,a)){var u=t.interleaved;u===null?(l.next=l,Oi(t)):(l.next=u.next,u.next=l),t.interleaved=l;return}}catch{}finally{}n=Mf(e,t,l,r),n!==null&&(l=qe(),Ct(n,e,r,l),lp(n,t,r))}}function np(e){var t=e.alternate;return e===Ee||t!==null&&t===Ee}function rp(e,t){qr=Ps=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,wi(e,n)}}var As={readContext:gt,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useInsertionEffect:Be,useLayoutEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useMutableSource:Be,useSyncExternalStore:Be,useId:Be,unstable_isNewReconciler:!1},Rg={readContext:gt,useCallback:function(e,t){return Lt().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:fc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,os(4194308,4,qf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return os(4194308,4,e,t)},useInsertionEffect:function(e,t){return os(4,2,e,t)},useMemo:function(e,t){var n=Lt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Lt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ag.bind(null,Ee,e),[r.memoizedState,e]},useRef:function(e){var t=Lt();return e={current:e},t.memoizedState=e},useState:dc,useDebugValue:Wi,useDeferredValue:function(e){return Lt().memoizedState=e},useTransition:function(){var e=dc(!1),t=e[0];return e=Pg.bind(null,e[1]),Lt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ee,l=Lt();if(je){if(n===void 0)throw Error(K(407));n=n()}else{if(n=t(),Me===null)throw Error(K(349));Dn&30||Bf(r,t,n)}l.memoizedState=n;var s={value:n,getSnapshot:t};return l.queue=s,fc(Vf.bind(null,r,s,e),[e]),r.flags|=2048,xl(9,Wf.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Lt(),t=Me.identifierPrefix;if(je){var n=$t,r=Dt;n=(r&~(1<<32-jt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=vl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Fg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Og={readContext:gt,useCallback:Xf,useContext:gt,useEffect:Bi,useImperativeHandle:Jf,useInsertionEffect:Qf,useLayoutEffect:Yf,useMemo:Zf,useReducer:Mo,useRef:Kf,useState:function(){return Mo(yl)},useDebugValue:Wi,useDeferredValue:function(e){var t=vt();return ep(t,Le.memoizedState,e)},useTransition:function(){var e=Mo(yl)[0],t=vt().memoizedState;return[e,t]},useMutableSource:$f,useSyncExternalStore:Uf,useId:tp,unstable_isNewReconciler:!1},Tg={readContext:gt,useCallback:Xf,useContext:gt,useEffect:Bi,useImperativeHandle:Jf,useInsertionEffect:Qf,useLayoutEffect:Yf,useMemo:Zf,useReducer:zo,useRef:Kf,useState:function(){return zo(yl)},useDebugValue:Wi,useDeferredValue:function(e){var t=vt();return Le===null?t.memoizedState=e:ep(t,Le.memoizedState,e)},useTransition:function(){var e=zo(yl)[0],t=vt().memoizedState;return[e,t]},useMutableSource:$f,useSyncExternalStore:Uf,useId:tp,unstable_isNewReconciler:!1};function xt(e,t){if(e&&e.defaultProps){t=ke({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Fa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ke({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var eo={isMounted:function(e){return(e=e._reactInternals)?Vn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qe(),l=hn(e),s=Ut(r,l);s.payload=t,n!=null&&(s.callback=n),t=pn(e,s,l),t!==null&&(Ct(t,e,l,r),ls(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qe(),l=hn(e),s=Ut(r,l);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=pn(e,s,l),t!==null&&(Ct(t,e,l,r),ls(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qe(),r=hn(e),l=Ut(n,r);l.tag=2,t!=null&&(l.callback=t),t=pn(e,l,r),t!==null&&(Ct(t,e,r,n),ls(t,e,r))}};function pc(e,t,n,r,l,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!dl(n,r)||!dl(l,s):!0}function sp(e,t,n){var r=!1,l=wn,s=t.contextType;return typeof s=="object"&&s!==null?s=gt(s):(l=nt(t)?Mn:Ge.current,r=t.contextTypes,s=(r=r!=null)?mr(e,l):wn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=eo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=s),t}function mc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&eo.enqueueReplaceState(t,t.state,null)}function Pa(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Ti(e);var s=t.contextType;typeof s=="object"&&s!==null?l.context=gt(s):(s=nt(t)?Mn:Ge.current,l.context=mr(e,s)),l.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Fa(e,t,s,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&eo.enqueueReplaceState(l,l.state,null),_s(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function yr(e,t){try{var n="",r=t;do n+=uh(r),r=r.return;while(r);var l=n}catch(s){l=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:l,digest:null}}function Do(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Aa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ig=typeof WeakMap=="function"?WeakMap:Map;function op(e,t,n){n=Ut(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Rs||(Rs=!0,Ua=r),Aa(e,t)},n}function ap(e,t,n){n=Ut(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){Aa(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Aa(e,t),typeof r!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function hc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Ig;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=qg.bind(null,e,t,n),t.then(e,e))}function gc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vc(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ut(-1,1),t.tag=2,pn(n,t,1))),n.lanes|=1),e)}var Mg=Kt.ReactCurrentOwner,et=!1;function Ye(e,t,n,r){t.child=e===null?If(t,null,n,r):gr(t,e.child,n,r)}function yc(e,t,n,r,l){n=n.render;var s=t.ref;return dr(t,l),r=$i(e,t,n,r,s,l),n=Ui(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Gt(e,t,l)):(je&&n&&_i(t),t.flags|=1,Ye(e,t,r,l),t.child)}function xc(e,t,n,r,l){if(e===null){var s=n.type;return typeof s=="function"&&!Ji(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,ip(e,t,s,r,l)):(e=cs(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&l)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:dl,n(a,r)&&e.ref===t.ref)return Gt(e,t,l)}return t.flags|=1,e=gn(s,r),e.ref=t.ref,e.return=t,t.child=e}function ip(e,t,n,r,l){if(e!==null){var s=e.memoizedProps;if(dl(s,r)&&e.ref===t.ref)if(et=!1,t.pendingProps=r=s,(e.lanes&l)!==0)e.flags&131072&&(et=!0);else return t.lanes=e.lanes,Gt(e,t,l)}return La(e,t,n,r,l)}function up(e,t,n){var r=t.pendingProps,l=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(sr,lt),lt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xe(sr,lt),lt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,xe(sr,lt),lt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,xe(sr,lt),lt|=r;return Ye(e,t,l,n),t.child}function cp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function La(e,t,n,r,l){var s=nt(n)?Mn:Ge.current;return s=mr(t,s),dr(t,l),n=$i(e,t,n,r,s,l),r=Ui(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Gt(e,t,l)):(je&&r&&_i(t),t.flags|=1,Ye(e,t,n,l),t.child)}function wc(e,t,n,r,l){if(nt(n)){var s=!0;js(t)}else s=!1;if(dr(t,l),t.stateNode===null)as(e,t),sp(t,n,r),Pa(t,n,r,l),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=gt(c):(c=nt(n)?Mn:Ge.current,c=mr(t,c));var m=n.getDerivedStateFromProps,f=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||u!==c)&&mc(t,a,r,c),Zt=!1;var h=t.memoizedState;a.state=h,_s(t,r,a,l),u=t.memoizedState,i!==r||h!==u||tt.current||Zt?(typeof m=="function"&&(Fa(t,n,m,r),u=t.memoizedState),(i=Zt||pc(t,n,i,r,h,u,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,zf(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:xt(t.type,i),a.props=c,f=t.pendingProps,h=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=gt(u):(u=nt(n)?Mn:Ge.current,u=mr(t,u));var N=n.getDerivedStateFromProps;(m=typeof N=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||h!==u)&&mc(t,a,r,u),Zt=!1,h=t.memoizedState,a.state=h,_s(t,r,a,l);var x=t.memoizedState;i!==f||h!==x||tt.current||Zt?(typeof N=="function"&&(Fa(t,n,N,r),x=t.memoizedState),(c=Zt||pc(t,n,c,r,h,x,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),a.props=r,a.state=x,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ra(e,t,n,r,s,l)}function Ra(e,t,n,r,l,s){cp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return l&&sc(t,n,!1),Gt(e,t,s);r=t.stateNode,Mg.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=gr(t,e.child,null,s),t.child=gr(t,null,i,s)):Ye(e,t,i,s),t.memoizedState=r.state,l&&sc(t,n,!0),t.child}function dp(e){var t=e.stateNode;t.pendingContext?lc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&lc(e,t.context,!1),Ii(e,t.containerInfo)}function Nc(e,t,n,r,l){return hr(),Pi(l),t.flags|=256,Ye(e,t,n,r),t.child}var Oa={dehydrated:null,treeContext:null,retryLane:0};function Ta(e){return{baseLanes:e,cachePool:null,transitions:null}}function fp(e,t,n){var r=t.pendingProps,l=Ce.current,s=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(l&2)!==0),i?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),xe(Ce,l&1),e===null)return ka(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=ro(a,r,0,null),e=Tn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ta(n),t.memoizedState=Oa,e):Vi(t,a));if(l=e.memoizedState,l!==null&&(i=l.dehydrated,i!==null))return zg(e,t,a,r,i,l,n);if(s){s=r.fallback,a=t.mode,l=e.child,i=l.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=gn(l,u),r.subtreeFlags=l.subtreeFlags&14680064),i!==null?s=gn(i,s):(s=Tn(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?Ta(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=Oa,r}return s=e.child,e=s.sibling,r=gn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Vi(e,t){return t=ro({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ql(e,t,n,r){return r!==null&&Pi(r),gr(t,e.child,null,n),e=Vi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zg(e,t,n,r,l,s,a){if(n)return t.flags&256?(t.flags&=-257,r=Do(Error(K(422))),Ql(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,l=t.mode,r=ro({mode:"visible",children:r.children},l,0,null),s=Tn(s,l,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&gr(t,e.child,null,a),t.child.memoizedState=Ta(a),t.memoizedState=Oa,s);if(!(t.mode&1))return Ql(e,t,a,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var i=r.dgst;return r=i,s=Error(K(419)),r=Do(s,r,void 0),Ql(e,t,a,r)}if(i=(a&e.childLanes)!==0,et||i){if(r=Me,r!==null){switch(a&-a){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|a)?0:l,l!==0&&l!==s.retryLane&&(s.retryLane=l,Ht(e,l),Ct(r,e,l,-1))}return qi(),r=Do(Error(K(421))),Ql(e,t,a,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Jg.bind(null,e),l._reactRetry=t,null):(e=s.treeContext,st=fn(l.nextSibling),ot=t,je=!0,St=null,e!==null&&(ft[pt++]=Dt,ft[pt++]=$t,ft[pt++]=zn,Dt=e.id,$t=e.overflow,zn=t),t=Vi(t,r.children),t.flags|=4096,t)}function Sc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),_a(e.return,t,n)}function $o(e,t,n,r,l){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=l)}function pp(e,t,n){var r=t.pendingProps,l=r.revealOrder,s=r.tail;if(Ye(e,t,r.children,n),r=Ce.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sc(e,n,t);else if(e.tag===19)Sc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xe(Ce,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Fs(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),$o(t,!1,l,n,s);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Fs(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}$o(t,!0,n,null,s);break;case"together":$o(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function as(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$n|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,n=gn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Dg(e,t,n){switch(t.tag){case 3:dp(t),hr();break;case 5:Df(t);break;case 1:nt(t.type)&&js(t);break;case 4:Ii(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;xe(bs,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(xe(Ce,Ce.current&1),t.flags|=128,null):n&t.child.childLanes?fp(e,t,n):(xe(Ce,Ce.current&1),e=Gt(e,t,n),e!==null?e.sibling:null);xe(Ce,Ce.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return pp(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),xe(Ce,Ce.current),r)break;return null;case 22:case 23:return t.lanes=0,up(e,t,n)}return Gt(e,t,n)}var mp,Ia,hp,gp;mp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ia=function(){};hp=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,Rn(Tt.current);var s=null;switch(n){case"input":l=la(e,l),r=la(e,r),s=[];break;case"select":l=ke({},l,{value:void 0}),r=ke({},r,{value:void 0}),s=[];break;case"textarea":l=aa(e,l),r=aa(e,r),s=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ns)}ua(n,r);var a;n=null;for(c in l)if(!r.hasOwnProperty(c)&&l.hasOwnProperty(c)&&l[c]!=null)if(c==="style"){var i=l[c];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ll.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(i=l!=null?l[c]:void 0,r.hasOwnProperty(c)&&u!==i&&(u!=null||i!=null))if(c==="style")if(i){for(a in i)!i.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&i[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,i=i?i.__html:void 0,u!=null&&i!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ll.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ne("scroll",e),s||i===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};gp=function(e,t,n,r){n!==r&&(t.flags|=4)};function zr(e,t){if(!je)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function We(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $g(e,t,n){var r=t.pendingProps;switch(Fi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(t),null;case 1:return nt(t.type)&&Ss(),We(t),null;case 3:return r=t.stateNode,vr(),Se(tt),Se(Ge),zi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Gl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,St!==null&&(Va(St),St=null))),Ia(e,t),We(t),null;case 5:Mi(t);var l=Rn(gl.current);if(n=t.type,e!==null&&t.stateNode!=null)hp(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(K(166));return We(t),null}if(e=Rn(Tt.current),Gl(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Rt]=t,r[ml]=s,e=(t.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(l=0;l<Wr.length;l++)Ne(Wr[l],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":Au(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":Ru(r,s),Ne("invalid",r)}ua(n,s),l=null;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];a==="children"?typeof i=="string"?r.textContent!==i&&(s.suppressHydrationWarning!==!0&&Hl(r.textContent,i,e),l=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(s.suppressHydrationWarning!==!0&&Hl(r.textContent,i,e),l=["children",""+i]):ll.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Ml(r),Lu(r,s,!0);break;case"textarea":Ml(r),Ou(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ns)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Wd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Rt]=t,e[ml]=r,mp(e,t,!1,!1),t.stateNode=e;e:{switch(a=ca(n,r),n){case"dialog":Ne("cancel",e),Ne("close",e),l=r;break;case"iframe":case"object":case"embed":Ne("load",e),l=r;break;case"video":case"audio":for(l=0;l<Wr.length;l++)Ne(Wr[l],e);l=r;break;case"source":Ne("error",e),l=r;break;case"img":case"image":case"link":Ne("error",e),Ne("load",e),l=r;break;case"details":Ne("toggle",e),l=r;break;case"input":Au(e,r),l=la(e,r),Ne("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=ke({},r,{value:void 0}),Ne("invalid",e);break;case"textarea":Ru(e,r),l=aa(e,r),Ne("invalid",e);break;default:l=r}ua(n,l),i=l;for(s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="style"?Gd(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Vd(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&sl(e,u):typeof u=="number"&&sl(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ll.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ne("scroll",e):u!=null&&mi(e,s,u,a))}switch(n){case"input":Ml(e),Lu(e,r,!1);break;case"textarea":Ml(e),Ou(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ar(e,!!r.multiple,s,!1):r.defaultValue!=null&&ar(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Ns)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return We(t),null;case 6:if(e&&t.stateNode!=null)gp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(K(166));if(n=Rn(gl.current),Rn(Tt.current),Gl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Rt]=t,(s=r.nodeValue!==n)&&(e=ot,e!==null))switch(e.tag){case 3:Hl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hl(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rt]=t,t.stateNode=r}return We(t),null;case 13:if(Se(Ce),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(je&&st!==null&&t.mode&1&&!(t.flags&128))Of(),hr(),t.flags|=98560,s=!1;else if(s=Gl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(K(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Rt]=t}else hr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;We(t),s=!1}else St!==null&&(Va(St),St=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ce.current&1?Re===0&&(Re=3):qi())),t.updateQueue!==null&&(t.flags|=4),We(t),null);case 4:return vr(),Ia(e,t),e===null&&fl(t.stateNode.containerInfo),We(t),null;case 10:return Ri(t.type._context),We(t),null;case 17:return nt(t.type)&&Ss(),We(t),null;case 19:if(Se(Ce),s=t.memoizedState,s===null)return We(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)zr(s,!1);else{if(Re!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Fs(e),a!==null){for(t.flags|=128,zr(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xe(Ce,Ce.current&1|2),t.child}e=e.sibling}s.tail!==null&&Fe()>xr&&(t.flags|=128,r=!0,zr(s,!1),t.lanes=4194304)}else{if(!r)if(e=Fs(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),zr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!je)return We(t),null}else 2*Fe()-s.renderingStartTime>xr&&n!==1073741824&&(t.flags|=128,r=!0,zr(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Fe(),t.sibling=null,n=Ce.current,xe(Ce,r?n&1|2:n&1),t):(We(t),null);case 22:case 23:return Yi(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?lt&1073741824&&(We(t),t.subtreeFlags&6&&(t.flags|=8192)):We(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function Ug(e,t){switch(Fi(t),t.tag){case 1:return nt(t.type)&&Ss(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vr(),Se(tt),Se(Ge),zi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Mi(t),null;case 13:if(Se(Ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));hr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Se(Ce),null;case 4:return vr(),null;case 10:return Ri(t.type._context),null;case 22:case 23:return Yi(),null;case 24:return null;default:return null}}var Yl=!1,He=!1,Bg=typeof WeakSet=="function"?WeakSet:Set,te=null;function lr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_e(e,t,r)}else n.current=null}function Ma(e,t,n){try{n()}catch(r){_e(e,t,r)}}var jc=!1;function Wg(e,t){if(wa=ys,e=Nf(),ki(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,i=-1,u=-1,c=0,m=0,f=e,h=null;t:for(;;){for(var N;f!==n||l!==0&&f.nodeType!==3||(i=a+l),f!==s||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(N=f.firstChild)!==null;)h=f,f=N;for(;;){if(f===e)break t;if(h===n&&++c===l&&(i=a),h===s&&++m===r&&(u=a),(N=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=N}n=i===-1||u===-1?null:{start:i,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Na={focusedElem:e,selectionRange:n},ys=!1,te=t;te!==null;)if(t=te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,te=e;else for(;te!==null;){t=te;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var C=x.memoizedProps,j=x.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?C:xt(t.type,C),j);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(w){_e(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,te=e;break}te=t.return}return x=jc,jc=!1,x}function Jr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var s=l.destroy;l.destroy=void 0,s!==void 0&&Ma(t,n,s)}l=l.next}while(l!==r)}}function to(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function za(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function vp(e){var t=e.alternate;t!==null&&(e.alternate=null,vp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rt],delete t[ml],delete t[Ca],delete t[Eg],delete t[bg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yp(e){return e.tag===5||e.tag===3||e.tag===4}function Cc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Da(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ns));else if(r!==4&&(e=e.child,e!==null))for(Da(e,t,n),e=e.sibling;e!==null;)Da(e,t,n),e=e.sibling}function $a(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for($a(e,t,n),e=e.sibling;e!==null;)$a(e,t,n),e=e.sibling}var De=null,Nt=!1;function Jt(e,t,n){for(n=n.child;n!==null;)xp(e,t,n),n=n.sibling}function xp(e,t,n){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Ks,n)}catch{}switch(n.tag){case 5:He||lr(n,t);case 6:var r=De,l=Nt;De=null,Jt(e,t,n),De=r,Nt=l,De!==null&&(Nt?(e=De,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):De.removeChild(n.stateNode));break;case 18:De!==null&&(Nt?(e=De,n=n.stateNode,e.nodeType===8?Ro(e.parentNode,n):e.nodeType===1&&Ro(e,n),ul(e)):Ro(De,n.stateNode));break;case 4:r=De,l=Nt,De=n.stateNode.containerInfo,Nt=!0,Jt(e,t,n),De=r,Nt=l;break;case 0:case 11:case 14:case 15:if(!He&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var s=l,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Ma(n,t,a),l=l.next}while(l!==r)}Jt(e,t,n);break;case 1:if(!He&&(lr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){_e(n,t,i)}Jt(e,t,n);break;case 21:Jt(e,t,n);break;case 22:n.mode&1?(He=(r=He)||n.memoizedState!==null,Jt(e,t,n),He=r):Jt(e,t,n);break;default:Jt(e,t,n)}}function Ec(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Bg),t.forEach(function(r){var l=Xg.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function yt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var s=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:De=i.stateNode,Nt=!1;break e;case 3:De=i.stateNode.containerInfo,Nt=!0;break e;case 4:De=i.stateNode.containerInfo,Nt=!0;break e}i=i.return}if(De===null)throw Error(K(160));xp(s,a,l),De=null,Nt=!1;var u=l.alternate;u!==null&&(u.return=null),l.return=null}catch(c){_e(l,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wp(t,e),t=t.sibling}function wp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yt(t,e),At(e),r&4){try{Jr(3,e,e.return),to(3,e)}catch(C){_e(e,e.return,C)}try{Jr(5,e,e.return)}catch(C){_e(e,e.return,C)}}break;case 1:yt(t,e),At(e),r&512&&n!==null&&lr(n,n.return);break;case 5:if(yt(t,e),At(e),r&512&&n!==null&&lr(n,n.return),e.flags&32){var l=e.stateNode;try{sl(l,"")}catch(C){_e(e,e.return,C)}}if(r&4&&(l=e.stateNode,l!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,i=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{i==="input"&&s.type==="radio"&&s.name!=null&&Ud(l,s),ca(i,a);var c=ca(i,s);for(a=0;a<u.length;a+=2){var m=u[a],f=u[a+1];m==="style"?Gd(l,f):m==="dangerouslySetInnerHTML"?Vd(l,f):m==="children"?sl(l,f):mi(l,m,f,c)}switch(i){case"input":sa(l,s);break;case"textarea":Bd(l,s);break;case"select":var h=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!s.multiple;var N=s.value;N!=null?ar(l,!!s.multiple,N,!1):h!==!!s.multiple&&(s.defaultValue!=null?ar(l,!!s.multiple,s.defaultValue,!0):ar(l,!!s.multiple,s.multiple?[]:"",!1))}l[ml]=s}catch(C){_e(e,e.return,C)}}break;case 6:if(yt(t,e),At(e),r&4){if(e.stateNode===null)throw Error(K(162));l=e.stateNode,s=e.memoizedProps;try{l.nodeValue=s}catch(C){_e(e,e.return,C)}}break;case 3:if(yt(t,e),At(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ul(t.containerInfo)}catch(C){_e(e,e.return,C)}break;case 4:yt(t,e),At(e);break;case 13:yt(t,e),At(e),l=e.child,l.flags&8192&&(s=l.memoizedState!==null,l.stateNode.isHidden=s,!s||l.alternate!==null&&l.alternate.memoizedState!==null||(Ki=Fe())),r&4&&Ec(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(He=(c=He)||m,yt(t,e),He=c):yt(t,e),At(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!m&&e.mode&1)for(te=e,m=e.child;m!==null;){for(f=te=m;te!==null;){switch(h=te,N=h.child,h.tag){case 0:case 11:case 14:case 15:Jr(4,h,h.return);break;case 1:lr(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(C){_e(r,n,C)}}break;case 5:lr(h,h.return);break;case 22:if(h.memoizedState!==null){kc(f);continue}}N!==null?(N.return=h,te=N):kc(f)}m=m.sibling}e:for(m=null,f=e;;){if(f.tag===5){if(m===null){m=f;try{l=f.stateNode,c?(s=l.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(i=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,i.style.display=Hd("display",a))}catch(C){_e(e,e.return,C)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(C){_e(e,e.return,C)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yt(t,e),At(e),r&4&&Ec(e);break;case 21:break;default:yt(t,e),At(e)}}function At(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(yp(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(sl(l,""),r.flags&=-33);var s=Cc(e);$a(e,s,l);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Cc(e);Da(e,i,a);break;default:throw Error(K(161))}}catch(u){_e(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vg(e,t,n){te=e,Np(e)}function Np(e,t,n){for(var r=(e.mode&1)!==0;te!==null;){var l=te,s=l.child;if(l.tag===22&&r){var a=l.memoizedState!==null||Yl;if(!a){var i=l.alternate,u=i!==null&&i.memoizedState!==null||He;i=Yl;var c=He;if(Yl=a,(He=u)&&!c)for(te=l;te!==null;)a=te,u=a.child,a.tag===22&&a.memoizedState!==null?_c(l):u!==null?(u.return=a,te=u):_c(l);for(;s!==null;)te=s,Np(s),s=s.sibling;te=l,Yl=i,He=c}bc(e)}else l.subtreeFlags&8772&&s!==null?(s.return=l,te=s):bc(e)}}function bc(e){for(;te!==null;){var t=te;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:He||to(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!He)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:xt(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&cc(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}cc(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var m=c.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&ul(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}He||t.flags&512&&za(t)}catch(h){_e(t,t.return,h)}}if(t===e){te=null;break}if(n=t.sibling,n!==null){n.return=t.return,te=n;break}te=t.return}}function kc(e){for(;te!==null;){var t=te;if(t===e){te=null;break}var n=t.sibling;if(n!==null){n.return=t.return,te=n;break}te=t.return}}function _c(e){for(;te!==null;){var t=te;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{to(4,t)}catch(u){_e(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(u){_e(t,l,u)}}var s=t.return;try{za(t)}catch(u){_e(t,s,u)}break;case 5:var a=t.return;try{za(t)}catch(u){_e(t,a,u)}}}catch(u){_e(t,t.return,u)}if(t===e){te=null;break}var i=t.sibling;if(i!==null){i.return=t.return,te=i;break}te=t.return}}var Hg=Math.ceil,Ls=Kt.ReactCurrentDispatcher,Hi=Kt.ReactCurrentOwner,ht=Kt.ReactCurrentBatchConfig,me=0,Me=null,Ae=null,$e=0,lt=0,sr=Sn(0),Re=0,wl=null,$n=0,no=0,Gi=0,Xr=null,Ze=null,Ki=0,xr=1/0,Mt=null,Rs=!1,Ua=null,mn=null,ql=!1,rn=null,Os=0,Zr=0,Ba=null,is=-1,us=0;function qe(){return me&6?Fe():is!==-1?is:is=Fe()}function hn(e){return e.mode&1?me&2&&$e!==0?$e&-$e:_g.transition!==null?(us===0&&(us=lf()),us):(e=ve,e!==0||(e=window.event,e=e===void 0?16:ff(e.type)),e):1}function Ct(e,t,n,r){if(50<Zr)throw Zr=0,Ba=null,Error(K(185));kl(e,n,r),(!(me&2)||e!==Me)&&(e===Me&&(!(me&2)&&(no|=n),Re===4&&tn(e,$e)),rt(e,r),n===1&&me===0&&!(t.mode&1)&&(xr=Fe()+500,Xs&&jn()))}function rt(e,t){var n=e.callbackNode;_h(e,t);var r=vs(e,e===Me?$e:0);if(r===0)n!==null&&Mu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Mu(n),t===1)e.tag===0?kg(Fc.bind(null,e)):Af(Fc.bind(null,e)),jg(function(){!(me&6)&&jn()}),n=null;else{switch(sf(r)){case 1:n=xi;break;case 4:n=nf;break;case 16:n=gs;break;case 536870912:n=rf;break;default:n=gs}n=Fp(n,Sp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Sp(e,t){if(is=-1,us=0,me&6)throw Error(K(327));var n=e.callbackNode;if(fr()&&e.callbackNode!==n)return null;var r=vs(e,e===Me?$e:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ts(e,r);else{t=r;var l=me;me|=2;var s=Cp();(Me!==e||$e!==t)&&(Mt=null,xr=Fe()+500,On(e,t));do try{Qg();break}catch(i){jp(e,i)}while(!0);Li(),Ls.current=s,me=l,Ae!==null?t=0:(Me=null,$e=0,t=Re)}if(t!==0){if(t===2&&(l=ha(e),l!==0&&(r=l,t=Wa(e,l))),t===1)throw n=wl,On(e,0),tn(e,r),rt(e,Fe()),n;if(t===6)tn(e,r);else{if(l=e.current.alternate,!(r&30)&&!Gg(l)&&(t=Ts(e,r),t===2&&(s=ha(e),s!==0&&(r=s,t=Wa(e,s))),t===1))throw n=wl,On(e,0),tn(e,r),rt(e,Fe()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(K(345));case 2:Fn(e,Ze,Mt);break;case 3:if(tn(e,r),(r&130023424)===r&&(t=Ki+500-Fe(),10<t)){if(vs(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){qe(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=ja(Fn.bind(null,e,Ze,Mt),t);break}Fn(e,Ze,Mt);break;case 4:if(tn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var a=31-jt(r);s=1<<a,a=t[a],a>l&&(l=a),r&=~s}if(r=l,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hg(r/1960))-r,10<r){e.timeoutHandle=ja(Fn.bind(null,e,Ze,Mt),r);break}Fn(e,Ze,Mt);break;case 5:Fn(e,Ze,Mt);break;default:throw Error(K(329))}}}return rt(e,Fe()),e.callbackNode===n?Sp.bind(null,e):null}function Wa(e,t){var n=Xr;return e.current.memoizedState.isDehydrated&&(On(e,t).flags|=256),e=Ts(e,t),e!==2&&(t=Ze,Ze=n,t!==null&&Va(t)),e}function Va(e){Ze===null?Ze=e:Ze.push.apply(Ze,e)}function Gg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],s=l.getSnapshot;l=l.value;try{if(!bt(s(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function tn(e,t){for(t&=~Gi,t&=~no,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-jt(t),r=1<<n;e[n]=-1,t&=~r}}function Fc(e){if(me&6)throw Error(K(327));fr();var t=vs(e,0);if(!(t&1))return rt(e,Fe()),null;var n=Ts(e,t);if(e.tag!==0&&n===2){var r=ha(e);r!==0&&(t=r,n=Wa(e,r))}if(n===1)throw n=wl,On(e,0),tn(e,t),rt(e,Fe()),n;if(n===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fn(e,Ze,Mt),rt(e,Fe()),null}function Qi(e,t){var n=me;me|=1;try{return e(t)}finally{me=n,me===0&&(xr=Fe()+500,Xs&&jn())}}function Un(e){rn!==null&&rn.tag===0&&!(me&6)&&fr();var t=me;me|=1;var n=ht.transition,r=ve;try{if(ht.transition=null,ve=1,e)return e()}finally{ve=r,ht.transition=n,me=t,!(me&6)&&jn()}}function Yi(){lt=sr.current,Se(sr)}function On(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Sg(n)),Ae!==null)for(n=Ae.return;n!==null;){var r=n;switch(Fi(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ss();break;case 3:vr(),Se(tt),Se(Ge),zi();break;case 5:Mi(r);break;case 4:vr();break;case 13:Se(Ce);break;case 19:Se(Ce);break;case 10:Ri(r.type._context);break;case 22:case 23:Yi()}n=n.return}if(Me=e,Ae=e=gn(e.current,null),$e=lt=t,Re=0,wl=null,Gi=no=$n=0,Ze=Xr=null,Ln!==null){for(t=0;t<Ln.length;t++)if(n=Ln[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=l,r.next=a}n.pending=r}Ln=null}return e}function jp(e,t){do{var n=Ae;try{if(Li(),ss.current=As,Ps){for(var r=Ee.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Ps=!1}if(Dn=0,Ie=Le=Ee=null,qr=!1,vl=0,Hi.current=null,n===null||n.return===null){Re=1,wl=t,Ae=null;break}e:{var s=e,a=n.return,i=n,u=t;if(t=$e,i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,m=i,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var h=m.alternate;h?(m.updateQueue=h.updateQueue,m.memoizedState=h.memoizedState,m.lanes=h.lanes):(m.updateQueue=null,m.memoizedState=null)}var N=gc(a);if(N!==null){N.flags&=-257,vc(N,a,i,s,t),N.mode&1&&hc(s,c,t),t=N,u=c;var x=t.updateQueue;if(x===null){var C=new Set;C.add(u),t.updateQueue=C}else x.add(u);break e}else{if(!(t&1)){hc(s,c,t),qi();break e}u=Error(K(426))}}else if(je&&i.mode&1){var j=gc(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),vc(j,a,i,s,t),Pi(yr(u,i));break e}}s=u=yr(u,i),Re!==4&&(Re=2),Xr===null?Xr=[s]:Xr.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=op(s,u,t);uc(s,g);break e;case 1:i=u;var p=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(mn===null||!mn.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=ap(s,i,t);uc(s,w);break e}}s=s.return}while(s!==null)}bp(n)}catch(_){t=_,Ae===n&&n!==null&&(Ae=n=n.return);continue}break}while(!0)}function Cp(){var e=Ls.current;return Ls.current=As,e===null?As:e}function qi(){(Re===0||Re===3||Re===2)&&(Re=4),Me===null||!($n&268435455)&&!(no&268435455)||tn(Me,$e)}function Ts(e,t){var n=me;me|=2;var r=Cp();(Me!==e||$e!==t)&&(Mt=null,On(e,t));do try{Kg();break}catch(l){jp(e,l)}while(!0);if(Li(),me=n,Ls.current=r,Ae!==null)throw Error(K(261));return Me=null,$e=0,Re}function Kg(){for(;Ae!==null;)Ep(Ae)}function Qg(){for(;Ae!==null&&!xh();)Ep(Ae)}function Ep(e){var t=_p(e.alternate,e,lt);e.memoizedProps=e.pendingProps,t===null?bp(e):Ae=t,Hi.current=null}function bp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ug(n,t),n!==null){n.flags&=32767,Ae=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Re=6,Ae=null;return}}else if(n=$g(n,t,lt),n!==null){Ae=n;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);Re===0&&(Re=5)}function Fn(e,t,n){var r=ve,l=ht.transition;try{ht.transition=null,ve=1,Yg(e,t,n,r)}finally{ht.transition=l,ve=r}return null}function Yg(e,t,n,r){do fr();while(rn!==null);if(me&6)throw Error(K(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Fh(e,s),e===Me&&(Ae=Me=null,$e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ql||(ql=!0,Fp(gs,function(){return fr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ht.transition,ht.transition=null;var a=ve;ve=1;var i=me;me|=4,Hi.current=null,Wg(e,n),wp(n,e),hg(Na),ys=!!wa,Na=wa=null,e.current=n,Vg(n),wh(),me=i,ve=a,ht.transition=s}else e.current=n;if(ql&&(ql=!1,rn=e,Os=l),s=e.pendingLanes,s===0&&(mn=null),jh(n.stateNode),rt(e,Fe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(Rs)throw Rs=!1,e=Ua,Ua=null,e;return Os&1&&e.tag!==0&&fr(),s=e.pendingLanes,s&1?e===Ba?Zr++:(Zr=0,Ba=e):Zr=0,jn(),null}function fr(){if(rn!==null){var e=sf(Os),t=ht.transition,n=ve;try{if(ht.transition=null,ve=16>e?16:e,rn===null)var r=!1;else{if(e=rn,rn=null,Os=0,me&6)throw Error(K(331));var l=me;for(me|=4,te=e.current;te!==null;){var s=te,a=s.child;if(te.flags&16){var i=s.deletions;if(i!==null){for(var u=0;u<i.length;u++){var c=i[u];for(te=c;te!==null;){var m=te;switch(m.tag){case 0:case 11:case 15:Jr(8,m,s)}var f=m.child;if(f!==null)f.return=m,te=f;else for(;te!==null;){m=te;var h=m.sibling,N=m.return;if(vp(m),m===c){te=null;break}if(h!==null){h.return=N,te=h;break}te=N}}}var x=s.alternate;if(x!==null){var C=x.child;if(C!==null){x.child=null;do{var j=C.sibling;C.sibling=null,C=j}while(C!==null)}}te=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,te=a;else e:for(;te!==null;){if(s=te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Jr(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,te=g;break e}te=s.return}}var p=e.current;for(te=p;te!==null;){a=te;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,te=y;else e:for(a=p;te!==null;){if(i=te,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:to(9,i)}}catch(_){_e(i,i.return,_)}if(i===a){te=null;break e}var w=i.sibling;if(w!==null){w.return=i.return,te=w;break e}te=i.return}}if(me=l,jn(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Ks,e)}catch{}r=!0}return r}finally{ve=n,ht.transition=t}}return!1}function Pc(e,t,n){t=yr(n,t),t=op(e,t,1),e=pn(e,t,1),t=qe(),e!==null&&(kl(e,1,t),rt(e,t))}function _e(e,t,n){if(e.tag===3)Pc(e,e,n);else for(;t!==null;){if(t.tag===3){Pc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mn===null||!mn.has(r))){e=yr(n,e),e=ap(t,e,1),t=pn(t,e,1),e=qe(),t!==null&&(kl(t,1,e),rt(t,e));break}}t=t.return}}function qg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=qe(),e.pingedLanes|=e.suspendedLanes&n,Me===e&&($e&n)===n&&(Re===4||Re===3&&($e&130023424)===$e&&500>Fe()-Ki?On(e,0):Gi|=n),rt(e,t)}function kp(e,t){t===0&&(e.mode&1?(t=$l,$l<<=1,!($l&130023424)&&($l=4194304)):t=1);var n=qe();e=Ht(e,t),e!==null&&(kl(e,t,n),rt(e,n))}function Jg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),kp(e,n)}function Xg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(t),kp(e,n)}var _p;_p=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||tt.current)et=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return et=!1,Dg(e,t,n);et=!!(e.flags&131072)}else et=!1,je&&t.flags&1048576&&Lf(t,Es,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;as(e,t),e=t.pendingProps;var l=mr(t,Ge.current);dr(t,n),l=$i(null,t,r,e,l,n);var s=Ui();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nt(r)?(s=!0,js(t)):s=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Ti(t),l.updater=eo,t.stateNode=l,l._reactInternals=t,Pa(t,r,e,n),t=Ra(null,t,r,!0,s,n)):(t.tag=0,je&&s&&_i(t),Ye(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(as(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=ev(r),e=xt(r,e),l){case 0:t=La(null,t,r,e,n);break e;case 1:t=wc(null,t,r,e,n);break e;case 11:t=yc(null,t,r,e,n);break e;case 14:t=xc(null,t,r,xt(r.type,e),n);break e}throw Error(K(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:xt(r,l),La(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:xt(r,l),wc(e,t,r,l,n);case 3:e:{if(dp(t),e===null)throw Error(K(387));r=t.pendingProps,s=t.memoizedState,l=s.element,zf(e,t),_s(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){l=yr(Error(K(423)),t),t=Nc(e,t,r,n,l);break e}else if(r!==l){l=yr(Error(K(424)),t),t=Nc(e,t,r,n,l);break e}else for(st=fn(t.stateNode.containerInfo.firstChild),ot=t,je=!0,St=null,n=If(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hr(),r===l){t=Gt(e,t,n);break e}Ye(e,t,r,n)}t=t.child}return t;case 5:return Df(t),e===null&&ka(t),r=t.type,l=t.pendingProps,s=e!==null?e.memoizedProps:null,a=l.children,Sa(r,l)?a=null:s!==null&&Sa(r,s)&&(t.flags|=32),cp(e,t),Ye(e,t,a,n),t.child;case 6:return e===null&&ka(t),null;case 13:return fp(e,t,n);case 4:return Ii(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=gr(t,null,r,n):Ye(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:xt(r,l),yc(e,t,r,l,n);case 7:return Ye(e,t,t.pendingProps,n),t.child;case 8:return Ye(e,t,t.pendingProps.children,n),t.child;case 12:return Ye(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,s=t.memoizedProps,a=l.value,xe(bs,r._currentValue),r._currentValue=a,s!==null)if(bt(s.value,a)){if(s.children===l.children&&!tt.current){t=Gt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var i=s.dependencies;if(i!==null){a=s.child;for(var u=i.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Ut(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var m=c.pending;m===null?u.next=u:(u.next=m.next,m.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),_a(s.return,n,t),i.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(K(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),_a(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Ye(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,dr(t,n),l=gt(l),r=r(l),t.flags|=1,Ye(e,t,r,n),t.child;case 14:return r=t.type,l=xt(r,t.pendingProps),l=xt(r.type,l),xc(e,t,r,l,n);case 15:return ip(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:xt(r,l),as(e,t),t.tag=1,nt(r)?(e=!0,js(t)):e=!1,dr(t,n),sp(t,r,l),Pa(t,r,l,n),Ra(null,t,r,!0,e,n);case 19:return pp(e,t,n);case 22:return up(e,t,n)}throw Error(K(156,t.tag))};function Fp(e,t){return tf(e,t)}function Zg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mt(e,t,n,r){return new Zg(e,t,n,r)}function Ji(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ev(e){if(typeof e=="function")return Ji(e)?1:0;if(e!=null){if(e=e.$$typeof,e===gi)return 11;if(e===vi)return 14}return 2}function gn(e,t){var n=e.alternate;return n===null?(n=mt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function cs(e,t,n,r,l,s){var a=2;if(r=e,typeof e=="function")Ji(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Yn:return Tn(n.children,l,s,t);case hi:a=8,l|=8;break;case ea:return e=mt(12,n,t,l|2),e.elementType=ea,e.lanes=s,e;case ta:return e=mt(13,n,t,l),e.elementType=ta,e.lanes=s,e;case na:return e=mt(19,n,t,l),e.elementType=na,e.lanes=s,e;case zd:return ro(n,l,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Id:a=10;break e;case Md:a=9;break e;case gi:a=11;break e;case vi:a=14;break e;case Xt:a=16,r=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=mt(a,n,t,l),t.elementType=e,t.type=r,t.lanes=s,t}function Tn(e,t,n,r){return e=mt(7,e,r,t),e.lanes=n,e}function ro(e,t,n,r){return e=mt(22,e,r,t),e.elementType=zd,e.lanes=n,e.stateNode={isHidden:!1},e}function Uo(e,t,n){return e=mt(6,e,null,t),e.lanes=n,e}function Bo(e,t,n){return t=mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tv(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=So(0),this.expirationTimes=So(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=So(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Xi(e,t,n,r,l,s,a,i,u){return e=new tv(e,t,n,i,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=mt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ti(s),e}function nv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Pp(e){if(!e)return wn;e=e._reactInternals;e:{if(Vn(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var n=e.type;if(nt(n))return Pf(e,n,t)}return t}function Ap(e,t,n,r,l,s,a,i,u){return e=Xi(n,r,!0,e,l,s,a,i,u),e.context=Pp(null),n=e.current,r=qe(),l=hn(n),s=Ut(r,l),s.callback=t??null,pn(n,s,l),e.current.lanes=l,kl(e,l,r),rt(e,r),e}function lo(e,t,n,r){var l=t.current,s=qe(),a=hn(l);return n=Pp(n),t.context===null?t.context=n:t.pendingContext=n,t=Ut(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=pn(l,t,a),e!==null&&(Ct(e,l,a,s),ls(e,l,a)),a}function Is(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ac(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Zi(e,t){Ac(e,t),(e=e.alternate)&&Ac(e,t)}function rv(){return null}var Lp=typeof reportError=="function"?reportError:function(e){console.error(e)};function eu(e){this._internalRoot=e}so.prototype.render=eu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));lo(e,t,null,null)};so.prototype.unmount=eu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Un(function(){lo(null,e,null,null)}),t[Vt]=null}};function so(e){this._internalRoot=e}so.prototype.unstable_scheduleHydration=function(e){if(e){var t=uf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<en.length&&t!==0&&t<en[n].priority;n++);en.splice(n,0,e),n===0&&df(e)}};function tu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Lc(){}function lv(e,t,n,r,l){if(l){if(typeof r=="function"){var s=r;r=function(){var c=Is(a);s.call(c)}}var a=Ap(t,r,e,0,null,!1,!1,"",Lc);return e._reactRootContainer=a,e[Vt]=a.current,fl(e.nodeType===8?e.parentNode:e),Un(),a}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var i=r;r=function(){var c=Is(u);i.call(c)}}var u=Xi(e,0,!1,null,null,!1,!1,"",Lc);return e._reactRootContainer=u,e[Vt]=u.current,fl(e.nodeType===8?e.parentNode:e),Un(function(){lo(t,u,n,r)}),u}function ao(e,t,n,r,l){var s=n._reactRootContainer;if(s){var a=s;if(typeof l=="function"){var i=l;l=function(){var u=Is(a);i.call(u)}}lo(t,a,e,l)}else a=lv(n,t,e,l,r);return Is(a)}of=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Br(t.pendingLanes);n!==0&&(wi(t,n|1),rt(t,Fe()),!(me&6)&&(xr=Fe()+500,jn()))}break;case 13:Un(function(){var r=Ht(e,1);if(r!==null){var l=qe();Ct(r,e,1,l)}}),Zi(e,1)}};Ni=function(e){if(e.tag===13){var t=Ht(e,134217728);if(t!==null){var n=qe();Ct(t,e,134217728,n)}Zi(e,134217728)}};af=function(e){if(e.tag===13){var t=hn(e),n=Ht(e,t);if(n!==null){var r=qe();Ct(n,e,t,r)}Zi(e,t)}};uf=function(){return ve};cf=function(e,t){var n=ve;try{return ve=e,t()}finally{ve=n}};fa=function(e,t,n){switch(t){case"input":if(sa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=Js(r);if(!l)throw Error(K(90));$d(r),sa(r,l)}}}break;case"textarea":Bd(e,n);break;case"select":t=n.value,t!=null&&ar(e,!!n.multiple,t,!1)}};Yd=Qi;qd=Un;var sv={usingClientEntryPoint:!1,Events:[Fl,Zn,Js,Kd,Qd,Qi]},Dr={findFiberByHostInstance:An,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ov={bundleType:Dr.bundleType,version:Dr.version,rendererPackageName:Dr.rendererPackageName,rendererConfig:Dr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zd(e),e===null?null:e.stateNode},findFiberByHostInstance:Dr.findFiberByHostInstance||rv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jl.isDisabled&&Jl.supportsFiber)try{Ks=Jl.inject(ov),Ot=Jl}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sv;it.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tu(t))throw Error(K(200));return nv(e,t,null,n)};it.createRoot=function(e,t){if(!tu(e))throw Error(K(299));var n=!1,r="",l=Lp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Xi(e,1,!1,null,null,n,!1,r,l),e[Vt]=t.current,fl(e.nodeType===8?e.parentNode:e),new eu(t)};it.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=Zd(t),e=e===null?null:e.stateNode,e};it.flushSync=function(e){return Un(e)};it.hydrate=function(e,t,n){if(!oo(t))throw Error(K(200));return ao(null,e,t,!0,n)};it.hydrateRoot=function(e,t,n){if(!tu(e))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,l=!1,s="",a=Lp;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Ap(t,null,e,1,n??null,l,!1,s,a),e[Vt]=t.current,fl(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new so(t)};it.render=function(e,t,n){if(!oo(t))throw Error(K(200));return ao(null,e,t,!1,n)};it.unmountComponentAtNode=function(e){if(!oo(e))throw Error(K(40));return e._reactRootContainer?(Un(function(){ao(null,null,e,!1,function(){e._reactRootContainer=null,e[Vt]=null})}),!0):!1};it.unstable_batchedUpdates=Qi;it.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!oo(n))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return ao(e,t,n,!1,r)};it.version="18.3.1-next-f1338f8080-20240426";function Rp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rp)}catch(e){console.error(e)}}Rp(),Ld.exports=it;var Op=Ld.exports,Rc=Op;Xo.createRoot=Rc.createRoot,Xo.hydrateRoot=Rc.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nl(){return Nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nl.apply(this,arguments)}var ln;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ln||(ln={}));const Oc="popstate";function av(e){e===void 0&&(e={});function t(l,s){let{pathname:a="/",search:i="",hash:u=""}=Hn(l.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Ha("",{pathname:a,search:i,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(l,s){let a=l.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let u=l.location.href,c=u.indexOf("#");i=c===-1?u:u.slice(0,c)}return i+"#"+(typeof s=="string"?s:Ms(s))}function r(l,s){nu(l.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return uv(t,n,r,e)}function be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function nu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function iv(){return Math.random().toString(36).substr(2,8)}function Tc(e,t){return{usr:e.state,key:e.key,idx:t}}function Ha(e,t,n,r){return n===void 0&&(n=null),Nl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Hn(t):t,{state:n,key:t&&t.key||r||iv()})}function Ms(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Hn(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function uv(e,t,n,r){r===void 0&&(r={});let{window:l=document.defaultView,v5Compat:s=!1}=r,a=l.history,i=ln.Pop,u=null,c=m();c==null&&(c=0,a.replaceState(Nl({},a.state,{idx:c}),""));function m(){return(a.state||{idx:null}).idx}function f(){i=ln.Pop;let j=m(),g=j==null?null:j-c;c=j,u&&u({action:i,location:C.location,delta:g})}function h(j,g){i=ln.Push;let p=Ha(C.location,j,g);n&&n(p,j),c=m()+1;let y=Tc(p,c),w=C.createHref(p);try{a.pushState(y,"",w)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;l.location.assign(w)}s&&u&&u({action:i,location:C.location,delta:1})}function N(j,g){i=ln.Replace;let p=Ha(C.location,j,g);n&&n(p,j),c=m();let y=Tc(p,c),w=C.createHref(p);a.replaceState(y,"",w),s&&u&&u({action:i,location:C.location,delta:0})}function x(j){let g=l.location.origin!=="null"?l.location.origin:l.location.href,p=typeof j=="string"?j:Ms(j);return p=p.replace(/ $/,"%20"),be(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let C={get action(){return i},get location(){return e(l,a)},listen(j){if(u)throw new Error("A history only accepts one active listener");return l.addEventListener(Oc,f),u=j,()=>{l.removeEventListener(Oc,f),u=null}},createHref(j){return t(l,j)},createURL:x,encodeLocation(j){let g=x(j);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:N,go(j){return a.go(j)}};return C}var Ic;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ic||(Ic={}));function cv(e,t,n){return n===void 0&&(n="/"),dv(e,t,n)}function dv(e,t,n,r){let l=typeof t=="string"?Hn(t):t,s=wr(l.pathname||"/",n);if(s==null)return null;let a=Tp(e);fv(a);let i=null;for(let u=0;i==null&&u<a.length;++u){let c=jv(s);i=Nv(a[u],c)}return i}function Tp(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let l=(s,a,i)=>{let u={relativePath:i===void 0?s.path||"":i,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(be(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=vn([r,u.relativePath]),m=n.concat(u);s.children&&s.children.length>0&&(be(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Tp(s.children,t,m,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:xv(c,s.index),routesMeta:m})};return e.forEach((s,a)=>{var i;if(s.path===""||!((i=s.path)!=null&&i.includes("?")))l(s,a);else for(let u of Ip(s.path))l(s,a,u)}),t}function Ip(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,l=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return l?[s,""]:[s];let a=Ip(r.join("/")),i=[];return i.push(...a.map(u=>u===""?s:[s,u].join("/"))),l&&i.push(...a),i.map(u=>e.startsWith("/")&&u===""?"/":u)}function fv(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:wv(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const pv=/^:[\w-]+$/,mv=3,hv=2,gv=1,vv=10,yv=-2,Mc=e=>e==="*";function xv(e,t){let n=e.split("/"),r=n.length;return n.some(Mc)&&(r+=yv),t&&(r+=hv),n.filter(l=>!Mc(l)).reduce((l,s)=>l+(pv.test(s)?mv:s===""?gv:vv),r)}function wv(e,t){return e.length===t.length&&e.slice(0,-1).every((r,l)=>r===t[l])?e[e.length-1]-t[t.length-1]:0}function Nv(e,t,n){let{routesMeta:r}=e,l={},s="/",a=[];for(let i=0;i<r.length;++i){let u=r[i],c=i===r.length-1,m=s==="/"?t:t.slice(s.length)||"/",f=Ga({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},m),h=u.route;if(!f)return null;Object.assign(l,f.params),a.push({params:l,pathname:vn([s,f.pathname]),pathnameBase:kv(vn([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=vn([s,f.pathnameBase]))}return a}function Ga(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Sv(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let s=l[0],a=s.replace(/(.)\/+$/,"$1"),i=l.slice(1);return{params:r.reduce((c,m,f)=>{let{paramName:h,isOptional:N}=m;if(h==="*"){let C=i[f]||"";a=s.slice(0,s.length-C.length).replace(/(.)\/+$/,"$1")}const x=i[f];return N&&!x?c[h]=void 0:c[h]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:a,pattern:e}}function Sv(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),nu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,u)=>(r.push({paramName:i,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),r]}function jv(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return nu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function wr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Cv(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:l=""}=typeof e=="string"?Hn(e):e;return{pathname:n?n.startsWith("/")?n:Ev(n,t):t,search:_v(r),hash:Fv(l)}}function Ev(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function Wo(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bv(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ru(e,t){let n=bv(e);return t?n.map((r,l)=>l===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function lu(e,t,n,r){r===void 0&&(r=!1);let l;typeof e=="string"?l=Hn(e):(l=Nl({},e),be(!l.pathname||!l.pathname.includes("?"),Wo("?","pathname","search",l)),be(!l.pathname||!l.pathname.includes("#"),Wo("#","pathname","hash",l)),be(!l.search||!l.search.includes("#"),Wo("#","search","hash",l)));let s=e===""||l.pathname==="",a=s?"/":l.pathname,i;if(a==null)i=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;l.pathname=h.join("/")}i=f>=0?t[f]:"/"}let u=Cv(l,i),c=a&&a!=="/"&&a.endsWith("/"),m=(s||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||m)&&(u.pathname+="/"),u}const vn=e=>e.join("/").replace(/\/\/+/g,"/"),kv=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_v=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Fv=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Pv(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Mp=["post","put","patch","delete"];new Set(Mp);const Av=["get",...Mp];new Set(Av);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sl.apply(this,arguments)}const io=d.createContext(null),zp=d.createContext(null),Qt=d.createContext(null),uo=d.createContext(null),Cn=d.createContext({outlet:null,matches:[],isDataRoute:!1}),Dp=d.createContext(null);function Lv(e,t){let{relative:n}=t===void 0?{}:t;br()||be(!1);let{basename:r,navigator:l}=d.useContext(Qt),{hash:s,pathname:a,search:i}=co(e,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:vn([r,a])),l.createHref({pathname:u,search:i,hash:s})}function br(){return d.useContext(uo)!=null}function kt(){return br()||be(!1),d.useContext(uo).location}function $p(e){d.useContext(Qt).static||d.useLayoutEffect(e)}function su(){let{isDataRoute:e}=d.useContext(Cn);return e?Hv():Rv()}function Rv(){br()||be(!1);let e=d.useContext(io),{basename:t,future:n,navigator:r}=d.useContext(Qt),{matches:l}=d.useContext(Cn),{pathname:s}=kt(),a=JSON.stringify(ru(l,n.v7_relativeSplatPath)),i=d.useRef(!1);return $p(()=>{i.current=!0}),d.useCallback(function(c,m){if(m===void 0&&(m={}),!i.current)return;if(typeof c=="number"){r.go(c);return}let f=lu(c,JSON.parse(a),s,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:vn([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,a,s,e])}function co(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=d.useContext(Qt),{matches:l}=d.useContext(Cn),{pathname:s}=kt(),a=JSON.stringify(ru(l,r.v7_relativeSplatPath));return d.useMemo(()=>lu(e,JSON.parse(a),s,n==="path"),[e,a,s,n])}function Ov(e,t){return Tv(e,t)}function Tv(e,t,n,r){br()||be(!1);let{navigator:l}=d.useContext(Qt),{matches:s}=d.useContext(Cn),a=s[s.length-1],i=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let c=kt(),m;if(t){var f;let j=typeof t=="string"?Hn(t):t;u==="/"||(f=j.pathname)!=null&&f.startsWith(u)||be(!1),m=j}else m=c;let h=m.pathname||"/",N=h;if(u!=="/"){let j=u.replace(/^\//,"").split("/");N="/"+h.replace(/^\//,"").split("/").slice(j.length).join("/")}let x=cv(e,{pathname:N}),C=$v(x&&x.map(j=>Object.assign({},j,{params:Object.assign({},i,j.params),pathname:vn([u,l.encodeLocation?l.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?u:vn([u,l.encodeLocation?l.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),s,n,r);return t&&C?d.createElement(uo.Provider,{value:{location:Sl({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:ln.Pop}},C):C}function Iv(){let e=Vv(),t=Pv(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},t),n?d.createElement("pre",{style:l},n):null,null)}const Mv=d.createElement(Iv,null);class zv extends d.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?d.createElement(Cn.Provider,{value:this.props.routeContext},d.createElement(Dp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Dv(e){let{routeContext:t,match:n,children:r}=e,l=d.useContext(io);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),d.createElement(Cn.Provider,{value:t},r)}function $v(e,t,n,r){var l;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(l=n)==null?void 0:l.errors;if(i!=null){let m=a.findIndex(f=>f.route.id&&(i==null?void 0:i[f.route.id])!==void 0);m>=0||be(!1),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<a.length;m++){let f=a[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=m),f.route.id){let{loaderData:h,errors:N}=n,x=f.route.loader&&h[f.route.id]===void 0&&(!N||N[f.route.id]===void 0);if(f.route.lazy||x){u=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((m,f,h)=>{let N,x=!1,C=null,j=null;n&&(N=i&&f.route.id?i[f.route.id]:void 0,C=f.route.errorElement||Mv,u&&(c<0&&h===0?(Gv("route-fallback"),x=!0,j=null):c===h&&(x=!0,j=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,h+1)),p=()=>{let y;return N?y=C:x?y=j:f.route.Component?y=d.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=m,d.createElement(Dv,{match:f,routeContext:{outlet:m,matches:g,isDataRoute:n!=null},children:y})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?d.createElement(zv,{location:n.location,revalidation:n.revalidation,component:C,error:N,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var Up=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Up||{}),Bp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Bp||{});function Uv(e){let t=d.useContext(io);return t||be(!1),t}function Bv(e){let t=d.useContext(zp);return t||be(!1),t}function Wv(e){let t=d.useContext(Cn);return t||be(!1),t}function Wp(e){let t=Wv(),n=t.matches[t.matches.length-1];return n.route.id||be(!1),n.route.id}function Vv(){var e;let t=d.useContext(Dp),n=Bv(),r=Wp();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Hv(){let{router:e}=Uv(Up.UseNavigateStable),t=Wp(Bp.UseNavigateStable),n=d.useRef(!1);return $p(()=>{n.current=!0}),d.useCallback(function(l,s){s===void 0&&(s={}),n.current&&(typeof l=="number"?e.navigate(l):e.navigate(l,Sl({fromRouteId:t},s)))},[e,t])}const zc={};function Gv(e,t,n){zc[e]||(zc[e]=!0)}function Kv(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Vp(e){let{to:t,replace:n,state:r,relative:l}=e;br()||be(!1);let{future:s,static:a}=d.useContext(Qt),{matches:i}=d.useContext(Cn),{pathname:u}=kt(),c=su(),m=lu(t,ru(i,s.v7_relativeSplatPath),u,l==="path"),f=JSON.stringify(m);return d.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:l}),[c,f,l,n,r]),null}function It(e){be(!1)}function Qv(e){let{basename:t="/",children:n=null,location:r,navigationType:l=ln.Pop,navigator:s,static:a=!1,future:i}=e;br()&&be(!1);let u=t.replace(/^\/*/,"/"),c=d.useMemo(()=>({basename:u,navigator:s,static:a,future:Sl({v7_relativeSplatPath:!1},i)}),[u,i,s,a]);typeof r=="string"&&(r=Hn(r));let{pathname:m="/",search:f="",hash:h="",state:N=null,key:x="default"}=r,C=d.useMemo(()=>{let j=wr(m,u);return j==null?null:{location:{pathname:j,search:f,hash:h,state:N,key:x},navigationType:l}},[u,m,f,h,N,x,l]);return C==null?null:d.createElement(Qt.Provider,{value:c},d.createElement(uo.Provider,{children:n,value:C}))}function Yv(e){let{children:t,location:n}=e;return Ov(Ka(t),n)}new Promise(()=>{});function Ka(e,t){t===void 0&&(t=[]);let n=[];return d.Children.forEach(e,(r,l)=>{if(!d.isValidElement(r))return;let s=[...t,l];if(r.type===d.Fragment){n.push.apply(n,Ka(r.props.children,s));return}r.type!==It&&be(!1),!r.props.index||!r.props.children||be(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Ka(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zs(){return zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zs.apply(this,arguments)}function Hp(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,s;for(s=0;s<r.length;s++)l=r[s],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function qv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Jv(e,t){return e.button===0&&(!t||t==="_self")&&!qv(e)}const Xv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Zv=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ey="6";try{window.__reactRouterVersion=ey}catch{}const ty=d.createContext({isTransitioning:!1}),ny="startTransition",Dc=qm[ny];function ry(e){let{basename:t,children:n,future:r,window:l}=e,s=d.useRef();s.current==null&&(s.current=av({window:l,v5Compat:!0}));let a=s.current,[i,u]=d.useState({action:a.action,location:a.location}),{v7_startTransition:c}=r||{},m=d.useCallback(f=>{c&&Dc?Dc(()=>u(f)):u(f)},[u,c]);return d.useLayoutEffect(()=>a.listen(m),[a,m]),d.useEffect(()=>Kv(r),[r]),d.createElement(Qv,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}const ly=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gp=d.forwardRef(function(t,n){let{onClick:r,relative:l,reloadDocument:s,replace:a,state:i,target:u,to:c,preventScrollReset:m,viewTransition:f}=t,h=Hp(t,Xv),{basename:N}=d.useContext(Qt),x,C=!1;if(typeof c=="string"&&sy.test(c)&&(x=c,ly))try{let y=new URL(window.location.href),w=c.startsWith("//")?new URL(y.protocol+c):new URL(c),_=wr(w.pathname,N);w.origin===y.origin&&_!=null?c=_+w.search+w.hash:C=!0}catch{}let j=Lv(c,{relative:l}),g=ay(c,{replace:a,state:i,target:u,preventScrollReset:m,relative:l,viewTransition:f});function p(y){r&&r(y),y.defaultPrevented||g(y)}return d.createElement("a",zs({},h,{href:x||j,onClick:C||s?r:p,ref:n,target:u}))}),ds=d.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:l=!1,className:s="",end:a=!1,style:i,to:u,viewTransition:c,children:m}=t,f=Hp(t,Zv),h=co(u,{relative:f.relative}),N=kt(),x=d.useContext(zp),{navigator:C,basename:j}=d.useContext(Qt),g=x!=null&&iy(h)&&c===!0,p=C.encodeLocation?C.encodeLocation(h).pathname:h.pathname,y=N.pathname,w=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;l||(y=y.toLowerCase(),w=w?w.toLowerCase():null,p=p.toLowerCase()),w&&j&&(w=wr(w,j)||w);const _=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let D=y===p||!a&&y.startsWith(p)&&y.charAt(_)==="/",T=w!=null&&(w===p||!a&&w.startsWith(p)&&w.charAt(p.length)==="/"),P={isActive:D,isPending:T,isTransitioning:g},G=D?r:void 0,U;typeof s=="function"?U=s(P):U=[s,D?"active":null,T?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let V=typeof i=="function"?i(P):i;return d.createElement(Gp,zs({},f,{"aria-current":G,className:U,ref:n,style:V,to:u,viewTransition:c}),typeof m=="function"?m(P):m)});var Qa;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Qa||(Qa={}));var $c;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})($c||($c={}));function oy(e){let t=d.useContext(io);return t||be(!1),t}function ay(e,t){let{target:n,replace:r,state:l,preventScrollReset:s,relative:a,viewTransition:i}=t===void 0?{}:t,u=su(),c=kt(),m=co(e,{relative:a});return d.useCallback(f=>{if(Jv(f,n)){f.preventDefault();let h=r!==void 0?r:Ms(c)===Ms(m);u(e,{replace:h,state:l,preventScrollReset:s,relative:a,viewTransition:i})}},[c,u,m,r,l,n,e,s,a,i])}function iy(e,t){t===void 0&&(t={});let n=d.useContext(ty);n==null&&be(!1);let{basename:r}=oy(Qa.useViewTransitionState),l=co(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=wr(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=wr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ga(l.pathname,a)!=null||Ga(l.pathname,s)!=null}function ou(){const[e,t]=d.useState(()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("cozygen_gallery_pending")==="1"}catch{return!1}});return d.useEffect(()=>{const n=()=>t(!0),r=()=>t(!1),l=s=>{s.key==="cozygen_gallery_pending"&&t(s.newValue==="1")};return window.addEventListener("cozygen:gallery-pending",n),window.addEventListener("cozygen:gallery-viewed",r),window.addEventListener("storage",l),()=>{window.removeEventListener("cozygen:gallery-pending",n),window.removeEventListener("cozygen:gallery-viewed",r),window.removeEventListener("storage",l)}},[]),e}const Ya="cozygen_token";function au(){try{return typeof window>"u"?null:localStorage.getItem(Ya)}catch{return null}}function Kp(e){try{if(typeof window>"u")return;e?localStorage.setItem(Ya,e):localStorage.removeItem(Ya)}catch{}}function Vo(){Kp(null)}function kr(){const e=au();return e?{Authorization:`Bearer ${e}`}:{}}const _r=async(e,t)=>{if(t.status===401){const r=new Error("unauthorized");throw r.unauthorized=!0,r.status=401,r}if(!t.ok)throw new Error(`${e} failed`);return(t.headers.get("content-type")||"").includes("application/json")?t.json():t.text()},En=async e=>{const t=await fetch(e,{headers:{...kr()}});return _r(e,t)},Al=async(e,t)=>{const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...kr()},body:JSON.stringify(t),credentials:"include"});return _r(e,n)},uy=async e=>{const t=await fetch(e,{method:"DELETE",headers:{...kr()},credentials:"include"});return _r(e,t)};async function cy(){return En("/cozygen/workflows")}async function dy(e){return En(`/cozygen/workflows/${encodeURIComponent(e)}`)}async function fy(e){return En(`/cozygen/get_choices?type=${encodeURIComponent(e)}`)}async function Qp(e){const t=await fetch("/prompt",{method:"POST",headers:{"Content-Type":"application/json",...kr()},body:JSON.stringify(e),credentials:"include"});return _r("/prompt",t)}async function py(e){const t=new FormData;t.append("image",e);const n=await fetch("/cozygen/upload_image",{method:"POST",headers:{...kr()},body:t,credentials:"include"});return _r("/cozygen/upload_image",n)}async function Yp(e="",t=1,n=50,r=!1,l=!1,s="all",a=""){const i=new URLSearchParams({subfolder:e,page:String(t),per_page:String(n),show_hidden:r?"1":"0",recursive:l?"1":"0",kind:s});return a&&i.set("cache_bust",String(a)),En(`/cozygen/api/gallery?${i.toString()}`)}function my(e){if(!(typeof window>"u"||typeof window.dispatchEvent!="function"))try{window.dispatchEvent(new CustomEvent("cozygen:preset-changed",{detail:{workflow:e||"default"}}))}catch(t){console.warn("Failed to emit preset change event",t)}}async function qp(e){return En(`/cozygen/api/presets?workflow=${encodeURIComponent(e||"default")}`)}async function hy(e,t,n,r){const l={name:t,values:n};typeof r<"u"&&(l.meta=r);const s=await Al(`/cozygen/api/presets?workflow=${encodeURIComponent(e||"default")}`,l);return my(e),s}async function gy(){return En("/cozygen/api/aliases")}async function vy(e){return Al("/cozygen/api/aliases",e||{})}async function yy(){return En("/cozygen/api/workflow_types")}async function xy(e,t){return Al("/cozygen/api/workflow_types",{workflow:e,mode:t})}async function wy(){return En("/cozygen/api/lora_library")}async function Ny(e,t){return Al("/cozygen/api/lora_library",{id:e,data:t})}async function Sy(e){return uy(`/cozygen/api/lora_library/${encodeURIComponent(e)}`)}async function jy(e,t){return Al("/cozygen/api/login",{username:e,password:t})}async function Cy(){return fetch("/cozygen/api/auth_status",{headers:{...kr()},credentials:"include"}).then(e=>_r("/cozygen/api/auth_status",e))}const Ey=30*60*1e3,Uc="cozygen_idle_logout",Jp=d.createContext(null);function by({children:e}){const[t,n]=d.useState(!1),[r,l]=d.useState(null),[s,a]=d.useState(!1),[i,u]=d.useState(null),c=d.useCallback(async()=>{if(!au()){l(null),a(!1),n(!0);return}try{const x=await Cy();l((x==null?void 0:x.user)||null),a(!!(x!=null&&x.default_credentials))}catch{Vo(),l(null),a(!1)}finally{n(!0)}},[]);d.useEffect(()=>{c()},[c]);const m=d.useCallback(async(N,x)=>{const C=await jy(N,x);Kp((C==null?void 0:C.token)||""),l((C==null?void 0:C.user)||N),a(!!(C!=null&&C.default_credentials));try{localStorage.removeItem(Uc)}catch{}return C},[]),f=d.useCallback(()=>{Vo(),l(null),a(!1)},[]);d.useEffect(()=>{if(!t)return;const N=()=>{i&&clearTimeout(i);const C=setTimeout(()=>{Vo(),l(null),a(!1);try{localStorage.setItem(Uc,"1")}catch{}window.location.hash="#/login"},Ey);u(C)};N();const x=["pointerdown","keydown","visibilitychange"];return x.forEach(C=>window.addEventListener(C,N,{passive:!0})),()=>{i&&clearTimeout(i),x.forEach(C=>window.removeEventListener(C,N))}},[t,i]);const h=d.useMemo(()=>({ready:t,user:r,authed:!!r,defaultCreds:s,login:m,logout:f,refresh:c}),[t,r,s,m,f,c]);return o.jsx(Jp.Provider,{value:h,children:e})}function fo(){const e=d.useContext(Jp);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function ky({children:e}){return o.jsx(by,{children:e})}const Bc=[{to:"/",label:" Studio",end:!0}],Wc=[{to:"/gallery",label:" Gallery"},{to:"/presets",label:" Presets"},{to:"/lora-library",label:" LoRA"},{to:"/aliases",label:" Aliases"}],Ho=({isActive:e})=>["slim-nav-link btn-touch",e?"is-active":null].filter(Boolean).join(" ");function _y(){const[e,t]=d.useState(!1),n=ou(),{logout:r,user:l}=fo(),s=()=>t(c=>!c),a=()=>t(!1),i=()=>{try{r()}catch{}window.location.hash="#/login"},u=[...Bc,...Wc];return o.jsxs("header",{className:"top-bar",children:[o.jsx("div",{className:"top-bar-shell",children:o.jsxs("div",{className:"brand-row",children:[o.jsxs(Gp,{to:"/",className:"brand-mark",onClick:a,children:[o.jsx("span",{className:"brand-icon",children:"CG"}),o.jsx("span",{className:"brand-text",children:"CozyGen"})]}),o.jsx("nav",{className:"desktop-nav","aria-label":"Main navigation",children:u.map(c=>o.jsx(ds,{to:c.to,end:c.end,className:Ho,children:o.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[o.jsx("span",{children:c.label}),c.to==="/gallery"&&n?o.jsx("span",{className:"badge-dot","aria-hidden":"true"}):null]})},c.to))}),o.jsx("div",{className:"flex-1"}),o.jsxs("button",{type:"button",className:"desktop-logout-btn",onClick:i,title:"Sign out",children:[o.jsx("span",{className:"logout-icon",children:""}),o.jsx("span",{className:"logout-label",children:"Logout"}),l?o.jsxs("span",{className:"logout-user",children:["@",l]}):null]}),o.jsx("button",{type:"button",className:`mobile-menu-toggle btn-touch ${e?"is-active":""} md:hidden`,onClick:s,"aria-expanded":e,"aria-controls":"cozygen-mobile-nav","aria-label":e?"Close menu":"Open menu",children:o.jsx("span",{className:"mobile-menu-icon",children:o.jsx("span",{})})})]})}),o.jsxs("div",{id:"cozygen-mobile-nav",className:`mobile-nav-drawer md:hidden ${e?"is-open":""}`,role:"menu",children:[o.jsx("div",{className:"mobile-nav-section",children:Bc.map(c=>o.jsx(ds,{to:c.to,end:c.end,className:Ho,onClick:a,role:"menuitem",children:c.label},c.to))}),o.jsxs("div",{className:"mobile-nav-section secondary",children:[Wc.map(c=>o.jsx(ds,{to:c.to,end:c.end,className:Ho,onClick:a,role:"menuitem",children:o.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[o.jsx("span",{children:c.label}),c.to==="/gallery"&&n?o.jsx("span",{className:"badge-dot","aria-hidden":"true"}):null]})},c.to)),o.jsx("button",{type:"button",className:"slim-nav-link btn-touch text-left",onClick:()=>{a(),i()},role:"menuitem",children:o.jsxs("span",{className:"inline-flex items-center gap-2",children:[o.jsx("span",{children:" Logout"}),l?o.jsxs("span",{className:"text-slate-400 text-xs",children:["@",l]}):null]})})]})]})]})}const Xp="cozygen_last_render_payload";function Fy(e){if(e)try{if(typeof window>"u")return;window.localStorage.setItem(Xp,JSON.stringify(e))}catch{}}function Zp(){try{if(typeof window>"u")return null;const e=window.localStorage.getItem(Xp);return e?JSON.parse(e):null}catch{return null}}async function Py(){const e=Zp();if(!e||!e.workflow)return{success:!1,error:"No previous render to repeat"};try{return window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!0}})),await Qp({prompt:e.workflow}),{success:!0}}catch(t){return console.error("Failed to requeue prompt",t),window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!1}})),t!=null&&t.unauthorized?(window.location.hash="#/login",{success:!1,error:"Session expired"}):{success:!1,error:"Failed to queue prompt"}}}function Ay(){const e=Zp();return!!(e&&e.workflow)}const Ly=[{to:"/",label:"Studio",icon:"",end:!0},{to:"/gallery",label:"Gallery",icon:""},{to:"/presets",label:"Presets",icon:""},{to:"/aliases",label:"Aliases",icon:""},{to:"#render",label:"Render",icon:"",isAction:!0}],Ry=({isActive:e})=>["bottom-nav-link",e?"is-active":""].filter(Boolean).join(" ");function Oy(){const e=kt(),t=ou(),[n,r]=Vr.useState(!1),[l,s]=Vr.useState(!1),a=e.pathname==="/"||e.pathname==="",i=async()=>{if(!(typeof window>"u"))if(r(!0),setTimeout(()=>r(!1),400),a)try{window.dispatchEvent(new CustomEvent("cozygen:request-render"))}catch{}else{if(!Ay())return;const u=await Py();u.success||console.warn("Requeue failed:",u.error)}};return Vr.useEffect(()=>{const u=c=>{var f;const m=!!((f=c==null?void 0:c.detail)!=null&&f.active);s(m),m&&(r(!0),setTimeout(()=>r(!1),400))};return window.addEventListener("cozygen:render-state",u),()=>window.removeEventListener("cozygen:render-state",u)},[]),o.jsx("nav",{className:"bottom-nav md:hidden","aria-label":"Bottom navigation",children:Ly.map(u=>u.isAction?o.jsxs("button",{type:"button",className:`bottom-nav-link is-action ${n?"is-flash":""} ${l?"is-rendering":""}`,onClick:i,"aria-label":"Render",children:[o.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:""}),o.jsx("span",{className:"bottom-nav-label",children:"Render"})]},"render"):o.jsxs(ds,{to:u.to,end:u.end,className:Ry,children:[o.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:u.icon}),o.jsxs("span",{className:"bottom-nav-label",children:[u.label,u.to==="/gallery"&&t?o.jsx("span",{className:"badge-dot pulse","aria-hidden":"true"}):null]})]},u.to))})}function Ty(e,t){if(!t||t<=0)return null;const n=Number(e)||0,r=Number(t)||0,l=Math.round(n/r*100);return Number.isFinite(l)?Math.max(0,Math.min(100,l)):null}function Iy({busy:e=!1,progressValue:t=0,progressMax:n=0,statusText:r="Idle",statusPhase:l="idle",primaryLabel:s="Render",onPrimary:a,primaryDisabled:i=!1}){const u=Ty(t,n);let c="bg-[#3D4270]";l==="queued"?c="bg-[#FF60D0]":l==="running"?c="bg-[#3EF0FF]":l==="finished"?c="bg-[#5CFF9A]":l==="error"&&(c="bg-[#FF4F88]");const f={idle:"Idle",queued:"Queued",running:"Running",finished:"Finished",error:"Error"}[l]||"Status",h=l==="running"?"animate-pulse":"",N=e||i;return o.jsxs("div",{className:"dock-bar-inner",children:[o.jsx("button",{type:"button",onClick:a,disabled:N,className:`w-full rounded-full px-6 py-3 text-sm sm:text-base font-semibold tracking-[0.25em] uppercase
          bg-[linear-gradient(90deg,#FF60D0,#3EF0FF)]
          text-[#050716]
          shadow-[0_0_35px_rgba(255,96,208,0.45)]
          transition-transform
          disabled:opacity-60 disabled:cursor-not-allowed
          active:translate-y-[1px]`,children:e?"Rendering":s}),o.jsxs("div",{className:"mt-2 flex items-center justify-between text-[10px] sm:text-[11px] text-[#9DA3FFCC]",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`h-2 w-2 rounded-full shadow-[0_0_8px_rgba(255,255,255,0.35)] ${c} ${h}`}),o.jsx("span",{className:"tracking-[0.25em] uppercase",children:f})]}),o.jsxs("span",{className:"flex items-center gap-2",children:[u!=null&&e&&o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx("span",{className:"h-1.5 w-10 rounded-full bg-[#1B1F3A] overflow-hidden",children:o.jsx("span",{className:"block h-full bg-[#3EF0FF]",style:{width:`${u}%`}})}),o.jsxs("span",{children:[u,"%"]})]}),o.jsx("span",{className:"truncate max-w-[9rem] text-right",children:r||(e?"Working":"Idle")})]})]})]})}const em="jpg,jpeg,png,webp,gif,bmp,tif,tiff",iu=(e="")=>/\.(png|jpe?g|gif|webp|bmp|tif?f)$/i.test(e),tm=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e);async function Go({subfolder:e="",page:t=1,perPage:n=50,exts:r=em}={}){const l=new URLSearchParams({subfolder:e,page:String(t),per_page:String(n),exts:r}),s=await fetch(`/cozygen/input?${l.toString()}`);if(!s.ok)throw new Error(`Input list failed: ${s.status}`);return s.json()}const Ds=e=>`/cozygen/input/file?path=${encodeURIComponent(e)}`,qa="output::",po=(e="")=>e.replace(/\\/g,"/").replace(/^\/+/,"").replace(/\/+$/,""),nm=(e="")=>{const t=e.replace(/\\/g,"/").split("/").filter(Boolean);return t[t.length-1]||""},My=({subfolder:e="",filename:t=""}={})=>{const n=nm(t);if(!n)return"";const r=po(e);return`${qa}${r}::${n}`},Ja=(e="")=>{if(typeof e!="string"||!e.startsWith(qa))return null;const t=e.slice(qa.length);if(!t)return null;const n=t.lastIndexOf("::"),r=n===-1?t:t.slice(n+2);return r?{subfolder:n===-1?"":t.slice(0,n),filename:r}:null},$s=({filename:e="",subfolder:t="",type:n="output"}={})=>{const r=nm(e);return r?`/view?${new URLSearchParams({filename:r,subfolder:po(t),type:n||"output"}).toString()}`:""},Xa=(e="")=>e.split("/").slice(0,-1).join("/"),zy=e=>{if(typeof e!="string"||!e)return e!=null&&e.path?Xa(e.path):"";const t=Ja(e);return t?po(t.subfolder):Xa(e)},Vc=(e=[])=>e.map(t=>{const n=t.rel_path||t.name||"",r=t.name||n||"Untitled",l=!!t.is_dir,s=l?"":Ds(n);return{...t,name:r,rel_path:n,is_dir:l,is_image:!l&&iu(r),is_video:!l&&tm(r),source:"input",preview_url:s}}),Dy=(e=[])=>e.map(t=>{const n=t.filename||"",r=t.subfolder||"",l=t.type==="directory",s=l?r||n:[r,n].filter(Boolean).join("/"),a=n||r||s||"Untitled",i=l?"":$s({filename:n,subfolder:r,type:t.type});return{...t,name:a,rel_path:s,is_dir:l,is_image:!l&&iu(n),is_video:!l&&tm(n),source:"output",preview_url:i}}),kn={get(e,t){try{return(typeof window<"u"?JSON.parse(localStorage.getItem(e)):null)??t}catch{return t}},set(e,t){try{typeof window<"u"&&localStorage.setItem(e,JSON.stringify(t))}catch{}}};function uu({input:e,value:t,onFormChange:n}){var E;const r=((E=e==null?void 0:e.inputs)==null?void 0:E.param_name)||"Image Input",l=(e==null?void 0:e.class_type)||"CozyGenImageInput",s=`cg_last_input_cwd::${r}`,a=`cg_last_picker_source::${r}`,[i,u]=d.useState(""),[c,m]=d.useState(!1),[f,h]=d.useState(!1),[N,x]=d.useState(kn.get(s,"")),[C,j]=d.useState(1),[g,p]=d.useState(50),[y,w]=d.useState([]),[_,D]=d.useState(1),[T,P]=d.useState(!1),[G,U]=d.useState(""),[V,Z]=d.useState([]),[J,F]=d.useState(!0),[A,z]=d.useState(()=>kn.get(a,"inputs")==="outputs"?"outputs":"inputs"),k=A,S=d.useCallback(L=>{const R=L==="outputs"?"outputs":"inputs";z(R),kn.set(a,R),x(""),j(1)},[]),$=d.useMemo(()=>{if(i)try{const L=new URL(i,window.location.origin);return(L.searchParams.get("path")||L.searchParams.get("filename")||L.pathname.split("/").pop()||"").split("/").pop()||"No file selected."}catch{}if(!t)return"No file selected.";if(typeof t=="string"){const L=Ja(t);return L!=null&&L.filename?L.filename.split("/").pop():t.split("/").pop()}return t!=null&&t.path?t.path.split("/").pop():"No file selected."},[i,t]);d.useEffect(()=>{if(typeof t=="string"&&t){const L=Ja(t);L!=null&&L.filename?u($s({filename:L.filename,subfolder:L.subfolder,type:"output"})):u(Ds(t)),m(!1)}else t!=null&&t.url?(u(t.url),m(!1)):(u(""),m(!1))},[t]);const M=d.useCallback(async L=>{const R=await py(L),H=`/view?filename=${R.filename}&type=input`;u(H),m(!1),kn.set(s,""),l==="CozyGenImageInput"?n(r,R.filename):n(r,{source:"Upload",path:R.filename,url:H})},[l,n,r]),I=d.useCallback(()=>{u(""),m(!1),l==="CozyGenImageInput"?n(r,""):n(r,{source:"Upload",path:"",url:""})},[l,n,r]),O=d.useCallback(()=>{const R=zy(t)||kn.get(s,"");x(R),j(1),h(!0)},[t]),X=d.useCallback(()=>{h(!1)},[]);d.useEffect(()=>{if(f){if(k!=="inputs"){Z([]);return}(async()=>{try{const L=await Go({subfolder:"",page:1,perPage:0,exts:""});Z((L.items||[]).filter(R=>R.is_dir))}catch{}})()}},[f,k]),d.useEffect(()=>{if(!f)return;let L=!1;async function R(){P(!0);try{if(k==="outputs"){const H=await Yp(N,C,g);if(L)return;const q=Dy(H&&H.items||[]);L||(w(q),D(H&&H.total_pages||1))}else{const q=await Go({subfolder:N,page:C,perPage:g,exts:J?em:""}),le=(q.items||[]).some(oe=>!oe.is_dir);if(J&&!le){const oe=await Go({subfolder:N,page:C,perPage:g,exts:""});L||(w(Vc(oe.items||[])),D(oe.total_pages||1),F(!1));return}L||(w(Vc(q.items||[])),D(q.total_pages||1))}}catch(H){console.error(k==="outputs"?"Failed to load output directory":"Failed to load input directory",H),L||(w([]),D(1))}finally{L||P(!1)}}return R(),()=>{L=!0}},[f,N,C,g,J,k]);const ee=d.useMemo(()=>{const L=G.trim().toLowerCase();let R=y;return J&&(R=R.filter(H=>{if(H.is_dir)return!0;const q=H.name||H.filename||H.rel_path||"";return iu(String(q))})),L?R.filter(H=>(H.name||H.filename||H.rel_path||"").toLowerCase().includes(L)):R},[y,G,J]),v=d.useCallback(L=>{if(!L)return;const R=typeof L=="object"?L:null;if(((R==null?void 0:R.source)||"inputs")==="output"){const oe=My({subfolder:(R==null?void 0:R.subfolder)||"",filename:(R==null?void 0:R.filename)||(R==null?void 0:R.name)||""});if(!oe)return;const we=(R==null?void 0:R.preview_url)||$s({filename:R==null?void 0:R.filename,subfolder:R==null?void 0:R.subfolder,type:R==null?void 0:R.type});u(we),m(!1),kn.set(s,po((R==null?void 0:R.subfolder)||"")),l==="CozyGenImageInput"?n(r,oe):n(r,{source:"OutputGallery",path:oe,url:we}),h(!1);return}const q=typeof L=="string"?L:(R==null?void 0:R.rel_path)||(R==null?void 0:R.path)||"";if(!q)return;const le=(R==null?void 0:R.preview_url)||Ds(q);u(le),m(!1),kn.set(s,Xa(q)),l==="CozyGenImageInput"?n(r,q):n(r,{source:"Server",path:q,url:le}),h(!1)},[l,n,r]);return{param:r,previewUrl:i,imgReady:c,setImgReady:m,displayName:$,serverOpen:f,openServer:O,closeServer:X,cwd:N,setCwd:x,page:C,setPage:j,perPage:g,setPerPage:p,totalPages:_,loading:T,search:G,setSearch:U,topDirs:V,imagesOnly:J,setImagesOnly:F,shownEntries:ee,pickerSource:k,setPickerSource:S,handleUpload:M,clearImage:I,selectServer:v}}function cu({open:e,cwd:t,setCwd:n,page:r,setPage:l,perPage:s,setPerPage:a,totalPages:i,topDirs:u,loading:c,imagesOnly:m,setImagesOnly:f,search:h,setSearch:N,shownEntries:x,onSelect:C,onClose:j,pickerSource:g,setPickerSource:p}){if(d.useEffect(()=>{if(!e)return;const P=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=P}},[e]),!e)return null;const y=g||"inputs",w=typeof p=="function",_=()=>{n(""),l(1)},D=P=>{w&&P!==y&&(p(P),n(""),l(1))},T=t.split("/").filter(Boolean);return o.jsxs("div",{className:"fixed inset-0 z-40",children:[o.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:j}),o.jsx("div",{className:"relative w-full h-full sm:h-[90vh] sm:max-w-5xl sm:mx-auto sm:mt-8",children:o.jsxs("div",{className:"flex flex-col w-full h-full rounded-none sm:rounded-3xl border border-[#3D4270] bg-[#050716] shadow-[0_0_40px_rgba(0,0,0,0.9)] overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-3 px-3 sm:px-4 py-2 sm:py-3 border-b border-[#3D4270] bg-[#050716F2]",children:[o.jsx("button",{type:"button",className:"text-[11px] sm:text-xs font-medium tracking-[0.16em] uppercase text-[#9CF7FF] hover:text-[#FFFFFF]",onClick:j,children:"Close"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-[10px] tracking-[0.18em] uppercase text-[#9DA3FFCC]",children:y==="outputs"?"Output Browser":"Input Browser"}),o.jsxs("div",{className:"mt-1 text-[10px] text-[#C3C7FF] overflow-x-auto whitespace-nowrap no-scrollbar",children:[o.jsx("button",{type:"button",className:"hover:text-[#FFFFFF]",onClick:_,children:"/"}),T.map((P,G)=>{const U=T.slice(0,G+1).join("/");return o.jsxs("span",{children:[o.jsx("span",{className:"mx-1 text-[#555A96]",children:"/"}),o.jsx("button",{type:"button",className:"hover:text-[#FFFFFF]",onClick:()=>{n(U),l(1)},children:P})]},U)})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-2 sm:gap-3",children:[w&&o.jsxs("div",{className:"inline-flex rounded-full border border-[#3D4270] bg-[#050716] p-[2px] text-[10px]",children:[o.jsx("button",{type:"button",className:`px-3 py-1 rounded-full tracking-[0.14em] uppercase ${y==="inputs"?"bg-[linear-gradient(90deg,#FF60D0,#3EF0FF)] text-[#050716]":"text-[#C3C7FF] hover:text-[#FFFFFF]"}`,onClick:()=>D("inputs"),children:"Inputs"}),o.jsx("button",{type:"button",className:`px-3 py-1 rounded-full tracking-[0.14em] uppercase ${y==="outputs"?"bg-[linear-gradient(90deg,#FF60D0,#3EF0FF)] text-[#050716]":"text-[#C3C7FF] hover:text-[#FFFFFF]"}`,onClick:()=>D("outputs"),children:"Outputs"})]}),o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{type:"checkbox",className:"h-3.5 w-3.5 accent-[#3EF0FF]",checked:m,onChange:P=>{f(P.target.checked),l(1)}}),o.jsx("span",{className:"text-[10px] sm:text-[11px] text-[#9DA3FFCC]",children:"Images only"})]}),o.jsx("input",{type:"search",value:h,onChange:P=>N(P.target.value),placeholder:"Search",className:"w-28 sm:w-44 rounded-full border border-[#3D4270] bg-[#050716] px-3 py-1.5 text-[11px] text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]"}),o.jsxs("select",{className:"rounded-full border border-[#3D4270] bg-[#050716] px-2.5 py-1.5 text-[11px] text-[#C3C7FF]",value:s,onChange:P=>{const G=parseInt(P.target.value,10)||50;a(G),l(1)},children:[o.jsx("option",{value:25,children:"25"}),o.jsx("option",{value:50,children:"50"}),o.jsx("option",{value:100,children:"100"})]})]}),o.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"px-2.5 py-1 rounded-full border border-[#3D4270] bg-[#050716] text-[11px] text-[#C3C7FF] hover:bg-[#111325] disabled:opacity-40",disabled:r<=1||c,onClick:()=>l(P=>Math.max(1,P-1)),children:""}),o.jsxs("span",{className:"text-[11px] text-[#9DA3FFCC]",children:[r," / ",i]}),o.jsx("button",{type:"button",className:"px-2.5 py-1 rounded-full border border-[#3D4270] bg-[#050716] text-[11px] text-[#C3C7FF] hover:bg-[#111325] disabled:opacity-40",disabled:r>=i||c,onClick:()=>l(P=>P<i?P+1:P),children:""})]})]})]}),u.length>0&&o.jsxs("div",{className:"px-3 sm:px-4 py-2 border-b border-[#3D4270] flex gap-2 overflow-x-auto no-scrollbar",children:[o.jsx("button",{type:"button",className:`px-3 py-1.5 rounded-full text-[11px] font-medium tracking-[0.16em] uppercase ${t===""?"bg-[linear-gradient(90deg,#FF60D0,#3EF0FF)] text-[#050716]":"border border-[#3D4270] bg-[#050716] text-[#C3C7FF] hover:border-[#3EF0FF80]"}`,onClick:_,children:"Root"}),u.map(P=>o.jsx("button",{type:"button",className:`px-3 py-1.5 rounded-full text-[11px] font-medium tracking-[0.16em] uppercase ${t===P.rel_path?"bg-[linear-gradient(90deg,#FF60D0,#3EF0FF)] text-[#050716]":"border border-[#3D4270] bg-[#050716] text-[#C3C7FF] hover:border-[#3EF0FF80]"}`,onClick:()=>{n(P.rel_path),l(1)},children:P.name},P.rel_path))]}),o.jsxs("div",{className:"flex-1 min-h-0 overflow-auto p-3 sm:p-4",children:[c&&o.jsxs("div",{className:"py-10 text-center text-[11px] text-[#9DA3FFCC]",children:["Scanning ",y==="outputs"?"output":"input"," folders"]}),!c&&x.length===0&&o.jsx("div",{className:"py-10 text-center text-[11px] text-[#9DA3FFCC]",children:"Nothing here yet. Try a different folder or turn off Images only."}),o.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-3",children:!c&&x.map(P=>{const G=`${P.source||"input"}::${P.rel_path||P.name}`,U=P.is_dir?"":P.preview_url||(P.source==="output"?$s({filename:P.filename,subfolder:P.subfolder,type:P.type}):Ds(P.rel_path||""));return o.jsx("button",{type:"button",className:"text-left rounded-xl border border-[#3D4270] bg-[#050716] px-2.5 py-2 transition hover:border-[#3EF0FF80]",onClick:()=>{P.is_dir?(n(P.rel_path||""),l(1)):C(P)},children:P.is_dir?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-7 w-7 rounded-xl bg-[radial-gradient(circle_at_0%_0%,#3EF0FF,transparent_55%),radial-gradient(circle_at_100%_100%,#FF60D0,transparent_55%)] opacity-90"}),o.jsx("div",{className:"text-[11px] text-[#E5E7FF] truncate",children:P.name})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"aspect-square w-full rounded-lg overflow-hidden mb-2 bg-[#111325] flex items-center justify-center",children:U?o.jsx("img",{className:"w-full h-full object-cover",alt:P.name,src:U}):o.jsx("div",{className:"w-full h-full bg-[#1b1f3b]"})}),o.jsx("div",{className:"text-[10px] text-[#C3C7FF] truncate",children:P.name})]})},G)})})]}),o.jsxs("div",{className:"sm:hidden border-t border-[#3D4270] px-3 py-2 flex items-center justify-between text-[10px] text-[#9DA3FFCC]",children:[o.jsxs("span",{children:["Page ",r," / ",i]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded-full border border-[#3D4270] bg-[#050716] hover:bg-[#111325] disabled:opacity-40",disabled:r<=1||c,onClick:()=>l(P=>Math.max(1,P-1)),children:""}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded-full border border-[#3D4270] bg-[#050716] hover:bg-[#111325] disabled:opacity-40",disabled:r>=i||c,onClick:()=>l(P=>P<i?P+1:P),children:""})]})]})]})})]})}function $y({input:e,value:t,onFormChange:n}){const{previewUrl:r,imgReady:l,setImgReady:s,displayName:a,serverOpen:i,openServer:u,closeServer:c,cwd:m,setCwd:f,page:h,setPage:N,perPage:x,setPerPage:C,totalPages:j,topDirs:g,loading:p,search:y,setSearch:w,imagesOnly:_,setImagesOnly:D,shownEntries:T,pickerSource:P,setPickerSource:G,handleUpload:U,clearImage:V,selectServer:Z}=uu({input:e,value:t,onFormChange:n}),J=d.useRef(null),F=d.useRef(null),[A,z]=d.useState(0);d.useEffect(()=>{const $=F.current;if(!$)return;const M=O=>{O.preventDefault(),O.stopPropagation()},I=async O=>{var ee,v;M(O);const X=(v=(ee=O.dataTransfer)==null?void 0:ee.files)==null?void 0:v[0];X&&(await U(X),J.current&&(J.current.value=""),z(E=>E+1))};return["dragenter","dragover","dragleave","drop"].forEach(O=>$.addEventListener(O,O==="drop"?I:M)),()=>{["dragenter","dragover","dragleave","drop"].forEach(O=>$.removeEventListener(O,O==="drop"?I:M))}},[U]);const k=async $=>{var I;const M=(I=$.target.files)==null?void 0:I[0];M&&(await U(M),J.current&&(J.current.value=""),z(O=>O+1))},S=()=>{J.current&&J.current.click()};return o.jsxs("div",{className:"asset-card",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[o.jsx("h3",{className:"text-sm font-semibold text-[#F8F4FF] truncate",children:a}),o.jsx("span",{className:"text-[11px] text-[#C3C7FFB3] truncate",children:"Image"})]}),o.jsx("div",{ref:F,className:"mb-3 rounded-xl border border-dashed border-[#3D4270] bg-[#0b1226] flex items-center justify-center min-h-[140px] sm:min-h-[180px] overflow-hidden",children:r?o.jsx("img",{src:r,alt:a,className:`max-h-64 max-w-full object-contain transition-opacity ${l?"opacity-100":"opacity-0"}`,onLoad:()=>s(!0)}):o.jsx("div",{className:"text-[11px] text-[#9DA3FFCC] text-center px-6",children:"Drop an image here, upload from your device, or choose one from your server."})}),o.jsx("input",{ref:J,type:"file",accept:"image/*",className:"hidden",onChange:k},A),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("button",{type:"button",className:"ui-button is-primary is-compact",onClick:u,children:"Choose"}),o.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:S,children:"Upload"}),o.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:V,children:"Clear"})]}),o.jsx(cu,{open:i,cwd:m,setCwd:f,page:h,setPage:N,perPage:x,setPerPage:C,totalPages:j,topDirs:g,loading:p,imagesOnly:_,setImagesOnly:D,search:y,setSearch:w,shownEntries:T,pickerSource:P,setPickerSource:G,onSelect:Z,onClose:c})]})}function Uy({open:e,onClose:t,title:n,description:r,render:l,index:s=0,total:a=0,children:i}){const[u,c]=d.useState("idle");if(d.useEffect(()=>{if(u==="queued"){const f=setTimeout(()=>c("idle"),1600);return()=>clearTimeout(f)}},[u]),!e)return null;const m=typeof l=="function"?l():i;return o.jsxs("div",{className:"spotlight-overlay",role:"dialog","aria-modal":"true",children:[o.jsx("div",{className:"spotlight-backdrop",onClick:t}),o.jsxs("div",{className:"spotlight-sheet",children:[o.jsxs("div",{className:"spotlight-header",children:[o.jsxs("div",{className:"spotlight-meta",children:[o.jsx("div",{className:"spotlight-kicker",children:"Focused control"}),o.jsx("div",{className:"spotlight-title",children:n||"Control"}),r?o.jsx("div",{className:"spotlight-hint",children:r}):null]}),o.jsx("button",{type:"button",className:"spotlight-close",onClick:t,"aria-label":"Close",children:""})]}),o.jsx("div",{className:"spotlight-body",children:m}),o.jsx("div",{className:"spotlight-footer",children:o.jsx("div",{className:"spotlight-footer-right",children:o.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:t,"aria-label":"Close",children:"Close"})})})]})]})}function By({open:e,onClose:t,value:n="",onChange:r,aliasOptions:l=[],aliasCatalog:s=[],aliasLookup:a,fieldLabel:i="Prompt"}){const u=d.useRef(null),c=d.useRef(null),m=d.useRef(null),f=d.useRef(null),[h,N]=d.useState(n),[x,C]=d.useState(""),[j,g]=d.useState("All"),[p,y]=d.useState("All"),[w,_]=d.useState(30),[D,T]=d.useState("compose"),[P,G]=d.useState(null),[U,V]=d.useState(null),Z=d.useRef(null),J=d.useRef(null);d.useEffect(()=>{e&&N(n)},[e,n]);const F=d.useMemo(()=>Array.isArray(s)?s.filter(B=>B&&B.name):[],[s]),A=d.useMemo(()=>{const B={precip:"Weather",ambient:"Atmosphere",sky:"Sky",urbex:"Urban Exploration",scifi:"Sci-Fi",framing:"Framing",angle:"Angle",perspective:"Perspective",composition:"Composition",motion:"Motion"},Y={sky_hour:"Golden Hour",sky_blue:"Clear Blue Sky",sky_clouds:"Sunset Clouds",sky_lights:"Aurora Borealis",sky_night:"Starry Night",sky_rainbow:"Rainbow",ambient_mist:"Misty Fog",ambient_blossom:"Cherry Blossoms",ambient_leaves:"Autumn Leaves",ambient_storm:"Sandstorm",ambient_heatwave:"Heat Wave",precip_day:"Rainy Day",precip_thunderstorm:"Thunderstorm",precip_snowfall:"Snowfall",precip_blizzard:"Blizzard",painterly_painterly:"Painterly",explorer_explorer:"Explorer",painterly_e_print:"Ukiyo-e Print",painterly_wash_monochrome:"Ink Wash"};return F.map(re=>{const ae=re.name||"",ue=re.token||ae,he=ue.includes(":")?ue.split(":")[1]:ue;if(Y[he]){const pe=he.split("_").filter(Boolean),ge=pe.length>0?pe[0]:"other";return{...re,subcategory:ge,displayName:Y[he]}}const ce=he.replace(/_(\d+)$/,"").split("_").filter(Boolean),Pe=ce.length>0?ce[0]:"other",ct=ce.length>1?ce.slice(1):[],ze=pe=>pe.charAt(0).toUpperCase()+pe.slice(1),b=ct.map(ze).join(" ").trim(),W=ce.map(ze).join(" ").trim(),Q=B[Pe.toLowerCase()]||ze(Pe);let ne;return!b||b.toLowerCase()===Q.toLowerCase()?ne=W||he||ae:ne=`${Q} - ${b}`,{...re,subcategory:Pe,displayName:ne}})},[F]),z=d.useMemo(()=>{const B=new Set(["All"]);return F.forEach(Y=>{Y.category&&B.add(Y.category)}),Array.from(B).sort((Y,re)=>Y.localeCompare(re))},[F]),k=d.useMemo(()=>{const B=new Set(["All"]);return A.forEach(Y=>{(!j||j==="All"||Y.category===j)&&Y.subcategory&&B.add(Y.subcategory)}),Array.from(B).sort((Y,re)=>Y.localeCompare(re))},[A,j]),S=d.useMemo(()=>{const B=x.trim().toLowerCase();return A.filter(Y=>{var re,ae,ue;return j!=="All"&&(Y.category||"")!==j||p!=="All"&&(Y.subcategory||"other")!==p?!1:B?((re=Y.token)==null?void 0:re.toLowerCase().includes(B))||((ae=Y.text)==null?void 0:ae.toLowerCase().includes(B))||((ue=Y.name)==null?void 0:ue.toLowerCase().includes(B)):!0}).sort((Y,re)=>{const ae=(Y.subcategory||"").toLowerCase(),ue=(re.subcategory||"").toLowerCase();return ae!==ue?ae.localeCompare(ue):Y.token.localeCompare(re.token)})},[A,j,p,x]),$=d.useMemo(()=>S.slice(0,w),[S,w]);d.useEffect(()=>{_(30)},[j,p,x,F]),d.useEffect(()=>{y("All")},[j]),d.useEffect(()=>{const B=f.current;if(!B)return;const Y=new IntersectionObserver(re=>{re[0].isIntersecting&&w<S.length&&_(ue=>Math.min(ue+20,S.length))},{threshold:.1});return Y.observe(B),()=>Y.disconnect()},[w,S.length]);const M=d.useMemo(()=>{if(typeof h!="string")return[];const B=[],Y=/\$([a-z0-9_:-]+)\$/gi;let re;for(;re=Y.exec(h);)B.push({token:re[1],index:re.index,length:re[0].length});return B},[h]),I=d.useMemo(()=>{if(!h||!a)return h;try{return h.replace(/\$([a-z0-9_:-]+)\$/gi,(B,Y)=>{const re=a.get(Y.toLowerCase());return typeof re=="string"?re:B})}catch{return h}},[h,a]);d.useEffect(()=>{const B=document.body;if(e&&B){const Y=window.scrollY||window.pageYOffset;c.current=Y,B.style.position="fixed",B.style.top=`-${Y}px`,B.style.left="0",B.style.right="0",B.style.width="100%"}else if(!e&&B&&c.current!==null){const Y=c.current;B.style.position="",B.style.top="",B.style.left="",B.style.right="",B.style.width="",window.scrollTo({top:Y,behavior:"auto"}),c.current=null}},[e]),d.useEffect(()=>{e&&u.current&&requestAnimationFrame(()=>{var B;return(B=u.current)==null?void 0:B.focus({preventScroll:!0})})},[e]);const O=B=>{N(B.target.value)},X=B=>{const Y=u.current,re=`$${B}$`,ae=h||"",ue=(Y==null?void 0:Y.selectionStart)??ae.length,he=(Y==null?void 0:Y.selectionEnd)??ae.length,fe=ae.slice(0,ue),ce=ae.slice(he),Pe=fe.match(/[^\s]$/),ct=ce.match(/^[^\s]/),ze=Pe&&Pe[0]!==","?", ":"",b=ct&&ct[0]!==","?", ":"",W=fe+ze+re+b+ce;N(W);const Q=(fe+ze+re+b).length;T("compose"),requestAnimationFrame(()=>{Y&&(Y.focus(),Y.setSelectionRange(Q,Q))})},ee=B=>{const Y=h||"",re=B.index,ae=B.index+B.length,ue=Y.slice(0,re).replace(/[\s,]*$/,""),he=Y.slice(ae).replace(/^[\s,]*/,""),fe=ue?`${ue} ${he}`.trim():he.trim();N(fe)},v=d.useCallback((B,Y)=>{if(B===Y||B===null||Y===null)return;const re=h||"",ae=M[0],ue=M[M.length-1],he=ae?re.slice(0,ae.index).replace(/[\s,]*$/,""):"",fe=ue?re.slice(ue.index+ue.length).replace(/^[\s,]*/,""):"",ce=[...M],[Pe]=ce.splice(B,1);ce.splice(Y,0,Pe);const ze=ce.map(W=>`$${W.token}$`).join(", ");let b="";he?b=`${he}, ${ze}`:b=ze,fe&&(b=`${b}, ${fe}`),N(b.trim())},[h,M]),E=d.useCallback((B,Y)=>{G(Y),Z.current=B.target,B.dataTransfer.effectAllowed="move",B.dataTransfer.setData("text/plain",Y.toString()),requestAnimationFrame(()=>{Z.current&&Z.current.classList.add("is-dragging")})},[]),L=d.useCallback(()=>{Z.current&&Z.current.classList.remove("is-dragging"),P!==null&&U!==null&&P!==U&&v(P,U),G(null),V(null),Z.current=null},[P,U,v]),R=d.useCallback((B,Y)=>{B.preventDefault(),B.dataTransfer.dropEffect="move",Y!==U&&V(Y)},[U]),H=d.useCallback(()=>{},[]),q=d.useCallback((B,Y)=>{const re=B.touches[0];J.current={idx:Y,startX:re.clientX,startY:re.clientY,moved:!1}},[]),le=d.useCallback(B=>{if(!J.current)return;const Y=B.touches[0],re=Math.abs(Y.clientX-J.current.startX),ae=Math.abs(Y.clientY-J.current.startY);if(re>10||ae>10){J.current.moved=!0,G(J.current.idx);const ue=document.querySelectorAll(".composer-token-draggable"),he=Y.clientX,fe=Y.clientY;for(let ce=0;ce<ue.length;ce++){const Pe=ue[ce].getBoundingClientRect();if(he>=Pe.left&&he<=Pe.right&&fe>=Pe.top&&fe<=Pe.bottom){V(ce);break}}}},[]),oe=d.useCallback(()=>{var B;(B=J.current)!=null&&B.moved&&P!==null&&U!==null&&P!==U&&v(P,U),J.current=null,G(null),V(null)},[P,U,v]),we=()=>{r==null||r(h),t==null||t()},Oe=()=>{t==null||t()};return e?o.jsxs("div",{className:"composer-overlay",role:"dialog","aria-modal":"true",children:[o.jsx("div",{className:"composer-backdrop",onClick:Oe}),o.jsxs("div",{className:"composer-sheet",children:[o.jsxs("div",{className:"composer-header",children:[o.jsxs("div",{className:"composer-header-left",children:[o.jsx("div",{className:"composer-kicker",children:"Prompt Composer"}),o.jsx("div",{className:"composer-title",children:i})]}),o.jsx("button",{type:"button",className:"composer-close",onClick:Oe,"aria-label":"Close",children:""})]}),o.jsxs("div",{className:"composer-tabs",children:[o.jsx("button",{type:"button",className:`composer-tab ${D==="compose"?"is-active":""}`,onClick:()=>T("compose"),children:"Write"}),o.jsxs("button",{type:"button",className:`composer-tab ${D==="aliases"?"is-active":""}`,onClick:()=>T("aliases"),children:["Aliases",F.length>0&&o.jsx("span",{className:"composer-tab-badge",children:F.length})]})]}),o.jsxs("div",{className:"composer-content",children:[o.jsxs("div",{className:`composer-panel composer-panel-compose ${D==="compose"?"is-visible":""}`,children:[o.jsx("div",{className:"composer-textarea-wrap",children:o.jsx("textarea",{ref:u,value:h,onChange:O,placeholder:"Write your prompt here... Use $alias$ tokens to insert dynamic content.",className:"composer-textarea",rows:6})}),M.length>0&&o.jsxs("div",{className:"composer-tokens",children:[o.jsxs("div",{className:"composer-tokens-label",children:["Active tokens: ",o.jsx("span",{className:"composer-tokens-hint",children:"(drag to reorder)"})]}),o.jsx("div",{className:"composer-tokens-list",children:M.map((B,Y)=>{const re=A.find(fe=>{var ce;return((ce=fe.token)==null?void 0:ce.toLowerCase())===B.token.toLowerCase()}),ae=(re==null?void 0:re.displayName)||B.token,ue=P===Y,he=U===Y&&P!==null&&P!==Y;return o.jsxs("span",{className:`composer-token composer-token-draggable ${ue?"is-dragging":""} ${he?"is-drop-target":""}`,title:`$${B.token}$`,draggable:!0,onDragStart:fe=>E(fe,Y),onDragEnd:L,onDragOver:fe=>R(fe,Y),onDragLeave:H,onTouchStart:fe=>q(fe,Y),onTouchMove:le,onTouchEnd:oe,children:[o.jsx("span",{className:"composer-token-drag-handle","aria-hidden":"true",children:""}),o.jsx("span",{className:"composer-token-name",children:ae}),o.jsx("button",{type:"button",className:"composer-token-remove",onClick:fe=>{fe.stopPropagation(),ee(B)},"aria-label":`Remove ${B.token}`,children:""})]},`${B.token}-${B.index}`)})})]}),o.jsxs("div",{className:"composer-preview",children:[o.jsx("div",{className:"composer-preview-label",children:"Preview (expanded):"}),o.jsx("div",{className:"composer-preview-content",children:I||""})]}),o.jsxs("div",{className:"composer-actions",children:[o.jsx("button",{type:"button",className:"composer-btn composer-btn-secondary",onClick:Oe,children:"Cancel"}),o.jsx("button",{type:"button",className:"composer-btn composer-btn-primary",onClick:we,children:"Apply"})]})]}),o.jsxs("div",{className:`composer-panel composer-panel-aliases ${D==="aliases"?"is-visible":""}`,children:[o.jsx("div",{className:"composer-categories",children:z.map(B=>o.jsx("button",{type:"button",onClick:()=>g(B),className:`composer-category-pill ${j===B?"is-active":""}`,children:B==="All"?"All":B},`cat-${B}`))}),o.jsxs("div",{className:"composer-filters",children:[o.jsx("input",{ref:m,type:"text",value:x,onChange:B=>C(B.target.value),placeholder:"Search aliases...",className:"composer-search"}),k.length>2&&o.jsx("select",{value:p,onChange:B=>y(B.target.value),className:"composer-subcategory-select",children:k.map(B=>o.jsx("option",{value:B,children:B==="All"?"All subcategories":B},B))})]}),o.jsx("div",{className:"composer-alias-list",children:S.length===0?o.jsx("div",{className:"composer-alias-empty",children:"No aliases found."}):o.jsxs(o.Fragment,{children:[$.map(B=>o.jsxs("button",{type:"button",onClick:()=>X(B.token),className:"composer-alias-item",children:[o.jsxs("div",{className:"composer-alias-header",children:[o.jsx("div",{className:"composer-alias-name",children:B.displayName||B.token}),B.category&&o.jsx("span",{className:"composer-alias-category",children:B.category})]}),o.jsxs("div",{className:"composer-alias-token",children:["$",B.token,"$"]}),o.jsx("div",{className:"composer-alias-text",children:B.text})]},B.key)),w<S.length&&o.jsx("div",{ref:f,className:"composer-sentinel"})]})})]})]})]})]}):null}function Hc({name:e,label:t,description:n,value:r,onChange:l,onEnter:s,disabled:a=!1,multiline:i=!1,aliasOptions:u=[],aliasCatalog:c=[],onOpenComposer:m}){const f=d.useRef(null),h=d.useRef(null),N=d.useRef(null),[x,C]=d.useState(!1),[j,g]=d.useState(""),[p,y]=d.useState("All"),[w,_]=d.useState("All"),[D]=d.useState([]),[T,P]=d.useState([]),G=d.useRef(null);d.useMemo(()=>Array.isArray(u)?u.filter(Boolean):[],[u]);const U=d.useMemo(()=>Array.isArray(c)?c.filter(v=>v&&v.name):[],[c]),V=d.useMemo(()=>{const v={precip:"Weather",ambient:"Atmosphere",sky:"Sky",urbex:"Urban Exploration",scifi:"Sci-Fi",framing:"Framing",angle:"Angle",perspective:"Perspective",composition:"Composition",motion:"Motion"},E={sky_hour:"Golden Hour",sky_blue:"Clear Blue Sky",sky_clouds:"Sunset Clouds",sky_lights:"Aurora Borealis",sky_night:"Starry Night",sky_rainbow:"Rainbow",ambient_mist:"Misty Fog",ambient_blossom:"Cherry Blossoms",ambient_leaves:"Autumn Leaves",ambient_storm:"Sandstorm",ambient_heatwave:"Heat Wave",precip_day:"Rainy Day",precip_thunderstorm:"Thunderstorm",precip_snowfall:"Snowfall",precip_blizzard:"Blizzard",painterly_painterly:"Painterly",explorer_explorer:"Explorer",painterly_e_print:"Ukiyo-e Print",painterly_wash_monochrome:"Ink Wash"};return U.map(L=>{const R=L.name||"",H=L.token||R,q=H.includes(":")?H.split(":")[1]:H;if(E[q]){const he=q.split("_").filter(Boolean),fe=he.length>0?he[0]:"other";return{...L,subcategory:fe,displayName:E[q]}}const oe=q.replace(/_(\d+)$/,"").split("_").filter(Boolean),we=oe.length>0?oe[0]:"other",Oe=oe.length>1?oe.slice(1):[],B=he=>he.charAt(0).toUpperCase()+he.slice(1),Y=Oe.map(B).join(" ").trim(),re=oe.map(B).join(" ").trim(),ae=v[we.toLowerCase()]||B(we);let ue;return!Y||Y.toLowerCase()===ae.toLowerCase()?ue=re||q||R:ue=`${ae} - ${Y}`,{...L,subcategory:we,displayName:ue}})},[U]),Z=v=>{const E=v.target.value;l==null||l(E),z(E)},J=v=>{if(!i&&v.key==="Enter"){v.preventDefault(),s==null||s(v.target.value,v);return}};d.useEffect(()=>{if(!i)return;const v=f.current;if(!v)return;const E=()=>{v.style.height="auto",v.style.height=`${Math.min(v.scrollHeight,320)}px`};E();const L=new MutationObserver(E);return L.observe(v,{characterData:!0,subtree:!0}),()=>L.disconnect()},[r,i]);const F=d.useMemo(()=>{const v=new Set(["All"]);return U.forEach(E=>{E.category&&v.add(E.category)}),Array.from(v).sort((E,L)=>E.localeCompare(L))},[U]),A=d.useMemo(()=>{const v=new Set(["All"]);return V.forEach(E=>{(!p||p==="All"||E.category===p)&&E.subcategory&&v.add(E.subcategory)}),Array.from(v).sort((E,L)=>E.localeCompare(L))},[V,p]),z=v=>{if(typeof v!="string"){P([]);return}const E=[],L=/\$([a-z0-9_:-]+)\$/gi;let R;for(;R=L.exec(v);)E.push({token:R[1],index:R.index,length:R[0].length});P(E)};d.useEffect(()=>{z(r||"")},[r]),d.useEffect(()=>{x&&G.current&&requestAnimationFrame(()=>{var v;return(v=G.current)==null?void 0:v.focus({preventScroll:!0})})},[x]),d.useEffect(()=>{const v=document.body;if(x&&v){const E=window.scrollY||window.pageYOffset;N.current=E,v.style.position="fixed",v.style.top=`-${E}px`,v.style.left="0",v.style.right="0",v.style.width="100%"}else if(!x&&v&&N.current!==null){const E=N.current;v.style.position="",v.style.top="",v.style.left="",v.style.right="",v.style.width="",window.scrollTo({top:E,behavior:"auto"}),N.current=null}},[x]);const k=()=>{h.current&&h.current.scrollIntoView({block:"center",behavior:"smooth"}),C(!0)},S=d.useMemo(()=>{const v=j.trim().toLowerCase();return V.filter(E=>{var L,R,H;return p!=="All"&&(E.category||"")!==p||w!=="All"&&(E.subcategory||"other")!==w?!1:v?((L=E.token)==null?void 0:L.toLowerCase().includes(v))||((R=E.text)==null?void 0:R.toLowerCase().includes(v))||((H=E.name)==null?void 0:H.toLowerCase().includes(v)):!0}).sort((E,L)=>{const R=(E.subcategory||"").toLowerCase(),H=(L.subcategory||"").toLowerCase();return R!==H?R.localeCompare(H):E.token.localeCompare(L.token)})},[V,p,w,j]),[$,M]=d.useState(30),I=d.useMemo(()=>S.slice(0,$),[S,$]);d.useEffect(()=>{M(30)},[p,w,j,U]),d.useEffect(()=>{_("All")},[p]);const O=v=>{const E=f.current,L=`$${v}$`,R=r||"",H=(E==null?void 0:E.selectionStart)??R.length,q=(E==null?void 0:E.selectionEnd)??R.length,le=R.slice(0,H),oe=R.slice(q),we=le.match(/[^\s]$/),Oe=oe.match(/^[^\s]/),B=we&&we[0]!==","?", ":"",Y=Oe&&Oe[0]!==","?", ":"",re=le+B+L+Y+oe;l==null||l(re);const ae=(le+B+L+Y).length;requestAnimationFrame(()=>{E&&(E.focus(),E.setSelectionRange(ae,ae))}),C(!1)},X=v=>{const E=r||"",L=v.index,R=v.index+v.length,H=E.slice(0,L).replace(/[\s,]*$/,""),q=E.slice(R).replace(/^[\s,]*/,""),le=H?`${H} ${q}`.trim():q.trim();l==null||l(le)},ee={id:e,name:e,value:r??"",onChange:Z,disabled:a,className:"w-full rounded-xl border border-[#2A2E4A] bg-[#050716] px-3 py-2.5 pr-10 text-[13px] sm:text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80] transition-shadow shadow-[0_0_18px_rgba(5,7,22,0.7)]",placeholder:"","aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0};return i?o.jsxs("div",{className:"relative space-y-2",ref:h,children:[o.jsx("textarea",{ref:f,...ee,rows:3,wrap:"soft",onKeyDown:J,className:ee.className+" resize-y min-h-[88px] max-h-[320px] leading-relaxed overflow-y-auto overflow-x-hidden break-words whitespace-pre-wrap",style:{whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"}}),T.length?o.jsx("div",{className:"flex flex-wrap gap-1",children:T.map(v=>{const E=V.find(R=>{var H;return((H=R.token)==null?void 0:H.toLowerCase())===v.token.toLowerCase()}),L=(E==null?void 0:E.displayName)||v.token;return o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md bg-[#0F1A2F] border border-[#2A2E4A] px-2 py-1 text-[11px] text-[#E5E7FF]",title:`$${v.token}$`,onClick:()=>{const R=v.index,H=v.index+v.length,q=f.current;q&&(q.focus(),q.setSelectionRange(R,H)),k()},children:[L,o.jsx("button",{type:"button",className:"text-[#FF8F70]",onClick:R=>{R.stopPropagation(),X(v)},"aria-label":`Remove ${v.token}`,children:""})]},`${v.token}-${v.index}`)})}):null,U.length?o.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8 rounded-lg border border-[#2A2E4A] bg-[#0F1A2F] text-sm text-[#E5E7FF] shadow-sm hover:border-[#5EF1D4] transition",onClick:()=>m?m(e):k(),title:m?"Open prompt composer":"Insert alias",children:m?"":""}):null,x?o.jsxs("div",{className:"fixed inset-0 z-50 sm:z-40 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>C(!1)}),o.jsxs("div",{className:"relative w-full max-w-xl mx-3 sm:mx-0 bg-[#0B1226] border border-[#2A2E4A] rounded-2xl shadow-[0_20px_50px_rgba(4,7,16,0.45)] p-3 sm:p-4 space-y-3 h-[70vh] max-h-[80vh] flex flex-col min-h-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-[#E5E7FF]",children:"Alias picker"}),o.jsx("button",{type:"button",className:"text-xs text-[#E5E7FF] underline",onClick:()=>C(!1),children:"Close"})]}),o.jsxs("div",{className:"flex flex-col gap-3 flex-1 min-h-0",children:[o.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-1",children:["All",...F.filter(v=>v!=="All")].map(v=>o.jsx("button",{type:"button",onClick:()=>y(v),className:`flex-shrink-0 rounded-full border px-3 py-1 text-[12px] ${p===v?"border-[#5EF1D4] bg-[#0F1A2F]":"border-[#1D2440] bg-[#0A1022] hover:border-[#2A2E4A]"} text-[#E5E7FF] transition`,children:v==="All"?"All Aliases":v},`cat-${v}`))}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 flex-wrap",children:[o.jsx("div",{className:"flex-1 min-w-[160px] w-full",children:o.jsx("input",{ref:G,type:"text",value:j,onChange:v=>g(v.target.value),placeholder:"Search aliases",className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]"})}),o.jsxs("label",{className:"flex sm:flex-row flex-col sm:items-center gap-1 text-[12px] text-[#7F91B6]",children:[o.jsx("span",{children:"Subcategory"}),o.jsx("select",{value:w,onChange:v=>_(v.target.value),className:"h-9 rounded-lg border border-[#2A2E4A] bg-[#0C1222] px-2 text-sm text-[#E5E7FF] focus:outline-none",children:A.map(v=>o.jsx("option",{value:v,children:v==="All"?"All subcategories":v},v))})]})]}),o.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto overscroll-contain pr-1 space-y-1",children:S.length===0?o.jsx("div",{className:"text-[12px] text-[#A9B6D9]",children:"No aliases found."}):o.jsxs(o.Fragment,{children:[I.map(v=>o.jsxs("button",{type:"button",onClick:()=>O(v.token),className:"w-full text-left rounded-lg border border-[#1D2440] bg-[#0C1222] px-3 py-2 hover:border-[#5EF1D4] transition-colors",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"text-[13px] font-semibold text-[#E5E7FF] truncate",children:v.displayName||v.token}),v.category?o.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-[#0F1A2F] border border-[#2A2E4A] text-[#7F91B6]",children:v.category}):null]}),o.jsxs("div",{className:"text-[11px] text-[#7F91B6] truncate",children:["$",v.token,"$"]}),o.jsx("div",{className:"text-[11px] text-[#A9B6D9] line-clamp-2",children:v.text})]},v.key)),$<S.length?o.jsx("div",{className:"flex justify-center py-2",children:o.jsxs("button",{type:"button",onClick:()=>M(v=>Math.min(v+30,S.length)),className:"px-3 py-1 rounded-md border border-[#2A2E4A] bg-[#0F1A2F] text-[12px] text-[#E5E7FF] hover:border-[#5EF1D4] transition",children:["Show more (",S.length-$," left)"]})}):null]})})]})]})]}):null]}):o.jsxs("div",{className:"relative space-y-2",ref:h,children:[o.jsx("input",{...ee,type:"text",inputMode:"text",autoComplete:"off",onKeyDown:J,className:ee.className+" min-h-[44px]",ref:f}),T.length?o.jsx("div",{className:"flex flex-wrap gap-1",children:T.map(v=>{const E=V.find(R=>{var H;return((H=R.token)==null?void 0:H.toLowerCase())===v.token.toLowerCase()}),L=(E==null?void 0:E.displayName)||v.token;return o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md bg-[#0F1A2F] border border-[#2A2E4A] px-2 py-1 text-[11px] text-[#E5E7FF]",title:`$${v.token}$`,onClick:()=>{const R=v.index,H=v.index+v.length,q=f.current;q&&(q.focus(),q.setSelectionRange(R,H)),k()},children:[L,o.jsx("button",{type:"button",className:"text-[#FF8F70]",onClick:R=>{R.stopPropagation(),X(v)},"aria-label":`Remove ${v.token}`,children:""})]},`${v.token}-${v.index}`)})}):null,U.length?o.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8 rounded-lg border border-[#2A2E4A] bg-[#0F1A2F] text-sm text-[#E5E7FF] shadow-sm hover:border-[#5EF1D4] transition",onClick:()=>m?m(e):k(),title:m?"Open prompt composer":"Insert alias",children:m?"":""}):null,x?o.jsxs("div",{className:"fixed inset-0 z-50 sm:z-40 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>C(!1)}),o.jsxs("div",{className:"relative w-full max-w-xl mx-3 sm:mx-0 bg-[#0B1226] border border-[#2A2E4A] rounded-2xl shadow-[0_20px_50px_rgba(4,7,16,0.45)] p-3 sm:p-4 space-y-3 h-[70vh] max-h-[80vh] flex flex-col min-h-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-[#E5E7FF]",children:"Alias picker"}),o.jsx("button",{type:"button",className:"text-xs text-[#E5E7FF] underline",onClick:()=>C(!1),children:"Close"})]}),o.jsxs("div",{className:"flex flex-col gap-3 flex-1 min-h-0",children:[o.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-1",children:["All",...F.filter(v=>v!=="All")].map(v=>o.jsx("button",{type:"button",onClick:()=>y(v),className:`flex-shrink-0 rounded-full border px-3 py-1 text-[12px] ${p===v?"border-[#5EF1D4] bg-[#0F1A2F]":"border-[#1D2440] bg-[#0A1022] hover:border-[#2A2E4A]"} text-[#E5E7FF] transition`,children:v==="All"?"All Aliases":v},`cat-${v}`))}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 flex-wrap",children:[o.jsx("div",{className:"flex-1 min-w-[160px]",children:o.jsx("input",{ref:G,type:"text",value:j,onChange:v=>g(v.target.value),placeholder:"Search aliases",className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]"})}),o.jsxs("label",{className:"flex sm:flex-row flex-col sm:items-center gap-1 text-[12px] text-[#7F91B6]",children:[o.jsx("span",{children:"Subcategory"}),o.jsx("select",{value:w,onChange:v=>_(v.target.value),className:"h-9 rounded-lg border border-[#2A2E4A] bg-[#0C1222] px-2 text-sm text-[#E5E7FF] focus:outline-none",children:A.map(v=>o.jsx("option",{value:v,children:v==="All"?"All subcategories":v},v))})]})]}),o.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto overscroll-contain pr-1 space-y-1",children:S.length===0?o.jsx("div",{className:"text-[12px] text-[#A9B6D9]",children:"No aliases found."}):o.jsxs(o.Fragment,{children:[I.map(v=>o.jsxs("button",{type:"button",onClick:()=>O(v.token),className:"w-full text-left rounded-lg border border-[#1D2440] bg-[#0C1222] px-3 py-2 hover:border-[#5EF1D4] transition-colors",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"text-[13px] font-semibold text-[#E5E7FF] truncate",children:v.displayName||v.token}),v.category?o.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-[#0F1A2F] border border-[#2A2E4A] text-[#7F91B6]",children:v.category}):null]}),o.jsxs("div",{className:"text-[11px] text-[#7F91B6] truncate",children:["$",v.token,"$"]}),o.jsx("div",{className:"text-[11px] text-[#A9B6D9] line-clamp-2",children:v.text})]},v.key)),$<S.length?o.jsx("div",{className:"flex justify-center py-2",children:o.jsxs("button",{type:"button",onClick:()=>M(v=>Math.min(v+30,S.length)),className:"px-3 py-1 rounded-md border border-[#2A2E4A] bg-[#0F1A2F] text-[12px] text-[#E5E7FF] hover:border-[#5EF1D4] transition",children:["Show more (",S.length-$," left)"]})}):null]})})]})]})]}):null]})}const Gc=e=>e==null?void 0:String(e).trim().replace(/[^A-Za-z0-9_-]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")||void 0;function el({name:e,label:t,description:n,value:r,onChange:l,disabled:s=!1,min:a,max:i,step:u,isFloat:c=!1,inputId:m}){const f=u??(c?.01:1),h=m??Gc(e),N=j=>{if(j===""||j===null||j===void 0)return"";const g=c?parseFloat(j):parseInt(j,10);return Number.isNaN(g)?"":g},x=j=>{const g=j.target.value,p=N(g);l==null||l(p)},C=j=>{if(j.key!=="ArrowUp"&&j.key!=="ArrowDown")return;j.preventDefault();const g=typeof r=="number"?r:N(String(r??""))||0,p=j.key==="ArrowUp"?f:-f;let y=g+p;if(typeof a=="number"&&(y=Math.max(a,y)),typeof i=="number"&&(y=Math.min(i,y)),c){const w=typeof f=="number"?(String(f).split(".")[1]||"").length:2;y=parseFloat(y.toFixed(Math.max(w,2)))}l==null||l(y)};return o.jsxs("div",{className:"w-full flex items-center gap-2",children:[o.jsx("input",{id:h,name:e,type:"number",inputMode:c?"decimal":"numeric",value:r??"",onChange:x,onKeyDown:C,disabled:s,min:a,max:i,step:f,"aria-label":t||e,"aria-describedby":n?`${h||Gc(e)||e}-description`:void 0,className:"w-full rounded-xl border border-[#2A2E4A] bg-[#050716] px-3 py-2.5 text-[13px] sm:text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80] transition-shadow shadow-[0_0_18px_rgba(5,7,22,0.7)]"}),typeof a=="number"||typeof i=="number"?o.jsxs("div",{className:"hidden sm:flex flex-col text-[10px] text-[#6A6FA8] text-right leading-tight",children:[typeof a=="number"&&o.jsxs("span",{children:["min ",a]}),typeof i=="number"&&o.jsxs("span",{children:["max ",i]})]}):null]})}function Kc({name:e,label:t,description:n,value:r,onChange:l,disabled:s=!1}){const a=!!r,i=()=>{s||l==null||l(!a)},u=c=>{(c.key===" "||c.key==="Enter")&&(c.preventDefault(),i())};return o.jsxs("button",{id:e,type:"button",role:"switch","aria-checked":a,"aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0,onClick:i,onKeyDown:u,disabled:s,className:"inline-flex items-center justify-between gap-2 rounded-full border border-[#3D4270] bg-[#050716] px-2.5 py-1.5 text-[10px] sm:text-[11px] text-[#C3C7FF] transition-colors shadow-[0_0_16px_rgba(5,7,22,0.9)] "+(a?"bg-[radial-gradient(circle_at_0%_0%,#3EF0FF,transparent_60%),radial-gradient(circle_at_100%_100%,#FF60D0,transparent_60%)] text-[#050716]":"hover:border-[#3EF0FF80]"),children:[o.jsx("span",{className:"relative inline-flex h-4 w-8 items-center rounded-full "+(a?"bg-[#3EF0FF]":"bg-[#2A2E4A]"),children:o.jsx("span",{className:"h-3 w-3 rounded-full bg-[#050716] shadow-[0_0_6px_rgba(0,0,0,0.6)] transform transition-transform "+(a?"translate-x-[14px]":"translate-x-[2px]")})}),o.jsx("span",{className:"uppercase tracking-[0.16em]",children:a?"TRUE":"FALSE"})]})}function Za({name:e,label:t,description:n,value:r,onChange:l,disabled:s=!1,options:a=[]}){const[i,u]=d.useState("All"),c=d.useMemo(()=>(a||[]).map(x=>typeof x=="string"?{value:x,label:x}:{value:x.value??x.name??"",label:x.label??x.name??String(x.value??"")}),[a]),m=(x="")=>{if(typeof x!="string")return"Other";if(!x.includes("/"))return"root";const C=x.split("/");return C.slice(0,C.length-1).join("/")||"root"},f=d.useMemo(()=>{const x=new Set(["All"]);return c.forEach(C=>x.add(m(C.label))),Array.from(x).sort((C,j)=>C.localeCompare(j))},[c]),h=d.useMemo(()=>{const x=C=>C.replace(/\.[^.]+$/,"");return c.filter(C=>{const j=m(C.label);return i==="All"||j===i}).map(C=>{if(i==="All")return C;const j=(C.label||"").split("/"),g=x(j[j.length-1]||C.label);return{...C,label:g}}).sort((C,j)=>C.label.localeCompare(j.label))},[c,i]),N=x=>{l==null||l(x.target.value)};return o.jsxs("div",{className:"relative w-full space-y-2",children:[o.jsx("select",{value:i,onChange:x=>u(x.target.value),className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-[13px] sm:text-sm text-[#E5E7FF] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80] transition-shadow shadow-[0_0_12px_rgba(5,7,22,0.6)]","aria-label":`Choose folder for ${t||e}`,children:f.map(x=>o.jsx("option",{value:x,children:x},x))}),o.jsxs("select",{id:e,name:e,value:r??"",onChange:N,disabled:s,"aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0,className:"w-full rounded-xl border border-[#2A2E4A] bg-[#050716] px-3 py-2.5 pr-8 text-[13px] sm:text-sm text-[#E5E7FF] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80] appearance-none transition-shadow shadow-[0_0_18px_rgba(5,7,22,0.7)]",children:[h.length>0&&(r===void 0||r==="")&&o.jsx("option",{value:"",children:"Select"}),h.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value)),h.length===0&&o.jsx("option",{value:"",children:"No matches"})]}),o.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center",children:o.jsx("span",{className:"inline-block h-[6px] w-[10px] border-x-[5px] border-t-[6px] border-x-transparent border-t-[#9CF7FF]"})})]})}function Qc(e=[]){return e.map(t=>typeof t=="string"?{value:t,label:t}:{value:t.value??t.name??"",label:t.label??t.name??String(t.value??"")})}function Yc(e,t){if(!e)return null;const n=String(e);if(t==="high"){const r=n.match(/(.+)-high(\.[^.]*)?$/i);return r?r[1]:null}if(t==="low"){const r=n.match(/(.+)-low(\.[^.]*)?$/i);return r?r[1]:null}return null}function Wy(e){return e?e.replace(/[_-]+/g," ").replace(/\s+/g," ").trim().replace(/^./,t=>t.toUpperCase()):""}const Vy=(...e)=>e.flat().map(n=>String(n??"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")).filter(Boolean).join("-")||"field";function ei({name:e,label:t,description:n,highParam:r,lowParam:l,highChoices:s=[],lowChoices:a=[],formData:i={},onChangeParam:u,highStrengthParam:c,lowStrengthParam:m,strengthValue:f,onChangeStrength:h,highStrengthValue:N,lowStrengthValue:x,onChangeHighStrength:C,onChangeLowStrength:j,disabled:g=!1}){const p=d.useMemo(()=>Qc(s),[s]),y=d.useMemo(()=>Qc(a),[a]),w=d.useMemo(()=>{const E=new Map;y.forEach(R=>{const H=Yc(R.value,"low");H&&(E.has(H)||E.set(H,R))});const L=[];return p.forEach(R=>{const H=Yc(R.value,"high");if(!H)return;const q=E.get(H);q&&L.push({base:H,label:Wy(H),highValue:R.value,lowValue:q.value})}),L.sort((R,H)=>R.label.localeCompare(H.label)),L},[p,y]),_=d.useMemo(()=>{const E=i[r],L=i[l];if(!E||!L)return"";const R=w.find(H=>H.highValue===E&&H.lowValue===L);return R?R.base:""},[i,r,l,w]),D=c||m||`${e}_strength`,T=d.useMemo(()=>Vy(e||"lora",D||"strength"),[e,D]),P=!!(c||m),G=!!(c&&m),U=(E,L=1)=>typeof E=="number"?E:L,V=U(typeof f=="number"?f:typeof N=="number"?N:typeof x=="number"?x:void 0,1),Z=U(typeof N=="number"?N:void 0,V),J=U(typeof x=="number"?x:void 0,G?V:Z),F=G&&Math.abs(Z-J)>1e-4,[A,z]=d.useState(F);d.useEffect(()=>{z(F)},[F,r,l]);const k=E=>{if(!u)return;const L=w.find(R=>R.base===E);L&&(u(r,L.highValue),u(l,L.lowValue))};if(w.length===0)return o.jsxs("div",{className:"text-[11px] text-[#9DA3FFCC]",children:["No matching ",o.jsx("span",{className:"font-semibold",children:"-high"})," /"," ",o.jsx("span",{className:"font-semibold",children:"-low"})," LoRA pairs found."]});const S=`${T}-linked`,$=`${T}-high`,M=`${T}-low`,I=G?"Linked":"Strength",O=G?"Applies to high + low":c||m||"",X=(E,L)=>{const R=Array.isArray(E)?E:[E];let H=!1;R.forEach(q=>{if(q==="high"&&typeof C=="function"){C(L);return}if(q==="low"&&typeof j=="function"){j(L);return}typeof h=="function"&&!H&&(h(L),H=!0)})},ee=E=>{(c||!c&&!m)&&X("high",E),m&&X("low",E)},v=()=>{G&&z(E=>{const L=!E;return L||ee(typeof Z=="number"?Z:typeof J=="number"?J:V),L})};return o.jsxs("div",{className:"space-y-2",children:[o.jsx(Za,{name:`${e}_pair`,label:t,description:n,value:_||"",onChange:k,disabled:g,options:w.map(E=>({value:E.base,label:E.label}))}),P&&o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-[0.16em] text-[#9DA3FFCC]",children:"Strength"}),G&&o.jsx("button",{type:"button",className:"text-[10px] font-semibold tracking-[0.12em] uppercase text-[#E5E7FF]",onClick:v,disabled:g,children:A?"Link values":"Split values"})]}),A&&G?o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-3",children:[o.jsxs("div",{className:"flex-1 max-w-[220px]",children:[o.jsxs("label",{htmlFor:$,className:"lora-strength-label is-high",children:[o.jsx("span",{className:"lora-strength-label-pill",children:"High"}),o.jsxs("span",{className:"lora-strength-label-text",children:["High strength",c&&o.jsx("span",{className:"lora-strength-label-hint",children:c})]})]}),o.jsx(el,{name:`${D}_high`,label:"High strength",description:"",value:Z,onChange:E=>X("high",E),disabled:g,isFloat:!0,min:0,max:2,step:.05,inputId:$})]}),o.jsxs("div",{className:"flex-1 max-w-[220px]",children:[o.jsxs("label",{htmlFor:M,className:"lora-strength-label is-low",children:[o.jsx("span",{className:"lora-strength-label-pill",children:"Low"}),o.jsxs("span",{className:"lora-strength-label-text",children:["Low strength",m&&o.jsx("span",{className:"lora-strength-label-hint",children:m})]})]}),o.jsx(el,{name:`${D}_low`,label:"Low strength",description:"",value:J,onChange:E=>X("low",E),disabled:g,isFloat:!0,min:0,max:2,step:.05,inputId:M})]})]}):o.jsxs("div",{className:"flex-1 max-w-[220px]",children:[o.jsxs("label",{htmlFor:S,className:"lora-strength-label is-linked",children:[o.jsx("span",{className:"lora-strength-label-pill",children:I}),o.jsxs("span",{className:"lora-strength-label-text",children:["LoRA strength",O&&o.jsx("span",{className:"lora-strength-label-hint",children:O})]})]}),o.jsx(el,{name:D,label:"LoRA strength",description:"",value:V,onChange:ee,disabled:g,isFloat:!0,min:0,max:2,step:.05,inputId:S})]})]})]})}const Hy=16,Gy=[" - "," ","-","_"],rm=e=>[...new Set(e.filter(Boolean))],Us=(e,t)=>{const n=String(e||"").trim(),r=Gy.map(l=>`${n}${l}${t}`);return r.push(`${n}${t}`),rm(r)},qc=(e,t)=>{const n=Us(`${e} Strength`,t),r=Us(e,t).map(l=>`${l} Strength`);return rm([...n,...r])},Jc=e=>String(e||"").toLowerCase().replace(/[\s_-]+/g,""),sn=(e,t=[])=>{if(!e)return null;const n=Array.isArray(t)?t:[t];for(const l of n){if(!l)continue;const s=e.get(l);if(s)return{name:l,input:s}}const r=new Map;n.forEach(l=>{l&&r.set(Jc(l),l)});for(const[l,s]of e.entries()){const a=Jc(l);if(r.has(a))return{name:l,input:s}}return null},lm=Array.from({length:Hy},(e,t)=>{const n=t+1,r=Us("Lora High",n),l=Us("Lora Low",n),s=qc("Lora High",n),a=qc("Lora Low",n);return{id:`video_lora_${n}`,label:`Video LoRA ${n}`,highParam:r[0],lowParam:l[0],highParamAliases:r,lowParamAliases:l,highStrengthParam:s[0],lowStrengthParam:a[0],highStrengthParamAliases:s,lowStrengthParamAliases:a}});function Ky(e){var r,l;const t=((r=e==null?void 0:e.inputs)==null?void 0:r.param_type)||((l=e==null?void 0:e.inputs)==null?void 0:l.Param_type),n=String(t||"STRING").toUpperCase();return["NUMBER","FLOAT","INT"].includes(n)?"NUMBER":["BOOLEAN","BOOL"].includes(n)?"BOOLEAN":["DROPDOWN","CHOICE","SELECT"].includes(n)?"DROPDOWN":"STRING"}function Qy(e){const t=(e==null?void 0:e.inputs)||{};return t.label||t.display_name||t.title||t.param_name||(e==null?void 0:e.title)||(e==null?void 0:e.class_type)||"Parameter"}function Yy(e){const t=(e==null?void 0:e.inputs)||{};return t.description||t.help||t.tooltip||t.doc||""}function jl(e){const t=(e==null?void 0:e.inputs)||{};return t.param_name||t.name||t.key||t.id||`param_${(e==null?void 0:e.id)||"unknown"}`}function on(e){const t=(e==null?void 0:e.inputs)||{},n=t.choices||t.options||[],r=t.default_value??t.value??t.default_choice??(n&&n.length?n[0]:"")??"";return{paramName:jl(e),label:Qy(e),description:Yy(e),paramType:Ky(e),advancedOnly:!!t.advanced_only,multiline:!!t.multiline,min:typeof t.min=="number"?t.min:void 0,max:typeof t.max=="number"?t.max:void 0,step:typeof t.step=="number"?t.step:void 0,choices:n,defaultValue:r}}function qy({inputs:e=[],formData:t={},onFormChange:n,onParamEdited:r,onSpotlight:l,compactControls:s=!0,collapseAllKey:a=0,collapseAllCollapsed:i=!0,lastEditedParam:u="",spotlightName:c="",onCloseSpotlight:m=()=>{},onVisibleParamsChange:f=()=>{},aliasOptions:h=[],aliasCatalog:N=[],onOpenComposer:x}){const[C,j]=d.useState({}),[g,p]=d.useState(0),y=d.useCallback((F,A)=>{if((F==null?void 0:F.paramType)==="BOOLEAN")return A?"On":"Off";if(A==null||A==="")return"Empty";if(typeof A=="string"){const z=A.trim();return z||"Empty"}return String(A)},[]),w=(F,A)=>{n&&(n(F,A),r==null||r(F),j(z=>({...z,[F]:!1})))},_=d.useCallback(F=>{F&&j(A=>({...A,[F]:!(A!=null&&A[F])}))},[]),D=d.useMemo(()=>e||[],[e]);d.useEffect(()=>{const F={};(e||[]).forEach(A=>{const z=jl(A);z&&(F[z]=i)}),u&&(F[u]=!1),j(F)},[a,i,e,u]);const T=d.useMemo(()=>{const F=new Map;return(e||[]).forEach(A=>{const z=jl(A);z&&F.set(z,A)}),F},[e]),P=d.useMemo(()=>{const F=[];return lm.forEach(A=>{const z=sn(T,A.highParamAliases||A.highParam),k=sn(T,A.lowParamAliases||A.lowParam);if(!z||!k)return;const S=z.input,$=k.input,M=on(S),I=on($);if(M.paramType!=="DROPDOWN"||I.paramType!=="DROPDOWN")return;const O=M.choices||[],X=I.choices||[];if(!O.length||!X.length)return;const ee=sn(T,A.highStrengthParamAliases||A.highStrengthParam),v=sn(T,A.lowStrengthParamAliases||A.lowStrengthParam);F.push({...A,highParam:z.name,lowParam:k.name,highStrengthParam:ee==null?void 0:ee.name,lowStrengthParam:v==null?void 0:v.name,highInput:S,lowInput:$,highCfg:M,lowCfg:I})}),F},[T]),G=d.useMemo(()=>{const F=new Map;return P.forEach(A=>{F.set(A.highParam,A)}),F},[P]),U=d.useMemo(()=>{const F=new Set;return P.forEach(A=>{F.add(A.highParam),F.add(A.lowParam),A.highStrengthParam&&F.add(A.highStrengthParam),A.lowStrengthParam&&F.add(A.lowStrengthParam)}),F},[P]),V=d.useMemo(()=>{const F=[];return(D||[]).forEach(A=>{const z=on(A),k=z.paramName,S=G.get(k);if(S){F.push({name:k,label:S.label||z.label,description:z.description,render:$=>{const M=$||t||{},I=S.highStrengthParam?M[S.highStrengthParam]:void 0,O=S.lowStrengthParam?M[S.lowStrengthParam]:void 0,X=I??O??1;return o.jsx(ei,{name:S.id||S.highParam,label:S.label||z.label,highParam:S.highParam,lowParam:S.lowParam,highChoices:S.highCfg.choices,lowChoices:S.lowCfg.choices,formData:M,onChangeParam:w,highStrengthParam:S.highStrengthParam,lowStrengthParam:S.lowStrengthParam,strengthValue:X,highStrengthValue:I,lowStrengthValue:O,onChangeHighStrength:S.highStrengthParam?ee=>w(S.highStrengthParam,ee):void 0,onChangeLowStrength:S.lowStrengthParam?ee=>w(S.lowStrengthParam,ee):void 0,disabled:!1},`lora-${k}-${g}`)}});return}U.has(k)||F.push({name:k,label:z.label,description:z.description,render:$=>{const M=$||t||{},I={name:k,label:z.label,description:z.description,value:M[k],defaultValue:z.defaultValue,disabled:!1};return z.paramType==="NUMBER"?o.jsx(el,{...I,onChange:O=>w(k,O),min:z.min,max:z.max,step:z.step,isFloat:!0},`field-${k}-number-${g}`):z.paramType==="BOOLEAN"?o.jsx(Kc,{...I,onChange:O=>w(k,O)},`field-${k}-bool-${g}`):z.paramType==="DROPDOWN"?o.jsx(Za,{...I,onChange:O=>w(k,O),options:z.choices||[]},`field-${k}-dropdown-${g}`):o.jsx(Hc,{...I,aliasOptions:h,aliasCatalog:N,onOpenComposer:x,onChange:O=>w(k,O),onEnter:(O,X)=>{var ee,v;w(k,O),(v=(ee=X==null?void 0:X.target)==null?void 0:ee.blur)==null||v.call(ee),c===k&&(m==null||m())},multiline:z.multiline},`field-${k}-string-${g}`)}})}),F},[D,G,U,t,g,c,m]),Z=d.useMemo(()=>{const F=new Map;return V.forEach(A=>F.set(A.name,A)),F},[V]);d.useEffect(()=>{f==null||f(V)},[V,f]);const J=d.useCallback(F=>{const A=V.map(M=>M.name),z=Z.get(F);if(!z)return;const k=A.indexOf(F),S=k>0?A[k-1]:null,$=k>=0&&k<A.length-1?A[k+1]:null;p(M=>M+1),l==null||l({name:F,label:z.label,description:z.description,render:M=>z.render(M||t),order:A,index:k>=0?k:0,total:A.length,onPrev:S?()=>J(S):null,onNext:$?()=>J($):null})},[Z,t,l,V]);return o.jsx("div",{className:"space-y-3 sm:space-y-3.5",children:D.map(F=>{const A=on(F),z=A.paramName,k=G.get(z);if(k){const{id:E,label:L,highParam:R,lowParam:H,highStrengthParam:q,lowStrengthParam:le,highCfg:oe,lowCfg:we}=k,Oe=q?t[q]:void 0,B=le?t[le]:void 0,Y=Oe??B??1,re=z?`param-${z}`:void 0,ae=s?C[z]??!0:!!C[z],ue=!ae,he=y(A,[t[R],t[H]].filter(Boolean).join("  ")),fe=(ce=t)=>{const Pe=q?ce==null?void 0:ce[q]:void 0,ct=le?ce==null?void 0:ce[le]:void 0,ze=Pe??ct??Y;return o.jsx(ei,{name:E||R,label:L||A.label,highParam:R,lowParam:H,highChoices:oe.choices,lowChoices:we.choices,formData:ce,onChangeParam:w,highStrengthParam:q,lowStrengthParam:le,strengthValue:ze,highStrengthValue:Pe,lowStrengthValue:ct,onChangeHighStrength:q?b=>w(q,b):void 0,onChangeLowStrength:le?b=>w(le,b):void 0,disabled:!1},`lora-${z}`)};return o.jsxs("div",{id:re,"data-param-name":z,"data-param-label":L||A.label,"data-param-type":"lora_pair",className:"control-card is-minimal",children:[o.jsx("div",{className:"control-card-head control-card-toggle",role:"button",tabIndex:0,onClick:()=>{_(z)},onKeyDown:ce=>{(ce.key==="Enter"||ce.key===" ")&&(ce.preventDefault(),_(z))},"aria-expanded":!ae,children:o.jsxs("div",{className:"control-card-summary",children:[o.jsx("div",{className:"control-card-title",children:L||A.label}),o.jsx("div",{className:"control-card-value-preview",children:he})]})}),ue&&o.jsx("div",{className:"control-card-body",children:o.jsx("div",{className:"control-card-spotlight",children:fe()})}),!s&&o.jsx("div",{className:"control-card-foot",children:o.jsx("span",{className:"control-param-id",children:z})})]},`lora_pair_${E||R}`)}if(U.has(z))return null;const S=t[z],$=!1,M=y(A,S),I={name:z,label:A.label,description:A.description,value:S,disabled:$,defaultValue:A.defaultValue},O=(E=t,L=!1)=>{const R={...I,value:E==null?void 0:E[z]};return A.paramType==="NUMBER"?o.jsx(el,{...R,onChange:H=>w(z,H),min:A.min,max:A.max,step:A.step,isFloat:!0},`field-${z}-number-${g}`):A.paramType==="BOOLEAN"?o.jsx(Kc,{...R,onChange:H=>w(z,H)},`field-${z}-bool-${g}`):A.paramType==="DROPDOWN"?o.jsx(Za,{...R,onChange:H=>w(z,H),options:A.choices||[]},`field-${z}-dropdown-${g}`):o.jsx(Hc,{...R,aliasOptions:h,aliasCatalog:N,onOpenComposer:x,onChange:H=>w(z,H),onEnter:(H,q)=>{var le,oe;w(z,H),(oe=(le=q==null?void 0:q.target)==null?void 0:le.blur)==null||oe.call(le),c===z&&(m==null||m())},multiline:A.multiline||c===z||L},`field-${z}-string-${g}`)},X=z?`param-${z}`:void 0,ee=s?C[z]??!0:!!C[z],v=!ee;return o.jsxs("div",{id:X,"data-param-name":z,"data-param-label":A.label,"data-param-type":"single",className:"control-card is-minimal",children:[o.jsx("div",{className:"control-card-head control-card-toggle",role:"button",tabIndex:0,onClick:()=>{_(z)},onKeyDown:E=>{(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),_(z))},"aria-expanded":!ee,children:o.jsxs("div",{className:"control-card-summary",children:[o.jsx("div",{className:"control-card-title",children:A.label}),o.jsx("div",{className:"control-card-value-preview",children:M})]})}),!ee&&o.jsx("div",{className:"control-card-body",children:v?o.jsx("div",{className:"control-card-spotlight",children:O(t,v)}):null}),!s&&o.jsx("div",{className:"control-card-foot",children:o.jsx("span",{className:"control-param-id",children:z})})]},z)})})}function Jy(e){return(e||[]).map(t=>{var n;if(["CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput","CozyGenChoiceInput"].includes(t.class_type)){let r=t.class_type.replace("CozyGen","").replace("Input","").toUpperCase();return r==="CHOICE"&&(r="DROPDOWN"),{...t,inputs:{...t.inputs,param_type:r,Multiline:((n=t.inputs)==null?void 0:n.display_multiline)||!1}}}return t})}function Xy({dynamicInputs:e,formData:t,onFormChange:n,sectionRef:r,compactControls:l=!1,collapseAllState:s=null,onSpotlight:a,spotlightName:i,onCloseSpotlight:u,onVisibleParamsChange:c,aliasOptions:m=[],aliasCatalog:f=[],onOpenComposer:h}){const N=d.useMemo(()=>Jy((e||[]).filter(x=>x.class_type!=="CozyGenImageInput")),[e]);return o.jsx("section",{className:"control-arena scroll-mt-24",ref:r,children:o.jsx("div",{className:"control-stack",children:o.jsx(qy,{inputs:N,formData:t,onFormChange:n,compactControls:l,collapseAllKey:(s==null?void 0:s.key)??0,collapseAllCollapsed:(s==null?void 0:s.collapsed)??!0,onSpotlight:a,spotlightName:i,onCloseSpotlight:u,onVisibleParamsChange:c,aliasOptions:m,aliasCatalog:f,onOpenComposer:h})})})}function Zy({dynamicInputs:e,formData:t,onFormChange:n,parameterSectionRef:r,compactControls:l=!0,collapseAllState:s=null,onSpotlight:a,spotlightName:i,onCloseSpotlight:u,onVisibleParamsChange:c,aliasOptions:m=[],aliasCatalog:f=[],onOpenComposer:h}){return o.jsx("div",{className:"space-y-4",children:o.jsx(Xy,{dynamicInputs:e,formData:t,onFormChange:n,sectionRef:r,compactControls:l,collapseAllState:s,onSpotlight:a,spotlightName:i,onCloseSpotlight:u,onVisibleParamsChange:c,aliasOptions:m,aliasCatalog:f,onOpenComposer:h})})}const ti=d.forwardRef(function({title:t,kicker:n,meta:r,defaultOpen:l=!0,className:s="",bodyClassName:a,children:i},u){const c=["ui-panel","collapsible-card","sectioned-card",s].filter(Boolean).join(" "),m=["collapsible-card-body",a||"space-y-4"].filter(Boolean).join(" "),f=r!=null?o.jsx("div",{className:"collapsible-card-summary-meta",children:r}):null;return o.jsxs("details",{ref:u,className:c,open:l,children:[o.jsxs("summary",{className:"collapsible-card-summary",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[n?o.jsx("span",{className:"ui-kicker",children:n}):null,o.jsx("span",{className:"text-sm font-semibold tracking-wide",children:t})]}),f]}),o.jsx("div",{className:m,children:i})]})});function sm(){const[e,t]=d.useState([]),[n,r]=d.useState(null),[l,s]=d.useState(!0),[a,i]=d.useState(null);d.useEffect(()=>{let c=!1;async function m(){s(!0),i(null);try{const f=await cy();if(c)return;const h=(f==null?void 0:f.workflows)||[];t(h);let N=null;try{N=typeof window<"u"?localStorage.getItem("selectedWorkflow"):null}catch{N=null}if(N&&h.includes(N))r(N);else if(h.length>0){r(h[0]);try{typeof window<"u"&&localStorage.setItem("selectedWorkflow",h[0])}catch{}}else r(null)}catch(f){if(c)return;console.error("Failed to load workflows",f),i(f)}finally{c||s(!1)}}return m(),()=>{c=!0}},[]);const u=d.useCallback(c=>{r(c);try{typeof window<"u"&&localStorage.setItem("selectedWorkflow",c)}catch{}},[]);return{workflows:e,selectedWorkflow:n,selectWorkflow:u,loading:l,error:a}}function ex(e){try{if(typeof window>"u")return null;const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}}function mo(e,t){try{if(typeof window>"u")return;localStorage.setItem(e,JSON.stringify(t))}catch{}}const tx=180,Bt=new Map,yn=new Map;function nx(e){yn.has(e)&&(clearTimeout(yn.get(e)),yn.delete(e)),Bt.has(e)&&(mo(e,Bt.get(e)),Bt.delete(e))}function rx(e){if(yn.has(e))return;const t=setTimeout(()=>{yn.delete(e),Bt.has(e)&&(mo(e,Bt.get(e)),Bt.delete(e))},tx);yn.set(e,t)}function lx(){Array.from(yn.values()).forEach(e=>clearTimeout(e)),yn.clear(),Array.from(Bt.entries()).forEach(([e,t])=>{mo(e,t)}),Bt.clear()}if(typeof window<"u"&&!window.__cozygenFormStateFlush){const e=()=>lx();window.addEventListener("beforeunload",e),window.addEventListener("pagehide",e),window.__cozygenFormStateFlush=!0}function sx(e){return e?ex(`${e}_formData`)||{}:{}}function Nr(e,t,n={}){if(!e)return;const{immediate:r=!1}=n||{},l=`${e}_formData`;if(r){nx(l),mo(l,t||{});return}Bt.set(l,t||{}),rx(l)}const ox={clip_name1:"clip",clip_name2:"clip",unet_name:"unet",vae_name:"vae",sampler_name:"sampler",scheduler:"scheduler"},ax=["CozyGenDynamicInput","CozyGenImageInput","CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput","CozyGenChoiceInput"];function om(e){const[t,n]=d.useState(null),[r,l]=d.useState([]),[s,a]=d.useState({}),[i,u]=d.useState(!1),[c,m]=d.useState(null);d.useEffect(()=>{if(!e){n(null),l([]),a({});return}let x=!1;async function C(){u(!0),m(null);try{const j=await dy(e);if(x)return;for(const _ in j){const D=j[_];D.class_type==="CozyGenImageInput"&&!D.inputs.param_name&&(D.inputs.param_name="Image Input"),j[_].id=_}n(j);const g=Object.values(j).filter(_=>ax.includes(_.class_type)),p=await Promise.all(g.map(async _=>{const D=_.class_type==="CozyGenDynamicInput"&&_.inputs.param_type==="DROPDOWN",T=_.class_type==="CozyGenChoiceInput";if(D||T){const P=_.inputs.param_name;let G=_.inputs.choice_type||_.properties&&_.properties.choice_type;if(!G&&D&&(G=ox[P]),G)try{const U=await fy(G);_.inputs.choices=U.choices||[]}catch(U){console.error(`Choices for ${P} failed`,U),_.inputs.choices=[]}}return _}));if(x)return;l(p);const y=sx(e),w={};p.forEach(_=>{const D=_.inputs.param_name;if(!D)return;if(y[D]!==void 0){w[D]=y[D];return}let T;if(["CozyGenDynamicInput","CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput"].includes(_.class_type)){if(T=_.inputs.default_value,_.class_type==="CozyGenIntInput"){const P=parseInt(T,10);T=Number.isNaN(P)?0:P}else if(_.class_type==="CozyGenFloatInput"){const P=parseFloat(T);T=Number.isNaN(P)?0:P}}else if(_.class_type==="CozyGenChoiceInput"){const P=_.inputs.choices||[];T=P.length?P[0]:""}else _.class_type,T="";w[D]=T}),a(w)}catch(j){if(x)return;console.error("Failed to load workflow",j),m(j),n(null),l([])}finally{x||u(!1)}}return C(),()=>{x=!0}},[e]);const f=d.useMemo(()=>r.filter(x=>x.class_type==="CozyGenImageInput"),[r]),h=f[0]||null,N=d.useCallback((x,C)=>{a(j=>{const g={...j,[x]:C};return e&&Nr(e,g),g})},[e]);return{workflowData:t,dynamicInputs:r,imageInputs:f,primaryImageInput:h,formData:s,setFormData:a,handleFormChange:N,loading:i,error:c}}const Xc="::";function tl(e){const t={};return Object.entries(e||{}).forEach(([n,r])=>{const l=String(n||"").trim();if(!l||typeof r!="string")return;const s=r.trim();s&&(t[l]=s)}),t}function du(e){const t=new Map;return Object.entries(tl(e)).forEach(([n,r])=>{const l=n.toLowerCase();t.set(l,r),l.includes(Xc)&&t.set(l.replace(Xc,":"),r)}),t}function am(e,t){if(typeof e!="string"||!e.includes("$"))return e;const n=t instanceof Map?t:du(t);return n.size?e.replace(/\$([a-z0-9_:-]+)\$/gi,(r,l)=>{const s=n.get(l.toLowerCase());return typeof s=="string"?s:r}):e}function ix(e,t){const n=t instanceof Map?t:du(t);if(!n.size||!e||typeof e!="object")return e;let r=!1;const l={};return Object.entries(e).forEach(([s,a])=>{if(typeof a=="string"){const i=am(a,n);l[s]=i,i!==a&&(r=!0)}else l[s]=a}),r?l:e}function ux(e){return e?JSON.parse(JSON.stringify(e)):{}}function cx(e,t,n){const r=ux(e),l={...n||{}};if(!t||!Array.isArray(t))return{workflow:r,formData:l};for(const s of t){if(!s||!s.id||!s.inputs||!r[s.id])continue;const a=s.inputs.param_name;if(!a||s.class_type==="CozyGenImageInput")continue;let i=l[a];const u=r[s.id];if(!u||!u.inputs)continue;const c=s.class_type;i===void 0&&(c==="CozyGenChoiceInput"?i=s.inputs.value??s.inputs.default_choice??(s.inputs.choices&&s.inputs.choices[0])??"":i=s.inputs.default_value),i===void 0&&(i=""),l[a]=i,c==="CozyGenFloatInput"||c==="CozyGenIntInput"||c==="CozyGenStringInput"||c==="CozyGenDynamicInput"?u.inputs.default_value=i:c==="CozyGenChoiceInput"&&(u.inputs.value=i)}return{workflow:r,formData:l}}function im({selectedWorkflow:e,workflowData:t,dynamicInputs:n,imageInputs:r,formData:l,setFormData:s,promptAliases:a=null}){const[i,u]=d.useState(!1),[c,m]=d.useState(!1),[f,h]=d.useState(0),[N,x]=d.useState(0),[C,j]=d.useState("Idle"),[g,p]=d.useState("idle"),y=d.useRef(null),w=d.useRef(t),_=d.useRef(!1),D=d.useRef(0),T=d.useRef(0),P=d.useRef("idle"),G=d.useRef(null),U=d.useRef(null);d.useEffect(()=>{w.current=t},[t]),d.useEffect(()=>{_.current=c},[c]),d.useEffect(()=>{D.current=f},[f]),d.useEffect(()=>{T.current=N},[N]),d.useEffect(()=>{P.current=g},[g]);const V=()=>{G.current&&(clearTimeout(G.current),G.current=null)},Z=()=>{U.current&&(clearTimeout(U.current),U.current=null)},J=()=>{if(!(typeof window>"u"||typeof window.dispatchEvent!="function"))try{window.dispatchEvent(new CustomEvent("cozygen:queue-finished"))}catch{}},F=()=>{Z(),U.current=setTimeout(()=>{_.current||(p("idle"),j("Idle"),h(0),x(0))},8e3)},A=d.useCallback(()=>{V(),u(!1),m(!1),h(0),x(0),j("Finished"),p("finished"),F(),J()},[]),z=d.useCallback((S="Error")=>{V(),u(!1),m(!1),j(S),p("error"),F()},[]);d.useEffect(()=>{V(),!(!c||!N||N<=0||f<N)&&(G.current=setTimeout(()=>{const S=_.current,$=D.current,M=T.current,I=P.current;S&&M>0&&$>=M&&I!=="finished"&&I!=="error"&&A()},800))},[c,f,N,A]),d.useEffect(()=>{const S=()=>{const $=window.location.protocol==="https:"?"wss":"ws",M=window.location.host,I=au(),O=`${$}://${M}/ws${I?`?token=${encodeURIComponent(I)}`:""}`,X=new WebSocket(O);y.current=X,X.onmessage=ee=>{var L,R,H;if(typeof ee.data!="string")return;let v;try{v=JSON.parse(ee.data)}catch{return}const E=v.type;if(E==="cozygen_batch_ready"){A();return}if(E==="execution_success"||E==="execution_finished"){_.current&&A();return}if(E==="execution_error"||E==="execution_interrupted"){z("Execution error");return}if(E==="status"){const q=v.data||{},le=q.status||q,oe=le.exec_info||q.exec_info||le;if(oe&&_.current){const we=oe.queue_remaining??oe.queue_pending??oe.queue_remaining_items??0;(oe.queue_running??oe.running??0)===0&&we===0&&A()}return}if(E==="executing"){Z(),p("running");const q=(L=v.data)==null?void 0:L.node,le=w.current;if(q&&le&&le[q]){const oe=le[q],we=oe.title||oe.class_type||"Node";j(`Executing: ${we}`)}else j("Executing");return}if(E==="progress"){h(((R=v.data)==null?void 0:R.value)??0),x(((H=v.data)==null?void 0:H.max)??0);return}},X.onclose=()=>{setTimeout(S,1e3)}};return S(),()=>{V(),Z(),y.current&&(y.current.onclose=null,y.current.close())}},[z,A]);const k=d.useCallback(async(S={})=>{if(!t)return;const{overrides:$=null,persistFormState:M=!0}=S||{};V(),Z(),u(!0),m(!0),j("Queuing prompt"),p("queued"),h(0),x(0);const I=l||{},O=$?{...I,...$||{}}:I,X=ix(O,a||{}),{workflow:ee,formData:v}=cx(t,n||[],X||{}),E={...v,...O};M&&e&&Nr(e,E),M&&s(E);const L=r||[];for(const R of L){if(!R||!R.id||!R.inputs)continue;const H=R.inputs.param_name;if(!H)continue;const q=E[H];if(!q){alert(`Please upload or select an image for "${H}" before generating.`),z("Missing image input");return}ee[R.id]&&ee[R.id].inputs&&(ee[R.id].inputs.image_filename=q)}try{let R=ee;if(a){const H=q=>{if(typeof q=="string")return am(q,a);if(Array.isArray(q))return q.map(le=>H(le));if(q&&typeof q=="object"){const le=Array.isArray(q)?[]:{};return Object.entries(q).forEach(([oe,we])=>{le[oe]=H(we)}),le}return q};try{R=H(ee)}catch{R=ee}}Fy({workflowName:e,workflow:R,timestamp:Date.now()}),await Qp({prompt:R})}catch(R){console.error("Failed to queue prompt",R),R!=null&&R.unauthorized?(z("Session expired. Please sign in again."),window.location.hash="#/login"):z("Error queuing prompt")}},[t,n,r,l,a,e,s,z]);return{isLoading:i,progressValue:f,progressMax:N,statusText:C,statusPhase:g,handleGenerate:k}}const dx="cozygen_field_order_v1";function fx(e,t){if(!e)return t;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:t}catch{return t}}function px(){if(typeof window>"u")return{};try{return fx(window.localStorage.getItem(dx),{})}catch{return{}}}function mx(e){if(Array.isArray(e))return{order:e.filter(Boolean),hidden:{}};if(!e||typeof e!="object")return{order:[],hidden:{}};const t=Array.isArray(e.order)?e.order.filter(Boolean):[],n=e.hidden&&typeof e.hidden=="object"?e.hidden:{};return{order:t,hidden:n}}function hx(e){if(!e)return{order:[],hidden:{}};const n=px()[e];return mx(n)}function um(e,t){let n=Array.isArray(t)?t:[];if(!e||n.length===0)return n;const{order:r,hidden:l}=hx(e);if(r&&r.length){const s=new Map;n.forEach(i=>{var c;const u=(c=i==null?void 0:i.inputs)==null?void 0:c.param_name;u&&!s.has(u)&&s.set(u,i)});const a=[];r.forEach(i=>{const u=s.get(i);u&&(a.push(u),s.delete(i))}),n.forEach(i=>{var c;const u=(c=i==null?void 0:i.inputs)==null?void 0:c.param_name;if(!u){a.push(i);return}s.has(u)&&(a.push(i),s.delete(u))}),n=a}return n=n.filter(s=>{var i;const a=(i=s==null?void 0:s.inputs)==null?void 0:i.param_name;return a?!l[a]:!0}),n}const cm="cozygen_prompt_aliases",dm="cozygen_alias_categories",fm="cozygen_alias_category_list";function Zc(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem(cm);return e?JSON.parse(e)||{}:{}}catch{return{}}}function Ko(e){if(!(typeof window>"u"))try{window.localStorage.setItem(cm,JSON.stringify(e||{}))}catch{}}function ed(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem(dm);return e?JSON.parse(e)||{}:{}}catch{return{}}}function Qo(e){if(!(typeof window>"u"))try{window.localStorage.setItem(dm,JSON.stringify(e||{}))}catch{}}function td(){if(typeof window>"u")return[];try{const e=window.localStorage.getItem(fm);return Array.isArray(JSON.parse(e))?JSON.parse(e):[]}catch{return[]}}function Yo(e){if(!(typeof window>"u"))try{window.localStorage.setItem(fm,JSON.stringify(e||[]))}catch{}}function fu(){const[e,t]=d.useState(()=>Zc()),[n,r]=d.useState(()=>ed()),[l,s]=d.useState(()=>td()),[a,i]=d.useState(!1),[u,c]=d.useState(!1),[m,f]=d.useState(null),h=d.useCallback(async()=>{i(!0),f(null);try{const j=await gy(),g=tl((j==null?void 0:j.items)||j||{}),p=(j==null?void 0:j.categories)||{},y=Array.isArray(j==null?void 0:j.categoryList)?j.categoryList:[];t(g),r(p),s(y),Ko(g),Qo(p),Yo(y)}catch(j){console.error("Failed to load prompt aliases",j),f(j);const g=tl(Zc()),p=ed(),y=td();t(g),r(p),s(y)}finally{i(!1)}},[]),N=d.useCallback(async j=>{const g=(j==null?void 0:j.items)||j||{},p=(j==null?void 0:j.categories)||n||{},y=Array.isArray(j==null?void 0:j.categoryList)&&j.categoryList.length?j.categoryList:l.length?l:Array.from(new Set(Object.values(p).filter(Boolean))),w=tl(g||{});c(!0),f(null);try{await vy({items:w,categories:p,categoryList:y}),t(w),r(p),s(y),Ko(w),Qo(p),Yo(y)}catch(_){throw console.error("Failed to save prompt aliases",_),f(_),Ko(w),Qo(p),Yo(y),_}finally{c(!1)}},[n,l]);d.useEffect(()=>{h()},[h]);const x=d.useMemo(()=>{const j=du(e),g=new Map(j);return Object.entries(n||{}).forEach(([p,y])=>{const w=String(y||"").trim();w&&(e!=null&&e[p])&&g.set(`${w}:${p}`,e[p])}),g},[e,n]),C=d.useMemo(()=>{const j=new Set,g=[];return x.forEach((p,y)=>{let w=y.includes("::")?y.replace("::",":"):y;const _=w.split(":");_.length>=3&&_[0]&&_[1]&&_[0].toLowerCase()===_[1].toLowerCase()&&(w=[_[0],..._.slice(2)].join(":"));const D=w.toLowerCase();j.has(D)||(j.add(D),g.push(w))}),g},[x]);return{aliases:e,aliasCategories:n,categoryList:l,aliasLookup:x,aliasOptions:C,loading:a,saving:u,error:m,refreshAliases:h,persistAliases:N}}const ni=[{id:"text-to-image",label:"Text to Image"},{id:"image-to-image",label:"Image to Image"},{id:"text-to-video",label:"Text to Video"},{id:"image-to-video",label:"Image to Video"}];ni.reduce((e,t)=>(e[t.id]=t.label,e),{});function nd(e={}){return e&&typeof e=="object"&&e.formData&&typeof e.formData=="object"?{...e.formData}:{...e||{}}}function gx(e){if(!e||typeof e!="object")return{values:e||{},meta:{}};if(Object.prototype.hasOwnProperty.call(e,"values")){const t=e.values&&typeof e.values=="object"?e.values:{},n=nd(t),r=e.meta&&typeof e.meta=="object"?e.meta:{};return{values:n,meta:r}}return{values:nd(e),meta:{}}}function pm(e={}){return Object.entries(e||{}).map(([t,n])=>({name:t,...gx(n)}))}function rd(){const{workflows:e=[],selectedWorkflow:t,selectWorkflow:n}=sm(),{workflowData:r,dynamicInputs:l=[],imageInputs:s=[],formData:a,setFormData:i,handleFormChange:u}=om(t),{aliases:c,aliasCategories:m,aliasLookup:f,aliasOptions:h}=fu(),{isLoading:N,progressValue:x,progressMax:C,statusText:j,statusPhase:g,handleGenerate:p}=im({selectedWorkflow:t,workflowData:r,dynamicInputs:l,imageInputs:s,formData:a,setFormData:i,promptAliases:f}),[y,w]=d.useState(!1),_=d.useRef(null),D=d.useRef(null),T=d.useRef(null),[P,G]=d.useState([]),[U,V]=d.useState(""),[Z,J]=d.useState(""),F=d.useRef(null),[A]=d.useState({key:0,collapsed:!0}),[z,k]=d.useState(()=>{if(typeof window>"u")return"";try{return window.localStorage.getItem("cozygen_last_param")||""}catch{return""}}),[S,$]=d.useState(null),M=(S==null?void 0:S.name)||"",I=d.useCallback(()=>$(null),[]),[O,X]=d.useState(!1),[ee,v]=d.useState("prompt"),[E,L]=d.useState([]),R=d.useRef(new Map);ou();const H=d.useMemo(()=>{const b=[];return Object.entries(c||{}).forEach(([W,Q])=>{const ne=String(W).split("::"),pe=ne.length>1,ge=m&&m[W]||(pe?ne[0]:""),ye=pe?ne.slice(1).join("::"):W;b.push({key:W,name:ye,category:ge,text:Q,token:ge?`${ge}:${ye}`:ye})}),b},[c,m]);d.useEffect(()=>{if(g==="finished"&&typeof window<"u"){try{window.localStorage.setItem("cozygen_gallery_pending","1")}catch{}window.dispatchEvent(new Event("cozygen:gallery-pending"))}},[g]);const q=d.useMemo(()=>{if(typeof(a==null?void 0:a.prompt)=="string")return"prompt";const b=Object.entries(a||{}).find(([,W])=>typeof W=="string"&&W.includes("$"));return b?b[0]:""},[a]),le=d.useMemo(()=>{if(!q)return"";const b=(a==null?void 0:a[q])||"";if(!b||!f)return b;try{return b.replace(/\$([a-z0-9_:-]+)\$/gi,(W,Q)=>{const ne=f.get(Q.toLowerCase());return typeof ne=="string"?ne:W})}catch{return b}},[a,f,q]),oe=b=>{!b||b===t||(t&&Nr(t,a||{},{immediate:!0}),n(b))},we=b=>{b&&i(W=>{const Q={...W||{},...b||{}};return t&&Nr(t,Q),Q})},Oe=d.useCallback((b="prompt")=>{v(b),X(!0)},[]),B=d.useCallback(b=>{ee&&u(ee,b)},[ee,u]),Y=d.useMemo(()=>{if(typeof(a==null?void 0:a.prompt)=="string")return"prompt";const b=["prompt","positive_prompt","text","positive"];for(const ne of b)if(typeof(a==null?void 0:a[ne])=="string")return ne;const W=Object.entries(a||{}).find(([,ne])=>typeof ne=="string"&&ne.includes("$"));if(W)return W[0];const Q=Object.entries(a||{}).find(([,ne])=>typeof ne=="string");return(Q==null?void 0:Q[0])||"prompt"},[a]);d.useEffect(()=>{let b=!1;return(async()=>{var Q;if(!t){G([]),V("");return}try{const ne=await qp(t),pe=pm((ne==null?void 0:ne.items)||{});if(b)return;G(pe);const ge=((Q=pe[0])==null?void 0:Q.name)||"";V(ye=>ye&&pe.some(Te=>Te.name===ye)?ye:ge)}catch{b||(G([]),V(""))}})(),()=>{b=!0}},[t]);const re=d.useCallback(b=>{clearTimeout(F.current),J(b),b&&(F.current=setTimeout(()=>J(""),1600))},[]),ae=d.useCallback(b=>{V(b);const W=P.find(Q=>Q.name===b);W!=null&&W.values&&(we(W.values),re(`Applied "${b}"`))},[P,we,re]),ue=d.useMemo(()=>um(t,l),[t,l]),he=s||[],fe=!!(r&&t),ce=he.length>0,Pe=r?ce?`${he.length} slots`:"No inputs":"Waiting",ct=r?"":"Waiting",ze=d.useCallback((b,W)=>{const Q=R.current;W&&b&&Q.set(b,W);const ne=E.length?E:(W==null?void 0:W.order)||[],pe=ne.length,ge=pe>0?ne.indexOf(b):-1,ye=ge>0?ne[ge-1]:null,Te=ge>=0&&ge<pe-1?ne[ge+1]:null,Ke=ye?Q.get(ye):null,bn=Te?Q.get(Te):null;return{...W,index:ge>=0?ge:0,total:pe,onPrev:Ke?()=>$(ze(ye,Ke)):null,onNext:bn?()=>$(ze(Te,bn)):null,onRender:p}},[E,p]);return d.useEffect(()=>{var b;fe&&((b=_.current)!=null&&b.open)&&(_.current.open=!1)},[fe]),d.useEffect(()=>{const b=()=>{!fe||N||p()};return window.addEventListener("cozygen:request-render",b),()=>window.removeEventListener("cozygen:request-render",b)},[p,fe,N]),d.useEffect(()=>{const b=g==="queued"||g==="running"||N;try{window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:b}}))}catch{}},[g,N]),!e||e.length===0?o.jsx("div",{className:"page-shell",children:o.jsx("div",{className:"neon-card px-3 py-3 sm:px-4 sm:py-4",children:o.jsx("p",{className:"text-sm text-[#9DA3FFCC]",children:"No workflows found. Drop a workflow file in CozyGen and refresh."})})}):o.jsxs("div",{className:"page-shell page-stack",children:[o.jsxs(ti,{kicker:"Parameters",title:" Controls",meta:ct,bodyClassName:"control-shell",defaultOpen:!0,children:[o.jsxs("div",{className:"context-bar",children:[o.jsx("div",{className:"context-chip",children:o.jsxs("select",{value:t||"",onChange:b=>oe(b.target.value),className:"context-select","aria-label":"Workflow",children:[o.jsx("option",{value:"",children:"Select workflow"}),e.map(b=>o.jsx("option",{value:b,children:b},b))]})}),r&&P.length>0?o.jsxs("div",{className:"context-chip is-secondary",children:[o.jsxs("select",{value:U,onChange:b=>ae(b.target.value),className:"context-select","aria-label":"Preset",children:[o.jsx("option",{value:"",children:"No preset"}),P.map(b=>o.jsx("option",{value:b.name,children:b.name},b.name))]}),Z?o.jsx("span",{className:"context-status",children:Z}):null]}):null]}),r?o.jsx(Zy,{workflowName:t,dynamicInputs:ue,formData:a,onFormChange:u,parameterSectionRef:D,compactControls:!0,collapseAllState:A,lastEditedParam:z,spotlightName:M,onCloseSpotlight:I,onVisibleParamsChange:b=>L(b||[]),aliasOptions:h,aliasCatalog:H,onOpenComposer:Oe,onParamEdited:b=>{k(b||"");try{window.localStorage.setItem("cozygen_last_param",b||"")}catch{}},onSpotlight:b=>{b!=null&&b.name&&$(ze(b.name,b))}}):o.jsxs("div",{className:"empty-state-inline",children:[o.jsx("span",{className:"empty-state-arrow",children:""}),o.jsx("span",{children:"Select a workflow above to get started"})]}),r?o.jsxs("div",{className:"mt-3 rounded-xl border border-[#2A2E4A] bg-[#0B1226] px-3 py-3 text-[12px] text-[#9DA3FFCC] space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("span",{className:"font-semibold text-[#E5E7FF]",children:"Expanded prompt"}),o.jsx("button",{type:"button",onClick:()=>Oe(Y),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg border border-[#2A2E4A] bg-[#0F1A2F] text-[11px] font-medium text-[#E5E7FF] hover:border-[#5EF1D4] hover:bg-[#0F1A2F]/80 transition-colors",children:o.jsx("span",{children:"Compose"})})]}),o.jsx("div",{className:"max-h-32 overflow-y-auto whitespace-pre-wrap break-words text-[#D8DEFF] text-[12px] border border-[#1D2440] rounded-lg px-2 py-2 bg-[#080E1D]",children:le||""})]}):null]}),ce?o.jsx(ti,{ref:T,className:"scroll-mt-24 is-compact",kicker:"Assets",title:" Images",meta:Pe,defaultOpen:!1,children:r?o.jsx("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:he.map(b=>o.jsx($y,{input:b,value:a[b.inputs.param_name]||"",onFormChange:u},b.id))}):null}):null,o.jsx("section",{className:"dock-panel",children:o.jsx(Iy,{busy:N,progressValue:x,progressMax:C,statusText:j,statusPhase:g,primaryLabel:"Render",onPrimary:p,primaryDisabled:!fe})}),o.jsx(Uy,{open:!!S,onClose:()=>$(null),title:S==null?void 0:S.label,description:S==null?void 0:S.description,render:()=>{var b;return(b=S==null?void 0:S.render)==null?void 0:b.call(S,a)},index:(S==null?void 0:S.index)??0,total:(S==null?void 0:S.total)??0,onPrev:(S==null?void 0:S.onPrev)||null,onNext:(S==null?void 0:S.onNext)||null,onRender:(S==null?void 0:S.onRender)||null,children:null}),o.jsx(By,{open:O,onClose:()=>X(!1),value:(a==null?void 0:a[ee])||"",onChange:B,aliasOptions:h,aliasCatalog:H,aliasLookup:f,fieldLabel:ee})]})}function vx({subfolder:e,crumbs:t=[],dirChips:n=[],onBack:r,onRoot:l,onCrumb:s,onSelectDir:a}){return o.jsxs("div",{className:"space-y-3 text-[#F8F4FF]",children:[o.jsx("div",{className:"flex items-center justify-start gap-2 flex-wrap"}),o.jsx("div",{className:"flex items-center gap-2 flex-wrap text-[#C3C7FF]",role:"navigation","aria-label":"Gallery path",children:t.map((i,u)=>o.jsxs(d.Fragment,{children:[o.jsx("span",{className:"text-[#6A6FA8]",children:"/"}),o.jsx("button",{type:"button",className:"gallery-chip-btn",onClick:()=>s==null?void 0:s(i.path),"aria-current":u===t.length-1?"page":void 0,children:i.name})]},i.path||i.name||u))}),n.length>0?o.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:n.map(i=>o.jsx("button",{type:"button",className:"gallery-chip-btn",onClick:()=>a==null?void 0:a(i.subfolder),children:i.filename||i.subfolder||"Collection"},i.subfolder||i.filename))}):null]})}const yx=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e),xx=({src:e,poster:t,autoPlay:n})=>{const r=d.useRef(null);return d.useEffect(()=>{const l=r.current;l&&(l.pause(),l.currentTime=0,l.load())},[e]),d.useEffect(()=>{const l=r.current;if(!l)return;let s;const a=()=>{const u=l.play();u&&typeof u.catch=="function"&&u.catch(()=>{})},i=()=>{l.pause()};return n?typeof window<"u"&&"IntersectionObserver"in window?(s=new IntersectionObserver(c=>{c.forEach(m=>{m.isIntersecting?a():i()})},{threshold:.65}),s.observe(l)):a():(i(),l.currentTime=0),()=>{s&&s.disconnect(),i()}},[n,e]),e?o.jsx("video",{ref:r,src:e,poster:t||void 0,muted:!0,playsInline:!0,loop:!0,preload:"metadata",className:"w-full h-auto max-h-[80vh] rounded-2xl object-contain bg-black/40"}):o.jsx("div",{className:"flex items-center justify-center py-16 text-[11px] text-[#9DA3FFCC]",children:"No preview available"})};function ld({item:e,onSelect:t,variant:n="grid",autoPlay:r=!1}){if(!e)return null;const l=e.type==="directory",s=e.filename||"",a=e.subfolder||"",i=s||a||"Unknown",u=()=>{t&&t(e)},c=n==="feed"?768:384,m=!l&&s?`/cozygen/thumb?type=output&subfolder=${encodeURIComponent(a)}&filename=${encodeURIComponent(s)}&w=${c}`:null,f=!l&&s?(()=>{const N=e.type&&e.type!=="directory"?e.type:"output",x=e.mtime?`&v=${encodeURIComponent(String(e.mtime))}`:"";return`/view?filename=${encodeURIComponent(s)}&subfolder=${encodeURIComponent(a)}&type=${encodeURIComponent(N)}${x}`})():null,h=yx(s);return l?o.jsx("button",{type:"button",onClick:u,className:"group flex flex-col items-start justify-between rounded-xl border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-left hover:border-[#6B5BFF] hover:bg-[#0B0E27] transition-colors",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-7 w-7 rounded-lg bg-gradient-to-br from-[#6B5BFF] to-[#FF4F9A] opacity-80 group-hover:opacity-100 flex items-center justify-center text-[11px] text-white",children:""}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-[11px] font-medium text-[#E5E7FF] truncate",children:i}),o.jsx("div",{className:"text-[10px] text-[#9DA3FFCC] truncate",children:"Collection"})]})]})}):n==="feed"?o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("button",{type:"button",onClick:u,className:"group relative w-full overflow-hidden rounded-2xl bg-[#020312]",children:[o.jsx("div",{className:"relative w-full flex items-center justify-center bg-[#020312]",children:h?o.jsx(xx,{src:f,poster:m,autoPlay:r}):m?o.jsx("img",{src:m,alt:i,className:"w-full h-auto max-h-[80vh] rounded-2xl object-contain bg-black/40",loading:"lazy"}):o.jsx("div",{className:"flex items-center justify-center py-16 text-[11px] text-[#9DA3FFCC]",children:"No preview available"})}),o.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-[#05071680] opacity-0 group-hover:opacity-100 transition-opacity"}),h&&o.jsx("div",{className:"pointer-events-none absolute left-2 top-2 rounded-full bg-[#050716CC] px-2 py-[1px] text-[10px] text-[#CFFAFE] border border-[#3EF0FF80]",children:"Video"})]}),o.jsx("div",{className:"flex items-center justify-between text-[11px] text-[#9DA3FFCC]",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[#E5E7FF]",children:i}),a&&o.jsx("div",{className:"truncate text-[10px] text-[#6A6FA8]",children:a})]})})]}):o.jsxs("button",{type:"button",onClick:u,className:"group relative w-full overflow-hidden rounded-xl border border-[#2A2E4A] bg-[#050716] hover:border-[#6B5BFF] hover:bg-[#0B0E27] transition-colors",children:[o.jsxs("div",{className:"relative w-full aspect-[4/5] bg-[#020312]",children:[m?o.jsx("img",{src:m,alt:i,className:"w-full h-full object-cover",loading:"lazy",decoding:"async"}):o.jsx("div",{className:"flex items-center justify-center h-full text-[10px] text-[#9DA3FFCC] px-2 text-center",children:"No preview"}),h&&o.jsx("div",{className:"pointer-events-none absolute left-2 top-2 rounded-full bg-[#050716E0] px-2 py-[2px] text-[10px] text-[#CFFAFE] border border-[#3EF0FF80]",children:"Video"})]}),o.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 bg-gradient-to-t from-[#050716CC] via-[#05071699] to-transparent px-2 py-1.5",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"text-[10px] text-[#E5E7FF] truncate",children:i}),h&&o.jsx("span",{className:"text-[9px] uppercase tracking-[0.16em] text-[#CFFAFE]",children:"Vid"})]})})]})}var ri={exports:{}},Bn={},mm={exports:{}},wx="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Nx=wx,Sx=Nx;function hm(){}function gm(){}gm.resetWarningCache=hm;var jx=function(){function e(r,l,s,a,i,u){if(u!==Sx){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:gm,resetWarningCache:hm};return n.PropTypes=n,n};mm.exports=jx();var vm=mm.exports,li={exports:{}},_t={},si={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=m;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var n="none",r="contents",l=/^(input|select|textarea|button|object|iframe)$/;function s(f,h){return h.getPropertyValue("overflow")!=="visible"||f.scrollWidth<=0&&f.scrollHeight<=0}function a(f){var h=f.offsetWidth<=0&&f.offsetHeight<=0;if(h&&!f.innerHTML)return!0;try{var N=window.getComputedStyle(f),x=N.getPropertyValue("display");return h?x!==r&&s(f,N):x===n}catch{return console.warn("Failed to inspect element style"),!1}}function i(f){for(var h=f,N=f.getRootNode&&f.getRootNode();h&&h!==document.body;){if(N&&h===N&&(h=N.host.parentNode),a(h))return!1;h=h.parentNode}return!0}function u(f,h){var N=f.nodeName.toLowerCase(),x=l.test(N)&&!f.disabled||N==="a"&&f.href||h;return x&&i(f)}function c(f){var h=f.getAttribute("tabindex");h===null&&(h=void 0);var N=isNaN(h);return(N||h>=0)&&u(f,!N)}function m(f){var h=[].slice.call(f.querySelectorAll("*"),0).reduce(function(N,x){return N.concat(x.shadowRoot?m(x.shadowRoot):[x])},[]);return h.filter(c)}e.exports=t.default})(si,si.exports);var ym=si.exports;Object.defineProperty(_t,"__esModule",{value:!0});_t.resetState=kx;_t.log=_x;_t.handleBlur=Cl;_t.handleFocus=El;_t.markForFocusLater=Fx;_t.returnFocus=Px;_t.popWithoutFocus=Ax;_t.setupScopedFocus=Lx;_t.teardownScopedFocus=Rx;var Cx=ym,Ex=bx(Cx);function bx(e){return e&&e.__esModule?e:{default:e}}var Sr=[],or=null,oi=!1;function kx(){Sr=[]}function _x(){}function Cl(){oi=!0}function El(){if(oi){if(oi=!1,!or)return;setTimeout(function(){if(!or.contains(document.activeElement)){var e=(0,Ex.default)(or)[0]||or;e.focus()}},0)}}function Fx(){Sr.push(document.activeElement)}function Px(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=null;try{Sr.length!==0&&(t=Sr.pop(),t.focus({preventScroll:e}));return}catch{console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}}function Ax(){Sr.length>0&&Sr.pop()}function Lx(e){or=e,window.addEventListener?(window.addEventListener("blur",Cl,!1),document.addEventListener("focus",El,!0)):(window.attachEvent("onBlur",Cl),document.attachEvent("onFocus",El))}function Rx(){or=null,window.addEventListener?(window.removeEventListener("blur",Cl),document.removeEventListener("focus",El)):(window.detachEvent("onBlur",Cl),document.detachEvent("onFocus",El))}var ai={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var n=ym,r=l(n);function l(i){return i&&i.__esModule?i:{default:i}}function s(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return i.activeElement.shadowRoot?s(i.activeElement.shadowRoot):i.activeElement}function a(i,u){var c=(0,r.default)(i);if(!c.length){u.preventDefault();return}var m=void 0,f=u.shiftKey,h=c[0],N=c[c.length-1],x=s();if(i===x){if(!f)return;m=N}if(N===x&&!f&&(m=h),h===x&&f&&(m=N),m){u.preventDefault(),m.focus();return}var C=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),j=C!=null&&C[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(j){var g=c.indexOf(x);if(g>-1&&(g+=f?-1:1),m=c[g],typeof m>"u"){u.preventDefault(),m=f?N:h,m.focus();return}u.preventDefault(),m.focus()}}e.exports=t.default})(ai,ai.exports);var Ox=ai.exports,Ft={},Tx=function(){},Ix=Tx,Et={},xm={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(e){(function(){var t=!!(typeof window<"u"&&window.document&&window.document.createElement),n={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen};e.exports?e.exports=n:window.ExecutionEnvironment=n})()})(xm);var Mx=xm.exports;Object.defineProperty(Et,"__esModule",{value:!0});Et.canUseDOM=Et.SafeNodeList=Et.SafeHTMLCollection=void 0;var zx=Mx,Dx=$x(zx);function $x(e){return e&&e.__esModule?e:{default:e}}var ho=Dx.default,Ux=ho.canUseDOM?window.HTMLElement:{};Et.SafeHTMLCollection=ho.canUseDOM?window.HTMLCollection:{};Et.SafeNodeList=ho.canUseDOM?window.NodeList:{};Et.canUseDOM=ho.canUseDOM;Et.default=Ux;Object.defineProperty(Ft,"__esModule",{value:!0});Ft.resetState=Gx;Ft.log=Kx;Ft.assertNodeList=wm;Ft.setElement=Qx;Ft.validateElement=pu;Ft.hide=Yx;Ft.show=qx;Ft.documentNotReadyOrSSRTesting=Jx;var Bx=Ix,Wx=Hx(Bx),Vx=Et;function Hx(e){return e&&e.__esModule?e:{default:e}}var dt=null;function Gx(){dt&&(dt.removeAttribute?dt.removeAttribute("aria-hidden"):dt.length!=null?dt.forEach(function(e){return e.removeAttribute("aria-hidden")}):document.querySelectorAll(dt).forEach(function(e){return e.removeAttribute("aria-hidden")})),dt=null}function Kx(){}function wm(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function Qx(e){var t=e;if(typeof t=="string"&&Vx.canUseDOM){var n=document.querySelectorAll(t);wm(n,t),t=n}return dt=t||dt,dt}function pu(e){var t=e||dt;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,Wx.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function Yx(e){var t=!0,n=!1,r=void 0;try{for(var l=pu(e)[Symbol.iterator](),s;!(t=(s=l.next()).done);t=!0){var a=s.value;a.setAttribute("aria-hidden","true")}}catch(i){n=!0,r=i}finally{try{!t&&l.return&&l.return()}finally{if(n)throw r}}}function qx(e){var t=!0,n=!1,r=void 0;try{for(var l=pu(e)[Symbol.iterator](),s;!(t=(s=l.next()).done);t=!0){var a=s.value;a.removeAttribute("aria-hidden")}}catch(i){n=!0,r=i}finally{try{!t&&l.return&&l.return()}finally{if(n)throw r}}}function Jx(){dt=null}var Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.resetState=Xx;Fr.log=Zx;var nl={},rl={};function sd(e,t){e.classList.remove(t)}function Xx(){var e=document.getElementsByTagName("html")[0];for(var t in nl)sd(e,nl[t]);var n=document.body;for(var r in rl)sd(n,rl[r]);nl={},rl={}}function Zx(){}var e0=function(t,n){return t[n]||(t[n]=0),t[n]+=1,n},t0=function(t,n){return t[n]&&(t[n]-=1),n},n0=function(t,n,r){r.forEach(function(l){e0(n,l),t.add(l)})},r0=function(t,n,r){r.forEach(function(l){t0(n,l),n[l]===0&&t.remove(l)})};Fr.add=function(t,n){return n0(t.classList,t.nodeName.toLowerCase()=="html"?nl:rl,n.split(" "))};Fr.remove=function(t,n){return r0(t.classList,t.nodeName.toLowerCase()=="html"?nl:rl,n.split(" "))};var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.log=s0;Pr.resetState=o0;function l0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Nm=function e(){var t=this;l0(this,e),this.register=function(n){t.openInstances.indexOf(n)===-1&&(t.openInstances.push(n),t.emit("register"))},this.deregister=function(n){var r=t.openInstances.indexOf(n);r!==-1&&(t.openInstances.splice(r,1),t.emit("deregister"))},this.subscribe=function(n){t.subscribers.push(n)},this.emit=function(n){t.subscribers.forEach(function(r){return r(n,t.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},Bs=new Nm;function s0(){console.log("portalOpenInstances ----------"),console.log(Bs.openInstances.length),Bs.openInstances.forEach(function(e){return console.log(e)}),console.log("end portalOpenInstances ----------")}function o0(){Bs=new Nm}Pr.default=Bs;var mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.resetState=c0;mu.log=d0;var a0=Pr,i0=u0(a0);function u0(e){return e&&e.__esModule?e:{default:e}}var Ve=void 0,wt=void 0,In=[];function c0(){for(var e=[Ve,wt],t=0;t<e.length;t++){var n=e[t];n&&n.parentNode&&n.parentNode.removeChild(n)}Ve=wt=null,In=[]}function d0(){console.log("bodyTrap ----------"),console.log(In.length);for(var e=[Ve,wt],t=0;t<e.length;t++){var n=e[t],r=n||{};console.log(r.nodeName,r.className,r.id)}console.log("edn bodyTrap ----------")}function od(){In.length!==0&&In[In.length-1].focusContent()}function f0(e,t){!Ve&&!wt&&(Ve=document.createElement("div"),Ve.setAttribute("data-react-modal-body-trap",""),Ve.style.position="absolute",Ve.style.opacity="0",Ve.setAttribute("tabindex","0"),Ve.addEventListener("focus",od),wt=Ve.cloneNode(),wt.addEventListener("focus",od)),In=t,In.length>0?(document.body.firstChild!==Ve&&document.body.insertBefore(Ve,document.body.firstChild),document.body.lastChild!==wt&&document.body.appendChild(wt)):(Ve.parentElement&&Ve.parentElement.removeChild(Ve),wt.parentElement&&wt.parentElement.removeChild(wt))}i0.default.subscribe(f0);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(F){for(var A=1;A<arguments.length;A++){var z=arguments[A];for(var k in z)Object.prototype.hasOwnProperty.call(z,k)&&(F[k]=z[k])}return F},r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},l=function(){function F(A,z){for(var k=0;k<z.length;k++){var S=z[k];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(A,S.key,S)}}return function(A,z,k){return z&&F(A.prototype,z),k&&F(A,k),A}}(),s=d,a=vm,i=_(a),u=_t,c=w(u),m=Ox,f=_(m),h=Ft,N=w(h),x=Fr,C=w(x),j=Et,g=_(j),p=Pr,y=_(p);function w(F){if(F&&F.__esModule)return F;var A={};if(F!=null)for(var z in F)Object.prototype.hasOwnProperty.call(F,z)&&(A[z]=F[z]);return A.default=F,A}function _(F){return F&&F.__esModule?F:{default:F}}function D(F,A){if(!(F instanceof A))throw new TypeError("Cannot call a class as a function")}function T(F,A){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:F}function P(F,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);F.prototype=Object.create(A&&A.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(F,A):F.__proto__=A)}var G={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},U=function(A){return A.code==="Tab"||A.keyCode===9},V=function(A){return A.code==="Escape"||A.keyCode===27},Z=0,J=function(F){P(A,F);function A(z){D(this,A);var k=T(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,z));return k.setOverlayRef=function(S){k.overlay=S,k.props.overlayRef&&k.props.overlayRef(S)},k.setContentRef=function(S){k.content=S,k.props.contentRef&&k.props.contentRef(S)},k.afterClose=function(){var S=k.props,$=S.appElement,M=S.ariaHideApp,I=S.htmlOpenClassName,O=S.bodyOpenClassName,X=S.parentSelector,ee=X&&X().ownerDocument||document;O&&C.remove(ee.body,O),I&&C.remove(ee.getElementsByTagName("html")[0],I),M&&Z>0&&(Z-=1,Z===0&&N.show($)),k.props.shouldFocusAfterRender&&(k.props.shouldReturnFocusAfterClose?(c.returnFocus(k.props.preventScroll),c.teardownScopedFocus()):c.popWithoutFocus()),k.props.onAfterClose&&k.props.onAfterClose(),y.default.deregister(k)},k.open=function(){k.beforeOpen(),k.state.afterOpen&&k.state.beforeClose?(clearTimeout(k.closeTimer),k.setState({beforeClose:!1})):(k.props.shouldFocusAfterRender&&(c.setupScopedFocus(k.node),c.markForFocusLater()),k.setState({isOpen:!0},function(){k.openAnimationFrame=requestAnimationFrame(function(){k.setState({afterOpen:!0}),k.props.isOpen&&k.props.onAfterOpen&&k.props.onAfterOpen({overlayEl:k.overlay,contentEl:k.content})})}))},k.close=function(){k.props.closeTimeoutMS>0?k.closeWithTimeout():k.closeWithoutTimeout()},k.focusContent=function(){return k.content&&!k.contentHasFocus()&&k.content.focus({preventScroll:!0})},k.closeWithTimeout=function(){var S=Date.now()+k.props.closeTimeoutMS;k.setState({beforeClose:!0,closesAt:S},function(){k.closeTimer=setTimeout(k.closeWithoutTimeout,k.state.closesAt-Date.now())})},k.closeWithoutTimeout=function(){k.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},k.afterClose)},k.handleKeyDown=function(S){U(S)&&(0,f.default)(k.content,S),k.props.shouldCloseOnEsc&&V(S)&&(S.stopPropagation(),k.requestClose(S))},k.handleOverlayOnClick=function(S){k.shouldClose===null&&(k.shouldClose=!0),k.shouldClose&&k.props.shouldCloseOnOverlayClick&&(k.ownerHandlesClose()?k.requestClose(S):k.focusContent()),k.shouldClose=null},k.handleContentOnMouseUp=function(){k.shouldClose=!1},k.handleOverlayOnMouseDown=function(S){!k.props.shouldCloseOnOverlayClick&&S.target==k.overlay&&S.preventDefault()},k.handleContentOnClick=function(){k.shouldClose=!1},k.handleContentOnMouseDown=function(){k.shouldClose=!1},k.requestClose=function(S){return k.ownerHandlesClose()&&k.props.onRequestClose(S)},k.ownerHandlesClose=function(){return k.props.onRequestClose},k.shouldBeClosed=function(){return!k.state.isOpen&&!k.state.beforeClose},k.contentHasFocus=function(){return document.activeElement===k.content||k.content.contains(document.activeElement)},k.buildClassName=function(S,$){var M=(typeof $>"u"?"undefined":r($))==="object"?$:{base:G[S],afterOpen:G[S]+"--after-open",beforeClose:G[S]+"--before-close"},I=M.base;return k.state.afterOpen&&(I=I+" "+M.afterOpen),k.state.beforeClose&&(I=I+" "+M.beforeClose),typeof $=="string"&&$?I+" "+$:I},k.attributesFromObject=function(S,$){return Object.keys($).reduce(function(M,I){return M[S+"-"+I]=$[I],M},{})},k.state={afterOpen:!1,beforeClose:!1},k.shouldClose=null,k.moveFromContentToOverlay=null,k}return l(A,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(k,S){this.props.isOpen&&!k.isOpen?this.open():!this.props.isOpen&&k.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!S.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var k=this.props,S=k.appElement,$=k.ariaHideApp,M=k.htmlOpenClassName,I=k.bodyOpenClassName,O=k.parentSelector,X=O&&O().ownerDocument||document;I&&C.add(X.body,I),M&&C.add(X.getElementsByTagName("html")[0],M),$&&(Z+=1,N.hide(S)),y.default.register(this)}},{key:"render",value:function(){var k=this.props,S=k.id,$=k.className,M=k.overlayClassName,I=k.defaultStyles,O=k.children,X=$?{}:I.content,ee=M?{}:I.overlay;if(this.shouldBeClosed())return null;var v={ref:this.setOverlayRef,className:this.buildClassName("overlay",M),style:n({},ee,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},E=n({id:S,ref:this.setContentRef,style:n({},X,this.props.style.content),className:this.buildClassName("content",$),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",n({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),L=this.props.contentElement(E,O);return this.props.overlayElement(v,L)}}]),A}(s.Component);J.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},J.propTypes={isOpen:i.default.bool.isRequired,defaultStyles:i.default.shape({content:i.default.object,overlay:i.default.object}),style:i.default.shape({content:i.default.object,overlay:i.default.object}),className:i.default.oneOfType([i.default.string,i.default.object]),overlayClassName:i.default.oneOfType([i.default.string,i.default.object]),parentSelector:i.default.func,bodyOpenClassName:i.default.string,htmlOpenClassName:i.default.string,ariaHideApp:i.default.bool,appElement:i.default.oneOfType([i.default.instanceOf(g.default),i.default.instanceOf(j.SafeHTMLCollection),i.default.instanceOf(j.SafeNodeList),i.default.arrayOf(i.default.instanceOf(g.default))]),onAfterOpen:i.default.func,onAfterClose:i.default.func,onRequestClose:i.default.func,closeTimeoutMS:i.default.number,shouldFocusAfterRender:i.default.bool,shouldCloseOnOverlayClick:i.default.bool,shouldReturnFocusAfterClose:i.default.bool,preventScroll:i.default.bool,role:i.default.string,contentLabel:i.default.string,aria:i.default.object,data:i.default.object,children:i.default.node,shouldCloseOnEsc:i.default.bool,overlayRef:i.default.func,contentRef:i.default.func,id:i.default.string,overlayElement:i.default.func,contentElement:i.default.func,testId:i.default.string},t.default=J,e.exports=t.default})(li,li.exports);var p0=li.exports;function Sm(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function jm(e){function t(n){var r=this.constructor.getDerivedStateFromProps(e,n);return r??null}this.setState(t.bind(this))}function Cm(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Sm.__suppressDeprecationWarning=!0;jm.__suppressDeprecationWarning=!0;Cm.__suppressDeprecationWarning=!0;function m0(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var n=null,r=null,l=null;if(typeof t.componentWillMount=="function"?n="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?l="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(l="UNSAFE_componentWillUpdate"),n!==null||r!==null||l!==null){var s=e.displayName||e.name,a=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+a+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+(l!==null?`
  `+l:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=Sm,t.componentWillReceiveProps=jm),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Cm;var i=t.componentDidUpdate;t.componentDidUpdate=function(c,m,f){var h=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:f;i.call(this,c,m,h)}}return e}const h0=Object.freeze(Object.defineProperty({__proto__:null,polyfill:m0},Symbol.toStringTag,{value:"Module"})),g0=Om(h0);Object.defineProperty(Bn,"__esModule",{value:!0});Bn.bodyOpenClassName=Bn.portalClassName=void 0;var ad=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v0=function(){function e(t,n){for(var r=0;r<n.length;r++){var l=n[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Em=d,Ws=Ll(Em),y0=Op,Vs=Ll(y0),x0=vm,se=Ll(x0),w0=p0,id=Ll(w0),N0=Ft,S0=C0(N0),an=Et,ud=Ll(an),j0=g0;function C0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function Ll(e){return e&&e.__esModule?e:{default:e}}function E0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function b0(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k0=Bn.portalClassName="ReactModalPortal",_0=Bn.bodyOpenClassName="ReactModal__Body--open",Pn=an.canUseDOM&&Vs.default.createPortal!==void 0,dd=function(t){return document.createElement(t)},fd=function(){return Pn?Vs.default.createPortal:Vs.default.unstable_renderSubtreeIntoContainer};function Xl(e){return e()}var Rl=function(e){b0(t,e);function t(){var n,r,l,s;E0(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return s=(r=(l=cd(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(i))),l),l.removePortal=function(){!Pn&&Vs.default.unmountComponentAtNode(l.node);var c=Xl(l.props.parentSelector);c&&c.contains(l.node)?c.removeChild(l.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},l.portalRef=function(c){l.portal=c},l.renderPortal=function(c){var m=fd(),f=m(l,Ws.default.createElement(id.default,ad({defaultStyles:t.defaultStyles},c)),l.node);l.portalRef(f)},r),cd(l,s)}return v0(t,[{key:"componentDidMount",value:function(){if(an.canUseDOM){Pn||(this.node=dd("div")),this.node.className=this.props.portalClassName;var r=Xl(this.props.parentSelector);r.appendChild(this.node),!Pn&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(r){var l=Xl(r.parentSelector),s=Xl(this.props.parentSelector);return{prevParent:l,nextParent:s}}},{key:"componentDidUpdate",value:function(r,l,s){if(an.canUseDOM){var a=this.props,i=a.isOpen,u=a.portalClassName;r.portalClassName!==u&&(this.node.className=u);var c=s.prevParent,m=s.nextParent;m!==c&&(c.removeChild(this.node),m.appendChild(this.node)),!(!r.isOpen&&!i)&&!Pn&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!an.canUseDOM||!this.node||!this.portal)){var r=this.portal.state,l=Date.now(),s=r.isOpen&&this.props.closeTimeoutMS&&(r.closesAt||l+this.props.closeTimeoutMS);s?(r.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,s-l)):this.removePortal()}}},{key:"render",value:function(){if(!an.canUseDOM||!Pn)return null;!this.node&&Pn&&(this.node=dd("div"));var r=fd();return r(Ws.default.createElement(id.default,ad({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(r){S0.setElement(r)}}]),t}(Em.Component);Rl.propTypes={isOpen:se.default.bool.isRequired,style:se.default.shape({content:se.default.object,overlay:se.default.object}),portalClassName:se.default.string,bodyOpenClassName:se.default.string,htmlOpenClassName:se.default.string,className:se.default.oneOfType([se.default.string,se.default.shape({base:se.default.string.isRequired,afterOpen:se.default.string.isRequired,beforeClose:se.default.string.isRequired})]),overlayClassName:se.default.oneOfType([se.default.string,se.default.shape({base:se.default.string.isRequired,afterOpen:se.default.string.isRequired,beforeClose:se.default.string.isRequired})]),appElement:se.default.oneOfType([se.default.instanceOf(ud.default),se.default.instanceOf(an.SafeHTMLCollection),se.default.instanceOf(an.SafeNodeList),se.default.arrayOf(se.default.instanceOf(ud.default))]),onAfterOpen:se.default.func,onRequestClose:se.default.func,closeTimeoutMS:se.default.number,ariaHideApp:se.default.bool,shouldFocusAfterRender:se.default.bool,shouldCloseOnOverlayClick:se.default.bool,shouldReturnFocusAfterClose:se.default.bool,preventScroll:se.default.bool,parentSelector:se.default.func,aria:se.default.object,data:se.default.object,role:se.default.string,contentLabel:se.default.string,shouldCloseOnEsc:se.default.bool,overlayRef:se.default.func,contentRef:se.default.func,id:se.default.string,overlayElement:se.default.func,contentElement:se.default.func};Rl.defaultProps={isOpen:!1,portalClassName:k0,bodyOpenClassName:_0,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(t,n){return Ws.default.createElement("div",t,n)},contentElement:function(t,n){return Ws.default.createElement("div",t,n)}};Rl.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,j0.polyfill)(Rl);Bn.default=Rl;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Bn,r=l(n);function l(s){return s&&s.__esModule?s:{default:s}}t.default=r.default,e.exports=t.default})(ri,ri.exports);var F0=ri.exports;const bm=wd(F0);bm.setAppElement("#root");const P0=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e),A0=e=>{if(!e)return"";const t=e.filename||"",n=e.subfolder||"",r=e.type||"output",l=e.mtime?`&v=${encodeURIComponent(String(e.mtime))}`:"";return`/view?filename=${encodeURIComponent(t)}&subfolder=${encodeURIComponent(n)}&type=${encodeURIComponent(r)}${l}`};function L0({isOpen:e,media:t,onClose:n,onPrev:r,onNext:l}){if(!t)return null;const s=A0(t),a=t.subfolder||"Gallery",i=P0(t.filename);return o.jsx(bm,{isOpen:e,onRequestClose:n,overlayClassName:"react-modal-overlay",className:"react-modal-content",contentLabel:"Preview",children:o.jsxs("div",{className:"media-viewer-panel",children:[o.jsxs("header",{className:"media-viewer-head",children:[o.jsxs("div",{className:"media-viewer-meta",children:[o.jsx("div",{className:"media-viewer-title",title:t.filename,children:t.filename}),o.jsxs("div",{className:"media-viewer-sub",children:[o.jsx("span",{className:"media-chip",children:a}),o.jsx("span",{className:`media-chip ${i?"is-clip":"is-still"}`,children:i?"Video":"Image"})]})]}),o.jsxs("div",{className:"media-viewer-actions",children:[o.jsx("button",{type:"button",className:"media-btn ghost",onClick:r,"aria-label":"Previous item",children:""}),o.jsx("button",{type:"button",className:"media-btn ghost",onClick:l,"aria-label":"Next item",children:""}),o.jsx("a",{href:s,target:"_blank",rel:"noreferrer",className:"media-btn",children:"Open"}),o.jsx("button",{type:"button",className:"media-btn solid",onClick:n,children:"Close"})]})]}),o.jsxs("div",{className:"media-viewer-stage",children:[o.jsx("button",{type:"button",className:"media-stage-nav is-left",onClick:r,"aria-label":"Previous",children:""}),o.jsx("div",{className:"media-viewer-frame",children:i?o.jsx("video",{src:s,controls:!0,className:"media-viewer-media",autoPlay:!0}):o.jsx("img",{src:s,alt:t.filename,className:"media-viewer-media"})}),o.jsx("button",{type:"button",className:"media-stage-nav is-right",onClick:l,"aria-label":"Next",children:""})]})]})})}const R0=(e="")=>e.startsWith("."),O0=(e="")=>/\.(png|jpe?g|gif|webp|bmp|tif?f)$/i.test(e),T0=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e);function I0(){const e=(I,O="")=>{try{return typeof window<"u"&&localStorage.getItem(I)||O}catch{return O}},t=(I,O)=>{try{typeof window<"u"&&localStorage.setItem(I,O)}catch{}},[n,r]=d.useState(e("galleryPath","")),[l,s]=d.useState([]),[a,i]=d.useState(!1),[u,c]=d.useState(1),[m,f]=d.useState(1),[h,N]=d.useState(()=>{const I=e("galleryPageSize","30"),O=parseInt(I,10);return Number.isFinite(O)?O:30}),[x,C]=d.useState("all"),[j,g]=d.useState(!1),[p,y]=d.useState(""),[w,_]=d.useState(()=>e("galleryRecursive","0")==="1"),[D,T]=d.useState(0);d.useEffect(()=>{let I=!1;return(async()=>{i(!0);try{const X=await Yp(n,u,h,j,w,x,D);if(I)return;X&&X.items?(s(X.items),f(X.total_pages||1)):(s([]),f(1))}catch(X){console.error("Failed to load gallery",X),I||(s([]),f(1))}finally{I||i(!1)}})(),t("galleryPath",n),t("galleryPageSize",String(h)),()=>{I=!0}},[n,u,h,D,j,w,x]);const P=d.useMemo(()=>{if(!n)return[];const I=n.replace(/\\/g,"/").split("/").filter(Boolean),O=[];for(let X=0;X<I.length;X++)O.push({name:I[X],path:I.slice(0,X+1).join("/")});return O},[n]),G=d.useMemo(()=>l.filter(I=>I.type==="directory").map(I=>({filename:I.filename,subfolder:I.subfolder})),[l]),U=d.useMemo(()=>{const I=(p||"").trim().toLowerCase();return l.filter(O=>{const X=(O.filename||"").toLowerCase();return!(!j&&R0(X)||O.type!=="directory"&&(x==="image"&&!O0(X)||x==="video"&&!T0(X))||I&&!X.includes(I))})},[l,j,x,p]),V=d.useMemo(()=>U.filter(I=>I.type!=="directory"),[U]),Z=d.useCallback(()=>{if(!n)return;const I=n.replace(/\\/g,"/").lastIndexOf("/"),O=I===-1?"":n.slice(0,I);r(O),c(1)},[n]),J=d.useCallback(()=>{r(""),c(1)},[]),F=d.useCallback(I=>{r(I||""),c(1)},[]),A=d.useCallback(I=>{r(I),c(1)},[]),z=d.useCallback(I=>{const O=parseInt(String(I),10)||30;N(O),c(1)},[]),k=d.useCallback(I=>{C(I),c(1)},[]),S=d.useCallback(I=>{const O=!!I;_(O),c(1),t("galleryRecursive",O?"1":"0")},[]),$=d.useCallback(I=>{y(I),c(1)},[]),M=d.useCallback(()=>{T(I=>I+1)},[]);return d.useEffect(()=>{const I=()=>M();return typeof window<"u"&&window.addEventListener&&window.addEventListener("cozygen:queue-finished",I),()=>{typeof window<"u"&&window.removeEventListener&&window.removeEventListener("cozygen:queue-finished",I)}},[M]),d.useEffect(()=>{if(typeof window>"u")return;let I=!1,O,X;const ee=()=>{X&&(clearTimeout(X),X=null)},v=(L=8e3)=>{ee(),X=window.setTimeout(()=>{I||(M(),v(8e3))},L)};return(()=>{if(!("EventSource"in window)){v();return}const L=new URLSearchParams({subfolder:n||"",recursive:w?"1":"0",show_hidden:j?"1":"0"});O=new EventSource(`/cozygen/api/gallery/stream?${L.toString()}`),O.onmessage=()=>{I||M()},O.onerror=()=>{O&&(O.close(),O=null),v()}})(),()=>{I=!0,ee(),O&&(O.close(),O=null)}},[n,w,j,M]),{path:n,items:l,loading:a,page:u,totalPages:m,perPage:h,kind:x,showHidden:j,query:p,recursive:w,crumbs:P,dirChips:G,filtered:U,mediaItems:V,setPage:c,setPerPage:z,setShowHidden:g,setQuery:$,setKind:k,setRecursive:S,goBack:Z,goRoot:J,goToPath:F,selectDir:A,refresh:M}}function M0(e){const[t,n]=d.useState(!1),[r,l]=d.useState(null);d.useEffect(()=>{if(!e||e.length===0){l(null),n(!1);return}l(m=>m==null?m:m>=e.length?e.length-1:m)},[e]);const s=d.useCallback(m=>{if(!e||!e.length||!m)return;const f=e.indexOf(m);f!==-1&&(l(f),n(!0))},[e]),a=d.useCallback(()=>{n(!1),l(null)},[]),i=d.useCallback(()=>{!e||!e.length||l(m=>m==null?m:(m+1)%e.length)},[e]),u=d.useCallback(()=>{!e||!e.length||l(m=>m==null?m:(m-1+e.length)%e.length)},[e]),c=r!=null&&r>=0&&e&&r<e.length?e[r]:null;return{viewerOpen:t,viewerIndex:r,currentMedia:c,open:s,close:a,next:i,prev:u,setViewerOpen:n}}const pd="cozygen_gallery_view_mode",md="cozygen_gallery_feed_autoplay";function z0(e,t){const n=d.useRef(null),[r,l]=d.useState(()=>typeof window<"u"&&window.scrollY||0),[s,a]=d.useState({width:0,cols:0,top:0,viewport:typeof window<"u"&&window.innerHeight||800});d.useEffect(()=>{if(!t)return;const f=n.current;if(!f||typeof window>"u"||typeof ResizeObserver>"u")return;const h=()=>{const j=f.getBoundingClientRect(),g=j.width||f.clientWidth||1,p=Math.max(1,Math.floor(g/160)),y=j.top+(window.scrollY||0);a({width:g,cols:p,top:y,viewport:window.innerHeight||800})};h();const N=new ResizeObserver(()=>h());N.observe(f),window.addEventListener("resize",h);let x=!1;const C=()=>{x||(x=!0,window.requestAnimationFrame(()=>{x=!1,l(window.scrollY||0)}))};return window.addEventListener("scroll",C,{passive:!0}),()=>{N.disconnect(),window.removeEventListener("resize",h),window.removeEventListener("scroll",C)}},[t]);const i=t&&s.cols>0&&e.length>60,{visibleItems:u,topSpacer:c,bottomSpacer:m}=d.useMemo(()=>{if(!i)return{visibleItems:e,topSpacer:0,bottomSpacer:0};const f=s.width/s.cols,h=Math.max(180,Math.ceil(f*1.25)+32),N=Math.ceil(e.length/s.cols),x=Math.max(0,r-s.top),C=Math.max(0,Math.floor(x/h)-2),j=Math.min(N,Math.ceil((x+s.viewport)/h)+2),g=C*s.cols,p=Math.min(e.length,j*s.cols);return{visibleItems:e.slice(g,p),topSpacer:C*h,bottomSpacer:Math.max(0,(N-j)*h)}},[e,s,r,i]);return{containerRef:n,visibleItems:u,topSpacer:c,bottomSpacer:m,virtualized:i}}function D0(){const{path:e,loading:t,page:n,totalPages:r,perPage:l,kind:s,showHidden:a,recursive:i,crumbs:u,dirChips:c,filtered:m,mediaItems:f,setPage:h,setPerPage:N,setShowHidden:x,setKind:C,setRecursive:j,goBack:g,goRoot:p,goToPath:y,selectDir:w,refresh:_}=I0(),{viewerOpen:D,currentMedia:T,open:P,close:G,next:U,prev:V}=M0(f),[Z,J]=d.useState(()=>{if(typeof window>"u")return"grid";const v=window.localStorage.getItem(pd);return v==="feed"||v==="grid"?v:"grid"}),[F,A]=d.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(md)==="true");d.useEffect(()=>{try{window.localStorage.setItem(pd,Z)}catch{}},[Z]),d.useEffect(()=>{try{window.localStorage.setItem(md,F?"true":"false")}catch{}},[F]);const z=v=>{if(v.type==="directory"){w(v.subfolder);return}P(v)},k=Z==="grid",S=v=>v.type==="directory"?`dir:${v.subfolder||v.filename}`:`${v.subfolder||""}|${v.filename}`;d.useEffect(()=>{try{window.localStorage.setItem("cozygen_gallery_pending","0")}catch{}window.dispatchEvent(new Event("cozygen:gallery-viewed"))},[]);const $=t?"Loading":`${m.length} items`,{containerRef:M,visibleItems:I,topSpacer:O,bottomSpacer:X,virtualized:ee}=z0(m,k);return o.jsxs("div",{className:"page-shell page-stack",children:[o.jsxs(ti,{title:" Gallery",meta:$,children:[o.jsx(vx,{subfolder:e,crumbs:u,dirChips:c,onBack:g,onRoot:p,onCrumb:v=>y(v),onSelectDir:v=>w(v)}),o.jsxs("div",{className:"gallery-toolbar",children:[o.jsx("div",{className:"gallery-toolbar-left",children:o.jsx("div",{className:"gallery-pills",role:"group","aria-label":"Filter by type",children:[{key:"all",label:"All"},{key:"image",label:"Images"},{key:"video",label:"Videos"}].map(v=>o.jsx("button",{type:"button",className:`gallery-pill ${s===v.key?"is-active":""}`,onClick:()=>C(v.key),"aria-pressed":s===v.key,children:v.label},v.key))})}),o.jsxs("div",{className:"gallery-toolbar-right",children:[o.jsxs("div",{className:"gallery-view-toggle",role:"group","aria-label":"View mode",children:[o.jsx("button",{type:"button",className:Z==="grid"?"is-active":"",onClick:()=>J("grid"),"aria-pressed":Z==="grid",title:"Grid view",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[o.jsx("rect",{x:"1",y:"1",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"9",y:"1",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"1",y:"9",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"9",y:"9",width:"6",height:"6",rx:"1"})]})}),o.jsx("button",{type:"button",className:Z==="feed"?"is-active":"",onClick:()=>J("feed"),"aria-pressed":Z==="feed",title:"Feed view",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[o.jsx("rect",{x:"2",y:"1",width:"12",height:"5",rx:"1"}),o.jsx("rect",{x:"2",y:"8",width:"12",height:"5",rx:"1"})]})})]}),o.jsxs("div",{className:"gallery-options",children:[o.jsx("button",{type:"button",className:`gallery-option-btn ${i?"is-active":""}`,onClick:()=>j(v=>!v),title:i?"Showing subfolders":"This folder only",children:i?"":""}),o.jsx("button",{type:"button",className:`gallery-option-btn ${a?"is-active":""}`,onClick:()=>x(v=>!v),title:a?"Showing hidden":"Hiding hidden",children:a?"":""}),Z==="feed"&&o.jsx("button",{type:"button",className:`gallery-option-btn ${F?"is-active":""}`,onClick:()=>A(v=>!v),title:F?"Autoplay on":"Autoplay off",children:F?"":""}),o.jsx("button",{type:"button",className:"gallery-option-btn",onClick:_,title:"Refresh",children:""})]})]})]}),o.jsxs("div",{className:"gallery-pagination",children:[o.jsx("div",{className:"gallery-pagination-info",children:t?o.jsx("span",{className:"gallery-loading-text",children:"Loading"}):o.jsxs("span",{children:[m.length," items"]})}),o.jsxs("div",{className:"gallery-pagination-controls",children:[o.jsx("button",{type:"button",className:"gallery-page-btn",onClick:()=>h(v=>Math.max(1,v-1)),disabled:n<=1||t,"aria-label":"Previous page",children:""}),o.jsxs("span",{className:"gallery-page-indicator",children:[n," / ",r]}),o.jsx("button",{type:"button",className:"gallery-page-btn",onClick:()=>h(v=>v<r?v+1:v),disabled:n>=r||t,"aria-label":"Next page",children:""}),o.jsxs("select",{value:l,onChange:v=>N(parseInt(v.target.value,10)||30),className:"gallery-page-size","aria-label":"Items per page",children:[o.jsx("option",{value:15,children:"15"}),o.jsx("option",{value:30,children:"30"}),o.jsx("option",{value:60,children:"60"}),o.jsx("option",{value:120,children:"120"})]})]})]}),t&&m.length===0?o.jsx("div",{className:"gallery-grid-responsive",children:Array.from({length:8}).map((v,E)=>o.jsxs("div",{className:"gallery-skeleton-item",children:[o.jsx("div",{className:"gallery-skeleton-thumb skeleton"}),o.jsx("div",{className:"gallery-skeleton-label skeleton skeleton-text"})]},E))}):m.length===0&&!t?o.jsxs("div",{className:"gallery-empty",children:[o.jsx("div",{className:"gallery-empty-icon",children:""}),o.jsx("div",{className:"gallery-empty-title",children:"No media found"}),o.jsx("div",{className:"gallery-empty-desc",children:s!=="all"?`No ${s}s match your filters. Try selecting "All" or adjusting your search.`:"This folder is empty. Render something new or navigate to a different folder."})]}):k?o.jsx("div",{className:"w-full overflow-hidden",children:o.jsxs("div",{className:"gallery-grid-responsive",ref:M,children:[ee&&O>0?o.jsx("div",{"aria-hidden":!0,style:{gridColumn:"1 / -1",height:`${O}px`}}):null,I.map(v=>o.jsx(ld,{item:v,onSelect:z,variant:"grid",autoPlay:!1},S(v))),ee&&X>0?o.jsx("div",{"aria-hidden":!0,style:{gridColumn:"1 / -1",height:`${X}px`}}):null]})}):o.jsx("div",{className:"flex flex-col gap-4 items-center",children:m.filter(v=>v.type!=="directory").map(v=>o.jsx("div",{className:"w-full flex justify-center",children:o.jsx("div",{className:"w-full max-w-[480px] sm:max-w-[640px] rounded-2xl border border-[#2A2E4A] bg-[#050716] px-3 py-3 shadow-[0_0_24px_rgba(5,7,22,0.9)]",children:o.jsx(ld,{item:v,onSelect:z,variant:"feed",autoPlay:F})})},S(v)))})]}),o.jsx(L0,{isOpen:D,media:T,onClose:G,onPrev:V,onNext:U})]})}function $0({workflow:e,preset:t,workflowMode:n,modeOptions:r=[],previewSrc:l,previewType:s="image",tags:a=[],isSelected:i,requiresImages:u=!1,onActivate:c,onQuickEdit:m,onImages:f,onAssignMode:h,onUploadPreview:N,onClear:x,savingMode:C,previewSaving:j=!1,quickEditActive:g=!1,children:p,description:y}){var U;const w=d.useRef(null),_=d.useRef(null);d.useEffect(()=>{i&&w.current&&w.current.focus()},[i]),d.useEffect(()=>{if(typeof document>"u")return;const V=w.current;if(!i||!V){const J=document.activeElement;!i&&V&&J&&V.contains(J)&&typeof J.blur=="function"&&J.blur();return}const Z=J=>{w.current&&(w.current.contains(J.target)||requestAnimationFrame(()=>{var F;(F=w.current)==null||F.focus()}))};return document.addEventListener("focusin",Z,!0),()=>{document.removeEventListener("focusin",Z,!0)}},[i]),d.useEffect(()=>{if(!i||!w.current)return;const V=w.current,Z=J=>{if(J.key==="Escape"){x==null||x();return}};return V.addEventListener("keydown",Z),()=>V.removeEventListener("keydown",Z)},[i,x]);const D=d.useMemo(()=>{if(!n)return"Uncategorized";const V=r.find(Z=>Z.id===n);return V?V.label:n},[n,r]),T=s==="video"||l&&l.startsWith("data:video"),P=V=>{var J;const Z=(J=V.target.files)==null?void 0:J[0];Z&&(N==null||N(Z),V.target.value="")},G=["preset-card",i?"preset-card--active":""].filter(Boolean).join(" ");return o.jsxs("div",{className:G,tabIndex:i?0:-1,ref:w,children:[o.jsxs("div",{className:"preset-card-media",onClick:()=>c==null?void 0:c(),children:[l?T?o.jsx("video",{src:l,muted:!0,loop:!0,playsInline:!0,autoPlay:!0,className:"preset-card-media-src"}):o.jsx("img",{src:l,alt:`${t==null?void 0:t.name} preview`,loading:"lazy",className:"preset-card-media-src"}):o.jsx("div",{className:"preset-card-preview preset-card-preview--placeholder",children:o.jsx("span",{children:((U=t==null?void 0:t.name)==null?void 0:U.slice(0,1))||"P"})}),o.jsxs("div",{className:"preset-card-overlay",children:[o.jsxs("div",{children:[o.jsx("span",{className:"ui-kicker",children:e}),o.jsx("div",{className:"preset-card-title",children:t==null?void 0:t.name})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("select",{id:`mode-${e}-${t==null?void 0:t.name}`,value:n||"",onChange:V=>h==null?void 0:h(V.target.value||null),disabled:C,className:"preset-card-mode-select",children:[o.jsx("option",{value:"",children:"Unset"}),r.map(V=>o.jsx("option",{value:V.id,children:V.label},V.id))]}),o.jsx("button",{type:"button",className:"preset-card-setref",onClick:V=>{var Z;V.stopPropagation(),(Z=_.current)==null||Z.click()},disabled:j,children:j?"Uploading":"Reference"}),o.jsx("input",{ref:_,type:"file",accept:"image/*,video/*",hidden:!0,onChange:P})]})]})]}),o.jsxs("div",{className:"preset-card-underbar",children:[o.jsxs("div",{className:"preset-card-tagrow",children:[o.jsx("span",{className:"preset-card-chip is-kind",children:D}),u&&o.jsx("span",{className:"preset-card-chip is-alert",children:"Image input"}),a.map(V=>o.jsx("span",{className:"preset-card-chip",children:V},V))]}),y&&o.jsx("p",{className:"preset-card-description",children:y}),o.jsxs("div",{className:"preset-card-actions",children:[o.jsx("button",{type:"button",className:"ui-button is-primary is-compact",onClick:V=>{V.stopPropagation(),c==null||c()},children:i?"Reapply":"Activate"}),o.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:V=>{V.stopPropagation(),m==null||m()},children:g?"Hide tweaks":"Quick tweaks"}),o.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:V=>{V.stopPropagation(),f==null||f()},children:"Images"})]})]}),i&&p&&o.jsx("div",{className:"preset-card-drawer",onClick:V=>V.stopPropagation(),children:p})]})}function U0({input:e,value:t,onFormChange:n}){const{param:r,previewUrl:l,imgReady:s,setImgReady:a,displayName:i,serverOpen:u,openServer:c,closeServer:m,cwd:f,setCwd:h,page:N,setPage:x,perPage:C,setPerPage:j,totalPages:g,topDirs:p,loading:y,search:w,setSearch:_,imagesOnly:D,setImagesOnly:T,shownEntries:P,pickerSource:G,setPickerSource:U,handleUpload:V,clearImage:Z,selectServer:J}=uu({input:e,value:t,onFormChange:n}),F=d.useRef(null),[A,z]=d.useState(0),k=async $=>{var I;const M=(I=$.target.files)==null?void 0:I[0];M&&(await V(M),F.current&&(F.current.value=""),z(O=>O+1))},S=()=>{var $;return($=F.current)==null?void 0:$.click()};return o.jsxs("div",{className:"preset-image-row",children:[o.jsx("input",{ref:F,type:"file",accept:"image/*",className:"hidden",onChange:k},A),o.jsx("div",{className:"preset-image-thumb",children:l?o.jsx("img",{src:l,alt:r,className:s?"opacity-100":"opacity-0",onLoad:()=>a(!0)}):o.jsx("span",{children:(r==null?void 0:r.slice(0,1))||"I"})}),o.jsxs("div",{className:"preset-image-info",children:[o.jsx("div",{className:"preset-image-name",children:r}),o.jsx("div",{className:"preset-image-hint",children:t||i||"No file selected"})]}),o.jsxs("div",{className:"preset-image-actions",children:[o.jsx("button",{type:"button",className:"preset-image-action",onClick:S,children:"Upload"}),o.jsx("button",{type:"button",className:"preset-image-action",onClick:c,children:"Server"}),t?o.jsx("button",{type:"button",className:"preset-image-action is-clear",onClick:Z,children:"Clear"}):null]}),o.jsx(cu,{open:u,cwd:f,setCwd:h,page:N,setPage:x,perPage:C,setPerPage:j,totalPages:g,topDirs:p,loading:y,imagesOnly:D,setImagesOnly:T,search:w,setSearch:_,shownEntries:P,pickerSource:G,setPickerSource:U,onSelect:J,onClose:m})]})}function B0(e){return!e||!e.filename?null:`/cozygen/thumb?${new URLSearchParams({type:e.type||"output",subfolder:e.subfolder||"",filename:e.filename,w:"640"}).toString()}`}function W0(e){var t;return((t=e==null?void 0:e.preview)==null?void 0:t.kind)==="data"&&e.preview.data?e.preview.data:B0(e==null?void 0:e.example)}function V0(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=n,r.readAsDataURL(e)})}const km=/\.(png|jpe?g|webp|gif|bmp)$/i,H0=/\.(mp4|webm|mov|mkv)$/i;function G0(e){var c;const t=(e==null?void 0:e.values)||{},n=Array.isArray((c=e==null?void 0:e.meta)==null?void 0:c.tags)?e.meta.tags:[],r=[];n.forEach(m=>{typeof m=="string"&&m.trim()&&r.push(m.trim().slice(0,24))}),Object.values(t).some(m=>typeof m=="string"&&km.test(m))&&r.push("Image Input");const s=t["Frame Count"]||t.frames;s&&r.push(`${s} frames`);const a=t.Steps||t["Sampling Steps"]||t.steps;a&&r.push(`${a} steps`);const i=t.Seed||t.seed;typeof i<"u"&&r.push(`Seed ${i}`);const u=t.FPS||t["Video FPS"];return u&&r.push(`${u} fps`),[...new Set(r)].slice(0,4)}const hd=4,K0=[{id:"prompt",weight:1,test:e=>/prompt/i.test(e.label||"")&&!/negative/i.test(e.label||"")},{id:"negative_prompt",weight:2,test:e=>/negative/i.test(e.label||"")&&/prompt/i.test(e.label||"")},{id:"steps",weight:3,test:e=>/step/i.test(e.label||e.paramName||"")},{id:"cfg",weight:4,test:e=>/cfg|guidance/i.test(e.label||e.paramName||"")},{id:"seed",weight:5,test:e=>/seed/i.test(e.label||e.paramName||"")},{id:"sampler",weight:6,test:e=>/sampler|schedule/i.test(e.label||e.paramName||"")},{id:"frames",weight:7,test:e=>/frame/i.test(e.label||e.paramName||"")},{id:"dimensions",weight:8,test:e=>/width|height|resolution/i.test(e.label||e.paramName||"")}];function Q0(e=[],t){var s;if(!e.length)return[];const n=new Map;e.forEach(a=>{const i=jl(a);i&&n.set(i,a)});const r=Array.isArray((s=t==null?void 0:t.meta)==null?void 0:s.quick_params)?t.meta.quick_params.map(a=>String(a||"").trim()).filter(a=>!!a&&n.has(a)):null;if(r&&r.length)return r.slice(0,hd).map(a=>{const i=n.get(a);return{cfg:on(i),input:i}});const l=[];return e.forEach(a=>{if(!a||a.class_type==="CozyGenImageInput")return;const i=on(a),u=K0.reduce((c,m)=>c!==1/0?c:m.test(i)?m.weight:1/0,1/0);u!==1/0&&l.push({cfg:i,input:a,priority:u})}),l.sort((a,i)=>a.priority-i.priority),l.slice(0,hd)}function Y0(e,t,n){const r=`quick-${e.paramName}`,l={id:r,name:e.paramName,className:"quick-field-control",placeholder:typeof e.placeholder=="string"?e.placeholder:""};if(e.paramType==="DROPDOWN"){const a=Array.isArray(e.choices)?e.choices:[];return o.jsxs("select",{...l,value:t??"",onChange:i=>n(i.target.value),children:[o.jsx("option",{value:"",children:"Preset value"}),a.map(i=>o.jsx("option",{value:i,children:i},i))]})}if(e.paramType==="BOOLEAN")return o.jsxs("label",{className:"quick-field-boolean",htmlFor:r,children:[o.jsx("input",{id:r,name:e.paramName,type:"checkbox",checked:!!t,onChange:a=>n(a.target.checked)}),o.jsx("span",{children:"Enable"})]});const s=e.paramType==="NUMBER"?"number":"text";return o.jsx("input",{...l,type:s,value:typeof t=="number"&&Number.isFinite(t)?t:t??"",onChange:a=>n(a.target.value),min:e.min,max:e.max,step:e.step||(e.paramType==="NUMBER"?"any":void 0)})}function q0(){const{workflows:e,selectedWorkflow:t,selectWorkflow:n,loading:r}=sm(),{workflowData:l,dynamicInputs:s=[],imageInputs:a=[],formData:i={},setFormData:u,handleFormChange:c}=om(t),{aliasLookup:m}=fu(),{isLoading:f,statusText:h,handleGenerate:N}=im({selectedWorkflow:t,workflowData:l,dynamicInputs:s,imageInputs:a,formData:i,setFormData:u,promptAliases:m}),x=d.useCallback(()=>{t&&N()},[t,N]),[C,j]=d.useState({}),[g,p]=d.useState(!1),[y,w]=d.useState(""),[_,D]=d.useState(""),[T,P]=d.useState(null),[G,U]=d.useState({}),[V,Z]=d.useState(null),[J,F]=d.useState("all"),[A,z]=d.useState(""),[k,S]=d.useState(null),[$,M]=d.useState(!0),[I,O]=d.useState(""),[X,ee]=d.useState({}),[v,E]=d.useState(!0),L=d.useRef({}),R=d.useRef(null),H=d.useMemo(()=>um(t,s),[t,s]),q=d.useCallback(async(b,W,Q)=>{const pe=(C[b]||[]).find(ge=>ge.name===W);if(pe){S(`${b}::${W}`);try{await hy(b,W,pe.values||{},Q||{}),j(ge=>({...ge,[b]:(ge[b]||[]).map(ye=>ye.name===W?{...ye,meta:Q||{}}:ye)}))}catch(ge){console.error("Failed to update preset metadata",ge),w("Failed to update preset metadata")}finally{S(null)}}},[C]),le=d.useCallback(async()=>{if(!e||e.length===0){j({});return}p(!0),w("");const b={};for(const W of e)try{const Q=await qp(W);b[W]=pm((Q==null?void 0:Q.items)||{})}catch(Q){console.error("Failed to load presets for",W,Q),b[W]=[],w("Some presets could not be loaded.")}j(b),p(!1)},[e]);d.useEffect(()=>{le()},[le]),d.useEffect(()=>{const b=()=>{le()};return window.addEventListener("cozygen:preset-changed",b),()=>window.removeEventListener("cozygen:preset-changed",b)},[le]),d.useEffect(()=>{let b=!1;async function W(){try{const Q=await yy();b||U((Q==null?void 0:Q.workflows)||{})}catch(Q){console.error("Failed to load workflow types",Q)}}return W(),()=>{b=!0}},[]),d.useEffect(()=>{if(!_)return;const[b,W]=_.split("::");(C[b]||[]).some(ne=>ne.name===W)||D("")},[C,_]),d.useEffect(()=>{I&&I!==_&&O("")},[I,_]);const oe=d.useCallback(b=>{if(!b)return;const W=L.current[b];W&&(W.scrollIntoView({behavior:"smooth",block:"center"}),W.classList.add("preset-card-section--highlight"),setTimeout(()=>{W.classList.remove("preset-card-section--highlight")},800))},[]);d.useEffect(()=>{if(!T||!l||T.workflow!==t)return;const b=T.values||{};u(b),t&&Nr(t,b),P(null)},[T,t,l,u]),d.useEffect(()=>{_&&R.current===_&&(oe(_),R.current=null)},[_,oe]);const we=d.useMemo(()=>Object.entries(C).flatMap(([b,W])=>(W||[]).map(Q=>({workflow:b,...Q}))),[C]),Oe=d.useMemo(()=>{const b=A.trim().toLowerCase();return we.filter(W=>{var pe;const Q=G[W.workflow]||"";return J!=="all"&&Q!==J?!1:b?`${W.name} ${W.workflow} ${((pe=W.meta)==null?void 0:pe.description)||""}`.toLowerCase().includes(b):!0})},[we,J,A,G]),B=d.useMemo(()=>{if(!_)return null;const[b,W]=_.split("::"),Q=(C[b]||[]).find(ne=>ne.name===W);return Q?{workflow:b,...Q}:null},[_,C]),Y=!!B&&!!l&&t===B.workflow,re=d.useMemo(()=>{if(!Y)return[];const b=new Map;(H||[]).forEach(Q=>{const ne=jl(Q);ne&&b.set(ne,Q)});const W=[];return lm.forEach(Q=>{var bn,Ol;const ne=sn(b,Q.highParamAliases||Q.highParam),pe=sn(b,Q.lowParamAliases||Q.lowParam);if(!ne||!pe)return;const ge=on(ne.input),ye=on(pe.input);if(ge.paramType!=="DROPDOWN"||ye.paramType!=="DROPDOWN"||!((bn=ge.choices)!=null&&bn.length)||!((Ol=ye.choices)!=null&&Ol.length))return;const Te=sn(b,Q.highStrengthParamAliases||Q.highStrengthParam),Ke=sn(b,Q.lowStrengthParamAliases||Q.lowStrengthParam);W.push({...Q,highParam:ne.name,lowParam:pe.name,highStrengthParam:Te==null?void 0:Te.name,lowStrengthParam:Ke==null?void 0:Ke.name,highCfg:ge,lowCfg:ye})}),W},[Y,H]),ae=d.useCallback(()=>{O(b=>b===_?"":b),ee(b=>{if(!_||!b[_])return b;const W={...b};return delete W[_],W}),D("")},[_]),ue=d.useCallback((b,W)=>{if(!(W!=null&&W.name))return;const Q=`${b}::${W.name}`;if(_===Q){ae();return}if(D(Q),P({workflow:b,values:W.values||{}}),b!==t)n(b);else{const ne=W.values||{};u(ne),b&&Nr(b,ne)}},[_,ae,n,t,u]),he=d.useCallback(b=>{if(!(b!=null&&b.name))return;const W=`${b.workflow}::${b.name}`;_!==W?(R.current=W,ue(b.workflow,b)):oe(W)},[ue,oe,_]),fe=d.useCallback((b,W,Q,ne)=>{const ge=(()=>{if(ne==="NUMBER"){if(Q===""||Q===null||typeof Q>"u")return"";const ye=Number(Q);return Number.isNaN(ye)?"":ye}return ne==="BOOLEAN"?!!Q:Q===""||Q===null||typeof Q>"u"?"":Q})();ee(ye=>{const Te={...ye},Ke={...ye[b]||{}};return typeof ge>"u"?delete Ke[W]:Ke[W]=ge,Object.keys(Ke).length===0?delete Te[b]:Te[b]=Ke,Te})},[]),ce=d.useCallback(b=>{ee(W=>{if(!W[b])return W;const Q={...W};return delete Q[b],Q})},[]),Pe=d.useCallback(b=>{if(!(b!=null&&b.name))return;const W=`${b.workflow}::${b.name}`;_!==W&&ue(b.workflow,b),O(Q=>Q===W?"":W)},[_,ue]),ct=d.useCallback(async(b,W,Q)=>{if(Q)try{const ne=await V0(Q),pe={...W.meta||{},preview:{kind:"data",data:ne,mime:Q.type,name:Q.name,updatedAt:Date.now()}};await q(b,W.name,pe)}catch(ne){console.error("Preview upload failed",ne),w("Preview upload failed")}},[q]),ze=d.useCallback(async(b,W)=>{Z(b);try{await xy(b,W),U(Q=>{const ne={...Q};return W?ne[b]=W:delete ne[b],ne})}catch(Q){console.error("Failed to save workflow type",Q),w("Workflow type update failed")}finally{Z(null)}},[]);return r?o.jsx("div",{className:"page-shell",children:o.jsxs("details",{className:"ui-panel collapsible-card",children:[o.jsx("summary",{className:"collapsible-card-summary",children:o.jsx("span",{className:"collapsible-card-summary-label",children:"Preset library"})}),o.jsx("div",{className:"collapsible-card-body text-center text-sm text-[#9DA3FFCC]",children:"Loading workflows"})]})}):!e||e.length===0?o.jsx("div",{className:"page-shell",children:o.jsxs("details",{className:"ui-panel collapsible-card",children:[o.jsx("summary",{className:"collapsible-card-summary",children:o.jsx("span",{className:"collapsible-card-summary-label",children:"Preset library"})}),o.jsx("div",{className:"collapsible-card-body text-center text-sm text-[#9DA3FFCC]",children:"No workflows found. Drop workflow JSON files into CozyGen/workflows and refresh."})]})}):o.jsxs("div",{className:"page-shell page-stack",children:[o.jsxs("details",{className:"ui-panel collapsible-card",open:!$,onToggle:b=>M(!b.target.open),children:[o.jsx("summary",{className:"collapsible-card-summary",children:o.jsx("span",{className:"collapsible-card-summary-label",children:"Preset library"})}),o.jsxs("div",{className:"collapsible-card-body space-y-4",children:[o.jsxs("div",{className:"ui-section-text",children:[o.jsx("span",{className:"ui-kicker",children:"Preset library"}),o.jsx("h1",{className:"ui-title",children:"Pick, tap, launch."})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{type:"button",onClick:le,className:"ui-button is-ghost is-compact",children:"Refresh"})}),o.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-[#7C82BF]",children:[o.jsxs("span",{children:[Oe.length," presets"]}),y&&o.jsx("span",{className:"text-[#FF9BEA]",children:y})]}),o.jsxs("div",{className:"filter-rail flex items-center gap-2 overflow-x-auto rounded-full border border-[#1F2342] bg-[#050716] px-2 py-1 text-[11px] uppercase tracking-[0.16em] text-[#9DA3FF]",children:[[{id:"all",label:"All"},...ni].map(b=>o.jsx("button",{type:"button",onClick:()=>F(b.id),className:`shrink-0 rounded-full px-3 py-1 border ${J===b.id?"bg-[#11152C] border-[#3EF0FF99] text-[#F8F4FF]":"border-transparent text-[#8B90C9]"}`,children:b.label},b.id)),o.jsx("div",{className:"mx-1 h-4 w-px bg-[#1F2342]"}),o.jsxs("label",{className:"flex items-center gap-1 rounded-full bg-[#0C0F2C] px-3 py-1 text-[#C3C7FF]",children:[o.jsx("span",{className:"text-xs",children:"Search"}),o.jsx("input",{type:"search",value:A,onChange:b=>z(b.target.value),placeholder:"Keywords",className:"w-24 bg-transparent text-[11px] text-[#F8F4FF] placeholder-[#61679B] focus:outline-none"})]})]})]})]}),o.jsxs("details",{className:"ui-panel collapsible-card",open:!v,onToggle:b=>E(!b.target.open),children:[o.jsx("summary",{className:"collapsible-card-summary",children:o.jsx("span",{className:"collapsible-card-summary-label",children:"Preset selection"})}),o.jsx("div",{className:"collapsible-card-body space-y-4",children:g?o.jsx("div",{className:"ui-card text-center text-sm text-[#9DA3FFCC]",children:"Loading presets"}):Oe.length===0?o.jsx("div",{className:"ui-card text-center text-sm text-[#9DA3FFCC]",children:"No presets yet. Save one from Studio to get started."}):o.jsx("div",{className:["preset-grid","grid gap-5 sm:grid-cols-2 xl:grid-cols-3",B?"has-active":""].filter(Boolean).join(" "),children:Oe.map(b=>{var hu,gu,vu,yu,xu,wu,Nu;const W=`${b.workflow}::${b.name}`,Q=G0(b),ne=_===W,pe=W0(b.meta),ge=(vu=(gu=(hu=b.meta)==null?void 0:hu.preview)==null?void 0:gu.mime)!=null&&vu.startsWith("video")||(xu=(yu=b.meta)==null?void 0:yu.example)!=null&&xu.filename&&H0.test(b.meta.example.filename)||pe&&pe.startsWith("data:video")?"video":"image",ye=(((wu=b.meta)==null?void 0:wu.requires_images)??Object.values(b.values||{}).some(Qe=>typeof Qe=="string"&&km.test(Qe)))||!1,Te=X[W]||{};let Ke=!1;const bn=k===W,Ol=Qe=>{Qe?L.current[W]=Qe:delete L.current[W]};let go=null;if(ne)if(!Y||b.workflow!==t)go=o.jsxs("div",{className:"preset-card-section",children:[o.jsx("p",{className:"ui-hint",children:"Loading workflow controls"}),o.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:Qe=>{Qe.stopPropagation(),ae()},children:"Clear selection"})]});else{const Qe=a.length>0,Su=Qe&&a.some(ie=>!i[ie.inputs.param_name]);Ke=Y&&(!Qe||!Su)&&!f;const ju=I===W?Q0(H,b):[],Pm=I===W&&ju.length>0;go=o.jsxs(o.Fragment,{children:[I===W&&o.jsxs("div",{className:"preset-card-section",children:[o.jsx("h4",{children:"Quick tweaks"}),Pm?o.jsx("div",{className:"quick-field-grid",children:ju.map(({cfg:ie})=>{var Cu;const Pt=i[ie.paramName]??((Cu=b.values)==null?void 0:Cu[ie.paramName])??"",Yt=Object.prototype.hasOwnProperty.call(Te,ie.paramName),Ar=Te[ie.paramName],qt=Yt?Ar:Pt,Am=!Yt&&(typeof Pt=="number"||typeof Pt=="string")?`Preset: ${Pt}`:"";return o.jsxs("div",{className:"quick-field",children:[o.jsx("label",{htmlFor:`quick-${ie.paramName}`,className:"quick-field-label",children:ie.label}),Y0({...ie,placeholder:Am},qt,Lm=>fe(W,ie.paramName,Lm,ie.paramType))]},ie.paramName)})}):null,o.jsx("div",{className:"quick-field-footer",children:o.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:ie=>{ie.stopPropagation(),ce(W)},disabled:!Te||!Object.keys(Te).length,children:"Reset overrides"})})]}),o.jsxs("div",{className:"preset-card-section",ref:Ol,children:[o.jsx("h4",{children:"Image inputs"}),a.length?o.jsx("div",{className:"preset-image-list",children:a.map(ie=>{var qt;const Pt=ie.inputs.param_name,Yt=(qt=B.values)==null?void 0:qt[Pt],Ar=i[Pt]||(typeof Yt=="string"?Yt:"");return o.jsx(U0,{input:ie,value:Ar,onFormChange:c},ie.id)})}):o.jsx("p",{className:"ui-hint",children:"This preset does not need reference images."})]}),re.length>0&&o.jsxs("div",{className:"preset-card-section",children:[o.jsx("h4",{children:"LoRA controls"}),o.jsx("div",{className:"space-y-2",children:re.map(ie=>{const Pt=ie.highStrengthParam?i[ie.highStrengthParam]:void 0,Yt=ie.lowStrengthParam?i[ie.lowStrengthParam]:void 0,Ar=Pt??Yt??1;return o.jsx(ei,{name:ie.id||ie.highParam,label:ie.label,highParam:ie.highParam,lowParam:ie.lowParam,highChoices:ie.highCfg.choices,lowChoices:ie.lowCfg.choices,formData:i,onChangeParam:c,highStrengthParam:ie.highStrengthParam,lowStrengthParam:ie.lowStrengthParam,strengthValue:Ar,highStrengthValue:Pt,lowStrengthValue:Yt,onChangeHighStrength:ie.highStrengthParam?qt=>c(ie.highStrengthParam,qt):void 0,onChangeLowStrength:ie.lowStrengthParam?qt=>c(ie.lowStrengthParam,qt):void 0},ie.id||ie.highParam)})})]}),o.jsxs("div",{className:"preset-card-section preset-card-generate",children:[Qe&&Su&&o.jsx("p",{className:"ui-hint text-[#FF9BEA]",children:"Provide the required reference images to unlock render."}),o.jsx("button",{type:"button",className:"ui-button is-primary",disabled:!Ke,onClick:()=>Ke&&x(),children:f?"Rendering":"Generate"}),o.jsx("div",{className:"preset-card-status",children:h||(f?"Working":"Idle")}),o.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:ie=>{ie.stopPropagation(),ae()},children:"Clear selection"})]})]})}return o.jsx($0,{workflow:b.workflow,preset:b,workflowMode:G[b.workflow],modeOptions:ni,previewSrc:pe,previewType:ge,isSelected:ne,tags:Q,requiresImages:ye,onActivate:()=>ue(b.workflow,b),onQuickEdit:()=>Pe(b),quickEditActive:I===W,onAssignMode:Qe=>ze(b.workflow,Qe),onUploadPreview:Qe=>ct(b.workflow,b,Qe),onImages:()=>he(b),onClear:ae,savingMode:V===b.workflow,description:(((Nu=b.meta)==null?void 0:Nu.description)||"").trim(),previewSaving:bn,children:go},W)})})})]})]})}function qo({sectionTitle:e,name:t,description:n,preview:r,keywords:l=[],promptExamples:s=[],sourceUrl:a,sourceLabel:i="Visit source",tags:u=[],recommendedWeight:c,modelName:m,status:f="configured",files:h,pairState:N,folder:x,onEdit:C}){const j=r&&r.src,g=(r==null?void 0:r.alt)||`${t} preview`,p=Array.isArray(l)&&l.length>0,y=Array.isArray(s)&&s.length>0,w=Array.isArray(h==null?void 0:h.others)?h.others:[],_=(h==null?void 0:h.high)||(h==null?void 0:h.low)||(h==null?void 0:h.single)||w.length>0,D=f==="detected"?"Needs details":f==="missing"?"Missing files":"Published";return o.jsxs("article",{className:"lora-card",children:[o.jsxs("div",{className:"lora-card-media",children:[j?o.jsx("img",{src:r.src,alt:g,loading:"lazy"}):o.jsx("div",{className:"lora-card-media-placeholder",children:(t==null?void 0:t.slice(0,2))||"LL"}),o.jsxs("div",{className:"lora-card-media-badges",children:[e&&o.jsx("span",{className:"lora-card-chip is-section",children:e}),c&&o.jsx("span",{className:"lora-card-chip",children:`Weight ${c}`}),o.jsx("span",{className:`lora-card-chip is-status-${f}`,children:D})]})]}),o.jsxs("div",{className:"lora-card-body",children:[o.jsxs("div",{className:"lora-card-head",children:[o.jsxs("div",{children:[o.jsx("span",{className:"ui-kicker",children:"LoRA"}),o.jsx("h3",{className:"lora-card-title",children:t}),m&&o.jsx("p",{className:"lora-card-model",children:m}),x&&o.jsxs("p",{className:"lora-card-folder",children:["Folder: ",x]}),N&&o.jsxs("p",{className:"lora-card-folder",children:["Pair: ",N]})]}),u.length>0&&o.jsx("div",{className:"lora-card-tagcol",children:u.map(T=>o.jsx("span",{className:"lora-card-chip is-muted",children:T},T))})]}),n&&o.jsx("p",{className:"lora-card-description",children:n}),p&&o.jsxs("section",{className:"lora-card-section",children:[o.jsx("header",{children:o.jsx("span",{className:"ui-kicker",children:"Keywords"})}),o.jsx("div",{className:"lora-card-chiprow",children:l.map(T=>o.jsx("span",{className:"lora-card-chip is-soft",children:T},T))})]}),y&&o.jsxs("section",{className:"lora-card-section",children:[o.jsx("header",{children:o.jsx("span",{className:"ui-kicker",children:"Prompt examples"})}),o.jsx("div",{className:"lora-card-prompts",children:s.map((T,P)=>o.jsxs("article",{className:"lora-card-prompt",children:[T.title&&o.jsx("h4",{className:"lora-card-prompt-title",children:T.title}),T.text&&o.jsx("p",{className:"lora-card-prompt-text",children:T.text}),T.weightTip&&o.jsx("p",{className:"lora-card-prompt-note",children:T.weightTip}),T.negative&&o.jsxs("p",{className:"lora-card-prompt-note is-negative",children:["Negative: ",T.negative]})]},T.title||P))})]}),_&&o.jsxs("section",{className:"lora-card-section",children:[o.jsx("header",{children:o.jsx("span",{className:"ui-kicker",children:"Detected files"})}),o.jsxs("ul",{className:"lora-card-files",children:[(h==null?void 0:h.high)&&o.jsxs("li",{children:[o.jsx("strong",{children:"High:"})," ",h.high]}),(h==null?void 0:h.low)&&o.jsxs("li",{children:[o.jsx("strong",{children:"Low:"})," ",h.low]}),w.map(T=>o.jsx("li",{children:T},T)),!(h!=null&&h.high)&&!(h!=null&&h.low)&&w.length===0&&o.jsx("li",{children:"No files detected yet."})]})]}),a&&o.jsxs("section",{className:"lora-card-section",children:[o.jsx("header",{children:o.jsx("span",{className:"ui-kicker",children:"Original website"})}),o.jsx("a",{href:a,target:"_blank",rel:"noreferrer",className:"lora-card-link",children:i})]}),typeof C=="function"&&o.jsx("div",{className:"lora-card-actions",children:o.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>C(),children:f==="detected"?"Add details":"Edit card"})})]})]})}const fs=()=>({title:"",text:"",negative:"",weightTip:""});function gd(e){return e?e.split(",").map(t=>t.trim()).filter(Boolean):[]}function J0({examples:e,onChange:t}){const n=e.length?e:[fs()],r=(a,i,u)=>{const c=n.map((m,f)=>f===a?{...m,[i]:u}:m);t(c)},l=a=>{const i=n.filter((u,c)=>c!==a);t(i.length?i:[fs()])},s=()=>{t([...n,fs()])};return o.jsxs("div",{className:"lora-editor-prompts",children:[n.map((a,i)=>o.jsxs("div",{className:"lora-editor-prompt-card",children:[o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:`prompt-title-${i}`,children:"Title"}),o.jsx("input",{id:`prompt-title-${i}`,type:"text",value:a.title,onChange:u=>r(i,"title",u.target.value)})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:`prompt-text-${i}`,children:"Prompt text"}),o.jsx("textarea",{id:`prompt-text-${i}`,value:a.text,rows:3,onChange:u=>r(i,"text",u.target.value)})]}),o.jsxs("div",{className:"lora-editor-field two-col",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:`prompt-weight-${i}`,children:"Weight tip"}),o.jsx("input",{id:`prompt-weight-${i}`,type:"text",value:a.weightTip,onChange:u=>r(i,"weightTip",u.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:`prompt-negative-${i}`,children:"Negative hint"}),o.jsx("input",{id:`prompt-negative-${i}`,type:"text",value:a.negative,onChange:u=>r(i,"negative",u.target.value)})]})]}),o.jsx("button",{type:"button",className:"lora-editor-remove",onClick:()=>l(i),disabled:n.length===1,children:"Remove example"})]},`example-${i}`)),o.jsx("button",{type:"button",className:"ui-button is-muted",onClick:s,children:"Add prompt example"})]})}function X0({card:e,onCancel:t,onSave:n,onDelete:r,saving:l=!1}){var O,X,ee,v;const[s,a]=d.useState((e==null?void 0:e.name)||(e==null?void 0:e.baseName)||""),[i,u]=d.useState((e==null?void 0:e.modelName)||""),[c,m]=d.useState((e==null?void 0:e.category)||""),[f,h]=d.useState((e==null?void 0:e.description)||""),[N,x]=d.useState((e==null?void 0:e.recommendedWeight)||""),[C,j]=d.useState(((e==null?void 0:e.tags)||[]).join(", ")),[g,p]=d.useState(((e==null?void 0:e.keywords)||[]).join(", ")),[y,w]=d.useState((e==null?void 0:e.sourceLabel)||""),[_,D]=d.useState((e==null?void 0:e.sourceUrl)||""),[T,P]=d.useState(((O=e==null?void 0:e.preview)==null?void 0:O.src)||""),[G,U]=d.useState(((X=e==null?void 0:e.preview)==null?void 0:X.alt)||""),[V,Z]=d.useState((e==null?void 0:e.notes)||""),[J,F]=d.useState((ee=e==null?void 0:e.promptExamples)!=null&&ee.length?e.promptExamples:[fs()]),[A,z]=d.useState((v=e==null?void 0:e.preview)!=null&&v.src?{url:e.preview.src}:""),k=(e==null?void 0:e.files)||{},S=Array.isArray(k==null?void 0:k.others)?k.others:[],M=uu({input:{inputs:{param_name:"lora_preview"},class_type:"LoraPreview"},value:A,onFormChange:(E,L)=>{if(L){if(z(L),typeof L=="string"){P(L);return}L.url&&P(L.url),L.alt&&U(L.alt)}}}),I=E=>{if(E.preventDefault(),typeof n!="function")return;const L=J.filter(H=>Object.values(H||{}).some(q=>(q||"").trim())),R={name:s,modelName:i,category:c,description:f,recommendedWeight:N,tags:gd(C),keywords:gd(g),sourceLabel:y,sourceUrl:_,notes:V,preview:{src:T,alt:G},promptExamples:L};n(R)};return o.jsxs("form",{className:"ui-panel lora-editor",onSubmit:I,children:[o.jsxs("header",{className:"lora-editor-head",children:[o.jsxs("div",{children:[o.jsx("span",{className:"ui-kicker",children:"Editing"}),o.jsx("h2",{children:(e==null?void 0:e.name)||(e==null?void 0:e.baseName)||(e==null?void 0:e.id)}),o.jsxs("p",{className:"text-sm text-slate-200/80",children:["Fill in keywords, prompt examples, and source links. Changes are stored in ",o.jsx("code",{children:"data/lora_library.json"}),"."]})]}),o.jsxs("div",{className:"lora-editor-actions",children:[typeof r=="function"&&(e==null?void 0:e.status)!=="detected"&&o.jsx("button",{type:"button",className:"ui-button is-ghost",disabled:l,onClick:()=>r(),children:"Reset card"}),o.jsx("button",{type:"button",className:"ui-button is-muted",onClick:t,disabled:l,children:"Cancel"}),o.jsx("button",{type:"submit",className:"ui-button is-primary",disabled:l,children:l?"Saving":"Save card"})]})]}),o.jsxs("div",{className:"lora-editor-grid",children:[o.jsxs("div",{className:"lora-editor-section",children:[o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-name",children:"Display name"}),o.jsx("input",{id:"lora-name",type:"text",value:s,onChange:E=>a(E.target.value)})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-model",children:"Model name"}),o.jsx("input",{id:"lora-model",type:"text",value:i,onChange:E=>u(E.target.value)})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-category",children:"Category"}),o.jsx("input",{id:"lora-category",type:"text",value:c,onChange:E=>m(E.target.value),placeholder:"e.g. Stylized, Motion, Utility"})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-description",children:"Description"}),o.jsx("textarea",{id:"lora-description",value:f,rows:4,onChange:E=>h(E.target.value)})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-weight",children:"Recommended weight"}),o.jsx("input",{id:"lora-weight",type:"text",value:N,onChange:E=>x(E.target.value),placeholder:"0.65 - 0.85"})]})]}),o.jsxs("div",{className:"lora-editor-section",children:[o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-tags",children:"Tags (comma separated)"}),o.jsx("input",{id:"lora-tags",type:"text",value:C,onChange:E=>j(E.target.value)})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-keywords",children:"Keywords (comma separated)"}),o.jsx("input",{id:"lora-keywords",type:"text",value:g,onChange:E=>p(E.target.value)})]}),o.jsxs("div",{className:"lora-editor-field two-col",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lora-source-label",children:"Source label"}),o.jsx("input",{id:"lora-source-label",type:"text",value:y,onChange:E=>w(E.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lora-source-url",children:"Source URL"}),o.jsx("input",{id:"lora-source-url",type:"url",value:_,onChange:E=>D(E.target.value)})]})]}),o.jsxs("div",{className:"lora-editor-field two-col",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lora-preview-src",children:"Preview image URL"}),o.jsx("input",{id:"lora-preview-src",type:"text",value:T,onChange:E=>{const L=E.target.value;P(L),z(L?{url:L}:"")}})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lora-preview-alt",children:"Preview alt text"}),o.jsx("input",{id:"lora-preview-alt",type:"text",value:G,onChange:E=>U(E.target.value)})]})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-notes",children:"Notes (internal)"}),o.jsx("textarea",{id:"lora-notes",rows:3,value:V,onChange:E=>Z(E.target.value)})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{children:"Example from gallery"}),o.jsx("button",{type:"button",className:"ui-button is-muted",onClick:M.openServer,children:"Choose from gallery"}),M.previewUrl&&o.jsxs("div",{className:"mt-2 text-[11px] text-[#C3C7FF]",children:["Using: ",M.displayName]})]})]})]}),o.jsxs("section",{className:"lora-editor-section",children:[o.jsx("header",{children:o.jsx("span",{className:"ui-kicker",children:"Prompt examples"})}),o.jsx(J0,{examples:J,onChange:F})]}),o.jsxs("section",{className:"lora-editor-files",children:[o.jsxs("header",{children:[o.jsx("span",{className:"ui-kicker",children:"Detected files"}),o.jsx("span",{className:"lora-editor-chip",children:(e==null?void 0:e.pairState)||"unknown"})]}),o.jsxs("div",{className:"lora-editor-filelist",children:[(k==null?void 0:k.high)&&o.jsxs("div",{className:"lora-editor-file",children:[o.jsx("strong",{children:"High"}),o.jsx("span",{children:k.high})]}),(k==null?void 0:k.low)&&o.jsxs("div",{className:"lora-editor-file",children:[o.jsx("strong",{children:"Low"}),o.jsx("span",{children:k.low})]}),S.map(E=>o.jsx("div",{className:"lora-editor-file",children:o.jsx("span",{children:E})},E)),!(k!=null&&k.high)&&!(k!=null&&k.low)&&S.length===0&&o.jsx("p",{children:"No files detected in the LoRA directory yet."})]})]}),o.jsx(cu,{open:M.serverOpen,cwd:M.cwd,setCwd:M.setCwd,page:M.page,setPage:M.setPage,perPage:M.perPage,setPerPage:M.setPerPage,totalPages:M.totalPages,topDirs:M.topDirs,loading:M.loading,imagesOnly:M.imagesOnly,setImagesOnly:M.setImagesOnly,search:M.search,setSearch:M.setSearch,shownEntries:M.shownEntries,onSelect:M.selectServer,onClose:M.closeServer,pickerSource:M.pickerSource,setPickerSource:M.setPickerSource})]})}function Z0(e){return(e||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||"section"}function ew(e,t,n){const r=t.trim().toLowerCase(),l=n.length>0,s=[],a=c=>{c&&s.push(String(c))};a(e.name),a(e.description),a(e.modelName),a(e.recommendedWeight),a(e.folder),(e.keywords||[]).forEach(a),(e.tags||[]).forEach(a),(e.promptExamples||[]).forEach(c=>{a(c.title),a(c.text),a(c.negative),a(c.weightTip)}),e.files&&(a(e.files.high),a(e.files.low),(e.files.others||[]).forEach(a));const i=!r||s.some(c=>c.toLowerCase().includes(r)),u=!l||n.every(c=>(e.tags||[]).includes(c));return i&&u}function tw(e){const t=new Map;return e.forEach(n=>{var l;const r=((l=n.category)==null?void 0:l.trim())||"LoRA Library";t.has(r)||t.set(r,[]),t.get(r).push(n)}),Array.from(t.entries()).map(([n,r])=>({id:`${Z0(n)}-${r.length}`,title:n,cards:r}))}function nw(){const[e,t]=d.useState([]),[n,r]=d.useState({draftCount:0,missingCount:0}),[l,s]=d.useState(!0),[a,i]=d.useState(""),[u,c]=d.useState(""),[m,f]=d.useState(""),[h,N]=d.useState([]),[x,C]=d.useState(null),[j,g]=d.useState(!1),p=d.useCallback(async()=>{s(!0),i("");try{const F=await wy();t(Array.isArray(F==null?void 0:F.items)?F.items:[]),r({draftCount:(F==null?void 0:F.draftCount)||0,missingCount:(F==null?void 0:F.missingCount)||0})}catch(F){i(F.message||"Failed to load LoRA library.")}finally{s(!1)}},[]);d.useEffect(()=>{p()},[p]);const y=d.useMemo(()=>{const F=new Set;return e.forEach(A=>{(A.tags||[]).forEach(z=>z&&F.add(z))}),Array.from(F).sort((A,z)=>A.toLowerCase().localeCompare(z.toLowerCase()))},[e]),w=d.useMemo(()=>e.filter(F=>ew(F,m,h)),[e,m,h]),_=w.filter(F=>F.status==="detected"),D=w.filter(F=>F.status==="missing"),T=w.filter(F=>F.status!=="detected"&&F.status!=="missing"),P=d.useMemo(()=>tw(T),[T]),G=w.length,U=F=>{N(A=>A.includes(F)?A.filter(z=>z!==F):[...A,F])},V=F=>{C(F),c(""),i("")},Z=async F=>{if(x){g(!0),i("");try{await Ny(x.id,F),c(`Saved ${F.name||x.id}`),C(null),await p()}catch(A){i(A.message||"Failed to save LoRA card.")}finally{g(!1)}}},J=async()=>{if(x&&!(typeof window<"u"&&!window.confirm("Remove saved details for this card?"))){g(!0),i("");try{await Sy(x.id),c("Card reset to detected state."),C(null),await p()}catch(F){i(F.message||"Failed to reset card.")}finally{g(!1)}}};return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("section",{className:"ui-panel lora-library-hero",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("span",{className:"ui-kicker",children:"LoRA Library"}),o.jsx("h1",{className:"text-2xl font-semibold tracking-wide",children:"Tarot board for your LoRAs"}),u&&o.jsx("p",{className:"text-xs text-[#3EF0FF] uppercase tracking-[0.3em]",children:u}),a&&o.jsx("p",{className:"text-xs text-[#FF9DBB] uppercase tracking-[0.3em]",children:a})]}),o.jsxs("div",{className:"lora-library-controls space-y-3",children:[o.jsx("label",{htmlFor:"lora-library-search",className:"sr-only",children:"Search LoRAs"}),o.jsx("input",{id:"lora-library-search",type:"text",value:m,onChange:F=>f(F.target.value),className:"lora-library-search",placeholder:"Search LoRAs..."}),y.length>0&&o.jsxs("div",{className:"lora-library-tags",children:[y.map(F=>{const A=h.includes(F);return o.jsx("button",{type:"button",onClick:()=>U(F),className:["lora-tag-chip",A?"is-active":""].filter(Boolean).join(" "),children:F},F)}),h.length>0&&o.jsx("button",{type:"button",className:"lora-tag-chip is-muted",onClick:()=>N([]),children:"Clear"})]}),o.jsxs("div",{className:"lora-library-meta",children:[o.jsxs("span",{children:["Showing ",G," of ",e.length," cards"]}),o.jsxs("span",{children:["Drafts ",n.draftCount,"  Missing ",n.missingCount]}),o.jsx("button",{type:"button",className:"ui-button is-compact is-muted",onClick:p,disabled:l,children:"Refresh"})]})]})]}),x&&o.jsx(X0,{card:x,saving:j,onCancel:()=>C(null),onSave:Z,onDelete:x.status!=="detected"?J:void 0}),l?o.jsx("section",{className:"ui-panel text-center py-16",children:o.jsx("p",{className:"text-base text-slate-200/80",children:"Loading library"})}):o.jsxs(o.Fragment,{children:[_.length>0&&o.jsxs("section",{className:"space-y-4",children:[o.jsx("header",{className:"ui-section-head",children:o.jsxs("div",{className:"ui-section-text",children:[o.jsx("span",{className:"ui-kicker",children:"Auto-detected"}),o.jsx("h2",{className:"text-xl font-semibold",children:"LoRAs that need details"})]})}),o.jsx("div",{className:"lora-card-grid",children:_.map(F=>o.jsx(qo,{...F,sectionTitle:"Detected",onEdit:()=>V(F)},F.id))})]}),P.length===0&&_.length===0&&D.length===0?o.jsx("section",{className:"ui-panel text-center py-16",children:o.jsx("p",{className:"text-base text-slate-200/80",children:"No cards match your filters yet. Try refreshing or clear the search above."})}):P.map(F=>o.jsxs("section",{className:"space-y-4",children:[o.jsx("header",{className:"ui-section-head",children:o.jsxs("div",{className:"ui-section-text",children:[o.jsx("span",{className:"ui-kicker",children:"Collection"}),o.jsx("h2",{className:"text-xl font-semibold",children:F.title})]})}),o.jsx("div",{className:"lora-card-grid",children:F.cards.map(A=>o.jsx(qo,{...A,sectionTitle:F.title,onEdit:()=>V(A)},A.id))})]},F.id)),D.length>0&&o.jsxs("section",{className:"space-y-4",children:[o.jsx("header",{className:"ui-section-head",children:o.jsxs("div",{className:"ui-section-text",children:[o.jsx("span",{className:"ui-kicker",children:"Needs attention"}),o.jsx("h2",{className:"text-xl font-semibold",children:"Cards referencing missing files"})]})}),o.jsx("div",{className:"lora-card-grid",children:D.map(F=>o.jsx(qo,{...F,sectionTitle:"Missing",onEdit:()=>V(F)},F.id))})]})]})]})}const _m="cozygen_alias_categories",Fm="cozygen_alias_category_list",Hs="::";function rw(){return`alias-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`}function lw(){try{const e=window.localStorage.getItem(_m)||"{}",t=JSON.parse(e);return typeof t=="object"&&t?t:{}}catch{return{}}}function vd(e){try{window.localStorage.setItem(_m,JSON.stringify(e||{}))}catch{}}function sw(){try{const e=window.localStorage.getItem(Fm)||"[]",t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}}function ow(e){try{window.localStorage.setItem(Fm,JSON.stringify(e||[]))}catch{}}function yd(e,t={}){return Object.entries(tl(e)).map(([n,r],l)=>{const[s,a]=String(n).includes(Hs)?n.split(Hs):["",n],i=a||n,u=t[n]||t[i]||s||"";return{id:`existing-${l}-${n}`,name:i,text:r,category:u}})}function xd(e){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.name)||"").trim(),l=typeof(n==null?void 0:n.text)=="string"?n.text.trim():"";if(r&&l){const s=String((n==null?void 0:n.category)||"").trim(),a=s?`${s}${Hs}${r}`:r;t[a]=l}}),t}function Jo(e){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.name)||"").trim(),l=typeof(n==null?void 0:n.category)=="string"?n.category.trim():"";if(r){const s=l?`${l}${Hs}${r}`:r;t[s]=l}}),t}function aw(){const{aliases:e,aliasCategories:t,categoryList:n,loading:r,saving:l,error:s,persistAliases:a}=fu(),[i,u]=d.useState(()=>yd(e)),[c,m]=d.useState(()=>lw()),[f,h]=d.useState(()=>sw()),[N,x]=d.useState(""),[C,j]=d.useState("All"),[g,p]=d.useState(!1),[y,w]=d.useState(""),_=d.useRef(null),[D,T]=d.useState(!1),[P,G]=d.useState(!1),[U,V]=d.useState(""),Z=typeof window<"u"?window.innerWidth<768:!1,[J,F]=d.useState(Z),A=d.useRef(Z);d.useEffect(()=>{D||m(t||{})},[t,D]),d.useEffect(()=>{D||Array.isArray(n)&&h(n)},[n,D]),d.useEffect(()=>{if(D)return;const v=yd(e,c);u(v),N&&!v.some(E=>E.id===N)&&x("")},[e,c,N,D]);const z=d.useMemo(()=>xd(i),[i]),k=()=>{const v={id:rw(),name:"",text:"",category:""};u(E=>[...E,v]),x(v.id),p(!0),w("Editing new alias"),T(!0)},S=(v,E,L)=>{!g&&E!=="category"||(T(!0),u(R=>R.map((H,q)=>q===v?{...H,[E]:L}:H)))},$=v=>{T(!0),u(E=>{var H;const L=E.filter((q,le)=>le!==v),R=Jo(L);return m(R),vd(R),L.length===0?(x(""),p(!1)):N===((H=E[v])==null?void 0:H.id)&&(x(L[0].id),p(!1)),L})},M=async()=>{w("");try{const v=Jo(i);await a({items:z,categories:v}),m(v),vd(v),T(!1),p(!1),w("Saved")}catch{w("Unable to save right now.")}},I=d.useMemo(()=>{const E=[...i.filter(L=>!(C!=="All"&&(L.category||"")!==C))];return E.sort((L,R)=>(L.name||"").localeCompare(R.name||"")),E},[i,C]),O=I.find(v=>v.id===N)||i.find(v=>v.id===N)||null,X=d.useMemo(()=>{const v=new Set(f||[]);return i.forEach(E=>{E.category&&v.add(E.category)}),Array.from(v).sort((E,L)=>E.localeCompare(L))},[i,f]);d.useEffect(()=>{g&&_.current&&_.current.focus()},[g,N]),d.useEffect(()=>{const v=()=>{const E=window.innerWidth<768;F(E),A.current=E};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const ee=async()=>{const v=U.trim();if(!v){w("Enter a category name.");return}const E=Array.from(new Set([...f||[],v]));ow(E),h(E),G(!1),V(""),w("Saved category. Use the dropdown on a card to assign it.");const L=xd(i),R=Jo(i);T(!0);try{await a({items:L,categories:R,categoryList:E}),T(!1),w("Saved category. Use the dropdown on a card to assign it.")}catch{w("Unable to save right now.")}};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"page-shell page-stack",children:[o.jsx("div",{className:"neon-card p-4 sm:p-6 space-y-4",children:o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:o.jsx("div",{children:o.jsx("h2",{className:"text-lg font-semibold",children:"Alias library"})})}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("button",{type:"button",onClick:k,className:"btn-touch h-9 px-3 rounded-lg border border-[#2A2E4A] bg-[#0C1222] text-sm font-semibold text-[#E5E7FF]",children:"+ Add alias"}),o.jsxs("div",{className:"flex items-center gap-2 h-9 bg-[#0C1222] border border-[#2A2E4A] rounded-lg px-2 text-xs text-[#7F91B6] flex-wrap w-full sm:w-auto",children:[o.jsx("span",{children:"Category"}),o.jsxs("select",{value:C,onChange:v=>j(v.target.value),className:"bg-transparent text-sm text-[#E5E7FF] focus:outline-none h-7",children:[o.jsx("option",{value:"All",children:"All"}),o.jsx("option",{value:"",children:"Uncategorized"}),X.map(v=>o.jsx("option",{value:v,children:v||"Uncategorized"},v||"uncat"))]}),P?o.jsxs("div",{className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx("input",{type:"text",value:U,onChange:v=>V(v.target.value),placeholder:"New category",className:"flex-1 min-w-[140px] rounded-md border border-[#2A2E4A] bg-[#050716] px-2 py-1 text-xs text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]"}),o.jsx("button",{type:"button",onClick:ee,className:"h-8 px-2 rounded-md bg-[#0F1A2F] border border-[#2A2E4A] text-[11px] font-semibold text-[#E5E7FF]",children:"Save"}),o.jsx("button",{type:"button",onClick:()=>{G(!1),V("")},className:"h-8 px-2 rounded-md text-[11px] font-semibold text-[#7F91B6] hover:text-[#E5E7FF]",children:"Cancel"})]}):o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-[#0F1A2F] border border-[#2A2E4A] text-[#E5E7FF] text-[11px] font-semibold",onClick:()=>{G(!0),V("")},children:"+ Add"})]})]}),y&&!O?o.jsx("p",{className:"text-[11px] text-[#A9B6D9]",children:y}):null,O?o.jsxs("div",{className:`rounded-xl border border-[#2A2E4A] bg-[#0B1226] p-3 sm:p-4 shadow-[0_10px_30px_rgba(4,7,16,0.35)] space-y-3 ${J?"hidden sm:block":""}`,children:[o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-[#E5E7FF] leading-tight",children:O.name||"Untitled alias"}),O.category?o.jsxs("p",{className:"text-[11px] text-[#7F91B6]",children:["Category: ",O.category]}):null]})}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-[#7F91B6]",children:[o.jsx("button",{type:"button",onClick:()=>{g?M():(p(!0),w("Editing"))},className:"underline hover:text-[#5EF1D4] transition-colors",children:g?l?"Saving":"Save":"Edit"}),o.jsx("span",{className:"text-[#2A2E4A]",children:"|"}),o.jsx("button",{type:"button",onClick:()=>{const v=i.findIndex(E=>E.id===O.id);v!==-1&&$(v)},className:"underline hover:text-[#FF8F70] transition-colors",children:"Remove"}),o.jsx("span",{className:"text-[#2A2E4A]",children:"|"}),o.jsx("button",{type:"button",onClick:()=>{x(""),p(!1),w("")},className:"underline hover:text-[#E5E7FF] transition-colors",children:"Hide"}),y?o.jsx("span",{className:"text-[11px] text-[#A9B6D9]",children:y}):null]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs uppercase tracking-wide text-[#7F91B6] block mb-1",children:"Alias name"}),o.jsx("input",{ref:_,type:"text",value:O.name||"",onChange:v=>{const E=i.findIndex(L=>L.id===O.id);E!==-1&&S(E,"name",v.target.value)},placeholder:"e.g. cherry_fruit",disabled:!g,className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs uppercase tracking-wide text-[#7F91B6] block mb-1",children:"Category (optional)"}),o.jsxs("select",{value:O.category||"",onChange:v=>{const E=i.findIndex(L=>L.id===O.id);E!==-1&&S(E,"category",v.target.value)},className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]",children:[o.jsx("option",{value:"",children:"Uncategorized"}),X.map(v=>o.jsx("option",{value:v,children:v||"Uncategorized"},v||"uncat"))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs uppercase tracking-wide text-[#7F91B6] block mb-1",children:"Expands to"}),o.jsx("textarea",{value:O.text,onChange:v=>{const E=i.findIndex(L=>L.id===O.id);E!==-1&&S(E,"text",v.target.value)},placeholder:"Prompt text for this alias",rows:2,disabled:!g,className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80] resize-y min-h-[72px]"})]}),o.jsxs("div",{className:"text-[11px] text-[#7F91B6]",children:["Invoke with:"," ",o.jsx("code",{className:"text-[#E5E7FF] bg-[#0F1A2F] px-1 py-0.5 rounded",children:O.category?`${O.category}:${O.name}`:O.name||"alias"})]})]})]}):null,i.length===0?o.jsx("div",{className:"rounded-lg border border-dashed border-[#2A2E4A] px-4 py-6 text-center text-sm text-[#A9B6D9]",children:"No aliases yet. Add your first one."}):o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3",children:I.map(v=>{const E=v.id===N,L=v.category?`${v.category}:${v.name}`:v.name,R=(v.text||"").slice(0,96)+((v.text||"").length>96?"":"");return o.jsxs("button",{type:"button",onClick:()=>x(H=>H===v.id?"":v.id),className:`text-left rounded-xl border px-3 py-3 transition-all btn-touch ${E?"border-[#5EF1D4] bg-[#0F1A2F] shadow-[0_12px_34px_rgba(5,7,22,0.35)]":"border-[#27304A] bg-[#0C1222]"}`,children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[o.jsx("div",{className:"text-sm font-semibold text-[#E5E7FF] truncate",children:v.name||"Untitled"}),E?o.jsx("span",{className:"text-xs text-[#5EF1D4]",children:""}):null]}),o.jsx("div",{className:"text-xs text-[#A9B6D9] line-clamp-2",children:R||""}),o.jsxs("div",{className:"mt-2 text-[11px] text-[#7F91B6] font-mono",children:["$",L||"alias","$"]})]},v.id)})})]})]})}),s?o.jsx("p",{className:"text-xs text-[#FF8F70]",children:"Could not load aliases. Try again later."}):null,r?o.jsx("p",{className:"text-xs text-[#A9B6D9]",children:"Loading aliases"}):null]}),O&&J?o.jsxs("div",{className:"fixed inset-0 z-40 sm:hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>{x(""),p(!1),w("")}}),o.jsxs("div",{className:"absolute left-2 right-2 bg-[#0B1226] border border-[#2A2E4A] rounded-2xl shadow-[0_-10px_30px_rgba(4,7,16,0.35)] p-3 space-y-3 pb-3 overflow-y-auto",style:{maxHeight:"80vh",bottom:"72px"},children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-[#E5E7FF] leading-tight",children:O.name||"Untitled alias"}),O.category?o.jsxs("p",{className:"text-[11px] text-[#7F91B6]",children:["Category: ",O.category]}):null]}),o.jsx("button",{type:"button",onClick:()=>{x(""),p(!1),w("")},className:"text-sm text-[#E5E7FF] underline",children:"Close"})]}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-[#7F91B6]",children:[o.jsx("button",{type:"button",onClick:()=>{g?M():(p(!0),w("Editing"))},className:"underline hover:text-[#5EF1D4] transition-colors",children:g?l?"Saving":"Save":"Edit"}),o.jsx("span",{className:"text-[#2A2E4A]",children:"|"}),o.jsx("button",{type:"button",onClick:()=>{const v=i.findIndex(E=>E.id===O.id);v!==-1&&$(v)},className:"underline hover:text-[#FF8F70] transition-colors",children:"Remove"}),y?o.jsx("span",{className:"text-[11px] text-[#A9B6D9]",children:y}):null]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs uppercase tracking-wide text-[#7F91B6] block mb-1",children:"Alias name"}),o.jsx("input",{ref:_,type:"text",value:O.name||"",onChange:v=>{const E=i.findIndex(L=>L.id===O.id);E!==-1&&S(E,"name",v.target.value)},placeholder:"e.g. cherry_fruit",disabled:!g,className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs uppercase tracking-wide text-[#7F91B6] block mb-1",children:"Category (optional)"}),o.jsxs("select",{value:O.category||"",onChange:v=>{const E=i.findIndex(L=>L.id===O.id);E!==-1&&S(E,"category",v.target.value)},className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]",children:[o.jsx("option",{value:"",children:"Uncategorized"}),X.map(v=>o.jsx("option",{value:v,children:v||"Uncategorized"},v||"uncat"))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs uppercase tracking-wide text-[#7F91B6] block mb-1",children:"Expands to"}),o.jsx("textarea",{value:O.text,onChange:v=>{const E=i.findIndex(L=>L.id===O.id);E!==-1&&S(E,"text",v.target.value)},placeholder:"Prompt text for this alias",rows:2,disabled:!g,className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80] resize-y min-h-[72px]"})]}),o.jsxs("div",{className:"text-[11px] text-[#7F91B6]",children:["Invoke with:"," ",o.jsx("code",{className:"text-[#E5E7FF] bg-[#0F1A2F] px-1 py-0.5 rounded",children:O.category?`${O.category}:${O.name}`:O.name||"alias"})]})]})]})]}):null]})}function iw(){var g,p;const{authed:e,ready:t,login:n}=fo(),r=su(),s=((p=(g=kt().state)==null?void 0:g.from)==null?void 0:p.pathname)||"/studio",[a,i]=d.useState(""),[u,c]=d.useState(""),[m,f]=d.useState(""),[h,N]=d.useState(!1),[x,C]=d.useState(!1);d.useEffect(()=>{try{localStorage.getItem("cozygen_idle_logout")&&(C(!0),localStorage.removeItem("cozygen_idle_logout"))}catch{}},[]),d.useEffect(()=>{t&&e&&r(s,{replace:!0})},[t,e,s,r]);const j=async y=>{y.preventDefault(),f(""),N(!0);try{await n(a,u),r(s,{replace:!0})}catch(w){w!=null&&w.unauthorized?f("Invalid username or password."):f("Unable to sign in. Please try again.")}finally{N(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-950 to-black px-4 py-10",children:o.jsx("div",{className:"w-full max-w-md rounded-2xl bg-slate-900/70 border border-slate-800/80 shadow-2xl backdrop-blur",children:o.jsxs("div",{className:"p-6 sm:p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"h-10 w-10 rounded-xl bg-emerald-500/10 border border-emerald-400/30 flex items-center justify-center text-emerald-300 text-xl",children:""}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm uppercase tracking-[0.2em] text-slate-400",children:"CozyGen"}),o.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Sign in to continue"})]})]}),o.jsxs("form",{className:"space-y-4",onSubmit:j,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"login-username",className:"block text-sm font-medium text-slate-300 mb-2",children:"Username"}),o.jsx("input",{id:"login-username",type:"text",className:"w-full rounded-xl border border-slate-700 bg-slate-800/70 px-4 py-3 text-white placeholder-slate-500 focus:border-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-400/40 transition",value:a,onChange:y=>i(y.target.value),autoComplete:"username",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"login-password",className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),o.jsx("input",{id:"login-password",type:"password",className:"w-full rounded-xl border border-slate-700 bg-slate-800/70 px-4 py-3 text-white placeholder-slate-500 focus:border-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-400/40 transition",value:u,onChange:y=>c(y.target.value),autoComplete:"current-password",required:!0})]}),m&&o.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-red-200 text-sm",children:m}),x&&!m&&o.jsx("div",{className:"rounded-lg border border-amber-500/60 bg-amber-500/10 px-4 py-3 text-amber-200 text-sm",children:"You were signed out due to inactivity. Please sign in again."}),o.jsx("button",{type:"submit",disabled:h,className:"w-full inline-flex items-center justify-center gap-2 rounded-xl bg-emerald-500 hover:bg-emerald-400 text-slate-950 font-semibold px-4 py-3 transition disabled:opacity-60 disabled:cursor-not-allowed shadow-lg shadow-emerald-500/20",children:h?"Signing in":"Sign in"})]}),o.jsxs("p",{className:"text-xs text-slate-500 mt-6",children:["Access is protected by CozyGen auth. Set ",o.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /",o.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server to enable."]})]})})})}function uw(){const{pathname:e,hash:t}=kt();return d.useEffect(()=>{t||window.scrollTo(0,0)},[e,t]),null}function Kn({children:e}){const{authed:t,ready:n}=fo(),r=kt();return n?t?e:o.jsx(Vp,{to:"/login",state:{from:r},replace:!0}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-200",children:"Loading"})}function cw(){const{pathname:e}=kt(),{defaultCreds:t,authed:n}=fo(),r=e==="/login";return o.jsxs("div",{className:"app-shell",children:[!r&&o.jsx(_y,{}),!r&&n&&t&&o.jsxs("div",{className:"flex-shrink-0 bg-amber-500/10 text-amber-200 border-b border-amber-400/50 px-4 py-2 text-sm text-center",children:["Default CozyGen credentials are still in use. Change ",o.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /",o.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server."]}),o.jsx(uw,{}),o.jsx("main",{className:`${r?"px-0 py-0":"max-w-7xl mx-auto px-3 sm:px-4 py-4"}`,children:o.jsxs(Yv,{children:[o.jsx(It,{path:"/login",element:o.jsx(iw,{})}),o.jsx(It,{path:"/",element:o.jsx(Kn,{children:o.jsx(rd,{})})}),o.jsx(It,{path:"/studio",element:o.jsx(Kn,{children:o.jsx(rd,{})})}),o.jsx(It,{path:"/gallery",element:o.jsx(Kn,{children:o.jsx(D0,{})})}),o.jsx(It,{path:"/presets",element:o.jsx(Kn,{children:o.jsx(q0,{})})}),o.jsx(It,{path:"/lora-library",element:o.jsx(Kn,{children:o.jsx(nw,{})})}),o.jsx(It,{path:"/aliases",element:o.jsx(Kn,{children:o.jsx(aw,{})})}),o.jsx(It,{path:"*",element:o.jsx(Vp,{to:"/studio",replace:!0})})]})}),!r&&o.jsx(Oy,{})]})}function dw(){return o.jsx(ry,{children:o.jsx(ky,{children:o.jsx(cw,{})})})}Xo.createRoot(document.getElementById("root")).render(o.jsx(Vr.StrictMode,{children:o.jsx(dw,{})}));
