function sh(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function lh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wd={exports:{}},mo={},Vd={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),oh=Symbol.for("react.portal"),ah=Symbol.for("react.fragment"),ih=Symbol.for("react.strict_mode"),ch=Symbol.for("react.profiler"),uh=Symbol.for("react.provider"),dh=Symbol.for("react.context"),fh=Symbol.for("react.forward_ref"),ph=Symbol.for("react.suspense"),mh=Symbol.for("react.memo"),hh=Symbol.for("react.lazy"),Hc=Symbol.iterator;function gh(e){return e===null||typeof e!="object"?null:(e=Hc&&e[Hc]||e["@@iterator"],typeof e=="function"?e:null)}var Hd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gd=Object.assign,Kd={};function Vr(e,t,n){this.props=e,this.context=t,this.refs=Kd,this.updater=n||Hd}Vr.prototype.isReactComponent={};Vr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Qd(){}Qd.prototype=Vr.prototype;function Pi(e,t,n){this.props=e,this.context=t,this.refs=Kd,this.updater=n||Hd}var _i=Pi.prototype=new Qd;_i.constructor=Pi;Gd(_i,Vr.prototype);_i.isPureReactComponent=!0;var Gc=Array.isArray,Yd=Object.prototype.hasOwnProperty,Ri={current:null},qd={key:!0,ref:!0,__self:!0,__source:!0};function Xd(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Yd.call(t,r)&&!qd.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:Ds,type:e,key:o,ref:a,props:s,_owner:Ri.current}}function yh(e,t){return{$$typeof:Ds,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ii(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ds}function vh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Kc=/\/+/g;function Uo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vh(""+e.key):t.toString(36)}function wl(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ds:case oh:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Uo(a,0):r,Gc(s)?(n="",e!=null&&(n=e.replace(Kc,"$&/")+"/"),wl(s,t,n,"",function(d){return d})):s!=null&&(Ii(s)&&(s=yh(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Kc,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Gc(e))for(var i=0;i<e.length;i++){o=e[i];var c=r+Uo(o,i);a+=wl(o,t,n,c,s)}else if(c=gh(e),typeof c=="function")for(e=c.call(e),i=0;!(o=e.next()).done;)o=o.value,c=r+Uo(o,i++),a+=wl(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function el(e,t,n){if(e==null)return e;var r=[],s=0;return wl(e,r,"","",function(o){return t.call(n,o,s++)}),r}function xh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pt={current:null},jl={transition:null},wh={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:jl,ReactCurrentOwner:Ri};function Jd(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:el,forEach:function(e,t,n){el(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return el(e,function(){t++}),t},toArray:function(e){return el(e,function(t){return t})||[]},only:function(e){if(!Ii(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=Vr;Ne.Fragment=ah;Ne.Profiler=ch;Ne.PureComponent=Pi;Ne.StrictMode=ih;Ne.Suspense=ph;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wh;Ne.act=Jd;Ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Gd({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Ri.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Yd.call(t,c)&&!qd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:Ds,type:e.type,key:s,ref:o,props:r,_owner:a}};Ne.createContext=function(e){return e={$$typeof:dh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:uh,_context:e},e.Consumer=e};Ne.createElement=Xd;Ne.createFactory=function(e){var t=Xd.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:fh,render:e}};Ne.isValidElement=Ii;Ne.lazy=function(e){return{$$typeof:hh,_payload:{_status:-1,_result:e},_init:xh}};Ne.memo=function(e,t){return{$$typeof:mh,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=jl.transition;jl.transition={};try{e()}finally{jl.transition=t}};Ne.unstable_act=Jd;Ne.useCallback=function(e,t){return pt.current.useCallback(e,t)};Ne.useContext=function(e){return pt.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return pt.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return pt.current.useEffect(e,t)};Ne.useId=function(){return pt.current.useId()};Ne.useImperativeHandle=function(e,t,n){return pt.current.useImperativeHandle(e,t,n)};Ne.useInsertionEffect=function(e,t){return pt.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return pt.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return pt.current.useMemo(e,t)};Ne.useReducer=function(e,t,n){return pt.current.useReducer(e,t,n)};Ne.useRef=function(e){return pt.current.useRef(e)};Ne.useState=function(e){return pt.current.useState(e)};Ne.useSyncExternalStore=function(e,t,n){return pt.current.useSyncExternalStore(e,t,n)};Ne.useTransition=function(){return pt.current.useTransition()};Ne.version="18.3.1";Vd.exports=Ne;var u=Vd.exports;const It=lh(u),jh=sh({__proto__:null,default:It},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sh=u,Nh=Symbol.for("react.element"),kh=Symbol.for("react.fragment"),Ch=Object.prototype.hasOwnProperty,bh=Sh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Eh={key:!0,ref:!0,__self:!0,__source:!0};function Zd(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Ch.call(t,r)&&!Eh.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Nh,type:e,key:o,ref:a,props:s,_owner:bh.current}}mo.Fragment=kh;mo.jsx=Zd;mo.jsxs=Zd;Wd.exports=mo;var l=Wd.exports,ja={},ef={exports:{}},Pt={},tf={exports:{}},nf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,I){var _=k.length;k.push(I);e:for(;0<_;){var R=_-1>>>1,D=k[R];if(0<s(D,I))k[R]=I,k[_]=D,_=R;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var I=k[0],_=k.pop();if(_!==I){k[0]=_;e:for(var R=0,D=k.length,Z=D>>>1;R<Z;){var G=2*(R+1)-1,U=k[G],O=G+1,M=k[O];if(0>s(U,_))O<D&&0>s(M,U)?(k[R]=M,k[O]=_,R=O):(k[R]=U,k[G]=_,R=G);else if(O<D&&0>s(M,_))k[R]=M,k[O]=_,R=O;else break e}}return I}function s(k,I){var _=k.sortIndex-I.sortIndex;return _!==0?_:k.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],d=[],y=1,h=null,g=3,v=!1,w=!1,N=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(k){for(var I=n(d);I!==null;){if(I.callback===null)r(d);else if(I.startTime<=k)r(d),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(d)}}function j(k){if(N=!1,p(k),!w)if(n(c)!==null)w=!0,ne(b);else{var I=n(d);I!==null&&ee(j,I.startTime-k)}}function b(k,I){w=!1,N&&(N=!1,m(P),P=-1),v=!0;var _=g;try{for(p(I),h=n(c);h!==null&&(!(h.expirationTime>I)||k&&!V());){var R=h.callback;if(typeof R=="function"){h.callback=null,g=h.priorityLevel;var D=R(h.expirationTime<=I);I=e.unstable_now(),typeof D=="function"?h.callback=D:h===n(c)&&r(c),p(I)}else r(c);h=n(c)}if(h!==null)var Z=!0;else{var G=n(d);G!==null&&ee(j,G.startTime-I),Z=!1}return Z}finally{h=null,g=_,v=!1}}var E=!1,z=null,P=-1,F=5,T=-1;function V(){return!(e.unstable_now()-T<F)}function fe(){if(z!==null){var k=e.unstable_now();T=k;var I=!0;try{I=z(!0,k)}finally{I?W():(E=!1,z=null)}}else E=!1}var W;if(typeof f=="function")W=function(){f(fe)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,q=de.port2;de.port1.onmessage=fe,W=function(){q.postMessage(null)}}else W=function(){S(fe,0)};function ne(k){z=k,E||(E=!0,W())}function ee(k,I){P=S(function(){k(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){w||v||(w=!0,ne(b))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(k){switch(g){case 1:case 2:case 3:var I=3;break;default:I=g}var _=g;g=I;try{return k()}finally{g=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,I){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var _=g;g=k;try{return I()}finally{g=_}},e.unstable_scheduleCallback=function(k,I,_){var R=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?R+_:R):_=R,k){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=_+D,k={id:y++,callback:I,priorityLevel:k,startTime:_,expirationTime:D,sortIndex:-1},_>R?(k.sortIndex=_,t(d,k),n(c)===null&&k===n(d)&&(N?(m(P),P=-1):N=!0,ee(j,_-R))):(k.sortIndex=D,t(c,k),w||v||(w=!0,ne(b))),k},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(k){var I=g;return function(){var _=g;g=I;try{return k.apply(this,arguments)}finally{g=_}}}})(nf);tf.exports=nf;var Lh=tf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ph=u,Lt=Lh;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rf=new Set,js={};function cr(e,t){$r(e,t),$r(e+"Capture",t)}function $r(e,t){for(js[e]=t,e=0;e<t.length;e++)rf.add(t[e])}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sa=Object.prototype.hasOwnProperty,_h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qc={},Yc={};function Rh(e){return Sa.call(Yc,e)?!0:Sa.call(Qc,e)?!1:_h.test(e)?Yc[e]=!0:(Qc[e]=!0,!1)}function Ih(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function zh(e,t,n,r){if(t===null||typeof t>"u"||Ih(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mt(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var zi=/[\-:]([a-z])/g;function Ti(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zi,Ti);ot[t]=new mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zi,Ti);ot[t]=new mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zi,Ti);ot[t]=new mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new mt(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ai(e,t,n,r){var s=ot.hasOwnProperty(t)?ot[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(zh(t,n,s,r)&&(n=null),r||s===null?Rh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var wn=Ph.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tl=Symbol.for("react.element"),gr=Symbol.for("react.portal"),yr=Symbol.for("react.fragment"),$i=Symbol.for("react.strict_mode"),Na=Symbol.for("react.profiler"),sf=Symbol.for("react.provider"),lf=Symbol.for("react.context"),Mi=Symbol.for("react.forward_ref"),ka=Symbol.for("react.suspense"),Ca=Symbol.for("react.suspense_list"),Oi=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),of=Symbol.for("react.offscreen"),qc=Symbol.iterator;function Yr(e){return e===null||typeof e!="object"?null:(e=qc&&e[qc]||e["@@iterator"],typeof e=="function"?e:null)}var He=Object.assign,Bo;function ss(e){if(Bo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bo=t&&t[1]||""}return`
`+Bo+e}var Wo=!1;function Vo(e,t){if(!e||Wo)return"";Wo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,i=o.length-1;1<=a&&0<=i&&s[a]!==o[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==o[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==o[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{Wo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ss(e):""}function Th(e){switch(e.tag){case 5:return ss(e.type);case 16:return ss("Lazy");case 13:return ss("Suspense");case 19:return ss("SuspenseList");case 0:case 2:case 15:return e=Vo(e.type,!1),e;case 11:return e=Vo(e.type.render,!1),e;case 1:return e=Vo(e.type,!0),e;default:return""}}function ba(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yr:return"Fragment";case gr:return"Portal";case Na:return"Profiler";case $i:return"StrictMode";case ka:return"Suspense";case Ca:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case lf:return(e.displayName||"Context")+".Consumer";case sf:return(e._context.displayName||"Context")+".Provider";case Mi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Oi:return t=e.displayName||null,t!==null?t:ba(e.type)||"Memo";case bn:t=e._payload,e=e._init;try{return ba(e(t))}catch{}}return null}function Ah(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ba(t);case 8:return t===$i?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Wn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function af(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $h(e){var t=af(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function nl(e){e._valueTracker||(e._valueTracker=$h(e))}function cf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=af(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Tl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ea(e,t){var n=t.checked;return He({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Xc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Wn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function uf(e,t){t=t.checked,t!=null&&Ai(e,"checked",t,!1)}function La(e,t){uf(e,t);var n=Wn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Pa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Pa(e,t.type,Wn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Pa(e,t,n){(t!=="number"||Tl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ls=Array.isArray;function Lr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Wn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function _a(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return He({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Y(92));if(ls(n)){if(1<n.length)throw Error(Y(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Wn(n)}}function df(e,t){var n=Wn(t.value),r=Wn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function eu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ff(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ra(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ff(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rl,pf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(rl=rl||document.createElement("div"),rl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ss(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var us={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mh=["Webkit","ms","Moz","O"];Object.keys(us).forEach(function(e){Mh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),us[t]=us[e]})});function mf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||us.hasOwnProperty(e)&&us[e]?(""+t).trim():t+"px"}function hf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=mf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Oh=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ia(e,t){if(t){if(Oh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function za(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ta=null;function Fi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Aa=null,Pr=null,_r=null;function tu(e){if(e=Ws(e)){if(typeof Aa!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=xo(t),Aa(e.stateNode,e.type,t))}}function gf(e){Pr?_r?_r.push(e):_r=[e]:Pr=e}function yf(){if(Pr){var e=Pr,t=_r;if(_r=Pr=null,tu(e),t)for(e=0;e<t.length;e++)tu(t[e])}}function vf(e,t){return e(t)}function xf(){}var Ho=!1;function wf(e,t,n){if(Ho)return e(t,n);Ho=!0;try{return vf(e,t,n)}finally{Ho=!1,(Pr!==null||_r!==null)&&(xf(),yf())}}function Ns(e,t){var n=e.stateNode;if(n===null)return null;var r=xo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Y(231,t,typeof n));return n}var $a=!1;if(gn)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){$a=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{$a=!1}function Fh(e,t,n,r,s,o,a,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(y){this.onError(y)}}var ds=!1,Al=null,$l=!1,Ma=null,Dh={onError:function(e){ds=!0,Al=e}};function Uh(e,t,n,r,s,o,a,i,c){ds=!1,Al=null,Fh.apply(Dh,arguments)}function Bh(e,t,n,r,s,o,a,i,c){if(Uh.apply(this,arguments),ds){if(ds){var d=Al;ds=!1,Al=null}else throw Error(Y(198));$l||($l=!0,Ma=d)}}function ur(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function jf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function nu(e){if(ur(e)!==e)throw Error(Y(188))}function Wh(e){var t=e.alternate;if(!t){if(t=ur(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return nu(s),e;if(o===r)return nu(s),t;o=o.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=o;break}if(i===r){a=!0,r=s,n=o;break}i=i.sibling}if(!a){for(i=o.child;i;){if(i===n){a=!0,n=o,r=s;break}if(i===r){a=!0,r=o,n=s;break}i=i.sibling}if(!a)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:t}function Sf(e){return e=Wh(e),e!==null?Nf(e):null}function Nf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Nf(e);if(t!==null)return t;e=e.sibling}return null}var kf=Lt.unstable_scheduleCallback,ru=Lt.unstable_cancelCallback,Vh=Lt.unstable_shouldYield,Hh=Lt.unstable_requestPaint,Ke=Lt.unstable_now,Gh=Lt.unstable_getCurrentPriorityLevel,Di=Lt.unstable_ImmediatePriority,Cf=Lt.unstable_UserBlockingPriority,Ml=Lt.unstable_NormalPriority,Kh=Lt.unstable_LowPriority,bf=Lt.unstable_IdlePriority,ho=null,nn=null;function Qh(e){if(nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(ho,e,void 0,(e.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:Xh,Yh=Math.log,qh=Math.LN2;function Xh(e){return e>>>=0,e===0?32:31-(Yh(e)/qh|0)|0}var sl=64,ll=4194304;function os(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ol(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=os(i):(o&=a,o!==0&&(r=os(o)))}else a=n&~s,a!==0?r=os(a):o!==0&&(r=os(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ht(t),s=1<<n,r|=e[n],t&=~s;return r}function Jh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Ht(o),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=Jh(i,t)):c<=t&&(e.expiredLanes|=i),o&=~i}}function Oa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ef(){var e=sl;return sl<<=1,!(sl&4194240)&&(sl=64),e}function Go(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Us(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ht(t),e[t]=n}function eg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ht(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Ui(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ht(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var _e=0;function Lf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pf,Bi,_f,Rf,If,Fa=!1,ol=[],zn=null,Tn=null,An=null,ks=new Map,Cs=new Map,Ln=[],tg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function su(e,t){switch(e){case"focusin":case"focusout":zn=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":ks.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cs.delete(t.pointerId)}}function Xr(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Ws(t),t!==null&&Bi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function ng(e,t,n,r,s){switch(t){case"focusin":return zn=Xr(zn,e,t,n,r,s),!0;case"dragenter":return Tn=Xr(Tn,e,t,n,r,s),!0;case"mouseover":return An=Xr(An,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return ks.set(o,Xr(ks.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Cs.set(o,Xr(Cs.get(o)||null,e,t,n,r,s)),!0}return!1}function zf(e){var t=Zn(e.target);if(t!==null){var n=ur(t);if(n!==null){if(t=n.tag,t===13){if(t=jf(n),t!==null){e.blockedOn=t,If(e.priority,function(){_f(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Da(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ta=r,n.target.dispatchEvent(r),Ta=null}else return t=Ws(n),t!==null&&Bi(t),e.blockedOn=n,!1;t.shift()}return!0}function lu(e,t,n){Sl(e)&&n.delete(t)}function rg(){Fa=!1,zn!==null&&Sl(zn)&&(zn=null),Tn!==null&&Sl(Tn)&&(Tn=null),An!==null&&Sl(An)&&(An=null),ks.forEach(lu),Cs.forEach(lu)}function Jr(e,t){e.blockedOn===t&&(e.blockedOn=null,Fa||(Fa=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,rg)))}function bs(e){function t(s){return Jr(s,e)}if(0<ol.length){Jr(ol[0],e);for(var n=1;n<ol.length;n++){var r=ol[n];r.blockedOn===e&&(r.blockedOn=null)}}for(zn!==null&&Jr(zn,e),Tn!==null&&Jr(Tn,e),An!==null&&Jr(An,e),ks.forEach(t),Cs.forEach(t),n=0;n<Ln.length;n++)r=Ln[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ln.length&&(n=Ln[0],n.blockedOn===null);)zf(n),n.blockedOn===null&&Ln.shift()}var Rr=wn.ReactCurrentBatchConfig,Fl=!0;function sg(e,t,n,r){var s=_e,o=Rr.transition;Rr.transition=null;try{_e=1,Wi(e,t,n,r)}finally{_e=s,Rr.transition=o}}function lg(e,t,n,r){var s=_e,o=Rr.transition;Rr.transition=null;try{_e=4,Wi(e,t,n,r)}finally{_e=s,Rr.transition=o}}function Wi(e,t,n,r){if(Fl){var s=Da(e,t,n,r);if(s===null)na(e,t,r,Dl,n),su(e,r);else if(ng(s,e,t,n,r))r.stopPropagation();else if(su(e,r),t&4&&-1<tg.indexOf(e)){for(;s!==null;){var o=Ws(s);if(o!==null&&Pf(o),o=Da(e,t,n,r),o===null&&na(e,t,r,Dl,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else na(e,t,r,null,n)}}var Dl=null;function Da(e,t,n,r){if(Dl=null,e=Fi(r),e=Zn(e),e!==null)if(t=ur(e),t===null)e=null;else if(n=t.tag,n===13){if(e=jf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Dl=e,null}function Tf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gh()){case Di:return 1;case Cf:return 4;case Ml:case Kh:return 16;case bf:return 536870912;default:return 16}default:return 16}}var _n=null,Vi=null,Nl=null;function Af(){if(Nl)return Nl;var e,t=Vi,n=t.length,r,s="value"in _n?_n.value:_n.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return Nl=s.slice(e,1<r?1-r:void 0)}function kl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function al(){return!0}function ou(){return!1}function _t(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?al:ou,this.isPropagationStopped=ou,this}return He(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=al)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=al)},persist:function(){},isPersistent:al}),t}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hi=_t(Hr),Bs=He({},Hr,{view:0,detail:0}),og=_t(Bs),Ko,Qo,Zr,go=He({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zr&&(Zr&&e.type==="mousemove"?(Ko=e.screenX-Zr.screenX,Qo=e.screenY-Zr.screenY):Qo=Ko=0,Zr=e),Ko)},movementY:function(e){return"movementY"in e?e.movementY:Qo}}),au=_t(go),ag=He({},go,{dataTransfer:0}),ig=_t(ag),cg=He({},Bs,{relatedTarget:0}),Yo=_t(cg),ug=He({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),dg=_t(ug),fg=He({},Hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pg=_t(fg),mg=He({},Hr,{data:0}),iu=_t(mg),hg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=yg[e])?!!t[e]:!1}function Gi(){return vg}var xg=He({},Bs,{key:function(e){if(e.key){var t=hg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=kl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?gg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gi,charCode:function(e){return e.type==="keypress"?kl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),wg=_t(xg),jg=He({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cu=_t(jg),Sg=He({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gi}),Ng=_t(Sg),kg=He({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cg=_t(kg),bg=He({},go,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Eg=_t(bg),Lg=[9,13,27,32],Ki=gn&&"CompositionEvent"in window,fs=null;gn&&"documentMode"in document&&(fs=document.documentMode);var Pg=gn&&"TextEvent"in window&&!fs,$f=gn&&(!Ki||fs&&8<fs&&11>=fs),uu=" ",du=!1;function Mf(e,t){switch(e){case"keyup":return Lg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Of(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vr=!1;function _g(e,t){switch(e){case"compositionend":return Of(t);case"keypress":return t.which!==32?null:(du=!0,uu);case"textInput":return e=t.data,e===uu&&du?null:e;default:return null}}function Rg(e,t){if(vr)return e==="compositionend"||!Ki&&Mf(e,t)?(e=Af(),Nl=Vi=_n=null,vr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $f&&t.locale!=="ko"?null:t.data;default:return null}}var Ig={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ig[e.type]:t==="textarea"}function Ff(e,t,n,r){gf(r),t=Ul(t,"onChange"),0<t.length&&(n=new Hi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ps=null,Es=null;function zg(e){qf(e,0)}function yo(e){var t=jr(e);if(cf(t))return e}function Tg(e,t){if(e==="change")return t}var Df=!1;if(gn){var qo;if(gn){var Xo="oninput"in document;if(!Xo){var pu=document.createElement("div");pu.setAttribute("oninput","return;"),Xo=typeof pu.oninput=="function"}qo=Xo}else qo=!1;Df=qo&&(!document.documentMode||9<document.documentMode)}function mu(){ps&&(ps.detachEvent("onpropertychange",Uf),Es=ps=null)}function Uf(e){if(e.propertyName==="value"&&yo(Es)){var t=[];Ff(t,Es,e,Fi(e)),wf(zg,t)}}function Ag(e,t,n){e==="focusin"?(mu(),ps=t,Es=n,ps.attachEvent("onpropertychange",Uf)):e==="focusout"&&mu()}function $g(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yo(Es)}function Mg(e,t){if(e==="click")return yo(t)}function Og(e,t){if(e==="input"||e==="change")return yo(t)}function Fg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kt=typeof Object.is=="function"?Object.is:Fg;function Ls(e,t){if(Kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Sa.call(t,s)||!Kt(e[s],t[s]))return!1}return!0}function hu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gu(e,t){var n=hu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hu(n)}}function Bf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wf(){for(var e=window,t=Tl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Tl(e.document)}return t}function Qi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Dg(e){var t=Wf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Bf(n.ownerDocument.documentElement,n)){if(r!==null&&Qi(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=gu(n,o);var a=gu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ug=gn&&"documentMode"in document&&11>=document.documentMode,xr=null,Ua=null,ms=null,Ba=!1;function yu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ba||xr==null||xr!==Tl(r)||(r=xr,"selectionStart"in r&&Qi(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ms&&Ls(ms,r)||(ms=r,r=Ul(Ua,"onSelect"),0<r.length&&(t=new Hi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=xr)))}function il(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:il("Animation","AnimationEnd"),animationiteration:il("Animation","AnimationIteration"),animationstart:il("Animation","AnimationStart"),transitionend:il("Transition","TransitionEnd")},Jo={},Vf={};gn&&(Vf=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function vo(e){if(Jo[e])return Jo[e];if(!wr[e])return e;var t=wr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Vf)return Jo[e]=t[n];return e}var Hf=vo("animationend"),Gf=vo("animationiteration"),Kf=vo("animationstart"),Qf=vo("transitionend"),Yf=new Map,vu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gn(e,t){Yf.set(e,t),cr(t,[e])}for(var Zo=0;Zo<vu.length;Zo++){var ea=vu[Zo],Bg=ea.toLowerCase(),Wg=ea[0].toUpperCase()+ea.slice(1);Gn(Bg,"on"+Wg)}Gn(Hf,"onAnimationEnd");Gn(Gf,"onAnimationIteration");Gn(Kf,"onAnimationStart");Gn("dblclick","onDoubleClick");Gn("focusin","onFocus");Gn("focusout","onBlur");Gn(Qf,"onTransitionEnd");$r("onMouseEnter",["mouseout","mouseover"]);$r("onMouseLeave",["mouseout","mouseover"]);$r("onPointerEnter",["pointerout","pointerover"]);$r("onPointerLeave",["pointerout","pointerover"]);cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cr("onBeforeInput",["compositionend","keypress","textInput","paste"]);cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var as="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vg=new Set("cancel close invalid load scroll toggle".split(" ").concat(as));function xu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Bh(r,t,void 0,e),e.currentTarget=null}function qf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==o&&s.isPropagationStopped())break e;xu(s,i,d),o=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,d=i.currentTarget,i=i.listener,c!==o&&s.isPropagationStopped())break e;xu(s,i,d),o=c}}}if($l)throw e=Ma,$l=!1,Ma=null,e}function $e(e,t){var n=t[Ka];n===void 0&&(n=t[Ka]=new Set);var r=e+"__bubble";n.has(r)||(Xf(t,e,2,!1),n.add(r))}function ta(e,t,n){var r=0;t&&(r|=4),Xf(n,e,r,t)}var cl="_reactListening"+Math.random().toString(36).slice(2);function Ps(e){if(!e[cl]){e[cl]=!0,rf.forEach(function(n){n!=="selectionchange"&&(Vg.has(n)||ta(n,!1,e),ta(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cl]||(t[cl]=!0,ta("selectionchange",!1,t))}}function Xf(e,t,n,r){switch(Tf(t)){case 1:var s=sg;break;case 4:s=lg;break;default:s=Wi}n=s.bind(null,t,n,e),s=void 0,!$a||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function na(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=Zn(i),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}i=i.parentNode}}r=r.return}wf(function(){var d=o,y=Fi(n),h=[];e:{var g=Yf.get(e);if(g!==void 0){var v=Hi,w=e;switch(e){case"keypress":if(kl(n)===0)break e;case"keydown":case"keyup":v=wg;break;case"focusin":w="focus",v=Yo;break;case"focusout":w="blur",v=Yo;break;case"beforeblur":case"afterblur":v=Yo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=au;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=ig;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Ng;break;case Hf:case Gf:case Kf:v=dg;break;case Qf:v=Cg;break;case"scroll":v=og;break;case"wheel":v=Eg;break;case"copy":case"cut":case"paste":v=pg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=cu}var N=(t&4)!==0,S=!N&&e==="scroll",m=N?g!==null?g+"Capture":null:g;N=[];for(var f=d,p;f!==null;){p=f;var j=p.stateNode;if(p.tag===5&&j!==null&&(p=j,m!==null&&(j=Ns(f,m),j!=null&&N.push(_s(f,j,p)))),S)break;f=f.return}0<N.length&&(g=new v(g,w,null,n,y),h.push({event:g,listeners:N}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&n!==Ta&&(w=n.relatedTarget||n.fromElement)&&(Zn(w)||w[yn]))break e;if((v||g)&&(g=y.window===y?y:(g=y.ownerDocument)?g.defaultView||g.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=d,w=w?Zn(w):null,w!==null&&(S=ur(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=d),v!==w)){if(N=au,j="onMouseLeave",m="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(N=cu,j="onPointerLeave",m="onPointerEnter",f="pointer"),S=v==null?g:jr(v),p=w==null?g:jr(w),g=new N(j,f+"leave",v,n,y),g.target=S,g.relatedTarget=p,j=null,Zn(y)===d&&(N=new N(m,f+"enter",w,n,y),N.target=p,N.relatedTarget=S,j=N),S=j,v&&w)t:{for(N=v,m=w,f=0,p=N;p;p=fr(p))f++;for(p=0,j=m;j;j=fr(j))p++;for(;0<f-p;)N=fr(N),f--;for(;0<p-f;)m=fr(m),p--;for(;f--;){if(N===m||m!==null&&N===m.alternate)break t;N=fr(N),m=fr(m)}N=null}else N=null;v!==null&&wu(h,g,v,N,!1),w!==null&&S!==null&&wu(h,S,w,N,!0)}}e:{if(g=d?jr(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var b=Tg;else if(fu(g))if(Df)b=Og;else{b=$g;var E=Ag}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(b=Mg);if(b&&(b=b(e,d))){Ff(h,b,n,y);break e}E&&E(e,g,d),e==="focusout"&&(E=g._wrapperState)&&E.controlled&&g.type==="number"&&Pa(g,"number",g.value)}switch(E=d?jr(d):window,e){case"focusin":(fu(E)||E.contentEditable==="true")&&(xr=E,Ua=d,ms=null);break;case"focusout":ms=Ua=xr=null;break;case"mousedown":Ba=!0;break;case"contextmenu":case"mouseup":case"dragend":Ba=!1,yu(h,n,y);break;case"selectionchange":if(Ug)break;case"keydown":case"keyup":yu(h,n,y)}var z;if(Ki)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else vr?Mf(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&($f&&n.locale!=="ko"&&(vr||P!=="onCompositionStart"?P==="onCompositionEnd"&&vr&&(z=Af()):(_n=y,Vi="value"in _n?_n.value:_n.textContent,vr=!0)),E=Ul(d,P),0<E.length&&(P=new iu(P,e,null,n,y),h.push({event:P,listeners:E}),z?P.data=z:(z=Of(n),z!==null&&(P.data=z)))),(z=Pg?_g(e,n):Rg(e,n))&&(d=Ul(d,"onBeforeInput"),0<d.length&&(y=new iu("onBeforeInput","beforeinput",null,n,y),h.push({event:y,listeners:d}),y.data=z))}qf(h,t)})}function _s(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ul(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ns(e,n),o!=null&&r.unshift(_s(e,o,s)),o=Ns(e,t),o!=null&&r.push(_s(e,o,s))),e=e.return}return r}function fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wu(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,d=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&d!==null&&(i=d,s?(c=Ns(n,o),c!=null&&a.unshift(_s(n,c,i))):s||(c=Ns(n,o),c!=null&&a.push(_s(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Hg=/\r\n?/g,Gg=/\u0000|\uFFFD/g;function ju(e){return(typeof e=="string"?e:""+e).replace(Hg,`
`).replace(Gg,"")}function ul(e,t,n){if(t=ju(t),ju(e)!==t&&n)throw Error(Y(425))}function Bl(){}var Wa=null,Va=null;function Ha(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ga=typeof setTimeout=="function"?setTimeout:void 0,Kg=typeof clearTimeout=="function"?clearTimeout:void 0,Su=typeof Promise=="function"?Promise:void 0,Qg=typeof queueMicrotask=="function"?queueMicrotask:typeof Su<"u"?function(e){return Su.resolve(null).then(e).catch(Yg)}:Ga;function Yg(e){setTimeout(function(){throw e})}function ra(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),bs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);bs(t)}function $n(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Gr,Rs="__reactProps$"+Gr,yn="__reactContainer$"+Gr,Ka="__reactEvents$"+Gr,qg="__reactListeners$"+Gr,Xg="__reactHandles$"+Gr;function Zn(e){var t=e[Xt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yn]||n[Xt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Nu(e);e!==null;){if(n=e[Xt])return n;e=Nu(e)}return t}e=n,n=e.parentNode}return null}function Ws(e){return e=e[Xt]||e[yn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function xo(e){return e[Rs]||null}var Qa=[],Sr=-1;function Kn(e){return{current:e}}function Me(e){0>Sr||(e.current=Qa[Sr],Qa[Sr]=null,Sr--)}function ze(e,t){Sr++,Qa[Sr]=e.current,e.current=t}var Vn={},ut=Kn(Vn),xt=Kn(!1),sr=Vn;function Mr(e,t){var n=e.type.contextTypes;if(!n)return Vn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function wt(e){return e=e.childContextTypes,e!=null}function Wl(){Me(xt),Me(ut)}function ku(e,t,n){if(ut.current!==Vn)throw Error(Y(168));ze(ut,t),ze(xt,n)}function Jf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Y(108,Ah(e)||"Unknown",s));return He({},n,r)}function Vl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vn,sr=ut.current,ze(ut,e),ze(xt,xt.current),!0}function Cu(e,t,n){var r=e.stateNode;if(!r)throw Error(Y(169));n?(e=Jf(e,t,sr),r.__reactInternalMemoizedMergedChildContext=e,Me(xt),Me(ut),ze(ut,e)):Me(xt),ze(xt,n)}var an=null,wo=!1,sa=!1;function Zf(e){an===null?an=[e]:an.push(e)}function Jg(e){wo=!0,Zf(e)}function Qn(){if(!sa&&an!==null){sa=!0;var e=0,t=_e;try{var n=an;for(_e=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}an=null,wo=!1}catch(s){throw an!==null&&(an=an.slice(e+1)),kf(Di,Qn),s}finally{_e=t,sa=!1}}return null}var Nr=[],kr=0,Hl=null,Gl=0,zt=[],Tt=0,lr=null,dn=1,fn="";function qn(e,t){Nr[kr++]=Gl,Nr[kr++]=Hl,Hl=e,Gl=t}function ep(e,t,n){zt[Tt++]=dn,zt[Tt++]=fn,zt[Tt++]=lr,lr=e;var r=dn;e=fn;var s=32-Ht(r)-1;r&=~(1<<s),n+=1;var o=32-Ht(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,dn=1<<32-Ht(t)+s|n<<s|r,fn=o+e}else dn=1<<o|n<<s|r,fn=e}function Yi(e){e.return!==null&&(qn(e,1),ep(e,1,0))}function qi(e){for(;e===Hl;)Hl=Nr[--kr],Nr[kr]=null,Gl=Nr[--kr],Nr[kr]=null;for(;e===lr;)lr=zt[--Tt],zt[Tt]=null,fn=zt[--Tt],zt[Tt]=null,dn=zt[--Tt],zt[Tt]=null}var Et=null,bt=null,Fe=!1,Vt=null;function tp(e,t){var n=At(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function bu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Et=e,bt=$n(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Et=e,bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=lr!==null?{id:dn,overflow:fn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=At(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Et=e,bt=null,!0):!1;default:return!1}}function Ya(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qa(e){if(Fe){var t=bt;if(t){var n=t;if(!bu(e,t)){if(Ya(e))throw Error(Y(418));t=$n(n.nextSibling);var r=Et;t&&bu(e,t)?tp(r,n):(e.flags=e.flags&-4097|2,Fe=!1,Et=e)}}else{if(Ya(e))throw Error(Y(418));e.flags=e.flags&-4097|2,Fe=!1,Et=e}}}function Eu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Et=e}function dl(e){if(e!==Et)return!1;if(!Fe)return Eu(e),Fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ha(e.type,e.memoizedProps)),t&&(t=bt)){if(Ya(e))throw np(),Error(Y(418));for(;t;)tp(e,t),t=$n(t.nextSibling)}if(Eu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){bt=$n(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}bt=null}}else bt=Et?$n(e.stateNode.nextSibling):null;return!0}function np(){for(var e=bt;e;)e=$n(e.nextSibling)}function Or(){bt=Et=null,Fe=!1}function Xi(e){Vt===null?Vt=[e]:Vt.push(e)}var Zg=wn.ReactCurrentBatchConfig;function es(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var i=s.refs;a===null?delete i[o]:i[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,e))}return e}function fl(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Lu(e){var t=e._init;return t(e._payload)}function rp(e){function t(m,f){if(e){var p=m.deletions;p===null?(m.deletions=[f],m.flags|=16):p.push(f)}}function n(m,f){if(!e)return null;for(;f!==null;)t(m,f),f=f.sibling;return null}function r(m,f){for(m=new Map;f!==null;)f.key!==null?m.set(f.key,f):m.set(f.index,f),f=f.sibling;return m}function s(m,f){return m=Dn(m,f),m.index=0,m.sibling=null,m}function o(m,f,p){return m.index=p,e?(p=m.alternate,p!==null?(p=p.index,p<f?(m.flags|=2,f):p):(m.flags|=2,f)):(m.flags|=1048576,f)}function a(m){return e&&m.alternate===null&&(m.flags|=2),m}function i(m,f,p,j){return f===null||f.tag!==6?(f=da(p,m.mode,j),f.return=m,f):(f=s(f,p),f.return=m,f)}function c(m,f,p,j){var b=p.type;return b===yr?y(m,f,p.props.children,j,p.key):f!==null&&(f.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===bn&&Lu(b)===f.type)?(j=s(f,p.props),j.ref=es(m,f,p),j.return=m,j):(j=Rl(p.type,p.key,p.props,null,m.mode,j),j.ref=es(m,f,p),j.return=m,j)}function d(m,f,p,j){return f===null||f.tag!==4||f.stateNode.containerInfo!==p.containerInfo||f.stateNode.implementation!==p.implementation?(f=fa(p,m.mode,j),f.return=m,f):(f=s(f,p.children||[]),f.return=m,f)}function y(m,f,p,j,b){return f===null||f.tag!==7?(f=rr(p,m.mode,j,b),f.return=m,f):(f=s(f,p),f.return=m,f)}function h(m,f,p){if(typeof f=="string"&&f!==""||typeof f=="number")return f=da(""+f,m.mode,p),f.return=m,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case tl:return p=Rl(f.type,f.key,f.props,null,m.mode,p),p.ref=es(m,null,f),p.return=m,p;case gr:return f=fa(f,m.mode,p),f.return=m,f;case bn:var j=f._init;return h(m,j(f._payload),p)}if(ls(f)||Yr(f))return f=rr(f,m.mode,p,null),f.return=m,f;fl(m,f)}return null}function g(m,f,p,j){var b=f!==null?f.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return b!==null?null:i(m,f,""+p,j);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case tl:return p.key===b?c(m,f,p,j):null;case gr:return p.key===b?d(m,f,p,j):null;case bn:return b=p._init,g(m,f,b(p._payload),j)}if(ls(p)||Yr(p))return b!==null?null:y(m,f,p,j,null);fl(m,p)}return null}function v(m,f,p,j,b){if(typeof j=="string"&&j!==""||typeof j=="number")return m=m.get(p)||null,i(f,m,""+j,b);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case tl:return m=m.get(j.key===null?p:j.key)||null,c(f,m,j,b);case gr:return m=m.get(j.key===null?p:j.key)||null,d(f,m,j,b);case bn:var E=j._init;return v(m,f,p,E(j._payload),b)}if(ls(j)||Yr(j))return m=m.get(p)||null,y(f,m,j,b,null);fl(f,j)}return null}function w(m,f,p,j){for(var b=null,E=null,z=f,P=f=0,F=null;z!==null&&P<p.length;P++){z.index>P?(F=z,z=null):F=z.sibling;var T=g(m,z,p[P],j);if(T===null){z===null&&(z=F);break}e&&z&&T.alternate===null&&t(m,z),f=o(T,f,P),E===null?b=T:E.sibling=T,E=T,z=F}if(P===p.length)return n(m,z),Fe&&qn(m,P),b;if(z===null){for(;P<p.length;P++)z=h(m,p[P],j),z!==null&&(f=o(z,f,P),E===null?b=z:E.sibling=z,E=z);return Fe&&qn(m,P),b}for(z=r(m,z);P<p.length;P++)F=v(z,m,P,p[P],j),F!==null&&(e&&F.alternate!==null&&z.delete(F.key===null?P:F.key),f=o(F,f,P),E===null?b=F:E.sibling=F,E=F);return e&&z.forEach(function(V){return t(m,V)}),Fe&&qn(m,P),b}function N(m,f,p,j){var b=Yr(p);if(typeof b!="function")throw Error(Y(150));if(p=b.call(p),p==null)throw Error(Y(151));for(var E=b=null,z=f,P=f=0,F=null,T=p.next();z!==null&&!T.done;P++,T=p.next()){z.index>P?(F=z,z=null):F=z.sibling;var V=g(m,z,T.value,j);if(V===null){z===null&&(z=F);break}e&&z&&V.alternate===null&&t(m,z),f=o(V,f,P),E===null?b=V:E.sibling=V,E=V,z=F}if(T.done)return n(m,z),Fe&&qn(m,P),b;if(z===null){for(;!T.done;P++,T=p.next())T=h(m,T.value,j),T!==null&&(f=o(T,f,P),E===null?b=T:E.sibling=T,E=T);return Fe&&qn(m,P),b}for(z=r(m,z);!T.done;P++,T=p.next())T=v(z,m,P,T.value,j),T!==null&&(e&&T.alternate!==null&&z.delete(T.key===null?P:T.key),f=o(T,f,P),E===null?b=T:E.sibling=T,E=T);return e&&z.forEach(function(fe){return t(m,fe)}),Fe&&qn(m,P),b}function S(m,f,p,j){if(typeof p=="object"&&p!==null&&p.type===yr&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case tl:e:{for(var b=p.key,E=f;E!==null;){if(E.key===b){if(b=p.type,b===yr){if(E.tag===7){n(m,E.sibling),f=s(E,p.props.children),f.return=m,m=f;break e}}else if(E.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===bn&&Lu(b)===E.type){n(m,E.sibling),f=s(E,p.props),f.ref=es(m,E,p),f.return=m,m=f;break e}n(m,E);break}else t(m,E);E=E.sibling}p.type===yr?(f=rr(p.props.children,m.mode,j,p.key),f.return=m,m=f):(j=Rl(p.type,p.key,p.props,null,m.mode,j),j.ref=es(m,f,p),j.return=m,m=j)}return a(m);case gr:e:{for(E=p.key;f!==null;){if(f.key===E)if(f.tag===4&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){n(m,f.sibling),f=s(f,p.children||[]),f.return=m,m=f;break e}else{n(m,f);break}else t(m,f);f=f.sibling}f=fa(p,m.mode,j),f.return=m,m=f}return a(m);case bn:return E=p._init,S(m,f,E(p._payload),j)}if(ls(p))return w(m,f,p,j);if(Yr(p))return N(m,f,p,j);fl(m,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,f!==null&&f.tag===6?(n(m,f.sibling),f=s(f,p),f.return=m,m=f):(n(m,f),f=da(p,m.mode,j),f.return=m,m=f),a(m)):n(m,f)}return S}var Fr=rp(!0),sp=rp(!1),Kl=Kn(null),Ql=null,Cr=null,Ji=null;function Zi(){Ji=Cr=Ql=null}function ec(e){var t=Kl.current;Me(Kl),e._currentValue=t}function Xa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ir(e,t){Ql=e,Ji=Cr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(vt=!0),e.firstContext=null)}function Mt(e){var t=e._currentValue;if(Ji!==e)if(e={context:e,memoizedValue:t,next:null},Cr===null){if(Ql===null)throw Error(Y(308));Cr=e,Ql.dependencies={lanes:0,firstContext:e}}else Cr=Cr.next=e;return t}var er=null;function tc(e){er===null?er=[e]:er.push(e)}function lp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,tc(t)):(n.next=s.next,s.next=n),t.interleaved=n,vn(e,r)}function vn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var En=!1;function nc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function op(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,vn(e,n)}return s=r.interleaved,s===null?(t.next=t,tc(r)):(t.next=s.next,s.next=t),r.interleaved=t,vn(e,n)}function Cl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ui(e,n)}}function Pu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yl(e,t,n,r){var s=e.updateQueue;En=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,d=c.next;c.next=null,a===null?o=d:a.next=d,a=c;var y=e.alternate;y!==null&&(y=y.updateQueue,i=y.lastBaseUpdate,i!==a&&(i===null?y.firstBaseUpdate=d:i.next=d,y.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;a=0,y=d=c=null,i=o;do{var g=i.lane,v=i.eventTime;if((r&g)===g){y!==null&&(y=y.next={eventTime:v,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,N=i;switch(g=t,v=n,N.tag){case 1:if(w=N.payload,typeof w=="function"){h=w.call(v,h,g);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=N.payload,g=typeof w=="function"?w.call(v,h,g):w,g==null)break e;h=He({},h,g);break e;case 2:En=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[i]:g.push(i))}else v={eventTime:v,lane:g,tag:i.tag,payload:i.payload,callback:i.callback,next:null},y===null?(d=y=v,c=h):y=y.next=v,a|=g;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;g=i,i=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(y===null&&(c=h),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=y,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);ar|=a,e.lanes=a,e.memoizedState=h}}function _u(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var Vs={},rn=Kn(Vs),Is=Kn(Vs),zs=Kn(Vs);function tr(e){if(e===Vs)throw Error(Y(174));return e}function rc(e,t){switch(ze(zs,t),ze(Is,e),ze(rn,Vs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ra(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ra(t,e)}Me(rn),ze(rn,t)}function Dr(){Me(rn),Me(Is),Me(zs)}function ap(e){tr(zs.current);var t=tr(rn.current),n=Ra(t,e.type);t!==n&&(ze(Is,e),ze(rn,n))}function sc(e){Is.current===e&&(Me(rn),Me(Is))}var Be=Kn(0);function ql(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var la=[];function lc(){for(var e=0;e<la.length;e++)la[e]._workInProgressVersionPrimary=null;la.length=0}var bl=wn.ReactCurrentDispatcher,oa=wn.ReactCurrentBatchConfig,or=0,We=null,qe=null,et=null,Xl=!1,hs=!1,Ts=0,ey=0;function at(){throw Error(Y(321))}function oc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kt(e[n],t[n]))return!1;return!0}function ac(e,t,n,r,s,o){if(or=o,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bl.current=e===null||e.memoizedState===null?sy:ly,e=n(r,s),hs){o=0;do{if(hs=!1,Ts=0,25<=o)throw Error(Y(301));o+=1,et=qe=null,t.updateQueue=null,bl.current=oy,e=n(r,s)}while(hs)}if(bl.current=Jl,t=qe!==null&&qe.next!==null,or=0,et=qe=We=null,Xl=!1,t)throw Error(Y(300));return e}function ic(){var e=Ts!==0;return Ts=0,e}function qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?We.memoizedState=et=e:et=et.next=e,et}function Ot(){if(qe===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var t=et===null?We.memoizedState:et.next;if(t!==null)et=t,qe=e;else{if(e===null)throw Error(Y(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},et===null?We.memoizedState=et=e:et=et.next=e}return et}function As(e,t){return typeof t=="function"?t(e):t}function aa(e){var t=Ot(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=qe,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var i=a=null,c=null,d=o;do{var y=d.lane;if((or&y)===y)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:y,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=h,a=r):c=c.next=h,We.lanes|=y,ar|=y}d=d.next}while(d!==null&&d!==o);c===null?a=r:c.next=i,Kt(r,t.memoizedState)||(vt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,We.lanes|=o,ar|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ia(e){var t=Ot(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);Kt(o,t.memoizedState)||(vt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ip(){}function cp(e,t){var n=We,r=Ot(),s=t(),o=!Kt(r.memoizedState,s);if(o&&(r.memoizedState=s,vt=!0),r=r.queue,cc(fp.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,$s(9,dp.bind(null,n,r,s,t),void 0,null),tt===null)throw Error(Y(349));or&30||up(n,t,s)}return s}function up(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function dp(e,t,n,r){t.value=n,t.getSnapshot=r,pp(t)&&mp(e)}function fp(e,t,n){return n(function(){pp(t)&&mp(e)})}function pp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kt(e,n)}catch{return!0}}function mp(e){var t=vn(e,1);t!==null&&Gt(t,e,1,-1)}function Ru(e){var t=qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:e},t.queue=e,e=e.dispatch=ry.bind(null,We,e),[t.memoizedState,e]}function $s(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function hp(){return Ot().memoizedState}function El(e,t,n,r){var s=qt();We.flags|=e,s.memoizedState=$s(1|t,n,void 0,r===void 0?null:r)}function jo(e,t,n,r){var s=Ot();r=r===void 0?null:r;var o=void 0;if(qe!==null){var a=qe.memoizedState;if(o=a.destroy,r!==null&&oc(r,a.deps)){s.memoizedState=$s(t,n,o,r);return}}We.flags|=e,s.memoizedState=$s(1|t,n,o,r)}function Iu(e,t){return El(8390656,8,e,t)}function cc(e,t){return jo(2048,8,e,t)}function gp(e,t){return jo(4,2,e,t)}function yp(e,t){return jo(4,4,e,t)}function vp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xp(e,t,n){return n=n!=null?n.concat([e]):null,jo(4,4,vp.bind(null,t,e),n)}function uc(){}function wp(e,t){var n=Ot();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&oc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function jp(e,t){var n=Ot();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&oc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Sp(e,t,n){return or&21?(Kt(n,t)||(n=Ef(),We.lanes|=n,ar|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vt=!0),e.memoizedState=n)}function ty(e,t){var n=_e;_e=n!==0&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{_e=n,oa.transition=r}}function Np(){return Ot().memoizedState}function ny(e,t,n){var r=Fn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kp(e))Cp(t,n);else if(n=lp(e,t,n,r),n!==null){var s=ft();Gt(n,e,r,s),bp(n,t,r)}}function ry(e,t,n){var r=Fn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kp(e))Cp(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,i=o(a,n);if(s.hasEagerState=!0,s.eagerState=i,Kt(i,a)){var c=t.interleaved;c===null?(s.next=s,tc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=lp(e,t,s,r),n!==null&&(s=ft(),Gt(n,e,r,s),bp(n,t,r))}}function kp(e){var t=e.alternate;return e===We||t!==null&&t===We}function Cp(e,t){hs=Xl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function bp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ui(e,n)}}var Jl={readContext:Mt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},sy={readContext:Mt,useCallback:function(e,t){return qt().memoizedState=[e,t===void 0?null:t],e},useContext:Mt,useEffect:Iu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,El(4194308,4,vp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return El(4194308,4,e,t)},useInsertionEffect:function(e,t){return El(4,2,e,t)},useMemo:function(e,t){var n=qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=qt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ny.bind(null,We,e),[r.memoizedState,e]},useRef:function(e){var t=qt();return e={current:e},t.memoizedState=e},useState:Ru,useDebugValue:uc,useDeferredValue:function(e){return qt().memoizedState=e},useTransition:function(){var e=Ru(!1),t=e[0];return e=ty.bind(null,e[1]),qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=We,s=qt();if(Fe){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=t(),tt===null)throw Error(Y(349));or&30||up(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Iu(fp.bind(null,r,o,e),[e]),r.flags|=2048,$s(9,dp.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=qt(),t=tt.identifierPrefix;if(Fe){var n=fn,r=dn;n=(r&~(1<<32-Ht(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ts++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ey++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ly={readContext:Mt,useCallback:wp,useContext:Mt,useEffect:cc,useImperativeHandle:xp,useInsertionEffect:gp,useLayoutEffect:yp,useMemo:jp,useReducer:aa,useRef:hp,useState:function(){return aa(As)},useDebugValue:uc,useDeferredValue:function(e){var t=Ot();return Sp(t,qe.memoizedState,e)},useTransition:function(){var e=aa(As)[0],t=Ot().memoizedState;return[e,t]},useMutableSource:ip,useSyncExternalStore:cp,useId:Np,unstable_isNewReconciler:!1},oy={readContext:Mt,useCallback:wp,useContext:Mt,useEffect:cc,useImperativeHandle:xp,useInsertionEffect:gp,useLayoutEffect:yp,useMemo:jp,useReducer:ia,useRef:hp,useState:function(){return ia(As)},useDebugValue:uc,useDeferredValue:function(e){var t=Ot();return qe===null?t.memoizedState=e:Sp(t,qe.memoizedState,e)},useTransition:function(){var e=ia(As)[0],t=Ot().memoizedState;return[e,t]},useMutableSource:ip,useSyncExternalStore:cp,useId:Np,unstable_isNewReconciler:!1};function Bt(e,t){if(e&&e.defaultProps){t=He({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ja(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:He({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var So={isMounted:function(e){return(e=e._reactInternals)?ur(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ft(),s=Fn(e),o=mn(r,s);o.payload=t,n!=null&&(o.callback=n),t=Mn(e,o,s),t!==null&&(Gt(t,e,s,r),Cl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ft(),s=Fn(e),o=mn(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Mn(e,o,s),t!==null&&(Gt(t,e,s,r),Cl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ft(),r=Fn(e),s=mn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Mn(e,s,r),t!==null&&(Gt(t,e,r,n),Cl(t,e,r))}};function zu(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Ls(n,r)||!Ls(s,o):!0}function Ep(e,t,n){var r=!1,s=Vn,o=t.contextType;return typeof o=="object"&&o!==null?o=Mt(o):(s=wt(t)?sr:ut.current,r=t.contextTypes,o=(r=r!=null)?Mr(e,s):Vn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=So,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Tu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&So.enqueueReplaceState(t,t.state,null)}function Za(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},nc(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Mt(o):(o=wt(t)?sr:ut.current,s.context=Mr(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Ja(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&So.enqueueReplaceState(s,s.state,null),Yl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ur(e,t){try{var n="",r=t;do n+=Th(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function ca(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ei(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ay=typeof WeakMap=="function"?WeakMap:Map;function Lp(e,t,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){eo||(eo=!0,ui=r),ei(e,t)},n}function Pp(e,t,n){n=mn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ei(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ei(e,t),typeof r!="function"&&(On===null?On=new Set([this]):On.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Au(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ay;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=jy.bind(null,e,t,n),t.then(e,e))}function $u(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=mn(-1,1),t.tag=2,Mn(n,t,1))),n.lanes|=1),e)}var iy=wn.ReactCurrentOwner,vt=!1;function dt(e,t,n,r){t.child=e===null?sp(t,null,n,r):Fr(t,e.child,n,r)}function Ou(e,t,n,r,s){n=n.render;var o=t.ref;return Ir(t,s),r=ac(e,t,n,r,o,s),n=ic(),e!==null&&!vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,xn(e,t,s)):(Fe&&n&&Yi(t),t.flags|=1,dt(e,t,r,s),t.child)}function Fu(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!vc(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,_p(e,t,o,r,s)):(e=Rl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ls,n(a,r)&&e.ref===t.ref)return xn(e,t,s)}return t.flags|=1,e=Dn(o,r),e.ref=t.ref,e.return=t,t.child=e}function _p(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Ls(o,r)&&e.ref===t.ref)if(vt=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(vt=!0);else return t.lanes=e.lanes,xn(e,t,s)}return ti(e,t,n,r,s)}function Rp(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Er,kt),kt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(Er,kt),kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ze(Er,kt),kt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ze(Er,kt),kt|=r;return dt(e,t,s,n),t.child}function Ip(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ti(e,t,n,r,s){var o=wt(n)?sr:ut.current;return o=Mr(t,o),Ir(t,s),n=ac(e,t,n,r,o,s),r=ic(),e!==null&&!vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,xn(e,t,s)):(Fe&&r&&Yi(t),t.flags|=1,dt(e,t,n,s),t.child)}function Du(e,t,n,r,s){if(wt(n)){var o=!0;Vl(t)}else o=!1;if(Ir(t,s),t.stateNode===null)Ll(e,t),Ep(t,n,r),Za(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Mt(d):(d=wt(n)?sr:ut.current,d=Mr(t,d));var y=n.getDerivedStateFromProps,h=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==d)&&Tu(t,a,r,d),En=!1;var g=t.memoizedState;a.state=g,Yl(t,r,a,s),c=t.memoizedState,i!==r||g!==c||xt.current||En?(typeof y=="function"&&(Ja(t,n,y,r),c=t.memoizedState),(i=En||zu(t,n,i,r,g,c,d))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,op(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:Bt(t.type,i),a.props=d,h=t.pendingProps,g=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Mt(c):(c=wt(n)?sr:ut.current,c=Mr(t,c));var v=n.getDerivedStateFromProps;(y=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==h||g!==c)&&Tu(t,a,r,c),En=!1,g=t.memoizedState,a.state=g,Yl(t,r,a,s);var w=t.memoizedState;i!==h||g!==w||xt.current||En?(typeof v=="function"&&(Ja(t,n,v,r),w=t.memoizedState),(d=En||zu(t,n,d,r,g,w,c)||!1)?(y||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return ni(e,t,n,r,o,s)}function ni(e,t,n,r,s,o){Ip(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Cu(t,n,!1),xn(e,t,o);r=t.stateNode,iy.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Fr(t,e.child,null,o),t.child=Fr(t,null,i,o)):dt(e,t,i,o),t.memoizedState=r.state,s&&Cu(t,n,!0),t.child}function zp(e){var t=e.stateNode;t.pendingContext?ku(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ku(e,t.context,!1),rc(e,t.containerInfo)}function Uu(e,t,n,r,s){return Or(),Xi(s),t.flags|=256,dt(e,t,n,r),t.child}var ri={dehydrated:null,treeContext:null,retryLane:0};function si(e){return{baseLanes:e,cachePool:null,transitions:null}}function Tp(e,t,n){var r=t.pendingProps,s=Be.current,o=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ze(Be,s&1),e===null)return qa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Co(a,r,0,null),e=rr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=si(n),t.memoizedState=ri,e):dc(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return cy(e,t,a,r,i,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Dn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?o=Dn(i,o):(o=rr(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?si(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=ri,r}return o=e.child,e=o.sibling,r=Dn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function dc(e,t){return t=Co({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function pl(e,t,n,r){return r!==null&&Xi(r),Fr(t,e.child,null,n),e=dc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cy(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=ca(Error(Y(422))),pl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Co({mode:"visible",children:r.children},s,0,null),o=rr(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Fr(t,e.child,null,a),t.child.memoizedState=si(a),t.memoizedState=ri,o);if(!(t.mode&1))return pl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,o=Error(Y(419)),r=ca(o,r,void 0),pl(e,t,a,r)}if(i=(a&e.childLanes)!==0,vt||i){if(r=tt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,vn(e,s),Gt(r,e,s,-1))}return yc(),r=ca(Error(Y(421))),pl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Sy.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,bt=$n(s.nextSibling),Et=t,Fe=!0,Vt=null,e!==null&&(zt[Tt++]=dn,zt[Tt++]=fn,zt[Tt++]=lr,dn=e.id,fn=e.overflow,lr=t),t=dc(t,r.children),t.flags|=4096,t)}function Bu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Xa(e.return,t,n)}function ua(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Ap(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(dt(e,t,r.children,n),r=Be.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bu(e,n,t);else if(e.tag===19)Bu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ze(Be,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&ql(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ua(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ql(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ua(t,!0,n,null,o);break;case"together":ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ll(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ar|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,n=Dn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Dn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function uy(e,t,n){switch(t.tag){case 3:zp(t),Or();break;case 5:ap(t);break;case 1:wt(t.type)&&Vl(t);break;case 4:rc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ze(Kl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ze(Be,Be.current&1),t.flags|=128,null):n&t.child.childLanes?Tp(e,t,n):(ze(Be,Be.current&1),e=xn(e,t,n),e!==null?e.sibling:null);ze(Be,Be.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Ap(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ze(Be,Be.current),r)break;return null;case 22:case 23:return t.lanes=0,Rp(e,t,n)}return xn(e,t,n)}var $p,li,Mp,Op;$p=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};li=function(){};Mp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,tr(rn.current);var o=null;switch(n){case"input":s=Ea(e,s),r=Ea(e,r),o=[];break;case"select":s=He({},s,{value:void 0}),r=He({},r,{value:void 0}),o=[];break;case"textarea":s=_a(e,s),r=_a(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Bl)}Ia(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(js.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(i=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(js.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&$e("scroll",e),o||i===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};Op=function(e,t,n,r){n!==r&&(t.flags|=4)};function ts(e,t){if(!Fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function it(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function dy(e,t,n){var r=t.pendingProps;switch(qi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(t),null;case 1:return wt(t.type)&&Wl(),it(t),null;case 3:return r=t.stateNode,Dr(),Me(xt),Me(ut),lc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(dl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vt!==null&&(pi(Vt),Vt=null))),li(e,t),it(t),null;case 5:sc(t);var s=tr(zs.current);if(n=t.type,e!==null&&t.stateNode!=null)Mp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Y(166));return it(t),null}if(e=tr(rn.current),dl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Xt]=t,r[Rs]=o,e=(t.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(s=0;s<as.length;s++)$e(as[s],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":Xc(r,o),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},$e("invalid",r);break;case"textarea":Zc(r,o),$e("invalid",r)}Ia(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var i=o[a];a==="children"?typeof i=="string"?r.textContent!==i&&(o.suppressHydrationWarning!==!0&&ul(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&ul(r.textContent,i,e),s=["children",""+i]):js.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&$e("scroll",r)}switch(n){case"input":nl(r),Jc(r,o,!0);break;case"textarea":nl(r),eu(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Bl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ff(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Xt]=t,e[Rs]=r,$p(e,t,!1,!1),t.stateNode=e;e:{switch(a=za(n,r),n){case"dialog":$e("cancel",e),$e("close",e),s=r;break;case"iframe":case"object":case"embed":$e("load",e),s=r;break;case"video":case"audio":for(s=0;s<as.length;s++)$e(as[s],e);s=r;break;case"source":$e("error",e),s=r;break;case"img":case"image":case"link":$e("error",e),$e("load",e),s=r;break;case"details":$e("toggle",e),s=r;break;case"input":Xc(e,r),s=Ea(e,r),$e("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=He({},r,{value:void 0}),$e("invalid",e);break;case"textarea":Zc(e,r),s=_a(e,r),$e("invalid",e);break;default:s=r}Ia(n,s),i=s;for(o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="style"?hf(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&pf(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ss(e,c):typeof c=="number"&&Ss(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(js.hasOwnProperty(o)?c!=null&&o==="onScroll"&&$e("scroll",e):c!=null&&Ai(e,o,c,a))}switch(n){case"input":nl(e),Jc(e,r,!1);break;case"textarea":nl(e),eu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Wn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Lr(e,!!r.multiple,o,!1):r.defaultValue!=null&&Lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Bl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return it(t),null;case 6:if(e&&t.stateNode!=null)Op(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Y(166));if(n=tr(zs.current),tr(rn.current),dl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Xt]=t,(o=r.nodeValue!==n)&&(e=Et,e!==null))switch(e.tag){case 3:ul(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ul(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xt]=t,t.stateNode=r}return it(t),null;case 13:if(Me(Be),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Fe&&bt!==null&&t.mode&1&&!(t.flags&128))np(),Or(),t.flags|=98560,o=!1;else if(o=dl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Y(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[Xt]=t}else Or(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;it(t),o=!1}else Vt!==null&&(pi(Vt),Vt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Be.current&1?Xe===0&&(Xe=3):yc())),t.updateQueue!==null&&(t.flags|=4),it(t),null);case 4:return Dr(),li(e,t),e===null&&Ps(t.stateNode.containerInfo),it(t),null;case 10:return ec(t.type._context),it(t),null;case 17:return wt(t.type)&&Wl(),it(t),null;case 19:if(Me(Be),o=t.memoizedState,o===null)return it(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)ts(o,!1);else{if(Xe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=ql(e),a!==null){for(t.flags|=128,ts(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ze(Be,Be.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ke()>Br&&(t.flags|=128,r=!0,ts(o,!1),t.lanes=4194304)}else{if(!r)if(e=ql(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ts(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Fe)return it(t),null}else 2*Ke()-o.renderingStartTime>Br&&n!==1073741824&&(t.flags|=128,r=!0,ts(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ke(),t.sibling=null,n=Be.current,ze(Be,r?n&1|2:n&1),t):(it(t),null);case 22:case 23:return gc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?kt&1073741824&&(it(t),t.subtreeFlags&6&&(t.flags|=8192)):it(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function fy(e,t){switch(qi(t),t.tag){case 1:return wt(t.type)&&Wl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Dr(),Me(xt),Me(ut),lc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return sc(t),null;case 13:if(Me(Be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));Or()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Me(Be),null;case 4:return Dr(),null;case 10:return ec(t.type._context),null;case 22:case 23:return gc(),null;case 24:return null;default:return null}}var ml=!1,ct=!1,py=typeof WeakSet=="function"?WeakSet:Set,ae=null;function br(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(e,t,r)}else n.current=null}function oi(e,t,n){try{n()}catch(r){Ge(e,t,r)}}var Wu=!1;function my(e,t){if(Wa=Fl,e=Wf(),Qi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,i=-1,c=-1,d=0,y=0,h=e,g=null;t:for(;;){for(var v;h!==n||s!==0&&h.nodeType!==3||(i=a+s),h!==o||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(v=h.firstChild)!==null;)g=h,h=v;for(;;){if(h===e)break t;if(g===n&&++d===s&&(i=a),g===o&&++y===r&&(c=a),(v=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=v}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Va={focusedElem:e,selectionRange:n},Fl=!1,ae=t;ae!==null;)if(t=ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ae=e;else for(;ae!==null;){t=ae;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var N=w.memoizedProps,S=w.memoizedState,m=t.stateNode,f=m.getSnapshotBeforeUpdate(t.elementType===t.type?N:Bt(t.type,N),S);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(j){Ge(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,ae=e;break}ae=t.return}return w=Wu,Wu=!1,w}function gs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&oi(t,n,o)}s=s.next}while(s!==r)}}function No(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ai(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Fp(e){var t=e.alternate;t!==null&&(e.alternate=null,Fp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xt],delete t[Rs],delete t[Ka],delete t[qg],delete t[Xg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Dp(e){return e.tag===5||e.tag===3||e.tag===4}function Vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ii(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bl));else if(r!==4&&(e=e.child,e!==null))for(ii(e,t,n),e=e.sibling;e!==null;)ii(e,t,n),e=e.sibling}function ci(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ci(e,t,n),e=e.sibling;e!==null;)ci(e,t,n),e=e.sibling}var st=null,Wt=!1;function Cn(e,t,n){for(n=n.child;n!==null;)Up(e,t,n),n=n.sibling}function Up(e,t,n){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(ho,n)}catch{}switch(n.tag){case 5:ct||br(n,t);case 6:var r=st,s=Wt;st=null,Cn(e,t,n),st=r,Wt=s,st!==null&&(Wt?(e=st,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(Wt?(e=st,n=n.stateNode,e.nodeType===8?ra(e.parentNode,n):e.nodeType===1&&ra(e,n),bs(e)):ra(st,n.stateNode));break;case 4:r=st,s=Wt,st=n.stateNode.containerInfo,Wt=!0,Cn(e,t,n),st=r,Wt=s;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&oi(n,t,a),s=s.next}while(s!==r)}Cn(e,t,n);break;case 1:if(!ct&&(br(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Ge(n,t,i)}Cn(e,t,n);break;case 21:Cn(e,t,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,Cn(e,t,n),ct=r):Cn(e,t,n);break;default:Cn(e,t,n)}}function Hu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new py),t.forEach(function(r){var s=Ny.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Dt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:st=i.stateNode,Wt=!1;break e;case 3:st=i.stateNode.containerInfo,Wt=!0;break e;case 4:st=i.stateNode.containerInfo,Wt=!0;break e}i=i.return}if(st===null)throw Error(Y(160));Up(o,a,s),st=null,Wt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ge(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Bp(t,e),t=t.sibling}function Bp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Dt(t,e),Yt(e),r&4){try{gs(3,e,e.return),No(3,e)}catch(N){Ge(e,e.return,N)}try{gs(5,e,e.return)}catch(N){Ge(e,e.return,N)}}break;case 1:Dt(t,e),Yt(e),r&512&&n!==null&&br(n,n.return);break;case 5:if(Dt(t,e),Yt(e),r&512&&n!==null&&br(n,n.return),e.flags&32){var s=e.stateNode;try{Ss(s,"")}catch(N){Ge(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&uf(s,o),za(i,a);var d=za(i,o);for(a=0;a<c.length;a+=2){var y=c[a],h=c[a+1];y==="style"?hf(s,h):y==="dangerouslySetInnerHTML"?pf(s,h):y==="children"?Ss(s,h):Ai(s,y,h,d)}switch(i){case"input":La(s,o);break;case"textarea":df(s,o);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?Lr(s,!!o.multiple,v,!1):g!==!!o.multiple&&(o.defaultValue!=null?Lr(s,!!o.multiple,o.defaultValue,!0):Lr(s,!!o.multiple,o.multiple?[]:"",!1))}s[Rs]=o}catch(N){Ge(e,e.return,N)}}break;case 6:if(Dt(t,e),Yt(e),r&4){if(e.stateNode===null)throw Error(Y(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(N){Ge(e,e.return,N)}}break;case 3:if(Dt(t,e),Yt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bs(t.containerInfo)}catch(N){Ge(e,e.return,N)}break;case 4:Dt(t,e),Yt(e);break;case 13:Dt(t,e),Yt(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(mc=Ke())),r&4&&Hu(e);break;case 22:if(y=n!==null&&n.memoizedState!==null,e.mode&1?(ct=(d=ct)||y,Dt(t,e),ct=d):Dt(t,e),Yt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!y&&e.mode&1)for(ae=e,y=e.child;y!==null;){for(h=ae=y;ae!==null;){switch(g=ae,v=g.child,g.tag){case 0:case 11:case 14:case 15:gs(4,g,g.return);break;case 1:br(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(N){Ge(r,n,N)}}break;case 5:br(g,g.return);break;case 22:if(g.memoizedState!==null){Ku(h);continue}}v!==null?(v.return=g,ae=v):Ku(h)}y=y.sibling}e:for(y=null,h=e;;){if(h.tag===5){if(y===null){y=h;try{s=h.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=mf("display",a))}catch(N){Ge(e,e.return,N)}}}else if(h.tag===6){if(y===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(N){Ge(e,e.return,N)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;y===h&&(y=null),h=h.return}y===h&&(y=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dt(t,e),Yt(e),r&4&&Hu(e);break;case 21:break;default:Dt(t,e),Yt(e)}}function Yt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Dp(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ss(s,""),r.flags&=-33);var o=Vu(e);ci(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Vu(e);ii(e,i,a);break;default:throw Error(Y(161))}}catch(c){Ge(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hy(e,t,n){ae=e,Wp(e)}function Wp(e,t,n){for(var r=(e.mode&1)!==0;ae!==null;){var s=ae,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ml;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||ct;i=ml;var d=ct;if(ml=a,(ct=c)&&!d)for(ae=s;ae!==null;)a=ae,c=a.child,a.tag===22&&a.memoizedState!==null?Qu(s):c!==null?(c.return=a,ae=c):Qu(s);for(;o!==null;)ae=o,Wp(o),o=o.sibling;ae=s,ml=i,ct=d}Gu(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ae=o):Gu(e)}}function Gu(e){for(;ae!==null;){var t=ae;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ct||No(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ct)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Bt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&_u(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}_u(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var y=d.memoizedState;if(y!==null){var h=y.dehydrated;h!==null&&bs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}ct||t.flags&512&&ai(t)}catch(g){Ge(t,t.return,g)}}if(t===e){ae=null;break}if(n=t.sibling,n!==null){n.return=t.return,ae=n;break}ae=t.return}}function Ku(e){for(;ae!==null;){var t=ae;if(t===e){ae=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ae=n;break}ae=t.return}}function Qu(e){for(;ae!==null;){var t=ae;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{No(4,t)}catch(c){Ge(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ge(t,s,c)}}var o=t.return;try{ai(t)}catch(c){Ge(t,o,c)}break;case 5:var a=t.return;try{ai(t)}catch(c){Ge(t,a,c)}}}catch(c){Ge(t,t.return,c)}if(t===e){ae=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ae=i;break}ae=t.return}}var gy=Math.ceil,Zl=wn.ReactCurrentDispatcher,fc=wn.ReactCurrentOwner,$t=wn.ReactCurrentBatchConfig,Ce=0,tt=null,Qe=null,lt=0,kt=0,Er=Kn(0),Xe=0,Ms=null,ar=0,ko=0,pc=0,ys=null,yt=null,mc=0,Br=1/0,on=null,eo=!1,ui=null,On=null,hl=!1,Rn=null,to=0,vs=0,di=null,Pl=-1,_l=0;function ft(){return Ce&6?Ke():Pl!==-1?Pl:Pl=Ke()}function Fn(e){return e.mode&1?Ce&2&&lt!==0?lt&-lt:Zg.transition!==null?(_l===0&&(_l=Ef()),_l):(e=_e,e!==0||(e=window.event,e=e===void 0?16:Tf(e.type)),e):1}function Gt(e,t,n,r){if(50<vs)throw vs=0,di=null,Error(Y(185));Us(e,n,r),(!(Ce&2)||e!==tt)&&(e===tt&&(!(Ce&2)&&(ko|=n),Xe===4&&Pn(e,lt)),jt(e,r),n===1&&Ce===0&&!(t.mode&1)&&(Br=Ke()+500,wo&&Qn()))}function jt(e,t){var n=e.callbackNode;Zh(e,t);var r=Ol(e,e===tt?lt:0);if(r===0)n!==null&&ru(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ru(n),t===1)e.tag===0?Jg(Yu.bind(null,e)):Zf(Yu.bind(null,e)),Qg(function(){!(Ce&6)&&Qn()}),n=null;else{switch(Lf(r)){case 1:n=Di;break;case 4:n=Cf;break;case 16:n=Ml;break;case 536870912:n=bf;break;default:n=Ml}n=Xp(n,Vp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Vp(e,t){if(Pl=-1,_l=0,Ce&6)throw Error(Y(327));var n=e.callbackNode;if(zr()&&e.callbackNode!==n)return null;var r=Ol(e,e===tt?lt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=no(e,r);else{t=r;var s=Ce;Ce|=2;var o=Gp();(tt!==e||lt!==t)&&(on=null,Br=Ke()+500,nr(e,t));do try{xy();break}catch(i){Hp(e,i)}while(!0);Zi(),Zl.current=o,Ce=s,Qe!==null?t=0:(tt=null,lt=0,t=Xe)}if(t!==0){if(t===2&&(s=Oa(e),s!==0&&(r=s,t=fi(e,s))),t===1)throw n=Ms,nr(e,0),Pn(e,r),jt(e,Ke()),n;if(t===6)Pn(e,r);else{if(s=e.current.alternate,!(r&30)&&!yy(s)&&(t=no(e,r),t===2&&(o=Oa(e),o!==0&&(r=o,t=fi(e,o))),t===1))throw n=Ms,nr(e,0),Pn(e,r),jt(e,Ke()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Y(345));case 2:Xn(e,yt,on);break;case 3:if(Pn(e,r),(r&130023424)===r&&(t=mc+500-Ke(),10<t)){if(Ol(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){ft(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ga(Xn.bind(null,e,yt,on),t);break}Xn(e,yt,on);break;case 4:if(Pn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Ht(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gy(r/1960))-r,10<r){e.timeoutHandle=Ga(Xn.bind(null,e,yt,on),r);break}Xn(e,yt,on);break;case 5:Xn(e,yt,on);break;default:throw Error(Y(329))}}}return jt(e,Ke()),e.callbackNode===n?Vp.bind(null,e):null}function fi(e,t){var n=ys;return e.current.memoizedState.isDehydrated&&(nr(e,t).flags|=256),e=no(e,t),e!==2&&(t=yt,yt=n,t!==null&&pi(t)),e}function pi(e){yt===null?yt=e:yt.push.apply(yt,e)}function yy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Kt(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pn(e,t){for(t&=~pc,t&=~ko,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),r=1<<n;e[n]=-1,t&=~r}}function Yu(e){if(Ce&6)throw Error(Y(327));zr();var t=Ol(e,0);if(!(t&1))return jt(e,Ke()),null;var n=no(e,t);if(e.tag!==0&&n===2){var r=Oa(e);r!==0&&(t=r,n=fi(e,r))}if(n===1)throw n=Ms,nr(e,0),Pn(e,t),jt(e,Ke()),n;if(n===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xn(e,yt,on),jt(e,Ke()),null}function hc(e,t){var n=Ce;Ce|=1;try{return e(t)}finally{Ce=n,Ce===0&&(Br=Ke()+500,wo&&Qn())}}function ir(e){Rn!==null&&Rn.tag===0&&!(Ce&6)&&zr();var t=Ce;Ce|=1;var n=$t.transition,r=_e;try{if($t.transition=null,_e=1,e)return e()}finally{_e=r,$t.transition=n,Ce=t,!(Ce&6)&&Qn()}}function gc(){kt=Er.current,Me(Er)}function nr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Kg(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(qi(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wl();break;case 3:Dr(),Me(xt),Me(ut),lc();break;case 5:sc(r);break;case 4:Dr();break;case 13:Me(Be);break;case 19:Me(Be);break;case 10:ec(r.type._context);break;case 22:case 23:gc()}n=n.return}if(tt=e,Qe=e=Dn(e.current,null),lt=kt=t,Xe=0,Ms=null,pc=ko=ar=0,yt=ys=null,er!==null){for(t=0;t<er.length;t++)if(n=er[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}er=null}return e}function Hp(e,t){do{var n=Qe;try{if(Zi(),bl.current=Jl,Xl){for(var r=We.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xl=!1}if(or=0,et=qe=We=null,hs=!1,Ts=0,fc.current=null,n===null||n.return===null){Xe=1,Ms=t,Qe=null;break}e:{var o=e,a=n.return,i=n,c=t;if(t=lt,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,y=i,h=y.tag;if(!(y.mode&1)&&(h===0||h===11||h===15)){var g=y.alternate;g?(y.updateQueue=g.updateQueue,y.memoizedState=g.memoizedState,y.lanes=g.lanes):(y.updateQueue=null,y.memoizedState=null)}var v=$u(a);if(v!==null){v.flags&=-257,Mu(v,a,i,o,t),v.mode&1&&Au(o,d,t),t=v,c=d;var w=t.updateQueue;if(w===null){var N=new Set;N.add(c),t.updateQueue=N}else w.add(c);break e}else{if(!(t&1)){Au(o,d,t),yc();break e}c=Error(Y(426))}}else if(Fe&&i.mode&1){var S=$u(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Mu(S,a,i,o,t),Xi(Ur(c,i));break e}}o=c=Ur(c,i),Xe!==4&&(Xe=2),ys===null?ys=[o]:ys.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=Lp(o,c,t);Pu(o,m);break e;case 1:i=c;var f=o.type,p=o.stateNode;if(!(o.flags&128)&&(typeof f.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(On===null||!On.has(p)))){o.flags|=65536,t&=-t,o.lanes|=t;var j=Pp(o,i,t);Pu(o,j);break e}}o=o.return}while(o!==null)}Qp(n)}catch(b){t=b,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function Gp(){var e=Zl.current;return Zl.current=Jl,e===null?Jl:e}function yc(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),tt===null||!(ar&268435455)&&!(ko&268435455)||Pn(tt,lt)}function no(e,t){var n=Ce;Ce|=2;var r=Gp();(tt!==e||lt!==t)&&(on=null,nr(e,t));do try{vy();break}catch(s){Hp(e,s)}while(!0);if(Zi(),Ce=n,Zl.current=r,Qe!==null)throw Error(Y(261));return tt=null,lt=0,Xe}function vy(){for(;Qe!==null;)Kp(Qe)}function xy(){for(;Qe!==null&&!Vh();)Kp(Qe)}function Kp(e){var t=qp(e.alternate,e,kt);e.memoizedProps=e.pendingProps,t===null?Qp(e):Qe=t,fc.current=null}function Qp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=fy(n,t),n!==null){n.flags&=32767,Qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xe=6,Qe=null;return}}else if(n=dy(n,t,kt),n!==null){Qe=n;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);Xe===0&&(Xe=5)}function Xn(e,t,n){var r=_e,s=$t.transition;try{$t.transition=null,_e=1,wy(e,t,n,r)}finally{$t.transition=s,_e=r}return null}function wy(e,t,n,r){do zr();while(Rn!==null);if(Ce&6)throw Error(Y(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(eg(e,o),e===tt&&(Qe=tt=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hl||(hl=!0,Xp(Ml,function(){return zr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=$t.transition,$t.transition=null;var a=_e;_e=1;var i=Ce;Ce|=4,fc.current=null,my(e,n),Bp(n,e),Dg(Va),Fl=!!Wa,Va=Wa=null,e.current=n,hy(n),Hh(),Ce=i,_e=a,$t.transition=o}else e.current=n;if(hl&&(hl=!1,Rn=e,to=s),o=e.pendingLanes,o===0&&(On=null),Qh(n.stateNode),jt(e,Ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(eo)throw eo=!1,e=ui,ui=null,e;return to&1&&e.tag!==0&&zr(),o=e.pendingLanes,o&1?e===di?vs++:(vs=0,di=e):vs=0,Qn(),null}function zr(){if(Rn!==null){var e=Lf(to),t=$t.transition,n=_e;try{if($t.transition=null,_e=16>e?16:e,Rn===null)var r=!1;else{if(e=Rn,Rn=null,to=0,Ce&6)throw Error(Y(331));var s=Ce;for(Ce|=4,ae=e.current;ae!==null;){var o=ae,a=o.child;if(ae.flags&16){var i=o.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(ae=d;ae!==null;){var y=ae;switch(y.tag){case 0:case 11:case 15:gs(8,y,o)}var h=y.child;if(h!==null)h.return=y,ae=h;else for(;ae!==null;){y=ae;var g=y.sibling,v=y.return;if(Fp(y),y===d){ae=null;break}if(g!==null){g.return=v,ae=g;break}ae=v}}}var w=o.alternate;if(w!==null){var N=w.child;if(N!==null){w.child=null;do{var S=N.sibling;N.sibling=null,N=S}while(N!==null)}}ae=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ae=a;else e:for(;ae!==null;){if(o=ae,o.flags&2048)switch(o.tag){case 0:case 11:case 15:gs(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,ae=m;break e}ae=o.return}}var f=e.current;for(ae=f;ae!==null;){a=ae;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,ae=p;else e:for(a=f;ae!==null;){if(i=ae,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:No(9,i)}}catch(b){Ge(i,i.return,b)}if(i===a){ae=null;break e}var j=i.sibling;if(j!==null){j.return=i.return,ae=j;break e}ae=i.return}}if(Ce=s,Qn(),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(ho,e)}catch{}r=!0}return r}finally{_e=n,$t.transition=t}}return!1}function qu(e,t,n){t=Ur(n,t),t=Lp(e,t,1),e=Mn(e,t,1),t=ft(),e!==null&&(Us(e,1,t),jt(e,t))}function Ge(e,t,n){if(e.tag===3)qu(e,e,n);else for(;t!==null;){if(t.tag===3){qu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(On===null||!On.has(r))){e=Ur(n,e),e=Pp(t,e,1),t=Mn(t,e,1),e=ft(),t!==null&&(Us(t,1,e),jt(t,e));break}}t=t.return}}function jy(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ft(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(lt&n)===n&&(Xe===4||Xe===3&&(lt&130023424)===lt&&500>Ke()-mc?nr(e,0):pc|=n),jt(e,t)}function Yp(e,t){t===0&&(e.mode&1?(t=ll,ll<<=1,!(ll&130023424)&&(ll=4194304)):t=1);var n=ft();e=vn(e,t),e!==null&&(Us(e,t,n),jt(e,n))}function Sy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Yp(e,n)}function Ny(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(t),Yp(e,n)}var qp;qp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||xt.current)vt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return vt=!1,uy(e,t,n);vt=!!(e.flags&131072)}else vt=!1,Fe&&t.flags&1048576&&ep(t,Gl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ll(e,t),e=t.pendingProps;var s=Mr(t,ut.current);Ir(t,n),s=ac(null,t,r,e,s,n);var o=ic();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,wt(r)?(o=!0,Vl(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,nc(t),s.updater=So,t.stateNode=s,s._reactInternals=t,Za(t,r,e,n),t=ni(null,t,r,!0,o,n)):(t.tag=0,Fe&&o&&Yi(t),dt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ll(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Cy(r),e=Bt(r,e),s){case 0:t=ti(null,t,r,e,n);break e;case 1:t=Du(null,t,r,e,n);break e;case 11:t=Ou(null,t,r,e,n);break e;case 14:t=Fu(null,t,r,Bt(r.type,e),n);break e}throw Error(Y(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),ti(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),Du(e,t,r,s,n);case 3:e:{if(zp(t),e===null)throw Error(Y(387));r=t.pendingProps,o=t.memoizedState,s=o.element,op(e,t),Yl(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Ur(Error(Y(423)),t),t=Uu(e,t,r,n,s);break e}else if(r!==s){s=Ur(Error(Y(424)),t),t=Uu(e,t,r,n,s);break e}else for(bt=$n(t.stateNode.containerInfo.firstChild),Et=t,Fe=!0,Vt=null,n=sp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Or(),r===s){t=xn(e,t,n);break e}dt(e,t,r,n)}t=t.child}return t;case 5:return ap(t),e===null&&qa(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,Ha(r,s)?a=null:o!==null&&Ha(r,o)&&(t.flags|=32),Ip(e,t),dt(e,t,a,n),t.child;case 6:return e===null&&qa(t),null;case 13:return Tp(e,t,n);case 4:return rc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fr(t,null,r,n):dt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),Ou(e,t,r,s,n);case 7:return dt(e,t,t.pendingProps,n),t.child;case 8:return dt(e,t,t.pendingProps.children,n),t.child;case 12:return dt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,ze(Kl,r._currentValue),r._currentValue=a,o!==null)if(Kt(o.value,a)){if(o.children===s.children&&!xt.current){t=xn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){a=o.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=mn(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var y=d.pending;y===null?c.next=c:(c.next=y.next,y.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Xa(o.return,n,t),i.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Y(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Xa(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}dt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ir(t,n),s=Mt(s),r=r(s),t.flags|=1,dt(e,t,r,n),t.child;case 14:return r=t.type,s=Bt(r,t.pendingProps),s=Bt(r.type,s),Fu(e,t,r,s,n);case 15:return _p(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Bt(r,s),Ll(e,t),t.tag=1,wt(r)?(e=!0,Vl(t)):e=!1,Ir(t,n),Ep(t,r,s),Za(t,r,s,n),ni(null,t,r,!0,e,n);case 19:return Ap(e,t,n);case 22:return Rp(e,t,n)}throw Error(Y(156,t.tag))};function Xp(e,t){return kf(e,t)}function ky(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(e,t,n,r){return new ky(e,t,n,r)}function vc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cy(e){if(typeof e=="function")return vc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Mi)return 11;if(e===Oi)return 14}return 2}function Dn(e,t){var n=e.alternate;return n===null?(n=At(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rl(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")vc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case yr:return rr(n.children,s,o,t);case $i:a=8,s|=8;break;case Na:return e=At(12,n,t,s|2),e.elementType=Na,e.lanes=o,e;case ka:return e=At(13,n,t,s),e.elementType=ka,e.lanes=o,e;case Ca:return e=At(19,n,t,s),e.elementType=Ca,e.lanes=o,e;case of:return Co(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sf:a=10;break e;case lf:a=9;break e;case Mi:a=11;break e;case Oi:a=14;break e;case bn:a=16,r=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=At(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function rr(e,t,n,r){return e=At(7,e,r,t),e.lanes=n,e}function Co(e,t,n,r){return e=At(22,e,r,t),e.elementType=of,e.lanes=n,e.stateNode={isHidden:!1},e}function da(e,t,n){return e=At(6,e,null,t),e.lanes=n,e}function fa(e,t,n){return t=At(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function by(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Go(0),this.expirationTimes=Go(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Go(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function xc(e,t,n,r,s,o,a,i,c){return e=new by(e,t,n,i,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=At(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},nc(o),e}function Ey(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Jp(e){if(!e)return Vn;e=e._reactInternals;e:{if(ur(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(wt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var n=e.type;if(wt(n))return Jf(e,n,t)}return t}function Zp(e,t,n,r,s,o,a,i,c){return e=xc(n,r,!0,e,s,o,a,i,c),e.context=Jp(null),n=e.current,r=ft(),s=Fn(n),o=mn(r,s),o.callback=t??null,Mn(n,o,s),e.current.lanes=s,Us(e,s,r),jt(e,r),e}function bo(e,t,n,r){var s=t.current,o=ft(),a=Fn(s);return n=Jp(n),t.context===null?t.context=n:t.pendingContext=n,t=mn(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Mn(s,t,a),e!==null&&(Gt(e,s,a,o),Cl(e,s,a)),a}function ro(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function wc(e,t){Xu(e,t),(e=e.alternate)&&Xu(e,t)}function Ly(){return null}var em=typeof reportError=="function"?reportError:function(e){console.error(e)};function jc(e){this._internalRoot=e}Eo.prototype.render=jc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));bo(e,t,null,null)};Eo.prototype.unmount=jc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ir(function(){bo(null,e,null,null)}),t[yn]=null}};function Eo(e){this._internalRoot=e}Eo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Rf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ln.length&&t!==0&&t<Ln[n].priority;n++);Ln.splice(n,0,e),n===0&&zf(e)}};function Sc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ju(){}function Py(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=ro(a);o.call(d)}}var a=Zp(t,r,e,0,null,!1,!1,"",Ju);return e._reactRootContainer=a,e[yn]=a.current,Ps(e.nodeType===8?e.parentNode:e),ir(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var d=ro(c);i.call(d)}}var c=xc(e,0,!1,null,null,!1,!1,"",Ju);return e._reactRootContainer=c,e[yn]=c.current,Ps(e.nodeType===8?e.parentNode:e),ir(function(){bo(t,c,n,r)}),c}function Po(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var i=s;s=function(){var c=ro(a);i.call(c)}}bo(t,a,e,s)}else a=Py(n,t,e,s,r);return ro(a)}Pf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=os(t.pendingLanes);n!==0&&(Ui(t,n|1),jt(t,Ke()),!(Ce&6)&&(Br=Ke()+500,Qn()))}break;case 13:ir(function(){var r=vn(e,1);if(r!==null){var s=ft();Gt(r,e,1,s)}}),wc(e,1)}};Bi=function(e){if(e.tag===13){var t=vn(e,134217728);if(t!==null){var n=ft();Gt(t,e,134217728,n)}wc(e,134217728)}};_f=function(e){if(e.tag===13){var t=Fn(e),n=vn(e,t);if(n!==null){var r=ft();Gt(n,e,t,r)}wc(e,t)}};Rf=function(){return _e};If=function(e,t){var n=_e;try{return _e=e,t()}finally{_e=n}};Aa=function(e,t,n){switch(t){case"input":if(La(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=xo(r);if(!s)throw Error(Y(90));cf(r),La(r,s)}}}break;case"textarea":df(e,n);break;case"select":t=n.value,t!=null&&Lr(e,!!n.multiple,t,!1)}};vf=hc;xf=ir;var _y={usingClientEntryPoint:!1,Events:[Ws,jr,xo,gf,yf,hc]},ns={findFiberByHostInstance:Zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ry={bundleType:ns.bundleType,version:ns.version,rendererPackageName:ns.rendererPackageName,rendererConfig:ns.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Sf(e),e===null?null:e.stateNode},findFiberByHostInstance:ns.findFiberByHostInstance||Ly,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gl.isDisabled&&gl.supportsFiber)try{ho=gl.inject(Ry),nn=gl}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_y;Pt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sc(t))throw Error(Y(200));return Ey(e,t,null,n)};Pt.createRoot=function(e,t){if(!Sc(e))throw Error(Y(299));var n=!1,r="",s=em;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=xc(e,1,!1,null,null,n,!1,r,s),e[yn]=t.current,Ps(e.nodeType===8?e.parentNode:e),new jc(t)};Pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=Sf(t),e=e===null?null:e.stateNode,e};Pt.flushSync=function(e){return ir(e)};Pt.hydrate=function(e,t,n){if(!Lo(t))throw Error(Y(200));return Po(null,e,t,!0,n)};Pt.hydrateRoot=function(e,t,n){if(!Sc(e))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=em;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Zp(t,null,e,1,n??null,s,!1,o,a),e[yn]=t.current,Ps(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Eo(t)};Pt.render=function(e,t,n){if(!Lo(t))throw Error(Y(200));return Po(null,e,t,!1,n)};Pt.unmountComponentAtNode=function(e){if(!Lo(e))throw Error(Y(40));return e._reactRootContainer?(ir(function(){Po(null,null,e,!1,function(){e._reactRootContainer=null,e[yn]=null})}),!0):!1};Pt.unstable_batchedUpdates=hc;Pt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Lo(n))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return Po(e,t,n,!1,r)};Pt.version="18.3.1-next-f1338f8080-20240426";function tm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tm)}catch(e){console.error(e)}}tm(),ef.exports=Pt;var Nc=ef.exports,Zu=Nc;ja.createRoot=Zu.createRoot,ja.hydrateRoot=Zu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Os(){return Os=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Os.apply(this,arguments)}var In;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(In||(In={}));const ed="popstate";function Iy(e){e===void 0&&(e={});function t(s,o){let{pathname:a="/",search:i="",hash:c=""}=dr(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),mi("",{pathname:a,search:i,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");i=d===-1?c:c.slice(0,d)}return i+"#"+(typeof o=="string"?o:so(o))}function r(s,o){kc(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return Ty(t,n,r,e)}function Ve(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function kc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zy(){return Math.random().toString(36).substr(2,8)}function td(e,t){return{usr:e.state,key:e.key,idx:t}}function mi(e,t,n,r){return n===void 0&&(n=null),Os({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?dr(t):t,{state:n,key:t&&t.key||r||zy()})}function so(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function dr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Ty(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,i=In.Pop,c=null,d=y();d==null&&(d=0,a.replaceState(Os({},a.state,{idx:d}),""));function y(){return(a.state||{idx:null}).idx}function h(){i=In.Pop;let S=y(),m=S==null?null:S-d;d=S,c&&c({action:i,location:N.location,delta:m})}function g(S,m){i=In.Push;let f=mi(N.location,S,m);n&&n(f,S),d=y()+1;let p=td(f,d),j=N.createHref(f);try{a.pushState(p,"",j)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;s.location.assign(j)}o&&c&&c({action:i,location:N.location,delta:1})}function v(S,m){i=In.Replace;let f=mi(N.location,S,m);n&&n(f,S),d=y();let p=td(f,d),j=N.createHref(f);a.replaceState(p,"",j),o&&c&&c({action:i,location:N.location,delta:0})}function w(S){let m=s.location.origin!=="null"?s.location.origin:s.location.href,f=typeof S=="string"?S:so(S);return f=f.replace(/ $/,"%20"),Ve(m,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,m)}let N={get action(){return i},get location(){return e(s,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(ed,h),c=S,()=>{s.removeEventListener(ed,h),c=null}},createHref(S){return t(s,S)},createURL:w,encodeLocation(S){let m=w(S);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:g,replace:v,go(S){return a.go(S)}};return N}var nd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(nd||(nd={}));function Ay(e,t,n){return n===void 0&&(n="/"),$y(e,t,n)}function $y(e,t,n,r){let s=typeof t=="string"?dr(t):t,o=Wr(s.pathname||"/",n);if(o==null)return null;let a=nm(e);My(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let d=Qy(o);i=Gy(a[c],d)}return i}function nm(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,i)=>{let c={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(Ve(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Un([r,c.relativePath]),y=n.concat(c);o.children&&o.children.length>0&&(Ve(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),nm(o.children,t,y,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:Vy(d,o.index),routesMeta:y})};return e.forEach((o,a)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))s(o,a);else for(let c of rm(o.path))s(o,a,c)}),t}function rm(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=rm(r.join("/")),i=[];return i.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function My(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Hy(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Oy=/^:[\w-]+$/,Fy=3,Dy=2,Uy=1,By=10,Wy=-2,rd=e=>e==="*";function Vy(e,t){let n=e.split("/"),r=n.length;return n.some(rd)&&(r+=Wy),t&&(r+=Dy),n.filter(s=>!rd(s)).reduce((s,o)=>s+(Oy.test(o)?Fy:o===""?Uy:By),r)}function Hy(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Gy(e,t,n){let{routesMeta:r}=e,s={},o="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],d=i===r.length-1,y=o==="/"?t:t.slice(o.length)||"/",h=hi({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},y),g=c.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Un([o,h.pathname]),pathnameBase:Jy(Un([o,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(o=Un([o,h.pathnameBase]))}return a}function hi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Ky(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((d,y,h)=>{let{paramName:g,isOptional:v}=y;if(g==="*"){let N=i[h]||"";a=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const w=i[h];return v&&!w?d[g]=void 0:d[g]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:e}}function Ky(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),kc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Qy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return kc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Wr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Yy(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?dr(e):e;return{pathname:n?n.startsWith("/")?n:qy(n,t):t,search:Zy(r),hash:ev(s)}}function qy(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function pa(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xy(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Cc(e,t){let n=Xy(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function bc(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=dr(e):(s=Os({},e),Ve(!s.pathname||!s.pathname.includes("?"),pa("?","pathname","search",s)),Ve(!s.pathname||!s.pathname.includes("#"),pa("#","pathname","hash",s)),Ve(!s.search||!s.search.includes("#"),pa("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,i;if(a==null)i=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),h-=1;s.pathname=g.join("/")}i=h>=0?t[h]:"/"}let c=Yy(s,i),d=a&&a!=="/"&&a.endsWith("/"),y=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||y)&&(c.pathname+="/"),c}const Un=e=>e.join("/").replace(/\/\/+/g,"/"),Jy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Zy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ev=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function tv(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const sm=["post","put","patch","delete"];new Set(sm);const nv=["get",...sm];new Set(nv);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fs(){return Fs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fs.apply(this,arguments)}const _o=u.createContext(null),lm=u.createContext(null),jn=u.createContext(null),Ro=u.createContext(null),Sn=u.createContext({outlet:null,matches:[],isDataRoute:!1}),om=u.createContext(null);function rv(e,t){let{relative:n}=t===void 0?{}:t;Kr()||Ve(!1);let{basename:r,navigator:s}=u.useContext(jn),{hash:o,pathname:a,search:i}=Io(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:Un([r,a])),s.createHref({pathname:c,search:i,hash:o})}function Kr(){return u.useContext(Ro)!=null}function Rt(){return Kr()||Ve(!1),u.useContext(Ro).location}function am(e){u.useContext(jn).static||u.useLayoutEffect(e)}function ln(){let{isDataRoute:e}=u.useContext(Sn);return e?vv():sv()}function sv(){Kr()||Ve(!1);let e=u.useContext(_o),{basename:t,future:n,navigator:r}=u.useContext(jn),{matches:s}=u.useContext(Sn),{pathname:o}=Rt(),a=JSON.stringify(Cc(s,n.v7_relativeSplatPath)),i=u.useRef(!1);return am(()=>{i.current=!0}),u.useCallback(function(d,y){if(y===void 0&&(y={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let h=bc(d,JSON.parse(a),o,y.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Un([t,h.pathname])),(y.replace?r.replace:r.push)(h,y.state,y)},[t,r,a,o,e])}const lv=u.createContext(null);function ov(e){let t=u.useContext(Sn).outlet;return t&&u.createElement(lv.Provider,{value:e},t)}function Io(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=u.useContext(jn),{matches:s}=u.useContext(Sn),{pathname:o}=Rt(),a=JSON.stringify(Cc(s,r.v7_relativeSplatPath));return u.useMemo(()=>bc(e,JSON.parse(a),o,n==="path"),[e,a,o,n])}function av(e,t){return iv(e,t)}function iv(e,t,n,r){Kr()||Ve(!1);let{navigator:s}=u.useContext(jn),{matches:o}=u.useContext(Sn),a=o[o.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Rt(),y;if(t){var h;let S=typeof t=="string"?dr(t):t;c==="/"||(h=S.pathname)!=null&&h.startsWith(c)||Ve(!1),y=S}else y=d;let g=y.pathname||"/",v=g;if(c!=="/"){let S=c.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=Ay(e,{pathname:v}),N=pv(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},i,S.params),pathname:Un([c,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Un([c,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,n,r);return t&&N?u.createElement(Ro.Provider,{value:{location:Fs({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:In.Pop}},N):N}function cv(){let e=yv(),t=tv(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const uv=u.createElement(cv,null);class dv extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(Sn.Provider,{value:this.props.routeContext},u.createElement(om.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fv(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(_o);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(Sn.Provider,{value:t},r)}function pv(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let y=a.findIndex(h=>h.route.id&&(i==null?void 0:i[h.route.id])!==void 0);y>=0||Ve(!1),a=a.slice(0,Math.min(a.length,y+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let y=0;y<a.length;y++){let h=a[y];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=y),h.route.id){let{loaderData:g,errors:v}=n,w=h.route.loader&&g[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||w){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((y,h,g)=>{let v,w=!1,N=null,S=null;n&&(v=i&&h.route.id?i[h.route.id]:void 0,N=h.route.errorElement||uv,c&&(d<0&&g===0?(xv("route-fallback"),w=!0,S=null):d===g&&(w=!0,S=h.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,g+1)),f=()=>{let p;return v?p=N:w?p=S:h.route.Component?p=u.createElement(h.route.Component,null):h.route.element?p=h.route.element:p=y,u.createElement(fv,{match:h,routeContext:{outlet:y,matches:m,isDataRoute:n!=null},children:p})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?u.createElement(dv,{location:n.location,revalidation:n.revalidation,component:N,error:v,children:f(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):f()},null)}var im=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(im||{}),cm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(cm||{});function mv(e){let t=u.useContext(_o);return t||Ve(!1),t}function hv(e){let t=u.useContext(lm);return t||Ve(!1),t}function gv(e){let t=u.useContext(Sn);return t||Ve(!1),t}function um(e){let t=gv(),n=t.matches[t.matches.length-1];return n.route.id||Ve(!1),n.route.id}function yv(){var e;let t=u.useContext(om),n=hv(),r=um();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function vv(){let{router:e}=mv(im.UseNavigateStable),t=um(cm.UseNavigateStable),n=u.useRef(!1);return am(()=>{n.current=!0}),u.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Fs({fromRouteId:t},o)))},[e,t])}const sd={};function xv(e,t,n){sd[e]||(sd[e]=!0)}function wv(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function gi(e){let{to:t,replace:n,state:r,relative:s}=e;Kr()||Ve(!1);let{future:o,static:a}=u.useContext(jn),{matches:i}=u.useContext(Sn),{pathname:c}=Rt(),d=ln(),y=bc(t,Cc(i,o.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(y);return u.useEffect(()=>d(JSON.parse(h),{replace:n,state:r,relative:s}),[d,h,s,n,r]),null}function jv(e){return ov(e.context)}function Ut(e){Ve(!1)}function Sv(e){let{basename:t="/",children:n=null,location:r,navigationType:s=In.Pop,navigator:o,static:a=!1,future:i}=e;Kr()&&Ve(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:o,static:a,future:Fs({v7_relativeSplatPath:!1},i)}),[c,i,o,a]);typeof r=="string"&&(r=dr(r));let{pathname:y="/",search:h="",hash:g="",state:v=null,key:w="default"}=r,N=u.useMemo(()=>{let S=Wr(y,c);return S==null?null:{location:{pathname:S,search:h,hash:g,state:v,key:w},navigationType:s}},[c,y,h,g,v,w,s]);return N==null?null:u.createElement(jn.Provider,{value:d},u.createElement(Ro.Provider,{children:n,value:N}))}function Nv(e){let{children:t,location:n}=e;return av(yi(t),n)}new Promise(()=>{});function yi(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let o=[...t,s];if(r.type===u.Fragment){n.push.apply(n,yi(r.props.children,o));return}r.type!==Ut&&Ve(!1),!r.props.index||!r.props.children||Ve(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=yi(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lo(){return lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lo.apply(this,arguments)}function dm(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function kv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Cv(e,t){return e.button===0&&(!t||t==="_self")&&!kv(e)}function vi(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function bv(e,t){let n=vi(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(o=>{n.append(s,o)})}),n}const Ev=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Lv=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Pv="6";try{window.__reactRouterVersion=Pv}catch{}const _v=u.createContext({isTransitioning:!1}),Rv="startTransition",ld=jh[Rv];function Iv(e){let{basename:t,children:n,future:r,window:s}=e,o=u.useRef();o.current==null&&(o.current=Iy({window:s,v5Compat:!0}));let a=o.current,[i,c]=u.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},y=u.useCallback(h=>{d&&ld?ld(()=>c(h)):c(h)},[c,d]);return u.useLayoutEffect(()=>a.listen(y),[a,y]),u.useEffect(()=>wv(r),[r]),u.createElement(Sv,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}const zv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Tv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fm=u.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:i,target:c,to:d,preventScrollReset:y,viewTransition:h}=t,g=dm(t,Ev),{basename:v}=u.useContext(jn),w,N=!1;if(typeof d=="string"&&Tv.test(d)&&(w=d,zv))try{let p=new URL(window.location.href),j=d.startsWith("//")?new URL(p.protocol+d):new URL(d),b=Wr(j.pathname,v);j.origin===p.origin&&b!=null?d=b+j.search+j.hash:N=!0}catch{}let S=rv(d,{relative:s}),m=$v(d,{replace:a,state:i,target:c,preventScrollReset:y,relative:s,viewTransition:h});function f(p){r&&r(p),p.defaultPrevented||m(p)}return u.createElement("a",lo({},g,{href:w||S,onClick:N||o?r:f,ref:n,target:c}))}),pr=u.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:o="",end:a=!1,style:i,to:c,viewTransition:d,children:y}=t,h=dm(t,Lv),g=Io(c,{relative:h.relative}),v=Rt(),w=u.useContext(lm),{navigator:N,basename:S}=u.useContext(jn),m=w!=null&&Mv(g)&&d===!0,f=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,p=v.pathname,j=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(p=p.toLowerCase(),j=j?j.toLowerCase():null,f=f.toLowerCase()),j&&S&&(j=Wr(j,S)||j);const b=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let E=p===f||!a&&p.startsWith(f)&&p.charAt(b)==="/",z=j!=null&&(j===f||!a&&j.startsWith(f)&&j.charAt(f.length)==="/"),P={isActive:E,isPending:z,isTransitioning:m},F=E?r:void 0,T;typeof o=="function"?T=o(P):T=[o,E?"active":null,z?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let V=typeof i=="function"?i(P):i;return u.createElement(fm,lo({},h,{"aria-current":F,className:T,ref:n,style:V,to:c,viewTransition:d}),typeof y=="function"?y(P):y)});var xi;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(xi||(xi={}));var od;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(od||(od={}));function Av(e){let t=u.useContext(_o);return t||Ve(!1),t}function $v(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:i}=t===void 0?{}:t,c=ln(),d=Rt(),y=Io(e,{relative:a});return u.useCallback(h=>{if(Cv(h,n)){h.preventDefault();let g=r!==void 0?r:so(d)===so(y);c(e,{replace:g,state:s,preventScrollReset:o,relative:a,viewTransition:i})}},[d,c,y,r,s,n,e,o,a,i])}function pm(e){let t=u.useRef(vi(e)),n=u.useRef(!1),r=Rt(),s=u.useMemo(()=>bv(r.search,n.current?null:t.current),[r.search]),o=ln(),a=u.useCallback((i,c)=>{const d=vi(typeof i=="function"?i(s):i);n.current=!0,o("?"+d,c)},[o,s]);return[s,a]}function Mv(e,t){t===void 0&&(t={});let n=u.useContext(_v);n==null&&Ve(!1);let{basename:r}=Av(xi.useViewTransitionState),s=Io(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Wr(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Wr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return hi(s.pathname,a)!=null||hi(s.pathname,o)!=null}function mm(){const[e,t]=u.useState(()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("cozygen_gallery_pending")==="1"}catch{return!1}});return u.useEffect(()=>{const n=()=>t(!0),r=()=>t(!1),s=o=>{o.key==="cozygen_gallery_pending"&&t(o.newValue==="1")};return window.addEventListener("cozygen:gallery-pending",n),window.addEventListener("cozygen:gallery-viewed",r),window.addEventListener("storage",s),()=>{window.removeEventListener("cozygen:gallery-pending",n),window.removeEventListener("cozygen:gallery-viewed",r),window.removeEventListener("storage",s)}},[]),e}const wi="cozygen_token",oo="cozygen:auth-expired";function Ec(){try{return typeof window>"u"?null:localStorage.getItem(wi)}catch{return null}}function hm(e){try{if(typeof window>"u")return;e?localStorage.setItem(wi,e):localStorage.removeItem(wi)}catch{}}function Il(){hm(null)}function Hs(){const e=Ec();return e?{Authorization:`Bearer ${e}`}:{}}function Ov(e={}){if(Il(),!(typeof window>"u"||typeof window.dispatchEvent!="function"))try{window.dispatchEvent(new CustomEvent(oo,{detail:e}))}catch{window.dispatchEvent(new Event(oo))}}const Gs=async(e,t)=>{if(t.status===401){Ov({url:e,status:t.status});const r=new Error("unauthorized");throw r.unauthorized=!0,r.status=401,r}if(!t.ok)throw new Error(`${e} failed`);return(t.headers.get("content-type")||"").includes("application/json")?t.json():t.text()},Nn=async(e,t={})=>{const{signal:n}=t,r=await fetch(e,{headers:{...Hs()},credentials:"include",signal:n});return Gs(e,r)},Ks=async(e,t,n={})=>{const{signal:r}=n,s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...Hs()},body:JSON.stringify(t),credentials:"include",signal:r});return Gs(e,s)};async function Fv(e={}){return Nn("/cozygen/workflows",e)}async function Dv(e,t={}){return Nn(`/cozygen/workflows/${encodeURIComponent(e)}`,t)}async function Uv(e,t={}){const{refresh:n=!1,cacheBust:r="",...s}=t||{},o=new URLSearchParams({type:String(e||"")});return n&&o.set("refresh","1"),r&&o.set("cache_bust",String(r)),Nn(`/cozygen/get_choices?${o.toString()}`,s)}async function Lc(e){const t=await fetch("/prompt",{method:"POST",headers:{"Content-Type":"application/json",...Hs()},body:JSON.stringify(e),credentials:"include"});return Gs("/prompt",t)}async function Bv(e){const t=new FormData;t.append("image",e);const n=await fetch("/cozygen/upload_image",{method:"POST",headers:{...Hs()},body:t,credentials:"include"});return Gs("/cozygen/upload_image",n)}async function gm(e="",t=1,n=50,r=!1,s=!1,o="all",a="",i={}){const{includeMeta:c=!1,...d}=i||{},y=new URLSearchParams({subfolder:e,page:String(t),per_page:String(n),show_hidden:r?"1":"0",recursive:s?"1":"0",kind:o});return c&&y.set("include_meta","1"),a&&y.set("cache_bust",String(a)),Nn(`/cozygen/api/gallery?${y.toString()}`,d)}async function Wv({filename:e="",subfolder:t=""}={},n={}){const r=new URLSearchParams({filename:String(e||""),subfolder:String(t||"")});return Nn(`/cozygen/api/gallery/prompt?${r.toString()}`,n)}async function Vv(){return Nn("/cozygen/api/aliases")}async function Hv(e){return Ks("/cozygen/api/aliases",e||{})}async function ym(e={}){return Nn("/cozygen/api/tags/categories",e)}async function ao({q:e="",category:t="",sort:n="count",limit:r=80,offset:s=0}={},o={}){const a=new URLSearchParams({q:String(e||""),category:String(t||""),sort:String(n||"count"),limit:String(r||80),offset:String(s||0)});return Nn(`/cozygen/api/tags/search?${a.toString()}`,o)}async function ma(e=[],t={}){return Ks("/cozygen/api/tags/validate",{tags:Array.isArray(e)?e:[]},t)}async function Gv(e,t={}){const n=new URLSearchParams;return e&&n.set("workflow",e),Nn(`/cozygen/api/workflow_presets?${n.toString()}`,t)}async function Kv(e,t,n={}){return Ks("/cozygen/api/workflow_presets",{workflow:e,preset:t},n)}async function Qv(e,t,n={}){return Ks("/cozygen/api/workflow_presets",{workflow:e,delete:t},n)}async function Yv(e,t){return Ks("/cozygen/api/login",{username:e,password:t})}async function qv(){return fetch("/cozygen/api/auth_status",{headers:{...Hs()},credentials:"include"}).then(e=>Gs("/cozygen/api/auth_status",e))}const Xv=30*60*1e3,ad="cozygen_idle_logout",vm=u.createContext(null);function Jv({children:e}){const[t,n]=u.useState(!1),[r,s]=u.useState(null),[o,a]=u.useState(!1),[i,c]=u.useState(null),d=u.useCallback(async()=>{if(!Ec()){s(null),a(!1),n(!0);return}try{const w=await qv();s((w==null?void 0:w.user)||null),a(!!(w!=null&&w.default_credentials))}catch{Il(),s(null),a(!1)}finally{n(!0)}},[]);u.useEffect(()=>{d()},[d]);const y=u.useCallback(async(v,w)=>{const N=await Yv(v,w);hm((N==null?void 0:N.token)||""),s((N==null?void 0:N.user)||v),a(!!(N!=null&&N.default_credentials));try{localStorage.removeItem(ad)}catch{}return N},[]),h=u.useCallback(()=>{Il(),s(null),a(!1)},[]);u.useEffect(()=>{if(typeof window>"u")return;const v=()=>{h(),n(!0)};return window.addEventListener(oo,v),()=>window.removeEventListener(oo,v)},[h]),u.useEffect(()=>{if(!t)return;const v=()=>{i&&clearTimeout(i);const N=setTimeout(()=>{Il(),s(null),a(!1);try{localStorage.setItem(ad,"1")}catch{}window.location.hash="#/login"},Xv);c(N)};v();const w=["pointerdown","keydown","visibilitychange"];return w.forEach(N=>window.addEventListener(N,v,{passive:!0})),()=>{i&&clearTimeout(i),w.forEach(N=>window.removeEventListener(N,v))}},[t,i]);const g=u.useMemo(()=>({ready:t,user:r,authed:!!r,defaultCreds:o,login:y,logout:h,refresh:d}),[t,r,o,y,h,d]);return l.jsx(vm.Provider,{value:g,children:e})}function zo(){const e=u.useContext(vm);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function Zv({children:e}){return l.jsx(Jv,{children:e})}const xm="cozygen_last_render_payload";function wm(e){if(e)try{if(typeof window>"u")return;window.localStorage.setItem(xm,JSON.stringify(e))}catch{}}function jm(){try{if(typeof window>"u")return null;const e=window.localStorage.getItem(xm);return e?JSON.parse(e):null}catch{return null}}async function Sm(){const e=jm();if(!e||!e.workflow)return{success:!1,error:"No previous render to repeat"};try{return window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!0}})),await Lc({prompt:e.workflow}),window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!1}})),{success:!0}}catch(t){return console.error("Failed to requeue prompt",t),window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!1}})),t!=null&&t.unauthorized?(window.location.hash="#/login",{success:!1,error:"Session expired"}):{success:!1,error:"Failed to queue prompt"}}}function Nm(){const e=jm();return!!(e&&e.workflow)}function To(e,t=!1){const n=()=>typeof window>"u"||!window.matchMedia?t:window.matchMedia(e).matches,[r,s]=u.useState(n);return u.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const o=window.matchMedia(e),a=()=>s(o.matches);return a(),typeof o.addEventListener=="function"?(o.addEventListener("change",a),()=>o.removeEventListener("change",a)):(o.addListener(a),()=>o.removeListener(a))},[e]),r}const km=({size:e=32,className:t=""})=>l.jsxs("svg",{width:e,height:e,viewBox:"0 0 32 32",fill:"none",className:t,"aria-hidden":"true",children:[l.jsx("path",{d:"M8 24L20 4",stroke:"url(#logo-gradient)",strokeWidth:"3",strokeLinecap:"round"}),l.jsx("path",{d:"M6 26C6 26 7 24 8 24C9 24 10 25 8 27C6 29 4 28 6 26Z",fill:"url(#logo-warm)"}),l.jsx("circle",{cx:"22",cy:"8",r:"2",fill:"url(#logo-spark)"}),l.jsx("circle",{cx:"26",cy:"12",r:"1.5",fill:"url(#logo-spark)",opacity:"0.8"}),l.jsx("circle",{cx:"24",cy:"16",r:"1",fill:"url(#logo-spark)",opacity:"0.6"}),l.jsxs("defs",{children:[l.jsxs("linearGradient",{id:"logo-gradient",x1:"8",y1:"24",x2:"20",y2:"4",gradientUnits:"userSpaceOnUse",children:[l.jsx("stop",{stopColor:"#FF9F7A"}),l.jsx("stop",{offset:"0.5",stopColor:"#9F8CFF"}),l.jsx("stop",{offset:"1",stopColor:"#44E1C5"})]}),l.jsxs("linearGradient",{id:"logo-warm",x1:"4",y1:"24",x2:"10",y2:"28",gradientUnits:"userSpaceOnUse",children:[l.jsx("stop",{stopColor:"#FF9F7A"}),l.jsx("stop",{offset:"1",stopColor:"#FFD666"})]}),l.jsxs("radialGradient",{id:"logo-spark",cx:"0.3",cy:"0.3",r:"0.7",children:[l.jsx("stop",{stopColor:"#FFFFFF"}),l.jsx("stop",{offset:"0.5",stopColor:"#44E1C5"}),l.jsx("stop",{offset:"1",stopColor:"#9F8CFF"})]})]})]}),De=({children:e,size:t=16,className:n="",...r})=>l.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,"aria-hidden":"true",...r,children:e}),ex=e=>l.jsxs(De,{...e,children:[l.jsx("path",{d:"M3 10l9-7 9 7"}),l.jsx("path",{d:"M5 10v10h14V10"}),l.jsx("path",{d:"M9 20v-6h6v6"})]}),Pc=e=>l.jsxs(De,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5",fill:"currentColor",stroke:"none"}),l.jsx("path",{d:"M21 15l-5-5L5 21"})]}),Hn=e=>l.jsxs(De,{...e,children:[l.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"}),l.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7",strokeWidth:"3"})]}),Qs=e=>l.jsxs(De,{...e,children:[l.jsx("path",{d:"M14 3H4a2 2 0 00-2 2v10l6 6h10a2 2 0 002-2V9l-6-6z"}),l.jsx("path",{d:"M14 3v6h6"}),l.jsx("path",{d:"M7 7h5"}),l.jsx("path",{d:"M7 11h7"})]}),_c=e=>l.jsx(De,{...e,children:l.jsx("path",{d:"M17 3a2.828 2.828 0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Cm=e=>l.jsx(De,{...e,children:l.jsx("polygon",{points:"5 3 19 12 5 21 5 3",fill:"currentColor",stroke:"none"})}),id=e=>l.jsxs(De,{...e,children:[l.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Rc=e=>l.jsxs(De,{...e,children:[l.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),l.jsx("line",{x1:"9",y1:"9",x2:"9",y2:"15"}),l.jsx("line",{x1:"15",y1:"9",x2:"15",y2:"15"}),l.jsx("circle",{cx:"9",cy:"12",r:"1.5",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"10",r:"1.5",fill:"currentColor",stroke:"none"})]}),tx=e=>l.jsxs(De,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("circle",{cx:"12",cy:"12",r:"4"}),l.jsx("line",{x1:"3",y1:"9",x2:"6",y2:"9"})]}),cd=e=>l.jsxs(De,{...e,children:[l.jsx("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"}),l.jsx("path",{d:"M2 10h20"})]}),ud=e=>l.jsx(De,{...e,children:l.jsx("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"})}),dd=e=>l.jsxs(De,{...e,children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),fd=e=>l.jsxs(De,{...e,children:[l.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"}),l.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),pd=e=>l.jsx(De,{...e,children:l.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),md=e=>l.jsxs(De,{...e,children:[l.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),l.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}),ji=e=>l.jsxs(De,{...e,children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 11-2.12-9.36L23 10"})]}),bm=e=>l.jsx(De,{...e,children:l.jsx("polyline",{points:"15 18 9 12 15 6"})}),Ao=e=>l.jsx(De,{...e,children:l.jsx("polyline",{points:"9 18 15 12 9 6"})}),Si=e=>l.jsxs(De,{...e,children:[l.jsx("circle",{cx:"9",cy:"6",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"6",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"9",cy:"12",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"12",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"9",cy:"18",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"18",r:"1",fill:"currentColor",stroke:"none"})]}),sn=e=>l.jsxs(De,{...e,children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),hd=e=>l.jsxs(De,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",strokeDasharray:"4 2"}),l.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]}),nx=e=>l.jsxs(De,{...e,children:[l.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),l.jsx("polyline",{points:"5 12 12 5 19 12"})]}),rx=e=>l.jsxs(De,{...e,children:[l.jsx("circle",{cx:"6",cy:"12",r:"1.6",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"12",cy:"12",r:"1.6",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"18",cy:"12",r:"1.6",fill:"currentColor",stroke:"none"})]}),sx=e=>l.jsxs(De,{...e,children:[l.jsx("rect",{x:"9",y:"9",width:"10",height:"10",rx:"2"}),l.jsx("path",{d:"M7 15H6a2 2 0 01-2-2V6a2 2 0 012-2h7"})]}),gd=[{to:"/studio",label:"Studio",Icon:ex,end:!0},{to:"/controls",label:"Controls",Icon:Rc}],lx=[{to:"/gallery",label:"Gallery",Icon:Pc},{to:"/tags",label:"Tag Library",Icon:Hn},{to:"/aliases",label:"Aliases",Icon:Qs}],rs=({isActive:e})=>["slim-nav-link btn-touch",e?"is-active":null].filter(Boolean).join(" ");function ox({isMobileAlignedNav:e=!1}){const[t,n]=u.useState(!1),{pathname:r}=Rt(),s=mm(),{logout:o,user:a}=zo(),[i,c]=u.useState(!1),d=To("(min-width: 768px)"),y=()=>n(j=>!j),h=()=>n(!1),g=r==="/login",v=d&&!e,w=!g&&v,N=v,S=!d||e;u.useEffect(()=>{const j=b=>{var z;const E=!!((z=b==null?void 0:b.detail)!=null&&z.active);c(E)};return window.addEventListener("cozygen:render-state",j),()=>window.removeEventListener("cozygen:render-state",j)},[]);const m=async()=>{if(i)return;if(r==="/controls"||r==="/compose"){try{window.dispatchEvent(new Event("cozygen:request-render"))}catch{}return}if(!Nm()){alert("No previous render found yet. Render once from Studio first.");return}c(!0);const E=await Sm();c(!1),E!=null&&E.success||alert((E==null?void 0:E.error)||"Failed to render.")},f=()=>{try{o()}catch{}window.location.hash="#/login"},p=[...gd,...lx];return l.jsxs("header",{className:"top-bar",children:[l.jsx("div",{className:"top-bar-shell",children:l.jsxs("div",{className:"brand-row",children:[l.jsxs(fm,{to:"/studio",className:"brand-mark",onClick:h,children:[l.jsx(km,{size:28,className:"brand-logo"}),l.jsx("span",{className:"brand-text",children:"CozyGen"})]}),v?l.jsx("nav",{className:"desktop-nav","aria-label":"Main navigation",children:p.map(j=>l.jsx(pr,{to:j.to,end:j.end,className:rs,children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[l.jsx(j.Icon,{size:16}),l.jsx("span",{children:j.label}),j.to==="/gallery"&&s?l.jsx("span",{className:"badge-dot","aria-hidden":"true"}):null]})},j.to))}):null,l.jsx("div",{className:"flex-1"}),w?l.jsxs("button",{type:"button",className:`desktop-render-btn ${i?"is-busy":""}`,onClick:m,title:i?"Rendering":"Render","aria-busy":i,"aria-disabled":i,disabled:i,children:[l.jsx("span",{className:"render-icon",children:i?l.jsx("span",{className:"render-spinner","aria-hidden":"true"}):l.jsx(Cm,{size:16})}),l.jsx("span",{className:"render-label",children:i?"Rendering":"Render"})]}):null,N?l.jsxs("button",{type:"button",className:"desktop-logout-btn",onClick:f,title:"Sign out",children:[l.jsx("span",{className:"logout-icon",children:l.jsx(id,{size:16})}),l.jsx("span",{className:"logout-label",children:"Logout"}),a?l.jsxs("span",{className:"logout-user",children:["@",a]}):null]}):null,S?l.jsx("button",{type:"button",className:`mobile-menu-toggle btn-touch ${t?"is-active":""}`,onClick:y,"aria-expanded":t,"aria-controls":"cozygen-mobile-nav","aria-label":t?"Close menu":"Open menu",children:l.jsx("span",{className:"mobile-menu-icon",children:l.jsx("span",{})})}):null]})}),S?l.jsxs("div",{id:"cozygen-mobile-nav",className:`mobile-nav-drawer ${t?"is-open":""}`,role:"menu",children:[l.jsx("div",{className:"mobile-nav-section",children:gd.map(j=>l.jsx(pr,{to:j.to,end:j.end,className:rs,onClick:h,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(j.Icon,{size:16}),l.jsx("span",{children:j.label})]})},j.to))}),l.jsxs("div",{className:"mobile-nav-section secondary",children:[l.jsx(pr,{to:"/gallery",className:rs,onClick:h,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Pc,{size:16}),l.jsx("span",{children:"Gallery"}),s?l.jsx("span",{className:"badge-dot","aria-hidden":"true"}):null]})}),l.jsx(pr,{to:"/tags",className:rs,onClick:h,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Hn,{size:16}),l.jsx("span",{children:"Tag Library"})]})}),l.jsx(pr,{to:"/aliases",className:rs,onClick:h,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Qs,{size:16}),l.jsx("span",{children:"Aliases"})]})}),l.jsx("button",{type:"button",className:"slim-nav-link btn-touch text-left",onClick:()=>{h(),f()},role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(id,{size:16}),l.jsx("span",{children:"Logout"}),a?l.jsxs("span",{className:"text-[rgba(159,178,215,0.75)] text-xs",children:["@",a]}):null]})})]})]}):null]})}const yd=[{to:"/controls",label:"Controls",Icon:Rc},{to:"/compose",label:"Compose",Icon:_c},{to:"/gallery",label:"Gallery",Icon:Pc}],ax=[{to:"/aliases",label:"Aliases",Icon:Qs},{to:"/tags",label:"Tags",Icon:Hn}],ix=({isActive:e})=>["bottom-nav-link",e?"is-active":""].filter(Boolean).join(" ");function cx(){const e=Rt(),t=ln(),n=mm(),[r,s]=It.useState(!1),[o,a]=It.useState(!1),[i,c]=It.useState(!1),[d,y]=It.useState({}),h=To("(min-width: 768px)"),g=It.useRef(null),v=It.useRef(null),w=e.pathname==="/controls",N=e.pathname==="/compose",S=async()=>{if(!(typeof window>"u")&&!o)if(s(!0),setTimeout(()=>s(!1),400),w||N)try{window.dispatchEvent(new CustomEvent("cozygen:request-render"))}catch{}else{if(!Nm())return;const f=await Sm();f.success||console.warn("Requeue failed:",f.error)}};It.useEffect(()=>{const f=p=>{var b;const j=!!((b=p==null?void 0:p.detail)!=null&&b.active);a(j),j&&(s(!0),setTimeout(()=>s(!1),400))};return window.addEventListener("cozygen:render-state",f),()=>window.removeEventListener("cozygen:render-state",f)},[]),It.useEffect(()=>{if(!i||h)return;const f=p=>{g.current&&g.current.contains(p.target)||v.current&&v.current.contains(p.target)||c(!1)};return window.addEventListener("pointerdown",f),()=>window.removeEventListener("pointerdown",f)},[i,h]),It.useEffect(()=>{if(!i||h||!v.current)return;const f=v.current.getBoundingClientRect(),p=f.left+f.width/2,j=window.innerHeight-f.top+8;y({left:`${Math.min(window.innerWidth-80,Math.max(40,p))}px`,bottom:`${j}px`,top:"auto"})},[i,h]),It.useEffect(()=>{h&&c(!1)},[h]);const m=h?[...yd,...ax]:yd;return l.jsxs(l.Fragment,{children:[l.jsxs("nav",{className:"bottom-nav","aria-label":"Bottom navigation",children:[m.map(f=>l.jsxs(pr,{to:f.to,end:f.end,className:ix,children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(f.Icon,{size:20})}),l.jsxs("span",{className:"bottom-nav-label",children:[f.label,f.to==="/gallery"&&n?l.jsx("span",{className:"badge-dot pulse","aria-hidden":"true"}):null]})]},f.to)),h?null:l.jsxs("button",{ref:v,type:"button",className:"bottom-nav-link",onClick:()=>c(f=>!f),"aria-expanded":i,"aria-label":"Open library",children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(Hn,{size:20})}),l.jsx("span",{className:"bottom-nav-label",children:"Library"})]},"library"),l.jsxs("button",{type:"button",className:`bottom-nav-link is-action ${r?"is-flash":""} ${o?"is-rendering":""}`,onClick:S,"aria-label":"Render","aria-busy":o,"aria-disabled":o,disabled:o,children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(Cm,{size:20})}),l.jsx("span",{className:"bottom-nav-label",children:"Render"})]},"render")]}),h?null:l.jsxs("div",{ref:g,className:`library-popover ${i?"is-open":""}`,style:d,children:[l.jsxs("button",{type:"button",className:"library-popover-btn",onClick:()=>{c(!1),t("/aliases")},children:[l.jsx(Qs,{size:18}),l.jsx("span",{children:"Aliases"})]}),l.jsxs("button",{type:"button",className:"library-popover-btn",onClick:()=>{c(!1),t("/tags")},children:[l.jsx(Hn,{size:18}),l.jsx("span",{children:"Tags"})]})]})]})}function ux(e,t){if(!t||t<=0)return null;const n=Number(e)||0,r=Number(t)||0,s=Math.round(n/r*100);return Number.isFinite(s)?Math.max(0,Math.min(100,s)):null}function dx({busy:e=!1,progressValue:t=0,progressMax:n=0,statusText:r="Idle",statusPhase:s="idle",primaryLabel:o="Render",onPrimary:a,primaryDisabled:i=!1,onLogs:c,logsLabel:d="Logs"}){const y=ux(t,n),h=s==="queued"?"rgba(255, 143, 112, 0.95)":s==="running"?"rgba(68, 225, 197, 0.95)":s==="finished"?"rgba(92, 255, 154, 0.95)":s==="error"?"rgba(255, 143, 112, 0.95)":"rgba(159, 178, 215, 0.55)",v={idle:"Idle",queued:"Queued",running:"Running",finished:"Finished",error:"Error"}[s]||"Status",w=e||i;return l.jsxs("div",{className:"dock-bar-inner",children:[l.jsx("button",{type:"button",onClick:a,disabled:w,className:"dock-primary-btn",children:e?"Rendering":o}),l.jsxs("div",{className:"dock-status-row",children:[l.jsxs("span",{className:"dock-status-left",children:[l.jsx("span",{className:"dock-status-dot",style:{background:h}}),l.jsx("span",{className:"dock-status-label",children:v})]}),l.jsxs("span",{className:"dock-status-right",children:[y!=null&&e?l.jsxs("span",{className:"dock-progress",children:[l.jsx("span",{className:"dock-progress-bar","aria-hidden":"true",children:l.jsx("span",{className:"dock-progress-fill",style:{width:`${y}%`}})}),l.jsxs("span",{children:[y,"%"]})]}):null,l.jsx("span",{className:"dock-status-text",children:r||(e?"Working":"Idle")}),c?l.jsx("button",{type:"button",className:"dock-logs-btn",onClick:c,children:d}):null]})]})]})}const Em="jpg,jpeg,png,webp,gif,bmp,tif,tiff",Ic=(e="")=>/\.(png|jpe?g|gif|webp|bmp|tif?f)$/i.test(e),Lm=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e);async function ha({subfolder:e="",page:t=1,perPage:n=50,exts:r=Em}={}){const s=new URLSearchParams({subfolder:e,page:String(t),per_page:String(n),exts:r}),o=await fetch(`/cozygen/input?${s.toString()}`);if(!o.ok)throw new Error(`Input list failed: ${o.status}`);return o.json()}const io=e=>`/cozygen/input/file?path=${encodeURIComponent(e)}`,Ni="output::",$o=(e="")=>e.replace(/\\/g,"/").replace(/^\/+/,"").replace(/\/+$/,""),Pm=(e="")=>{const t=e.replace(/\\/g,"/").split("/").filter(Boolean);return t[t.length-1]||""},fx=({subfolder:e="",filename:t=""}={})=>{const n=Pm(t);if(!n)return"";const r=$o(e);return`${Ni}${r}::${n}`},ki=(e="")=>{if(typeof e!="string"||!e.startsWith(Ni))return null;const t=e.slice(Ni.length);if(!t)return null;const n=t.lastIndexOf("::"),r=n===-1?t:t.slice(n+2);return r?{subfolder:n===-1?"":t.slice(0,n),filename:r}:null},co=({filename:e="",subfolder:t="",type:n="output"}={})=>{const r=Pm(e);return r?`/view?${new URLSearchParams({filename:r,subfolder:$o(t),type:n||"output"}).toString()}`:""},Ci=(e="")=>e.split("/").slice(0,-1).join("/"),px=e=>{if(typeof e!="string"||!e)return e!=null&&e.path?Ci(e.path):"";const t=ki(e);return t?$o(t.subfolder):Ci(e)},vd=(e=[])=>e.map(t=>{const n=t.rel_path||t.name||"",r=t.name||n||"Untitled",s=!!t.is_dir,o=s?"":io(n);return{...t,name:r,rel_path:n,is_dir:s,is_image:!s&&Ic(r),is_video:!s&&Lm(r),source:"input",preview_url:o}}),mx=(e=[])=>e.map(t=>{const n=t.filename||"",r=t.subfolder||"",s=t.type==="directory",o=s?r||n:[r,n].filter(Boolean).join("/"),a=n||r||o||"Untitled",i=s?"":co({filename:n,subfolder:r,type:t.type});return{...t,name:a,rel_path:o,is_dir:s,is_image:!s&&Ic(n),is_video:!s&&Lm(n),source:"output",preview_url:i}}),Yn={get(e,t){try{return(typeof window<"u"?JSON.parse(localStorage.getItem(e)):null)??t}catch{return t}},set(e,t){try{typeof window<"u"&&localStorage.setItem(e,JSON.stringify(t))}catch{}}};function hx({input:e,value:t,onFormChange:n}){var O;const r=((O=e==null?void 0:e.inputs)==null?void 0:O.param_name)||"Image Input",s=(e==null?void 0:e.class_type)||"CozyGenImageInput",o=`cg_last_input_cwd::${r}`,a=`cg_last_picker_source::${r}`,[i,c]=u.useState(""),[d,y]=u.useState(!1),[h,g]=u.useState(!1),[v,w]=u.useState(Yn.get(o,"")),[N,S]=u.useState(1),[m,f]=u.useState(50),[p,j]=u.useState([]),[b,E]=u.useState(1),[z,P]=u.useState(!1),[F,T]=u.useState(""),[V,fe]=u.useState([]),[W,de]=u.useState(!0),[q,ne]=u.useState(()=>Yn.get(a,"inputs")==="outputs"?"outputs":"inputs"),ee=q,k=u.useCallback(M=>{const $=M==="outputs"?"outputs":"inputs";ne($),Yn.set(a,$),w(""),S(1)},[]),I=u.useMemo(()=>{if(i)try{const M=new URL(i,window.location.origin);return(M.searchParams.get("path")||M.searchParams.get("filename")||M.pathname.split("/").pop()||"").split("/").pop()||"No file selected."}catch{}if(!t)return"No file selected.";if(typeof t=="string"){const M=ki(t);return M!=null&&M.filename?M.filename.split("/").pop():t.split("/").pop()}return t!=null&&t.path?t.path.split("/").pop():"No file selected."},[i,t]);u.useEffect(()=>{if(typeof t=="string"&&t){const M=ki(t);M!=null&&M.filename?c(co({filename:M.filename,subfolder:M.subfolder,type:"output"})):c(io(t)),y(!1)}else t!=null&&t.url?(c(t.url),y(!1)):(c(""),y(!1))},[t]);const _=u.useCallback(async M=>{const $=await Bv(M),te=`/view?filename=${$.filename}&type=input`;c(te),y(!1),Yn.set(o,""),s==="CozyGenImageInput"?n(r,$.filename):n(r,{source:"Upload",path:$.filename,url:te})},[s,n,r]),R=u.useCallback(()=>{c(""),y(!1),s==="CozyGenImageInput"?n(r,""):n(r,{source:"Upload",path:"",url:""})},[s,n,r]),D=u.useCallback(()=>{const $=px(t)||Yn.get(o,"");w($),S(1),g(!0)},[t]),Z=u.useCallback(()=>{g(!1)},[]);u.useEffect(()=>{if(h){if(ee!=="inputs"){fe([]);return}(async()=>{try{const M=await ha({subfolder:"",page:1,perPage:0,exts:""});fe((M.items||[]).filter($=>$.is_dir))}catch{}})()}},[h,ee]),u.useEffect(()=>{if(!h)return;let M=!1;async function $(){P(!0);try{if(ee==="outputs"){const te=await gm(v,N,m);if(M)return;const se=mx(te&&te.items||[]);M||(j(se),E(te&&te.total_pages||1))}else{const se=await ha({subfolder:v,page:N,perPage:m,exts:W?Em:""}),J=(se.items||[]).some(pe=>!pe.is_dir);if(W&&!J){const pe=await ha({subfolder:v,page:N,perPage:m,exts:""});M||(j(vd(pe.items||[])),E(pe.total_pages||1),de(!1));return}M||(j(vd(se.items||[])),E(se.total_pages||1))}}catch(te){console.error(ee==="outputs"?"Failed to load output directory":"Failed to load input directory",te),M||(j([]),E(1))}finally{M||P(!1)}}return $(),()=>{M=!0}},[h,v,N,m,W,ee]);const G=u.useMemo(()=>{const M=F.trim().toLowerCase();let $=p;return W&&($=$.filter(te=>{if(te.is_dir)return!0;const se=te.name||te.filename||te.rel_path||"";return Ic(String(se))})),M?$.filter(te=>(te.name||te.filename||te.rel_path||"").toLowerCase().includes(M)):$},[p,F,W]),U=u.useCallback(M=>{if(!M)return;const $=typeof M=="object"?M:null;if((($==null?void 0:$.source)||"inputs")==="output"){const pe=fx({subfolder:($==null?void 0:$.subfolder)||"",filename:($==null?void 0:$.filename)||($==null?void 0:$.name)||""});if(!pe)return;const Ie=($==null?void 0:$.preview_url)||co({filename:$==null?void 0:$.filename,subfolder:$==null?void 0:$.subfolder,type:$==null?void 0:$.type});c(Ie),y(!1),Yn.set(o,$o(($==null?void 0:$.subfolder)||"")),s==="CozyGenImageInput"?n(r,pe):n(r,{source:"OutputGallery",path:pe,url:Ie}),g(!1);return}const se=typeof M=="string"?M:($==null?void 0:$.rel_path)||($==null?void 0:$.path)||"";if(!se)return;const J=($==null?void 0:$.preview_url)||io(se);c(J),y(!1),Yn.set(o,Ci(se)),s==="CozyGenImageInput"?n(r,se):n(r,{source:"Server",path:se,url:J}),g(!1)},[s,n,r]);return{param:r,previewUrl:i,imgReady:d,setImgReady:y,displayName:I,serverOpen:h,openServer:D,closeServer:Z,cwd:v,setCwd:w,page:N,setPage:S,perPage:m,setPerPage:f,totalPages:b,loading:z,search:F,setSearch:T,topDirs:V,imagesOnly:W,setImagesOnly:de,shownEntries:G,pickerSource:ee,setPickerSource:k,handleUpload:_,clearImage:R,selectServer:U}}function St({open:e,onClose:t,title:n,children:r,footer:s,variant:o="sheet",className:a="",contentClassName:i="",shouldCloseOnOverlayClick:c=!0,shouldCloseOnEsc:d=!0}){const y=u.useRef(!1),h=u.useRef(null),g=u.useRef(null),v=S=>S?Array.from(S.querySelectorAll('a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter(m=>!m.hasAttribute("disabled")&&m.getAttribute("aria-hidden")!=="true"):[],w=u.useMemo(()=>["bottom-sheet-content",o==="fullscreen"?"is-fullscreen":"is-sheet",i].filter(Boolean).join(" "),[i,o]),N=u.useMemo(()=>["bottom-sheet-overlay",a].filter(Boolean).join(" "),[a]);return u.useEffect(()=>{if(!e||!d)return;const S=m=>{m.key==="Escape"&&(t==null||t())};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[e,t,d]),u.useEffect(()=>{if(!e||typeof document>"u")return;const S=h.current;g.current=document.activeElement;const m=()=>{var b;const j=v(S)[0]||S;(b=j==null?void 0:j.focus)==null||b.call(j)},f=p=>{if(p.key!=="Tab"||!S)return;const j=v(S);if(!j.length){p.preventDefault(),S.focus();return}const b=j[0],E=j[j.length-1],z=document.activeElement;p.shiftKey&&z===b?(p.preventDefault(),E.focus()):!p.shiftKey&&z===E&&(p.preventDefault(),b.focus())};return requestAnimationFrame(m),S==null||S.addEventListener("keydown",f),()=>{var j;S==null||S.removeEventListener("keydown",f);const p=g.current;p&&document.contains(p)&&((j=p.focus)==null||j.call(p))}},[e]),!e||typeof document>"u"?null:Nc.createPortal(l.jsx("div",{className:N,role:"presentation",onPointerDown:S=>{y.current=S.target===S.currentTarget},onClick:S=>{c&&y.current&&S.target===S.currentTarget&&(t==null||t())},children:l.jsx("div",{ref:h,className:w,role:"dialog","aria-modal":"true","aria-label":n||"Sheet",onClick:S=>S.stopPropagation(),tabIndex:-1,children:l.jsxs("div",{className:"bottom-sheet-panel",children:[l.jsxs("header",{className:"bottom-sheet-head",children:[l.jsx("div",{className:"bottom-sheet-title",children:n||""}),l.jsx("button",{type:"button",className:"bottom-sheet-close",onClick:t,"aria-label":"Close",children:l.jsx(sn,{size:16})})]}),l.jsx("div",{className:"bottom-sheet-body",children:r}),s?l.jsx("footer",{className:"bottom-sheet-foot",children:s}):null]})})}),document.body)}function gx({items:e=[],value:t,onChange:n,ariaLabel:r,role:s="tablist",className:o="",tabClassName:a="",size:i="md",layout:c="equal",wrap:d=!1}){const y=["segmented-tabs",i==="sm"?"is-compact":"",c==="auto"?"is-auto":"",c==="icon"?"is-icon":"",d?"is-wrap":"",o].filter(Boolean).join(" "),h=s==="tablist"?"tab":"button",g=u.useRef([]);u.useEffect(()=>{g.current=g.current.slice(0,e.length)},[e.length]);const v=u.useMemo(()=>e.map((p,j)=>p.disabled?null:j).filter(p=>p!==null),[e]),w=u.useMemo(()=>e.findIndex(p=>p.key===t&&!p.disabled),[e,t]),N=v.length?v[0]:-1,S=w>=0?w:N,m=p=>{var b;const j=g.current[p];(b=j==null?void 0:j.focus)==null||b.call(j)},f=(p,j)=>{var E;if(!e.length)return p;let b=p;for(let z=0;z<e.length;z+=1)if(b=(b+j+e.length)%e.length,!((E=e[b])!=null&&E.disabled))return b;return p};return l.jsx("div",{className:y,role:s,"aria-label":r,children:e.map((p,j)=>{const b=p.key===t,E=p.label?String(p.label):"";return l.jsxs("button",{type:"button",ref:z=>{g.current[j]=z},role:h,"aria-selected":s==="tablist"?b:void 0,"aria-pressed":s!=="tablist"?b:void 0,"aria-controls":s==="tablist"?p.controls:void 0,className:["segmented-tab",b?"is-active":"",p.icon&&!E?"is-icon":"",p.className||"",a].filter(Boolean).join(" "),onClick:()=>{p.disabled||n==null||n(p.key)},onKeyDown:z=>{if(s!=="tablist"||!["ArrowRight","ArrowLeft","Home","End"].includes(z.key)||(z.preventDefault(),!e.length))return;let P=j;z.key==="Home"?P=v.length?v[0]:P:z.key==="End"?P=v.length?v[v.length-1]:P:z.key==="ArrowRight"?P=f(P,1):z.key==="ArrowLeft"&&(P=f(P,-1));const F=e[P];!F||F.disabled||(n==null||n(F.key),m(P))},disabled:p.disabled,title:p.title||E||p.ariaLabel,"aria-label":p.ariaLabel,tabIndex:s==="tablist"?j===S?0:-1:void 0,children:[p.icon?l.jsx("span",{className:"segmented-tab-icon",children:p.icon}):null,E?l.jsx("span",{className:"segmented-tab-label",children:E}):null,p.badge?l.jsx("span",{className:"segmented-tab-badge",children:p.badge}):null]},p.key)})})}const Tr=u.memo(gx),yx=(e=[])=>(e||[]).map(t=>typeof t=="string"||typeof t=="number"?{value:t,label:String(t)}:{value:(t==null?void 0:t.value)??(t==null?void 0:t.id)??"",label:(t==null?void 0:t.label)??(t==null?void 0:t.name)??String((t==null?void 0:t.value)??""),disabled:!!(t!=null&&t.disabled)}),vx=(e,t)=>{if(!t)return e;const n=t.trim().toLowerCase();return n?e.filter(r=>{const s=String(r.label||"").toLowerCase(),o=String(r.value||"").toLowerCase();return s.includes(n)||o.includes(n)}):e};function xx({value:e,onChange:t,options:n,children:r,placeholder:s,emptyLabel:o="No matches",disabled:a=!1,size:i="md",className:c="",wrapperClassName:d="",searchable:y=!1,searchPlaceholder:h="Search options...",searchValue:g,onSearchChange:v,searchAriaLabel:w="Search options",...N}){const[S,m]=u.useState(""),f=typeof g=="string"?g:S,p=v||m,j=u.useMemo(()=>yx(n),[n]),b=u.useMemo(()=>y?vx(j,f):j,[j,f,y]),E=["ui-control","ui-select",i==="sm"?"is-compact":"",c].filter(Boolean).join(" "),z=()=>r||(b.length?b.map(F=>l.jsx("option",{value:F.value,disabled:F.disabled,children:F.label},String(F.value))):l.jsx("option",{value:"",disabled:!0,children:o})),P=l.jsxs("select",{...N,className:E,value:e??"",onChange:F=>t==null?void 0:t(F.target.value),disabled:a,children:[s?l.jsx("option",{value:"",children:s}):null,z()]});return y?l.jsxs("div",{className:d,children:[l.jsx("input",{type:"search",value:f,onChange:F=>p(F.target.value),placeholder:h,className:"ui-control ui-input is-compact","aria-label":w,disabled:a}),P]}):P}const Ye=u.memo(xx);function wx({open:e,cwd:t,setCwd:n,page:r,setPage:s,perPage:o,setPerPage:a,totalPages:i,topDirs:c,loading:d,imagesOnly:y,setImagesOnly:h,search:g,setSearch:v,shownEntries:w,onSelect:N,onClose:S,pickerSource:m,setPickerSource:f}){if(!e)return null;const p=m||"inputs",j=typeof f=="function",b=()=>{n(""),s(1)},E=V=>{j&&V!==p&&(f(V),n(""),s(1))},z=t.split("/").filter(Boolean),P=p==="outputs"?"Choose output":"Choose input",F=[{key:"",label:"Root"},...c.map(V=>({key:V.rel_path,label:V.name}))],T=V=>{n(V),s(1)};return l.jsx(St,{open:e,onClose:S,title:P,variant:"fullscreen",footer:l.jsxs("div",{className:"flex items-center gap-2 w-full",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",disabled:r<=1||d,onClick:()=>s(V=>Math.max(1,V-1)),children:"Prev"}),l.jsxs("div",{className:"text-xs text-center text-[rgba(159,178,215,0.75)] min-w-[92px]",children:[r," / ",i]}),l.jsx("button",{type:"button",className:"ui-button is-muted w-full",disabled:r>=i||d,onClick:()=>s(V=>V<i?V+1:V),children:"Next"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Location"}),l.jsxs("div",{className:"imagepicker-breadcrumb",children:[l.jsx("button",{type:"button",className:"imagepicker-crumb",onClick:b,children:"Root"}),z.map((V,fe)=>{const W=z.slice(0,fe+1).join("/");return l.jsx("button",{type:"button",className:"imagepicker-crumb",onClick:()=>{n(W),s(1)},children:V},W)})]})]}),j?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Source"}),l.jsx(Tr,{ariaLabel:"Source",value:p,onChange:E,size:"sm",items:[{key:"inputs",label:"Inputs"},{key:"outputs",label:"Outputs"}]})]}):null,l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Filters"}),l.jsxs("div",{className:"composer-filters",children:[l.jsxs("label",{className:"inline-flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:y,onChange:V=>{h(V.target.checked),s(1)}}),l.jsx("span",{className:"text-sm text-[rgba(159,178,215,0.85)]",children:"Images only"})]}),l.jsx("input",{type:"search",value:g,onChange:V=>v(V.target.value),placeholder:"Search files",className:"sheet-input ui-control ui-input","aria-label":"Search files"}),l.jsx(Ye,{className:"sheet-select",value:o,onChange:V=>{const fe=parseInt(V,10)||50;a(fe),s(1)},"aria-label":"Items per page",size:"sm",options:[25,50,100]})]})]}),c.length>0?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Quick folders"}),l.jsx(Tr,{ariaLabel:"Quick folders",value:t,onChange:T,size:"sm",layout:"auto",wrap:!0,className:"imagepicker-chips",items:F})]}):null,l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Results"}),d?l.jsxs("div",{className:"sheet-hint",children:["Scanning ",p==="outputs"?"output":"input"," folders"]}):w.length===0?l.jsx("div",{className:"sheet-hint",children:"Nothing here yet. Try a different folder or turn off Images only."}):null,l.jsx("div",{className:"imagepicker-grid",children:!d&&w.map(V=>{const fe=`${V.source||"input"}::${V.rel_path||V.name}`,W=V.is_dir?"":V.preview_url||(V.source==="output"?co({filename:V.filename,subfolder:V.subfolder,type:V.type}):io(V.rel_path||""));return l.jsx("button",{type:"button",className:`imagepicker-item ${V.is_dir?"is-dir":""}`,onClick:()=>{V.is_dir?(n(V.rel_path||""),s(1)):N(V)},children:V.is_dir?l.jsxs("div",{className:"imagepicker-dir-row",children:[l.jsx("div",{className:"imagepicker-dir-dot","aria-hidden":"true"}),l.jsx("div",{className:"imagepicker-name",children:V.name})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"imagepicker-thumb",children:W?l.jsx("img",{className:"imagepicker-img",alt:V.name,src:W}):l.jsx("div",{className:"imagepicker-img is-placeholder"})}),l.jsx("div",{className:"imagepicker-name",children:V.name})]})},fe)})})]})]})})}function jx({open:e,onClose:t,title:n,url:r,kind:s="image"}){return r?l.jsx(St,{open:e,onClose:t,title:n||"Preview",variant:"fullscreen",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("a",{href:r,target:"_blank",rel:"noreferrer",className:"ui-button is-muted w-full text-center",children:"Open"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Close"})]}),children:l.jsx("div",{className:"url-viewer-stage",children:s==="video"?l.jsx("video",{src:r,controls:!0,className:"url-viewer-media",autoPlay:!0}):l.jsx("img",{src:r,alt:n||"Preview",className:"url-viewer-media"})})}):null}function Sx({input:e,value:t,onFormChange:n}){const{previewUrl:r,imgReady:s,setImgReady:o,displayName:a,serverOpen:i,openServer:c,closeServer:d,cwd:y,setCwd:h,page:g,setPage:v,perPage:w,setPerPage:N,totalPages:S,topDirs:m,loading:f,search:p,setSearch:j,imagesOnly:b,setImagesOnly:E,shownEntries:z,pickerSource:P,setPickerSource:F,handleUpload:T,clearImage:V,selectServer:fe}=hx({input:e,value:t,onFormChange:n}),W=u.useRef(null),de=u.useRef(null),[q,ne]=u.useState(0),[ee,k]=u.useState(!1);u.useEffect(()=>{const R=de.current;if(!R)return;const D=G=>{G.preventDefault(),G.stopPropagation()},Z=async G=>{var O,M;D(G);const U=(M=(O=G.dataTransfer)==null?void 0:O.files)==null?void 0:M[0];U&&(await T(U),W.current&&(W.current.value=""),ne($=>$+1))};return["dragenter","dragover","dragleave","drop"].forEach(G=>R.addEventListener(G,G==="drop"?Z:D)),()=>{["dragenter","dragover","dragleave","drop"].forEach(G=>R.removeEventListener(G,G==="drop"?Z:D))}},[T]);const I=async R=>{var Z;const D=(Z=R.target.files)==null?void 0:Z[0];D&&(await T(D),W.current&&(W.current.value=""),ne(G=>G+1))},_=()=>{W.current&&W.current.click()};return l.jsxs("div",{className:"asset-card",children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[l.jsx("h3",{className:"text-sm font-semibold text-[#F8F4FF] truncate",children:a}),l.jsx("span",{className:"text-[11px] text-[#C3C7FFB3] truncate",children:"Image"})]}),l.jsx("div",{ref:de,className:"mb-3 rounded-xl border border-dashed border-[rgba(255,255,255,0.14)] bg-[rgba(255,255,255,0.02)] flex items-center justify-center min-h-[140px] sm:min-h-[180px] overflow-hidden",children:r?l.jsx("button",{type:"button",className:"asset-preview-btn",onClick:()=>k(!0),"aria-label":`Preview ${a}`,title:"Open preview",children:l.jsx("img",{src:r,alt:a,className:`max-h-64 max-w-full object-contain transition-opacity ${s?"opacity-100":"opacity-0"}`,onLoad:()=>o(!0)})}):l.jsx("div",{className:"text-[11px] text-[#9DA3FFCC] text-center px-6",children:"Drop an image here, upload from your device, or choose one from your server."})}),l.jsx("input",{ref:W,type:"file",accept:"image/*",className:"hidden",onChange:I},q),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:"ui-button is-primary is-compact",onClick:c,children:"Choose"}),l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:_,children:"Upload"}),l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:V,children:"Clear"})]}),l.jsx(wx,{open:i,cwd:y,setCwd:h,page:g,setPage:v,perPage:w,setPerPage:N,totalPages:S,topDirs:m,loading:f,imagesOnly:b,setImagesOnly:E,search:p,setSearch:j,shownEntries:z,pickerSource:P,setPickerSource:F,onSelect:fe,onClose:d}),l.jsx(jx,{open:ee,onClose:()=>k(!1),title:a||"Preview",url:r,kind:"image"})]})}function Nx({open:e,onClose:t,title:n,description:r,render:s,index:o=0,total:a=0,children:i}){const[c,d]=u.useState("idle"),y=u.useRef(null),h=u.useRef(null),g=w=>w?Array.from(w.querySelectorAll('a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter(N=>!N.hasAttribute("disabled")&&N.getAttribute("aria-hidden")!=="true"):[];if(u.useEffect(()=>{if(c==="queued"){const w=setTimeout(()=>d("idle"),1600);return()=>clearTimeout(w)}},[c]),u.useEffect(()=>{if(!e||typeof document>"u")return;const w=y.current;h.current=document.activeElement;const N=()=>{var p;const f=g(w)[0]||w;(p=f==null?void 0:f.focus)==null||p.call(f)},S=m=>{if(m.key==="Escape"){t==null||t();return}if(m.key!=="Tab"||!w)return;const f=g(w);if(!f.length){m.preventDefault(),w.focus();return}const p=f[0],j=f[f.length-1],b=document.activeElement;m.shiftKey&&b===p?(m.preventDefault(),j.focus()):!m.shiftKey&&b===j&&(m.preventDefault(),p.focus())};return requestAnimationFrame(N),w==null||w.addEventListener("keydown",S),()=>{var f;w==null||w.removeEventListener("keydown",S);const m=h.current;m&&document.contains(m)&&((f=m.focus)==null||f.call(m))}},[e,t]),!e)return null;const v=typeof s=="function"?s():i;return l.jsxs("div",{className:"spotlight-overlay",role:"dialog","aria-modal":"true",children:[l.jsx("div",{className:"spotlight-backdrop",onClick:t}),l.jsxs("div",{className:"spotlight-sheet",ref:y,tabIndex:-1,children:[l.jsxs("div",{className:"spotlight-header",children:[l.jsxs("div",{className:"spotlight-meta",children:[l.jsx("div",{className:"spotlight-kicker",children:"Focused control"}),l.jsx("div",{className:"spotlight-title",children:n||"Control"}),r?l.jsx("div",{className:"spotlight-hint",children:r}):null]}),l.jsx("button",{type:"button",className:"spotlight-close",onClick:t,"aria-label":"Close",children:l.jsx(sn,{size:16})})]}),l.jsx("div",{className:"spotlight-body",children:v}),l.jsx("div",{className:"spotlight-footer",children:l.jsx("div",{className:"spotlight-footer-right",children:l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:t,"aria-label":"Close",children:"Close"})})})]})]})}function kx({open:e,onClose:t,title:n,value:r,onChange:s,placeholder:o="",description:a}){const i=n||"Edit",c=u.useMemo(()=>`sheet-textarea-${Math.random().toString(36).slice(2,9)}`,[]);return l.jsxs(St,{open:e,onClose:t,title:i,variant:"fullscreen",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Done"}),children:[a?l.jsx("div",{className:"text-[12px] text-[rgba(159,178,215,0.75)] mb-3",children:a}):null,l.jsx("textarea",{id:c,value:r??"",onChange:d=>s==null?void 0:s(d.target.value),placeholder:o,className:"sheet-textarea ui-control ui-textarea",rows:12})]})}function pn(e){const t=Number(e);return Number.isFinite(t)?t.toFixed(2).replace(/\.?0+$/u,""):"1"}function Cx(e=""){const t=String(e||"");if(!t.trim())return[];const n=[];let r=0;for(;r<t.length;){for(;r<t.length&&/[\s,]/.test(t[r]);)r++;if(r>=t.length)break;let s=r,o=r,a="tag",i="";const c=t[r]==="(";if(c&&(s=r,r++),t[r]==="$"){a="alias";const d=r;for(r++;r<t.length&&t[r]!=="$"&&t[r]!==","&&t[r]!==`
`;)i+=t[r],r++;t[r]==="$"&&r++,c||(s=d)}else{a="tag";const d=r;for(;r<t.length&&!(t[r]===","||t[r]==="$"||t[r]===`
`||c&&t[r]===":"||!c&&t[r]==="(");)i+=t[r],r++;i=i.trim(),c||(s=d)}if(c&&t[r]===":"){for(r++;r<t.length&&t[r]!==")"&&t[r]!==","&&t[r]!==`
`;)r++;t[r]===")"&&r++}o=r,i&&n.push({type:a,text:i,start:s,end:o})}return n}function xd(e="",t){if(!t||typeof t.start!="number"||typeof t.end!="number")return null;const r=String(e||"").slice(t.start,t.end);if(!r.startsWith("(")||!r.includes(":"))return null;const s=r.lastIndexOf(":");if(s===-1)return null;const o=r.slice(s+1);if(!o.endsWith(")"))return null;const a=o.slice(0,-1).trim();if(!/^\d+(\.\d+)?$/u.test(a))return null;const i=Number.parseFloat(a);return Number.isFinite(i)?{weight:i,wrapperStart:t.start,wrapperEnd:t.end}:null}function wd(e="",t,n){const r=String(e||"");if(!t||typeof t.start!="number"||typeof t.end!="number")return r;const s=n==null?null:Number(n),o=s===null||!Number.isFinite(s)||Math.abs(s-1)<1e-6,a=t.type==="alias"?`$${t.text}$`:t.text;if(o)return r.slice(0,t.start)+a+r.slice(t.end);const i=pn(s),c=`(${a}:${i})`;return r.slice(0,t.start)+c+r.slice(t.end)}function jd(e="",t,n,r){var g;if(n===r||n===null||r===null||!(t!=null&&t.length))return e;const s=String(e||""),o=t.map(v=>({start:v.start,end:v.end,text:s.slice(v.start,v.end)})),a=o.slice(0,-1).map((v,w)=>{const N=o[w+1];return s.slice(v.end,N.start)}),i=o.length?s.slice(0,o[0].start):"",c=o.length?s.slice(o[o.length-1].end):"",d=[...o],[y]=d.splice(n,1);d.splice(r,0,y);let h=i+(((g=d[0])==null?void 0:g.text)||"");for(let v=1;v<d.length;v++)h+=(a[v-1]??", ")+d[v].text;return h+=c,h}function bx(e="",t){const n=String(e||"");if(!t||typeof t.start!="number"||typeof t.end!="number")return n;const r=n.slice(0,t.start).replace(/[\s,]*$/,""),s=n.slice(t.end).replace(/^[\s,]*/,"");return r?`${r}, ${s}`.trim():s.trim()}function mr(e="",t){if(!t||typeof t.index!="number"||typeof t.length!="number")return null;const n=String(e||""),r=t.index,s=t.index+t.length;if(r<=0||n[r-1]!=="("||n[s]!==":")return null;let o=s+1,a="";for(;o<n.length&&n[o]!==")";)if(a+=n[o],o+=1,a.length>12)return null;if(o>=n.length||n[o]!==")")return null;const i=a.trim();if(!/^\d+(\.\d+)?$/u.test(i))return null;const c=Number.parseFloat(i);return Number.isFinite(c)?{weight:c,wrapperStart:r-1,wrapperEnd:o+1}:null}function yl(e="",t,n){const r=String(e||"");if(!t||typeof t.index!="number"||typeof t.length!="number")return r;const s=t.index,o=t.index+t.length,a=mr(r,t),i=n==null?null:Number(n),c=i===null||!Number.isFinite(i)||Math.abs(i-1)<1e-6;if(a){if(c)return r.slice(0,a.wrapperStart)+r.slice(s,o)+r.slice(a.wrapperEnd);const y=pn(i);return r.slice(0,o+1)+y+r.slice(a.wrapperEnd-1)}if(c)return r;const d=pn(i);return r.slice(0,s)+"("+r.slice(s,o)+":"+d+")"+r.slice(o)}function vl(e,t,n){const r=Number(e);return Number.isFinite(r)?Math.max(t,Math.min(n,r)):t}function bi({open:e,onClose:t,title:n="Alias strength",tokenLabel:r="",weight:s=1,onApply:o,onRemoveWeight:a,onDeleteToken:i}){const c=u.useMemo(()=>vl(s||1,.2,2),[s]),[d,y]=u.useState(c);u.useEffect(()=>{e&&y(c)},[e,c]);const h=pn(d);return l.jsx(St,{open:e,onClose:t,title:n,footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:t,children:"Cancel"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>{o==null||o(d),t==null||t()},children:"Done"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Alias"}),l.jsx("div",{className:"sheet-hint",children:r||""})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Strength"}),l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>y(g=>vl(g-.05,.2,2)),children:""}),l.jsxs("div",{className:"text-sm text-[rgba(237,242,255,0.92)] tabular-nums",children:[h,""]}),l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>y(g=>vl(g+.05,.2,2)),children:"+"})]}),l.jsx("input",{type:"range",min:.2,max:2,step:.05,value:d,onChange:g=>y(vl(g.target.value,.2,2)),className:"w-full","aria-label":"Alias strength"}),l.jsx("div",{className:"sheet-hint",children:"1.0 is normal. Increase to emphasize or reduce to soften."})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Actions"}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>y(1),children:"Reset to 1.0"}),l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>{a==null||a(),t==null||t()},children:"Remove strength"}),l.jsx("button",{type:"button",className:"ui-button is-danger is-compact",onClick:()=>{i==null||i(),t==null||t()},children:"Remove alias"})]})]})]})})}function Jn(e){const t=String(e||"").trim();if(!t)return"";const n=t.toLowerCase(),r={scifi:"Sci-Fi",sci:"Sci",ui:"UI",vfx:"VFX",hdr:"HDR",dof:"DoF",bokeh:"Bokeh",vhs:"VHS",jpeg:"JPEG",jpg:"JPG",png:"PNG",gif:"GIF",webp:"WebP",api:"API",nsfw:"NSFW",sfw:"SFW",sfx:"SFX",fx:"FX",lora:"LoRA",loras:"LoRAs",ip:"IP",egirl:"E-girl",i2v:"I2V",t2i:"T2I",img2img:"Img2Img",txt2img:"Txt2Img",tts:"TTS",asmr:"ASMR",ai:"AI",highleg:"High-Leg","one-piece":"One-Piece","three-quarter":"Three-Quarter"};return r[n]?r[n]:/^\d+$/.test(n)?n:n==="3d"?"3D":n==="2d"?"2D":n.length===1?n.toUpperCase():n.charAt(0).toUpperCase()+n.slice(1)}function Ex(e=""){const t=String(e||"").trim().toLowerCase();return t?t.startsWith("flirty_")?"flirty":t.startsWith("action_")||t.startsWith("dynamic_")||t.startsWith("stealth_")||t.startsWith("athletic_")||t.startsWith("running_")||t.startsWith("walking_")?"action":t.startsWith("sleepy_")||t.startsWith("relaxed_")||t.startsWith("reclining_")||t.startsWith("sitting_")||t.startsWith("kneeling_")?"rest":t.startsWith("happy_")||t.startsWith("sad_")||t.startsWith("angry_")||t.startsWith("nervous_")||t.startsWith("smug_")||t.startsWith("surprised_")||t.startsWith("scared_")||t.startsWith("tipsy_")?"emotion":t.startsWith("composed_")||t.startsWith("contemplative_")||t.startsWith("looking_")?"posed":"everyday":""}function Lx(e=""){const t=String(e||"").trim().toLowerCase();if(!t)return"";const n=t.split("_")[0]||"";return n==="lingerie"?"lingerie":n==="swimwear"||n==="swim"?"swimwear":n==="costumes"||n==="tech"?"costumes":n==="uniform"?"uniform":n==="formal"?"formal":n==="alt"?"alt":n==="casual"||n==="street"||n==="lounge"||n==="sporty"||n==="dress"?"everyday":n||"everyday"}function Px(e=""){const t=String(e||"").trim().toLowerCase();if(!t)return"";const n=t.split("_")[0]||"";return["fire","candlelight","embers"].includes(n)?"fire":["moonlight"].includes(n)?"night":["neon"].includes(n)?"neon":["studio","stage","sidelighting","dim"].includes(n)?"studio":["golden","sunbeam","dappled"].includes(n)?"natural":["lens","light"].includes(n)?"effects":n||"other"}function is(e="",t=""){const n=String(e||"").trim(),r=String(t||"").trim().toLowerCase();if(!n)return"";if(r==="outfit")return Lx(n)||"everyday";if(r==="pose")return Ex(n)||"everyday";if(r==="lighting")return Px(n)||"effects";const s=n.indexOf("_");return s<=0?"":n.slice(0,s).trim()}function _m(e=""){const t=String(e||"").trim();return t?t.includes(":")?t.split(":").slice(1).join(":"):t:""}function zl({token:e="",name:t=""}={}){const n=String(t||"").trim()||_m(e);if(!n)return"";let s=n.replace(/_(\d+)$/u,"").split("_").filter(Boolean);if(s.length===0)return n;const o=[];for(let h=0;h<s.length;h++){const g=s[h],v=s[h+1];if(g&&v&&g.toLowerCase()==="one"&&v.toLowerCase()==="piece"){o.push("one-piece"),h+=1;continue}if(g&&v&&g.toLowerCase()==="three"&&v.toLowerCase()==="quarter"){o.push("three-quarter"),h+=1;continue}o.push(g)}if(s=o,Array.from(new Set(s.map(h=>String(h).toLowerCase()))).length===1)return Jn(s[0]);const i=s[0],c=s.slice(1),d=Jn(i),y=c.map(Jn).join(" ").trim();return y?y.toLowerCase()===d.toLowerCase()?c.length===1&&String(c[0]).toLowerCase()===String(i).toLowerCase()?d||n:s.map(Jn).join(" ").trim()||n:`${d} - ${y}`:s.map(Jn).join(" ").trim()||n}function zc(e){if(!e)return{subcategory:"",displayName:""};const t=e.name||"",n=e.token||"",r=_m(n)||t,s=is(r,e.category)||"other",o=zl({token:n,name:t})||n||t||"Alias";return{subcategory:s,displayName:o}}function un(e=""){const t=String(e||"").trim();return t?t==="All"?"All":{action:"Actions",camera:"Camera",body:"Body",char:"Characters",mood:"Mood",outfit:"Outfits",pose:"Poses",prop:"Props",scene:"Scenes",weather:"Weather",style:"Style",hair:"Hair",lighting:"Lighting"}[t]||Jn(t):""}function Bn(e=""){const t=String(e||"").trim();return t?t==="All"?"All":t.split(/[_-]+/u).filter(Boolean).map(n=>Jn(n)).join(" ").trim():""}function _x({name:e,label:t,description:n,value:r,onChange:s,onEnter:o,disabled:a=!1,multiline:i=!1,aliasOptions:c=[],aliasCatalog:d=[],onOpenComposer:y}){var Ue,ht;const h=u.useRef(null),g=u.useRef(null),v=u.useRef({start:null,end:null}),w=u.useRef(null),N=u.useRef(null),[S,m]=u.useState(null),[f,p]=u.useState(null),[j,b]=u.useState(!1),[E,z]=u.useState(""),[P,F]=u.useState("All"),[T,V]=u.useState("All"),[fe]=u.useState([]),W=u.useRef(null),[de,q]=u.useState(!1),[ne,ee]=u.useState(!1),[k,I]=u.useState(null),_=typeof r=="string"?r:String(r??"");u.useMemo(()=>Array.isArray(c)?c.filter(Boolean):[],[c]);const R=u.useMemo(()=>(Array.isArray(d)?d.filter(x=>x&&x.name):[]).map(x=>({...x,...zc(x)})),[d]),D=u.useMemo(()=>R,[R]),Z=x=>{const L=x.target.value;s==null||s(L)},G=x=>{if(!i&&x.key==="Enter"){x.preventDefault(),o==null||o(x.target.value,x);return}},U=u.useMemo(()=>{const x=new Map;return D.forEach(L=>{L!=null&&L.token&&x.set(String(L.token).toLowerCase(),L)}),x},[D]),O=u.useMemo(()=>{const x=new Set(["All"]);return R.forEach(L=>{L.category&&x.add(L.category)}),Array.from(x).sort((L,B)=>L.localeCompare(B))},[R]),M=u.useMemo(()=>{const x=new Set(["All"]);return D.forEach(L=>{(!P||P==="All"||L.category===P)&&L.subcategory&&x.add(L.subcategory)}),Array.from(x).sort((L,B)=>L.localeCompare(B))},[D,P]);u.useEffect(()=>{V("All")},[P]);const $=u.useMemo(()=>{const x=_||"";if(!x||!x.includes("$"))return[];const L=[],B=/\$([a-z0-9_:-]+)\$/gi;let Q;for(;Q=B.exec(x);)L.push({token:Q[1],index:Q.index,length:Q[0].length});return L},[_]),te=()=>{try{const x=h.current;x?v.current={start:x.selectionStart??null,end:x.selectionEnd??null}:v.current={start:null,end:null}}catch{v.current={start:null,end:null}}g.current&&g.current.scrollIntoView({block:"center",behavior:"smooth"}),b(!0)},se=u.useMemo(()=>{const x=E.trim().toLowerCase();return D.filter(L=>{var B,Q,oe,ie;return P!=="All"&&(L.category||"")!==P||T!=="All"&&(L.subcategory||"other")!==T?!1:x?((B=L.token)==null?void 0:B.toLowerCase().includes(x))||((Q=L.text)==null?void 0:Q.toLowerCase().includes(x))||((oe=L.name)==null?void 0:oe.toLowerCase().includes(x))||((ie=L.displayName)==null?void 0:ie.toLowerCase().includes(x)):!0}).sort((L,B)=>{const Q=(L.subcategory||"").toLowerCase(),oe=(B.subcategory||"").toLowerCase();return Q!==oe?Q.localeCompare(oe):L.token.localeCompare(B.token)})},[D,P,T,E]),[J,pe]=u.useState(30),Ie=u.useMemo(()=>se.slice(0,J),[se,J]);u.useEffect(()=>{pe(30)},[P,T,E,R]),u.useEffect(()=>{V("All")},[P]);const ye=(x,{closeAfter:L=!0}={})=>{var qs,Xs;const B=h.current,Q=`$${x}$`,oe=_||"",ie=(qs=v.current)==null?void 0:qs.start,ve=(Xs=v.current)==null?void 0:Xs.end,Se=(B==null?void 0:B.selectionStart)??(typeof ie=="number"?ie:oe.length),xe=(B==null?void 0:B.selectionEnd)??(typeof ve=="number"?ve:oe.length),nt=oe.slice(0,Se),rt=oe.slice(xe),Oe=nt.match(/[^\s]$/),gt=rt.match(/^[^\s]/),Ft=Oe&&Oe[0]!==","?", ":"",kn=gt&&gt[0]!==","?", ":"",Fo=nt+Ft+Q+kn+rt;s==null||s(Fo);const Ys=(nt+Ft+Q+kn).length;v.current={start:Ys,end:Ys},L&&(b(!1),requestAnimationFrame(()=>{var Js;(Js=B==null?void 0:B.blur)==null||Js.call(B)}))},we=x=>{const L=_||"",B=mr(L,x),Q=B?B.wrapperStart:x.index,oe=B?B.wrapperEnd:x.index+x.length,ie=L.slice(0,Q).replace(/[\s,]*$/,""),ve=L.slice(oe).replace(/^[\s,]*/,""),Se=ie?`${ie} ${ve}`.trim():ve.trim();s==null||s(Se)},he=x=>{if(!x)return;const L=U.get(x.token.toLowerCase()),B=(L==null?void 0:L.displayName)||x.token,Q=mr(_||"",x);I({tokenObj:x,displayName:B,weight:(Q==null?void 0:Q.weight)??1}),ee(!0),requestAnimationFrame(()=>{var oe,ie;return(ie=(oe=h.current)==null?void 0:oe.blur)==null?void 0:ie.call(oe)})},je=u.useMemo(()=>(x,L)=>{var rt;if(x===L||x===null||L===null||!($!=null&&$.length))return;const B=_||"",Q=$.map(Oe=>{const gt=mr(B,Oe),Ft=gt?gt.wrapperStart:Oe.index,kn=gt?gt.wrapperEnd:Oe.index+Oe.length;return{start:Ft,end:kn,text:B.slice(Ft,kn)||`$${Oe.token}$`}}),oe=Q.slice(0,-1).map((Oe,gt)=>{const Ft=Q[gt+1];return B.slice(Oe.end,Ft.start)}),ie=Q.length?B.slice(0,Q[0].start):"",ve=Q.length?B.slice(Q[Q.length-1].end):"",Se=[...Q],[xe]=Se.splice(x,1);Se.splice(L,0,xe);let nt=ie+(((rt=Se[0])==null?void 0:rt.text)||"");for(let Oe=1;Oe<Se.length;Oe+=1)nt+=(oe[Oe-1]??", ")+Se[Oe].text;nt+=ve,s==null||s(nt)},[s,$,_]),X=(x,L)=>{m(L),w.current=x.currentTarget,x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("text/plain",String(L)),requestAnimationFrame(()=>{w.current&&w.current.classList.add("is-dragging")})},Pe=(x,L)=>{x.preventDefault(),x.dataTransfer.dropEffect="move",L!==f&&p(L)},Je=x=>{x!==f&&p(x)},Ze=x=>{S!==null&&x!==null&&S!==x&&je(S,x),m(null),p(null),w.current=null},re=()=>{w.current&&w.current.classList.remove("is-dragging"),Ze(f)},me=(x,L)=>{x.preventDefault(),Ze(L)},H=(x,L)=>{var oe,ie;if(!((ie=(oe=x.target)==null?void 0:oe.closest)==null?void 0:ie.call(oe,".token-chip-drag-handle")))return;const Q=x.touches[0];N.current={idx:L,startX:Q.clientX,startY:Q.clientY,moved:!1}},K=x=>{if(!N.current)return;const L=x.touches[0],B=Math.abs(L.clientX-N.current.startX),Q=Math.abs(L.clientY-N.current.startY);if(B<=10&&Q<=10)return;N.current.moved=!0,m(N.current.idx),x.preventDefault();const oe=g.current,ie=oe?oe.querySelectorAll(".token-chip-draggable"):document.querySelectorAll(".token-chip-draggable"),ve=L.clientX,Se=L.clientY;for(let xe=0;xe<ie.length;xe++){const nt=ie[xe].getBoundingClientRect();if(ve>=nt.left&&ve<=nt.right&&Se>=nt.top&&Se<=nt.bottom){p(xe);break}}},le=()=>{var x;(x=N.current)!=null&&x.moved&&S!==null&&f!==null&&S!==f&&je(S,f),N.current=null,m(null),p(null)},ue={id:e,name:e,value:_,onChange:Z,disabled:a,className:"ui-control ui-input pr-10 text-[13px] sm:text-sm",placeholder:"","aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0},Ee=()=>{b(!1),requestAnimationFrame(()=>{var x,L;(L=(x=h.current)==null?void 0:x.blur)==null||L.call(x)})},be=(()=>{const x=String(e||"").toLowerCase(),L=String(t||"").toLowerCase();return!!`${x} ${L}`.trim().includes("prompt")})(),Te=()=>l.jsx(St,{open:j,onClose:Ee,title:be?"Insert alias":"Aliases",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:Ee,children:"Done"}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Search"}),l.jsxs("div",{className:"composer-filters",children:[l.jsx("input",{ref:W,type:"text",value:E,onChange:x=>z(x.target.value),placeholder:"Search aliases",className:"composer-search ui-control ui-input","aria-label":"Search aliases"}),l.jsx(Ye,{value:P,onChange:F,className:"composer-subcategory-select","aria-label":"Filter by category",size:"sm",options:["All",...O.filter(x=>x!=="All")].map(x=>({value:x,label:x==="All"?"Category: All":un(x)}))}),M.length>2?l.jsx(Ye,{value:T,onChange:V,className:"composer-subcategory-select",size:"sm",options:M.map(x=>({value:x,label:x==="All"?"All subcategories":Bn(x)}))}):null]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Results"}),l.jsx("div",{className:"composer-alias-list",children:se.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases found."}):l.jsxs(l.Fragment,{children:[Ie.map(x=>l.jsxs("button",{type:"button",onClick:()=>ye(x.token,{closeAfter:!be}),className:"composer-alias-item",children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:x.displayName||x.token}),x.category?l.jsx("span",{className:"composer-alias-category",children:un(x.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",x.token,"$"]}),l.jsx("div",{className:"composer-alias-text",children:x.text})]},x.key)),J<se.length?l.jsxs("button",{type:"button",onClick:()=>pe(x=>Math.min(x+30,se.length)),className:"ui-button is-muted w-full",children:["Show more (",se.length-J," left)"]}):null]})})]})]})});return i?l.jsxs("div",{className:"relative space-y-2",ref:g,children:[y&&!be?l.jsxs("div",{className:"stringinput-toolbar",children:[l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>y(e),children:"Open composer"}),R.length?l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:te,children:"Aliases"}):null,l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>q(!0),children:"Expand"})]}):null,l.jsx("textarea",{ref:h,...ue,rows:3,wrap:"soft",onKeyDown:G,className:ue.className+" resize-none min-h-[88px] max-h-[160px] leading-relaxed overflow-y-auto overflow-x-hidden break-words whitespace-pre-wrap",style:{whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"}}),y&&be?l.jsx("div",{className:"stringinput-underbar",children:l.jsxs("div",{className:"stringinput-underbar-actions",children:[l.jsx("button",{type:"button",className:"stringinput-action-link",onClick:()=>y(e),children:"Open composer"}),R.length?l.jsx("button",{type:"button",className:"stringinput-action-link",onClick:te,children:"Insert alias"}):null]})}):null,l.jsx(kx,{open:de,onClose:()=>q(!1),title:t||e,value:_,onChange:s,description:n}),$.length?l.jsxs("div",{className:"stringinput-tokens",children:[l.jsxs("div",{className:"stringinput-tokens-label",children:["Active aliases ",l.jsx("span",{className:"stringinput-tokens-hint",children:"(drag to reorder)"})]}),l.jsx("div",{className:"stringinput-tokens-list",children:$.map((x,L)=>{var Se;const B=U.get(x.token.toLowerCase()),Q=(B==null?void 0:B.displayName)||x.token,oe=S===L,ie=f===L&&S!==null&&S!==L,ve=((Se=mr(_||"",x))==null?void 0:Se.weight)??1;return l.jsxs("div",{className:`token-chip token-chip-draggable ${oe?"is-dragging":""} ${ie?"is-drop-target":""}`,title:`$${x.token}$`,role:"button",tabIndex:0,draggable:!0,onDragStart:xe=>X(xe,L),onDragEnd:re,onDragEnter:()=>Je(L),onDragOver:xe=>Pe(xe,L),onDrop:xe=>me(xe,L),onTouchStart:xe=>H(xe,L),onTouchMove:K,onTouchEnd:le,onClick:()=>{S===null&&he(x)},onKeyDown:xe=>{(xe.key==="Enter"||xe.key===" ")&&(xe.preventDefault(),he(x))},children:[l.jsx("span",{className:"token-chip-drag-handle","aria-hidden":"true",children:l.jsx(Si,{size:14})}),l.jsx("span",{className:"token-chip-label",children:Q}),Math.abs(ve-1)>1e-6?l.jsxs("span",{className:"token-chip-weight","aria-label":`Strength ${pn(ve)}x`,children:["",pn(ve)]}):null,l.jsx("button",{type:"button",className:"token-chip-remove",onClick:xe=>{xe.stopPropagation(),we(x)},"aria-label":`Remove ${x.token}`,children:l.jsx(sn,{size:12})})]},`${x.token}-${x.index}`)})})]}):null,l.jsx(bi,{open:ne,onClose:()=>ee(!1),title:"Alias strength",tokenLabel:k?`${k.displayName}  $${(Ue=k.tokenObj)==null?void 0:Ue.token}$`:"",weight:(k==null?void 0:k.weight)??1,onApply:x=>{k!=null&&k.tokenObj&&(s==null||s(yl(_||"",k.tokenObj,x)))},onRemoveWeight:()=>{k!=null&&k.tokenObj&&(s==null||s(yl(_||"",k.tokenObj,null)))},onDeleteToken:()=>{k!=null&&k.tokenObj&&we(k.tokenObj)}}),j?l.jsx(Te,{}):null]}):l.jsxs("div",{className:"relative space-y-2",ref:g,children:[l.jsx("input",{...ue,type:"text",inputMode:"text",autoComplete:"off",onKeyDown:G,className:ue.className+" min-h-[44px]",ref:h}),$.length?l.jsxs("div",{className:"stringinput-tokens",children:[l.jsxs("div",{className:"stringinput-tokens-label",children:["Active aliases ",l.jsx("span",{className:"stringinput-tokens-hint",children:"(drag to reorder)"})]}),l.jsx("div",{className:"stringinput-tokens-list",children:$.map((x,L)=>{var Se;const B=U.get(x.token.toLowerCase()),Q=(B==null?void 0:B.displayName)||x.token,oe=S===L,ie=f===L&&S!==null&&S!==L,ve=((Se=mr(_||"",x))==null?void 0:Se.weight)??1;return l.jsxs("div",{className:`token-chip token-chip-draggable ${oe?"is-dragging":""} ${ie?"is-drop-target":""}`,title:`$${x.token}$`,onClick:()=>{S===null&&he(x)},role:"button",tabIndex:0,draggable:!0,onDragStart:xe=>X(xe,L),onDragEnd:re,onDragEnter:()=>Je(L),onDragOver:xe=>Pe(xe,L),onDrop:xe=>me(xe,L),onTouchStart:xe=>H(xe,L),onTouchMove:K,onTouchEnd:le,onKeyDown:xe=>{(xe.key==="Enter"||xe.key===" ")&&(xe.preventDefault(),he(x))},children:[l.jsx("span",{className:"token-chip-drag-handle","aria-hidden":"true",children:l.jsx(Si,{size:14})}),l.jsx("span",{className:"token-chip-label",children:Q}),Math.abs(ve-1)>1e-6?l.jsxs("span",{className:"token-chip-weight","aria-label":`Strength ${pn(ve)}x`,children:["",pn(ve)]}):null,l.jsx("button",{type:"button",className:"token-chip-remove",onClick:xe=>{xe.stopPropagation(),we(x)},"aria-label":`Remove ${x.token}`,children:l.jsx(sn,{size:12})})]},`${x.token}-${x.index}`)})})]}):null,l.jsx(bi,{open:ne,onClose:()=>ee(!1),title:"Alias strength",tokenLabel:k?`${k.displayName}  $${(ht=k.tokenObj)==null?void 0:ht.token}$`:"",weight:(k==null?void 0:k.weight)??1,onApply:x=>{k!=null&&k.tokenObj&&(s==null||s(yl(_||"",k.tokenObj,x)))},onRemoveWeight:()=>{k!=null&&k.tokenObj&&(s==null||s(yl(_||"",k.tokenObj,null)))},onDeleteToken:()=>{k!=null&&k.tokenObj&&we(k.tokenObj)}}),R.length?l.jsx("button",{type:"button",className:"stringinput-trailing ui-button is-ghost is-compact",onClick:()=>y?y(e):te(),title:y?"Open prompt composer":"Insert alias","aria-label":y?"Open prompt composer":"Insert alias",children:y?l.jsx(_c,{size:16}):l.jsx(Hn,{size:16})}):null,l.jsx(Te,{})]})}const Sd=u.memo(_x),Nd=e=>e==null?void 0:String(e).trim().replace(/[^A-Za-z0-9_-]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")||void 0;function Rx({name:e,label:t,description:n,value:r,onChange:s,disabled:o=!1,min:a,max:i,step:c,isFloat:d=!1,inputId:y}){const h=c??(d?.01:1),g=y??Nd(e),v=S=>{if(S===""||S===null||S===void 0)return"";const m=d?parseFloat(S):parseInt(S,10);return Number.isNaN(m)?"":m},w=S=>{const m=S.target.value,f=v(m);s==null||s(f)},N=S=>{if(S.key!=="ArrowUp"&&S.key!=="ArrowDown")return;S.preventDefault();const m=typeof r=="number"?r:v(String(r??""))||0,f=S.key==="ArrowUp"?h:-h;let p=m+f;if(typeof a=="number"&&(p=Math.max(a,p)),typeof i=="number"&&(p=Math.min(i,p)),d){const j=typeof h=="number"?(String(h).split(".")[1]||"").length:2;p=parseFloat(p.toFixed(Math.max(j,2)))}s==null||s(p)};return l.jsxs("div",{className:"w-full flex items-center gap-2",children:[l.jsx("input",{id:g,name:e,type:"number",inputMode:d?"decimal":"numeric",value:r??"",onChange:w,onKeyDown:N,disabled:o,min:a,max:i,step:h,"aria-label":t||e,"aria-describedby":n?`${g||Nd(e)||e}-description`:void 0,className:"ui-control ui-input"}),typeof a=="number"||typeof i=="number"?l.jsxs("div",{className:"hidden sm:flex flex-col text-[10px] text-[#6A6FA8] text-right leading-tight",children:[typeof a=="number"&&l.jsxs("span",{children:["min ",a]}),typeof i=="number"&&l.jsxs("span",{children:["max ",i]})]}):null]})}const xs=u.memo(Rx);function Ix({name:e,label:t,description:n,value:r,onChange:s,disabled:o=!1}){const a=!!r,i=()=>{o||s==null||s(!a)},c=d=>{(d.key===" "||d.key==="Enter")&&(d.preventDefault(),i())};return l.jsxs("button",{id:e,type:"button",role:"switch","aria-checked":a,"aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0,onClick:i,onKeyDown:c,disabled:o,className:`ui-switch ${a?"is-on":""}`,children:[l.jsx("span",{className:"ui-switch-track",children:l.jsx("span",{className:"ui-switch-knob"})}),l.jsx("span",{className:"ui-switch-state",children:a?"On":"Off"})]})}const kd=u.memo(Ix),zx=/\.(safetensors|ckpt|pt|pth)$/i;function Tc(e){if(typeof e!="string")return!1;const t=e.trim();if(!t)return!1;const r=t.replace(/\\/g,"/").split("/").filter(Boolean).pop()||"";return zx.test(r)}function Rm(e){if(typeof e!="string")return{folder:"",base:""};const n=e.trim().replace(/\\/g,"/").split("/").filter(Boolean),s=(n.pop()||"").replace(/\.[^.]+$/,"");return{folder:n.join(" ").trim(),base:s}}function Ei(e){if(!Tc(e))return e;const{folder:t,base:n}=Rm(e);if(!n)return e;if(!t)return n;const r=t.split(/\s+/).filter(Boolean),s=r[r.length-1]||"";if(s&&n.toLowerCase().startsWith(s.toLowerCase())){const o=n.slice(s.length);return o?`${t}${o}`:t}return`${t} ${n}`.trim()}function Tx(e,t){try{if(typeof window>"u"||!e)return null;const n=e.getItem(t);return n?JSON.parse(n):null}catch{return null}}function Mo(e,t,n){try{if(typeof window>"u"||!e)return;e.setItem(t,JSON.stringify(n))}catch{}}function Qt(){try{return typeof window>"u"?null:window.sessionStorage||null}catch{return null}}function Qr(){try{return typeof window>"u"?null:window.localStorage||null}catch{return null}}const Im=750,hn=new Map,Jt=new Map,Zt=new Map,Ar=new Map,en=new Map,tn=new Map;function zm(e){var t;if(Jt.has(e)&&(clearTimeout(Jt.get(e)),Jt.delete(e)),Zt.has(e)){try{(t=window.cancelIdleCallback)==null||t.call(window,Zt.get(e))}catch{}Zt.delete(e)}hn.has(e)&&(Mo(Qt(),e,hn.get(e)),hn.delete(e))}function Ax(e){var r;if(Jt.has(e)&&(clearTimeout(Jt.get(e)),Jt.delete(e)),Zt.has(e)){try{(r=window.cancelIdleCallback)==null||r.call(window,Zt.get(e))}catch{}Zt.delete(e)}const t=()=>{hn.has(e)&&(Mo(Qt(),e,hn.get(e)),hn.delete(e))},n=setTimeout(()=>{Jt.delete(e);try{if(typeof window<"u"&&typeof window.requestIdleCallback=="function"){const s=window.requestIdleCallback(()=>{Zt.delete(e),t()},{timeout:2500});Zt.set(e,s);return}}catch{}t()},Im);Jt.set(e,n)}function $x(){Array.from(Jt.values()).forEach(e=>clearTimeout(e)),Jt.clear(),Array.from(Zt.values()).forEach(e=>{var t;try{(t=window.cancelIdleCallback)==null||t.call(window,e)}catch{}}),Zt.clear(),Array.from(hn.entries()).forEach(([e,t])=>{Mo(Qt(),e,t)}),hn.clear(),Array.from(en.values()).forEach(e=>clearTimeout(e)),en.clear(),Array.from(tn.values()).forEach(e=>{var t;try{(t=window.cancelIdleCallback)==null||t.call(window,e)}catch{}}),tn.clear(),Array.from(Ar.entries()).forEach(([e,t])=>{try{const n=Qt();n&&n.setItem(e,t)}catch{}}),Ar.clear()}if(typeof window<"u"&&!window.__cozygenFormStateFlush){const e=()=>$x();window.addEventListener("beforeunload",e),window.addEventListener("pagehide",e),window.__cozygenFormStateFlush=!0}function Mx(e){var r;if(!e)return{};const t=`${e}_formData`,n=Tx(Qt(),t);if(n&&typeof n=="object")return n;try{const s=Qr();(r=s==null?void 0:s.removeItem)==null||r.call(s,t)}catch{}return{}}function uo(e,t,n={}){var o;if(!e)return;const{immediate:r=!1}=n||{},s=`${e}_formData`;if(r){zm(s),Mo(Qt(),s,t||{});try{const a=Qr();(o=a==null?void 0:a.removeItem)==null||o.call(a,s)}catch{}return}hn.set(s,t||{}),Ax(s)}function Ox(e){e&&zm(`${e}_formData`)}function Fx(e,t,n=Im){var o;if(Ar.set(e,t),en.has(e)&&(clearTimeout(en.get(e)),en.delete(e)),tn.has(e)){try{(o=window.cancelIdleCallback)==null||o.call(window,tn.get(e))}catch{}tn.delete(e)}const r=()=>{const a=Ar.get(e);Ar.delete(e);try{const i=Qt();i&&i.setItem(e,a)}catch{}},s=setTimeout(()=>{en.delete(e);try{if(typeof window<"u"&&typeof window.requestIdleCallback=="function"){const a=window.requestIdleCallback(()=>{tn.delete(e),r()},{timeout:2e3});tn.set(e,a);return}}catch{}r()},n);en.set(e,s)}function Dx(e,t={}){var s,o;const{immediate:n=!1}=t||{},r="cozygen_last_param";if(n){if(en.has(r)&&(clearTimeout(en.get(r)),en.delete(r)),tn.has(r)){try{(s=window.cancelIdleCallback)==null||s.call(window,tn.get(r))}catch{}tn.delete(r)}Ar.delete(r);try{const a=Qt();a&&a.setItem(r,e||"");const i=Qr();(o=i==null?void 0:i.removeItem)==null||o.call(i,r)}catch{}return}Fx(r,e||"")}function Ux(){var t,n;const e="cozygen_last_param";try{const r=Qt(),s=((t=r==null?void 0:r.getItem)==null?void 0:t.call(r,e))||"";if(s)return s;const o=Qr();(n=o==null?void 0:o.removeItem)==null||n.call(o,e)}catch{}return""}function Tm(e,t){const n=e?String(e):"global",r=t?String(t):"";return`cozygen_dropdown_folder:${n}:${r}`}function Cd(e,t){var r,s;const n=Tm(e,t);try{const o=Qt(),a=((r=o==null?void 0:o.getItem)==null?void 0:r.call(o,n))||"";if(a)return a;const i=Qr();(s=i==null?void 0:i.removeItem)==null||s.call(i,n)}catch{}return""}function Bx(e,t,n){var s;const r=Tm(e,t);try{const o=Qt();o&&o.setItem(r,String(n||""));const a=Qr();(s=a==null?void 0:a.removeItem)==null||s.call(a,r)}catch{}}function Wx({workflowName:e,name:t,label:n,description:r,value:s,onChange:o,disabled:a=!1,options:i=[]}){const c=s??"",[d,y]=u.useState(()=>Cd(e,t)||"All");u.useEffect(()=>{const m=Cd(e,t);y(m||"All")},[e,t]);const h=u.useMemo(()=>(i||[]).map(m=>typeof m=="string"?{value:m,label:m}:{value:m.value??m.name??"",label:m.label??m.name??String(m.value??"")}),[i]),g=(m="")=>{if(typeof m!="string")return"Other";if(!m.includes("/"))return"root";const f=m.split("/");return f.slice(0,f.length-1).join("/")||"root"},v=u.useMemo(()=>{const m=new Set(["All"]);return h.forEach(f=>m.add(g(f.label))),Array.from(m).sort((f,p)=>f.localeCompare(p))},[h]);u.useEffect(()=>{v.includes(d)||y("All")},[v,d]),u.useEffect(()=>{Bx(e,t,d)},[e,t,d]);const w=u.useMemo(()=>{const m=f=>f.replace(/\.[^.]+$/,"");return h.filter(f=>{const p=g(f.label);return d==="All"||p===d}).map(f=>{const p=f.label||"";if(Tc(p)){const{base:E}=Rm(p),z=Ei(p);return{...f,label:d==="All"?z:E||z}}if(d==="All")return f;const j=p.split("/"),b=m(j[j.length-1]||p);return{...f,label:b}}).sort((f,p)=>f.label.localeCompare(p.label))},[h,d]),N=u.useMemo(()=>c===""||c===null||c===void 0?!0:w.some(m=>String(m.value)===String(c)),[w,c]),S=m=>{const f=m&&m.target?m.target.value:m;o==null||o(f)};return l.jsxs("div",{className:"w-full space-y-2",children:[l.jsx("div",{className:"relative w-full",children:l.jsx(Ye,{value:d,onChange:y,disabled:a,"aria-label":`Choose folder for ${n||t}`,size:"sm",options:v.map(m=>({value:m,label:m}))})}),l.jsx("div",{className:"relative w-full",children:l.jsx(Ye,{id:t,name:t,value:c,onChange:S,disabled:a,"aria-label":n||t,"aria-describedby":r?`${t}-description`:void 0,placeholder:w.length>0&&(c===void 0||c==="")?"Select...":void 0,emptyLabel:"No matches",options:[...!N&&c!==""?[{value:c,label:Ei(String(c))}]:[],...w]},`${t||"field"}:${d}`)})]})}const Li=u.memo(Wx);function bd(e=[]){return e.map(t=>typeof t=="string"?{value:t,label:t}:{value:t.value??t.name??"",label:t.label??t.name??String(t.value??"")})}function Ed(e,t){if(!e)return null;const n=String(e);if(t==="high"){const r=n.match(/(.+)-high(\.[^.]*)?$/i);return r?r[1]:null}if(t==="low"){const r=n.match(/(.+)-low(\.[^.]*)?$/i);return r?r[1]:null}return null}function Vx(e){return e?e.replace(/[_-]+/g," ").replace(/\s+/g," ").trim().replace(/^./,t=>t.toUpperCase()):""}const Hx=(...e)=>e.flat().map(n=>String(n??"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")).filter(Boolean).join("-")||"field";function Gx({name:e,label:t,description:n,highParam:r,lowParam:s,highChoices:o=[],lowChoices:a=[],formData:i={},onChangeParam:c,highStrengthParam:d,lowStrengthParam:y,strengthValue:h,onChangeStrength:g,highStrengthValue:v,lowStrengthValue:w,onChangeHighStrength:N,onChangeLowStrength:S,disabled:m=!1}){const f=u.useMemo(()=>bd(o),[o]),p=u.useMemo(()=>bd(a),[a]),j=u.useMemo(()=>{const O=new Map;p.forEach($=>{const te=Ed($.value,"low");te&&(O.has(te)||O.set(te,$))});const M=[];return f.forEach($=>{const te=Ed($.value,"high");if(!te)return;const se=O.get(te);se&&M.push({base:te,label:Vx(te),highValue:$.value,lowValue:se.value})}),M.sort(($,te)=>$.label.localeCompare(te.label)),M},[f,p]),b=u.useMemo(()=>{const O=i[r],M=i[s];if(!O||!M)return"";const $=j.find(te=>te.highValue===O&&te.lowValue===M);return $?$.base:""},[i,r,s,j]),E=d||y||`${e}_strength`,z=u.useMemo(()=>Hx(e||"lora",E||"strength"),[e,E]),P=!!(d||y),F=!!(d&&y),T=(O,M=1)=>typeof O=="number"?O:M,V=T(typeof h=="number"?h:typeof v=="number"?v:typeof w=="number"?w:void 0,1),fe=T(typeof v=="number"?v:void 0,V),W=T(typeof w=="number"?w:void 0,F?V:fe),de=F&&Math.abs(fe-W)>1e-4,[q,ne]=u.useState(de);u.useEffect(()=>{ne(de)},[de,r,s]);const ee=O=>{if(!c)return;const M=j.find($=>$.base===O);M&&(c(r,M.highValue),c(s,M.lowValue))};if(j.length===0)return l.jsxs("div",{className:"text-[11px] text-[#9DA3FFCC]",children:["No matching ",l.jsx("span",{className:"font-semibold",children:"-high"})," /"," ",l.jsx("span",{className:"font-semibold",children:"-low"})," LoRA pairs found."]});const k=`${z}-linked`,I=`${z}-high`,_=`${z}-low`,R=F?"Linked":"Strength",D=F?"Applies to high + low":d||y||"",Z=(O,M)=>{const $=Array.isArray(O)?O:[O];let te=!1;$.forEach(se=>{if(se==="high"&&typeof N=="function"){N(M);return}if(se==="low"&&typeof S=="function"){S(M);return}typeof g=="function"&&!te&&(g(M),te=!0)})},G=O=>{(d||!d&&!y)&&Z("high",O),y&&Z("low",O)},U=()=>{F&&ne(O=>{const M=!O;return M||G(typeof fe=="number"?fe:typeof W=="number"?W:V),M})};return l.jsxs("div",{className:"space-y-2",children:[l.jsx(Li,{name:`${e}_pair`,label:t,description:n,value:b||"",onChange:ee,disabled:m,options:j.map(O=>({value:O.base,label:O.label}))}),P&&l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[10px] uppercase tracking-[0.16em] text-[#9DA3FFCC]",children:"Strength"}),F&&l.jsx("button",{type:"button",className:"text-[10px] font-semibold tracking-[0.12em] uppercase text-[#E5E7FF]",onClick:U,disabled:m,children:q?"Link values":"Split values"})]}),q&&F?l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-3",children:[l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:I,className:"lora-strength-label is-high",children:[l.jsx("span",{className:"lora-strength-label-pill",children:"High"}),l.jsxs("span",{className:"lora-strength-label-text",children:["High strength",d&&l.jsx("span",{className:"lora-strength-label-hint",children:d})]})]}),l.jsx(xs,{name:`${E}_high`,label:"High strength",description:"",value:fe,onChange:O=>Z("high",O),disabled:m,isFloat:!0,min:0,max:2,step:.05,inputId:I})]}),l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:_,className:"lora-strength-label is-low",children:[l.jsx("span",{className:"lora-strength-label-pill",children:"Low"}),l.jsxs("span",{className:"lora-strength-label-text",children:["Low strength",y&&l.jsx("span",{className:"lora-strength-label-hint",children:y})]})]}),l.jsx(xs,{name:`${E}_low`,label:"Low strength",description:"",value:W,onChange:O=>Z("low",O),disabled:m,isFloat:!0,min:0,max:2,step:.05,inputId:_})]})]}):l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:k,className:"lora-strength-label is-linked",children:[l.jsx("span",{className:"lora-strength-label-pill",children:R}),l.jsxs("span",{className:"lora-strength-label-text",children:["LoRA strength",D&&l.jsx("span",{className:"lora-strength-label-hint",children:D})]})]}),l.jsx(xs,{name:E,label:"LoRA strength",description:"",value:V,onChange:G,disabled:m,isFloat:!0,min:0,max:2,step:.05,inputId:k})]})]})]})}function Kx(e,t){if(e.disabled!==t.disabled||e.name!==t.name||e.label!==t.label||e.description!==t.description||e.highParam!==t.highParam||e.lowParam!==t.lowParam||e.highStrengthParam!==t.highStrengthParam||e.lowStrengthParam!==t.lowStrengthParam||e.strengthValue!==t.strengthValue||e.highStrengthValue!==t.highStrengthValue||e.lowStrengthValue!==t.lowStrengthValue||e.highChoices!==t.highChoices||e.lowChoices!==t.lowChoices||e.onChangeParam!==t.onChangeParam||e.onChangeStrength!==t.onChangeStrength||e.onChangeHighStrength!==t.onChangeHighStrength||e.onChangeLowStrength!==t.onChangeLowStrength)return!1;const n=e.formData||{},r=t.formData||{};return!(n[e.highParam]!==r[t.highParam]||n[e.lowParam]!==r[t.lowParam])}const Ld=u.memo(Gx,Kx);function Qx({id:e,label:t,description:n,preview:r,expanded:s=!1,onToggle:o,children:a,trailing:i,className:c=""}){const d=typeof o=="function",y=e?`${e}-description`:void 0,h=e?`${e}-panel`:void 0,g=typeof t=="string"?t.trim().replace(/\s+/gu," ").replace(/:\s*$/u,""):t,v=typeof n=="string"?n.trim().replace(/\s+/gu," "):n,w=typeof r=="string"||typeof r=="number"?String(r):void 0,N=d?"button":"div",S=d?{type:"button",onClick:o,"aria-expanded":s,"aria-controls":h,"aria-describedby":v?y:void 0}:{};return l.jsxs("div",{className:["field-row",c].filter(Boolean).join(" "),children:[l.jsxs(N,{...S,className:["field-row-head",d?"is-collapsible":"is-static",s?"is-expanded":""].filter(Boolean).join(" "),children:[l.jsxs("div",{className:"field-row-main",children:[l.jsx("div",{className:"field-row-label",children:g}),v?l.jsx("div",{id:y,className:"field-row-description",children:v}):null]}),l.jsxs("div",{className:"field-row-trailing",children:[i?l.jsx("div",{className:"field-row-trailing-control",children:i}):null,r?l.jsx("div",{className:"field-row-preview",title:w,children:r}):null,d?l.jsx("div",{className:"field-row-chevron","aria-hidden":"true",children:l.jsx(Ao,{size:16})}):null]})]}),d&&s?l.jsx("div",{id:h,className:"field-row-body",children:a}):null]})}const ga=u.memo(Qx),Yx=16,qx=[" - "," ","-","_"],Am=e=>[...new Set(e.filter(Boolean))],fo=(e,t)=>{const n=String(e||"").trim(),r=qx.map(s=>`${n}${s}${t}`);return r.push(`${n}${t}`),Am(r)},Pd=(e,t)=>{const n=fo(`${e} Strength`,t),r=fo(e,t).map(s=>`${s} Strength`);return Am([...n,...r])},_d=e=>String(e||"").toLowerCase().replace(/[\s_-]+/g,""),xl=(e,t=[])=>{if(!e)return null;const n=Array.isArray(t)?t:[t];for(const s of n){if(!s)continue;const o=e.get(s);if(o)return{name:s,input:o}}const r=new Map;n.forEach(s=>{s&&r.set(_d(s),s)});for(const[s,o]of e.entries()){const a=_d(s);if(r.has(a))return{name:s,input:o}}return null},Xx=Array.from({length:Yx},(e,t)=>{const n=t+1,r=fo("Lora High",n),s=fo("Lora Low",n),o=Pd("Lora High",n),a=Pd("Lora Low",n);return{id:`video_lora_${n}`,label:`Video LoRA ${n}`,highParam:r[0],lowParam:s[0],highParamAliases:r,lowParamAliases:s,highStrengthParam:o[0],lowStrengthParam:a[0],highStrengthParamAliases:o,lowStrengthParamAliases:a}});function Jx(e){var r,s;const t=((r=e==null?void 0:e.inputs)==null?void 0:r.param_type)||((s=e==null?void 0:e.inputs)==null?void 0:s.Param_type),n=String(t||"STRING").toUpperCase();return["NUMBER","FLOAT","INT"].includes(n)?"NUMBER":["BOOLEAN","BOOL"].includes(n)?"BOOLEAN":["DROPDOWN","CHOICE","SELECT"].includes(n)?"DROPDOWN":"STRING"}function Zx(e){const t=(e==null?void 0:e.inputs)||{};return t.label||t.display_name||t.title||t.param_name||(e==null?void 0:e.title)||(e==null?void 0:e.class_type)||"Parameter"}function ew(e){const t=(e==null?void 0:e.inputs)||{};return t.description||t.help||t.tooltip||t.doc||""}function hr(e){const t=(e==null?void 0:e.inputs)||{};return t.param_name||t.name||t.key||t.id||`param_${(e==null?void 0:e.id)||"unknown"}`}function cs(e){const t=(e==null?void 0:e.inputs)||{},n=t.choices||t.options||[],r=t.default_value??t.value??t.default_choice??(n&&n.length?n[0]:"")??"";return{paramName:hr(e),label:Zx(e),description:ew(e),paramType:Jx(e),multiline:!!t.multiline,min:typeof t.min=="number"?t.min:void 0,max:typeof t.max=="number"?t.max:void 0,step:typeof t.step=="number"?t.step:void 0,choices:n,defaultValue:r}}function tw({inputs:e=[],formData:t={},onFormChange:n,workflowName:r,onParamEdited:s,onSpotlight:o,compactControls:a=!0,collapseAllKey:i=0,collapseAllCollapsed:c=!0,lastEditedParam:d="",spotlightName:y="",onCloseSpotlight:h=()=>{},onVisibleParamsChange:g=()=>{},aliasOptions:v=[],aliasCatalog:w=[],onOpenComposer:N}){const[S,m]=u.useState({}),[f,p]=u.useState(0),j=u.useRef(t);u.useEffect(()=>{j.current=t},[t]);const b=u.useCallback((I,_)=>{if((I==null?void 0:I.paramType)==="BOOLEAN")return _?"On":"Off";if(_==null||_==="")return"Empty";if(typeof _=="string"){const R=_.trim();if(!R)return"Empty";const D=240,Z=140,G=R.length>D?R.slice(0,D):R,O=/[\r\n\t]/.test(G)||/\s{2,}/u.test(G)?G.replace(/\s+/gu," ").trim():G;if(O.length>Z)return`${O.slice(0,Z)}`;const M=Ei(O);return R.length>D?`${M}`:M}return String(_)},[]),E=u.useCallback((I,_)=>{!n||!I||(n(I,_),s==null||s(I),m(R=>(R==null?void 0:R[I])===!1?R:{...R,[I]:!1}))},[n,s]),z=u.useCallback(I=>{I&&m(_=>({..._,[I]:!(_!=null&&_[I])}))},[]),P=u.useMemo(()=>e||[],[e]),F=u.useMemo(()=>{const I=new Map;return(P||[]).forEach(_=>{const R=hr(_);R&&I.set(R,D=>E(R,D))}),I},[E,P]),T=u.useMemo(()=>{const I=new Map;return(P||[]).forEach(_=>{const R=hr(_);R&&I.set(R,(D,Z)=>{var G,U;E(R,D),(U=(G=Z==null?void 0:Z.target)==null?void 0:G.blur)==null||U.call(G),y===R&&(h==null||h())})}),I},[E,h,y,P]),V=u.useMemo(()=>{const I=new Map;return(P||[]).forEach(_=>{const R=hr(_);R&&I.set(R,()=>z(R))}),I},[z,P]);u.useEffect(()=>{const I={};(e||[]).forEach(_=>{const R=hr(_);R&&(I[R]=c)}),d&&(I[d]=!1),m(I)},[i,c,e,d]);const fe=u.useMemo(()=>{const I=new Map;return(e||[]).forEach(_=>{const R=hr(_);R&&I.set(R,_)}),I},[e]),W=u.useMemo(()=>{const I=[];return Xx.forEach(_=>{const R=xl(fe,_.highParamAliases||_.highParam),D=xl(fe,_.lowParamAliases||_.lowParam);if(!R||!D)return;const Z=R.input,G=D.input,U=cs(Z),O=cs(G);if(U.paramType!=="DROPDOWN"||O.paramType!=="DROPDOWN")return;const M=U.choices||[],$=O.choices||[];if(!M.length||!$.length)return;const te=xl(fe,_.highStrengthParamAliases||_.highStrengthParam),se=xl(fe,_.lowStrengthParamAliases||_.lowStrengthParam);I.push({..._,highParam:R.name,lowParam:D.name,highStrengthParam:te==null?void 0:te.name,lowStrengthParam:se==null?void 0:se.name,highInput:Z,lowInput:G,highCfg:U,lowCfg:O})}),I},[fe]),de=u.useMemo(()=>{const I=new Map;return W.forEach(_=>{I.set(_.highParam,_)}),I},[W]),q=u.useMemo(()=>{const I=new Set;return W.forEach(_=>{I.add(_.highParam),I.add(_.lowParam),_.highStrengthParam&&I.add(_.highStrengthParam),_.lowStrengthParam&&I.add(_.lowStrengthParam)}),I},[W]),ne=u.useMemo(()=>{const I=[];return(P||[]).forEach(_=>{const R=cs(_),D=R.paramName,Z=de.get(D);if(Z){I.push({name:D,label:Z.label||R.label,description:R.description,render:G=>{const U=G||j.current||{},O=Z.highStrengthParam?U[Z.highStrengthParam]:void 0,M=Z.lowStrengthParam?U[Z.lowStrengthParam]:void 0,$=O??M??1;return l.jsx(Ld,{name:Z.id||Z.highParam,label:Z.label||R.label,highParam:Z.highParam,lowParam:Z.lowParam,highChoices:Z.highCfg.choices,lowChoices:Z.lowCfg.choices,formData:U,onChangeParam:E,highStrengthParam:Z.highStrengthParam,lowStrengthParam:Z.lowStrengthParam,strengthValue:$,highStrengthValue:O,lowStrengthValue:M,onChangeHighStrength:Z.highStrengthParam?F.get(Z.highStrengthParam):void 0,onChangeLowStrength:Z.lowStrengthParam?F.get(Z.lowStrengthParam):void 0,disabled:!1},`lora-${D}-${f}`)}});return}q.has(D)||I.push({name:D,label:R.label,description:R.description,render:G=>{const U=G||j.current||{},O={name:D,label:R.label,description:R.description,value:U[D],defaultValue:R.defaultValue,disabled:!1};return R.paramType==="NUMBER"?l.jsx(xs,{...O,onChange:F.get(D),min:R.min,max:R.max,step:R.step,isFloat:!0},`field-${D}-number-${f}`):R.paramType==="BOOLEAN"?l.jsx(kd,{...O,onChange:F.get(D)},`field-${D}-bool-${f}`):R.paramType==="DROPDOWN"?l.jsx(Li,{...O,workflowName:r,onChange:F.get(D),options:R.choices||[]},`field-${D}-dropdown-${f}`):l.jsx(Sd,{...O,aliasOptions:v,aliasCatalog:w,onOpenComposer:N,onChange:F.get(D),onEnter:T.get(D),multiline:R.multiline},`field-${D}-string-${f}`)}})}),I},[P,de,q,f,r,v,w,N,E,F,T,y,h]),ee=u.useMemo(()=>{const I=new Map;return ne.forEach(_=>I.set(_.name,_)),I},[ne]);u.useEffect(()=>{g==null||g(ne.map(I=>I.name))},[ne,g]);const k=u.useCallback(I=>{const _=ne.map(U=>U.name),R=ee.get(I);if(!R)return;const D=_.indexOf(I),Z=D>0?_[D-1]:null,G=D>=0&&D<_.length-1?_[D+1]:null;p(U=>U+1),o==null||o({name:I,label:R.label,description:R.description,render:U=>R.render(U||j.current),order:_,index:D>=0?D:0,total:_.length,onPrev:Z?()=>k(Z):null,onNext:G?()=>k(G):null})},[ee,o,ne]);return l.jsx("div",{className:"settings-list",children:P.map(I=>{const _=cs(I),R=_.paramName,D=de.get(R);if(D){const{id:se,label:J,highParam:pe,lowParam:Ie,highStrengthParam:ye,lowStrengthParam:we,highCfg:he,lowCfg:je}=D,X=ye?t[ye]:void 0,Pe=we?t[we]:void 0,Je=X??Pe??1,Ze=R?`param-${R}`:void 0,re=a?S[R]??!0:!!S[R],me=re?b(_,[t[pe],t[Ie]].filter(Boolean).join("  ")):null,H=(K=t)=>{const le=ye?K==null?void 0:K[ye]:void 0,ue=we?K==null?void 0:K[we]:void 0,Ee=le??ue??Je;return l.jsx(Ld,{name:se||pe,label:J||_.label,highParam:pe,lowParam:Ie,highChoices:he.choices,lowChoices:je.choices,formData:K,onChangeParam:E,highStrengthParam:ye,lowStrengthParam:we,strengthValue:Ee,highStrengthValue:le,lowStrengthValue:ue,onChangeHighStrength:ye?F.get(ye):void 0,onChangeLowStrength:we?F.get(we):void 0,disabled:!1},`lora-${R}`)};return l.jsx("div",{id:Ze,"data-param-name":R,"data-param-label":J||_.label,"data-param-type":"lora_pair",className:"settings-row",children:l.jsx(ga,{id:R,label:J||_.label,description:_.description,preview:me,expanded:!re,onToggle:V.get(R),children:re?null:H(t)})},`lora_pair_${se||pe}`)}if(q.has(R))return null;const Z=t[R],U={name:R,label:_.label,description:_.description,value:Z,disabled:!1,defaultValue:_.defaultValue},O=(se=t,J=!1)=>{const pe={...U,value:se==null?void 0:se[R]};return _.paramType==="NUMBER"?l.jsx(xs,{...pe,inputId:R,onChange:F.get(R),min:_.min,max:_.max,step:_.step,isFloat:!0},`field-${R}-number-${f}`):_.paramType==="BOOLEAN"?l.jsx(kd,{...pe,onChange:F.get(R)},`field-${R}-bool-${f}`):_.paramType==="DROPDOWN"?l.jsx(Li,{...pe,workflowName:r,onChange:F.get(R),options:_.choices||[]},`field-${R}-dropdown-${f}`):l.jsx(Sd,{...pe,aliasOptions:v,aliasCatalog:w,onOpenComposer:N,onChange:F.get(R),onEnter:T.get(R),multiline:_.multiline||y===R||J},`field-${R}-string-${f}`)},M=R?`param-${R}`:void 0,$=a?S[R]??!0:!!S[R];if(_.paramType==="BOOLEAN")return l.jsx("div",{id:M,"data-param-name":R,"data-param-label":_.label,"data-param-type":"single",className:"settings-row",children:l.jsx(ga,{id:R,label:_.label,description:_.description,trailing:O(t,!0)})},R);const te=$?b(_,Z):null;return l.jsx("div",{id:M,"data-param-name":R,"data-param-label":_.label,"data-param-type":"single",className:"settings-row",children:l.jsx(ga,{id:R,label:_.label,description:_.description,preview:te,expanded:!$,onToggle:V.get(R),children:$?null:O(t,!0)})},R)})})}function nw(e){return(e||[]).map(t=>{var n;if(["CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput","CozyGenChoiceInput"].includes(t.class_type)){let r=t.class_type.replace("CozyGen","").replace("Input","").toUpperCase();return r==="CHOICE"&&(r="DROPDOWN"),{...t,inputs:{...t.inputs,param_type:r,Multiline:((n=t.inputs)==null?void 0:n.display_multiline)||!1}}}return t})}function rw({workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,sectionRef:s,compactControls:o=!1,collapseAllState:a=null,onSpotlight:i,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:y,aliasOptions:h=[],aliasCatalog:g=[],onOpenComposer:v}){const w=u.useMemo(()=>nw((t||[]).filter(N=>N.class_type!=="CozyGenImageInput")),[t]);return l.jsx("section",{className:"settings-surface scroll-mt-24",ref:s,children:l.jsx(tw,{workflowName:e,inputs:w,formData:n,onFormChange:r,compactControls:o,collapseAllKey:(a==null?void 0:a.key)??0,collapseAllCollapsed:(a==null?void 0:a.collapsed)??!0,onSpotlight:i,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:y,aliasOptions:h,aliasCatalog:g,onOpenComposer:v})})}function sw({workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,parameterSectionRef:s,compactControls:o=!0,collapseAllState:a=null,onSpotlight:i,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:y,aliasOptions:h=[],aliasCatalog:g=[],onOpenComposer:v}){return l.jsx(rw,{workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,sectionRef:s,compactControls:o,collapseAllState:a,onSpotlight:i,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:y,aliasOptions:h,aliasCatalog:g,onOpenComposer:v})}const Rd=u.forwardRef(function({title:t,kicker:n,meta:r,defaultOpen:s=!0,variant:o="card",className:a="",bodyClassName:i,children:c},d){const y=o==="bare",h=(y?["collapsible-section","collapsible-section--bare",a]:["ui-panel","collapsible-card","sectioned-card",a]).filter(Boolean).join(" "),g=(y?["collapsible-section-body",i||"space-y-4"]:["collapsible-card-body",i||"space-y-4"]).filter(Boolean).join(" "),v=r!=null?l.jsx("div",{className:"collapsible-card-summary-meta",children:r}):null;return l.jsxs("details",{ref:d,className:h,open:s,children:[l.jsxs("summary",{className:y?"collapsible-section-summary":"collapsible-card-summary",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[n?l.jsx("span",{className:"ui-kicker",children:n}):null,l.jsx("span",{className:"text-sm font-semibold tracking-wide",children:t})]}),v,y?l.jsx("span",{className:"collapsible-section-chevron","aria-hidden":"true",children:l.jsx(Ao,{size:16})}):null]}),l.jsx("div",{className:g,children:c})]})});function Id(e){try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return""}}function lw({open:e,onClose:t,logs:n=[],onClear:r}){const s=u.useMemo(()=>(n||[]).map(o=>`[${Id(o.ts)}] ${String(o.level||"info").toUpperCase()} ${o.message}`).join(`
`),[n]);return l.jsx(St,{open:e,onClose:t,title:"Run logs",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>{var o,a;try{(a=(o=navigator.clipboard)==null?void 0:o.writeText)==null||a.call(o,s||"")}catch{}},children:"Copy"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:r,children:"Clear"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Close"})]}),children:l.jsx("pre",{className:"runlog-pre",children:n!=null&&n.length?n.map((o,a)=>l.jsxs("div",{className:`runlog-line is-${o.level||"info"}`,children:[l.jsx("span",{className:"runlog-ts",children:Id(o.ts)}),l.jsx("span",{className:"runlog-msg",children:o.message})]},`${o.ts}-${a}`)):"No logs yet."})})}const Ct=u.forwardRef(function({as:t,href:n,variant:r,size:s="md",iconOnly:o=!1,active:a=!1,pressed:i,className:c="",type:d,...y},h){const g=t||(n?"a":"button"),v=s==="sm"?"is-compact":s==="xs"?"is-tiny":s==="icon"?"is-icon":"",w=r?`is-${r}`:"",m=["ui-button",v,w,o?"is-icon":"",a?"is-active":"",c].filter(Boolean).join(" "),f={ref:h,className:m,"aria-pressed":i,...y};return g==="button"?l.jsx("button",{...f,type:d||"button"}):l.jsx(g,{...f,href:n})}),ow="cozygen_field_order_v1";function aw(e,t){if(!e)return t;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:t}catch{return t}}function iw(){if(typeof window>"u")return{};try{return aw(window.localStorage.getItem(ow),{})}catch{return{}}}function cw(e){if(Array.isArray(e))return{order:e.filter(Boolean),hidden:{}};if(!e||typeof e!="object")return{order:[],hidden:{}};const t=Array.isArray(e.order)?e.order.filter(Boolean):[],n=e.hidden&&typeof e.hidden=="object"?e.hidden:{};return{order:t,hidden:n}}function uw(e){if(!e)return{order:[],hidden:{}};const n=iw()[e];return cw(n)}function dw(e,t){let n=Array.isArray(t)?t:[];if(!e||n.length===0)return n;const{order:r,hidden:s}=uw(e);if(r&&r.length){const o=new Map;n.forEach(i=>{var d;const c=(d=i==null?void 0:i.inputs)==null?void 0:d.param_name;c&&!o.has(c)&&o.set(c,i)});const a=[];r.forEach(i=>{const c=o.get(i);c&&(a.push(c),o.delete(i))}),n.forEach(i=>{var d;const c=(d=i==null?void 0:i.inputs)==null?void 0:d.param_name;if(!c){a.push(i);return}o.has(c)&&(a.push(i),o.delete(c))}),n=a}return n=n.filter(o=>{var i;const a=(i=o==null?void 0:o.inputs)==null?void 0:i.param_name;return a?!s[a]:!0}),n}function fw(){const[e,t]=u.useState([]),[n,r]=u.useState(null),[s,o]=u.useState(!0),[a,i]=u.useState(null);u.useEffect(()=>{let d=!1;async function y(){o(!0),i(null);try{const h=await Fv();if(d)return;const g=(h==null?void 0:h.workflows)||[];t(g);let v=null;try{if(v=typeof window<"u"?sessionStorage.getItem("selectedWorkflow"):null,typeof window<"u")try{localStorage.removeItem("selectedWorkflow")}catch{}}catch{v=null}if(v&&g.includes(v))r(v);else if(g.length>0){r(g[0]);try{typeof window<"u"&&sessionStorage.setItem("selectedWorkflow",g[0])}catch{}}else r(null)}catch(h){if(d)return;console.error("Failed to load workflows",h),i(h)}finally{d||o(!1)}}return y(),()=>{d=!0}},[]);const c=u.useCallback(d=>{r(d);try{if(typeof window<"u"&&sessionStorage.setItem("selectedWorkflow",d),typeof window<"u")try{localStorage.removeItem("selectedWorkflow")}catch{}}catch{}},[]);return{workflows:e,selectedWorkflow:n,selectWorkflow:c,loading:s,error:a}}const pw={clip_name1:"clip",clip_name2:"clip",unet_name:"unet",vae_name:"vae",sampler_name:"sampler",scheduler:"scheduler"},mw=["CozyGenDynamicInput","CozyGenImageInput","CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput","CozyGenChoiceInput"];function hw(e){const[t,n]=u.useState(null),[r,s]=u.useState([]),[o,a]=u.useState({}),[i,c]=u.useState(!1),[d,y]=u.useState(null);u.useEffect(()=>{if(!e){n(null),s([]),a({});return}let w=!1;const N=new AbortController;async function S(){c(!0),y(null);try{typeof performance<"u"&&performance.mark&&performance.mark("cozygen:workflow:load")}catch{}try{const m=await Dv(e,{signal:N.signal});if(w)return;for(const E in m){const z=m[E];z.class_type==="CozyGenImageInput"&&!z.inputs.param_name&&(z.inputs.param_name="Image Input"),m[E].id=E}n(m);const f=Object.values(m).filter(E=>mw.includes(E.class_type)),p=await Promise.all(f.map(async E=>{const z=E.class_type==="CozyGenDynamicInput"&&E.inputs.param_type==="DROPDOWN",P=E.class_type==="CozyGenChoiceInput";if(z||P){const F=E.inputs.param_name;let T=E.inputs.choice_type||E.properties&&E.properties.choice_type;if(!T&&z&&(T=pw[F]),T)try{const V=await Uv(T,{signal:N.signal,refresh:T==="loras"});E.inputs.choices=V.choices||[]}catch(V){(V==null?void 0:V.name)!=="AbortError"&&console.error(`Choices for ${F} failed`,V),E.inputs.choices=[]}}return E}));if(w)return;s(p);const j=Mx(e),b={};p.forEach(E=>{const z=E.inputs.param_name;if(!z)return;if(j[z]!==void 0){b[z]=j[z];return}let P;if(["CozyGenDynamicInput","CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput"].includes(E.class_type)){if(P=E.inputs.default_value,E.class_type==="CozyGenIntInput"){const F=parseInt(P,10);P=Number.isNaN(F)?0:F}else if(E.class_type==="CozyGenFloatInput"){const F=parseFloat(P);P=Number.isNaN(F)?0:F}}else if(E.class_type==="CozyGenChoiceInput"){const F=E.inputs.choices||[];P=F.length?F[0]:""}else E.class_type,P="";b[z]=P}),a(b);try{typeof performance<"u"&&performance.measure&&(performance.mark("cozygen:workflow:ready"),performance.measure(`cozygen:workflow:ready:${e||"unknown"}`,"cozygen:workflow:load","cozygen:workflow:ready"))}catch{}}catch(m){if(w)return;console.error("Failed to load workflow",m),y(m),n(null),s([])}finally{w||c(!1)}}return S(),()=>{Ox(e),w=!0,N.abort()}},[e]);const h=u.useMemo(()=>r.filter(w=>w.class_type==="CozyGenImageInput"),[r]),g=h[0]||null,v=u.useCallback((w,N)=>{a(S=>{const m={...S,[w]:N};return e&&uo(e,m),m})},[e]);return{workflowData:t,dynamicInputs:r,imageInputs:h,primaryImageInput:g,formData:o,setFormData:a,handleFormChange:v,loading:i,error:d}}const zd="::";function ws(e){const t={};return Object.entries(e||{}).forEach(([n,r])=>{const s=String(n||"").trim();if(!s||typeof r!="string")return;const o=r.trim();o&&(t[s]=o)}),t}function Ac(e){const t=new Map;return Object.entries(ws(e)).forEach(([n,r])=>{const s=n.toLowerCase();t.set(s,r),s.includes(zd)&&t.set(s.replace(zd,":"),r)}),t}function $m(e,t){if(typeof e!="string"||!e.includes("$"))return e;const n=t instanceof Map?t:Ac(t);return n.size?e.replace(/\$([a-z0-9_:-]+)\$/gi,(r,s)=>{const o=n.get(s.toLowerCase());return typeof o=="string"?o:r}):e}function gw(e,t){const n=t instanceof Map?t:Ac(t);if(!n.size||!e||typeof e!="object")return e;let r=!1;const s={};return Object.entries(e).forEach(([o,a])=>{if(typeof a=="string"){const i=$m(a,n);s[o]=i,i!==a&&(r=!0)}else s[o]=a}),r?s:e}function yw(e){return e?JSON.parse(JSON.stringify(e)):{}}function vw(e,t,n){const r=yw(e),s={...n||{}};if(!t||!Array.isArray(t))return{workflow:r,formData:s};for(const o of t){if(!o||!o.id||!o.inputs||!r[o.id])continue;const a=o.inputs.param_name;if(!a||o.class_type==="CozyGenImageInput")continue;let i=s[a];const c=r[o.id];if(!c||!c.inputs)continue;const d=o.class_type;i===void 0&&(d==="CozyGenChoiceInput"?i=o.inputs.value??o.inputs.default_choice??(o.inputs.choices&&o.inputs.choices[0])??"":i=o.inputs.default_value),i===void 0&&(i=""),s[a]=i,d==="CozyGenFloatInput"||d==="CozyGenIntInput"||d==="CozyGenStringInput"||d==="CozyGenDynamicInput"?c.inputs.default_value=i:d==="CozyGenChoiceInput"&&(c.inputs.value=i)}return{workflow:r,formData:s}}function xw({selectedWorkflow:e,workflowData:t,dynamicInputs:n,imageInputs:r,formData:s,setFormData:o,promptAliases:a=null}){const[i,c]=u.useState(!1),[d,y]=u.useState(!1),[h,g]=u.useState(0),[v,w]=u.useState(0),[N,S]=u.useState("Idle"),[m,f]=u.useState("idle"),[p,j]=u.useState([]),b=u.useRef({ts:0,value:0,max:0}),E=u.useRef(null),z=u.useRef(t),P=u.useRef(s),F=u.useRef(!1),T=u.useRef(0),V=u.useRef(0),fe=u.useRef("idle"),W=u.useRef(null),de=u.useRef(null);u.useEffect(()=>{z.current=t},[t]),u.useEffect(()=>{F.current=d},[d]),u.useEffect(()=>{T.current=h},[h]),u.useEffect(()=>{V.current=v},[v]),u.useEffect(()=>{fe.current=m},[m]),u.useEffect(()=>{P.current=s},[s]);const q=()=>{W.current&&(clearTimeout(W.current),W.current=null)},ne=()=>{de.current&&(clearTimeout(de.current),de.current=null)},ee=u.useCallback((G,U,O=null)=>{const M={ts:Date.now(),level:G||"info",message:String(U||""),extra:O||null};j($=>{const te=[...$||[],M];return te.length>250?te.slice(te.length-250):te})},[]),k=u.useCallback(()=>j([]),[]),I=()=>{if(!(typeof window>"u"||typeof window.dispatchEvent!="function"))try{window.dispatchEvent(new CustomEvent("cozygen:queue-finished"))}catch{}},_=()=>{ne(),de.current=setTimeout(()=>{F.current||(f("idle"),S("Idle"),g(0),w(0))},8e3)},R=u.useCallback(()=>{q(),c(!1),y(!1),g(0),w(0),S("Finished"),f("finished"),ee("success","Finished"),_(),I()},[ee]),D=u.useCallback((G="Error")=>{q(),c(!1),y(!1),S(G),f("error"),ee("error",G||"Error"),_()},[ee]);u.useEffect(()=>{q(),!(!d||!v||v<=0||h<v)&&(W.current=setTimeout(()=>{const G=F.current,U=T.current,O=V.current,M=fe.current;G&&O>0&&U>=O&&M!=="finished"&&M!=="error"&&R()},800))},[d,h,v,R]),u.useEffect(()=>{const G=()=>{const U=window.location.protocol==="https:"?"wss":"ws",O=window.location.host,M=Ec(),$=`${U}://${O}/ws${M?`?token=${encodeURIComponent(M)}`:""}`,te=new WebSocket($);E.current=te,te.onmessage=se=>{var Ie,ye,we;if(typeof se.data!="string")return;let J;try{J=JSON.parse(se.data)}catch{return}const pe=J.type;if(pe==="cozygen_batch_ready"){R();return}if(pe==="execution_success"||pe==="execution_finished"){F.current&&R();return}if(pe==="execution_error"||pe==="execution_interrupted"){ee("error","Execution error"),D("Execution error");return}if(pe==="status"){const he=J.data||{},je=he.status||he,X=je.exec_info||he.exec_info||je;if(X&&F.current){const Pe=X.queue_remaining??X.queue_pending??X.queue_remaining_items??0;(X.queue_running??X.running??0)===0&&Pe===0&&R()}return}if(pe==="executing"){ne(),f("running");const he=(Ie=J.data)==null?void 0:Ie.node,je=z.current;if(he&&je&&je[he]){const X=je[he],Pe=X.title||X.class_type||"Node";ee("info",`Executing: ${Pe}`,{nodeId:he}),S(`Executing: ${Pe}`)}else ee("info","Executing"),S("Executing");return}if(pe==="progress"){const he=((ye=J.data)==null?void 0:ye.value)??0,je=((we=J.data)==null?void 0:we.max)??0;g(he),w(je);const X=Date.now(),Pe=b.current;X-Pe.ts>2500&&(he!==Pe.value||je!==Pe.max)&&je>0&&(b.current={ts:X,value:he,max:je},ee("info",`Progress: ${he}/${je}`));return}},te.onclose=()=>{setTimeout(G,1e3)}};return G(),()=>{q(),ne(),E.current&&(E.current.onclose=null,E.current.close())}},[ee,D,R]);const Z=u.useCallback(async(G={})=>{if(!t)return;const{overrides:U=null,persistFormState:O=!0}=G||{};q(),ne(),c(!0),y(!0),S("Queuing prompt"),f("queued"),g(0),w(0),ee("info","Queuing prompt",{workflow:e||""});const M=P.current||{},$=U?{...M,...U||{}}:M,te=gw($,a||{}),{workflow:se,formData:J}=vw(t,n||[],te||{}),pe={...J,...$};O&&e&&uo(e,pe),O&&o(pe);const Ie=r||[];for(const ye of Ie){if(!ye||!ye.id||!ye.inputs)continue;const we=ye.inputs.param_name;if(!we)continue;const he=pe[we];if(!he){alert(`Please upload or select an image for "${we}" before generating.`),D("Missing image input");return}se[ye.id]&&se[ye.id].inputs&&(se[ye.id].inputs.image_filename=he)}try{let ye=se;if(a){const we=he=>{if(typeof he=="string")return $m(he,a);if(Array.isArray(he))return he.map(je=>we(je));if(he&&typeof he=="object"){const je=Array.isArray(he)?[]:{};return Object.entries(he).forEach(([X,Pe])=>{je[X]=we(Pe)}),je}return he};try{ye=we(se)}catch{ye=se}}wm({workflowName:e,workflow:ye,timestamp:Date.now()}),await Lc({prompt:ye}),ee("info","Prompt queued")}catch(ye){console.error("Failed to queue prompt",ye),ye!=null&&ye.unauthorized?(ee("error","Session expired. Please sign in again."),D("Session expired. Please sign in again."),window.location.hash="#/login"):(ee("error","Error queuing prompt"),D("Error queuing prompt"))}},[t,n,r,a,e,o,D,ee]);return{isLoading:i,progressValue:h,progressMax:v,statusText:N,statusPhase:m,handleGenerate:Z,logEntries:p,clearLogs:k}}const Mm="cozygen_prompt_aliases",Om="cozygen_alias_categories",Fm="cozygen_alias_category_list";function Td(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem(Mm);return e?JSON.parse(e)||{}:{}}catch{return{}}}function ya(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Mm,JSON.stringify(e||{}))}catch{}}function Ad(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem(Om);return e?JSON.parse(e)||{}:{}}catch{return{}}}function va(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Om,JSON.stringify(e||{}))}catch{}}function $d(){if(typeof window>"u")return[];try{const e=window.localStorage.getItem(Fm);return Array.isArray(JSON.parse(e))?JSON.parse(e):[]}catch{return[]}}function xa(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Fm,JSON.stringify(e||[]))}catch{}}function Dm(){const[e,t]=u.useState(()=>Td()),[n,r]=u.useState(()=>Ad()),[s,o]=u.useState(()=>$d()),[a,i]=u.useState(!1),[c,d]=u.useState(!1),[y,h]=u.useState(null),g=u.useCallback(async()=>{i(!0),h(null);try{const S=await Vv(),m=ws((S==null?void 0:S.items)||S||{}),f=(S==null?void 0:S.categories)||{},p=Array.isArray(S==null?void 0:S.categoryList)?S.categoryList:[];t(m),r(f),o(p),ya(m),va(f),xa(p)}catch(S){console.error("Failed to load prompt aliases",S),h(S);const m=ws(Td()),f=Ad(),p=$d();t(m),r(f),o(p)}finally{i(!1)}},[]),v=u.useCallback(async S=>{const m=(S==null?void 0:S.items)||S||{},f=(S==null?void 0:S.categories)||n||{},p=Array.isArray(S==null?void 0:S.categoryList)&&S.categoryList.length?S.categoryList:s.length?s:Array.from(new Set(Object.values(f).filter(Boolean))),j=ws(m||{});d(!0),h(null);try{await Hv({items:j,categories:f,categoryList:p}),t(j),r(f),o(p),ya(j),va(f),xa(p)}catch(b){throw console.error("Failed to save prompt aliases",b),h(b),ya(j),va(f),xa(p),b}finally{d(!1)}},[n,s]);u.useEffect(()=>{g()},[g]);const w=u.useMemo(()=>{const S=Ac(e),m=new Map(S);return Object.entries(n||{}).forEach(([f,p])=>{const j=String(p||"").trim();j&&(e!=null&&e[f])&&m.set(`${j}:${f}`,e[f])}),m},[e,n]),N=u.useMemo(()=>{const S=new Set,m=[];return w.forEach((f,p)=>{let j=p.includes("::")?p.replace("::",":"):p;const b=j.split(":");b.length>=3&&b[0]&&b[1]&&b[0].toLowerCase()===b[1].toLowerCase()&&(j=[b[0],...b.slice(2)].join(":"));const E=j.toLowerCase();S.has(E)||(S.add(E),m.push(j))}),m},[w]);return{aliases:e,aliasCategories:n,categoryList:s,aliasLookup:w,aliasOptions:N,loading:a,saving:c,error:y,refreshAliases:g,persistAliases:v}}const Um=u.createContext(null);function Bm(){const e=u.useContext(Um);if(!e)throw new Error("useStudioContext must be used within a StudioProvider");return e}function ww({children:e}){const{workflows:t,selectedWorkflow:n,selectWorkflow:r,loading:s,error:o}=fw(),{workflowData:a,dynamicInputs:i,imageInputs:c,primaryImageInput:d,formData:y,setFormData:h,handleFormChange:g,loading:v,error:w}=hw(n),N=Dm(),S=u.useMemo(()=>{const fe=[];return Object.entries(N.aliases||{}).forEach(([W,de])=>{const q=String(W).split("::"),ne=q.length>1,ee=N.aliasCategories&&N.aliasCategories[W]||(ne?q[0]:""),k=ne?q.slice(1).join("::"):W,I={key:W,name:k,category:ee,text:de,token:ee?`${ee}:${k}`:k};fe.push({...I,...zc(I)})}),fe},[N.aliases,N.aliasCategories]),m=u.useMemo(()=>dw(n,i),[n,i]),f=u.useMemo(()=>{const fe=(m||i||[]).filter(k=>(k==null?void 0:k.class_type)!=="CozyGenImageInput"),W=/\b(checkpoint|ckpt|lora|model|vae|embedding|clip|sampler|scheduler|seed)\b/i,de=k=>{const I=String((k==null?void 0:k.paramName)||"").toLowerCase(),_=String((k==null?void 0:k.label)||"").toLowerCase(),R=`${I} ${_}`,D=y==null?void 0:y[k==null?void 0:k.paramName],Z=typeof D=="string"?D:"";let G=0;return R.includes("prompt")&&(G+=100),R.includes("negative")&&R.includes("prompt")&&(G-=15),k!=null&&k.multiline&&(G+=10),Z.includes("$")&&(G+=20),W.test(R)&&(G-=200),Tc(Z)&&(G-=200),G};if(typeof(y==null?void 0:y.prompt)=="string")return"prompt";const q=fe.map(k=>cs(k)).filter(k=>(k==null?void 0:k.paramType)==="STRING"&&(k==null?void 0:k.paramName));if(!q.length)return"prompt";let ne=q[0],ee=de(ne);for(let k=1;k<q.length;k+=1){const I=q[k],_=de(I);_>ee&&(ne=I,ee=_)}return(ne==null?void 0:ne.paramName)||"prompt"},[i,y,m]),{isLoading:p,progressValue:j,progressMax:b,statusText:E,statusPhase:z,handleGenerate:P,logEntries:F,clearLogs:T}=xw({selectedWorkflow:n,workflowData:a,dynamicInputs:i,imageInputs:c,formData:y,setFormData:h,promptAliases:N.aliasLookup});u.useEffect(()=>{if(z==="finished"&&!(typeof window>"u")){try{window.localStorage.setItem("cozygen_gallery_pending","1")}catch{}window.dispatchEvent(new Event("cozygen:gallery-pending"))}},[z]),u.useEffect(()=>{if(typeof window>"u")return;const fe=z==="queued"||z==="running"||p;try{window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:fe}}))}catch{}},[z,p]);const V=u.useMemo(()=>({workflows:t,selectedWorkflow:n,selectWorkflow:r,workflowsLoading:s,workflowsError:o,workflowData:a,dynamicInputs:i,orderedDynamicInputs:m,imageInputs:c,primaryImageInput:d,formData:y,setFormData:h,handleFormChange:g,workflowLoading:v,workflowError:w,promptFieldName:f,aliasOptions:N.aliasOptions,aliasCatalog:S,aliasLookup:N.aliasLookup,aliasCategories:N.aliasCategories,aliasLoading:N.loading,aliasSaving:N.saving,aliasError:N.error,refreshAliases:N.refreshAliases,persistAliases:N.persistAliases,isLoading:p,progressValue:j,progressMax:b,statusText:E,statusPhase:z,handleGenerate:P,logEntries:F,clearLogs:T}),[t,n,r,s,o,a,i,m,c,d,y,h,g,v,w,f,N.aliasOptions,N.aliasLookup,N.aliasCategories,S,N.loading,N.saving,N.error,N.refreshAliases,N.persistAliases,p,j,b,E,z,P,F,T]);return l.jsx(Um.Provider,{value:V,children:e})}const jw=u.memo(function({workflows:t=[],selectedWorkflow:n,onWorkflowChange:r,workflowData:s,presets:o=[],presetName:a="",onPresetNameChange:i,selectedPresetId:c="",onPresetSelect:d,onPresetSave:y,onPresetDelete:h,presetStatus:g}){const v=Array.isArray(t)?t:[],w=Array.isArray(o)?o:[],N=w.length,S=N?`${N} saved`:"No presets yet",m=To("(min-width: 768px)"),[f,p]=u.useState(!1),[j,b]=u.useState(!1);u.useEffect(()=>{p(!1),b(!1)},[m]);const E=()=>{p(!1),b(!1)},z=()=>{if(!m){b(!0);return}p(T=>!T)},P=()=>{y(),E()},F=()=>{h(),E()};return l.jsxs("div",{className:"controls-context",children:[l.jsxs("div",{className:"controls-context-row",children:[l.jsxs("div",{className:"controls-context-field",children:[l.jsx("label",{className:"controls-context-label",htmlFor:"workflow-select",children:"Workflow"}),l.jsx(Ye,{id:"workflow-select",value:n||"",onChange:r,className:"controls-context-select","aria-label":"Workflow",size:"sm",placeholder:"Select workflow...",options:v.map(T=>({value:T,label:T}))})]}),l.jsxs("div",{className:"controls-context-field",children:[l.jsx("label",{className:"controls-context-label",htmlFor:"preset-select",children:"Preset"}),l.jsx(Ye,{id:"preset-select",value:c||"",onChange:d,className:"controls-context-select","aria-label":"Workflow preset",disabled:!s,size:"sm",placeholder:"Presets...",options:w.map(T=>({value:T.id,label:T.name}))})]}),l.jsx("div",{className:"controls-context-actions",children:l.jsxs("div",{className:"controls-context-menu",children:[l.jsx(Ct,{variant:"ghost",size:"xs",onClick:z,"aria-haspopup":m?"menu":"dialog","aria-expanded":m?f:j,"aria-label":"Manage presets",children:"Manage presets"}),m&&f?l.jsxs("div",{className:"controls-context-menu-items",role:"menu",children:[l.jsxs("div",{className:"controls-context-menu-row",children:[l.jsx("input",{type:"text",value:a,onChange:T=>i(T.target.value),className:"controls-context-input ui-control ui-input is-compact",placeholder:"Preset name","aria-label":"Preset name",disabled:!s}),l.jsx("button",{type:"button",className:"controls-context-menu-btn",onClick:P,disabled:!s||!a.trim(),role:"menuitem",children:"Save"})]}),l.jsx("button",{type:"button",className:"controls-context-menu-btn is-danger",onClick:F,disabled:!s||!c,role:"menuitem",children:"Delete"})]}):null]})})]}),l.jsxs("div",{className:"controls-context-meta",children:[l.jsx("span",{children:S}),g?l.jsx("span",{className:"controls-context-status",children:g}):null]}),!m&&j?l.jsx(St,{open:j,onClose:E,title:"Manage presets",children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Preset"}),l.jsx(Ye,{value:c||"",onChange:handlePresetSelect,className:"sheet-select","aria-label":"Select preset",size:"sm",options:[{value:"",label:"New preset"},...w.map(T=>({value:T.id,label:T.name}))]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Preset name"}),l.jsx("input",{type:"text",value:a,onChange:T=>i(T.target.value),className:"sheet-input ui-control ui-input",placeholder:"Preset name","aria-label":"Preset name",disabled:!s})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Actions"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:P,disabled:!s||!a.trim(),children:"Save"}),l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:F,disabled:!s||!c,children:"Delete"})]})]})]})}):null]})});function Sw(){const e=ln(),{workflows:t=[],selectedWorkflow:n,selectWorkflow:r,workflowData:s,dynamicInputs:o=[],imageInputs:a=[],formData:i,setFormData:c,handleFormChange:d,aliasOptions:y,aliasCatalog:h,isLoading:g,progressValue:v,progressMax:w,statusText:N,statusPhase:S,handleGenerate:m,logEntries:f,clearLogs:p,promptFieldName:j,orderedDynamicInputs:b}=Bm(),E=u.useRef(null),z=u.useRef(null),[P,F]=u.useState(()=>Ux()),[T,V]=u.useState(null),fe=(T==null?void 0:T.name)||"",W=u.useCallback(()=>V(null),[]),[de,q]=u.useState(!1),[ne,ee]=u.useState([]),[k,I]=u.useState([]),[_,R]=u.useState(""),[D,Z]=u.useState(""),[G,U]=u.useState(""),O=u.useRef(new Map),M=u.useCallback((re="")=>{const H=`?field=${encodeURIComponent(re||j||"prompt")}`;e(`/compose${H}`)},[e,j]),$=u.useCallback(re=>{!re||re===n||(n&&uo(n,i||{},{immediate:!0}),R(""),Z(""),U(""),r(re))},[i,n,r]),te=u.useMemo(()=>{const me=[...b||[],...a||[]].map(H=>{var K;return(K=H==null?void 0:H.inputs)==null?void 0:K.param_name}).filter(H=>H&&typeof H=="string");return new Set(me)},[b,a]),se=u.useCallback(re=>{Z(re);const me=k.find(le=>le.id===re);if(R((me==null?void 0:me.name)||""),!re||!(me!=null&&me.values)||!n){re||U("");return}const H=te,K={};Object.entries(me.values).forEach(([le,ue])=>{(!H.size||H.has(le))&&(K[le]=ue)}),c(le=>{const ue={...le,...K};return uo(n,ue,{immediate:!0}),ue}),U(`Applied "${me.name}".`)},[te,k,n,c]),J=a||[],pe=!!(s&&n),Ie=J.length>0,ye=u.useCallback((re,me)=>{const H=O.current;me&&re&&H.set(re,me);const K=ne.length?ne:(me==null?void 0:me.order)||[],le=K.length,ue=le>0?K.indexOf(re):-1,Ee=ue>0?K[ue-1]:null,be=ue>=0&&ue<le-1?K[ue+1]:null,Te=Ee?H.get(Ee):null,Ue=be?H.get(be):null;return{...me,index:ue>=0?ue:0,total:le,onPrev:Te?()=>V(ye(Ee,Te)):null,onNext:Ue?()=>V(ye(be,Ue)):null,onRender:m}},[ne,m]),we=u.useCallback(re=>{const me=re||[];ee(H=>H.length===me.length&&H.every((K,le)=>K===me[le])?H:me)},[]),he=u.useCallback(re=>{const me=re||"";F(me),Dx(me)},[]),je=u.useCallback(re=>{re!=null&&re.name&&V(ye(re.name,re))},[ye]),X=u.useCallback(async re=>{if(!re){I([]),Z("");return}try{const me=await Gv(re),H=Array.isArray(me==null?void 0:me.presets)?me.presets:[];I(H),Z(K=>K&&H.some(le=>le.id===K)?K:"")}catch(me){console.error("Failed to load workflow presets",me),I([]),U("Presets unavailable.")}},[]);u.useEffect(()=>{X(n)},[n,X]);const Pe=u.useCallback(async()=>{if(!n)return;const re=_.trim();if(!re){U("Name a preset to save.");return}const me={},H=te;Object.entries(i||{}).forEach(([ue,Ee])=>{(!H.size||H.has(ue))&&(me[ue]=Ee)});const K=k.find(ue=>ue.id===D),le=K&&K.name.toLowerCase()===re.toLowerCase()?K.id:void 0;try{const ue=await Kv(n,{id:le,name:re,values:me}),Ee=Array.isArray(ue==null?void 0:ue.presets)?ue.presets:[],be=ue==null?void 0:ue.preset;I(Ee),be!=null&&be.id&&Z(be.id),U(`Saved "${re}".`)}catch(ue){console.error("Failed to save preset",ue),U("Save failed.")}},[te,i,_,k,D,n]),Je=u.useCallback(async()=>{if(!(!n||!D))try{const re=await Qv(n,D),me=Array.isArray(re==null?void 0:re.presets)?re.presets:[];I(me),Z(""),U("Preset deleted.")}catch(re){console.error("Failed to delete preset",re),U("Delete failed.")}},[D,n]),Ze=u.useCallback(()=>{var re;return(re=T==null?void 0:T.render)==null?void 0:re.call(T,i)},[T,i]);return u.useEffect(()=>{const re=()=>{!pe||g||m()};return window.addEventListener("cozygen:request-render",re),()=>window.removeEventListener("cozygen:request-render",re)},[m,pe,g]),!t||t.length===0?l.jsx("div",{className:"page-shell",children:l.jsx("div",{className:"neon-card px-3 py-3 sm:px-4 sm:py-4",children:l.jsx("p",{className:"text-sm text-[#9DA3FFCC]",children:"No workflows found. Drop a workflow file in CozyGen and refresh."})})}):l.jsxs("div",{className:"page-shell page-stack has-dock controls-page",children:[l.jsxs("div",{className:"page-bar controls-bar",children:[l.jsx("h1",{className:"page-bar-title",children:"Controls"}),l.jsx("div",{className:"page-bar-actions",children:P?l.jsxs("span",{className:"controls-meta",children:["Last: ",P]}):null})]}),l.jsxs("section",{className:"controls-board",children:[l.jsxs(Rd,{title:l.jsxs(l.Fragment,{children:[l.jsx(Rc,{size:18,className:"inline-block mr-2 align-text-bottom"}),"Parameters"]}),bodyClassName:"control-shell controls-body",defaultOpen:!0,className:"controls-panel",children:[l.jsx(jw,{workflows:t,selectedWorkflow:n,onWorkflowChange:$,workflowData:s,presets:k,presetName:_,onPresetNameChange:R,selectedPresetId:D,onPresetSelect:se,onPresetSave:Pe,onPresetDelete:Je,presetStatus:G}),s?l.jsx(sw,{workflowName:n,dynamicInputs:b,formData:i,onFormChange:d,parameterSectionRef:E,compactControls:!0,lastEditedParam:P,spotlightName:fe,onCloseSpotlight:W,onVisibleParamsChange:we,aliasOptions:y,aliasCatalog:h,onOpenComposer:M,onParamEdited:he,onSpotlight:je}):l.jsxs("div",{className:"empty-state-inline",children:[l.jsx("span",{className:"empty-state-arrow",children:l.jsx(nx,{size:20})}),l.jsx("span",{children:"Select a workflow above to get started"})]})]}),Ie?l.jsx(Rd,{ref:z,className:"scroll-mt-24 controls-panel controls-subpanel",title:l.jsxs(l.Fragment,{children:[l.jsx(tx,{size:18,className:"inline-block mr-2 align-text-bottom"}),"Images"]}),defaultOpen:!1,variant:"bare",children:s?l.jsx("div",{className:"grid grid-cols-1 gap-3 lg:grid-cols-2",children:J.map(re=>l.jsx(Sx,{input:re,value:i[re.inputs.param_name]||"",onFormChange:d},re.id))}):null}):null]}),l.jsxs("div",{className:"controls-status-strip",children:[l.jsxs("div",{className:"controls-status-left",children:[l.jsx("span",{className:`controls-status-dot is-${S||"idle"}`,"aria-hidden":"true"}),l.jsxs("div",{className:"controls-status-text",children:[l.jsx("span",{className:"controls-status-phase",children:S||"idle"}),l.jsx("span",{className:"controls-status-msg",children:N||"Idle"})]})]}),l.jsxs("div",{className:"controls-status-right",children:[g&&w>0?l.jsx("div",{className:"controls-status-meter","aria-label":"Progress",children:l.jsx("div",{className:"controls-status-meter-fill",style:{width:`${Math.max(0,Math.min(100,Math.round((v||0)/w*100)))}%`}})}):null,l.jsx("button",{type:"button",className:"controls-status-btn",onClick:()=>q(!0),children:"Logs"})]})]}),l.jsx("section",{className:"dock-panel",children:l.jsx(dx,{busy:g,progressValue:v,progressMax:w,statusText:N,statusPhase:S,primaryLabel:"Render",onPrimary:m,primaryDisabled:!pe,onLogs:()=>q(!0)})}),l.jsx(Nx,{open:!!T,onClose:W,title:T==null?void 0:T.label,description:T==null?void 0:T.description,render:Ze,index:(T==null?void 0:T.index)??0,total:(T==null?void 0:T.total)??0,onPrev:(T==null?void 0:T.onPrev)||null,onNext:(T==null?void 0:T.onNext)||null,onRender:(T==null?void 0:T.onRender)||null,children:null}),l.jsx(lw,{open:de,onClose:()=>q(!1),logs:f,onClear:p})]})}function Nw(){return l.jsx("div",{className:"page-shell page-stack",children:l.jsxs("section",{className:"home-hero",children:[l.jsx("span",{className:"home-hero-orb is-warm","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-orb is-cool","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-spark","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-beam","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-ring","aria-hidden":"true"}),l.jsxs("div",{className:"home-hero-inner home-hero-full",children:[l.jsx("div",{className:"home-hero-kicker",children:"CozyGen Studio"}),l.jsx("h1",{className:"home-hero-title",children:"Creative studio for prompt-first storytelling"}),l.jsx("p",{className:"home-hero-description",children:"CozyGen is a quiet, cinematic workspace for people who sketch with wordsshape the mood, stage the scene, then send it down the render runway without losing your flow."}),l.jsxs("div",{className:"home-info-grid",children:[l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Control as composition"}),l.jsx("p",{children:"Dial the palette, tempo, and texture in one place. The controls read like a creative brief, not a checklist."})]}),l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Alias & tag storyboards"}),l.jsx("p",{children:"Save characters, atmospheres, and motifs as building blocks, then arrange them like panels in a storyboard."})]}),l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Gallery inspiration"}),l.jsx("p",{children:"Pin your strongest frames, compare variations, and carry the aesthetic through to your next scene."})]}),l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Render runway"}),l.jsx("p",{children:"Stack iterations like takes on a set. Keep composing while the queue runs in the background."})]})]})]})]})})}function kw({subfolder:e,crumbs:t=[],dirChips:n=[],onBack:r,onRoot:s,onCrumb:o,onSelectDir:a}){return l.jsxs("div",{className:"gallery-nav",children:[l.jsx("div",{className:"gallery-crumbs",role:"navigation","aria-label":"Gallery path",children:t.map((i,c)=>l.jsxs(u.Fragment,{children:[l.jsx("span",{className:"text-[#6A6FA8]",children:"/"}),l.jsx("button",{type:"button",className:"gallery-chip-btn",onClick:()=>o==null?void 0:o(i.path),"aria-current":c===t.length-1?"page":void 0,children:i.name})]},i.path||i.name||c))}),n.length>0?l.jsx("div",{className:"gallery-dir-chips",children:n.map(i=>l.jsx("button",{type:"button",className:"gallery-chip-btn",onClick:()=>a==null?void 0:a(i.subfolder),children:i.filename||i.subfolder||"Collection"},i.subfolder||i.filename))}):null]})}const Cw=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e),bw=({src:e,poster:t,autoPlay:n})=>{const r=u.useRef(null);return u.useEffect(()=>{const s=r.current;s&&(s.pause(),s.currentTime=0,s.load())},[e]),u.useEffect(()=>{const s=r.current;if(!s)return;let o;const a=()=>{const c=s.play();c&&typeof c.catch=="function"&&c.catch(()=>{})},i=()=>{s.pause()};return n?typeof window<"u"&&"IntersectionObserver"in window?(o=new IntersectionObserver(d=>{d.forEach(y=>{y.isIntersecting?a():i()})},{threshold:.65}),o.observe(s)):a():(i(),s.currentTime=0),()=>{o&&o.disconnect(),i()}},[n,e]),e?l.jsx("video",{ref:r,src:e,poster:t||void 0,muted:!0,playsInline:!0,loop:!0,preload:"metadata",className:"w-full h-auto max-h-[80vh] rounded-2xl object-contain bg-black/40"}):l.jsx("div",{className:"flex items-center justify-center py-16 text-[11px] text-[#9DA3FFCC]",children:"No preview available"})},Md={contentVisibility:"auto",containIntrinsicSize:"260px 320px"};function Ew({item:e,onSelect:t,variant:n="grid",autoPlay:r=!1}){if(!e)return null;const s=e.type==="directory",o=e.filename||"",a=e.subfolder||"",i=o||a||"Unknown",c=!!(e!=null&&e.meta&&(e.meta.model||e.meta.prompt||Array.isArray(e.meta.loras)&&e.meta.loras.length)),d=()=>{t&&t(e)},y=n==="feed"?768:384,h=!s&&o?`/cozygen/thumb?type=output&subfolder=${encodeURIComponent(a)}&filename=${encodeURIComponent(o)}&w=${y}`:null,g=!s&&o?(()=>{const w=e.type&&e.type!=="directory"?e.type:"output",N=e.mtime?`&v=${encodeURIComponent(String(e.mtime))}`:"";return`/view?filename=${encodeURIComponent(o)}&subfolder=${encodeURIComponent(a)}&type=${encodeURIComponent(w)}${N}`})():null,v=Cw(o);if(s)return l.jsx("button",{type:"button",onClick:d,className:"gallery-dir-tile",style:Md,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-7 w-7 rounded-lg bg-gradient-to-br from-[#6B5BFF] to-[#FF4F9A] opacity-80 group-hover:opacity-100 flex items-center justify-center text-[11px] text-white",children:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-[11px] font-medium text-[#E5E7FF] truncate",children:i}),l.jsx("div",{className:"text-[10px] text-[#9DA3FFCC] truncate",children:"Collection"})]})]})});if(n==="feed"){const w={contentVisibility:"auto",containIntrinsicSize:"520px 720px"};return l.jsxs("div",{className:"gallery-feed-item",style:w,children:[l.jsxs("button",{type:"button",onClick:d,className:"gallery-feed-media",children:[c?l.jsx("span",{className:"gallery-meta-badge",role:"img","aria-label":"Metadata available",title:"Metadata available",children:"i"}):null,l.jsx("div",{className:"relative w-full flex items-center justify-center bg-[#020312]",children:v?l.jsx(bw,{src:g,poster:h,autoPlay:r}):h?l.jsx("img",{src:h,alt:i,className:"w-full h-auto max-h-[80vh] rounded-2xl object-contain bg-black/40",loading:"lazy",decoding:"async"}):l.jsx("div",{className:"flex items-center justify-center py-16 text-[11px] text-[#9DA3FFCC]",children:"No preview available"})}),l.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-[#05071680] opacity-0 group-hover:opacity-100 transition-opacity"}),v&&l.jsx("div",{className:"pointer-events-none absolute left-2 top-2 rounded-md bg-[#050716CC] px-2 py-[1px] text-[10px] text-[#CFFAFE] border border-[#3EF0FF80]",children:"Video"})]}),l.jsx("div",{className:"gallery-feed-meta",children:l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"gallery-feed-title",children:i}),a&&l.jsx("div",{className:"gallery-feed-subfolder",children:a})]})})]})}return l.jsxs("button",{type:"button",onClick:d,className:"gallery-tile",style:Md,children:[l.jsxs("div",{className:"gallery-tile-media",children:[c?l.jsx("span",{className:"gallery-meta-badge",role:"img","aria-label":"Metadata available",title:"Metadata available",children:"i"}):null,h?l.jsx("img",{src:h,alt:i,className:"gallery-tile-img",loading:"lazy",decoding:"async"}):l.jsx("div",{className:"gallery-tile-empty",children:"No preview"}),v&&l.jsx("div",{className:"gallery-badge",children:"Video"})]}),l.jsx("div",{className:"gallery-tile-caption",children:l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsx("div",{className:"gallery-tile-title",children:i}),v&&l.jsx("span",{className:"gallery-tile-flag",children:"Vid"})]})})]})}const Od=u.memo(Ew),Lw=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e),Pw=e=>{if(!e)return"";const t=e.filename||"",n=e.subfolder||"",r=e.type||"output",s=e.mtime?`&v=${encodeURIComponent(String(e.mtime))}`:"";return`/view?filename=${encodeURIComponent(t)}&subfolder=${encodeURIComponent(n)}&type=${encodeURIComponent(r)}${s}`};function _w({isOpen:e,media:t,onClose:n,onPrev:r,onNext:s,total:o=0,canPrev:a=!1,canNext:i=!1}){var fe;const c=u.useRef(!1),d=u.useRef(null),[y,h]=u.useState(!1),[g,v]=u.useState(!1),w=u.useRef(null),N=u.useRef(null),S=W=>W?Array.from(W.querySelectorAll('a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter(de=>!de.hasAttribute("disabled")&&de.getAttribute("aria-hidden")!=="true"):[];if(u.useEffect(()=>{if(!e)return;const W=de=>{de.key==="Escape"&&(n==null||n()),de.key==="ArrowLeft"&&a&&(r==null||r()),de.key==="ArrowRight"&&i&&(s==null||s())};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[e,n,s,r,a,i]),u.useEffect(()=>{e&&h(!1)},[e,t]),u.useEffect(()=>{if(!e||typeof document>"u")return;const W=w.current;N.current=document.activeElement;const de=()=>{var k;const ne=S(W),ee=d.current||ne[0]||W;(k=ee==null?void 0:ee.focus)==null||k.call(ee)},q=ne=>{if(ne.key!=="Tab"||!W)return;const ee=S(W);if(!ee.length){ne.preventDefault(),W.focus();return}const k=ee[0],I=ee[ee.length-1],_=document.activeElement;ne.shiftKey&&_===k?(ne.preventDefault(),I.focus()):!ne.shiftKey&&_===I&&(ne.preventDefault(),k.focus())};return requestAnimationFrame(de),W==null||W.addEventListener("keydown",q),()=>{var ee;W==null||W.removeEventListener("keydown",q);const ne=N.current;ne&&document.contains(ne)&&((ee=ne.focus)==null||ee.call(ne))}},[e]),!t||!e||typeof document>"u")return null;const m=Pw(t),f=t.subfolder||"Gallery",p=Lw(t.filename),j=o>1,b=(t==null?void 0:t.meta)||{},E=[b!=null&&b.model?{label:"Model",value:b.model}:null,b!=null&&b.prompt?{label:"Prompt",value:b.prompt,isPrompt:!0}:null,Array.isArray(b==null?void 0:b.loras)&&b.loras.length?{label:"LoRAs",value:b.loras.join(", ")}:null].filter(Boolean),z=!!((fe=t==null?void 0:t.meta)!=null&&fe.has_prompt||E.length),P=typeof(t==null?void 0:t.filename)=="string"&&t.filename.toLowerCase().endsWith(".png"),F=z&&P,T=W=>{if(!(typeof window>"u"))try{window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:W}}))}catch{}},V=async()=>{if(!(!t||g||!F)){v(!0),T(!0);try{const W=await Wv({filename:t.filename,subfolder:t.subfolder||""}),de=W==null?void 0:W.prompt;if(!de)throw new Error("prompt_missing");wm({workflowName:t.filename||"gallery",workflow:de,timestamp:Date.now()}),await Lc({prompt:de}),T(!1)}catch(W){if(T(!1),W!=null&&W.unauthorized){window.location.hash="#/login";return}alert("Unable to re-run this item. It may not include prompt metadata.")}finally{v(!1)}}};return Nc.createPortal(l.jsx("div",{className:"react-modal-overlay",role:"presentation",onPointerDown:W=>{c.current=W.target===W.currentTarget},onClick:W=>{c.current&&W.target===W.currentTarget&&(n==null||n())},children:l.jsx("div",{className:"react-modal-content",ref:w,role:"dialog","aria-modal":"true","aria-label":"Preview",onClick:W=>W.stopPropagation(),tabIndex:-1,children:l.jsxs("div",{className:"media-viewer-panel",children:[l.jsxs("header",{className:"media-viewer-head",children:[l.jsxs("div",{className:"media-viewer-head-bar bottom-sheet-head",children:[l.jsxs("div",{className:"media-viewer-meta",children:[l.jsx("div",{className:"media-viewer-title",title:t.filename,children:t.filename}),l.jsxs("div",{className:"media-viewer-sub",children:[l.jsx("span",{className:"media-chip",children:f}),l.jsx("span",{className:`media-chip ${p?"is-clip":"is-still"}`,children:p?"Video":"Image"})]})]}),l.jsx("button",{ref:d,type:"button",className:"bottom-sheet-close media-viewer-close",onClick:n,"aria-label":"Close",children:l.jsx(sn,{size:16})})]}),l.jsxs("div",{className:"media-viewer-actions",children:[F?l.jsx(Ct,{variant:"ghost",size:"sm",onClick:V,disabled:g,"aria-label":"Re-run generation",children:g?"Re-running":"Re-run"}):null,E.length?l.jsx(Ct,{variant:"ghost",size:"sm",onClick:()=>h(W=>!W),"aria-expanded":y,"aria-label":y?"Hide metadata":"Show metadata",children:y?"Hide metadata":"Metadata"}):null,l.jsx(Ct,{as:"a",href:m,target:"_blank",rel:"noreferrer",variant:"ghost",size:"sm",children:"Open"})]})]}),y&&E.length?l.jsx("div",{className:"media-viewer-info","aria-label":"Generation metadata",children:E.map(W=>l.jsxs("div",{className:"media-info-row",children:[l.jsx("span",{className:"media-info-label",children:W.label}),l.jsx("span",{className:`media-info-value ${W.isPrompt?"is-prompt":""}`,children:W.value})]},W.label))}):null,l.jsxs("div",{className:"media-viewer-stage",children:[j?l.jsx("button",{type:"button",className:`media-stage-nav is-left ${a?"":"is-disabled"}`,onClick:r,"aria-label":"Previous",disabled:!a,children:l.jsx(bm,{size:18})}):null,l.jsx("div",{className:"media-viewer-frame",children:p?l.jsx("video",{src:m,controls:!0,className:"media-viewer-media",autoPlay:!0,muted:!0,playsInline:!0}):l.jsx("img",{src:m,alt:t.filename,className:"media-viewer-media"})}),j?l.jsx("button",{type:"button",className:`media-stage-nav is-right ${i?"":"is-disabled"}`,onClick:s,"aria-label":"Next",disabled:!i,children:l.jsx(Ao,{size:18})}):null]})]})})}),document.body)}const Rw=(e="")=>e.startsWith("."),Iw=(e="")=>/\.(png|jpe?g|gif|webp|bmp|tif?f)$/i.test(e),zw=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e);function Tw(){const e=(U,O="")=>{try{return typeof window<"u"&&localStorage.getItem(U)||O}catch{return O}},t=(U,O)=>{try{typeof window<"u"&&localStorage.setItem(U,O)}catch{}},[n,r]=u.useState(e("galleryPath","")),[s,o]=u.useState([]),[a,i]=u.useState(!1),[c,d]=u.useState(!1),[y,h]=u.useState(""),[g,v]=u.useState(1),[w,N]=u.useState(1),[S,m]=u.useState(()=>{const U=e("galleryPageSize","30"),O=parseInt(U,10);return Number.isFinite(O)?O:30}),[f,p]=u.useState("all"),[j,b]=u.useState(!1),[E,z]=u.useState(""),[P,F]=u.useState(()=>e("galleryRecursive","0")==="1"),[T,V]=u.useState(0);u.useEffect(()=>{let U=!1;const O=new AbortController;return(async()=>{i(!0),h("");try{typeof performance<"u"&&performance.mark&&performance.mark("cozygen:gallery:fetch")}catch{}try{const $=await gm(n,g,S,j,P,f,T,{signal:O.signal,includeMeta:!0});if(U)return;$&&$.items?(o($.items),N($.total_pages||1),h("")):(o([]),N(1));try{typeof performance<"u"&&performance.measure&&(performance.mark("cozygen:gallery:ready"),performance.measure("cozygen:gallery:first-paint","cozygen:gallery:fetch","cozygen:gallery:ready"))}catch{}}catch($){if(($==null?void 0:$.name)==="AbortError")return;console.error("Failed to load gallery",$),U||h("Unable to load gallery right now."),U||(o([]),N(1))}finally{!U&&!O.signal.aborted&&(i(!1),d(!0))}})(),t("galleryPath",n),t("galleryPageSize",String(S)),()=>{U=!0,O.abort()}},[n,g,S,T,j,P,f]);const fe=u.useMemo(()=>{if(!n)return[];const U=n.replace(/\\/g,"/").split("/").filter(Boolean),O=[];for(let M=0;M<U.length;M++)O.push({name:U[M],path:U.slice(0,M+1).join("/")});return O},[n]),W=u.useMemo(()=>s.filter(U=>U.type==="directory").map(U=>({filename:U.filename,subfolder:U.subfolder})),[s]),de=u.useMemo(()=>{const U=(E||"").trim().toLowerCase();return s.filter(O=>{const M=(O.filename||"").toLowerCase();return!(!j&&Rw(M)||O.type!=="directory"&&(f==="image"&&!Iw(M)||f==="video"&&!zw(M))||U&&!M.includes(U))})},[s,j,f,E]),q=u.useMemo(()=>de.filter(U=>U.type!=="directory"),[de]),ne=u.useCallback(()=>{if(!n)return;const U=n.replace(/\\/g,"/").lastIndexOf("/"),O=U===-1?"":n.slice(0,U);r(O),v(1)},[n]),ee=u.useCallback(()=>{r(""),v(1)},[]),k=u.useCallback(U=>{r(U||""),v(1)},[]),I=u.useCallback(U=>{r(U),v(1)},[]),_=u.useCallback(U=>{const O=parseInt(String(U),10)||30;m(O),v(1)},[]),R=u.useCallback(U=>{p(U),v(1)},[]),D=u.useCallback(U=>{const O=!!U;F(O),v(1),t("galleryRecursive",O?"1":"0")},[]),Z=u.useCallback(U=>{z(U),v(1)},[]),G=u.useCallback(()=>{V(U=>U+1)},[]);return u.useEffect(()=>{const U=()=>G();return typeof window<"u"&&window.addEventListener&&window.addEventListener("cozygen:queue-finished",U),()=>{typeof window<"u"&&window.removeEventListener&&window.removeEventListener("cozygen:queue-finished",U)}},[G]),u.useEffect(()=>{if(typeof window>"u")return;let U=!1,O,M;const $=()=>{M&&(clearTimeout(M),M=null)},te=(J=8e3)=>{$(),M=window.setTimeout(()=>{U||(G(),te(8e3))},J)};return(()=>{if(!("EventSource"in window)){te();return}const J=new URLSearchParams({subfolder:n||"",recursive:P?"1":"0",show_hidden:j?"1":"0"});O=new EventSource(`/cozygen/api/gallery/stream?${J.toString()}`),O.onmessage=()=>{U||G()},O.onerror=()=>{O&&(O.close(),O=null),te()}})(),()=>{U=!0,$(),O&&(O.close(),O=null)}},[n,P,j,G]),{path:n,items:s,loading:a,hasLoaded:c,error:y,page:g,totalPages:w,perPage:S,kind:f,showHidden:j,query:E,recursive:P,crumbs:fe,dirChips:W,filtered:de,mediaItems:q,setPage:v,setPerPage:_,setShowHidden:b,setQuery:Z,setKind:R,setRecursive:D,goBack:ne,goRoot:ee,goToPath:k,selectDir:I,refresh:G}}function Aw(e){const[t,n]=u.useState(!1),[r,s]=u.useState(null);u.useEffect(()=>{if(!e||e.length===0){s(null),n(!1);return}s(v=>v==null?v:v>=e.length?e.length-1:v)},[e]);const o=u.useCallback(v=>{if(!e||!e.length||!v)return;const w=e.indexOf(v);w!==-1&&(s(w),n(!0))},[e]),a=u.useCallback(()=>{n(!1),s(null)},[]),i=u.useCallback(()=>{!e||!e.length||s(v=>v==null||v>=e.length-1?v:v+1)},[e]),c=u.useCallback(()=>{!e||!e.length||s(v=>v==null||v<=0?v:v-1)},[e]),d=r!=null&&r>=0&&e&&r<e.length?e[r]:null,y=(e==null?void 0:e.length)||0,h=r!==null&&r>0,g=r!==null&&r<y-1;return{viewerOpen:t,viewerIndex:r,currentMedia:d,total:y,canPrev:h,canNext:g,open:o,close:a,next:i,prev:c,setViewerOpen:n}}const Fd="cozygen_gallery_view_mode",Dd="cozygen_gallery_feed_autoplay";function $w(e,t){const n=u.useRef(null),[r,s]=u.useState(0),[o,a]=u.useState({width:0,cols:0,top:0,viewport:typeof window<"u"&&window.innerHeight||800}),i=g=>{if(!g||typeof window>"u")return null;let v=g.parentElement;for(;v;){const w=window.getComputedStyle(v);if(w.overflowY==="auto"||w.overflowY==="scroll")return v;v=v.parentElement}return window};u.useEffect(()=>{if(!t)return;const g=n.current;if(!g||typeof window>"u"||typeof ResizeObserver>"u")return;const v=i(g)||window,w=()=>{const f=g.getBoundingClientRect(),p=f.width||g.clientWidth||1,j=Math.max(1,Math.floor(p/160)),b=v===window?window.scrollY||0:v.scrollTop||0,E=v===window?{top:0}:v.getBoundingClientRect(),z=v===window?f.top+(window.scrollY||0):f.top-E.top+b,P=v===window?window.innerHeight||800:v.clientHeight||800;a(F=>F.width===p&&F.cols===j&&F.top===z&&F.viewport===P?F:{width:p,cols:j,top:z,viewport:P}),s(b)};w();const N=new ResizeObserver(()=>w());N.observe(g),window.addEventListener("resize",w);let S=!1;const m=()=>{S||(S=!0,window.requestAnimationFrame(()=>{S=!1;const f=v===window?window.scrollY||0:v.scrollTop||0;s(f)}))};return v.addEventListener("scroll",m,{passive:!0}),()=>{N.disconnect(),window.removeEventListener("resize",w),v.removeEventListener("scroll",m)}},[t]);const c=t&&o.cols>0&&e.length>60,{visibleItems:d,topSpacer:y,bottomSpacer:h}=u.useMemo(()=>{if(!c)return{visibleItems:e,topSpacer:0,bottomSpacer:0};const g=o.width/o.cols,v=Math.max(180,Math.ceil(g*1.25)+32),w=Math.ceil(e.length/o.cols),N=Math.max(0,r-o.top),S=Math.max(0,Math.floor(N/v)-2),m=Math.min(w,Math.ceil((N+o.viewport)/v)+2),f=S*o.cols,p=Math.min(e.length,m*o.cols);return{visibleItems:e.slice(f,p),topSpacer:S*v,bottomSpacer:Math.max(0,(w-m)*v)}},[e,o,r,c]);return{containerRef:n,visibleItems:d,topSpacer:y,bottomSpacer:h,virtualized:c}}function Mw(){const{path:e,loading:t,hasLoaded:n,page:r,totalPages:s,perPage:o,kind:a,showHidden:i,recursive:c,error:d,crumbs:y,dirChips:h,filtered:g,mediaItems:v,setPage:w,setPerPage:N,setShowHidden:S,setKind:m,setRecursive:f,goBack:p,goRoot:j,goToPath:b,selectDir:E,refresh:z}=Tw(),{viewerOpen:P,currentMedia:F,total:T,canPrev:V,canNext:fe,open:W,close:de,next:q,prev:ne}=Aw(v),[ee,k]=u.useState(()=>{if(typeof window>"u")return"grid";const X=window.localStorage.getItem(Fd);return X==="feed"||X==="grid"?X:"grid"}),[I,_]=u.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(Dd)==="true");u.useEffect(()=>{try{window.localStorage.setItem(Fd,ee)}catch{}},[ee]),u.useEffect(()=>{try{window.localStorage.setItem(Dd,I?"true":"false")}catch{}},[I]);const R=u.useCallback(X=>{if(X.type==="directory"){E(X.subfolder);return}W(X)},[W,E]),D=ee==="grid",[Z,G]=u.useState(!1),U=u.useMemo(()=>[{key:"all",label:"All"},{key:"image",label:"Images"},{key:"video",label:"Videos"}],[]),O=u.useMemo(()=>[{key:"grid",ariaLabel:"Grid view",icon:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("rect",{x:"1",y:"1",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"9",y:"1",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"1",y:"9",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"9",y:"9",width:"6",height:"6",rx:"1"})]})},{key:"feed",ariaLabel:"Feed view",icon:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("rect",{x:"2",y:"1",width:"12",height:"5",rx:"1"}),l.jsx("rect",{x:"2",y:"8",width:"12",height:"5",rx:"1"})]})}],[]),M=X=>X.type==="directory"?`dir:${X.subfolder||X.filename}`:`${X.subfolder||""}|${X.filename}`;u.useEffect(()=>{try{window.localStorage.setItem("cozygen_gallery_pending","0")}catch{}window.dispatchEvent(new Event("cozygen:gallery-viewed"))},[]);const $=t&&!n,te=t&&n,se=`${g.length} items`,J=$?"Loading":se,pe=!!d,{containerRef:Ie,visibleItems:ye,topSpacer:we,bottomSpacer:he,virtualized:je}=$w(g,D);return l.jsxs("div",{className:"page-shell gallery-shell",children:[l.jsx("div",{className:"screen-sticky gallery-header",children:l.jsxs("div",{className:"gallery-header-inner",children:[l.jsxs("div",{className:"page-bar gallery-bar",children:[l.jsx("h1",{className:"page-bar-title",children:"Gallery"}),l.jsxs("div",{className:"page-bar-actions",children:[l.jsx("span",{className:"gallery-status",children:J}),l.jsx(Tr,{ariaLabel:"View mode",value:ee,onChange:k,layout:"icon",size:"sm",items:O}),l.jsx(Ct,{size:"xs",className:"gallery-filter-btn",onClick:()=>G(!0),children:"Filters"})]})]}),l.jsx("div",{className:"gallery-nav-row",children:l.jsx(kw,{subfolder:e,crumbs:y,dirChips:h,onBack:p,onRoot:j,onCrumb:X=>b(X),onSelectDir:X=>E(X)})}),l.jsxs("div",{className:"gallery-toolbar",children:[l.jsx("div",{className:"gallery-toolbar-left",children:l.jsx(Tr,{ariaLabel:"Filter by type",value:a,onChange:m,size:"sm",items:U})}),l.jsx("div",{className:"gallery-toolbar-right",children:l.jsxs("div",{className:"gallery-options",children:[l.jsx(Ct,{size:"icon",active:c,pressed:c,onClick:()=>f(X=>!X),title:c?"Showing subfolders":"This folder only","aria-label":"Toggle subfolders",children:c?l.jsx(cd,{size:16}):l.jsx(ud,{size:16})}),l.jsx(Ct,{size:"icon",active:i,pressed:i,onClick:()=>S(X=>!X),title:i?"Showing hidden":"Hiding hidden","aria-label":"Toggle hidden items",children:i?l.jsx(dd,{size:16}):l.jsx(fd,{size:16})}),ee==="feed"&&l.jsx(Ct,{size:"icon",active:I,pressed:I,onClick:()=>_(X=>!X),title:I?"Autoplay on":"Autoplay off","aria-label":"Toggle autoplay",children:I?l.jsx(pd,{size:16}):l.jsx(md,{size:16})}),l.jsx(Ct,{size:"icon",onClick:z,title:"Refresh","aria-label":"Refresh gallery",children:l.jsx(ji,{size:16})})]})})]}),l.jsxs("div",{className:"gallery-pagination",children:[l.jsxs("div",{className:"gallery-pagination-info",children:[te?l.jsx("span",{className:"loading-spinner","aria-hidden":"true"}):null,l.jsx("span",{className:$?"gallery-loading-text":"",children:J})]}),l.jsxs("div",{className:"gallery-pagination-controls",children:[l.jsx("button",{type:"button",className:"gallery-page-btn",onClick:()=>w(X=>Math.max(1,X-1)),disabled:r<=1||t,"aria-label":"Previous page",children:l.jsx(bm,{size:16})}),l.jsxs("span",{className:"gallery-page-indicator",children:[r," / ",s]}),l.jsx("button",{type:"button",className:"gallery-page-btn",onClick:()=>w(X=>X<s?X+1:X),disabled:r>=s||t,"aria-label":"Next page",children:l.jsx(Ao,{size:16})}),l.jsx(Ye,{value:o,onChange:X=>N(parseInt(X,10)||30),className:"gallery-page-size","aria-label":"Items per page",size:"sm",options:[15,30,60,120]})]})]})]})}),$&&g.length===0?l.jsx("div",{className:"gallery-grid-responsive",children:Array.from({length:8}).map((X,Pe)=>l.jsxs("div",{className:"gallery-skeleton-item",children:[l.jsx("div",{className:"gallery-skeleton-thumb skeleton"}),l.jsx("div",{className:"gallery-skeleton-label skeleton skeleton-text"})]},Pe))}):pe&&g.length===0?l.jsxs("div",{className:"gallery-empty",role:"alert",children:[l.jsx("div",{className:"gallery-empty-icon",children:l.jsx(hd,{size:48})}),l.jsx("div",{className:"gallery-empty-title",children:"Gallery unavailable"}),l.jsx("div",{className:"gallery-empty-desc",children:d}),l.jsx("button",{type:"button",className:"ui-button is-primary is-compact mt-4",onClick:z,children:"Retry"})]}):g.length===0?l.jsxs("div",{className:"gallery-empty",children:[l.jsx("div",{className:"gallery-empty-icon",children:l.jsx(hd,{size:48})}),l.jsx("div",{className:"gallery-empty-title",children:"No media found"}),l.jsx("div",{className:"gallery-empty-desc",children:a!=="all"?`No ${a}s match your filters. Try selecting "All" or adjusting your search.`:"This folder is empty. Render something new or navigate to a different folder."})]}):D?l.jsx("div",{className:"w-full overflow-hidden",children:l.jsxs("div",{className:"gallery-grid-responsive",ref:Ie,children:[je&&we>0?l.jsx("div",{"aria-hidden":!0,style:{gridColumn:"1 / -1",height:`${we}px`}}):null,ye.map(X=>l.jsx(Od,{item:X,onSelect:R,variant:"grid",autoPlay:!1},M(X))),je&&he>0?l.jsx("div",{"aria-hidden":!0,style:{gridColumn:"1 / -1",height:`${he}px`}}):null]})}):l.jsx("div",{className:"flex flex-col gap-6 items-center",children:g.filter(X=>X.type!=="directory").map(X=>l.jsx("div",{className:"w-full flex justify-center",children:l.jsx(Od,{item:X,onSelect:R,variant:"feed",autoPlay:I})},M(X)))}),l.jsx(_w,{isOpen:P,media:F,onClose:de,onPrev:ne,onNext:q,total:T,canPrev:V,canNext:fe}),l.jsx(St,{open:Z,onClose:()=>G(!1),title:"Gallery filters",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>G(!1),children:"Done"}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Type"}),l.jsx(Tr,{ariaLabel:"Filter by type",value:a,onChange:m,size:"sm",items:U})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Options"}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:`ui-button is-compact ${c?"is-primary":"is-muted"}`,onClick:()=>f(X=>!X),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[c?l.jsx(cd,{size:14}):l.jsx(ud,{size:14}),l.jsx("span",{children:c?"Subfolders":"This folder"})]})}),l.jsx("button",{type:"button",className:`ui-button is-compact ${i?"is-primary":"is-muted"}`,onClick:()=>S(X=>!X),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[i?l.jsx(dd,{size:14}):l.jsx(fd,{size:14}),l.jsx("span",{children:i?"Hidden on":"Hidden off"})]})}),ee==="feed"?l.jsx("button",{type:"button",className:`ui-button is-compact ${I?"is-primary":"is-muted"}`,onClick:()=>_(X=>!X),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[I?l.jsx(pd,{size:14}):l.jsx(md,{size:14}),l.jsx("span",{children:I?"Autoplay":"No autoplay"})]})}):null,l.jsx("button",{type:"button",className:"ui-button is-compact is-ghost",onClick:z,children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[l.jsx(ji,{size:14}),l.jsx("span",{children:"Refresh"})]})})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Page size"}),l.jsx(Ye,{value:o,onChange:X=>N(parseInt(X,10)||30),className:"sheet-select","aria-label":"Items per page",size:"sm",options:[15,30,60,120]}),l.jsxs("div",{className:"sheet-hint",children:[te?l.jsx("span",{className:"loading-spinner","aria-hidden":"true"}):null,l.jsxs("span",{children:[J,"  Page ",r," of ",s]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>w(X=>Math.max(1,X-1)),disabled:r<=1||t,children:"Prev"}),l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>w(X=>X<s?X+1:X),disabled:r>=s||t,children:"Next"})]})]})]})})]})}const po="::";function Ow(){return`alias-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`}function cn(e){return String(e||"").split(",").map(t=>t.trim()).filter(Boolean)}function Oo(e){return(e||[]).map(t=>String(t||"").trim()).filter(Boolean).join(", ")}function Fw(e,t){const n=String(t||"").trim();if(!n)return String(e||"");const r=cn(e);return new Set(r.map(o=>o.toLowerCase())).has(n.toLowerCase())||r.push(n),Oo(r)}function Dw(e,t){const n=String(t||"").trim().toLowerCase();if(!n)return String(e||"");const r=cn(e).filter(s=>s.toLowerCase()!==n);return Oo(r)}function Uw(e,t,n){const r=String(t||"").trim().toLowerCase(),s=String(n||"").trim();if(!r||!s)return String(e||"");const o=cn(e).map(c=>c.toLowerCase()===r?s:c),a=new Set,i=[];return o.forEach(c=>{const d=String(c||"").trim().toLowerCase();!d||a.has(d)||(a.add(d),i.push(c))}),Oo(i)}function wa(e,t={}){return Object.entries(ws(e)).map(([n,r],s)=>{const[o,a]=String(n).includes(po)?n.split(po):["",n],i=a||n,c=t[n]||t[i]||o||"";return{id:`existing-${s}-${n}`,name:i,text:r,category:c}})}function Ud(e){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.name)||"").trim(),s=typeof(n==null?void 0:n.text)=="string"?n.text.trim():"";if(r&&s){const o=String((n==null?void 0:n.category)||"").trim(),a=o?`${o}${po}${r}`:r;t[a]=s}}),t}function Bd(e){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.name)||"").trim(),s=typeof(n==null?void 0:n.category)=="string"?n.category.trim():"";if(r){const o=s?`${s}${po}${r}`:r;t[o]=s}}),t}function Bw(){var ht;const e=ln(),{aliases:t,aliasCategories:n,categoryList:r,loading:s,saving:o,error:a,persistAliases:i}=Dm(),[c,d]=u.useState(()=>wa(t,n)),[y,h]=u.useState(()=>Array.isArray(r)?r:[]),[g,v]=u.useState("All"),[w,N]=u.useState("All"),[S,m]=u.useState(""),[f,p]=u.useState(""),[j,b]=u.useState(!1),[E,z]=u.useState(!1),[P,F]=u.useState({loading:!1,invalid:[],suggestions:{}}),[T,V]=u.useState(!1),[fe,W]=u.useState(null),[de,q]=u.useState(""),ne=u.useRef(null),ee=u.useRef(null),[k,I]=u.useState(!1),[_,R]=u.useState(""),[D,Z]=u.useState(""),G=To("(min-width: 1024px)");u.useEffect(()=>{if(k)return;const x=wa(t,n||{});d(x),f&&!x.some(L=>L.id===f)&&(p(""),b(!1))},[n,k]),u.useEffect(()=>{k||Array.isArray(r)&&h(r)},[r,k]),u.useEffect(()=>{if(k)return;const x=wa(t,n||{});d(x),f&&!x.some(L=>L.id===f)&&(p(""),b(!1))},[t,n,f,k]);const U=u.useMemo(()=>Ud(c),[c]),O=()=>{const x={id:Ow(),name:"",text:"",category:""};d(L=>[...L,x]),p(x.id),q(""),I(!0),b(!0)},M=(x,L,B)=>{I(!0),d(Q=>Q.map((oe,ie)=>ie===x?{...oe,[L]:B}:oe))},$=x=>{I(!0),d(L=>{var Q;const B=L.filter((oe,ie)=>ie!==x);return(B.length===0||f===((Q=L[x])==null?void 0:Q.id))&&(p(""),b(!1)),B})},te=async()=>{q("");try{const x=new Map;if(c.forEach(B=>{cn((B==null?void 0:B.text)||"").forEach(oe=>{const ie=String(oe).toLowerCase();ie&&(x.has(ie)||x.set(ie,{tag:oe,rows:[]}),x.get(ie).rows.push(B.id))})}),x.size){const B=Array.from(x.values()).map(Q=>Q.tag);try{const Q=await ma(B),oe=Array.isArray(Q==null?void 0:Q.invalid)?Q.invalid:[],ie=new Set(oe.map(ve=>String(ve).toLowerCase()));if(ie.size){const ve=c.map(Se=>{const nt=cn((Se==null?void 0:Se.text)||"").filter(Oe=>ie.has(String(Oe).toLowerCase()));if(!nt.length)return null;const rt=Se.category?`${Se.category}:${Se.name}`:Se.name;return{id:Se.id,token:rt,friendlyName:zl({name:Se.name})||Se.name||"Untitled",category:Se.category||"",invalid:nt}}).filter(Boolean);W({invalid:oe,invalidLower:Array.from(ie),rows:ve,suggestions:(Q==null?void 0:Q.suggestions)||{}}),V(!0),q("Fix invalid tags before saving.");return}}catch(Q){console.error("Unable to validate tags",Q),q("Unable to validate tags right now.");return}}const L=Bd(c);await i({items:U,categories:L,categoryList:y}),I(!1),q("Saved.")}catch{q("Unable to save right now.")}},se=u.useMemo(()=>{const x=S.trim().toLowerCase(),B=[...c.filter(Q=>{const oe=(Q.category||"").trim();if(g===""&&oe||g!=="All"&&g!==""&&oe!==g)return!1;const ie=is(Q.name||"",Q.category||"");if(w!=="All"&&ie!==w)return!1;if(!x)return!0;const ve=oe?`${oe}:${Q.name}`:Q.name;return(Q.name||"").toLowerCase().includes(x)||(Q.text||"").toLowerCase().includes(x)||(oe||"").toLowerCase().includes(x)||(ve||"").toLowerCase().includes(x)})];return B.sort((Q,oe)=>(Q.name||"").localeCompare(oe.name||"")),B},[c,g,w,S]),J=se.find(x=>x.id===f)||c.find(x=>x.id===f)||null,pe=J?J.category?`${J.category}:${J.name}`:J.name||"alias":"",Ie=J&&(zl({name:J.name})||J.name)||"Alias",ye=pe?`$${pe}$`:"$alias$",we=se.length?se:c,he=J?we.findIndex(x=>x.id===J.id):-1,je=he>0?we[he-1]:null,X=he>=0&&he<we.length-1?we[he+1]:null,Pe=x=>{x&&(p(x.id),b(!0),q(""))},Je=u.useMemo(()=>{const x=new Set(y||[]);return c.forEach(L=>{L.category&&x.add(L.category)}),Array.from(x).sort((L,B)=>L.localeCompare(B))},[c,y]),Ze=u.useMemo(()=>{const x=new Set;return c.forEach(L=>{const B=(L.category||"").trim();if(g===""&&B||g!=="All"&&g!==""&&B!==g)return;const Q=is(L.name||"",L.category||"");Q&&x.add(Q)}),Array.from(x).sort((L,B)=>L.localeCompare(B))},[c,g]);u.useEffect(()=>{w!=="All"&&(Ze.includes(w)||N("All"))},[Ze,w]),u.useEffect(()=>{Z("")},[f]);const re=u.useMemo(()=>cn((J==null?void 0:J.text)||""),[J==null?void 0:J.text]),me=u.useMemo(()=>{const x=Array.isArray(P==null?void 0:P.invalid)?P.invalid:[];return new Set(x.map(L=>String(L).toLowerCase()))},[P]);u.useEffect(()=>{if(!J||!(j||G))return;const x=re,L=[],B=new Set;if(x.forEach(ie=>{const ve=String(ie).toLowerCase();!ve||B.has(ve)||(B.add(ve),L.push(ie))}),!L.length){F({loading:!1,invalid:[],suggestions:{}});return}let Q=!1;const oe=window.setTimeout(async()=>{F(ie=>({...ie,loading:!0}));try{const ie=await ma(L);if(Q)return;F({loading:!1,invalid:Array.isArray(ie==null?void 0:ie.invalid)?ie.invalid:[],suggestions:(ie==null?void 0:ie.suggestions)||{}})}catch(ie){console.error("Failed to validate tags",ie),Q||F({loading:!1,invalid:[],suggestions:{}})}},260);return()=>{Q=!0,window.clearTimeout(oe)}},[j,G,J,re]);const H=x=>{var B,Q;const L=String(x||"");if(!L)return!1;try{return(Q=(B=navigator.clipboard)==null?void 0:B.writeText)==null||Q.call(B,L),!0}catch{return!1}},K=(x="")=>{const L=x?`?q=${encodeURIComponent(x)}`:"";e(`/tags${L}`)},le=()=>{var Q;if(!J)return;const x=cn(D);if(!x.length){q("Enter a tag to add.");return}const L=c.findIndex(oe=>oe.id===J.id);if(L===-1)return;let B=((Q=c[L])==null?void 0:Q.text)||"";x.forEach(oe=>{B=Fw(B,oe)}),M(L,"text",B),Z(""),q(`Added ${x.length} tag${x.length===1?"":"s"}.`)},ue=async()=>{const x=_.trim();if(!x){q("Enter a category name.");return}const L=Array.from(new Set([...y||[],x]));h(L),R(""),q("Category added.");const B=Ud(c),Q=Bd(c);I(!0);try{await i({items:B,categories:Q,categoryList:L}),I(!1),q("Category saved.")}catch{q("Unable to save right now.")}},Ee=x=>{x&&(p(x.id),b(!0),q(""))},be=()=>{G&&p(""),b(!1),q("")};u.useMemo(()=>{const x=c.length,L=se.length;return s&&x===0?"Loading":x===L?`${x} aliases`:`${L} of ${x} aliases`},[c.length,se.length,s]),u.useEffect(()=>{const x=L=>{var Se,xe;if(L.defaultPrevented)return;const B=L.target,Q=(B==null?void 0:B.tagName)||"",oe=["INPUT","TEXTAREA","SELECT"].includes(Q)||(B==null?void 0:B.isContentEditable),ie=String(L.key||"").toLowerCase(),ve=L.metaKey||L.ctrlKey;if(ve&&ie==="s"){L.preventDefault(),k&&!o&&te();return}if(ve&&ie==="n"){L.preventDefault(),O();return}if(!oe&&ie==="/"){L.preventDefault(),(xe=(Se=ee.current)==null?void 0:Se.focus)==null||xe.call(Se);return}ie==="escape"&&j&&!G&&(L.preventDefault(),be())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[O,be,k,j,te,G,o]);const Te=l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:be,children:G?"Clear selection":"Close"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:te,disabled:o||!k,children:o?"Saving":k?"Save":"Saved"})]}),Ue=J?l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"alias-editor-toolbar",children:[l.jsxs("div",{className:"alias-editor-heading",children:[l.jsx("div",{className:"alias-editor-title",children:Ie}),l.jsx("div",{className:"alias-editor-meta",children:ye})]}),l.jsxs("div",{className:"alias-editor-actions",children:[l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>Pe(je),disabled:!je,title:"Previous alias",children:"Prev"}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>Pe(X),disabled:!X,title:"Next alias",children:"Next"}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>{pe&&H(ye)?q("Token copied."):q("Copy not available on this browser.")},title:"Copy token",children:"Copy token"})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Token"}),l.jsx("div",{className:"composer-token",children:ye}),is(J.name||"",J.category||"")?l.jsxs("div",{className:"sheet-hint",children:["Subcategory: ",Bn(is(J.name||"",J.category||""))]}):null]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Friendly name"}),l.jsx("div",{className:"composer-field",children:Ie})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Alias name"}),l.jsx("input",{ref:ne,type:"text",value:J.name||"",onChange:x=>{const L=c.findIndex(B=>B.id===J.id);L!==-1&&M(L,"name",x.target.value)},placeholder:"e.g. cherry_fruit",className:"sheet-input ui-control ui-input"})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Category"}),l.jsx(Ye,{value:J.category||"",onChange:x=>{const L=c.findIndex(B=>B.id===J.id);L!==-1&&M(L,"category",x)},className:"sheet-select",size:"sm",options:[{value:"",label:"Uncategorized"},...Je.filter(Boolean).map(x=>({value:x,label:un(x)}))]}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>z(!0),children:"Manage categories"})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Expands to"}),l.jsx("textarea",{value:J.text,onChange:x=>{const L=c.findIndex(B=>B.id===J.id);L!==-1&&M(L,"text",x.target.value)},placeholder:"Prompt text for this alias",className:"sheet-textarea ui-control ui-textarea is-compact",rows:6}),l.jsxs("div",{className:"tag-quick-add",children:[l.jsx("input",{type:"text",value:D,onChange:x=>Z(x.target.value),onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),le())},placeholder:"Add tags (comma separated)",className:"ui-control ui-input tag-quick-input","aria-label":"Add tags"}),l.jsx("button",{type:"button",className:"ui-button is-compact is-primary",onClick:le,disabled:!D.trim(),children:"Add"})]}),l.jsxs("div",{className:"tag-editor-actions",children:[l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>K(""),children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Hn,{size:14}),"Open tag library"]})}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>{F(L=>({...L,loading:!0}));const x=cn(J.text||"");ma(x).then(L=>{F({loading:!1,invalid:Array.isArray(L==null?void 0:L.invalid)?L.invalid:[],suggestions:(L==null?void 0:L.suggestions)||{}})}).catch(()=>F({loading:!1,invalid:[],suggestions:{}}))},disabled:P.loading,title:"Validate against danbooru_tags.md",children:P.loading?"Validating":"Validate"})]}),re.length?l.jsx("div",{className:"tag-chip-list","aria-label":"Alias tags",children:re.map(x=>{const L=me.has(String(x).toLowerCase());return l.jsxs("span",{className:`tag-chip ${L?"is-invalid":""}`,children:[l.jsx("code",{className:"tag-chip-code",children:x}),l.jsx("button",{type:"button",className:"tag-chip-remove",onClick:()=>{const B=c.findIndex(Q=>Q.id===J.id);B!==-1&&M(B,"text",Dw(J.text||"",x))},"aria-label":`Remove ${x}`,title:"Remove",children:l.jsx(sn,{size:12})})]},x)})}):l.jsx("div",{className:"sheet-hint",children:"Tip: Use the Tag library to add validated tags quickly."}),!P.loading&&Array.isArray(P.invalid)&&P.invalid.length?l.jsxs("div",{className:"tag-invalid-panel",role:"alert",children:[l.jsxs("div",{className:"tag-invalid-title",children:["Invalid tags (",P.invalid.length,")"]}),l.jsx("div",{className:"tag-invalid-body",children:P.invalid.map(x=>{var B;const L=((B=P==null?void 0:P.suggestions)==null?void 0:B[x])||[];return l.jsxs("div",{className:"tag-invalid-row",children:[l.jsxs("div",{className:"tag-invalid-tag",children:[l.jsx("code",{children:x}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>K(x),children:"Find"})]}),Array.isArray(L)&&L.length?l.jsx("div",{className:"tag-invalid-suggestions",children:L.slice(0,6).map(Q=>l.jsx("button",{type:"button",className:"tag-suggestion",onClick:()=>{const oe=c.findIndex(ie=>ie.id===J.id);oe!==-1&&M(oe,"text",Uw(J.text||"",x,Q))},title:`Replace ${x} with ${Q}`,children:Q},`${x}-${Q}`))}):l.jsx("div",{className:"sheet-hint",children:"No suggestions found for this tag."})]},x)})})]}):null]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("button",{type:"button",className:"ui-button is-danger",onClick:()=>{const x=c.findIndex(L=>L.id===J.id);x!==-1&&($(x),b(!1))},children:"Delete alias"}),l.jsx("div",{className:"sheet-hint",children:"Deleting removes it from your library. Use Save changes to persist."})]})]}):l.jsx("div",{className:"alias-editor-empty",children:"Select an alias to edit, or create a new one."});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"page-shell page-stack alias-page",children:[l.jsxs("div",{className:"page-bar",children:[l.jsx("h1",{className:"page-bar-title",children:"Aliases"}),l.jsxs("div",{className:"page-bar-actions",children:[l.jsx(Ct,{size:"xs",onClick:()=>openTagLibrary({query:S||"",targetId:""}),title:"Browse danbooru tags",children:"Tags"}),l.jsx(Ct,{size:"xs",variant:"primary",onClick:O,children:"Add"})]})]}),l.jsx("div",{className:"library-toolbar screen-sticky",children:l.jsxs("div",{className:"library-toolbar-inner",children:[l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:ee,type:"search",value:S,onChange:x=>m(x.target.value),className:"composer-search ui-control ui-input",placeholder:"Search aliases","aria-label":"Search aliases"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>m(""),disabled:!S,children:"Clear"})]}),l.jsx(Ye,{className:"composer-subcategory-select",value:g,onChange:v,"aria-label":"Filter by category",size:"sm",options:[{value:"All",label:"Category: All"},{value:"",label:"Uncategorized"},...Je.filter(Boolean).map(x=>({value:x,label:un(x)}))]}),l.jsx(Ye,{className:"composer-subcategory-select",value:w,onChange:N,"aria-label":"Filter by subcategory",size:"sm",options:[{value:"All",label:"Subcategory: All"},...Ze.map(x=>({value:x,label:Bn(x)}))]}),k?l.jsx("button",{type:"button",className:"ui-button is-compact is-primary",onClick:te,disabled:o,children:o?"Saving":"Save changes"}):null]}),a?l.jsx("div",{className:"library-toolbar-status is-error",children:"Could not load aliases. Try again later."}):null,de?l.jsx("div",{className:"library-toolbar-status",children:de}):null]})}),l.jsxs("div",{className:"alias-layout",children:[l.jsx("div",{className:"alias-list",children:c.length===0&&!s?l.jsx("section",{className:"ui-panel text-center py-16",children:l.jsx("p",{className:"text-base text-[rgba(159,178,215,0.8)]",children:"No aliases yet. Add your first one."})}):l.jsxs("div",{className:"composer-alias-list",role:"list",children:[se.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases match your filters."}):null,se.map(x=>{const L=(x.category||"").trim(),B=L?`${L}:${x.name}`:x.name,Q=(x.text||"").slice(0,140)+((x.text||"").length>140?"":"");return l.jsxs("button",{type:"button",role:"listitem",className:`composer-alias-item ${f===x.id?"is-selected":""}`,onClick:()=>Ee(x),children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:zl({name:x.name})||x.name||"Untitled"}),L?l.jsx("span",{className:"composer-alias-category",children:un(L)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",B||"alias","$"]}),l.jsx("div",{className:"composer-alias-text",children:Q||""})]},x.id)})]})}),l.jsx("aside",{className:"alias-editor-panel",children:l.jsxs("div",{className:"alias-editor-card ui-panel",children:[Ue,J?l.jsx("div",{className:"alias-editor-footer",children:Te}):null]})})]})]}),l.jsx(St,{open:j&&!!J&&!G,onClose:be,title:"Alias",variant:"fullscreen",footer:Te,children:Ue}),l.jsx(St,{open:E,onClose:()=>{z(!1),R(""),q("")},title:"Categories",variant:"sheet",footer:l.jsx("div",{className:"sheet-hint",children:"Categories help you organize aliases and improve the Insert alias picker."}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Add category"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:_,onChange:x=>R(x.target.value),placeholder:"e.g. styles",className:"sheet-input ui-control ui-input"}),l.jsx("button",{type:"button",className:"ui-button is-primary is-compact",onClick:ue,children:"Add"})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Existing"}),Je.length===0?l.jsx("div",{className:"sheet-hint",children:"No categories yet."}):l.jsx(Ye,{className:"sheet-select",value:"",onChange:x=>{x&&(v(x),z(!1))},size:"sm",placeholder:"Select a category",options:Je.filter(Boolean).map(x=>({value:x,label:un(x)}))})]})]})}),l.jsx(St,{open:T,onClose:()=>V(!1),title:"Fix invalid tags",variant:"fullscreen",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>V(!1),children:"Close"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>{const x=new Set(((fe==null?void 0:fe.invalidLower)||[]).map(L=>String(L).toLowerCase()));if(!x.size){V(!1);return}d(L=>L.map(B=>{const oe=cn((B==null?void 0:B.text)||"").filter(ve=>!x.has(String(ve).toLowerCase())),ie=Oo(oe);return ie===((B==null?void 0:B.text)||"")?B:{...B,text:ie}})),I(!0),V(!1),q("Removed invalid tags. Review and save again.")},children:"Remove invalid tags"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsx("div",{className:"sheet-section",children:l.jsxs("div",{className:"sheet-hint",children:["These aliases contain tags not found in ",l.jsx("code",{className:"font-mono",children:"danbooru_tags.md"}),". Fix them before saving."]})}),(ht=fe==null?void 0:fe.rows)!=null&&ht.length?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Aliases with issues"}),l.jsx("div",{className:"composer-alias-list",role:"list",children:fe.rows.map(x=>l.jsxs("button",{type:"button",role:"listitem",className:"composer-alias-item",onClick:()=>{p(x.id),b(!0),V(!1)},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:x.friendlyName}),x.category?l.jsx("span",{className:"composer-alias-category",children:un(x.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",x.token,"$"]}),l.jsx("div",{className:"tag-invalid-inline",children:x.invalid.map(L=>l.jsx("span",{className:"tag-chip is-invalid",children:l.jsx("code",{className:"tag-chip-code",children:L})},`${x.id}-${L}`))})]},x.id))})]}):null]})})]})}function Ww(e){var n,r;const t=String(e||"");if(!t)return!1;try{return(r=(n=navigator.clipboard)==null?void 0:n.writeText)==null||r.call(n,t),!0}catch{return!1}}function Vw({open:e,onClose:t,onSelectTag:n,initialQuery:r="",title:s="Tag library",contextTitle:o="",contextToken:a="",contextText:i="",contextTagCount:c=null,inline:d=!1}){const[y,h]=u.useState(r||""),[g,v]=u.useState(""),[w,N]=u.useState("count"),[S,m]=u.useState([]),[f,p]=u.useState([]),[j,b]=u.useState(0),[E,z]=u.useState(0),[P,F]=u.useState(!1),[T,V]=u.useState(!1),[fe,W]=u.useState(""),[de,q]=u.useState(""),[ne,ee]=u.useState([]),[k,I]=u.useState(!1),[_,R]=u.useState(null),[D,Z]=u.useState(null),G=u.useRef(null),U=u.useRef(null),O=u.useRef(null),M=u.useRef(null),$=u.useRef(null),te=f.length<j,se=d||e,J=u.useMemo(()=>ne.join(", "),[ne]),pe=u.useMemo(()=>new Set(ne.map(H=>H.toLowerCase())),[ne]),Ie=u.useCallback(H=>{const K=String(H||"").trim();K&&ee(le=>new Set(le.map(Ee=>Ee.toLowerCase())).has(K.toLowerCase())?le:[...le,K])},[]),ye=u.useCallback(H=>{const K=String(H||"").trim().toLowerCase();K&&ee(le=>le.filter(ue=>ue.toLowerCase()!==K))},[]),we=u.useCallback(()=>{ee([]),q("Cleared collected tags.")},[]),he=u.useCallback(()=>{var K,le;if(!ne.length){q("No tags to copy.");return}if(Ww(J)){q(`Copied ${ne.length} tag${ne.length===1?"":"s"}.`);return}const H=O.current;if(H)try{H.value=J,H.removeAttribute("readonly"),H.select(),H.setSelectionRange(0,J.length);const ue=document.execCommand&&document.execCommand("copy");if(H.setAttribute("readonly","readonly"),(le=(K=window.getSelection())==null?void 0:K.removeAllRanges)==null||le.call(K),ue){q(`Copied ${ne.length} tag${ne.length===1?"":"s"}.`);return}}catch{}q("Copy not available on this browser.")},[ne,J]),je=u.useCallback((H,K)=>{ee(le=>{const ue=[...le],[Ee]=ue.splice(H,1);return ue.splice(K,0,Ee),ue})},[]);u.useCallback((H,K)=>{R(K),M.current=H.target,H.dataTransfer.effectAllowed="move",H.dataTransfer.setData("text/plain",K.toString()),requestAnimationFrame(()=>{M.current&&M.current.classList.add("is-dragging")})},[]),u.useCallback(()=>{M.current&&M.current.classList.remove("is-dragging"),_!==null&&D!==null&&_!==D&&je(_,D),R(null),Z(null),M.current=null},[_,D,je]),u.useCallback((H,K)=>{H.preventDefault(),H.dataTransfer.dropEffect="move",Z(K)},[]),u.useCallback(()=>{},[]),u.useCallback((H,K)=>{const le=H.touches[0];$.current={idx:K,startX:le.clientX,startY:le.clientY,moved:!1}},[]),u.useCallback(H=>{if(!$.current)return;const K=H.touches[0],le=Math.abs(K.clientX-$.current.startX),ue=Math.abs(K.clientY-$.current.startY);if(le>10||ue>10){$.current.moved=!0,R($.current.idx),H.preventDefault();const Ee=document.querySelectorAll(".collected-tag-chip"),be=K.clientX,Te=K.clientY;for(let Ue=0;Ue<Ee.length;Ue++){const ht=Ee[Ue].getBoundingClientRect();if(be>=ht.left&&be<=ht.right&&Te>=ht.top&&Te<=ht.bottom){Z(Ue);break}}}},[]),u.useCallback(()=>{var H;(H=$.current)!=null&&H.moved&&_!==null&&D!==null&&_!==D&&je(_,D),$.current=null,R(null),Z(null)},[_,D,je]);const X=u.useCallback(async({nextQuery:H,nextCategory:K,nextSort:le}={})=>{const ue=typeof H=="string"?H:y,Ee=typeof K=="string"?K:g,be=typeof le=="string"?le:w;F(!0),W(""),q(""),z(0);try{const Te=await ao({q:ue,category:Ee,sort:be,limit:80,offset:0});p((Te==null?void 0:Te.items)||[]),b(Number((Te==null?void 0:Te.total)||0))}catch(Te){console.error("Failed to search tags",Te),W("Unable to load tags right now."),p([]),b(0)}finally{F(!1)}},[g,y,w]),Pe=u.useCallback(async()=>{if(P||T||!te)return;const H=E+80;V(!0),W("");try{const K=await ao({q:y,category:g,sort:w,limit:80,offset:H}),le=(K==null?void 0:K.items)||[];p(ue=>[...ue,...le]),b(Number((K==null?void 0:K.total)||0)),z(H)}catch(K){console.error("Failed to load more tags",K),W("Unable to load more tags.")}finally{V(!1)}},[te,g,P,T,E,y,w]);u.useEffect(()=>{if(!se)return;W(""),q("");let H=!1;return(async()=>{try{const K=await ym();if(H)return;m(Array.isArray(K==null?void 0:K.categories)?K.categories:[])}catch(K){console.error("Failed to load tag categories",K),H||m([])}})(),()=>{H=!0}},[se]),u.useEffect(()=>{se&&(h(r||""),v(""),N("count"),p([]),b(0),z(0),F(!1),V(!1),W(""),q(""),ee([]))},[r,se]),u.useEffect(()=>{if(!se)return;const H=window.setTimeout(()=>{X()},220);return()=>window.clearTimeout(H)},[g,se,y,X,w]),u.useEffect(()=>{if(!se)return;const H=G.current;if(!H||typeof IntersectionObserver>"u")return;const K=new IntersectionObserver(le=>{const ue=le[0];ue!=null&&ue.isIntersecting&&Pe()},{threshold:.1});return K.observe(H),()=>K.disconnect()},[se,Pe]);const Je=u.useMemo(()=>d?null:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:t,children:"Done"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:()=>X(),disabled:P||T,children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(ji,{size:14}),"Refresh"]})})]}),[d,P,T,t,X]),Ze=!!(n&&(o||a||i)),re=Number.isFinite(c)?`${c} tags`:"",me=l.jsxs("div",{className:`sheet-stack ${d?"tag-library-page":""}`,children:[Ze?l.jsxs("div",{className:"tag-library-context",children:[l.jsxs("div",{className:"tag-library-context-head",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"sheet-label",children:"Adding to alias"}),l.jsx("div",{className:"tag-library-context-title",children:o||"Alias"}),a?l.jsx("div",{className:"tag-library-context-token",children:a}):null]}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:t,children:"Back"})]}),l.jsx("div",{className:"tag-library-context-preview",children:i||""}),re?l.jsx("div",{className:"tag-library-context-meta",children:re}):null]}):null,l.jsxs("div",{className:"sheet-section",children:[d?null:l.jsx("div",{className:"sheet-label",children:"Browse"}),l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:U,type:"search",value:y,onChange:H=>h(H.target.value),placeholder:"Search tags (e.g. smile, city, sword)",className:"composer-search ui-control ui-input","aria-label":"Search tags"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>h(""),disabled:!y,children:"Clear"})]}),l.jsx(Ye,{value:g,onChange:v,className:"composer-subcategory-select","aria-label":"Filter by category",size:"sm",options:[{value:"",label:"Category: All"},...S.map(H=>({value:H.key,label:`${Bn(H.key)} (${Number(H.actual||H.count||0).toLocaleString()})`}))]}),l.jsx(Ye,{value:w,onChange:N,className:"composer-subcategory-select","aria-label":"Sort tags",size:"sm",options:[{value:"count",label:"Sort: Popular"},{value:"alpha",label:"Sort: AZ"}]})]}),de?l.jsx("div",{className:"text-xs text-[#9DA3FFCC]",children:de}):null,fe?l.jsx("div",{className:"text-xs text-[#FF8F70]",children:fe}):null]}),l.jsx("div",{className:"composer-alias-list tag-library-grid",role:"list",children:P?l.jsx("div",{className:"composer-alias-empty",children:"Loading tags"}):f.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No tags found."}):l.jsxs(l.Fragment,{children:[f.map(H=>l.jsx("div",{className:"tag-library-row",role:"listitem",children:l.jsxs("button",{type:"button",className:`composer-alias-item tag-library-item ${!n&&pe.has(String(H.tag||"").toLowerCase())?"is-collected":""}`,onClick:()=>{if(n){n(String(H.tag||"")),q(`Added: ${H.tag}`);return}const K=String(H.tag||"");pe.has(K.toLowerCase())?(ye(K),q(`Removed: ${H.tag}`)):(Ie(K),q(`Added: ${H.tag}`))},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name tag-library-name",children:l.jsx("code",{className:"tag-library-code",children:H.tag})}),H.category?l.jsx("span",{className:"composer-alias-category",children:Bn(H.category)}):null]}),l.jsx("div",{className:"composer-alias-token",children:Number(H.count||0).toLocaleString()})]})},`${H.tag}-${H.category}`)),l.jsx("div",{ref:G,className:"composer-sentinel"}),T?l.jsx("div",{className:"composer-alias-empty",children:"Loading more"}):null]})})]});return se?d?l.jsxs("section",{className:"tag-library-surface",children:[s?l.jsx("div",{className:"sheet-label tag-library-page-title",children:s}):null,me,n?null:l.jsxs("div",{className:"tag-collection-bar","aria-live":"polite",children:[l.jsxs("div",{className:"tag-collection-bar-main",children:[l.jsx("div",{className:"tag-collection-bar-title",children:"Tags"}),l.jsx("div",{className:"tag-collection-bar-count","aria-live":"polite",children:ne.length===0?"No tags selected":`${ne.length} selected`})]}),l.jsx("button",{type:"button",className:"tag-collection-menu-btn",onClick:()=>I(!0),"aria-label":"Manage collected tags",children:l.jsx(rx,{size:16})}),l.jsx("textarea",{ref:O,value:J,onChange:H=>{const K=H.target.value.split(",").map(Ee=>Ee.trim()).filter(Boolean),le=new Set,ue=[];K.forEach(Ee=>{const be=Ee.toLowerCase();le.has(be)||(le.add(be),ue.push(Ee))}),ee(ue)},className:"sr-only","aria-label":"Collected tags text"})]}),n?null:l.jsx(St,{open:k,onClose:()=>I(!1),title:"Collected tags",variant:"sheet",shouldCloseOnOverlayClick:!0,children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsxs("div",{className:"sheet-label",children:["Tags (",ne.length,")"]}),l.jsxs("div",{className:"tag-collection-codeblock",children:[l.jsx("pre",{className:"tag-collection-pre",children:J||""}),l.jsx("button",{type:"button",className:"tag-collection-copy-btn",onClick:he,disabled:ne.length===0,"aria-label":"Copy collected tags",children:l.jsx(sx,{size:16})}),l.jsx("textarea",{ref:O,value:J,readOnly:!0,className:"sr-only","aria-label":"Collected tags text"})]}),ne.length?l.jsx("div",{className:"tag-collection-chips",children:ne.map((H,K)=>l.jsxs("span",{className:"collected-tag-chip",onClick:()=>ye(H),role:"button",tabIndex:0,onKeyDown:le=>{le.target===le.currentTarget&&(le.key==="Enter"||le.key===" ")&&(le.preventDefault(),ye(H))},children:[l.jsx("code",{className:"collected-tag-code",children:H}),l.jsx("button",{type:"button",className:"collected-tag-remove","aria-label":`Remove ${H}`,onClick:le=>{le.stopPropagation(),ye(H)},children:l.jsx(sn,{size:12})})]},`${H}-${K}`))}):l.jsx("div",{className:"sheet-hint",children:"No tags collected yet."})]}),l.jsxs("div",{className:"sheet-section flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>I(!1),children:"Close"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:we,disabled:ne.length===0,children:"Clear"})]})]})})]}):l.jsx(St,{open:e,onClose:t,title:s,variant:"fullscreen",contentClassName:"tag-library-sheet",footer:Je,shouldCloseOnOverlayClick:!1,children:me}):null}function Hw(){const e=ln(),[t]=pm(),n=t.get("q")||"",r=u.useMemo(()=>n?`Tag Library  ${n}`:"Tag Library",[n]);return l.jsxs("div",{className:"page-shell page-stack",children:[l.jsxs("div",{className:"page-bar",children:[l.jsx("h1",{className:"page-bar-title",children:r}),l.jsxs("div",{className:"page-bar-actions",children:[l.jsx(Ct,{size:"xs",onClick:()=>e("/aliases"),children:"Aliases"}),l.jsx(Ct,{size:"xs",onClick:()=>e("/compose"),children:"Composer"})]})]}),l.jsx(Vw,{inline:!0,initialQuery:n,title:"Browse",onSelectTag:null})]})}function Gw({open:e=!1,onClose:t,value:n="",onChange:r,aliasOptions:s=[],aliasCatalog:o=[],fieldLabel:a="Prompt",variant:i="sheet"}){var Bc,Wc,Vc;const c=u.useRef(null),d=u.useRef(null),y=u.useRef(null),h=u.useRef(null),[g,v]=u.useState(n),[w,N]=u.useState(""),[S,m]=u.useState("All"),[f,p]=u.useState("All"),[j,b]=u.useState(30),[E,z]=u.useState("compose"),[P,F]=u.useState(null),[T,V]=u.useState(null),[fe,W]=u.useState(null),de=u.useRef(null),q=u.useRef(null),[ne,ee]=u.useState(!1),[k,I]=u.useState(null),_=u.useRef(null),R=u.useRef(null),[D,Z]=u.useState(""),[G,U]=u.useState(""),[O,M]=u.useState("count"),[$,te]=u.useState([]),[se,J]=u.useState([]),[pe,Ie]=u.useState(0),[ye,we]=u.useState(0),[he,je]=u.useState(!1),[X,Pe]=u.useState(!1),[Je,Ze]=u.useState(""),[re,me]=u.useState([]),[H,K]=u.useState(""),[le,ue]=u.useState([]),[Ee,be]=u.useState(""),Te=u.useMemo(()=>{if(!g)return{text:"",parts:[]};const C=new Map;if((o||[]).forEach(Le=>{if(!Le)return;const ke=String(Le.token||"").trim().toLowerCase(),Nt=typeof Le.text=="string"?Le.text.trim():"";!ke||!Nt||C.set(ke,Nt)}),!C.size||!g.includes("$"))return{text:g,parts:[{text:g,isAlias:!1}]};const A=[],ce=/\$([a-z0-9_:-]+)\$/gi;let ge=0,Ae;for(;(Ae=ce.exec(g))!==null;){const Le=Ae.index;Le>ge&&A.push({text:g.slice(ge,Le),isAlias:!1});const ke=String(Ae[1]||"").toLowerCase(),Nt=C.get(ke);typeof Nt=="string"?A.push({text:Nt,isAlias:!0}):A.push({text:Ae[0],isAlias:!1}),ge=ce.lastIndex}return ge<g.length&&A.push({text:g.slice(ge),isAlias:!1}),{text:A.map(Le=>Le.text).join(""),parts:A}},[o,g]);u.useEffect(()=>{e&&(v(n),z("compose"),N(""),m("All"),p("All"),b(30),F(null),V(null),W(null),ee(!1),I(null),Ft(""),Z(""),U(""),M("count"),J([]),Ie(0),we(0),je(!1),Pe(!1),Ze(""))},[e,n]),u.useEffect(()=>{if(P===null||typeof document>"u")return;const C=document.querySelector("main.app-content"),A={htmlOverscroll:document.documentElement.style.overscrollBehavior,bodyOverscroll:document.body.style.overscrollBehavior,bodyOverflow:document.body.style.overflow,scrollOverflow:C==null?void 0:C.style.overflow,scrollTouch:C==null?void 0:C.style.touchAction,scrollOverscroll:C==null?void 0:C.style.overscrollBehavior};return document.documentElement.style.overscrollBehavior="none",document.body.style.overscrollBehavior="none",document.body.style.overflow="hidden",C&&(C.style.overflow="hidden",C.style.touchAction="none",C.style.overscrollBehavior="none"),()=>{document.documentElement.style.overscrollBehavior=A.htmlOverscroll||"",document.body.style.overscrollBehavior=A.bodyOverscroll||"",document.body.style.overflow=A.bodyOverflow||"",C&&(C.style.overflow=A.scrollOverflow||"",C.style.touchAction=A.scrollTouch||"",C.style.overscrollBehavior=A.scrollOverscroll||"")}},[P]);const Ue=u.useMemo(()=>(Array.isArray(o)?o.filter(C=>C&&C.name):[]).map(C=>({...C,...zc(C)})),[o]),ht=u.useMemo(()=>{const C=new Map;return Ue.forEach(A=>{A!=null&&A.token&&C.set(String(A.token).toLowerCase(),A)}),C},[Ue]),x=u.useMemo(()=>{const C=new Set(["All"]);return Ue.forEach(A=>{A.category&&C.add(A.category)}),Array.from(C).sort((A,ce)=>A.localeCompare(ce))},[Ue]),L=u.useMemo(()=>{const C=new Set(["All"]);return Ue.forEach(A=>{(!S||S==="All"||A.category===S)&&A.subcategory&&C.add(A.subcategory)}),Array.from(C).sort((A,ce)=>A.localeCompare(ce))},[Ue,S]),B=u.useMemo(()=>["All",...x.filter(C=>C!=="All")],[x]),Q=u.useMemo(()=>["All",...L.filter(C=>C!=="All")],[L]),oe=u.useMemo(()=>{const C=w.trim().toLowerCase();return Ue.filter(A=>{var ce,ge,Ae,Re;return S!=="All"&&(A.category||"")!==S||f!=="All"&&(A.subcategory||"other")!==f?!1:C?((ce=A.token)==null?void 0:ce.toLowerCase().includes(C))||((ge=A.text)==null?void 0:ge.toLowerCase().includes(C))||((Ae=A.name)==null?void 0:Ae.toLowerCase().includes(C))||((Re=A.displayName)==null?void 0:Re.toLowerCase().includes(C)):!0}).sort((A,ce)=>{const ge=(A.subcategory||"").toLowerCase(),Ae=(ce.subcategory||"").toLowerCase();return ge!==Ae?ge.localeCompare(Ae):A.token.localeCompare(ce.token)})},[Ue,S,f,w]),ie=u.useMemo(()=>oe.slice(0,j),[oe,j]);u.useEffect(()=>{b(30)},[S,f,w,Ue]),u.useEffect(()=>{p("All")},[S]),u.useEffect(()=>{const C=y.current;if(!C)return;const A=new IntersectionObserver(ce=>{ce[0].isIntersecting&&j<oe.length&&b(Ae=>Math.min(Ae+20,oe.length))},{threshold:.1});return A.observe(C),()=>A.disconnect()},[j,oe.length]);const ve=u.useMemo(()=>typeof g!="string"?[]:Cx(g),[g]);u.useEffect(()=>{if(!e||E!=="tags"||$.length>0)return;let C=!1;return(async()=>{try{const A=await ym();if(C)return;te(Array.isArray(A==null?void 0:A.categories)?A.categories:[])}catch(A){console.error("Failed to load tag categories",A),C||te([])}})(),()=>{C=!0}},[e,E,$.length]);const Se=u.useCallback(async({nextQuery:C,nextCategory:A,nextSort:ce}={})=>{const ge=typeof C=="string"?C:D,Ae=typeof A=="string"?A:G,Re=typeof ce=="string"?ce:O;je(!0),Ze(""),we(0);try{const Le=await ao({q:ge,category:Ae,sort:Re,limit:80,offset:0});J((Le==null?void 0:Le.items)||[]),Ie(Number((Le==null?void 0:Le.total)||0))}catch(Le){console.error("Failed to search tags",Le),Ze("Unable to load tags right now."),J([]),Ie(0)}finally{je(!1)}},[G,D,O]),xe=u.useCallback(async()=>{if(he||X||se.length>=pe)return;const C=ye+80;Pe(!0),Ze("");try{const A=await ao({q:D,category:G,sort:O,limit:80,offset:C}),ce=(A==null?void 0:A.items)||[];J(ge=>[...ge,...ce]),Ie(Number((A==null?void 0:A.total)||0)),we(C)}catch(A){console.error("Failed to load more tags",A),Ze("Unable to load more tags.")}finally{Pe(!1)}},[G,he,X,ye,D,O,se.length,pe]);u.useEffect(()=>{if(!e||E!=="tags")return;const C=window.setTimeout(()=>{Se()},220);return()=>window.clearTimeout(C)},[e,E,D,G,O,Se]),u.useEffect(()=>{if(!e||E!=="tags")return;const C=R.current;if(!C||typeof IntersectionObserver>"u")return;const A=new IntersectionObserver(ce=>{const ge=ce[0];ge!=null&&ge.isIntersecting&&xe()},{threshold:.1});return A.observe(C),()=>A.disconnect()},[e,E,xe]);const nt=pe?`${se.length.toLocaleString()} / ${pe.toLocaleString()}`:`${se.length.toLocaleString()}`,rt=u.useCallback(C=>{v(A=>{const ge=typeof C=="function"?C(typeof A=="string"?A:""):String(C||"");return i==="page"&&(r==null||r(ge)),ge})},[r,i]),Oe=u.useCallback(C=>{const A=String(C||"").trim();if(A&&(rt(ce=>{const ge=ce.length,Ae=ce.length,Re=ce.slice(0,ge),Le=ce.slice(Ae),ke=Re.match(/[^\s]$/),Nt=Le.match(/^[^\s]/),nh=ke&&ke[0]!==","?", ":"",rh=Nt&&Nt[0]!==","?", ":"";return Re+nh+A+rh+Le}),c.current))try{c.current.blur()}catch{}},[rt]),[gt,Ft]=u.useState(""),kn=u.useCallback(()=>{const C=String(gt||"").trim();if(!C)return;const ce=C.split(",").map(ge=>ge.trim()).filter(Boolean).join(", ");ce&&(Oe(ce),Ft(""),z("compose"))},[gt,Oe]),Fo=u.useCallback(()=>{me([]),K("Cleared collected tags.")},[]),Ys=u.useCallback(C=>{const A=String(C||"").trim().toLowerCase();A&&me(ce=>ce.filter(ge=>ge.toLowerCase()!==A))},[]),qs=u.useCallback(()=>{if(!re.length){K("No tags to apply.");return}Oe(re.join(", ")),K(`Applied ${re.length} tag${re.length===1?"":"s"}.`),me([]),z("compose")},[re,Oe]),Xs=u.useCallback(C=>{const A=String(C||"").trim();A&&me(ce=>{const ge=A.toLowerCase();return ce.some(Re=>Re.toLowerCase()===ge)?(K(`Removed: ${A}`),ce.filter(Re=>Re.toLowerCase()!==ge)):(K(`Selected: ${A}`),[...ce,A])})},[]),Js=u.useCallback(C=>{const A=String(C||"").trim();A&&ue(ce=>{const ge=A.toLowerCase();return ce.some(Re=>Re.toLowerCase()===ge)?(be(`Removed: ${A}`),ce.filter(Re=>Re.toLowerCase()!==ge)):(be(`Selected: ${A}`),[...ce,A])})},[]),Wm=u.useCallback(()=>{ue([]),be("Cleared selected aliases.")},[]),Vm=u.useCallback(C=>{const A=String(C||"").trim().toLowerCase();A&&ue(ce=>ce.filter(ge=>ge.toLowerCase()!==A))},[]),Hm=u.useCallback(()=>{if(!le.length){be("No aliases to apply.");return}const C=le.map(A=>`$${A}$`).join(", ");Oe(C),be(`Applied ${le.length} alias${le.length===1?"":"es"}.`),ue([]),z("compose")},[le,Oe]),$c=C=>{rt(A=>bx(A||"",C))},Mc=u.useCallback((C,A)=>{if(!(ve!=null&&ve.length))return;const ce=C+A;ce<0||ce>=ve.length||(rt(ge=>jd(ge||"",ve,C,ce)),W(ce))},[ve,rt]),Oc=C=>{if(!C)return;let A=C.text;if(C.type==="alias"){const ge=ht.get(C.text.toLowerCase());A=(ge==null?void 0:ge.displayName)||C.text}const ce=xd(g||"",C);I({element:C,displayName:A,weight:(ce==null?void 0:ce.weight)??1}),ee(!0)},Zs=u.useCallback((C,A)=>{C===A||C===null||A===null||ve!=null&&ve.length&&rt(ce=>jd(ce||"",ve,C,A))},[ve,rt]),Gm=u.useCallback((C,A)=>{F(A),de.current=C.target,C.dataTransfer.effectAllowed="move",C.dataTransfer.setData("text/plain",A.toString()),requestAnimationFrame(()=>{de.current&&de.current.classList.add("is-dragging")})},[]),Km=u.useCallback(()=>{de.current&&de.current.classList.remove("is-dragging"),P!==null&&T!==null&&P!==T&&Zs(P,T),F(null),V(null),de.current=null},[P,T,Zs]),Qm=u.useCallback((C,A)=>{C.preventDefault(),C.dataTransfer.dropEffect="move",A!==T&&V(A)},[T]),Ym=u.useCallback(()=>{},[]),qm=u.useCallback((C,A)=>{var Re,Le;if(!((Le=(Re=C.target)==null?void 0:Re.closest)==null?void 0:Le.call(Re,".composer-token-drag-handle")))return;const ge=C.touches[0],Ae=window.setTimeout(()=>{q.current&&(q.current.active=!0,F(A),V(A))},240);q.current={idx:A,startX:ge.clientX,startY:ge.clientY,active:!1,timer:Ae}},[]),Xm=u.useCallback(C=>{if(!q.current)return;const A=C.touches[0],ce=Math.abs(A.clientX-q.current.startX),ge=Math.abs(A.clientY-q.current.startY);if(!q.current.active){(ce>8||ge>8)&&(window.clearTimeout(q.current.timer),q.current=null);return}C.preventDefault();const Ae=document.querySelectorAll(".composer-token-draggable"),Re=A.clientX,Le=A.clientY;for(let ke=0;ke<Ae.length;ke++){const Nt=Ae[ke].getBoundingClientRect();if(Re>=Nt.left&&Re<=Nt.right&&Le>=Nt.top&&Le<=Nt.bottom){V(ke);break}}},[]),Jm=u.useCallback(()=>{var C,A;(C=q.current)!=null&&C.timer&&window.clearTimeout(q.current.timer),(A=q.current)!=null&&A.active&&P!==null&&T!==null&&P!==T&&Zs(P,T),q.current=null,F(null),V(null)},[P,T,Zs]),Zm=u.useCallback(()=>{var C;(C=q.current)!=null&&C.timer&&window.clearTimeout(q.current.timer),q.current=null,F(null),V(null)},[]),eh=()=>{r==null||r(g),t==null||t()},Fc=()=>{t==null||t()},Do=i==="page";if(!(Do||e))return null;const Dc=l.jsxs("div",{className:`composer-shell ${Do?"is-page":""}`,children:[l.jsx(Tr,{ariaLabel:"Composer tabs",value:E,onChange:z,items:[{key:"compose",label:"Compose",icon:l.jsx(_c,{size:14})},{key:"aliases",label:"Aliases",icon:l.jsx(Qs,{size:14})},{key:"tags",label:"Tags",icon:l.jsx(Hn,{size:14})}]}),l.jsxs("div",{className:`composer-panel composer-panel-compose ${E==="compose"?"is-visible":""}`,children:[l.jsx("div",{className:"composer-editor",children:l.jsxs("div",{className:"composer-input-row",children:[l.jsx("input",{ref:c,type:"text",value:gt,onChange:C=>Ft(C.target.value),onKeyDown:C=>{C.key==="Enter"&&(C.preventDefault(),kn())},className:"composer-input ui-control ui-input is-compact",placeholder:"Add prompt text","aria-label":"Add prompt text"}),l.jsx("button",{type:"button",className:"composer-add-btn",onClick:kn,disabled:!gt.trim(),"aria-label":"Add prompt text",children:"+"})]})}),l.jsxs("div",{className:"composer-tokens",children:[l.jsxs("div",{className:"composer-tokens-header",children:[l.jsxs("span",{className:"composer-tokens-label",children:["Elements",l.jsx("span",{className:"composer-tokens-count",children:ve.length})]}),l.jsx("span",{className:"composer-tokens-hint",children:"Drag to reorder  Tap to adjust"})]}),ve.length?l.jsx("div",{ref:h,className:`composer-tokens-list ${P!==null?"is-dragging":""}`,children:ve.map((C,A)=>{let ce=C.text;if(C.type==="alias"){const ke=ht.get(C.text.toLowerCase());ce=(ke==null?void 0:ke.displayName)||C.text}const ge=P===A,Ae=T===A&&P!==null&&P!==A,Re=xd(g||"",C),Le=(Re==null?void 0:Re.weight)??1;return l.jsxs("span",{className:`composer-token composer-token-draggable ${C.type==="alias"?"is-alias":"is-tag"} ${ge?"is-dragging":""} ${Ae?"is-drop-target":""} ${fe===A?"is-selected":""}`,title:C.type==="alias"?`Alias: $${C.text}$`:`Tag: ${C.text}`,role:"button",tabIndex:0,draggable:!0,onDragStart:ke=>Gm(ke,A),onDragEnd:Km,onDragOver:ke=>Qm(ke,A),onDragLeave:Ym,onTouchStart:ke=>qm(ke,A),onTouchMove:Xm,onTouchEnd:Jm,onTouchCancel:Zm,onClick:()=>{P===null&&(W(A),Oc(C))},onKeyDown:ke=>{if(ke.target===ke.currentTarget&&(ke.key==="Enter"||ke.key===" ")){if(ke.preventDefault(),P!==null)return;W(A),Oc(C)}},children:[l.jsx("span",{className:"composer-token-order",children:A+1}),l.jsx("span",{className:"composer-token-drag-handle","aria-hidden":"true",children:l.jsx(Si,{size:10})}),l.jsx("span",{className:"composer-token-name",children:ce}),C.type==="alias"&&l.jsx("span",{className:"composer-token-type",children:"$"}),Math.abs(Le-1)>1e-6&&l.jsxs("span",{className:"composer-token-weight",children:[pn(Le),""]}),l.jsxs("div",{className:"composer-token-shift",role:"group","aria-label":"Reorder token",children:[l.jsx("button",{type:"button",className:"composer-token-shift-btn",onClick:ke=>{ke.stopPropagation(),Mc(A,-1)},"aria-label":"Move up",disabled:A===0,children:""}),l.jsx("button",{type:"button",className:"composer-token-shift-btn",onClick:ke=>{ke.stopPropagation(),Mc(A,1)},"aria-label":"Move down",disabled:A===ve.length-1,children:""})]}),l.jsx("button",{type:"button",className:"composer-token-remove",onClick:ke=>{ke.stopPropagation(),$c(C)},"aria-label":`Remove ${C.text}`,children:l.jsx(sn,{size:9})})]},`${C.type}-${C.text}-${C.start}`)})}):l.jsx("div",{className:"composer-empty",children:"No elements yet."})]}),l.jsxs("div",{className:"composer-expanded",children:[l.jsxs("div",{className:"composer-expanded-header",children:[l.jsx("span",{className:"composer-expanded-label",children:"Expanded prompt"}),l.jsx("span",{className:"composer-expanded-meta",children:Te.text?`${Te.text.length} chars`:"Empty"})]}),l.jsx("div",{className:"composer-expanded-box","aria-label":"Expanded prompt",children:Te.text?Te.parts.map((C,A)=>C.isAlias?l.jsx("span",{className:"composer-expanded-alias",children:C.text},`alias-${A}`):l.jsx("span",{children:C.text},`text-${A}`)):"No prompt yet."})]})]}),l.jsxs("div",{className:`composer-panel composer-panel-aliases ${E==="aliases"?"is-visible":""}`,children:[l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:d,type:"text",value:w,onChange:C=>N(C.target.value),placeholder:"Search aliases",className:"composer-search ui-control ui-input","aria-label":"Search aliases"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>N(""),disabled:!w,children:"Clear"})]}),l.jsx(Ye,{value:S,onChange:m,className:"composer-subcategory-select","aria-label":"Filter by category",size:"sm",options:B.map(C=>({value:C,label:C==="All"?"Category: All":un(C)}))}),Q.length>2&&l.jsx(Ye,{value:f,onChange:p,className:"composer-subcategory-select",size:"sm",options:Q.map(C=>({value:C,label:C==="All"?"All subcategories":Bn(C)}))})]}),l.jsxs("div",{className:"composer-tag-collection-bar is-sticky",children:[l.jsxs("div",{children:[l.jsx("div",{className:"composer-tag-collection-label",children:le.length?`${le.length} selected`:"No aliases selected"}),Ee?l.jsx("div",{className:"composer-tag-collection-status",children:Ee}):null]}),l.jsxs("div",{className:"composer-tag-collection-actions",children:[l.jsx("button",{type:"button",className:"composer-tag-collection-btn",onClick:Wm,disabled:!le.length,children:"Clear"}),l.jsx("button",{type:"button",className:"composer-tag-collection-btn is-primary",onClick:Hm,disabled:!le.length,children:"Apply"})]})]}),le.length?l.jsxs("div",{className:"composer-collection-inline",role:"list",children:[le.slice(0,3).map(C=>{const A=ht.get(C.toLowerCase()),ce=(A==null?void 0:A.displayName)||C;return l.jsxs("button",{type:"button",className:"collected-tag-chip",onClick:()=>Vm(C),"aria-label":`Remove ${C}`,title:`$${C}$`,children:[l.jsx("code",{className:"collected-tag-code",children:ce}),l.jsx(sn,{size:12})]},C)}),le.length>3?l.jsxs("div",{className:"collected-tag-chip tag-overflow-chip","aria-hidden":"true",children:["+",le.length-3," more"]}):null]}):null,l.jsx("div",{className:"composer-alias-list",children:oe.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases found."}):l.jsxs(l.Fragment,{children:[ie.map(C=>l.jsxs("button",{type:"button",onClick:()=>Js(C.token),className:`composer-alias-item ${le.some(A=>A.toLowerCase()===C.token.toLowerCase())?"is-collected":""}`,children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:C.displayName||C.token}),C.category?l.jsx("span",{className:"composer-alias-category",children:un(C.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",C.token,"$"]}),l.jsx("div",{className:"composer-alias-text",children:C.text})]},C.key)),j<oe.length&&l.jsx("div",{ref:y,className:"composer-sentinel"})]})})]}),l.jsxs("div",{className:`composer-panel composer-panel-tags ${E==="tags"?"is-visible":""}`,onClick:C=>C.stopPropagation(),children:[l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:_,type:"search",value:D,onChange:C=>Z(C.target.value),placeholder:"Search tags (e.g. smile, city, sword)",className:"composer-search ui-control ui-input","aria-label":"Search tags"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>Z(""),disabled:!D,children:"Clear"})]}),l.jsx(Ye,{value:G,onChange:U,className:"composer-subcategory-select","aria-label":"Filter by category",size:"sm",options:[{value:"",label:"Category: All"},...$.map(C=>({value:C.key,label:`${Bn(C.key)} (${Number(C.actual||C.count||0).toLocaleString()})`}))]}),l.jsx(Ye,{value:O,onChange:M,className:"composer-subcategory-select","aria-label":"Sort tags",size:"sm",options:[{value:"count",label:"Sort: Popular"},{value:"alpha",label:"Sort: AZ"}]})]}),l.jsx("div",{className:"composer-tags-header",children:l.jsx("div",{className:"composer-tags-hint",children:l.jsx("span",{className:"ml-3 opacity-80",children:nt})})}),l.jsxs("div",{className:"composer-tag-collection-bar is-sticky",children:[l.jsxs("div",{children:[l.jsx("div",{className:"composer-tag-collection-label",children:re.length?`${re.length} selected`:"No tags selected"}),H?l.jsx("div",{className:"composer-tag-collection-status",children:H}):null]}),l.jsxs("div",{className:"composer-tag-collection-actions",children:[l.jsx("button",{type:"button",className:"composer-tag-collection-btn",onClick:Fo,disabled:!re.length,children:"Clear"}),l.jsx("button",{type:"button",className:"composer-tag-collection-btn is-primary",onClick:qs,disabled:!re.length,children:"Apply"})]})]}),re.length?l.jsxs("div",{className:"composer-collection-inline",role:"list",children:[re.slice(0,3).map(C=>l.jsxs("button",{type:"button",className:"collected-tag-chip",onClick:()=>Ys(C),"aria-label":`Remove ${C}`,children:[l.jsx("code",{className:"collected-tag-code",children:C}),l.jsx(sn,{size:12})]},C)),re.length>3?l.jsxs("div",{className:"collected-tag-chip tag-overflow-chip","aria-hidden":"true",children:["+",re.length-3," more"]}):null]}):null,Je?l.jsx("div",{className:"composer-tags-error",children:Je}):null,l.jsx("div",{className:"composer-alias-list composer-tags-grid",role:"list",children:he?l.jsx("div",{className:"composer-alias-empty",children:"Loading tags"}):se.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No tags found."}):l.jsxs(l.Fragment,{children:[se.map(C=>{const A=re.some(ce=>ce.toLowerCase()===String(C.tag||"").toLowerCase());return l.jsxs("button",{type:"button",className:`composer-alias-item composer-tag-item ${A?"is-collected":""}`,onClick:ce=>{ce.stopPropagation(),Xs(C.tag)},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name composer-tag-name",children:l.jsx("code",{className:"composer-tag-code",children:C.tag})}),C.category?l.jsx("span",{className:"composer-alias-category",children:Bn(C.category)}):null]}),l.jsx("div",{className:"composer-alias-token composer-tag-count",children:Number(C.count||0).toLocaleString()})]},`${C.tag}-${C.category}`)}),se.length<pe&&l.jsx("div",{ref:R,className:"composer-sentinel"}),X?l.jsx("div",{className:"composer-alias-empty",children:"Loading more"}):null]})})]})]}),Uc=l.jsx(bi,{open:ne,onClose:()=>ee(!1),title:((Bc=k==null?void 0:k.element)==null?void 0:Bc.type)==="alias"?"Alias strength":"Tag strength",tokenLabel:k?((Wc=k.element)==null?void 0:Wc.type)==="alias"?`${k.displayName}  $${(Vc=k.element)==null?void 0:Vc.text}$`:k.displayName:"",weight:(k==null?void 0:k.weight)??1,onApply:C=>{k!=null&&k.element&&rt(A=>wd(A||"",k.element,C))},onRemoveWeight:()=>{k!=null&&k.element&&rt(C=>wd(C||"",k.element,null))},onDeleteToken:()=>{k!=null&&k.element&&$c(k.element)}}),th=l.jsx("div",{className:"page-bar composer-bar",children:l.jsx("h1",{className:"page-bar-title",children:a||"Prompt"})});return Do?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"page-shell page-stack",children:[th,Dc]}),Uc]}):l.jsxs(l.Fragment,{children:[l.jsx(St,{open:e,onClose:Fc,title:"Composer",variant:"fullscreen",shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:Fc,children:"Cancel"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:eh,children:"Apply"})]}),children:Dc}),Uc]})}function Kw(){const e=ln(),[t]=pm(),{formData:n,handleFormChange:r,aliasOptions:s,aliasCatalog:o,promptFieldName:a,handleGenerate:i,workflowData:c,selectedWorkflow:d,isLoading:y}=Bm(),g=t.get("field")||a||"prompt",v=(n==null?void 0:n[g])||"";return u.useEffect(()=>{if(!(typeof document>"u"))return document.body.classList.add("no-pull-refresh"),document.documentElement.classList.add("no-pull-refresh"),()=>{document.body.classList.remove("no-pull-refresh"),document.documentElement.classList.remove("no-pull-refresh")}},[]),u.useEffect(()=>{const w=()=>{!c||!d||y||i()};return window.addEventListener("cozygen:request-render",w),()=>window.removeEventListener("cozygen:request-render",w)},[i,y,d,c]),l.jsx(Gw,{open:!0,onClose:()=>e("/controls"),value:v,onChange:w=>r(g,w),aliasOptions:s,aliasCatalog:o,fieldLabel:g,variant:"page"})}function Qw(){var m,f;const{authed:e,ready:t,login:n}=zo(),r=ln(),o=((f=(m=Rt().state)==null?void 0:m.from)==null?void 0:f.pathname)||"/studio",[a,i]=u.useState(""),[c,d]=u.useState(""),[y,h]=u.useState(""),[g,v]=u.useState(!1),[w,N]=u.useState(!1);u.useEffect(()=>{try{localStorage.getItem("cozygen_idle_logout")&&(N(!0),localStorage.removeItem("cozygen_idle_logout"))}catch{}},[]),u.useEffect(()=>{t&&e&&r(o,{replace:!0})},[t,e,o,r]);const S=async p=>{p.preventDefault(),h(""),v(!0);try{await n(a,c),r(o,{replace:!0})}catch(j){j!=null&&j.unauthorized?h("Invalid username or password."):h("Unable to sign in. Please try again.")}finally{v(!1)}};return l.jsx("div",{className:"login-shell",children:l.jsxs("div",{className:"neon-card login-card",children:[l.jsxs("div",{className:"login-brand",children:[l.jsx(km,{size:34}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"login-title",children:"Sign in"}),l.jsx("div",{className:"login-subtitle",children:"Continue to CozyGen Studio"})]})]}),l.jsxs("form",{className:"login-form",onSubmit:S,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"login-username",className:"login-label",children:"Username"}),l.jsx("input",{id:"login-username",type:"text",className:"ui-control ui-input",value:a,onChange:p=>i(p.target.value),autoComplete:"username",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"login-password",className:"login-label",children:"Password"}),l.jsx("input",{id:"login-password",type:"password",className:"ui-control ui-input",value:c,onChange:p=>d(p.target.value),autoComplete:"current-password",required:!0})]}),y?l.jsx("div",{className:"ui-alert",children:y}):w?l.jsx("div",{className:"ui-alert is-warn",children:"You were signed out due to inactivity. Please sign in again."}):null,l.jsx("button",{type:"submit",disabled:g,className:"ui-button is-primary w-full",children:g?"Signing in":"Sign in"})]}),l.jsxs("p",{className:"login-footnote",children:["Access is protected by CozyGen auth. Set ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /"," ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server to enable."]})]})})}function Yw({containerRef:e}){const{pathname:t,hash:n}=Rt();return u.useEffect(()=>{if(n)return;const r=e==null?void 0:e.current;if(r&&typeof r.scrollTo=="function"){r.scrollTo({top:0,left:0,behavior:"auto"});return}typeof window<"u"&&window.scrollTo(0,0)},[t,n,e]),null}function qw({children:e}){const{authed:t,ready:n}=zo(),r=Rt();return n?t?e:l.jsx(gi,{to:"/login",state:{from:r},replace:!0}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-200",children:l.jsxs("div",{className:"page-loading",children:[l.jsx("span",{className:"loading-spinner lg","aria-hidden":"true"}),l.jsx("span",{className:"sr-only",children:"Checking session"})]})})}function Xw(){const{pathname:e}=Rt(),t=ln(),{defaultCreds:n,authed:r}=zo(),s=e==="/login",o=u.useRef(null),a=!s,i=a;return u.useEffect(()=>{if(!r)return;const c=d=>{var g;const y=String(((g=d==null?void 0:d.detail)==null?void 0:g.fieldName)||"").trim(),h=y?`?field=${encodeURIComponent(y)}`:"";t(`/compose${h}`)};return window.addEventListener("cozygen:open-composer",c),()=>window.removeEventListener("cozygen:open-composer",c)},[r,t]),l.jsxs("div",{className:"app-shell",children:[!s&&l.jsx(ox,{isMobileAlignedNav:a}),!s&&r&&n&&l.jsxs("div",{className:"flex-shrink-0 bg-amber-500/10 text-amber-200 border-b border-amber-400/50 px-4 py-2 text-sm text-center",children:["Default CozyGen credentials are still in use. Change ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server."]}),l.jsx(Yw,{containerRef:o}),l.jsxs("div",{className:"app-body",children:[l.jsx("main",{ref:o,className:s?"app-content is-login":"app-content",children:l.jsxs(Nv,{children:[l.jsx(Ut,{path:"/login",element:l.jsx(Qw,{})}),l.jsxs(Ut,{element:l.jsx(qw,{children:l.jsx(ww,{children:l.jsx(jv,{})})}),children:[l.jsx(Ut,{path:"/",element:l.jsx(gi,{to:"/studio",replace:!0})}),l.jsx(Ut,{path:"/studio",element:l.jsx(Nw,{})}),l.jsx(Ut,{path:"/controls",element:l.jsx(Sw,{})}),l.jsx(Ut,{path:"/compose",element:l.jsx(Kw,{})}),l.jsx(Ut,{path:"/gallery",element:l.jsx(Mw,{})}),l.jsx(Ut,{path:"/aliases",element:l.jsx(Bw,{})}),l.jsx(Ut,{path:"/tags",element:l.jsx(Hw,{})})]}),l.jsx(Ut,{path:"*",element:l.jsx(gi,{to:"/studio",replace:!0})})]})}),i?l.jsx(cx,{}):null]})]})}function Jw(){return l.jsx(Iv,{children:l.jsx(Zv,{children:l.jsx(Xw,{})})})}ja.createRoot(document.getElementById("root")).render(l.jsx(It.StrictMode,{children:l.jsx(Jw,{})}));
