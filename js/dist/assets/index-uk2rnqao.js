function Uh(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Bh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ad={exports:{}},pi={},Md={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hs=Symbol.for("react.element"),Vh=Symbol.for("react.portal"),Wh=Symbol.for("react.fragment"),Hh=Symbol.for("react.strict_mode"),Gh=Symbol.for("react.profiler"),Kh=Symbol.for("react.provider"),Qh=Symbol.for("react.context"),Yh=Symbol.for("react.forward_ref"),Xh=Symbol.for("react.suspense"),qh=Symbol.for("react.memo"),Jh=Symbol.for("react.lazy"),Uc=Symbol.iterator;function Zh(e){return e===null||typeof e!="object"?null:(e=Uc&&e[Uc]||e["@@iterator"],typeof e=="function"?e:null)}var Od={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fd=Object.assign,Dd={};function Fr(e,t,n){this.props=e,this.context=t,this.refs=Dd,this.updater=n||Od}Fr.prototype.isReactComponent={};Fr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ud(){}Ud.prototype=Fr.prototype;function La(e,t,n){this.props=e,this.context=t,this.refs=Dd,this.updater=n||Od}var _a=La.prototype=new Ud;_a.constructor=La;Fd(_a,Fr.prototype);_a.isPureReactComponent=!0;var Bc=Array.isArray,Bd=Object.prototype.hasOwnProperty,Pa={current:null},Vd={key:!0,ref:!0,__self:!0,__source:!0};function Wd(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Bd.call(t,r)&&!Vd.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Hs,type:e,key:i,ref:o,props:s,_owner:Pa.current}}function em(e,t){return{$$typeof:Hs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ra(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hs}function tm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Vc=/\/+/g;function Oi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tm(""+e.key):t.toString(36)}function jl(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Hs:case Vh:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Oi(o,0):r,Bc(s)?(n="",e!=null&&(n=e.replace(Vc,"$&/")+"/"),jl(s,t,n,"",function(d){return d})):s!=null&&(Ra(s)&&(s=em(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Vc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Bc(e))for(var a=0;a<e.length;a++){i=e[a];var c=r+Oi(i,a);o+=jl(i,t,n,c,s)}else if(c=Zh(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=r+Oi(i,a++),o+=jl(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function tl(e,t,n){if(e==null)return e;var r=[],s=0;return jl(e,r,"","",function(i){return t.call(n,i,s++)}),r}function nm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ft={current:null},Sl={transition:null},rm={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:Sl,ReactCurrentOwner:Pa};function Hd(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:tl,forEach:function(e,t,n){tl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return tl(e,function(){t++}),t},toArray:function(e){return tl(e,function(t){return t})||[]},only:function(e){if(!Ra(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Component=Fr;Se.Fragment=Wh;Se.Profiler=Gh;Se.PureComponent=La;Se.StrictMode=Hh;Se.Suspense=Xh;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rm;Se.act=Hd;Se.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Fd({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Pa.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Bd.call(t,c)&&!Vd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Hs,type:e.type,key:s,ref:i,props:r,_owner:o}};Se.createContext=function(e){return e={$$typeof:Qh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Kh,_context:e},e.Consumer=e};Se.createElement=Wd;Se.createFactory=function(e){var t=Wd.bind(null,e);return t.type=e,t};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:Yh,render:e}};Se.isValidElement=Ra;Se.lazy=function(e){return{$$typeof:Jh,_payload:{_status:-1,_result:e},_init:nm}};Se.memo=function(e,t){return{$$typeof:qh,type:e,compare:t===void 0?null:t}};Se.startTransition=function(e){var t=Sl.transition;Sl.transition={};try{e()}finally{Sl.transition=t}};Se.unstable_act=Hd;Se.useCallback=function(e,t){return ft.current.useCallback(e,t)};Se.useContext=function(e){return ft.current.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e){return ft.current.useDeferredValue(e)};Se.useEffect=function(e,t){return ft.current.useEffect(e,t)};Se.useId=function(){return ft.current.useId()};Se.useImperativeHandle=function(e,t,n){return ft.current.useImperativeHandle(e,t,n)};Se.useInsertionEffect=function(e,t){return ft.current.useInsertionEffect(e,t)};Se.useLayoutEffect=function(e,t){return ft.current.useLayoutEffect(e,t)};Se.useMemo=function(e,t){return ft.current.useMemo(e,t)};Se.useReducer=function(e,t,n){return ft.current.useReducer(e,t,n)};Se.useRef=function(e){return ft.current.useRef(e)};Se.useState=function(e){return ft.current.useState(e)};Se.useSyncExternalStore=function(e,t,n){return ft.current.useSyncExternalStore(e,t,n)};Se.useTransition=function(){return ft.current.useTransition()};Se.version="18.3.1";Md.exports=Se;var u=Md.exports;const Ot=Bh(u),sm=Uh({__proto__:null,default:Ot},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm=u,im=Symbol.for("react.element"),om=Symbol.for("react.fragment"),am=Object.prototype.hasOwnProperty,cm=lm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,um={key:!0,ref:!0,__self:!0,__source:!0};function Gd(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)am.call(t,r)&&!um.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:im,type:e,key:i,ref:o,props:s,_owner:cm.current}}pi.Fragment=om;pi.jsx=Gd;pi.jsxs=Gd;Ad.exports=pi;var l=Ad.exports,jo={},Kd={exports:{}},Ct={},Qd={exports:{}},Yd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,I){var C=$.length;$.push(I);e:for(;0<C;){var b=C-1>>>1,U=$[b];if(0<s(U,I))$[b]=I,$[C]=U,C=b;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var I=$[0],C=$.pop();if(C!==I){$[0]=C;e:for(var b=0,U=$.length,A=U>>>1;b<A;){var B=2*(b+1)-1,q=$[B],H=B+1,D=$[H];if(0>s(q,C))H<U&&0>s(D,q)?($[b]=D,$[H]=C,b=H):($[b]=q,$[B]=C,b=B);else if(H<U&&0>s(D,C))$[b]=D,$[H]=C,b=H;else break e}}return I}function s($,I){var C=$.sortIndex-I.sortIndex;return C!==0?C:$.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],d=[],m=1,h=null,y=3,v=!1,w=!1,j=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g($){for(var I=n(d);I!==null;){if(I.callback===null)r(d);else if(I.startTime<=$)r(d),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(d)}}function N($){if(j=!1,g($),!w)if(n(c)!==null)w=!0,ne(_);else{var I=n(d);I!==null&&de(N,I.startTime-$)}}function _($,I){w=!1,j&&(j=!1,p(z),z=-1),v=!0;var C=y;try{for(g(I),h=n(c);h!==null&&(!(h.expirationTime>I)||$&&!ie());){var b=h.callback;if(typeof b=="function"){h.callback=null,y=h.priorityLevel;var U=b(h.expirationTime<=I);I=e.unstable_now(),typeof U=="function"?h.callback=U:h===n(c)&&r(c),g(I)}else r(c);h=n(c)}if(h!==null)var A=!0;else{var B=n(d);B!==null&&de(N,B.startTime-I),A=!1}return A}finally{h=null,y=C,v=!1}}var L=!1,F=null,z=-1,k=5,W=-1;function ie(){return!(e.unstable_now()-W<k)}function ue(){if(F!==null){var $=e.unstable_now();W=$;var I=!0;try{I=F(!0,$)}finally{I?re():(L=!1,F=null)}}else L=!1}var re;if(typeof f=="function")re=function(){f(ue)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,ee=xe.port2;xe.port1.onmessage=ue,re=function(){ee.postMessage(null)}}else re=function(){x(ue,0)};function ne($){F=$,L||(L=!0,re())}function de($,I){z=x(function(){$(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){w||v||(w=!0,ne(_))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function($){switch(y){case 1:case 2:case 3:var I=3;break;default:I=y}var C=y;y=I;try{return $()}finally{y=C}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,I){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var C=y;y=$;try{return I()}finally{y=C}},e.unstable_scheduleCallback=function($,I,C){var b=e.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?b+C:b):C=b,$){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=C+U,$={id:m++,callback:I,priorityLevel:$,startTime:C,expirationTime:U,sortIndex:-1},C>b?($.sortIndex=C,t(d,$),n(c)===null&&$===n(d)&&(j?(p(z),z=-1):j=!0,de(N,C-b))):($.sortIndex=U,t(c,$),w||v||(w=!0,ne(_))),$},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function($){var I=y;return function(){var C=y;y=I;try{return $.apply(this,arguments)}finally{y=C}}}})(Yd);Qd.exports=Yd;var dm=Qd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm=u,kt=dm;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xd=new Set,Es={};function sr(e,t){Rr(e,t),Rr(e+"Capture",t)}function Rr(e,t){for(Es[e]=t,e=0;e<t.length;e++)Xd.add(t[e])}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),So=Object.prototype.hasOwnProperty,pm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wc={},Hc={};function hm(e){return So.call(Hc,e)?!0:So.call(Wc,e)?!1:pm.test(e)?Hc[e]=!0:(Wc[e]=!0,!1)}function mm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gm(e,t,n,r){if(t===null||typeof t>"u"||mm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function pt(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){st[e]=new pt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];st[t]=new pt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){st[e]=new pt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){st[e]=new pt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){st[e]=new pt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){st[e]=new pt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){st[e]=new pt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){st[e]=new pt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){st[e]=new pt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ia=/[\-:]([a-z])/g;function Ta(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ia,Ta);st[t]=new pt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ia,Ta);st[t]=new pt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ia,Ta);st[t]=new pt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){st[e]=new pt(e,1,!1,e.toLowerCase(),null,!1,!1)});st.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){st[e]=new pt(e,1,!1,e.toLowerCase(),null,!0,!0)});function za(e,t,n,r){var s=st.hasOwnProperty(t)?st[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gm(t,n,s,r)&&(n=null),r||s===null?hm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var gn=fm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nl=Symbol.for("react.element"),fr=Symbol.for("react.portal"),pr=Symbol.for("react.fragment"),$a=Symbol.for("react.strict_mode"),No=Symbol.for("react.profiler"),qd=Symbol.for("react.provider"),Jd=Symbol.for("react.context"),Aa=Symbol.for("react.forward_ref"),ko=Symbol.for("react.suspense"),Co=Symbol.for("react.suspense_list"),Ma=Symbol.for("react.memo"),wn=Symbol.for("react.lazy"),Zd=Symbol.for("react.offscreen"),Gc=Symbol.iterator;function Jr(e){return e===null||typeof e!="object"?null:(e=Gc&&e[Gc]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,Fi;function as(e){if(Fi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Fi=t&&t[1]||""}return`
`+Fi+e}var Di=!1;function Ui(e,t){if(!e||Di)return"";Di=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{Di=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?as(e):""}function ym(e){switch(e.tag){case 5:return as(e.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 2:case 15:return e=Ui(e.type,!1),e;case 11:return e=Ui(e.type.render,!1),e;case 1:return e=Ui(e.type,!0),e;default:return""}}function Eo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case pr:return"Fragment";case fr:return"Portal";case No:return"Profiler";case $a:return"StrictMode";case ko:return"Suspense";case Co:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Jd:return(e.displayName||"Context")+".Consumer";case qd:return(e._context.displayName||"Context")+".Provider";case Aa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ma:return t=e.displayName||null,t!==null?t:Eo(e.type)||"Memo";case wn:t=e._payload,e=e._init;try{return Eo(e(t))}catch{}}return null}function vm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Eo(t);case 8:return t===$a?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ef(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function xm(e){var t=ef(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function rl(e){e._valueTracker||(e._valueTracker=xm(e))}function tf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ef(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function zl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bo(e,t){var n=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Kc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Mn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function nf(e,t){t=t.checked,t!=null&&za(e,"checked",t,!1)}function Lo(e,t){nf(e,t);var n=Mn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_o(e,t.type,n):t.hasOwnProperty("defaultValue")&&_o(e,t.type,Mn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Qc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function _o(e,t,n){(t!=="number"||zl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var cs=Array.isArray;function kr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Mn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Po(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Q(92));if(cs(n)){if(1<n.length)throw Error(Q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Mn(n)}}function rf(e,t){var n=Mn(t.value),r=Mn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Xc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ro(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var sl,lf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(sl=sl||document.createElement("div"),sl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=sl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function bs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var hs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wm=["Webkit","ms","Moz","O"];Object.keys(hs).forEach(function(e){wm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),hs[t]=hs[e]})});function of(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||hs.hasOwnProperty(e)&&hs[e]?(""+t).trim():t+"px"}function af(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=of(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var jm=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Io(e,t){if(t){if(jm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function To(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zo=null;function Oa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $o=null,Cr=null,Er=null;function qc(e){if(e=Qs(e)){if(typeof $o!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=vi(t),$o(e.stateNode,e.type,t))}}function cf(e){Cr?Er?Er.push(e):Er=[e]:Cr=e}function uf(){if(Cr){var e=Cr,t=Er;if(Er=Cr=null,qc(e),t)for(e=0;e<t.length;e++)qc(t[e])}}function df(e,t){return e(t)}function ff(){}var Bi=!1;function pf(e,t,n){if(Bi)return e(t,n);Bi=!0;try{return df(e,t,n)}finally{Bi=!1,(Cr!==null||Er!==null)&&(ff(),uf())}}function Ls(e,t){var n=e.stateNode;if(n===null)return null;var r=vi(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Q(231,t,typeof n));return n}var Ao=!1;if(fn)try{var Zr={};Object.defineProperty(Zr,"passive",{get:function(){Ao=!0}}),window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch{Ao=!1}function Sm(e,t,n,r,s,i,o,a,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(m){this.onError(m)}}var ms=!1,$l=null,Al=!1,Mo=null,Nm={onError:function(e){ms=!0,$l=e}};function km(e,t,n,r,s,i,o,a,c){ms=!1,$l=null,Sm.apply(Nm,arguments)}function Cm(e,t,n,r,s,i,o,a,c){if(km.apply(this,arguments),ms){if(ms){var d=$l;ms=!1,$l=null}else throw Error(Q(198));Al||(Al=!0,Mo=d)}}function lr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function hf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jc(e){if(lr(e)!==e)throw Error(Q(188))}function Em(e){var t=e.alternate;if(!t){if(t=lr(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Jc(s),e;if(i===r)return Jc(s),t;i=i.sibling}throw Error(Q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?e:t}function mf(e){return e=Em(e),e!==null?gf(e):null}function gf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gf(e);if(t!==null)return t;e=e.sibling}return null}var yf=kt.unstable_scheduleCallback,Zc=kt.unstable_cancelCallback,bm=kt.unstable_shouldYield,Lm=kt.unstable_requestPaint,Ye=kt.unstable_now,_m=kt.unstable_getCurrentPriorityLevel,Fa=kt.unstable_ImmediatePriority,vf=kt.unstable_UserBlockingPriority,Ml=kt.unstable_NormalPriority,Pm=kt.unstable_LowPriority,xf=kt.unstable_IdlePriority,hi=null,en=null;function Rm(e){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(hi,e,void 0,(e.current.flags&128)===128)}catch{}}var Bt=Math.clz32?Math.clz32:zm,Im=Math.log,Tm=Math.LN2;function zm(e){return e>>>=0,e===0?32:31-(Im(e)/Tm|0)|0}var ll=64,il=4194304;function us(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ol(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=us(a):(i&=o,i!==0&&(r=us(i)))}else o=n&~s,o!==0?r=us(o):i!==0&&(r=us(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Bt(t),s=1<<n,r|=e[n],t&=~s;return r}function $m(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Am(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Bt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=$m(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function Oo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wf(){var e=ll;return ll<<=1,!(ll&4194240)&&(ll=64),e}function Vi(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Bt(t),e[t]=n}function Mm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Bt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Da(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Bt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var _e=0;function jf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sf,Ua,Nf,kf,Cf,Fo=!1,ol=[],bn=null,Ln=null,_n=null,_s=new Map,Ps=new Map,Sn=[],Om="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eu(e,t){switch(e){case"focusin":case"focusout":bn=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":_n=null;break;case"pointerover":case"pointerout":_s.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ps.delete(t.pointerId)}}function es(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Qs(t),t!==null&&Ua(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Fm(e,t,n,r,s){switch(t){case"focusin":return bn=es(bn,e,t,n,r,s),!0;case"dragenter":return Ln=es(Ln,e,t,n,r,s),!0;case"mouseover":return _n=es(_n,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return _s.set(i,es(_s.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ps.set(i,es(Ps.get(i)||null,e,t,n,r,s)),!0}return!1}function Ef(e){var t=Qn(e.target);if(t!==null){var n=lr(t);if(n!==null){if(t=n.tag,t===13){if(t=hf(n),t!==null){e.blockedOn=t,Cf(e.priority,function(){Nf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Nl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Do(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);zo=r,n.target.dispatchEvent(r),zo=null}else return t=Qs(n),t!==null&&Ua(t),e.blockedOn=n,!1;t.shift()}return!0}function tu(e,t,n){Nl(e)&&n.delete(t)}function Dm(){Fo=!1,bn!==null&&Nl(bn)&&(bn=null),Ln!==null&&Nl(Ln)&&(Ln=null),_n!==null&&Nl(_n)&&(_n=null),_s.forEach(tu),Ps.forEach(tu)}function ts(e,t){e.blockedOn===t&&(e.blockedOn=null,Fo||(Fo=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,Dm)))}function Rs(e){function t(s){return ts(s,e)}if(0<ol.length){ts(ol[0],e);for(var n=1;n<ol.length;n++){var r=ol[n];r.blockedOn===e&&(r.blockedOn=null)}}for(bn!==null&&ts(bn,e),Ln!==null&&ts(Ln,e),_n!==null&&ts(_n,e),_s.forEach(t),Ps.forEach(t),n=0;n<Sn.length;n++)r=Sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sn.length&&(n=Sn[0],n.blockedOn===null);)Ef(n),n.blockedOn===null&&Sn.shift()}var br=gn.ReactCurrentBatchConfig,Fl=!0;function Um(e,t,n,r){var s=_e,i=br.transition;br.transition=null;try{_e=1,Ba(e,t,n,r)}finally{_e=s,br.transition=i}}function Bm(e,t,n,r){var s=_e,i=br.transition;br.transition=null;try{_e=4,Ba(e,t,n,r)}finally{_e=s,br.transition=i}}function Ba(e,t,n,r){if(Fl){var s=Do(e,t,n,r);if(s===null)Zi(e,t,r,Dl,n),eu(e,r);else if(Fm(s,e,t,n,r))r.stopPropagation();else if(eu(e,r),t&4&&-1<Om.indexOf(e)){for(;s!==null;){var i=Qs(s);if(i!==null&&Sf(i),i=Do(e,t,n,r),i===null&&Zi(e,t,r,Dl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Zi(e,t,r,null,n)}}var Dl=null;function Do(e,t,n,r){if(Dl=null,e=Oa(r),e=Qn(e),e!==null)if(t=lr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=hf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Dl=e,null}function bf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_m()){case Fa:return 1;case vf:return 4;case Ml:case Pm:return 16;case xf:return 536870912;default:return 16}default:return 16}}var kn=null,Va=null,kl=null;function Lf(){if(kl)return kl;var e,t=Va,n=t.length,r,s="value"in kn?kn.value:kn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return kl=s.slice(e,1<r?1-r:void 0)}function Cl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function al(){return!0}function nu(){return!1}function Et(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?al:nu,this.isPropagationStopped=nu,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=al)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=al)},persist:function(){},isPersistent:al}),t}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wa=Et(Dr),Ks=Ve({},Dr,{view:0,detail:0}),Vm=Et(Ks),Wi,Hi,ns,mi=Ve({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ha,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ns&&(ns&&e.type==="mousemove"?(Wi=e.screenX-ns.screenX,Hi=e.screenY-ns.screenY):Hi=Wi=0,ns=e),Wi)},movementY:function(e){return"movementY"in e?e.movementY:Hi}}),ru=Et(mi),Wm=Ve({},mi,{dataTransfer:0}),Hm=Et(Wm),Gm=Ve({},Ks,{relatedTarget:0}),Gi=Et(Gm),Km=Ve({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qm=Et(Km),Ym=Ve({},Dr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xm=Et(Ym),qm=Ve({},Dr,{data:0}),su=Et(qm),Jm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=eg[e])?!!t[e]:!1}function Ha(){return tg}var ng=Ve({},Ks,{key:function(e){if(e.key){var t=Jm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Cl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ha,charCode:function(e){return e.type==="keypress"?Cl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Cl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rg=Et(ng),sg=Ve({},mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lu=Et(sg),lg=Ve({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ha}),ig=Et(lg),og=Ve({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ag=Et(og),cg=Ve({},mi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ug=Et(cg),dg=[9,13,27,32],Ga=fn&&"CompositionEvent"in window,gs=null;fn&&"documentMode"in document&&(gs=document.documentMode);var fg=fn&&"TextEvent"in window&&!gs,_f=fn&&(!Ga||gs&&8<gs&&11>=gs),iu=" ",ou=!1;function Pf(e,t){switch(e){case"keyup":return dg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hr=!1;function pg(e,t){switch(e){case"compositionend":return Rf(t);case"keypress":return t.which!==32?null:(ou=!0,iu);case"textInput":return e=t.data,e===iu&&ou?null:e;default:return null}}function hg(e,t){if(hr)return e==="compositionend"||!Ga&&Pf(e,t)?(e=Lf(),kl=Va=kn=null,hr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _f&&t.locale!=="ko"?null:t.data;default:return null}}var mg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function au(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!mg[e.type]:t==="textarea"}function If(e,t,n,r){cf(r),t=Ul(t,"onChange"),0<t.length&&(n=new Wa("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ys=null,Is=null;function gg(e){Vf(e,0)}function gi(e){var t=yr(e);if(tf(t))return e}function yg(e,t){if(e==="change")return t}var Tf=!1;if(fn){var Ki;if(fn){var Qi="oninput"in document;if(!Qi){var cu=document.createElement("div");cu.setAttribute("oninput","return;"),Qi=typeof cu.oninput=="function"}Ki=Qi}else Ki=!1;Tf=Ki&&(!document.documentMode||9<document.documentMode)}function uu(){ys&&(ys.detachEvent("onpropertychange",zf),Is=ys=null)}function zf(e){if(e.propertyName==="value"&&gi(Is)){var t=[];If(t,Is,e,Oa(e)),pf(gg,t)}}function vg(e,t,n){e==="focusin"?(uu(),ys=t,Is=n,ys.attachEvent("onpropertychange",zf)):e==="focusout"&&uu()}function xg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gi(Is)}function wg(e,t){if(e==="click")return gi(t)}function jg(e,t){if(e==="input"||e==="change")return gi(t)}function Sg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wt=typeof Object.is=="function"?Object.is:Sg;function Ts(e,t){if(Wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!So.call(t,s)||!Wt(e[s],t[s]))return!1}return!0}function du(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fu(e,t){var n=du(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=du(n)}}function $f(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$f(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Af(){for(var e=window,t=zl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zl(e.document)}return t}function Ka(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ng(e){var t=Af(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&$f(n.ownerDocument.documentElement,n)){if(r!==null&&Ka(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=fu(n,i);var o=fu(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kg=fn&&"documentMode"in document&&11>=document.documentMode,mr=null,Uo=null,vs=null,Bo=!1;function pu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bo||mr==null||mr!==zl(r)||(r=mr,"selectionStart"in r&&Ka(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vs&&Ts(vs,r)||(vs=r,r=Ul(Uo,"onSelect"),0<r.length&&(t=new Wa("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function cl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var gr={animationend:cl("Animation","AnimationEnd"),animationiteration:cl("Animation","AnimationIteration"),animationstart:cl("Animation","AnimationStart"),transitionend:cl("Transition","TransitionEnd")},Yi={},Mf={};fn&&(Mf=document.createElement("div").style,"AnimationEvent"in window||(delete gr.animationend.animation,delete gr.animationiteration.animation,delete gr.animationstart.animation),"TransitionEvent"in window||delete gr.transitionend.transition);function yi(e){if(Yi[e])return Yi[e];if(!gr[e])return e;var t=gr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Mf)return Yi[e]=t[n];return e}var Of=yi("animationend"),Ff=yi("animationiteration"),Df=yi("animationstart"),Uf=yi("transitionend"),Bf=new Map,hu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fn(e,t){Bf.set(e,t),sr(t,[e])}for(var Xi=0;Xi<hu.length;Xi++){var qi=hu[Xi],Cg=qi.toLowerCase(),Eg=qi[0].toUpperCase()+qi.slice(1);Fn(Cg,"on"+Eg)}Fn(Of,"onAnimationEnd");Fn(Ff,"onAnimationIteration");Fn(Df,"onAnimationStart");Fn("dblclick","onDoubleClick");Fn("focusin","onFocus");Fn("focusout","onBlur");Fn(Uf,"onTransitionEnd");Rr("onMouseEnter",["mouseout","mouseover"]);Rr("onMouseLeave",["mouseout","mouseover"]);Rr("onPointerEnter",["pointerout","pointerover"]);Rr("onPointerLeave",["pointerout","pointerover"]);sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sr("onBeforeInput",["compositionend","keypress","textInput","paste"]);sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bg=new Set("cancel close invalid load scroll toggle".split(" ").concat(ds));function mu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Cm(r,t,void 0,e),e.currentTarget=null}function Vf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;mu(s,a,d),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;mu(s,a,d),i=c}}}if(Al)throw e=Mo,Al=!1,Mo=null,e}function Ae(e,t){var n=t[Ko];n===void 0&&(n=t[Ko]=new Set);var r=e+"__bubble";n.has(r)||(Wf(t,e,2,!1),n.add(r))}function Ji(e,t,n){var r=0;t&&(r|=4),Wf(n,e,r,t)}var ul="_reactListening"+Math.random().toString(36).slice(2);function zs(e){if(!e[ul]){e[ul]=!0,Xd.forEach(function(n){n!=="selectionchange"&&(bg.has(n)||Ji(n,!1,e),Ji(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ul]||(t[ul]=!0,Ji("selectionchange",!1,t))}}function Wf(e,t,n,r){switch(bf(t)){case 1:var s=Um;break;case 4:s=Bm;break;default:s=Ba}n=s.bind(null,t,n,e),s=void 0,!Ao||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Zi(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Qn(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}pf(function(){var d=i,m=Oa(n),h=[];e:{var y=Bf.get(e);if(y!==void 0){var v=Wa,w=e;switch(e){case"keypress":if(Cl(n)===0)break e;case"keydown":case"keyup":v=rg;break;case"focusin":w="focus",v=Gi;break;case"focusout":w="blur",v=Gi;break;case"beforeblur":case"afterblur":v=Gi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Hm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=ig;break;case Of:case Ff:case Df:v=Qm;break;case Uf:v=ag;break;case"scroll":v=Vm;break;case"wheel":v=ug;break;case"copy":case"cut":case"paste":v=Xm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=lu}var j=(t&4)!==0,x=!j&&e==="scroll",p=j?y!==null?y+"Capture":null:y;j=[];for(var f=d,g;f!==null;){g=f;var N=g.stateNode;if(g.tag===5&&N!==null&&(g=N,p!==null&&(N=Ls(f,p),N!=null&&j.push($s(f,N,g)))),x)break;f=f.return}0<j.length&&(y=new v(y,w,null,n,m),h.push({event:y,listeners:j}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",y&&n!==zo&&(w=n.relatedTarget||n.fromElement)&&(Qn(w)||w[pn]))break e;if((v||y)&&(y=m.window===m?m:(y=m.ownerDocument)?y.defaultView||y.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=d,w=w?Qn(w):null,w!==null&&(x=lr(w),w!==x||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=d),v!==w)){if(j=ru,N="onMouseLeave",p="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(j=lu,N="onPointerLeave",p="onPointerEnter",f="pointer"),x=v==null?y:yr(v),g=w==null?y:yr(w),y=new j(N,f+"leave",v,n,m),y.target=x,y.relatedTarget=g,N=null,Qn(m)===d&&(j=new j(p,f+"enter",w,n,m),j.target=g,j.relatedTarget=x,N=j),x=N,v&&w)t:{for(j=v,p=w,f=0,g=j;g;g=ar(g))f++;for(g=0,N=p;N;N=ar(N))g++;for(;0<f-g;)j=ar(j),f--;for(;0<g-f;)p=ar(p),g--;for(;f--;){if(j===p||p!==null&&j===p.alternate)break t;j=ar(j),p=ar(p)}j=null}else j=null;v!==null&&gu(h,y,v,j,!1),w!==null&&x!==null&&gu(h,x,w,j,!0)}}e:{if(y=d?yr(d):window,v=y.nodeName&&y.nodeName.toLowerCase(),v==="select"||v==="input"&&y.type==="file")var _=yg;else if(au(y))if(Tf)_=jg;else{_=xg;var L=vg}else(v=y.nodeName)&&v.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(_=wg);if(_&&(_=_(e,d))){If(h,_,n,m);break e}L&&L(e,y,d),e==="focusout"&&(L=y._wrapperState)&&L.controlled&&y.type==="number"&&_o(y,"number",y.value)}switch(L=d?yr(d):window,e){case"focusin":(au(L)||L.contentEditable==="true")&&(mr=L,Uo=d,vs=null);break;case"focusout":vs=Uo=mr=null;break;case"mousedown":Bo=!0;break;case"contextmenu":case"mouseup":case"dragend":Bo=!1,pu(h,n,m);break;case"selectionchange":if(kg)break;case"keydown":case"keyup":pu(h,n,m)}var F;if(Ga)e:{switch(e){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else hr?Pf(e,n)&&(z="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(_f&&n.locale!=="ko"&&(hr||z!=="onCompositionStart"?z==="onCompositionEnd"&&hr&&(F=Lf()):(kn=m,Va="value"in kn?kn.value:kn.textContent,hr=!0)),L=Ul(d,z),0<L.length&&(z=new su(z,e,null,n,m),h.push({event:z,listeners:L}),F?z.data=F:(F=Rf(n),F!==null&&(z.data=F)))),(F=fg?pg(e,n):hg(e,n))&&(d=Ul(d,"onBeforeInput"),0<d.length&&(m=new su("onBeforeInput","beforeinput",null,n,m),h.push({event:m,listeners:d}),m.data=F))}Vf(h,t)})}function $s(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ul(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ls(e,n),i!=null&&r.unshift($s(e,i,s)),i=Ls(e,t),i!=null&&r.push($s(e,i,s))),e=e.return}return r}function ar(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gu(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,s?(c=Ls(n,i),c!=null&&o.unshift($s(n,c,a))):s||(c=Ls(n,i),c!=null&&o.push($s(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Lg=/\r\n?/g,_g=/\u0000|\uFFFD/g;function yu(e){return(typeof e=="string"?e:""+e).replace(Lg,`
`).replace(_g,"")}function dl(e,t,n){if(t=yu(t),yu(e)!==t&&n)throw Error(Q(425))}function Bl(){}var Vo=null,Wo=null;function Ho(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Go=typeof setTimeout=="function"?setTimeout:void 0,Pg=typeof clearTimeout=="function"?clearTimeout:void 0,vu=typeof Promise=="function"?Promise:void 0,Rg=typeof queueMicrotask=="function"?queueMicrotask:typeof vu<"u"?function(e){return vu.resolve(null).then(e).catch(Ig)}:Go;function Ig(e){setTimeout(function(){throw e})}function eo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Rs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Rs(t)}function Pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ur=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Ur,As="__reactProps$"+Ur,pn="__reactContainer$"+Ur,Ko="__reactEvents$"+Ur,Tg="__reactListeners$"+Ur,zg="__reactHandles$"+Ur;function Qn(e){var t=e[Yt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pn]||n[Yt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=xu(e);e!==null;){if(n=e[Yt])return n;e=xu(e)}return t}e=n,n=e.parentNode}return null}function Qs(e){return e=e[Yt]||e[pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function vi(e){return e[As]||null}var Qo=[],vr=-1;function Dn(e){return{current:e}}function Me(e){0>vr||(e.current=Qo[vr],Qo[vr]=null,vr--)}function ze(e,t){vr++,Qo[vr]=e.current,e.current=t}var On={},ct=Dn(On),gt=Dn(!1),Zn=On;function Ir(e,t){var n=e.type.contextTypes;if(!n)return On;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function yt(e){return e=e.childContextTypes,e!=null}function Vl(){Me(gt),Me(ct)}function wu(e,t,n){if(ct.current!==On)throw Error(Q(168));ze(ct,t),ze(gt,n)}function Hf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Q(108,vm(e)||"Unknown",s));return Ve({},n,r)}function Wl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||On,Zn=ct.current,ze(ct,e),ze(gt,gt.current),!0}function ju(e,t,n){var r=e.stateNode;if(!r)throw Error(Q(169));n?(e=Hf(e,t,Zn),r.__reactInternalMemoizedMergedChildContext=e,Me(gt),Me(ct),ze(ct,e)):Me(gt),ze(gt,n)}var rn=null,xi=!1,to=!1;function Gf(e){rn===null?rn=[e]:rn.push(e)}function $g(e){xi=!0,Gf(e)}function Un(){if(!to&&rn!==null){to=!0;var e=0,t=_e;try{var n=rn;for(_e=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rn=null,xi=!1}catch(s){throw rn!==null&&(rn=rn.slice(e+1)),yf(Fa,Un),s}finally{_e=t,to=!1}}return null}var xr=[],wr=0,Hl=null,Gl=0,_t=[],Pt=0,er=null,on=1,an="";function Hn(e,t){xr[wr++]=Gl,xr[wr++]=Hl,Hl=e,Gl=t}function Kf(e,t,n){_t[Pt++]=on,_t[Pt++]=an,_t[Pt++]=er,er=e;var r=on;e=an;var s=32-Bt(r)-1;r&=~(1<<s),n+=1;var i=32-Bt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,on=1<<32-Bt(t)+s|n<<s|r,an=i+e}else on=1<<i|n<<s|r,an=e}function Qa(e){e.return!==null&&(Hn(e,1),Kf(e,1,0))}function Ya(e){for(;e===Hl;)Hl=xr[--wr],xr[wr]=null,Gl=xr[--wr],xr[wr]=null;for(;e===er;)er=_t[--Pt],_t[Pt]=null,an=_t[--Pt],_t[Pt]=null,on=_t[--Pt],_t[Pt]=null}var St=null,jt=null,Fe=!1,Ut=null;function Qf(e,t){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Su(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,St=e,jt=Pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,St=e,jt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=er!==null?{id:on,overflow:an}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,St=e,jt=null,!0):!1;default:return!1}}function Yo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xo(e){if(Fe){var t=jt;if(t){var n=t;if(!Su(e,t)){if(Yo(e))throw Error(Q(418));t=Pn(n.nextSibling);var r=St;t&&Su(e,t)?Qf(r,n):(e.flags=e.flags&-4097|2,Fe=!1,St=e)}}else{if(Yo(e))throw Error(Q(418));e.flags=e.flags&-4097|2,Fe=!1,St=e}}}function Nu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;St=e}function fl(e){if(e!==St)return!1;if(!Fe)return Nu(e),Fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ho(e.type,e.memoizedProps)),t&&(t=jt)){if(Yo(e))throw Yf(),Error(Q(418));for(;t;)Qf(e,t),t=Pn(t.nextSibling)}if(Nu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){jt=Pn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}jt=null}}else jt=St?Pn(e.stateNode.nextSibling):null;return!0}function Yf(){for(var e=jt;e;)e=Pn(e.nextSibling)}function Tr(){jt=St=null,Fe=!1}function Xa(e){Ut===null?Ut=[e]:Ut.push(e)}var Ag=gn.ReactCurrentBatchConfig;function rs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,e))}return e}function pl(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ku(e){var t=e._init;return t(e._payload)}function Xf(e){function t(p,f){if(e){var g=p.deletions;g===null?(p.deletions=[f],p.flags|=16):g.push(f)}}function n(p,f){if(!e)return null;for(;f!==null;)t(p,f),f=f.sibling;return null}function r(p,f){for(p=new Map;f!==null;)f.key!==null?p.set(f.key,f):p.set(f.index,f),f=f.sibling;return p}function s(p,f){return p=zn(p,f),p.index=0,p.sibling=null,p}function i(p,f,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<f?(p.flags|=2,f):g):(p.flags|=2,f)):(p.flags|=1048576,f)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,f,g,N){return f===null||f.tag!==6?(f=ao(g,p.mode,N),f.return=p,f):(f=s(f,g),f.return=p,f)}function c(p,f,g,N){var _=g.type;return _===pr?m(p,f,g.props.children,N,g.key):f!==null&&(f.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===wn&&ku(_)===f.type)?(N=s(f,g.props),N.ref=rs(p,f,g),N.return=p,N):(N=Il(g.type,g.key,g.props,null,p.mode,N),N.ref=rs(p,f,g),N.return=p,N)}function d(p,f,g,N){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=co(g,p.mode,N),f.return=p,f):(f=s(f,g.children||[]),f.return=p,f)}function m(p,f,g,N,_){return f===null||f.tag!==7?(f=Jn(g,p.mode,N,_),f.return=p,f):(f=s(f,g),f.return=p,f)}function h(p,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=ao(""+f,p.mode,g),f.return=p,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case nl:return g=Il(f.type,f.key,f.props,null,p.mode,g),g.ref=rs(p,null,f),g.return=p,g;case fr:return f=co(f,p.mode,g),f.return=p,f;case wn:var N=f._init;return h(p,N(f._payload),g)}if(cs(f)||Jr(f))return f=Jn(f,p.mode,g,null),f.return=p,f;pl(p,f)}return null}function y(p,f,g,N){var _=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return _!==null?null:a(p,f,""+g,N);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case nl:return g.key===_?c(p,f,g,N):null;case fr:return g.key===_?d(p,f,g,N):null;case wn:return _=g._init,y(p,f,_(g._payload),N)}if(cs(g)||Jr(g))return _!==null?null:m(p,f,g,N,null);pl(p,g)}return null}function v(p,f,g,N,_){if(typeof N=="string"&&N!==""||typeof N=="number")return p=p.get(g)||null,a(f,p,""+N,_);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case nl:return p=p.get(N.key===null?g:N.key)||null,c(f,p,N,_);case fr:return p=p.get(N.key===null?g:N.key)||null,d(f,p,N,_);case wn:var L=N._init;return v(p,f,g,L(N._payload),_)}if(cs(N)||Jr(N))return p=p.get(g)||null,m(f,p,N,_,null);pl(f,N)}return null}function w(p,f,g,N){for(var _=null,L=null,F=f,z=f=0,k=null;F!==null&&z<g.length;z++){F.index>z?(k=F,F=null):k=F.sibling;var W=y(p,F,g[z],N);if(W===null){F===null&&(F=k);break}e&&F&&W.alternate===null&&t(p,F),f=i(W,f,z),L===null?_=W:L.sibling=W,L=W,F=k}if(z===g.length)return n(p,F),Fe&&Hn(p,z),_;if(F===null){for(;z<g.length;z++)F=h(p,g[z],N),F!==null&&(f=i(F,f,z),L===null?_=F:L.sibling=F,L=F);return Fe&&Hn(p,z),_}for(F=r(p,F);z<g.length;z++)k=v(F,p,z,g[z],N),k!==null&&(e&&k.alternate!==null&&F.delete(k.key===null?z:k.key),f=i(k,f,z),L===null?_=k:L.sibling=k,L=k);return e&&F.forEach(function(ie){return t(p,ie)}),Fe&&Hn(p,z),_}function j(p,f,g,N){var _=Jr(g);if(typeof _!="function")throw Error(Q(150));if(g=_.call(g),g==null)throw Error(Q(151));for(var L=_=null,F=f,z=f=0,k=null,W=g.next();F!==null&&!W.done;z++,W=g.next()){F.index>z?(k=F,F=null):k=F.sibling;var ie=y(p,F,W.value,N);if(ie===null){F===null&&(F=k);break}e&&F&&ie.alternate===null&&t(p,F),f=i(ie,f,z),L===null?_=ie:L.sibling=ie,L=ie,F=k}if(W.done)return n(p,F),Fe&&Hn(p,z),_;if(F===null){for(;!W.done;z++,W=g.next())W=h(p,W.value,N),W!==null&&(f=i(W,f,z),L===null?_=W:L.sibling=W,L=W);return Fe&&Hn(p,z),_}for(F=r(p,F);!W.done;z++,W=g.next())W=v(F,p,z,W.value,N),W!==null&&(e&&W.alternate!==null&&F.delete(W.key===null?z:W.key),f=i(W,f,z),L===null?_=W:L.sibling=W,L=W);return e&&F.forEach(function(ue){return t(p,ue)}),Fe&&Hn(p,z),_}function x(p,f,g,N){if(typeof g=="object"&&g!==null&&g.type===pr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case nl:e:{for(var _=g.key,L=f;L!==null;){if(L.key===_){if(_=g.type,_===pr){if(L.tag===7){n(p,L.sibling),f=s(L,g.props.children),f.return=p,p=f;break e}}else if(L.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===wn&&ku(_)===L.type){n(p,L.sibling),f=s(L,g.props),f.ref=rs(p,L,g),f.return=p,p=f;break e}n(p,L);break}else t(p,L);L=L.sibling}g.type===pr?(f=Jn(g.props.children,p.mode,N,g.key),f.return=p,p=f):(N=Il(g.type,g.key,g.props,null,p.mode,N),N.ref=rs(p,f,g),N.return=p,p=N)}return o(p);case fr:e:{for(L=g.key;f!==null;){if(f.key===L)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(p,f.sibling),f=s(f,g.children||[]),f.return=p,p=f;break e}else{n(p,f);break}else t(p,f);f=f.sibling}f=co(g,p.mode,N),f.return=p,p=f}return o(p);case wn:return L=g._init,x(p,f,L(g._payload),N)}if(cs(g))return w(p,f,g,N);if(Jr(g))return j(p,f,g,N);pl(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(p,f.sibling),f=s(f,g),f.return=p,p=f):(n(p,f),f=ao(g,p.mode,N),f.return=p,p=f),o(p)):n(p,f)}return x}var zr=Xf(!0),qf=Xf(!1),Kl=Dn(null),Ql=null,jr=null,qa=null;function Ja(){qa=jr=Ql=null}function Za(e){var t=Kl.current;Me(Kl),e._currentValue=t}function qo(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Lr(e,t){Ql=e,qa=jr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mt=!0),e.firstContext=null)}function Tt(e){var t=e._currentValue;if(qa!==e)if(e={context:e,memoizedValue:t,next:null},jr===null){if(Ql===null)throw Error(Q(308));jr=e,Ql.dependencies={lanes:0,firstContext:e}}else jr=jr.next=e;return t}var Yn=null;function ec(e){Yn===null?Yn=[e]:Yn.push(e)}function Jf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ec(t)):(n.next=s.next,s.next=n),t.interleaved=n,hn(e,r)}function hn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var jn=!1;function tc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function un(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,hn(e,n)}return s=r.interleaved,s===null?(t.next=t,ec(r)):(t.next=s.next,s.next=t),r.interleaved=t,hn(e,n)}function El(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Da(e,n)}}function Cu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yl(e,t,n,r){var s=e.updateQueue;jn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var m=e.alternate;m!==null&&(m=m.updateQueue,a=m.lastBaseUpdate,a!==o&&(a===null?m.firstBaseUpdate=d:a.next=d,m.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,m=d=c=null,a=i;do{var y=a.lane,v=a.eventTime;if((r&y)===y){m!==null&&(m=m.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=e,j=a;switch(y=t,v=n,j.tag){case 1:if(w=j.payload,typeof w=="function"){h=w.call(v,h,y);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=j.payload,y=typeof w=="function"?w.call(v,h,y):w,y==null)break e;h=Ve({},h,y);break e;case 2:jn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,y=s.effects,y===null?s.effects=[a]:y.push(a))}else v={eventTime:v,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},m===null?(d=m=v,c=h):m=m.next=v,o|=y;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;y=a,a=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(m===null&&(c=h),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);nr|=o,e.lanes=o,e.memoizedState=h}}function Eu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Q(191,s));s.call(r)}}}var Ys={},tn=Dn(Ys),Ms=Dn(Ys),Os=Dn(Ys);function Xn(e){if(e===Ys)throw Error(Q(174));return e}function nc(e,t){switch(ze(Os,t),ze(Ms,e),ze(tn,Ys),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ro(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ro(t,e)}Me(tn),ze(tn,t)}function $r(){Me(tn),Me(Ms),Me(Os)}function ep(e){Xn(Os.current);var t=Xn(tn.current),n=Ro(t,e.type);t!==n&&(ze(Ms,e),ze(tn,n))}function rc(e){Ms.current===e&&(Me(tn),Me(Ms))}var De=Dn(0);function Xl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function sc(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var bl=gn.ReactCurrentDispatcher,ro=gn.ReactCurrentBatchConfig,tr=0,Ue=null,Je=null,et=null,ql=!1,xs=!1,Fs=0,Mg=0;function it(){throw Error(Q(321))}function lc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wt(e[n],t[n]))return!1;return!0}function ic(e,t,n,r,s,i){if(tr=i,Ue=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bl.current=e===null||e.memoizedState===null?Ug:Bg,e=n(r,s),xs){i=0;do{if(xs=!1,Fs=0,25<=i)throw Error(Q(301));i+=1,et=Je=null,t.updateQueue=null,bl.current=Vg,e=n(r,s)}while(xs)}if(bl.current=Jl,t=Je!==null&&Je.next!==null,tr=0,et=Je=Ue=null,ql=!1,t)throw Error(Q(300));return e}function oc(){var e=Fs!==0;return Fs=0,e}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Ue.memoizedState=et=e:et=et.next=e,et}function zt(){if(Je===null){var e=Ue.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var t=et===null?Ue.memoizedState:et.next;if(t!==null)et=t,Je=e;else{if(e===null)throw Error(Q(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},et===null?Ue.memoizedState=et=e:et=et.next=e}return et}function Ds(e,t){return typeof t=="function"?t(e):t}function so(e){var t=zt(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=Je,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,d=i;do{var m=d.lane;if((tr&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=h,o=r):c=c.next=h,Ue.lanes|=m,nr|=m}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=a,Wt(r,t.memoizedState)||(mt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Ue.lanes|=i,nr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function lo(e){var t=zt(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Wt(i,t.memoizedState)||(mt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function tp(){}function np(e,t){var n=Ue,r=zt(),s=t(),i=!Wt(r.memoizedState,s);if(i&&(r.memoizedState=s,mt=!0),r=r.queue,ac(lp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Us(9,sp.bind(null,n,r,s,t),void 0,null),tt===null)throw Error(Q(349));tr&30||rp(n,t,s)}return s}function rp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function sp(e,t,n,r){t.value=n,t.getSnapshot=r,ip(t)&&op(e)}function lp(e,t,n){return n(function(){ip(t)&&op(e)})}function ip(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wt(e,n)}catch{return!0}}function op(e){var t=hn(e,1);t!==null&&Vt(t,e,1,-1)}function bu(e){var t=Qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:e},t.queue=e,e=e.dispatch=Dg.bind(null,Ue,e),[t.memoizedState,e]}function Us(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ue.updateQueue,t===null?(t={lastEffect:null,stores:null},Ue.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ap(){return zt().memoizedState}function Ll(e,t,n,r){var s=Qt();Ue.flags|=e,s.memoizedState=Us(1|t,n,void 0,r===void 0?null:r)}function wi(e,t,n,r){var s=zt();r=r===void 0?null:r;var i=void 0;if(Je!==null){var o=Je.memoizedState;if(i=o.destroy,r!==null&&lc(r,o.deps)){s.memoizedState=Us(t,n,i,r);return}}Ue.flags|=e,s.memoizedState=Us(1|t,n,i,r)}function Lu(e,t){return Ll(8390656,8,e,t)}function ac(e,t){return wi(2048,8,e,t)}function cp(e,t){return wi(4,2,e,t)}function up(e,t){return wi(4,4,e,t)}function dp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fp(e,t,n){return n=n!=null?n.concat([e]):null,wi(4,4,dp.bind(null,t,e),n)}function cc(){}function pp(e,t){var n=zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&lc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function hp(e,t){var n=zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&lc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function mp(e,t,n){return tr&21?(Wt(n,t)||(n=wf(),Ue.lanes|=n,nr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mt=!0),e.memoizedState=n)}function Og(e,t){var n=_e;_e=n!==0&&4>n?n:4,e(!0);var r=ro.transition;ro.transition={};try{e(!1),t()}finally{_e=n,ro.transition=r}}function gp(){return zt().memoizedState}function Fg(e,t,n){var r=Tn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yp(e))vp(t,n);else if(n=Jf(e,t,n,r),n!==null){var s=dt();Vt(n,e,r,s),xp(n,t,r)}}function Dg(e,t,n){var r=Tn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yp(e))vp(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Wt(a,o)){var c=t.interleaved;c===null?(s.next=s,ec(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Jf(e,t,s,r),n!==null&&(s=dt(),Vt(n,e,r,s),xp(n,t,r))}}function yp(e){var t=e.alternate;return e===Ue||t!==null&&t===Ue}function vp(e,t){xs=ql=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function xp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Da(e,n)}}var Jl={readContext:Tt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},Ug={readContext:Tt,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:Tt,useEffect:Lu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ll(4194308,4,dp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ll(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ll(4,2,e,t)},useMemo:function(e,t){var n=Qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Qt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Fg.bind(null,Ue,e),[r.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:bu,useDebugValue:cc,useDeferredValue:function(e){return Qt().memoizedState=e},useTransition:function(){var e=bu(!1),t=e[0];return e=Og.bind(null,e[1]),Qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ue,s=Qt();if(Fe){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=t(),tt===null)throw Error(Q(349));tr&30||rp(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Lu(lp.bind(null,r,i,e),[e]),r.flags|=2048,Us(9,sp.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Qt(),t=tt.identifierPrefix;if(Fe){var n=an,r=on;n=(r&~(1<<32-Bt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Fs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Mg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Bg={readContext:Tt,useCallback:pp,useContext:Tt,useEffect:ac,useImperativeHandle:fp,useInsertionEffect:cp,useLayoutEffect:up,useMemo:hp,useReducer:so,useRef:ap,useState:function(){return so(Ds)},useDebugValue:cc,useDeferredValue:function(e){var t=zt();return mp(t,Je.memoizedState,e)},useTransition:function(){var e=so(Ds)[0],t=zt().memoizedState;return[e,t]},useMutableSource:tp,useSyncExternalStore:np,useId:gp,unstable_isNewReconciler:!1},Vg={readContext:Tt,useCallback:pp,useContext:Tt,useEffect:ac,useImperativeHandle:fp,useInsertionEffect:cp,useLayoutEffect:up,useMemo:hp,useReducer:lo,useRef:ap,useState:function(){return lo(Ds)},useDebugValue:cc,useDeferredValue:function(e){var t=zt();return Je===null?t.memoizedState=e:mp(t,Je.memoizedState,e)},useTransition:function(){var e=lo(Ds)[0],t=zt().memoizedState;return[e,t]},useMutableSource:tp,useSyncExternalStore:np,useId:gp,unstable_isNewReconciler:!1};function Ft(e,t){if(e&&e.defaultProps){t=Ve({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Jo(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ve({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ji={isMounted:function(e){return(e=e._reactInternals)?lr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dt(),s=Tn(e),i=un(r,s);i.payload=t,n!=null&&(i.callback=n),t=Rn(e,i,s),t!==null&&(Vt(t,e,s,r),El(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dt(),s=Tn(e),i=un(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Rn(e,i,s),t!==null&&(Vt(t,e,s,r),El(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dt(),r=Tn(e),s=un(n,r);s.tag=2,t!=null&&(s.callback=t),t=Rn(e,s,r),t!==null&&(Vt(t,e,r,n),El(t,e,r))}};function _u(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ts(n,r)||!Ts(s,i):!0}function wp(e,t,n){var r=!1,s=On,i=t.contextType;return typeof i=="object"&&i!==null?i=Tt(i):(s=yt(t)?Zn:ct.current,r=t.contextTypes,i=(r=r!=null)?Ir(e,s):On),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ji,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Pu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ji.enqueueReplaceState(t,t.state,null)}function Zo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},tc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Tt(i):(i=yt(t)?Zn:ct.current,s.context=Ir(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Jo(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ji.enqueueReplaceState(s,s.state,null),Yl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ar(e,t){try{var n="",r=t;do n+=ym(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function io(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ea(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Wg=typeof WeakMap=="function"?WeakMap:Map;function jp(e,t,n){n=un(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ei||(ei=!0,ua=r),ea(e,t)},n}function Sp(e,t,n){n=un(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ea(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ea(e,t),typeof r!="function"&&(In===null?In=new Set([this]):In.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Ru(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Wg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=sy.bind(null,e,t,n),t.then(e,e))}function Iu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Tu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=un(-1,1),t.tag=2,Rn(n,t,1))),n.lanes|=1),e)}var Hg=gn.ReactCurrentOwner,mt=!1;function ut(e,t,n,r){t.child=e===null?qf(t,null,n,r):zr(t,e.child,n,r)}function zu(e,t,n,r,s){n=n.render;var i=t.ref;return Lr(t,s),r=ic(e,t,n,r,i,s),n=oc(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mn(e,t,s)):(Fe&&n&&Qa(t),t.flags|=1,ut(e,t,r,s),t.child)}function $u(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!yc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Np(e,t,i,r,s)):(e=Il(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ts,n(o,r)&&e.ref===t.ref)return mn(e,t,s)}return t.flags|=1,e=zn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Np(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ts(i,r)&&e.ref===t.ref)if(mt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(mt=!0);else return t.lanes=e.lanes,mn(e,t,s)}return ta(e,t,n,r,s)}function kp(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Nr,wt),wt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(Nr,wt),wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ze(Nr,wt),wt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ze(Nr,wt),wt|=r;return ut(e,t,s,n),t.child}function Cp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ta(e,t,n,r,s){var i=yt(n)?Zn:ct.current;return i=Ir(t,i),Lr(t,s),n=ic(e,t,n,r,i,s),r=oc(),e!==null&&!mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mn(e,t,s)):(Fe&&r&&Qa(t),t.flags|=1,ut(e,t,n,s),t.child)}function Au(e,t,n,r,s){if(yt(n)){var i=!0;Wl(t)}else i=!1;if(Lr(t,s),t.stateNode===null)_l(e,t),wp(t,n,r),Zo(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Tt(d):(d=yt(n)?Zn:ct.current,d=Ir(t,d));var m=n.getDerivedStateFromProps,h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==d)&&Pu(t,o,r,d),jn=!1;var y=t.memoizedState;o.state=y,Yl(t,r,o,s),c=t.memoizedState,a!==r||y!==c||gt.current||jn?(typeof m=="function"&&(Jo(t,n,m,r),c=t.memoizedState),(a=jn||_u(t,n,a,r,y,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Zf(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:Ft(t.type,a),o.props=d,h=t.pendingProps,y=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Tt(c):(c=yt(n)?Zn:ct.current,c=Ir(t,c));var v=n.getDerivedStateFromProps;(m=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||y!==c)&&Pu(t,o,r,c),jn=!1,y=t.memoizedState,o.state=y,Yl(t,r,o,s);var w=t.memoizedState;a!==h||y!==w||gt.current||jn?(typeof v=="function"&&(Jo(t,n,v,r),w=t.memoizedState),(d=jn||_u(t,n,d,r,y,w,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),r=!1)}return na(e,t,n,r,i,s)}function na(e,t,n,r,s,i){Cp(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&ju(t,n,!1),mn(e,t,i);r=t.stateNode,Hg.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=zr(t,e.child,null,i),t.child=zr(t,null,a,i)):ut(e,t,a,i),t.memoizedState=r.state,s&&ju(t,n,!0),t.child}function Ep(e){var t=e.stateNode;t.pendingContext?wu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wu(e,t.context,!1),nc(e,t.containerInfo)}function Mu(e,t,n,r,s){return Tr(),Xa(s),t.flags|=256,ut(e,t,n,r),t.child}var ra={dehydrated:null,treeContext:null,retryLane:0};function sa(e){return{baseLanes:e,cachePool:null,transitions:null}}function bp(e,t,n){var r=t.pendingProps,s=De.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ze(De,s&1),e===null)return Xo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ki(o,r,0,null),e=Jn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=sa(n),t.memoizedState=ra,e):uc(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Gg(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=zn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=zn(a,i):(i=Jn(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?sa(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=ra,r}return i=e.child,e=i.sibling,r=zn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function uc(e,t){return t=ki({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hl(e,t,n,r){return r!==null&&Xa(r),zr(t,e.child,null,n),e=uc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Gg(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=io(Error(Q(422))),hl(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=ki({mode:"visible",children:r.children},s,0,null),i=Jn(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&zr(t,e.child,null,o),t.child.memoizedState=sa(o),t.memoizedState=ra,i);if(!(t.mode&1))return hl(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Q(419)),r=io(i,r,void 0),hl(e,t,o,r)}if(a=(o&e.childLanes)!==0,mt||a){if(r=tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hn(e,s),Vt(r,e,s,-1))}return gc(),r=io(Error(Q(421))),hl(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=ly.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,jt=Pn(s.nextSibling),St=t,Fe=!0,Ut=null,e!==null&&(_t[Pt++]=on,_t[Pt++]=an,_t[Pt++]=er,on=e.id,an=e.overflow,er=t),t=uc(t,r.children),t.flags|=4096,t)}function Ou(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),qo(e.return,t,n)}function oo(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Lp(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(ut(e,t,r.children,n),r=De.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ou(e,n,t);else if(e.tag===19)Ou(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ze(De,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Xl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),oo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Xl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}oo(t,!0,n,null,i);break;case"together":oo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _l(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),nr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,n=zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Kg(e,t,n){switch(t.tag){case 3:Ep(t),Tr();break;case 5:ep(t);break;case 1:yt(t.type)&&Wl(t);break;case 4:nc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ze(Kl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ze(De,De.current&1),t.flags|=128,null):n&t.child.childLanes?bp(e,t,n):(ze(De,De.current&1),e=mn(e,t,n),e!==null?e.sibling:null);ze(De,De.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Lp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ze(De,De.current),r)break;return null;case 22:case 23:return t.lanes=0,kp(e,t,n)}return mn(e,t,n)}var _p,la,Pp,Rp;_p=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};la=function(){};Pp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Xn(tn.current);var i=null;switch(n){case"input":s=bo(e,s),r=bo(e,r),i=[];break;case"select":s=Ve({},s,{value:void 0}),r=Ve({},r,{value:void 0}),i=[];break;case"textarea":s=Po(e,s),r=Po(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Bl)}Io(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Es.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Es.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ae("scroll",e),i||a===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Rp=function(e,t,n,r){n!==r&&(t.flags|=4)};function ss(e,t){if(!Fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qg(e,t,n){var r=t.pendingProps;switch(Ya(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(t),null;case 1:return yt(t.type)&&Vl(),ot(t),null;case 3:return r=t.stateNode,$r(),Me(gt),Me(ct),sc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(fl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ut!==null&&(pa(Ut),Ut=null))),la(e,t),ot(t),null;case 5:rc(t);var s=Xn(Os.current);if(n=t.type,e!==null&&t.stateNode!=null)Pp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Q(166));return ot(t),null}if(e=Xn(tn.current),fl(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Yt]=t,r[As]=i,e=(t.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(s=0;s<ds.length;s++)Ae(ds[s],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":Kc(r,i),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",r);break;case"textarea":Yc(r,i),Ae("invalid",r)}Io(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&dl(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&dl(r.textContent,a,e),s=["children",""+a]):Es.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ae("scroll",r)}switch(n){case"input":rl(r),Qc(r,i,!0);break;case"textarea":rl(r),Xc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Bl)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Yt]=t,e[As]=r,_p(e,t,!1,!1),t.stateNode=e;e:{switch(o=To(n,r),n){case"dialog":Ae("cancel",e),Ae("close",e),s=r;break;case"iframe":case"object":case"embed":Ae("load",e),s=r;break;case"video":case"audio":for(s=0;s<ds.length;s++)Ae(ds[s],e);s=r;break;case"source":Ae("error",e),s=r;break;case"img":case"image":case"link":Ae("error",e),Ae("load",e),s=r;break;case"details":Ae("toggle",e),s=r;break;case"input":Kc(e,r),s=bo(e,r),Ae("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ve({},r,{value:void 0}),Ae("invalid",e);break;case"textarea":Yc(e,r),s=Po(e,r),Ae("invalid",e);break;default:s=r}Io(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?af(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lf(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&bs(e,c):typeof c=="number"&&bs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Es.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ae("scroll",e):c!=null&&za(e,i,c,o))}switch(n){case"input":rl(e),Qc(e,r,!1);break;case"textarea":rl(e),Xc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Mn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?kr(e,!!r.multiple,i,!1):r.defaultValue!=null&&kr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Bl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ot(t),null;case 6:if(e&&t.stateNode!=null)Rp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Q(166));if(n=Xn(Os.current),Xn(tn.current),fl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Yt]=t,(i=r.nodeValue!==n)&&(e=St,e!==null))switch(e.tag){case 3:dl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&dl(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yt]=t,t.stateNode=r}return ot(t),null;case 13:if(Me(De),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Fe&&jt!==null&&t.mode&1&&!(t.flags&128))Yf(),Tr(),t.flags|=98560,i=!1;else if(i=fl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Q(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Q(317));i[Yt]=t}else Tr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ot(t),i=!1}else Ut!==null&&(pa(Ut),Ut=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||De.current&1?Ze===0&&(Ze=3):gc())),t.updateQueue!==null&&(t.flags|=4),ot(t),null);case 4:return $r(),la(e,t),e===null&&zs(t.stateNode.containerInfo),ot(t),null;case 10:return Za(t.type._context),ot(t),null;case 17:return yt(t.type)&&Vl(),ot(t),null;case 19:if(Me(De),i=t.memoizedState,i===null)return ot(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)ss(i,!1);else{if(Ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Xl(e),o!==null){for(t.flags|=128,ss(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ze(De,De.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ye()>Mr&&(t.flags|=128,r=!0,ss(i,!1),t.lanes=4194304)}else{if(!r)if(e=Xl(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ss(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Fe)return ot(t),null}else 2*Ye()-i.renderingStartTime>Mr&&n!==1073741824&&(t.flags|=128,r=!0,ss(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,n=De.current,ze(De,r?n&1|2:n&1),t):(ot(t),null);case 22:case 23:return mc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?wt&1073741824&&(ot(t),t.subtreeFlags&6&&(t.flags|=8192)):ot(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function Yg(e,t){switch(Ya(t),t.tag){case 1:return yt(t.type)&&Vl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return $r(),Me(gt),Me(ct),sc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return rc(t),null;case 13:if(Me(De),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));Tr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Me(De),null;case 4:return $r(),null;case 10:return Za(t.type._context),null;case 22:case 23:return mc(),null;case 24:return null;default:return null}}var ml=!1,at=!1,Xg=typeof WeakSet=="function"?WeakSet:Set,le=null;function Sr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(e,t,r)}else n.current=null}function ia(e,t,n){try{n()}catch(r){Ge(e,t,r)}}var Fu=!1;function qg(e,t){if(Vo=Fl,e=Af(),Ka(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,m=0,h=e,y=null;t:for(;;){for(var v;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)y=h,h=v;for(;;){if(h===e)break t;if(y===n&&++d===s&&(a=o),y===i&&++m===r&&(c=o),(v=h.nextSibling)!==null)break;h=y,y=h.parentNode}h=v}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wo={focusedElem:e,selectionRange:n},Fl=!1,le=t;le!==null;)if(t=le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,le=e;else for(;le!==null;){t=le;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var j=w.memoizedProps,x=w.memoizedState,p=t.stateNode,f=p.getSnapshotBeforeUpdate(t.elementType===t.type?j:Ft(t.type,j),x);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(N){Ge(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,le=e;break}le=t.return}return w=Fu,Fu=!1,w}function ws(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ia(t,n,i)}s=s.next}while(s!==r)}}function Si(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function oa(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ip(e){var t=e.alternate;t!==null&&(e.alternate=null,Ip(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Yt],delete t[As],delete t[Ko],delete t[Tg],delete t[zg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tp(e){return e.tag===5||e.tag===3||e.tag===4}function Du(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function aa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bl));else if(r!==4&&(e=e.child,e!==null))for(aa(e,t,n),e=e.sibling;e!==null;)aa(e,t,n),e=e.sibling}function ca(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ca(e,t,n),e=e.sibling;e!==null;)ca(e,t,n),e=e.sibling}var nt=null,Dt=!1;function vn(e,t,n){for(n=n.child;n!==null;)zp(e,t,n),n=n.sibling}function zp(e,t,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(hi,n)}catch{}switch(n.tag){case 5:at||Sr(n,t);case 6:var r=nt,s=Dt;nt=null,vn(e,t,n),nt=r,Dt=s,nt!==null&&(Dt?(e=nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(Dt?(e=nt,n=n.stateNode,e.nodeType===8?eo(e.parentNode,n):e.nodeType===1&&eo(e,n),Rs(e)):eo(nt,n.stateNode));break;case 4:r=nt,s=Dt,nt=n.stateNode.containerInfo,Dt=!0,vn(e,t,n),nt=r,Dt=s;break;case 0:case 11:case 14:case 15:if(!at&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ia(n,t,o),s=s.next}while(s!==r)}vn(e,t,n);break;case 1:if(!at&&(Sr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ge(n,t,a)}vn(e,t,n);break;case 21:vn(e,t,n);break;case 22:n.mode&1?(at=(r=at)||n.memoizedState!==null,vn(e,t,n),at=r):vn(e,t,n);break;default:vn(e,t,n)}}function Uu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Xg),t.forEach(function(r){var s=iy.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Mt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,Dt=!1;break e;case 3:nt=a.stateNode.containerInfo,Dt=!0;break e;case 4:nt=a.stateNode.containerInfo,Dt=!0;break e}a=a.return}if(nt===null)throw Error(Q(160));zp(i,o,s),nt=null,Dt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ge(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$p(t,e),t=t.sibling}function $p(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mt(t,e),Kt(e),r&4){try{ws(3,e,e.return),Si(3,e)}catch(j){Ge(e,e.return,j)}try{ws(5,e,e.return)}catch(j){Ge(e,e.return,j)}}break;case 1:Mt(t,e),Kt(e),r&512&&n!==null&&Sr(n,n.return);break;case 5:if(Mt(t,e),Kt(e),r&512&&n!==null&&Sr(n,n.return),e.flags&32){var s=e.stateNode;try{bs(s,"")}catch(j){Ge(e,e.return,j)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&nf(s,i),To(a,o);var d=To(a,i);for(o=0;o<c.length;o+=2){var m=c[o],h=c[o+1];m==="style"?af(s,h):m==="dangerouslySetInnerHTML"?lf(s,h):m==="children"?bs(s,h):za(s,m,h,d)}switch(a){case"input":Lo(s,i);break;case"textarea":rf(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?kr(s,!!i.multiple,v,!1):y!==!!i.multiple&&(i.defaultValue!=null?kr(s,!!i.multiple,i.defaultValue,!0):kr(s,!!i.multiple,i.multiple?[]:"",!1))}s[As]=i}catch(j){Ge(e,e.return,j)}}break;case 6:if(Mt(t,e),Kt(e),r&4){if(e.stateNode===null)throw Error(Q(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(j){Ge(e,e.return,j)}}break;case 3:if(Mt(t,e),Kt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Rs(t.containerInfo)}catch(j){Ge(e,e.return,j)}break;case 4:Mt(t,e),Kt(e);break;case 13:Mt(t,e),Kt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(pc=Ye())),r&4&&Uu(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(at=(d=at)||m,Mt(t,e),at=d):Mt(t,e),Kt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(le=e,m=e.child;m!==null;){for(h=le=m;le!==null;){switch(y=le,v=y.child,y.tag){case 0:case 11:case 14:case 15:ws(4,y,y.return);break;case 1:Sr(y,y.return);var w=y.stateNode;if(typeof w.componentWillUnmount=="function"){r=y,n=y.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(j){Ge(r,n,j)}}break;case 5:Sr(y,y.return);break;case 22:if(y.memoizedState!==null){Vu(h);continue}}v!==null?(v.return=y,le=v):Vu(h)}m=m.sibling}e:for(m=null,h=e;;){if(h.tag===5){if(m===null){m=h;try{s=h.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=of("display",o))}catch(j){Ge(e,e.return,j)}}}else if(h.tag===6){if(m===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(j){Ge(e,e.return,j)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Mt(t,e),Kt(e),r&4&&Uu(e);break;case 21:break;default:Mt(t,e),Kt(e)}}function Kt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Tp(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(bs(s,""),r.flags&=-33);var i=Du(e);ca(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Du(e);aa(e,a,o);break;default:throw Error(Q(161))}}catch(c){Ge(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jg(e,t,n){le=e,Ap(e)}function Ap(e,t,n){for(var r=(e.mode&1)!==0;le!==null;){var s=le,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ml;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||at;a=ml;var d=at;if(ml=o,(at=c)&&!d)for(le=s;le!==null;)o=le,c=o.child,o.tag===22&&o.memoizedState!==null?Wu(s):c!==null?(c.return=o,le=c):Wu(s);for(;i!==null;)le=i,Ap(i),i=i.sibling;le=s,ml=a,at=d}Bu(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,le=i):Bu(e)}}function Bu(e){for(;le!==null;){var t=le;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:at||Si(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!at)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ft(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Eu(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Eu(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var h=m.dehydrated;h!==null&&Rs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}at||t.flags&512&&oa(t)}catch(y){Ge(t,t.return,y)}}if(t===e){le=null;break}if(n=t.sibling,n!==null){n.return=t.return,le=n;break}le=t.return}}function Vu(e){for(;le!==null;){var t=le;if(t===e){le=null;break}var n=t.sibling;if(n!==null){n.return=t.return,le=n;break}le=t.return}}function Wu(e){for(;le!==null;){var t=le;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Si(4,t)}catch(c){Ge(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ge(t,s,c)}}var i=t.return;try{oa(t)}catch(c){Ge(t,i,c)}break;case 5:var o=t.return;try{oa(t)}catch(c){Ge(t,o,c)}}}catch(c){Ge(t,t.return,c)}if(t===e){le=null;break}var a=t.sibling;if(a!==null){a.return=t.return,le=a;break}le=t.return}}var Zg=Math.ceil,Zl=gn.ReactCurrentDispatcher,dc=gn.ReactCurrentOwner,It=gn.ReactCurrentBatchConfig,Ee=0,tt=null,qe=null,rt=0,wt=0,Nr=Dn(0),Ze=0,Bs=null,nr=0,Ni=0,fc=0,js=null,ht=null,pc=0,Mr=1/0,nn=null,ei=!1,ua=null,In=null,gl=!1,Cn=null,ti=0,Ss=0,da=null,Pl=-1,Rl=0;function dt(){return Ee&6?Ye():Pl!==-1?Pl:Pl=Ye()}function Tn(e){return e.mode&1?Ee&2&&rt!==0?rt&-rt:Ag.transition!==null?(Rl===0&&(Rl=wf()),Rl):(e=_e,e!==0||(e=window.event,e=e===void 0?16:bf(e.type)),e):1}function Vt(e,t,n,r){if(50<Ss)throw Ss=0,da=null,Error(Q(185));Gs(e,n,r),(!(Ee&2)||e!==tt)&&(e===tt&&(!(Ee&2)&&(Ni|=n),Ze===4&&Nn(e,rt)),vt(e,r),n===1&&Ee===0&&!(t.mode&1)&&(Mr=Ye()+500,xi&&Un()))}function vt(e,t){var n=e.callbackNode;Am(e,t);var r=Ol(e,e===tt?rt:0);if(r===0)n!==null&&Zc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Zc(n),t===1)e.tag===0?$g(Hu.bind(null,e)):Gf(Hu.bind(null,e)),Rg(function(){!(Ee&6)&&Un()}),n=null;else{switch(jf(r)){case 1:n=Fa;break;case 4:n=vf;break;case 16:n=Ml;break;case 536870912:n=xf;break;default:n=Ml}n=Wp(n,Mp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Mp(e,t){if(Pl=-1,Rl=0,Ee&6)throw Error(Q(327));var n=e.callbackNode;if(_r()&&e.callbackNode!==n)return null;var r=Ol(e,e===tt?rt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ni(e,r);else{t=r;var s=Ee;Ee|=2;var i=Fp();(tt!==e||rt!==t)&&(nn=null,Mr=Ye()+500,qn(e,t));do try{ny();break}catch(a){Op(e,a)}while(!0);Ja(),Zl.current=i,Ee=s,qe!==null?t=0:(tt=null,rt=0,t=Ze)}if(t!==0){if(t===2&&(s=Oo(e),s!==0&&(r=s,t=fa(e,s))),t===1)throw n=Bs,qn(e,0),Nn(e,r),vt(e,Ye()),n;if(t===6)Nn(e,r);else{if(s=e.current.alternate,!(r&30)&&!ey(s)&&(t=ni(e,r),t===2&&(i=Oo(e),i!==0&&(r=i,t=fa(e,i))),t===1))throw n=Bs,qn(e,0),Nn(e,r),vt(e,Ye()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Q(345));case 2:Gn(e,ht,nn);break;case 3:if(Nn(e,r),(r&130023424)===r&&(t=pc+500-Ye(),10<t)){if(Ol(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){dt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Go(Gn.bind(null,e,ht,nn),t);break}Gn(e,ht,nn);break;case 4:if(Nn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Bt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Zg(r/1960))-r,10<r){e.timeoutHandle=Go(Gn.bind(null,e,ht,nn),r);break}Gn(e,ht,nn);break;case 5:Gn(e,ht,nn);break;default:throw Error(Q(329))}}}return vt(e,Ye()),e.callbackNode===n?Mp.bind(null,e):null}function fa(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(qn(e,t).flags|=256),e=ni(e,t),e!==2&&(t=ht,ht=n,t!==null&&pa(t)),e}function pa(e){ht===null?ht=e:ht.push.apply(ht,e)}function ey(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Wt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nn(e,t){for(t&=~fc,t&=~Ni,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Bt(t),r=1<<n;e[n]=-1,t&=~r}}function Hu(e){if(Ee&6)throw Error(Q(327));_r();var t=Ol(e,0);if(!(t&1))return vt(e,Ye()),null;var n=ni(e,t);if(e.tag!==0&&n===2){var r=Oo(e);r!==0&&(t=r,n=fa(e,r))}if(n===1)throw n=Bs,qn(e,0),Nn(e,t),vt(e,Ye()),n;if(n===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gn(e,ht,nn),vt(e,Ye()),null}function hc(e,t){var n=Ee;Ee|=1;try{return e(t)}finally{Ee=n,Ee===0&&(Mr=Ye()+500,xi&&Un())}}function rr(e){Cn!==null&&Cn.tag===0&&!(Ee&6)&&_r();var t=Ee;Ee|=1;var n=It.transition,r=_e;try{if(It.transition=null,_e=1,e)return e()}finally{_e=r,It.transition=n,Ee=t,!(Ee&6)&&Un()}}function mc(){wt=Nr.current,Me(Nr)}function qn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Pg(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Ya(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vl();break;case 3:$r(),Me(gt),Me(ct),sc();break;case 5:rc(r);break;case 4:$r();break;case 13:Me(De);break;case 19:Me(De);break;case 10:Za(r.type._context);break;case 22:case 23:mc()}n=n.return}if(tt=e,qe=e=zn(e.current,null),rt=wt=t,Ze=0,Bs=null,fc=Ni=nr=0,ht=js=null,Yn!==null){for(t=0;t<Yn.length;t++)if(n=Yn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Yn=null}return e}function Op(e,t){do{var n=qe;try{if(Ja(),bl.current=Jl,ql){for(var r=Ue.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ql=!1}if(tr=0,et=Je=Ue=null,xs=!1,Fs=0,dc.current=null,n===null||n.return===null){Ze=1,Bs=t,qe=null;break}e:{var i=e,o=n.return,a=n,c=t;if(t=rt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=a,h=m.tag;if(!(m.mode&1)&&(h===0||h===11||h===15)){var y=m.alternate;y?(m.updateQueue=y.updateQueue,m.memoizedState=y.memoizedState,m.lanes=y.lanes):(m.updateQueue=null,m.memoizedState=null)}var v=Iu(o);if(v!==null){v.flags&=-257,Tu(v,o,a,i,t),v.mode&1&&Ru(i,d,t),t=v,c=d;var w=t.updateQueue;if(w===null){var j=new Set;j.add(c),t.updateQueue=j}else w.add(c);break e}else{if(!(t&1)){Ru(i,d,t),gc();break e}c=Error(Q(426))}}else if(Fe&&a.mode&1){var x=Iu(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Tu(x,o,a,i,t),Xa(Ar(c,a));break e}}i=c=Ar(c,a),Ze!==4&&(Ze=2),js===null?js=[i]:js.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=jp(i,c,t);Cu(i,p);break e;case 1:a=c;var f=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(In===null||!In.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=Sp(i,a,t);Cu(i,N);break e}}i=i.return}while(i!==null)}Up(n)}catch(_){t=_,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function Fp(){var e=Zl.current;return Zl.current=Jl,e===null?Jl:e}function gc(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),tt===null||!(nr&268435455)&&!(Ni&268435455)||Nn(tt,rt)}function ni(e,t){var n=Ee;Ee|=2;var r=Fp();(tt!==e||rt!==t)&&(nn=null,qn(e,t));do try{ty();break}catch(s){Op(e,s)}while(!0);if(Ja(),Ee=n,Zl.current=r,qe!==null)throw Error(Q(261));return tt=null,rt=0,Ze}function ty(){for(;qe!==null;)Dp(qe)}function ny(){for(;qe!==null&&!bm();)Dp(qe)}function Dp(e){var t=Vp(e.alternate,e,wt);e.memoizedProps=e.pendingProps,t===null?Up(e):qe=t,dc.current=null}function Up(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Yg(n,t),n!==null){n.flags&=32767,qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ze=6,qe=null;return}}else if(n=Qg(n,t,wt),n!==null){qe=n;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);Ze===0&&(Ze=5)}function Gn(e,t,n){var r=_e,s=It.transition;try{It.transition=null,_e=1,ry(e,t,n,r)}finally{It.transition=s,_e=r}return null}function ry(e,t,n,r){do _r();while(Cn!==null);if(Ee&6)throw Error(Q(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Mm(e,i),e===tt&&(qe=tt=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gl||(gl=!0,Wp(Ml,function(){return _r(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=It.transition,It.transition=null;var o=_e;_e=1;var a=Ee;Ee|=4,dc.current=null,qg(e,n),$p(n,e),Ng(Wo),Fl=!!Vo,Wo=Vo=null,e.current=n,Jg(n),Lm(),Ee=a,_e=o,It.transition=i}else e.current=n;if(gl&&(gl=!1,Cn=e,ti=s),i=e.pendingLanes,i===0&&(In=null),Rm(n.stateNode),vt(e,Ye()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ei)throw ei=!1,e=ua,ua=null,e;return ti&1&&e.tag!==0&&_r(),i=e.pendingLanes,i&1?e===da?Ss++:(Ss=0,da=e):Ss=0,Un(),null}function _r(){if(Cn!==null){var e=jf(ti),t=It.transition,n=_e;try{if(It.transition=null,_e=16>e?16:e,Cn===null)var r=!1;else{if(e=Cn,Cn=null,ti=0,Ee&6)throw Error(Q(331));var s=Ee;for(Ee|=4,le=e.current;le!==null;){var i=le,o=i.child;if(le.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(le=d;le!==null;){var m=le;switch(m.tag){case 0:case 11:case 15:ws(8,m,i)}var h=m.child;if(h!==null)h.return=m,le=h;else for(;le!==null;){m=le;var y=m.sibling,v=m.return;if(Ip(m),m===d){le=null;break}if(y!==null){y.return=v,le=y;break}le=v}}}var w=i.alternate;if(w!==null){var j=w.child;if(j!==null){w.child=null;do{var x=j.sibling;j.sibling=null,j=x}while(j!==null)}}le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,le=o;else e:for(;le!==null;){if(i=le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ws(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,le=p;break e}le=i.return}}var f=e.current;for(le=f;le!==null;){o=le;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,le=g;else e:for(o=f;le!==null;){if(a=le,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Si(9,a)}}catch(_){Ge(a,a.return,_)}if(a===o){le=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,le=N;break e}le=a.return}}if(Ee=s,Un(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(hi,e)}catch{}r=!0}return r}finally{_e=n,It.transition=t}}return!1}function Gu(e,t,n){t=Ar(n,t),t=jp(e,t,1),e=Rn(e,t,1),t=dt(),e!==null&&(Gs(e,1,t),vt(e,t))}function Ge(e,t,n){if(e.tag===3)Gu(e,e,n);else for(;t!==null;){if(t.tag===3){Gu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(In===null||!In.has(r))){e=Ar(n,e),e=Sp(t,e,1),t=Rn(t,e,1),e=dt(),t!==null&&(Gs(t,1,e),vt(t,e));break}}t=t.return}}function sy(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=dt(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(rt&n)===n&&(Ze===4||Ze===3&&(rt&130023424)===rt&&500>Ye()-pc?qn(e,0):fc|=n),vt(e,t)}function Bp(e,t){t===0&&(e.mode&1?(t=il,il<<=1,!(il&130023424)&&(il=4194304)):t=1);var n=dt();e=hn(e,t),e!==null&&(Gs(e,t,n),vt(e,n))}function ly(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Bp(e,n)}function iy(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(t),Bp(e,n)}var Vp;Vp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||gt.current)mt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return mt=!1,Kg(e,t,n);mt=!!(e.flags&131072)}else mt=!1,Fe&&t.flags&1048576&&Kf(t,Gl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;_l(e,t),e=t.pendingProps;var s=Ir(t,ct.current);Lr(t,n),s=ic(null,t,r,e,s,n);var i=oc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yt(r)?(i=!0,Wl(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,tc(t),s.updater=ji,t.stateNode=s,s._reactInternals=t,Zo(t,r,e,n),t=na(null,t,r,!0,i,n)):(t.tag=0,Fe&&i&&Qa(t),ut(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(_l(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=ay(r),e=Ft(r,e),s){case 0:t=ta(null,t,r,e,n);break e;case 1:t=Au(null,t,r,e,n);break e;case 11:t=zu(null,t,r,e,n);break e;case 14:t=$u(null,t,r,Ft(r.type,e),n);break e}throw Error(Q(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ft(r,s),ta(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ft(r,s),Au(e,t,r,s,n);case 3:e:{if(Ep(t),e===null)throw Error(Q(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Zf(e,t),Yl(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ar(Error(Q(423)),t),t=Mu(e,t,r,n,s);break e}else if(r!==s){s=Ar(Error(Q(424)),t),t=Mu(e,t,r,n,s);break e}else for(jt=Pn(t.stateNode.containerInfo.firstChild),St=t,Fe=!0,Ut=null,n=qf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Tr(),r===s){t=mn(e,t,n);break e}ut(e,t,r,n)}t=t.child}return t;case 5:return ep(t),e===null&&Xo(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ho(r,s)?o=null:i!==null&&Ho(r,i)&&(t.flags|=32),Cp(e,t),ut(e,t,o,n),t.child;case 6:return e===null&&Xo(t),null;case 13:return bp(e,t,n);case 4:return nc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=zr(t,null,r,n):ut(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ft(r,s),zu(e,t,r,s,n);case 7:return ut(e,t,t.pendingProps,n),t.child;case 8:return ut(e,t,t.pendingProps.children,n),t.child;case 12:return ut(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ze(Kl,r._currentValue),r._currentValue=o,i!==null)if(Wt(i.value,o)){if(i.children===s.children&&!gt.current){t=mn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=un(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),qo(i.return,n,t),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),qo(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ut(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Lr(t,n),s=Tt(s),r=r(s),t.flags|=1,ut(e,t,r,n),t.child;case 14:return r=t.type,s=Ft(r,t.pendingProps),s=Ft(r.type,s),$u(e,t,r,s,n);case 15:return Np(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ft(r,s),_l(e,t),t.tag=1,yt(r)?(e=!0,Wl(t)):e=!1,Lr(t,n),wp(t,r,s),Zo(t,r,s,n),na(null,t,r,!0,e,n);case 19:return Lp(e,t,n);case 22:return kp(e,t,n)}throw Error(Q(156,t.tag))};function Wp(e,t){return yf(e,t)}function oy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(e,t,n,r){return new oy(e,t,n,r)}function yc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ay(e){if(typeof e=="function")return yc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Aa)return 11;if(e===Ma)return 14}return 2}function zn(e,t){var n=e.alternate;return n===null?(n=Rt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Il(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")yc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case pr:return Jn(n.children,s,i,t);case $a:o=8,s|=8;break;case No:return e=Rt(12,n,t,s|2),e.elementType=No,e.lanes=i,e;case ko:return e=Rt(13,n,t,s),e.elementType=ko,e.lanes=i,e;case Co:return e=Rt(19,n,t,s),e.elementType=Co,e.lanes=i,e;case Zd:return ki(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qd:o=10;break e;case Jd:o=9;break e;case Aa:o=11;break e;case Ma:o=14;break e;case wn:o=16,r=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=Rt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Jn(e,t,n,r){return e=Rt(7,e,r,t),e.lanes=n,e}function ki(e,t,n,r){return e=Rt(22,e,r,t),e.elementType=Zd,e.lanes=n,e.stateNode={isHidden:!1},e}function ao(e,t,n){return e=Rt(6,e,null,t),e.lanes=n,e}function co(e,t,n){return t=Rt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function cy(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vi(0),this.expirationTimes=Vi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vi(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function vc(e,t,n,r,s,i,o,a,c){return e=new cy(e,t,n,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Rt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tc(i),e}function uy(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Hp(e){if(!e)return On;e=e._reactInternals;e:{if(lr(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var n=e.type;if(yt(n))return Hf(e,n,t)}return t}function Gp(e,t,n,r,s,i,o,a,c){return e=vc(n,r,!0,e,s,i,o,a,c),e.context=Hp(null),n=e.current,r=dt(),s=Tn(n),i=un(r,s),i.callback=t??null,Rn(n,i,s),e.current.lanes=s,Gs(e,s,r),vt(e,r),e}function Ci(e,t,n,r){var s=t.current,i=dt(),o=Tn(s);return n=Hp(n),t.context===null?t.context=n:t.pendingContext=n,t=un(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Rn(s,t,o),e!==null&&(Vt(e,s,o,i),El(e,s,o)),o}function ri(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ku(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xc(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}function dy(){return null}var Kp=typeof reportError=="function"?reportError:function(e){console.error(e)};function wc(e){this._internalRoot=e}Ei.prototype.render=wc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));Ci(e,t,null,null)};Ei.prototype.unmount=wc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rr(function(){Ci(null,e,null,null)}),t[pn]=null}};function Ei(e){this._internalRoot=e}Ei.prototype.unstable_scheduleHydration=function(e){if(e){var t=kf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sn.length&&t!==0&&t<Sn[n].priority;n++);Sn.splice(n,0,e),n===0&&Ef(e)}};function jc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qu(){}function fy(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=ri(o);i.call(d)}}var o=Gp(t,r,e,0,null,!1,!1,"",Qu);return e._reactRootContainer=o,e[pn]=o.current,zs(e.nodeType===8?e.parentNode:e),rr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=ri(c);a.call(d)}}var c=vc(e,0,!1,null,null,!1,!1,"",Qu);return e._reactRootContainer=c,e[pn]=c.current,zs(e.nodeType===8?e.parentNode:e),rr(function(){Ci(t,c,n,r)}),c}function Li(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=ri(o);a.call(c)}}Ci(t,o,e,s)}else o=fy(n,t,e,s,r);return ri(o)}Sf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=us(t.pendingLanes);n!==0&&(Da(t,n|1),vt(t,Ye()),!(Ee&6)&&(Mr=Ye()+500,Un()))}break;case 13:rr(function(){var r=hn(e,1);if(r!==null){var s=dt();Vt(r,e,1,s)}}),xc(e,1)}};Ua=function(e){if(e.tag===13){var t=hn(e,134217728);if(t!==null){var n=dt();Vt(t,e,134217728,n)}xc(e,134217728)}};Nf=function(e){if(e.tag===13){var t=Tn(e),n=hn(e,t);if(n!==null){var r=dt();Vt(n,e,t,r)}xc(e,t)}};kf=function(){return _e};Cf=function(e,t){var n=_e;try{return _e=e,t()}finally{_e=n}};$o=function(e,t,n){switch(t){case"input":if(Lo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=vi(r);if(!s)throw Error(Q(90));tf(r),Lo(r,s)}}}break;case"textarea":rf(e,n);break;case"select":t=n.value,t!=null&&kr(e,!!n.multiple,t,!1)}};df=hc;ff=rr;var py={usingClientEntryPoint:!1,Events:[Qs,yr,vi,cf,uf,hc]},ls={findFiberByHostInstance:Qn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hy={bundleType:ls.bundleType,version:ls.version,rendererPackageName:ls.rendererPackageName,rendererConfig:ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mf(e),e===null?null:e.stateNode},findFiberByHostInstance:ls.findFiberByHostInstance||dy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yl.isDisabled&&yl.supportsFiber)try{hi=yl.inject(hy),en=yl}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=py;Ct.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jc(t))throw Error(Q(200));return uy(e,t,null,n)};Ct.createRoot=function(e,t){if(!jc(e))throw Error(Q(299));var n=!1,r="",s=Kp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=vc(e,1,!1,null,null,n,!1,r,s),e[pn]=t.current,zs(e.nodeType===8?e.parentNode:e),new wc(t)};Ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=mf(t),e=e===null?null:e.stateNode,e};Ct.flushSync=function(e){return rr(e)};Ct.hydrate=function(e,t,n){if(!bi(t))throw Error(Q(200));return Li(null,e,t,!0,n)};Ct.hydrateRoot=function(e,t,n){if(!jc(e))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Kp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Gp(t,null,e,1,n??null,s,!1,i,o),e[pn]=t.current,zs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ei(t)};Ct.render=function(e,t,n){if(!bi(t))throw Error(Q(200));return Li(null,e,t,!1,n)};Ct.unmountComponentAtNode=function(e){if(!bi(e))throw Error(Q(40));return e._reactRootContainer?(rr(function(){Li(null,null,e,!1,function(){e._reactRootContainer=null,e[pn]=null})}),!0):!1};Ct.unstable_batchedUpdates=hc;Ct.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!bi(n))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return Li(e,t,n,!1,r)};Ct.version="18.3.1-next-f1338f8080-20240426";function Qp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qp)}catch(e){console.error(e)}}Qp(),Kd.exports=Ct;var Sc=Kd.exports,Yu=Sc;jo.createRoot=Yu.createRoot,jo.hydrateRoot=Yu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vs(){return Vs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vs.apply(this,arguments)}var En;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(En||(En={}));const Xu="popstate";function my(e){e===void 0&&(e={});function t(s,i){let{pathname:o="/",search:a="",hash:c=""}=ir(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ha("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");a=d===-1?c:c.slice(0,d)}return a+"#"+(typeof i=="string"?i:si(i))}function r(s,i){Nc(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return yy(t,n,r,e)}function Be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Nc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function gy(){return Math.random().toString(36).substr(2,8)}function qu(e,t){return{usr:e.state,key:e.key,idx:t}}function ha(e,t,n,r){return n===void 0&&(n=null),Vs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ir(t):t,{state:n,key:t&&t.key||r||gy()})}function si(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ir(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function yy(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=En.Pop,c=null,d=m();d==null&&(d=0,o.replaceState(Vs({},o.state,{idx:d}),""));function m(){return(o.state||{idx:null}).idx}function h(){a=En.Pop;let x=m(),p=x==null?null:x-d;d=x,c&&c({action:a,location:j.location,delta:p})}function y(x,p){a=En.Push;let f=ha(j.location,x,p);n&&n(f,x),d=m()+1;let g=qu(f,d),N=j.createHref(f);try{o.pushState(g,"",N)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(N)}i&&c&&c({action:a,location:j.location,delta:1})}function v(x,p){a=En.Replace;let f=ha(j.location,x,p);n&&n(f,x),d=m();let g=qu(f,d),N=j.createHref(f);o.replaceState(g,"",N),i&&c&&c({action:a,location:j.location,delta:0})}function w(x){let p=s.location.origin!=="null"?s.location.origin:s.location.href,f=typeof x=="string"?x:si(x);return f=f.replace(/ $/,"%20"),Be(p,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,p)}let j={get action(){return a},get location(){return e(s,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Xu,h),c=x,()=>{s.removeEventListener(Xu,h),c=null}},createHref(x){return t(s,x)},createURL:w,encodeLocation(x){let p=w(x);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:y,replace:v,go(x){return o.go(x)}};return j}var Ju;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ju||(Ju={}));function vy(e,t,n){return n===void 0&&(n="/"),xy(e,t,n)}function xy(e,t,n,r){let s=typeof t=="string"?ir(t):t,i=Or(s.pathname||"/",n);if(i==null)return null;let o=Yp(e);wy(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let d=Ry(i);a=_y(o[c],d)}return a}function Yp(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Be(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=$n([r,c.relativePath]),m=n.concat(c);i.children&&i.children.length>0&&(Be(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Yp(i.children,t,m,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:by(d,i.index),routesMeta:m})};return e.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of Xp(i.path))s(i,o,c)}),t}function Xp(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Xp(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function wy(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Ly(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const jy=/^:[\w-]+$/,Sy=3,Ny=2,ky=1,Cy=10,Ey=-2,Zu=e=>e==="*";function by(e,t){let n=e.split("/"),r=n.length;return n.some(Zu)&&(r+=Ey),t&&(r+=Ny),n.filter(s=>!Zu(s)).reduce((s,i)=>s+(jy.test(i)?Sy:i===""?ky:Cy),r)}function Ly(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function _y(e,t,n){let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],d=a===r.length-1,m=i==="/"?t:t.slice(i.length)||"/",h=ma({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),y=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:$n([i,h.pathname]),pathnameBase:$y($n([i,h.pathnameBase])),route:y}),h.pathnameBase!=="/"&&(i=$n([i,h.pathnameBase]))}return o}function ma(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Py(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((d,m,h)=>{let{paramName:y,isOptional:v}=m;if(y==="*"){let j=a[h]||"";o=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const w=a[h];return v&&!w?d[y]=void 0:d[y]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function Py(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Nc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Ry(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Nc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Or(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Iy(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?ir(e):e;return{pathname:n?n.startsWith("/")?n:Ty(n,t):t,search:Ay(r),hash:My(s)}}function Ty(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function uo(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zy(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function kc(e,t){let n=zy(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Cc(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=ir(e):(s=Vs({},e),Be(!s.pathname||!s.pathname.includes("?"),uo("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),uo("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),uo("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),h-=1;s.pathname=y.join("/")}a=h>=0?t[h]:"/"}let c=Iy(s,a),d=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}const $n=e=>e.join("/").replace(/\/\/+/g,"/"),$y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ay=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,My=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Oy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const qp=["post","put","patch","delete"];new Set(qp);const Fy=["get",...qp];new Set(Fy);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ws(){return Ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ws.apply(this,arguments)}const _i=u.createContext(null),Jp=u.createContext(null),yn=u.createContext(null),Pi=u.createContext(null),Bn=u.createContext({outlet:null,matches:[],isDataRoute:!1}),Zp=u.createContext(null);function Dy(e,t){let{relative:n}=t===void 0?{}:t;Br()||Be(!1);let{basename:r,navigator:s}=u.useContext(yn),{hash:i,pathname:o,search:a}=Ri(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:$n([r,o])),s.createHref({pathname:c,search:a,hash:i})}function Br(){return u.useContext(Pi)!=null}function bt(){return Br()||Be(!1),u.useContext(Pi).location}function eh(e){u.useContext(yn).static||u.useLayoutEffect(e)}function Vr(){let{isDataRoute:e}=u.useContext(Bn);return e?Zy():Uy()}function Uy(){Br()||Be(!1);let e=u.useContext(_i),{basename:t,future:n,navigator:r}=u.useContext(yn),{matches:s}=u.useContext(Bn),{pathname:i}=bt(),o=JSON.stringify(kc(s,n.v7_relativeSplatPath)),a=u.useRef(!1);return eh(()=>{a.current=!0}),u.useCallback(function(d,m){if(m===void 0&&(m={}),!a.current)return;if(typeof d=="number"){r.go(d);return}let h=Cc(d,JSON.parse(o),i,m.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:$n([t,h.pathname])),(m.replace?r.replace:r.push)(h,m.state,m)},[t,r,o,i,e])}function Ri(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=u.useContext(yn),{matches:s}=u.useContext(Bn),{pathname:i}=bt(),o=JSON.stringify(kc(s,r.v7_relativeSplatPath));return u.useMemo(()=>Cc(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function By(e,t){return Vy(e,t)}function Vy(e,t,n,r){Br()||Be(!1);let{navigator:s}=u.useContext(yn),{matches:i}=u.useContext(Bn),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=bt(),m;if(t){var h;let x=typeof t=="string"?ir(t):t;c==="/"||(h=x.pathname)!=null&&h.startsWith(c)||Be(!1),m=x}else m=d;let y=m.pathname||"/",v=y;if(c!=="/"){let x=c.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(x.length).join("/")}let w=vy(e,{pathname:v}),j=Qy(w&&w.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:$n([c,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:$n([c,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,r);return t&&j?u.createElement(Pi.Provider,{value:{location:Ws({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:En.Pop}},j):j}function Wy(){let e=Jy(),t=Oy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const Hy=u.createElement(Wy,null);class Gy extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(Bn.Provider,{value:this.props.routeContext},u.createElement(Zp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ky(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(_i);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(Bn.Provider,{value:t},r)}function Qy(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let m=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);m>=0||Be(!1),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let h=o[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=m),h.route.id){let{loaderData:y,errors:v}=n,w=h.route.loader&&y[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||w){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((m,h,y)=>{let v,w=!1,j=null,x=null;n&&(v=a&&h.route.id?a[h.route.id]:void 0,j=h.route.errorElement||Hy,c&&(d<0&&y===0?(ev("route-fallback"),w=!0,x=null):d===y&&(w=!0,x=h.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,y+1)),f=()=>{let g;return v?g=j:w?g=x:h.route.Component?g=u.createElement(h.route.Component,null):h.route.element?g=h.route.element:g=m,u.createElement(Ky,{match:h,routeContext:{outlet:m,matches:p,isDataRoute:n!=null},children:g})};return n&&(h.route.ErrorBoundary||h.route.errorElement||y===0)?u.createElement(Gy,{location:n.location,revalidation:n.revalidation,component:j,error:v,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()},null)}var th=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(th||{}),nh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(nh||{});function Yy(e){let t=u.useContext(_i);return t||Be(!1),t}function Xy(e){let t=u.useContext(Jp);return t||Be(!1),t}function qy(e){let t=u.useContext(Bn);return t||Be(!1),t}function rh(e){let t=qy(),n=t.matches[t.matches.length-1];return n.route.id||Be(!1),n.route.id}function Jy(){var e;let t=u.useContext(Zp),n=Xy(),r=rh();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Zy(){let{router:e}=Yy(th.UseNavigateStable),t=rh(nh.UseNavigateStable),n=u.useRef(!1);return eh(()=>{n.current=!0}),u.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ws({fromRouteId:t},i)))},[e,t])}const ed={};function ev(e,t,n){ed[e]||(ed[e]=!0)}function tv(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function sh(e){let{to:t,replace:n,state:r,relative:s}=e;Br()||Be(!1);let{future:i,static:o}=u.useContext(yn),{matches:a}=u.useContext(Bn),{pathname:c}=bt(),d=Vr(),m=Cc(t,kc(a,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(m);return u.useEffect(()=>d(JSON.parse(h),{replace:n,state:r,relative:s}),[d,h,s,n,r]),null}function xn(e){Be(!1)}function nv(e){let{basename:t="/",children:n=null,location:r,navigationType:s=En.Pop,navigator:i,static:o=!1,future:a}=e;Br()&&Be(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:i,static:o,future:Ws({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=ir(r));let{pathname:m="/",search:h="",hash:y="",state:v=null,key:w="default"}=r,j=u.useMemo(()=>{let x=Or(m,c);return x==null?null:{location:{pathname:x,search:h,hash:y,state:v,key:w},navigationType:s}},[c,m,h,y,v,w,s]);return j==null?null:u.createElement(yn.Provider,{value:d},u.createElement(Pi.Provider,{children:n,value:j}))}function rv(e){let{children:t,location:n}=e;return By(ga(t),n)}new Promise(()=>{});function ga(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let i=[...t,s];if(r.type===u.Fragment){n.push.apply(n,ga(r.props.children,i));return}r.type!==xn&&Be(!1),!r.props.index||!r.props.children||Be(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ga(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function li(){return li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},li.apply(this,arguments)}function lh(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function sv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function lv(e,t){return e.button===0&&(!t||t==="_self")&&!sv(e)}function ya(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function iv(e,t){let n=ya(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(i=>{n.append(s,i)})}),n}const ov=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],av=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],cv="6";try{window.__reactRouterVersion=cv}catch{}const uv=u.createContext({isTransitioning:!1}),dv="startTransition",td=sm[dv];function fv(e){let{basename:t,children:n,future:r,window:s}=e,i=u.useRef();i.current==null&&(i.current=my({window:s,v5Compat:!0}));let o=i.current,[a,c]=u.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},m=u.useCallback(h=>{d&&td?td(()=>c(h)):c(h)},[c,d]);return u.useLayoutEffect(()=>o.listen(m),[o,m]),u.useEffect(()=>tv(r),[r]),u.createElement(nv,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const pv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ih=u.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:c,to:d,preventScrollReset:m,viewTransition:h}=t,y=lh(t,ov),{basename:v}=u.useContext(yn),w,j=!1;if(typeof d=="string"&&hv.test(d)&&(w=d,pv))try{let g=new URL(window.location.href),N=d.startsWith("//")?new URL(g.protocol+d):new URL(d),_=Or(N.pathname,v);N.origin===g.origin&&_!=null?d=_+N.search+N.hash:j=!0}catch{}let x=Dy(d,{relative:s}),p=gv(d,{replace:o,state:a,target:c,preventScrollReset:m,relative:s,viewTransition:h});function f(g){r&&r(g),g.defaultPrevented||p(g)}return u.createElement("a",li({},y,{href:w||x,onClick:j||i?r:f,ref:n,target:c}))}),cr=u.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:c,viewTransition:d,children:m}=t,h=lh(t,av),y=Ri(c,{relative:h.relative}),v=bt(),w=u.useContext(Jp),{navigator:j,basename:x}=u.useContext(yn),p=w!=null&&vv(y)&&d===!0,f=j.encodeLocation?j.encodeLocation(y).pathname:y.pathname,g=v.pathname,N=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(g=g.toLowerCase(),N=N?N.toLowerCase():null,f=f.toLowerCase()),N&&x&&(N=Or(N,x)||N);const _=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let L=g===f||!o&&g.startsWith(f)&&g.charAt(_)==="/",F=N!=null&&(N===f||!o&&N.startsWith(f)&&N.charAt(f.length)==="/"),z={isActive:L,isPending:F,isTransitioning:p},k=L?r:void 0,W;typeof i=="function"?W=i(z):W=[i,L?"active":null,F?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let ie=typeof a=="function"?a(z):a;return u.createElement(ih,li({},h,{"aria-current":k,className:W,ref:n,style:ie,to:c,viewTransition:d}),typeof m=="function"?m(z):m)});var va;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(va||(va={}));var nd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(nd||(nd={}));function mv(e){let t=u.useContext(_i);return t||Be(!1),t}function gv(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=t===void 0?{}:t,c=Vr(),d=bt(),m=Ri(e,{relative:o});return u.useCallback(h=>{if(lv(h,n)){h.preventDefault();let y=r!==void 0?r:si(d)===si(m);c(e,{replace:y,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[d,c,m,r,s,n,e,i,o,a])}function yv(e){let t=u.useRef(ya(e)),n=u.useRef(!1),r=bt(),s=u.useMemo(()=>iv(r.search,n.current?null:t.current),[r.search]),i=Vr(),o=u.useCallback((a,c)=>{const d=ya(typeof a=="function"?a(s):a);n.current=!0,i("?"+d,c)},[i,s]);return[s,o]}function vv(e,t){t===void 0&&(t={});let n=u.useContext(uv);n==null&&Be(!1);let{basename:r}=mv(va.useViewTransitionState),s=Ri(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Or(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Or(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ma(s.pathname,o)!=null||ma(s.pathname,i)!=null}function oh(){const[e,t]=u.useState(()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("cozygen_gallery_pending")==="1"}catch{return!1}});return u.useEffect(()=>{const n=()=>t(!0),r=()=>t(!1),s=i=>{i.key==="cozygen_gallery_pending"&&t(i.newValue==="1")};return window.addEventListener("cozygen:gallery-pending",n),window.addEventListener("cozygen:gallery-viewed",r),window.addEventListener("storage",s),()=>{window.removeEventListener("cozygen:gallery-pending",n),window.removeEventListener("cozygen:gallery-viewed",r),window.removeEventListener("storage",s)}},[]),e}const xa="cozygen_token";function Ec(){try{return typeof window>"u"?null:localStorage.getItem(xa)}catch{return null}}function ah(e){try{if(typeof window>"u")return;e?localStorage.setItem(xa,e):localStorage.removeItem(xa)}catch{}}function fo(){ah(null)}function Xs(){const e=Ec();return e?{Authorization:`Bearer ${e}`}:{}}const qs=async(e,t)=>{if(t.status===401){const r=new Error("unauthorized");throw r.unauthorized=!0,r.status=401,r}if(!t.ok)throw new Error(`${e} failed`);return(t.headers.get("content-type")||"").includes("application/json")?t.json():t.text()},or=async(e,t={})=>{const{signal:n}=t,r=await fetch(e,{headers:{...Xs()},signal:n});return qs(e,r)},bc=async(e,t,n={})=>{const{signal:r}=n,s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...Xs()},body:JSON.stringify(t),credentials:"include",signal:r});return qs(e,s)};async function xv(e={}){return or("/cozygen/workflows",e)}async function wv(e,t={}){return or(`/cozygen/workflows/${encodeURIComponent(e)}`,t)}async function jv(e,t={}){return or(`/cozygen/get_choices?type=${encodeURIComponent(e)}`,t)}async function ch(e){const t=await fetch("/prompt",{method:"POST",headers:{"Content-Type":"application/json",...Xs()},body:JSON.stringify(e),credentials:"include"});return qs("/prompt",t)}async function Sv(e){const t=new FormData;t.append("image",e);const n=await fetch("/cozygen/upload_image",{method:"POST",headers:{...Xs()},body:t,credentials:"include"});return qs("/cozygen/upload_image",n)}async function uh(e="",t=1,n=50,r=!1,s=!1,i="all",o="",a={}){const c=new URLSearchParams({subfolder:e,page:String(t),per_page:String(n),show_hidden:r?"1":"0",recursive:s?"1":"0",kind:i});return o&&c.set("cache_bust",String(o)),or(`/cozygen/api/gallery?${c.toString()}`,a)}async function Nv(){return or("/cozygen/api/aliases")}async function kv(e){return bc("/cozygen/api/aliases",e||{})}async function dh(e={}){return or("/cozygen/api/tags/categories",e)}async function ii({q:e="",category:t="",sort:n="count",limit:r=80,offset:s=0}={},i={}){const o=new URLSearchParams({q:String(e||""),category:String(t||""),sort:String(n||"count"),limit:String(r||80),offset:String(s||0)});return or(`/cozygen/api/tags/search?${o.toString()}`,i)}async function po(e=[],t={}){return bc("/cozygen/api/tags/validate",{tags:Array.isArray(e)?e:[]},t)}async function Cv(e,t){return bc("/cozygen/api/login",{username:e,password:t})}async function Ev(){return fetch("/cozygen/api/auth_status",{headers:{...Xs()},credentials:"include"}).then(e=>qs("/cozygen/api/auth_status",e))}const bv=30*60*1e3,rd="cozygen_idle_logout",fh=u.createContext(null);function Lv({children:e}){const[t,n]=u.useState(!1),[r,s]=u.useState(null),[i,o]=u.useState(!1),[a,c]=u.useState(null),d=u.useCallback(async()=>{if(!Ec()){s(null),o(!1),n(!0);return}try{const w=await Ev();s((w==null?void 0:w.user)||null),o(!!(w!=null&&w.default_credentials))}catch{fo(),s(null),o(!1)}finally{n(!0)}},[]);u.useEffect(()=>{d()},[d]);const m=u.useCallback(async(v,w)=>{const j=await Cv(v,w);ah((j==null?void 0:j.token)||""),s((j==null?void 0:j.user)||v),o(!!(j!=null&&j.default_credentials));try{localStorage.removeItem(rd)}catch{}return j},[]),h=u.useCallback(()=>{fo(),s(null),o(!1)},[]);u.useEffect(()=>{if(!t)return;const v=()=>{a&&clearTimeout(a);const j=setTimeout(()=>{fo(),s(null),o(!1);try{localStorage.setItem(rd,"1")}catch{}window.location.hash="#/login"},bv);c(j)};v();const w=["pointerdown","keydown","visibilitychange"];return w.forEach(j=>window.addEventListener(j,v,{passive:!0})),()=>{a&&clearTimeout(a),w.forEach(j=>window.removeEventListener(j,v))}},[t,a]);const y=u.useMemo(()=>({ready:t,user:r,authed:!!r,defaultCreds:i,login:m,logout:h,refresh:d}),[t,r,i,m,h,d]);return l.jsx(fh.Provider,{value:y,children:e})}function Ii(){const e=u.useContext(fh);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function _v({children:e}){return l.jsx(Lv,{children:e})}const ph="cozygen_last_render_payload";function Pv(e){if(e)try{if(typeof window>"u")return;window.localStorage.setItem(ph,JSON.stringify(e))}catch{}}function hh(){try{if(typeof window>"u")return null;const e=window.localStorage.getItem(ph);return e?JSON.parse(e):null}catch{return null}}async function mh(){const e=hh();if(!e||!e.workflow)return{success:!1,error:"No previous render to repeat"};try{return window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!0}})),await ch({prompt:e.workflow}),window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!1}})),{success:!0}}catch(t){return console.error("Failed to requeue prompt",t),window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!1}})),t!=null&&t.unauthorized?(window.location.hash="#/login",{success:!1,error:"Session expired"}):{success:!1,error:"Failed to queue prompt"}}}function gh(){const e=hh();return!!(e&&e.workflow)}function oi(e,t=!1){const n=()=>typeof window>"u"||!window.matchMedia?t:window.matchMedia(e).matches,[r,s]=u.useState(n);return u.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const i=window.matchMedia(e),o=()=>s(i.matches);return o(),typeof i.addEventListener=="function"?(i.addEventListener("change",o),()=>i.removeEventListener("change",o)):(i.addListener(o),()=>i.removeListener(o))},[e]),r}const yh=({size:e=32,className:t=""})=>l.jsxs("svg",{width:e,height:e,viewBox:"0 0 32 32",fill:"none",className:t,"aria-hidden":"true",children:[l.jsx("path",{d:"M8 24L20 4",stroke:"url(#logo-gradient)",strokeWidth:"3",strokeLinecap:"round"}),l.jsx("path",{d:"M6 26C6 26 7 24 8 24C9 24 10 25 8 27C6 29 4 28 6 26Z",fill:"url(#logo-warm)"}),l.jsx("circle",{cx:"22",cy:"8",r:"2",fill:"url(#logo-spark)"}),l.jsx("circle",{cx:"26",cy:"12",r:"1.5",fill:"url(#logo-spark)",opacity:"0.8"}),l.jsx("circle",{cx:"24",cy:"16",r:"1",fill:"url(#logo-spark)",opacity:"0.6"}),l.jsxs("defs",{children:[l.jsxs("linearGradient",{id:"logo-gradient",x1:"8",y1:"24",x2:"20",y2:"4",gradientUnits:"userSpaceOnUse",children:[l.jsx("stop",{stopColor:"#FF9F7A"}),l.jsx("stop",{offset:"0.5",stopColor:"#9F8CFF"}),l.jsx("stop",{offset:"1",stopColor:"#44E1C5"})]}),l.jsxs("linearGradient",{id:"logo-warm",x1:"4",y1:"24",x2:"10",y2:"28",gradientUnits:"userSpaceOnUse",children:[l.jsx("stop",{stopColor:"#FF9F7A"}),l.jsx("stop",{offset:"1",stopColor:"#FFD666"})]}),l.jsxs("radialGradient",{id:"logo-spark",cx:"0.3",cy:"0.3",r:"0.7",children:[l.jsx("stop",{stopColor:"#FFFFFF"}),l.jsx("stop",{offset:"0.5",stopColor:"#44E1C5"}),l.jsx("stop",{offset:"1",stopColor:"#9F8CFF"})]})]})]}),We=({children:e,size:t=16,className:n="",...r})=>l.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,"aria-hidden":"true",...r,children:e}),vh=e=>l.jsxs(We,{...e,children:[l.jsx("path",{d:"M12 19l7-7 3 3-7 7-3-3z"}),l.jsx("path",{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"}),l.jsx("path",{d:"M2 2l7.586 7.586"}),l.jsx("circle",{cx:"11",cy:"11",r:"2"})]}),Lc=e=>l.jsxs(We,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5",fill:"currentColor",stroke:"none"}),l.jsx("path",{d:"M21 15l-5-5L5 21"})]}),Nt=e=>l.jsxs(We,{...e,children:[l.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"}),l.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7",strokeWidth:"3"})]}),_c=e=>l.jsxs(We,{...e,children:[l.jsx("path",{d:"M14 3H4a2 2 0 00-2 2v10l6 6h10a2 2 0 002-2V9l-6-6z"}),l.jsx("path",{d:"M14 3v6h6"}),l.jsx("path",{d:"M7 7h5"}),l.jsx("path",{d:"M7 11h7"})]}),Pc=e=>l.jsx(We,{...e,children:l.jsx("path",{d:"M17 3a2.828 2.828 0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Rc=e=>l.jsx(We,{...e,children:l.jsx("polygon",{points:"5 3 19 12 5 21 5 3",fill:"currentColor",stroke:"none"})}),sd=e=>l.jsxs(We,{...e,children:[l.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Rv=e=>l.jsxs(We,{...e,children:[l.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),l.jsx("line",{x1:"9",y1:"9",x2:"9",y2:"15"}),l.jsx("line",{x1:"15",y1:"9",x2:"15",y2:"15"}),l.jsx("circle",{cx:"9",cy:"12",r:"1.5",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"10",r:"1.5",fill:"currentColor",stroke:"none"})]}),Iv=e=>l.jsx(We,{...e,children:l.jsx("polyline",{points:"3 12 7 12 10 6 14 18 17 12 21 12"})}),Tv=e=>l.jsxs(We,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("circle",{cx:"12",cy:"12",r:"4"}),l.jsx("line",{x1:"3",y1:"9",x2:"6",y2:"9"})]}),ld=e=>l.jsxs(We,{...e,children:[l.jsx("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"}),l.jsx("path",{d:"M2 10h20"})]}),id=e=>l.jsx(We,{...e,children:l.jsx("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"})}),od=e=>l.jsxs(We,{...e,children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),ad=e=>l.jsxs(We,{...e,children:[l.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"}),l.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),cd=e=>l.jsx(We,{...e,children:l.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),ud=e=>l.jsxs(We,{...e,children:[l.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),l.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}),ai=e=>l.jsxs(We,{...e,children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 11-2.12-9.36L23 10"})]}),zv=e=>l.jsx(We,{...e,children:l.jsx("polyline",{points:"15 18 9 12 15 6"})}),Ic=e=>l.jsx(We,{...e,children:l.jsx("polyline",{points:"9 18 15 12 9 6"})}),wa=e=>l.jsxs(We,{...e,children:[l.jsx("circle",{cx:"9",cy:"6",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"6",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"9",cy:"12",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"12",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"9",cy:"18",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"18",r:"1",fill:"currentColor",stroke:"none"})]}),ja=e=>l.jsxs(We,{...e,children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),$v=e=>l.jsxs(We,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",strokeDasharray:"4 2"}),l.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]}),Av=e=>l.jsxs(We,{...e,children:[l.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),l.jsx("polyline",{points:"5 12 12 5 19 12"})]}),dd=[{to:"/",label:"Studio",Icon:vh,end:!0}],Mv=[{to:"/gallery",label:"Gallery",Icon:Lc},{to:"/tags",label:"Tag Library",Icon:Nt},{to:"/aliases",label:"Aliases",Icon:_c}],is=({isActive:e})=>["slim-nav-link btn-touch",e?"is-active":null].filter(Boolean).join(" ");function Ov(){const[e,t]=u.useState(!1),{pathname:n}=bt(),r=oh(),{logout:s,user:i}=Ii(),[o,a]=u.useState(!1),c=oi("(min-width: 768px)"),d=()=>t(x=>!x),m=()=>t(!1),y=!(n==="/login")&&c;u.useEffect(()=>{const x=p=>{var g;const f=!!((g=p==null?void 0:p.detail)!=null&&g.active);a(f)};return window.addEventListener("cozygen:render-state",x),()=>window.removeEventListener("cozygen:render-state",x)},[]);const v=async()=>{if(o)return;if(n==="/"||n==="/studio"){try{window.dispatchEvent(new Event("cozygen:request-render"))}catch{}return}if(!gh()){alert("No previous render found yet. Render once from Studio first.");return}a(!0);const p=await mh();a(!1),p!=null&&p.success||alert((p==null?void 0:p.error)||"Failed to render.")},w=()=>{try{s()}catch{}window.location.hash="#/login"},j=[...dd,...Mv];return l.jsxs("header",{className:"top-bar",children:[l.jsx("div",{className:"top-bar-shell",children:l.jsxs("div",{className:"brand-row",children:[l.jsxs(ih,{to:"/",className:"brand-mark",onClick:m,children:[l.jsx(yh,{size:28,className:"brand-logo"}),l.jsx("span",{className:"brand-text",children:"CozyGen"})]}),l.jsx("nav",{className:"desktop-nav","aria-label":"Main navigation",children:j.map(x=>l.jsx(cr,{to:x.to,end:x.end,className:is,children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[l.jsx(x.Icon,{size:16}),l.jsx("span",{children:x.label}),x.to==="/gallery"&&r?l.jsx("span",{className:"badge-dot","aria-hidden":"true"}):null]})},x.to))}),l.jsx("div",{className:"flex-1"}),y?l.jsxs("button",{type:"button",className:`desktop-render-btn ${o?"is-busy":""}`,onClick:v,title:o?"Rendering":"Render","aria-busy":o,"aria-disabled":o,disabled:o,children:[l.jsx("span",{className:"render-icon",children:o?l.jsx("span",{className:"render-spinner","aria-hidden":"true"}):l.jsx(Rc,{size:16})}),l.jsx("span",{className:"render-label",children:o?"Rendering":"Render"})]}):null,l.jsxs("button",{type:"button",className:"desktop-logout-btn",onClick:w,title:"Sign out",children:[l.jsx("span",{className:"logout-icon",children:l.jsx(sd,{size:16})}),l.jsx("span",{className:"logout-label",children:"Logout"}),i?l.jsxs("span",{className:"logout-user",children:["@",i]}):null]}),l.jsx("button",{type:"button",className:`mobile-menu-toggle btn-touch ${e?"is-active":""} md:hidden`,onClick:d,"aria-expanded":e,"aria-controls":"cozygen-mobile-nav","aria-label":e?"Close menu":"Open menu",children:l.jsx("span",{className:"mobile-menu-icon",children:l.jsx("span",{})})})]})}),l.jsxs("div",{id:"cozygen-mobile-nav",className:`mobile-nav-drawer md:hidden ${e?"is-open":""}`,role:"menu",children:[l.jsx("div",{className:"mobile-nav-section",children:dd.map(x=>l.jsx(cr,{to:x.to,end:x.end,className:is,onClick:m,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(x.Icon,{size:16}),l.jsx("span",{children:x.label})]})},x.to))}),l.jsxs("div",{className:"mobile-nav-section secondary",children:[l.jsx(cr,{to:"/gallery",className:is,onClick:m,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Lc,{size:16}),l.jsx("span",{children:"Gallery"}),r?l.jsx("span",{className:"badge-dot","aria-hidden":"true"}):null]})}),l.jsx(cr,{to:"/tags",className:is,onClick:m,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Nt,{size:16}),l.jsx("span",{children:"Tag Library"})]})}),l.jsx(cr,{to:"/aliases",className:is,onClick:m,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(_c,{size:16}),l.jsx("span",{children:"Aliases"})]})}),l.jsx("button",{type:"button",className:"slim-nav-link btn-touch text-left",onClick:()=>{m(),w()},role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(sd,{size:16}),l.jsx("span",{children:"Logout"}),i?l.jsxs("span",{className:"text-[rgba(159,178,215,0.75)] text-xs",children:["@",i]}):null]})})]})]})]})}const Fv=[{to:"#composer",label:"Compose",Icon:Pc,isComposer:!0},{to:"/gallery",label:"Gallery",Icon:Lc},{to:"/",label:"Studio",Icon:vh,end:!0},{to:"#library",label:"Library",Icon:Nt,isLibrary:!0},{to:"#render",label:"Render",Icon:Rc,isAction:!0}],Dv=({isActive:e})=>["bottom-nav-link",e?"is-active":""].filter(Boolean).join(" ");function Uv(){const e=bt(),t=Vr(),n=oh(),[r,s]=Ot.useState(!1),[i,o]=Ot.useState(!1),[a,c]=Ot.useState(!1),[d,m]=Ot.useState({}),h=Ot.useRef(null),y=Ot.useRef(null),v=e.pathname==="/"||e.pathname==="",w=async()=>{if(!(typeof window>"u")){if(!v){t("/studio"),setTimeout(()=>{try{window.dispatchEvent(new CustomEvent("cozygen:open-composer",{detail:{}}))}catch{}},0);return}try{window.dispatchEvent(new CustomEvent("cozygen:open-composer",{detail:{}}))}catch{}}},j=async()=>{if(!(typeof window>"u"))if(s(!0),setTimeout(()=>s(!1),400),v)try{window.dispatchEvent(new CustomEvent("cozygen:request-render"))}catch{}else{if(!gh())return;const x=await mh();x.success||console.warn("Requeue failed:",x.error)}};return Ot.useEffect(()=>{const x=p=>{var g;const f=!!((g=p==null?void 0:p.detail)!=null&&g.active);o(f),f&&(s(!0),setTimeout(()=>s(!1),400))};return window.addEventListener("cozygen:render-state",x),()=>window.removeEventListener("cozygen:render-state",x)},[]),Ot.useEffect(()=>{if(!a)return;const x=p=>{h.current&&h.current.contains(p.target)||y.current&&y.current.contains(p.target)||c(!1)};return window.addEventListener("pointerdown",x),()=>window.removeEventListener("pointerdown",x)},[a]),Ot.useEffect(()=>{if(!a||!y.current)return;const x=y.current.getBoundingClientRect(),p=x.left+x.width/2,f=window.innerHeight-x.top+8;m({left:`${Math.min(window.innerWidth-80,Math.max(40,p))}px`,bottom:`${f}px`})},[a]),l.jsxs(l.Fragment,{children:[l.jsx("nav",{className:"bottom-nav","aria-label":"Bottom navigation",children:Fv.map(x=>x.isAction?l.jsxs("button",{type:"button",className:`bottom-nav-link is-action ${r?"is-flash":""} ${i?"is-rendering":""}`,onClick:j,"aria-label":"Render",children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(Rc,{size:20})}),l.jsx("span",{className:"bottom-nav-label",children:"Render"})]},"render"):x.isComposer?l.jsxs("button",{type:"button",className:"bottom-nav-link",onClick:w,"aria-label":"Open composer",children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(Pc,{size:20})}),l.jsx("span",{className:"bottom-nav-label",children:"Compose"})]},"composer"):x.isLibrary?l.jsxs("button",{ref:y,type:"button",className:"bottom-nav-link",onClick:()=>c(p=>!p),"aria-expanded":a,"aria-label":"Open library",children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(Nt,{size:20})}),l.jsx("span",{className:"bottom-nav-label",children:"Library"})]},"library"):l.jsxs(cr,{to:x.to,end:x.end,className:Dv,children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(x.Icon,{size:20})}),l.jsxs("span",{className:"bottom-nav-label",children:[x.label,x.to==="/gallery"&&n?l.jsx("span",{className:"badge-dot pulse","aria-hidden":"true"}):null]})]},x.to))}),l.jsxs("div",{ref:h,className:`library-popover ${a?"is-open":""}`,style:d,children:[l.jsxs("button",{type:"button",className:"library-popover-btn",onClick:()=>{c(!1),t("/aliases")},children:[l.jsx(_c,{size:18}),l.jsx("span",{children:"Aliases"})]}),l.jsxs("button",{type:"button",className:"library-popover-btn",onClick:()=>{c(!1),t("/tags")},children:[l.jsx(Nt,{size:18}),l.jsx("span",{children:"Tags"})]})]})]})}function Bv(e,t){if(!t||t<=0)return null;const n=Number(e)||0,r=Number(t)||0,s=Math.round(n/r*100);return Number.isFinite(s)?Math.max(0,Math.min(100,s)):null}function Vv({busy:e=!1,progressValue:t=0,progressMax:n=0,statusText:r="Idle",statusPhase:s="idle",primaryLabel:i="Render",onPrimary:o,primaryDisabled:a=!1}){const c=Bv(t,n),d=s==="queued"?"rgba(255, 143, 112, 0.95)":s==="running"?"rgba(68, 225, 197, 0.95)":s==="finished"?"rgba(92, 255, 154, 0.95)":s==="error"?"rgba(255, 143, 112, 0.95)":"rgba(159, 178, 215, 0.55)",h={idle:"Idle",queued:"Queued",running:"Running",finished:"Finished",error:"Error"}[s]||"Status",y=e||a;return l.jsxs("div",{className:"dock-bar-inner",children:[l.jsx("button",{type:"button",onClick:o,disabled:y,className:"dock-primary-btn",children:e?"Rendering":i}),l.jsxs("div",{className:"dock-status-row",children:[l.jsxs("span",{className:"dock-status-left",children:[l.jsx("span",{className:"dock-status-dot",style:{background:d}}),l.jsx("span",{className:"dock-status-label",children:h})]}),l.jsxs("span",{className:"dock-status-right",children:[c!=null&&e?l.jsxs("span",{className:"dock-progress",children:[l.jsx("span",{className:"dock-progress-bar","aria-hidden":"true",children:l.jsx("span",{className:"dock-progress-fill",style:{width:`${c}%`}})}),l.jsxs("span",{children:[c,"%"]})]}):null,l.jsx("span",{className:"dock-status-text",children:r||(e?"Working":"Idle")})]})]})]})}const xh="jpg,jpeg,png,webp,gif,bmp,tif,tiff",Tc=(e="")=>/\.(png|jpe?g|gif|webp|bmp|tif?f)$/i.test(e),wh=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e);async function ho({subfolder:e="",page:t=1,perPage:n=50,exts:r=xh}={}){const s=new URLSearchParams({subfolder:e,page:String(t),per_page:String(n),exts:r}),i=await fetch(`/cozygen/input?${s.toString()}`);if(!i.ok)throw new Error(`Input list failed: ${i.status}`);return i.json()}const ci=e=>`/cozygen/input/file?path=${encodeURIComponent(e)}`,Sa="output::",Ti=(e="")=>e.replace(/\\/g,"/").replace(/^\/+/,"").replace(/\/+$/,""),jh=(e="")=>{const t=e.replace(/\\/g,"/").split("/").filter(Boolean);return t[t.length-1]||""},Wv=({subfolder:e="",filename:t=""}={})=>{const n=jh(t);if(!n)return"";const r=Ti(e);return`${Sa}${r}::${n}`},Na=(e="")=>{if(typeof e!="string"||!e.startsWith(Sa))return null;const t=e.slice(Sa.length);if(!t)return null;const n=t.lastIndexOf("::"),r=n===-1?t:t.slice(n+2);return r?{subfolder:n===-1?"":t.slice(0,n),filename:r}:null},ui=({filename:e="",subfolder:t="",type:n="output"}={})=>{const r=jh(e);return r?`/view?${new URLSearchParams({filename:r,subfolder:Ti(t),type:n||"output"}).toString()}`:""},ka=(e="")=>e.split("/").slice(0,-1).join("/"),Hv=e=>{if(typeof e!="string"||!e)return e!=null&&e.path?ka(e.path):"";const t=Na(e);return t?Ti(t.subfolder):ka(e)},fd=(e=[])=>e.map(t=>{const n=t.rel_path||t.name||"",r=t.name||n||"Untitled",s=!!t.is_dir,i=s?"":ci(n);return{...t,name:r,rel_path:n,is_dir:s,is_image:!s&&Tc(r),is_video:!s&&wh(r),source:"input",preview_url:i}}),Gv=(e=[])=>e.map(t=>{const n=t.filename||"",r=t.subfolder||"",s=t.type==="directory",i=s?r||n:[r,n].filter(Boolean).join("/"),o=n||r||i||"Untitled",a=s?"":ui({filename:n,subfolder:r,type:t.type});return{...t,name:o,rel_path:i,is_dir:s,is_image:!s&&Tc(n),is_video:!s&&wh(n),source:"output",preview_url:a}}),Wn={get(e,t){try{return(typeof window<"u"?JSON.parse(localStorage.getItem(e)):null)??t}catch{return t}},set(e,t){try{typeof window<"u"&&localStorage.setItem(e,JSON.stringify(t))}catch{}}};function Kv({input:e,value:t,onFormChange:n}){var H;const r=((H=e==null?void 0:e.inputs)==null?void 0:H.param_name)||"Image Input",s=(e==null?void 0:e.class_type)||"CozyGenImageInput",i=`cg_last_input_cwd::${r}`,o=`cg_last_picker_source::${r}`,[a,c]=u.useState(""),[d,m]=u.useState(!1),[h,y]=u.useState(!1),[v,w]=u.useState(Wn.get(i,"")),[j,x]=u.useState(1),[p,f]=u.useState(50),[g,N]=u.useState([]),[_,L]=u.useState(1),[F,z]=u.useState(!1),[k,W]=u.useState(""),[ie,ue]=u.useState([]),[re,xe]=u.useState(!0),[ee,ne]=u.useState(()=>Wn.get(o,"inputs")==="outputs"?"outputs":"inputs"),de=ee,$=u.useCallback(D=>{const M=D==="outputs"?"outputs":"inputs";ne(M),Wn.set(o,M),w(""),x(1)},[]),I=u.useMemo(()=>{if(a)try{const D=new URL(a,window.location.origin);return(D.searchParams.get("path")||D.searchParams.get("filename")||D.pathname.split("/").pop()||"").split("/").pop()||"No file selected."}catch{}if(!t)return"No file selected.";if(typeof t=="string"){const D=Na(t);return D!=null&&D.filename?D.filename.split("/").pop():t.split("/").pop()}return t!=null&&t.path?t.path.split("/").pop():"No file selected."},[a,t]);u.useEffect(()=>{if(typeof t=="string"&&t){const D=Na(t);D!=null&&D.filename?c(ui({filename:D.filename,subfolder:D.subfolder,type:"output"})):c(ci(t)),m(!1)}else t!=null&&t.url?(c(t.url),m(!1)):(c(""),m(!1))},[t]);const C=u.useCallback(async D=>{const M=await Sv(D),J=`/view?filename=${M.filename}&type=input`;c(J),m(!1),Wn.set(i,""),s==="CozyGenImageInput"?n(r,M.filename):n(r,{source:"Upload",path:M.filename,url:J})},[s,n,r]),b=u.useCallback(()=>{c(""),m(!1),s==="CozyGenImageInput"?n(r,""):n(r,{source:"Upload",path:"",url:""})},[s,n,r]),U=u.useCallback(()=>{const M=Hv(t)||Wn.get(i,"");w(M),x(1),y(!0)},[t]),A=u.useCallback(()=>{y(!1)},[]);u.useEffect(()=>{if(h){if(de!=="inputs"){ue([]);return}(async()=>{try{const D=await ho({subfolder:"",page:1,perPage:0,exts:""});ue((D.items||[]).filter(M=>M.is_dir))}catch{}})()}},[h,de]),u.useEffect(()=>{if(!h)return;let D=!1;async function M(){z(!0);try{if(de==="outputs"){const J=await uh(v,j,p);if(D)return;const te=Gv(J&&J.items||[]);D||(N(te),L(J&&J.total_pages||1))}else{const te=await ho({subfolder:v,page:j,perPage:p,exts:re?xh:""}),V=(te.items||[]).some(X=>!X.is_dir);if(re&&!V){const X=await ho({subfolder:v,page:j,perPage:p,exts:""});D||(N(fd(X.items||[])),L(X.total_pages||1),xe(!1));return}D||(N(fd(te.items||[])),L(te.total_pages||1))}}catch(J){console.error(de==="outputs"?"Failed to load output directory":"Failed to load input directory",J),D||(N([]),L(1))}finally{D||z(!1)}}return M(),()=>{D=!0}},[h,v,j,p,re,de]);const B=u.useMemo(()=>{const D=k.trim().toLowerCase();let M=g;return re&&(M=M.filter(J=>{if(J.is_dir)return!0;const te=J.name||J.filename||J.rel_path||"";return Tc(String(te))})),D?M.filter(J=>(J.name||J.filename||J.rel_path||"").toLowerCase().includes(D)):M},[g,k,re]),q=u.useCallback(D=>{if(!D)return;const M=typeof D=="object"?D:null;if(((M==null?void 0:M.source)||"inputs")==="output"){const X=Wv({subfolder:(M==null?void 0:M.subfolder)||"",filename:(M==null?void 0:M.filename)||(M==null?void 0:M.name)||""});if(!X)return;const Oe=(M==null?void 0:M.preview_url)||ui({filename:M==null?void 0:M.filename,subfolder:M==null?void 0:M.subfolder,type:M==null?void 0:M.type});c(Oe),m(!1),Wn.set(i,Ti((M==null?void 0:M.subfolder)||"")),s==="CozyGenImageInput"?n(r,X):n(r,{source:"OutputGallery",path:X,url:Oe}),y(!1);return}const te=typeof D=="string"?D:(M==null?void 0:M.rel_path)||(M==null?void 0:M.path)||"";if(!te)return;const V=(M==null?void 0:M.preview_url)||ci(te);c(V),m(!1),Wn.set(i,ka(te)),s==="CozyGenImageInput"?n(r,te):n(r,{source:"Server",path:te,url:V}),y(!1)},[s,n,r]);return{param:r,previewUrl:a,imgReady:d,setImgReady:m,displayName:I,serverOpen:h,openServer:U,closeServer:A,cwd:v,setCwd:w,page:j,setPage:x,perPage:p,setPerPage:f,totalPages:_,loading:F,search:k,setSearch:W,topDirs:ie,imagesOnly:re,setImagesOnly:xe,shownEntries:B,pickerSource:de,setPickerSource:$,handleUpload:C,clearImage:b,selectServer:q}}function xt({open:e,onClose:t,title:n,children:r,footer:s,variant:i="sheet",className:o="",contentClassName:a="",shouldCloseOnOverlayClick:c=!0,shouldCloseOnEsc:d=!0}){const m=u.useRef(!1),h=u.useMemo(()=>["bottom-sheet-content",i==="fullscreen"?"is-fullscreen":"is-sheet",a].filter(Boolean).join(" "),[a,i]),y=u.useMemo(()=>["bottom-sheet-overlay",o].filter(Boolean).join(" "),[o]);return u.useEffect(()=>{if(!e||!d)return;const v=w=>{w.key==="Escape"&&(t==null||t())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[e,t,d]),!e||typeof document>"u"?null:Sc.createPortal(l.jsx("div",{className:y,role:"presentation",onPointerDown:v=>{m.current=v.target===v.currentTarget},onClick:v=>{c&&m.current&&v.target===v.currentTarget&&(t==null||t())},children:l.jsx("div",{className:h,role:"dialog","aria-modal":"true","aria-label":n||"Sheet",onClick:v=>v.stopPropagation(),children:l.jsxs("div",{className:"bottom-sheet-panel",children:[l.jsxs("header",{className:"bottom-sheet-head",children:[l.jsx("div",{className:"bottom-sheet-title",children:n||""}),l.jsx("button",{type:"button",className:"bottom-sheet-close",onClick:t,"aria-label":"Close",children:""})]}),l.jsx("div",{className:"bottom-sheet-body",children:r}),s?l.jsx("footer",{className:"bottom-sheet-foot",children:s}):null]})})}),document.body)}function Qv({open:e,cwd:t,setCwd:n,page:r,setPage:s,perPage:i,setPerPage:o,totalPages:a,topDirs:c,loading:d,imagesOnly:m,setImagesOnly:h,search:y,setSearch:v,shownEntries:w,onSelect:j,onClose:x,pickerSource:p,setPickerSource:f}){if(!e)return null;const g=p||"inputs",N=typeof f=="function",_=()=>{n(""),s(1)},L=k=>{N&&k!==g&&(f(k),n(""),s(1))},F=t.split("/").filter(Boolean),z=g==="outputs"?"Choose output":"Choose input";return l.jsx(xt,{open:e,onClose:x,title:z,variant:"fullscreen",footer:l.jsxs("div",{className:"flex items-center gap-2 w-full",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",disabled:r<=1||d,onClick:()=>s(k=>Math.max(1,k-1)),children:"Prev"}),l.jsxs("div",{className:"text-xs text-center text-[rgba(159,178,215,0.75)] min-w-[92px]",children:[r," / ",a]}),l.jsx("button",{type:"button",className:"ui-button is-muted w-full",disabled:r>=a||d,onClick:()=>s(k=>k<a?k+1:k),children:"Next"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Location"}),l.jsxs("div",{className:"imagepicker-breadcrumb",children:[l.jsx("button",{type:"button",className:"imagepicker-crumb",onClick:_,children:"Root"}),F.map((k,W)=>{const ie=F.slice(0,W+1).join("/");return l.jsx("button",{type:"button",className:"imagepicker-crumb",onClick:()=>{n(ie),s(1)},children:k},ie)})]})]}),N?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Source"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",className:`ui-button is-compact ${g==="inputs"?"is-primary":"is-muted"}`,onClick:()=>L("inputs"),children:"Inputs"}),l.jsx("button",{type:"button",className:`ui-button is-compact ${g==="outputs"?"is-primary":"is-muted"}`,onClick:()=>L("outputs"),children:"Outputs"})]})]}):null,l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Filters"}),l.jsxs("div",{className:"composer-filters",children:[l.jsxs("label",{className:"inline-flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:m,onChange:k=>{h(k.target.checked),s(1)}}),l.jsx("span",{className:"text-sm text-[rgba(159,178,215,0.85)]",children:"Images only"})]}),l.jsx("input",{type:"search",value:y,onChange:k=>v(k.target.value),placeholder:"Search files",className:"sheet-input ui-control ui-input"}),l.jsxs("select",{className:"sheet-select ui-control ui-select",value:i,onChange:k=>{const W=parseInt(k.target.value,10)||50;o(W),s(1)},"aria-label":"Items per page",children:[l.jsx("option",{value:25,children:"25"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]})]}),c.length>0?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Quick folders"}),l.jsxs("div",{className:"imagepicker-chips",children:[l.jsx("button",{type:"button",className:`gallery-pill ${t===""?"is-active":""}`,onClick:_,children:"Root"}),c.map(k=>l.jsx("button",{type:"button",className:`gallery-pill ${t===k.rel_path?"is-active":""}`,onClick:()=>{n(k.rel_path),s(1)},children:k.name},k.rel_path))]})]}):null,l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Results"}),d?l.jsxs("div",{className:"sheet-hint",children:["Scanning ",g==="outputs"?"output":"input"," folders"]}):w.length===0?l.jsx("div",{className:"sheet-hint",children:"Nothing here yet. Try a different folder or turn off Images only."}):null,l.jsx("div",{className:"imagepicker-grid",children:!d&&w.map(k=>{const W=`${k.source||"input"}::${k.rel_path||k.name}`,ie=k.is_dir?"":k.preview_url||(k.source==="output"?ui({filename:k.filename,subfolder:k.subfolder,type:k.type}):ci(k.rel_path||""));return l.jsx("button",{type:"button",className:`imagepicker-item ${k.is_dir?"is-dir":""}`,onClick:()=>{k.is_dir?(n(k.rel_path||""),s(1)):j(k)},children:k.is_dir?l.jsxs("div",{className:"imagepicker-dir-row",children:[l.jsx("div",{className:"imagepicker-dir-dot","aria-hidden":"true"}),l.jsx("div",{className:"imagepicker-name",children:k.name})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"imagepicker-thumb",children:ie?l.jsx("img",{className:"imagepicker-img",alt:k.name,src:ie}):l.jsx("div",{className:"imagepicker-img is-placeholder"})}),l.jsx("div",{className:"imagepicker-name",children:k.name})]})},W)})})]})]})})}function Yv({open:e,onClose:t,title:n,url:r,kind:s="image"}){return r?l.jsx(xt,{open:e,onClose:t,title:n||"Preview",variant:"fullscreen",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("a",{href:r,target:"_blank",rel:"noreferrer",className:"ui-button is-muted w-full text-center",children:"Open"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Close"})]}),children:l.jsx("div",{className:"url-viewer-stage",children:s==="video"?l.jsx("video",{src:r,controls:!0,className:"url-viewer-media",autoPlay:!0}):l.jsx("img",{src:r,alt:n||"Preview",className:"url-viewer-media"})})}):null}function Xv({input:e,value:t,onFormChange:n}){const{previewUrl:r,imgReady:s,setImgReady:i,displayName:o,serverOpen:a,openServer:c,closeServer:d,cwd:m,setCwd:h,page:y,setPage:v,perPage:w,setPerPage:j,totalPages:x,topDirs:p,loading:f,search:g,setSearch:N,imagesOnly:_,setImagesOnly:L,shownEntries:F,pickerSource:z,setPickerSource:k,handleUpload:W,clearImage:ie,selectServer:ue}=Kv({input:e,value:t,onFormChange:n}),re=u.useRef(null),xe=u.useRef(null),[ee,ne]=u.useState(0),[de,$]=u.useState(!1);u.useEffect(()=>{const b=xe.current;if(!b)return;const U=B=>{B.preventDefault(),B.stopPropagation()},A=async B=>{var H,D;U(B);const q=(D=(H=B.dataTransfer)==null?void 0:H.files)==null?void 0:D[0];q&&(await W(q),re.current&&(re.current.value=""),ne(M=>M+1))};return["dragenter","dragover","dragleave","drop"].forEach(B=>b.addEventListener(B,B==="drop"?A:U)),()=>{["dragenter","dragover","dragleave","drop"].forEach(B=>b.removeEventListener(B,B==="drop"?A:U))}},[W]);const I=async b=>{var A;const U=(A=b.target.files)==null?void 0:A[0];U&&(await W(U),re.current&&(re.current.value=""),ne(B=>B+1))},C=()=>{re.current&&re.current.click()};return l.jsxs("div",{className:"asset-card",children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[l.jsx("h3",{className:"text-sm font-semibold text-[#F8F4FF] truncate",children:o}),l.jsx("span",{className:"text-[11px] text-[#C3C7FFB3] truncate",children:"Image"})]}),l.jsx("div",{ref:xe,className:"mb-3 rounded-xl border border-dashed border-[rgba(255,255,255,0.14)] bg-[rgba(255,255,255,0.02)] flex items-center justify-center min-h-[140px] sm:min-h-[180px] overflow-hidden",children:r?l.jsx("button",{type:"button",className:"asset-preview-btn",onClick:()=>$(!0),"aria-label":`Preview ${o}`,title:"Open preview",children:l.jsx("img",{src:r,alt:o,className:`max-h-64 max-w-full object-contain transition-opacity ${s?"opacity-100":"opacity-0"}`,onLoad:()=>i(!0)})}):l.jsx("div",{className:"text-[11px] text-[#9DA3FFCC] text-center px-6",children:"Drop an image here, upload from your device, or choose one from your server."})}),l.jsx("input",{ref:re,type:"file",accept:"image/*",className:"hidden",onChange:I},ee),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:"ui-button is-primary is-compact",onClick:c,children:"Choose"}),l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:C,children:"Upload"}),l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:ie,children:"Clear"})]}),l.jsx(Qv,{open:a,cwd:m,setCwd:h,page:y,setPage:v,perPage:w,setPerPage:j,totalPages:x,topDirs:p,loading:f,imagesOnly:_,setImagesOnly:L,search:g,setSearch:N,shownEntries:F,pickerSource:z,setPickerSource:k,onSelect:ue,onClose:d}),l.jsx(Yv,{open:de,onClose:()=>$(!1),title:o||"Preview",url:r,kind:"image"})]})}function qv({open:e,onClose:t,title:n,description:r,render:s,index:i=0,total:o=0,children:a}){const[c,d]=u.useState("idle");if(u.useEffect(()=>{if(c==="queued"){const h=setTimeout(()=>d("idle"),1600);return()=>clearTimeout(h)}},[c]),!e)return null;const m=typeof s=="function"?s():a;return l.jsxs("div",{className:"spotlight-overlay",role:"dialog","aria-modal":"true",children:[l.jsx("div",{className:"spotlight-backdrop",onClick:t}),l.jsxs("div",{className:"spotlight-sheet",children:[l.jsxs("div",{className:"spotlight-header",children:[l.jsxs("div",{className:"spotlight-meta",children:[l.jsx("div",{className:"spotlight-kicker",children:"Focused control"}),l.jsx("div",{className:"spotlight-title",children:n||"Control"}),r?l.jsx("div",{className:"spotlight-hint",children:r}):null]}),l.jsx("button",{type:"button",className:"spotlight-close",onClick:t,"aria-label":"Close",children:""})]}),l.jsx("div",{className:"spotlight-body",children:m}),l.jsx("div",{className:"spotlight-footer",children:l.jsx("div",{className:"spotlight-footer-right",children:l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:t,"aria-label":"Close",children:"Close"})})})]})]})}function cn(e){const t=Number(e);return Number.isFinite(t)?t.toFixed(2).replace(/\.?0+$/u,""):"1"}function Jv(e=""){const t=String(e||"");if(!t.trim())return[];const n=[];let r=0;for(;r<t.length;){for(;r<t.length&&/[\s,]/.test(t[r]);)r++;if(r>=t.length)break;let s=r,i=r,o="tag",a="";const c=t[r]==="(";if(c&&(s=r,r++),t[r]==="$"){o="alias";const d=r;for(r++;r<t.length&&t[r]!=="$"&&t[r]!==","&&t[r]!==`
`;)a+=t[r],r++;t[r]==="$"&&r++,c||(s=d)}else{o="tag";const d=r;for(;r<t.length&&!(t[r]===","||t[r]==="$"||t[r]===`
`||c&&t[r]===":"||!c&&t[r]==="(");)a+=t[r],r++;a=a.trim(),c||(s=d)}if(c&&t[r]===":"){for(r++;r<t.length&&t[r]!==")"&&t[r]!==","&&t[r]!==`
`;)r++;t[r]===")"&&r++}i=r,a&&n.push({type:o,text:a,start:s,end:i})}return n}function pd(e="",t){if(!t||typeof t.start!="number"||typeof t.end!="number")return null;const r=String(e||"").slice(t.start,t.end);if(!r.startsWith("(")||!r.includes(":"))return null;const s=r.lastIndexOf(":");if(s===-1)return null;const i=r.slice(s+1);if(!i.endsWith(")"))return null;const o=i.slice(0,-1).trim();if(!/^\d+(\.\d+)?$/u.test(o))return null;const a=Number.parseFloat(o);return Number.isFinite(a)?{weight:a,wrapperStart:t.start,wrapperEnd:t.end}:null}function hd(e="",t,n){const r=String(e||"");if(!t||typeof t.start!="number"||typeof t.end!="number")return r;const s=n==null?null:Number(n),i=s===null||!Number.isFinite(s)||Math.abs(s-1)<1e-6,o=t.type==="alias"?`$${t.text}$`:t.text;if(i)return r.slice(0,t.start)+o+r.slice(t.end);const a=cn(s),c=`(${o}:${a})`;return r.slice(0,t.start)+c+r.slice(t.end)}function Zv(e="",t,n,r){var y;if(n===r||n===null||r===null||!(t!=null&&t.length))return e;const s=String(e||""),i=t.map(v=>({start:v.start,end:v.end,text:s.slice(v.start,v.end)})),o=i.slice(0,-1).map((v,w)=>{const j=i[w+1];return s.slice(v.end,j.start)}),a=i.length?s.slice(0,i[0].start):"",c=i.length?s.slice(i[i.length-1].end):"",d=[...i],[m]=d.splice(n,1);d.splice(r,0,m);let h=a+(((y=d[0])==null?void 0:y.text)||"");for(let v=1;v<d.length;v++)h+=(o[v-1]??", ")+d[v].text;return h+=c,h}function ex(e="",t){const n=String(e||"");if(!t||typeof t.start!="number"||typeof t.end!="number")return n;const r=n.slice(0,t.start).replace(/[\s,]*$/,""),s=n.slice(t.end).replace(/^[\s,]*/,"");return r?`${r}, ${s}`.trim():s.trim()}function ur(e="",t){if(!t||typeof t.index!="number"||typeof t.length!="number")return null;const n=String(e||""),r=t.index,s=t.index+t.length;if(r<=0||n[r-1]!=="("||n[s]!==":")return null;let i=s+1,o="";for(;i<n.length&&n[i]!==")";)if(o+=n[i],i+=1,o.length>12)return null;if(i>=n.length||n[i]!==")")return null;const a=o.trim();if(!/^\d+(\.\d+)?$/u.test(a))return null;const c=Number.parseFloat(a);return Number.isFinite(c)?{weight:c,wrapperStart:r-1,wrapperEnd:i+1}:null}function vl(e="",t,n){const r=String(e||"");if(!t||typeof t.index!="number"||typeof t.length!="number")return r;const s=t.index,i=t.index+t.length,o=ur(r,t),a=n==null?null:Number(n),c=a===null||!Number.isFinite(a)||Math.abs(a-1)<1e-6;if(o){if(c)return r.slice(0,o.wrapperStart)+r.slice(s,i)+r.slice(o.wrapperEnd);const m=cn(a);return r.slice(0,i+1)+m+r.slice(o.wrapperEnd-1)}if(c)return r;const d=cn(a);return r.slice(0,s)+"("+r.slice(s,i)+":"+d+")"+r.slice(i)}function xl(e,t,n){const r=Number(e);return Number.isFinite(r)?Math.max(t,Math.min(n,r)):t}function Ca({open:e,onClose:t,title:n="Alias strength",tokenLabel:r="",weight:s=1,onApply:i,onRemoveWeight:o,onDeleteToken:a}){const c=u.useMemo(()=>xl(s||1,.2,2),[s]),[d,m]=u.useState(c);u.useEffect(()=>{e&&m(c)},[e,c]);const h=cn(d);return l.jsx(xt,{open:e,onClose:t,title:n,footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:t,children:"Cancel"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>{i==null||i(d),t==null||t()},children:"Done"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Alias"}),l.jsx("div",{className:"sheet-hint",children:r||""})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Strength"}),l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>m(y=>xl(y-.05,.2,2)),children:""}),l.jsxs("div",{className:"text-sm text-[rgba(237,242,255,0.92)] tabular-nums",children:[h,""]}),l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>m(y=>xl(y+.05,.2,2)),children:"+"})]}),l.jsx("input",{type:"range",min:.2,max:2,step:.05,value:d,onChange:y=>m(xl(y.target.value,.2,2)),className:"w-full","aria-label":"Alias strength"}),l.jsx("div",{className:"sheet-hint",children:"1.0 is normal. Increase to emphasize or reduce to soften."})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Actions"}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>m(1),children:"Reset to 1.0"}),l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>{o==null||o(),t==null||t()},children:"Remove strength"}),l.jsx("button",{type:"button",className:"ui-button is-danger is-compact",onClick:()=>{a==null||a(),t==null||t()},children:"Remove alias"})]})]})]})})}function Kn(e){const t=String(e||"").trim();if(!t)return"";const n=t.toLowerCase(),r={scifi:"Sci-Fi",sci:"Sci",ui:"UI",vfx:"VFX",hdr:"HDR",dof:"DoF",bokeh:"Bokeh",vhs:"VHS",jpeg:"JPEG",jpg:"JPG",png:"PNG",gif:"GIF",webp:"WebP",api:"API",nsfw:"NSFW",sfw:"SFW",sfx:"SFX",fx:"FX",lora:"LoRA",loras:"LoRAs",ip:"IP",egirl:"E-girl",i2v:"I2V",t2i:"T2I",img2img:"Img2Img",txt2img:"Txt2Img",tts:"TTS",asmr:"ASMR",ai:"AI",highleg:"High-Leg","one-piece":"One-Piece","three-quarter":"Three-Quarter"};return r[n]?r[n]:/^\d+$/.test(n)?n:n==="3d"?"3D":n==="2d"?"2D":n.length===1?n.toUpperCase():n.charAt(0).toUpperCase()+n.slice(1)}function tx(e=""){const t=String(e||"").trim().toLowerCase();return t?t.startsWith("flirty_")?"flirty":t.startsWith("action_")||t.startsWith("dynamic_")||t.startsWith("stealth_")||t.startsWith("athletic_")||t.startsWith("running_")||t.startsWith("walking_")?"action":t.startsWith("sleepy_")||t.startsWith("relaxed_")||t.startsWith("reclining_")||t.startsWith("sitting_")||t.startsWith("kneeling_")?"rest":t.startsWith("happy_")||t.startsWith("sad_")||t.startsWith("angry_")||t.startsWith("nervous_")||t.startsWith("smug_")||t.startsWith("surprised_")||t.startsWith("scared_")||t.startsWith("tipsy_")?"emotion":t.startsWith("composed_")||t.startsWith("contemplative_")||t.startsWith("looking_")?"posed":"everyday":""}function nx(e=""){const t=String(e||"").trim().toLowerCase();if(!t)return"";const n=t.split("_")[0]||"";return n==="lingerie"?"lingerie":n==="swimwear"||n==="swim"?"swimwear":n==="costumes"||n==="tech"?"costumes":n==="uniform"?"uniform":n==="formal"?"formal":n==="alt"?"alt":n==="casual"||n==="street"||n==="lounge"||n==="sporty"||n==="dress"?"everyday":n||"everyday"}function rx(e=""){const t=String(e||"").trim().toLowerCase();if(!t)return"";const n=t.split("_")[0]||"";return["fire","candlelight","embers"].includes(n)?"fire":["moonlight"].includes(n)?"night":["neon"].includes(n)?"neon":["studio","stage","sidelighting","dim"].includes(n)?"studio":["golden","sunbeam","dappled"].includes(n)?"natural":["lens","light"].includes(n)?"effects":n||"other"}function fs(e="",t=""){const n=String(e||"").trim(),r=String(t||"").trim().toLowerCase();if(!n)return"";if(r==="outfit")return nx(n)||"everyday";if(r==="pose")return tx(n)||"everyday";if(r==="lighting")return rx(n)||"effects";const s=n.indexOf("_");return s<=0?"":n.slice(0,s).trim()}function Sh(e=""){const t=String(e||"").trim();return t?t.includes(":")?t.split(":").slice(1).join(":"):t:""}function Tl({token:e="",name:t=""}={}){const n=String(t||"").trim()||Sh(e);if(!n)return"";let s=n.replace(/_(\d+)$/u,"").split("_").filter(Boolean);if(s.length===0)return n;const i=[];for(let h=0;h<s.length;h++){const y=s[h],v=s[h+1];if(y&&v&&y.toLowerCase()==="one"&&v.toLowerCase()==="piece"){i.push("one-piece"),h+=1;continue}if(y&&v&&y.toLowerCase()==="three"&&v.toLowerCase()==="quarter"){i.push("three-quarter"),h+=1;continue}i.push(y)}if(s=i,Array.from(new Set(s.map(h=>String(h).toLowerCase()))).length===1)return Kn(s[0]);const a=s[0],c=s.slice(1),d=Kn(a),m=c.map(Kn).join(" ").trim();return m?m.toLowerCase()===d.toLowerCase()?c.length===1&&String(c[0]).toLowerCase()===String(a).toLowerCase()?d||n:s.map(Kn).join(" ").trim()||n:`${d} - ${m}`:s.map(Kn).join(" ").trim()||n}function zc(e){if(!e)return{subcategory:"",displayName:""};const t=e.name||"",n=e.token||"",r=Sh(n)||t,s=fs(r,e.category)||"other",i=Tl({token:n,name:t})||n||t||"Alias";return{subcategory:s,displayName:i}}function ln(e=""){const t=String(e||"").trim();return t?t==="All"?"All":{action:"Actions",camera:"Camera",body:"Body",char:"Characters",mood:"Mood",outfit:"Outfits",pose:"Poses",prop:"Props",scene:"Scenes",weather:"Weather",style:"Style",hair:"Hair",lighting:"Lighting"}[t]||Kn(t):""}function An(e=""){const t=String(e||"").trim();return t?t==="All"?"All":t.split(/[_-]+/u).filter(Boolean).map(n=>Kn(n)).join(" ").trim():""}function sx(e){var n,r;const t=String(e||"");if(!t)return!1;try{return(r=(n=navigator.clipboard)==null?void 0:n.writeText)==null||r.call(n,t),!0}catch{return!1}}function lx({open:e,onClose:t,value:n="",onChange:r,aliasOptions:s=[],aliasCatalog:i=[],aliasLookup:o,fieldLabel:a="Prompt"}){var Oc,Fc,Dc;const c=u.useRef(null),d=u.useRef(null),m=u.useRef(null),[h,y]=u.useState(n),[v,w]=u.useState(""),[j,x]=u.useState("All"),[p,f]=u.useState("All"),[g,N]=u.useState(30),[_,L]=u.useState("compose"),[F,z]=u.useState(null),[k,W]=u.useState(null),ie=u.useRef(null),ue=u.useRef(null),[re,xe]=u.useState(!1),[ee,ne]=u.useState(null),de=u.useRef(null),$=u.useRef(null),[I,C]=u.useState(""),[b,U]=u.useState(""),[A,B]=u.useState("count"),[q,H]=u.useState([]),[D,M]=u.useState([]),[J,te]=u.useState(0),[V,X]=u.useState(0),[Oe,ye]=u.useState(!1),[Ne,ve]=u.useState(!1),[je,ke]=u.useState(""),[se,we]=u.useState(""),[he,Ce]=u.useState([]),[Le,Pe]=u.useState(!1),[T,Y]=u.useState(""),ce=u.useRef(null);u.useEffect(()=>{e&&(y(n),L("compose"),w(""),x("All"),f("All"),N(30),z(null),W(null),xe(!1),ne(null),C(""),U(""),B("count"),M([]),te(0),X(0),ye(!1),ve(!1),ke(""),we(""))},[e,n]);const me=u.useMemo(()=>(Array.isArray(i)?i.filter(E=>E&&E.name):[]).map(E=>({...E,...zc(E)})),[i]),Te=u.useMemo(()=>{const E=new Map;return me.forEach(O=>{O!=null&&O.token&&E.set(String(O.token).toLowerCase(),O)}),E},[me]),Ke=u.useMemo(()=>{const E=new Set(["All"]);return me.forEach(O=>{O.category&&E.add(O.category)}),Array.from(E).sort((O,ae)=>O.localeCompare(ae))},[me]),Re=u.useMemo(()=>{const E=new Set(["All"]);return me.forEach(O=>{(!j||j==="All"||O.category===j)&&O.subcategory&&E.add(O.subcategory)}),Array.from(E).sort((O,ae)=>O.localeCompare(ae))},[me,j]),Lt=u.useMemo(()=>["All",...Ke.filter(E=>E!=="All")],[Ke]),P=u.useMemo(()=>["All",...Re.filter(E=>E!=="All")],[Re]),K=u.useMemo(()=>{const E=v.trim().toLowerCase();return me.filter(O=>{var ae,ge,Ie,Xe;return j!=="All"&&(O.category||"")!==j||p!=="All"&&(O.subcategory||"other")!==p?!1:E?((ae=O.token)==null?void 0:ae.toLowerCase().includes(E))||((ge=O.text)==null?void 0:ge.toLowerCase().includes(E))||((Ie=O.name)==null?void 0:Ie.toLowerCase().includes(E))||((Xe=O.displayName)==null?void 0:Xe.toLowerCase().includes(E)):!0}).sort((O,ae)=>{const ge=(O.subcategory||"").toLowerCase(),Ie=(ae.subcategory||"").toLowerCase();return ge!==Ie?ge.localeCompare(Ie):O.token.localeCompare(ae.token)})},[me,j,p,v]),S=u.useMemo(()=>K.slice(0,g),[K,g]);u.useEffect(()=>{N(30)},[j,p,v,me]),u.useEffect(()=>{f("All")},[j]),u.useEffect(()=>{const E=m.current;if(!E)return;const O=new IntersectionObserver(ae=>{ae[0].isIntersecting&&g<K.length&&N(Ie=>Math.min(Ie+20,K.length))},{threshold:.1});return O.observe(E),()=>O.disconnect()},[g,K.length]);const R=u.useMemo(()=>_!=="compose"?[]:typeof h!="string"?[]:Jv(h),[_,h]),G=u.useDeferredValue(h),Z=u.useMemo(()=>{const O=ge=>ge&&ge.length>2600?`${ge.slice(0,2600)}`:ge;if(_!=="compose")return"";const ae=G||"";if(!ae)return"";if(!o||!ae.includes("$"))return O(ae);try{const ge=ae.replace(/\$([a-z0-9_:-]+)\$/gi,(Ie,Xe)=>{const $e=o.get(Xe.toLowerCase());return typeof $e=="string"?$e:Ie});return O(ge)}catch{return O(ae)}},[_,G,o]);u.useEffect(()=>{if(!e||_!=="tags"||q.length>0)return;let E=!1;return(async()=>{try{const O=await dh();if(E)return;H(Array.isArray(O==null?void 0:O.categories)?O.categories:[])}catch(O){console.error("Failed to load tag categories",O),E||H([])}})(),()=>{E=!0}},[e,_,q.length]);const pe=u.useCallback(async({nextQuery:E,nextCategory:O,nextSort:ae}={})=>{const ge=typeof E=="string"?E:I,Ie=typeof O=="string"?O:b,Xe=typeof ae=="string"?ae:A;ye(!0),ke(""),we(""),X(0);try{const $e=await ii({q:ge,category:Ie,sort:Xe,limit:80,offset:0});M(($e==null?void 0:$e.items)||[]),te(Number(($e==null?void 0:$e.total)||0))}catch($e){console.error("Failed to search tags",$e),ke("Unable to load tags right now."),M([]),te(0)}finally{ye(!1)}},[b,I,A]),oe=u.useCallback(async()=>{if(Oe||Ne||D.length>=J)return;const E=V+80;ve(!0),ke("");try{const O=await ii({q:I,category:b,sort:A,limit:80,offset:E}),ae=(O==null?void 0:O.items)||[];M(ge=>[...ge,...ae]),te(Number((O==null?void 0:O.total)||0)),X(E)}catch(O){console.error("Failed to load more tags",O),ke("Unable to load more tags.")}finally{ve(!1)}},[b,Oe,Ne,V,I,A,D.length,J]);u.useEffect(()=>{if(!e||_!=="tags")return;const E=window.setTimeout(()=>{pe()},220);return()=>window.clearTimeout(E)},[e,_,I,b,A,pe]),u.useEffect(()=>{if(!e||_!=="tags")return;const E=$.current;if(!E||typeof IntersectionObserver>"u")return;const O=new IntersectionObserver(ae=>{const ge=ae[0];ge!=null&&ge.isIntersecting&&oe()},{threshold:.1});return O.observe(E),()=>O.disconnect()},[e,_,oe]);const fe=J?`${D.length.toLocaleString()} / ${J.toLocaleString()}`:`${D.length.toLocaleString()}`,be=E=>{y(E.target.value)},$t=E=>{const O=c.current,ae=`$${E}$`,ge=h||"",Ie=(O==null?void 0:O.selectionStart)??ge.length,Xe=(O==null?void 0:O.selectionEnd)??ge.length,$e=ge.slice(0,Ie),He=ge.slice(Xe),Gt=$e.match(/[^\s]$/),Kr=He.match(/^[^\s]/),Qr=Gt&&Gt[0]!==","?", ":"",Yr=Kr&&Kr[0]!==","?", ":"",Mi=$e+Qr+ae+Yr+He;y(Mi);const Xr=($e+Qr+ae+Yr).length;requestAnimationFrame(()=>{var qr;try{(qr=O==null?void 0:O.setSelectionRange)==null||qr.call(O,Xr,Xr)}catch{}})},Qe=u.useCallback(E=>{const O=String(E||"").trim();O&&Ce(ae=>new Set(ae.map(Ie=>Ie.toLowerCase())).has(O.toLowerCase())?ae:[...ae,O])},[]),lt=u.useMemo(()=>he.join(", "),[he]),At=u.useCallback(()=>{var O,ae;if(!he.length){Y("No tags to copy.");return}if(sx(lt)){Y(`Copied ${he.length} tag${he.length===1?"":"s"}.`);return}const E=ce.current;if(E)try{E.value=lt,E.removeAttribute("readonly"),E.select(),E.setSelectionRange(0,lt.length);const ge=document.execCommand&&document.execCommand("copy");if(E.setAttribute("readonly","readonly"),(ae=(O=window.getSelection())==null?void 0:O.removeAllRanges)==null||ae.call(O),ge){Y(`Copied ${he.length} tag${he.length===1?"":"s"}.`);return}}catch{}Y("Copy not available on this browser.")},[he,lt]),Vn=u.useCallback(()=>{Ce([]),Y("Cleared collected tags.")},[]),Ai=u.useCallback(E=>{const O=String(E||"").trim().toLowerCase();O&&Ce(ae=>ae.filter(ge=>ge.toLowerCase()!==O))},[]),Hr=u.useCallback(()=>{Pe(!0)},[]),Js=E=>{const O=c.current,ae=String(E||"").trim();if(!ae)return;const ge=h||"",Ie=(O==null?void 0:O.selectionStart)??ge.length,Xe=(O==null?void 0:O.selectionEnd)??ge.length,$e=ge.slice(0,Ie),He=ge.slice(Xe),Gt=$e.match(/[^\s]$/),Kr=He.match(/^[^\s]/),Qr=Gt&&Gt[0]!==","?", ":"",Yr=Kr&&Kr[0]!==","?", ":"",Mi=$e+Qr+ae+Yr+He;y(Mi),we(`Added: ${ae}`),Qe(ae);const Xr=($e+Qr+ae+Yr).length;Qe(ae),requestAnimationFrame(()=>{var qr;try{(qr=O==null?void 0:O.setSelectionRange)==null||qr.call(O,Xr,Xr)}catch{}})},Gr=E=>{y(O=>ex(O||"",E))},Zs=E=>{if(!E)return;let O=E.text;if(E.type==="alias"){const ge=Te.get(E.text.toLowerCase());O=(ge==null?void 0:ge.displayName)||E.text}const ae=pd(h||"",E);ne({element:E,displayName:O,weight:(ae==null?void 0:ae.weight)??1}),xe(!0)},el=u.useCallback((E,O)=>{E===O||E===null||O===null||R!=null&&R.length&&y(ae=>Zv(ae||"",R,E,O))},[R]),Th=u.useCallback((E,O)=>{z(O),ie.current=E.target,E.dataTransfer.effectAllowed="move",E.dataTransfer.setData("text/plain",O.toString()),requestAnimationFrame(()=>{ie.current&&ie.current.classList.add("is-dragging")})},[]),zh=u.useCallback(()=>{ie.current&&ie.current.classList.remove("is-dragging"),F!==null&&k!==null&&F!==k&&el(F,k),z(null),W(null),ie.current=null},[F,k,el]),$h=u.useCallback((E,O)=>{E.preventDefault(),E.dataTransfer.dropEffect="move",O!==k&&W(O)},[k]),Ah=u.useCallback(()=>{},[]),Mh=u.useCallback((E,O)=>{var Ie,Xe;if(!((Xe=(Ie=E.target)==null?void 0:Ie.closest)==null?void 0:Xe.call(Ie,".composer-token-drag-handle")))return;const ge=E.touches[0];ue.current={idx:O,startX:ge.clientX,startY:ge.clientY,moved:!1}},[]),Oh=u.useCallback(E=>{if(!ue.current)return;const O=E.touches[0],ae=Math.abs(O.clientX-ue.current.startX),ge=Math.abs(O.clientY-ue.current.startY);if(ae>10||ge>10){ue.current.moved=!0,z(ue.current.idx),E.preventDefault();const Ie=document.querySelectorAll(".composer-token-draggable"),Xe=O.clientX,$e=O.clientY;for(let He=0;He<Ie.length;He++){const Gt=Ie[He].getBoundingClientRect();if(Xe>=Gt.left&&Xe<=Gt.right&&$e>=Gt.top&&$e<=Gt.bottom){W(He);break}}}},[]),Fh=u.useCallback(()=>{var E;(E=ue.current)!=null&&E.moved&&F!==null&&k!==null&&F!==k&&el(F,k),ue.current=null,z(null),W(null)},[F,k,el]),Dh=()=>{r==null||r(h),t==null||t()},Mc=()=>{t==null||t()};return e?l.jsxs(xt,{open:e,onClose:Mc,title:"Composer",variant:"fullscreen",shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:Mc,children:"Cancel"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:Dh,children:"Apply"})]}),children:[l.jsxs("div",{className:"composer-shell",children:[l.jsxs("div",{className:"composer-subhead",children:[l.jsx("div",{className:"sheet-label",children:"Editing"}),l.jsx("div",{className:"composer-field",children:a})]}),l.jsxs("div",{className:"composer-tabs",role:"tablist","aria-label":"Composer tabs",children:[l.jsx("button",{type:"button",role:"tab","aria-selected":_==="compose",className:`composer-tab ${_==="compose"?"is-active":""}`,onClick:()=>L("compose"),children:"Compose"}),l.jsxs("button",{type:"button",role:"tab","aria-selected":_==="aliases",className:`composer-tab ${_==="aliases"?"is-active":""}`,onClick:()=>L("aliases"),children:["Aliases",me.length>0&&l.jsx("span",{className:"composer-tab-badge",children:me.length})]}),l.jsxs("button",{type:"button",role:"tab","aria-selected":_==="tags",className:`composer-tab ${_==="tags"?"is-active":""}`,onClick:()=>L("tags"),children:[l.jsx(Nt,{size:14}),"Tags"]})]}),l.jsxs("div",{className:`composer-panel composer-panel-compose ${_==="compose"?"is-visible":""}`,children:[l.jsx("div",{className:"composer-textarea-wrap",children:l.jsx("textarea",{ref:c,value:h,onChange:be,className:"composer-textarea",rows:8})}),R.length>0&&l.jsxs("div",{className:"composer-tokens",children:[l.jsxs("div",{className:"composer-tokens-header",children:[l.jsxs("span",{className:"composer-tokens-label",children:["Elements",l.jsx("span",{className:"composer-tokens-count",children:R.length})]}),l.jsx("span",{className:"composer-tokens-hint",children:"Drag to reorder  Tap to adjust"})]}),l.jsx("div",{className:"composer-tokens-list",children:R.map((E,O)=>{let ae=E.text;if(E.type==="alias"){const He=Te.get(E.text.toLowerCase());ae=(He==null?void 0:He.displayName)||E.text}const ge=F===O,Ie=k===O&&F!==null&&F!==O,Xe=pd(h||"",E),$e=(Xe==null?void 0:Xe.weight)??1;return l.jsxs("span",{className:`composer-token composer-token-draggable ${E.type==="alias"?"is-alias":"is-tag"} ${ge?"is-dragging":""} ${Ie?"is-drop-target":""}`,title:E.type==="alias"?`Alias: $${E.text}$`:`Tag: ${E.text}`,draggable:!0,onDragStart:He=>Th(He,O),onDragEnd:zh,onDragOver:He=>$h(He,O),onDragLeave:Ah,onTouchStart:He=>Mh(He,O),onTouchMove:Oh,onTouchEnd:Fh,onClick:()=>{F===null&&Zs(E)},children:[l.jsx("span",{className:"composer-token-drag-handle","aria-hidden":"true",children:l.jsx(wa,{size:10})}),l.jsx("span",{className:"composer-token-name",children:ae}),E.type==="alias"&&l.jsx("span",{className:"composer-token-type",children:"$"}),Math.abs($e-1)>1e-6&&l.jsxs("span",{className:"composer-token-weight",children:[cn($e),""]}),l.jsx("button",{type:"button",className:"composer-token-remove",onClick:He=>{He.stopPropagation(),Gr(E)},"aria-label":`Remove ${E.text}`,children:l.jsx(ja,{size:9})})]},`${E.type}-${E.text}-${E.start}`)})})]}),l.jsxs("div",{className:"composer-preview",children:[l.jsx("div",{className:"composer-preview-label",children:"Expanded prompt"}),l.jsx("div",{className:"composer-preview-content",children:Z||""})]})]}),l.jsxs("div",{className:`composer-panel composer-panel-aliases ${_==="aliases"?"is-visible":""}`,children:[l.jsxs("div",{className:"composer-filters",children:[l.jsx("input",{ref:d,type:"text",value:v,onChange:E=>w(E.target.value),placeholder:"Search aliases",className:"composer-search ui-control ui-input"}),l.jsx("select",{value:j,onChange:E=>x(E.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Filter by category",children:Lt.map(E=>l.jsx("option",{value:E,children:E==="All"?"Category: All":ln(E)},`cat-${E}`))}),P.length>2&&l.jsx("select",{value:p,onChange:E=>f(E.target.value),className:"composer-subcategory-select ui-control ui-select is-compact",children:P.map(E=>l.jsx("option",{value:E,children:E==="All"?"All subcategories":An(E)},E))})]}),l.jsx("div",{className:"composer-alias-list",children:K.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases found."}):l.jsxs(l.Fragment,{children:[S.map(E=>l.jsxs("button",{type:"button",onClick:()=>$t(E.token),className:"composer-alias-item",children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:E.displayName||E.token}),E.category?l.jsx("span",{className:"composer-alias-category",children:ln(E.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",E.token,"$"]}),l.jsx("div",{className:"composer-alias-text",children:E.text})]},E.key)),g<K.length&&l.jsx("div",{ref:m,className:"composer-sentinel"})]})})]}),l.jsxs("div",{className:`composer-panel composer-panel-tags ${_==="tags"?"is-visible":""}`,onClick:E=>E.stopPropagation(),children:[l.jsxs("div",{className:"composer-filters",children:[l.jsx("input",{ref:de,type:"search",value:I,onChange:E=>C(E.target.value),placeholder:"Search tags (e.g. smile, city, sword)",className:"composer-search ui-control ui-input","aria-label":"Search tags"}),l.jsxs("select",{value:b,onChange:E=>U(E.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Filter by category",children:[l.jsx("option",{value:"",children:"Category: All"}),q.map(E=>l.jsxs("option",{value:E.key,children:[An(E.key)," (",Number(E.actual||E.count||0).toLocaleString(),")"]},E.key))]}),l.jsxs("select",{value:A,onChange:E=>B(E.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Sort tags",children:[l.jsx("option",{value:"count",children:"Sort: Popular"}),l.jsx("option",{value:"alpha",children:"Sort: AZ"})]})]}),l.jsxs("div",{className:"composer-tags-header",children:[l.jsxs("div",{className:"composer-tags-hint",children:[l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Nt,{size:14}),"Tap a tag to insert into prompt"]}),l.jsx("span",{className:"ml-3 opacity-80",children:fe})]}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-primary",onClick:E=>{E.stopPropagation(),L("compose")},children:"Done"})]}),l.jsxs("div",{className:"composer-tag-collection-bar is-sticky",children:[l.jsxs("div",{children:[l.jsx("div",{className:"composer-tag-collection-label",children:he.length?`${he.length} tags collected`:"No tags collected"}),T?l.jsx("div",{className:"composer-tag-collection-status",children:T}):null]}),l.jsx("button",{type:"button",className:"composer-tag-collection-btn",onClick:Hr,disabled:!he.length,children:"Manage"})]}),l.jsxs("div",{className:"composer-tag-collection-bar",children:[l.jsxs("div",{children:[l.jsx("div",{className:"composer-tag-collection-label",children:he.length?`${he.length} tags ready`:"No tags collected yet"}),T?l.jsx("div",{className:"composer-tag-collection-status",children:T}):null]}),l.jsx("button",{type:"button",className:"composer-tag-collection-btn",onClick:Hr,disabled:!he.length,children:"Manage"})]}),se?l.jsx("div",{className:"composer-tags-status",children:se}):null,je?l.jsx("div",{className:"composer-tags-error",children:je}):null,l.jsx("div",{className:"composer-alias-list composer-tags-grid",role:"list",children:Oe?l.jsx("div",{className:"composer-alias-empty",children:"Loading tags"}):D.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No tags found."}):l.jsxs(l.Fragment,{children:[D.map(E=>{const O=he.some(ae=>ae.toLowerCase()===String(E.tag||"").toLowerCase());return l.jsxs("button",{type:"button",className:`composer-alias-item composer-tag-item ${O?"is-collected":""}`,onClick:ae=>{ae.stopPropagation(),Js(E.tag)},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name composer-tag-name",children:l.jsx("code",{className:"composer-tag-code",children:E.tag})}),E.category?l.jsx("span",{className:"composer-alias-category",children:An(E.category)}):null]}),l.jsx("div",{className:"composer-alias-token composer-tag-count",children:Number(E.count||0).toLocaleString()})]},`${E.tag}-${E.category}`)}),D.length<J&&l.jsx("div",{ref:$,className:"composer-sentinel"}),Ne?l.jsx("div",{className:"composer-alias-empty",children:"Loading more"}):null]})})]})]}),l.jsx(xt,{open:Le,onClose:()=>Pe(!1),title:"Collected tags",variant:"sheet",shouldCloseOnOverlayClick:!0,children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsxs("div",{className:"sheet-label",children:["Tags (",he.length,")"]}),l.jsx("div",{className:"composer-collection-chips",role:"list",children:he.length?he.map(E=>l.jsxs("button",{type:"button",className:"collected-tag-chip",onClick:()=>Ai(E),"aria-label":`Remove ${E}`,children:[l.jsx("code",{className:"collected-tag-code",children:E}),l.jsx("span",{"aria-hidden":"true",children:""})]},E)):l.jsx("div",{className:"sheet-hint",children:"No tags collected yet."})})]}),l.jsxs("div",{className:"sheet-section flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>Pe(!1),children:"Close"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:Vn,disabled:!he.length,children:"Clear"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:At,disabled:!he.length,children:"Copy"}),l.jsx("textarea",{ref:ce,readOnly:!0,className:"sr-only","aria-label":"Collected tags"})]})]})}),l.jsx(Ca,{open:re,onClose:()=>xe(!1),title:((Oc=ee==null?void 0:ee.element)==null?void 0:Oc.type)==="alias"?"Alias strength":"Tag strength",tokenLabel:ee?((Fc=ee.element)==null?void 0:Fc.type)==="alias"?`${ee.displayName}  $${(Dc=ee.element)==null?void 0:Dc.text}$`:ee.displayName:"",weight:(ee==null?void 0:ee.weight)??1,onApply:E=>{ee!=null&&ee.element&&y(O=>hd(O||"",ee.element,E))},onRemoveWeight:()=>{ee!=null&&ee.element&&y(E=>hd(E||"",ee.element,null))},onDeleteToken:()=>{ee!=null&&ee.element&&Gr(ee.element)}})]}):null}function ix({open:e,onClose:t,title:n,value:r,onChange:s,placeholder:i="",description:o}){const a=n||"Edit",c=u.useMemo(()=>`sheet-textarea-${Math.random().toString(36).slice(2,9)}`,[]);return l.jsxs(xt,{open:e,onClose:t,title:a,variant:"fullscreen",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Done"}),children:[o?l.jsx("div",{className:"text-[12px] text-[rgba(159,178,215,0.75)] mb-3",children:o}):null,l.jsx("textarea",{id:c,value:r??"",onChange:d=>s==null?void 0:s(d.target.value),placeholder:i,className:"sheet-textarea ui-control ui-textarea",rows:12})]})}function ox({name:e,label:t,description:n,value:r,onChange:s,onEnter:i,disabled:o=!1,multiline:a=!1,aliasOptions:c=[],aliasCatalog:d=[],onOpenComposer:m}){var Re,Lt;const h=u.useRef(null),y=u.useRef(null),v=u.useRef({start:null,end:null}),w=u.useRef(null),j=u.useRef(null),[x,p]=u.useState(null),[f,g]=u.useState(null),[N,_]=u.useState(!1),[L,F]=u.useState(""),[z,k]=u.useState("All"),[W,ie]=u.useState("All"),[ue]=u.useState([]),re=u.useRef(null),[xe,ee]=u.useState(!1),[ne,de]=u.useState(!1),[$,I]=u.useState(null),C=typeof r=="string"?r:String(r??"");u.useMemo(()=>Array.isArray(c)?c.filter(Boolean):[],[c]);const b=u.useMemo(()=>(Array.isArray(d)?d.filter(P=>P&&P.name):[]).map(P=>({...P,...zc(P)})),[d]),U=u.useMemo(()=>b,[b]),A=P=>{const K=P.target.value;s==null||s(K)},B=P=>{if(!a&&P.key==="Enter"){P.preventDefault(),i==null||i(P.target.value,P);return}},q=u.useMemo(()=>{const P=new Map;return U.forEach(K=>{K!=null&&K.token&&P.set(String(K.token).toLowerCase(),K)}),P},[U]),H=u.useMemo(()=>{const P=new Set(["All"]);return b.forEach(K=>{K.category&&P.add(K.category)}),Array.from(P).sort((K,S)=>K.localeCompare(S))},[b]),D=u.useMemo(()=>{const P=new Set(["All"]);return U.forEach(K=>{(!z||z==="All"||K.category===z)&&K.subcategory&&P.add(K.subcategory)}),Array.from(P).sort((K,S)=>K.localeCompare(S))},[U,z]);u.useEffect(()=>{ie("All")},[z]);const M=u.useMemo(()=>{const P=C||"";if(!P||!P.includes("$"))return[];const K=[],S=/\$([a-z0-9_:-]+)\$/gi;let R;for(;R=S.exec(P);)K.push({token:R[1],index:R.index,length:R[0].length});return K},[C]),J=()=>{try{const P=h.current;P?v.current={start:P.selectionStart??null,end:P.selectionEnd??null}:v.current={start:null,end:null}}catch{v.current={start:null,end:null}}y.current&&y.current.scrollIntoView({block:"center",behavior:"smooth"}),_(!0)},te=u.useMemo(()=>{const P=L.trim().toLowerCase();return U.filter(K=>{var S,R,G,Z;return z!=="All"&&(K.category||"")!==z||W!=="All"&&(K.subcategory||"other")!==W?!1:P?((S=K.token)==null?void 0:S.toLowerCase().includes(P))||((R=K.text)==null?void 0:R.toLowerCase().includes(P))||((G=K.name)==null?void 0:G.toLowerCase().includes(P))||((Z=K.displayName)==null?void 0:Z.toLowerCase().includes(P)):!0}).sort((K,S)=>{const R=(K.subcategory||"").toLowerCase(),G=(S.subcategory||"").toLowerCase();return R!==G?R.localeCompare(G):K.token.localeCompare(S.token)})},[U,z,W,L]),[V,X]=u.useState(30),Oe=u.useMemo(()=>te.slice(0,V),[te,V]);u.useEffect(()=>{X(30)},[z,W,L,b]),u.useEffect(()=>{ie("All")},[z]);const ye=(P,{closeAfter:K=!0}={})=>{var Js,Gr;const S=h.current,R=`$${P}$`,G=C||"",Z=(Js=v.current)==null?void 0:Js.start,pe=(Gr=v.current)==null?void 0:Gr.end,oe=(S==null?void 0:S.selectionStart)??(typeof Z=="number"?Z:G.length),fe=(S==null?void 0:S.selectionEnd)??(typeof pe=="number"?pe:G.length),be=G.slice(0,oe),$t=G.slice(fe),Qe=be.match(/[^\s]$/),lt=$t.match(/^[^\s]/),At=Qe&&Qe[0]!==","?", ":"",Vn=lt&&lt[0]!==","?", ":"",Ai=be+At+R+Vn+$t;s==null||s(Ai);const Hr=(be+At+R+Vn).length;v.current={start:Hr,end:Hr},K&&(_(!1),requestAnimationFrame(()=>{var Zs;(Zs=S==null?void 0:S.blur)==null||Zs.call(S)}))},Ne=P=>{const K=C||"",S=ur(K,P),R=S?S.wrapperStart:P.index,G=S?S.wrapperEnd:P.index+P.length,Z=K.slice(0,R).replace(/[\s,]*$/,""),pe=K.slice(G).replace(/^[\s,]*/,""),oe=Z?`${Z} ${pe}`.trim():pe.trim();s==null||s(oe)},ve=P=>{if(!P)return;const K=q.get(P.token.toLowerCase()),S=(K==null?void 0:K.displayName)||P.token,R=ur(C||"",P);I({tokenObj:P,displayName:S,weight:(R==null?void 0:R.weight)??1}),de(!0),requestAnimationFrame(()=>{var G,Z;return(Z=(G=h.current)==null?void 0:G.blur)==null?void 0:Z.call(G)})},je=u.useMemo(()=>(P,K)=>{var $t;if(P===K||P===null||K===null||!(M!=null&&M.length))return;const S=C||"",R=M.map(Qe=>{const lt=ur(S,Qe),At=lt?lt.wrapperStart:Qe.index,Vn=lt?lt.wrapperEnd:Qe.index+Qe.length;return{start:At,end:Vn,text:S.slice(At,Vn)||`$${Qe.token}$`}}),G=R.slice(0,-1).map((Qe,lt)=>{const At=R[lt+1];return S.slice(Qe.end,At.start)}),Z=R.length?S.slice(0,R[0].start):"",pe=R.length?S.slice(R[R.length-1].end):"",oe=[...R],[fe]=oe.splice(P,1);oe.splice(K,0,fe);let be=Z+((($t=oe[0])==null?void 0:$t.text)||"");for(let Qe=1;Qe<oe.length;Qe+=1)be+=(G[Qe-1]??", ")+oe[Qe].text;be+=pe,s==null||s(be)},[s,M,C]),ke=(P,K)=>{p(K),w.current=P.currentTarget,P.dataTransfer.effectAllowed="move",P.dataTransfer.setData("text/plain",String(K)),requestAnimationFrame(()=>{w.current&&w.current.classList.add("is-dragging")})},se=(P,K)=>{P.preventDefault(),P.dataTransfer.dropEffect="move",K!==f&&g(K)},we=P=>{P!==f&&g(P)},he=P=>{x!==null&&P!==null&&x!==P&&je(x,P),p(null),g(null),w.current=null},Ce=()=>{w.current&&w.current.classList.remove("is-dragging"),he(f)},Le=(P,K)=>{P.preventDefault(),he(K)},Pe=(P,K)=>{var G,Z;if(!((Z=(G=P.target)==null?void 0:G.closest)==null?void 0:Z.call(G,".token-chip-drag-handle")))return;const R=P.touches[0];j.current={idx:K,startX:R.clientX,startY:R.clientY,moved:!1}},T=P=>{if(!j.current)return;const K=P.touches[0],S=Math.abs(K.clientX-j.current.startX),R=Math.abs(K.clientY-j.current.startY);if(S<=10&&R<=10)return;j.current.moved=!0,p(j.current.idx),P.preventDefault();const G=y.current,Z=G?G.querySelectorAll(".token-chip-draggable"):document.querySelectorAll(".token-chip-draggable"),pe=K.clientX,oe=K.clientY;for(let fe=0;fe<Z.length;fe++){const be=Z[fe].getBoundingClientRect();if(pe>=be.left&&pe<=be.right&&oe>=be.top&&oe<=be.bottom){g(fe);break}}},Y=()=>{var P;(P=j.current)!=null&&P.moved&&x!==null&&f!==null&&x!==f&&je(x,f),j.current=null,p(null),g(null)},ce={id:e,name:e,value:C,onChange:A,disabled:o,className:"ui-control ui-input pr-10 text-[13px] sm:text-sm",placeholder:"","aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0},me=()=>{_(!1),requestAnimationFrame(()=>{var P,K;(K=(P=h.current)==null?void 0:P.blur)==null||K.call(P)})},Te=(()=>{const P=String(e||"").toLowerCase(),K=String(t||"").toLowerCase();return!!`${P} ${K}`.trim().includes("prompt")})(),Ke=()=>l.jsx(xt,{open:N,onClose:me,title:Te?"Insert alias":"Aliases",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:me,children:"Done"}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Search"}),l.jsxs("div",{className:"composer-filters",children:[l.jsx("input",{ref:re,type:"text",value:L,onChange:P=>F(P.target.value),placeholder:"Search aliases",className:"composer-search ui-control ui-input"}),l.jsx("select",{value:z,onChange:P=>k(P.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Filter by category",children:["All",...H.filter(P=>P!=="All")].map(P=>l.jsx("option",{value:P,children:P==="All"?"Category: All":ln(P)},`cat-${P}`))}),D.length>2?l.jsx("select",{value:W,onChange:P=>ie(P.target.value),className:"composer-subcategory-select ui-control ui-select is-compact",children:D.map(P=>l.jsx("option",{value:P,children:P==="All"?"All subcategories":An(P)},P))}):null]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Results"}),l.jsx("div",{className:"composer-alias-list",children:te.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases found."}):l.jsxs(l.Fragment,{children:[Oe.map(P=>l.jsxs("button",{type:"button",onClick:()=>ye(P.token,{closeAfter:!Te}),className:"composer-alias-item",children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:P.displayName||P.token}),P.category?l.jsx("span",{className:"composer-alias-category",children:ln(P.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",P.token,"$"]}),l.jsx("div",{className:"composer-alias-text",children:P.text})]},P.key)),V<te.length?l.jsxs("button",{type:"button",onClick:()=>X(P=>Math.min(P+30,te.length)),className:"ui-button is-muted w-full",children:["Show more (",te.length-V," left)"]}):null]})})]})]})});return a?l.jsxs("div",{className:"relative space-y-2",ref:y,children:[m&&!Te?l.jsxs("div",{className:"stringinput-toolbar",children:[l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>m(e),children:"Open composer"}),b.length?l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:J,children:"Aliases"}):null,l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>ee(!0),children:"Expand"})]}):null,l.jsx("textarea",{ref:h,...ce,rows:3,wrap:"soft",onKeyDown:B,className:ce.className+" resize-none min-h-[88px] max-h-[160px] leading-relaxed overflow-y-auto overflow-x-hidden break-words whitespace-pre-wrap",style:{whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"}}),m&&Te?l.jsx("div",{className:"stringinput-underbar",children:l.jsxs("div",{className:"stringinput-underbar-actions",children:[l.jsx("button",{type:"button",className:"stringinput-action-link",onClick:()=>m(e),children:"Open composer"}),b.length?l.jsx("button",{type:"button",className:"stringinput-action-link",onClick:J,children:"Insert alias"}):null]})}):null,l.jsx(ix,{open:xe,onClose:()=>ee(!1),title:t||e,value:C,onChange:s,description:n}),M.length?l.jsxs("div",{className:"stringinput-tokens",children:[l.jsxs("div",{className:"stringinput-tokens-label",children:["Active aliases ",l.jsx("span",{className:"stringinput-tokens-hint",children:"(drag to reorder)"})]}),l.jsx("div",{className:"stringinput-tokens-list",children:M.map((P,K)=>{var oe;const S=q.get(P.token.toLowerCase()),R=(S==null?void 0:S.displayName)||P.token,G=x===K,Z=f===K&&x!==null&&x!==K,pe=((oe=ur(C||"",P))==null?void 0:oe.weight)??1;return l.jsxs("div",{className:`token-chip token-chip-draggable ${G?"is-dragging":""} ${Z?"is-drop-target":""}`,title:`$${P.token}$`,role:"button",tabIndex:0,draggable:!0,onDragStart:fe=>ke(fe,K),onDragEnd:Ce,onDragEnter:()=>we(K),onDragOver:fe=>se(fe,K),onDrop:fe=>Le(fe,K),onTouchStart:fe=>Pe(fe,K),onTouchMove:T,onTouchEnd:Y,onClick:()=>{x===null&&ve(P)},onKeyDown:fe=>{(fe.key==="Enter"||fe.key===" ")&&(fe.preventDefault(),ve(P))},children:[l.jsx("span",{className:"token-chip-drag-handle","aria-hidden":"true",children:l.jsx(wa,{size:14})}),l.jsx("span",{className:"token-chip-label",children:R}),Math.abs(pe-1)>1e-6?l.jsxs("span",{className:"token-chip-weight","aria-label":`Strength ${cn(pe)}x`,children:["",cn(pe)]}):null,l.jsx("button",{type:"button",className:"token-chip-remove",onClick:fe=>{fe.stopPropagation(),Ne(P)},"aria-label":`Remove ${P.token}`,children:l.jsx(ja,{size:12})})]},`${P.token}-${P.index}`)})})]}):null,l.jsx(Ca,{open:ne,onClose:()=>de(!1),title:"Alias strength",tokenLabel:$?`${$.displayName}  $${(Re=$.tokenObj)==null?void 0:Re.token}$`:"",weight:($==null?void 0:$.weight)??1,onApply:P=>{$!=null&&$.tokenObj&&(s==null||s(vl(C||"",$.tokenObj,P)))},onRemoveWeight:()=>{$!=null&&$.tokenObj&&(s==null||s(vl(C||"",$.tokenObj,null)))},onDeleteToken:()=>{$!=null&&$.tokenObj&&Ne($.tokenObj)}}),N?l.jsx(Ke,{}):null]}):l.jsxs("div",{className:"relative space-y-2",ref:y,children:[l.jsx("input",{...ce,type:"text",inputMode:"text",autoComplete:"off",onKeyDown:B,className:ce.className+" min-h-[44px]",ref:h}),M.length?l.jsxs("div",{className:"stringinput-tokens",children:[l.jsxs("div",{className:"stringinput-tokens-label",children:["Active aliases ",l.jsx("span",{className:"stringinput-tokens-hint",children:"(drag to reorder)"})]}),l.jsx("div",{className:"stringinput-tokens-list",children:M.map((P,K)=>{var oe;const S=q.get(P.token.toLowerCase()),R=(S==null?void 0:S.displayName)||P.token,G=x===K,Z=f===K&&x!==null&&x!==K,pe=((oe=ur(C||"",P))==null?void 0:oe.weight)??1;return l.jsxs("div",{className:`token-chip token-chip-draggable ${G?"is-dragging":""} ${Z?"is-drop-target":""}`,title:`$${P.token}$`,onClick:()=>{x===null&&ve(P)},role:"button",tabIndex:0,draggable:!0,onDragStart:fe=>ke(fe,K),onDragEnd:Ce,onDragEnter:()=>we(K),onDragOver:fe=>se(fe,K),onDrop:fe=>Le(fe,K),onTouchStart:fe=>Pe(fe,K),onTouchMove:T,onTouchEnd:Y,onKeyDown:fe=>{(fe.key==="Enter"||fe.key===" ")&&(fe.preventDefault(),ve(P))},children:[l.jsx("span",{className:"token-chip-drag-handle","aria-hidden":"true",children:l.jsx(wa,{size:14})}),l.jsx("span",{className:"token-chip-label",children:R}),Math.abs(pe-1)>1e-6?l.jsxs("span",{className:"token-chip-weight","aria-label":`Strength ${cn(pe)}x`,children:["",cn(pe)]}):null,l.jsx("button",{type:"button",className:"token-chip-remove",onClick:fe=>{fe.stopPropagation(),Ne(P)},"aria-label":`Remove ${P.token}`,children:l.jsx(ja,{size:12})})]},`${P.token}-${P.index}`)})})]}):null,l.jsx(Ca,{open:ne,onClose:()=>de(!1),title:"Alias strength",tokenLabel:$?`${$.displayName}  $${(Lt=$.tokenObj)==null?void 0:Lt.token}$`:"",weight:($==null?void 0:$.weight)??1,onApply:P=>{$!=null&&$.tokenObj&&(s==null||s(vl(C||"",$.tokenObj,P)))},onRemoveWeight:()=>{$!=null&&$.tokenObj&&(s==null||s(vl(C||"",$.tokenObj,null)))},onDeleteToken:()=>{$!=null&&$.tokenObj&&Ne($.tokenObj)}}),b.length?l.jsx("button",{type:"button",className:"stringinput-trailing ui-button is-ghost is-compact",onClick:()=>m?m(e):J(),title:m?"Open prompt composer":"Insert alias",children:m?l.jsx(Pc,{size:16}):l.jsx(Nt,{size:16})}):null,l.jsx(Ke,{})]})}const md=u.memo(ox),gd=e=>e==null?void 0:String(e).trim().replace(/[^A-Za-z0-9_-]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")||void 0;function ax({name:e,label:t,description:n,value:r,onChange:s,disabled:i=!1,min:o,max:a,step:c,isFloat:d=!1,inputId:m}){const h=c??(d?.01:1),y=m??gd(e),v=x=>{if(x===""||x===null||x===void 0)return"";const p=d?parseFloat(x):parseInt(x,10);return Number.isNaN(p)?"":p},w=x=>{const p=x.target.value,f=v(p);s==null||s(f)},j=x=>{if(x.key!=="ArrowUp"&&x.key!=="ArrowDown")return;x.preventDefault();const p=typeof r=="number"?r:v(String(r??""))||0,f=x.key==="ArrowUp"?h:-h;let g=p+f;if(typeof o=="number"&&(g=Math.max(o,g)),typeof a=="number"&&(g=Math.min(a,g)),d){const N=typeof h=="number"?(String(h).split(".")[1]||"").length:2;g=parseFloat(g.toFixed(Math.max(N,2)))}s==null||s(g)};return l.jsxs("div",{className:"w-full flex items-center gap-2",children:[l.jsx("input",{id:y,name:e,type:"number",inputMode:d?"decimal":"numeric",value:r??"",onChange:w,onKeyDown:j,disabled:i,min:o,max:a,step:h,"aria-label":t||e,"aria-describedby":n?`${y||gd(e)||e}-description`:void 0,className:"ui-control ui-input"}),typeof o=="number"||typeof a=="number"?l.jsxs("div",{className:"hidden sm:flex flex-col text-[10px] text-[#6A6FA8] text-right leading-tight",children:[typeof o=="number"&&l.jsxs("span",{children:["min ",o]}),typeof a=="number"&&l.jsxs("span",{children:["max ",a]})]}):null]})}const Ns=u.memo(ax);function cx({name:e,label:t,description:n,value:r,onChange:s,disabled:i=!1}){const o=!!r,a=()=>{i||s==null||s(!o)},c=d=>{(d.key===" "||d.key==="Enter")&&(d.preventDefault(),a())};return l.jsxs("button",{id:e,type:"button",role:"switch","aria-checked":o,"aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0,onClick:a,onKeyDown:c,disabled:i,className:`ui-switch ${o?"is-on":""}`,children:[l.jsx("span",{className:"ui-switch-track",children:l.jsx("span",{className:"ui-switch-knob"})}),l.jsx("span",{className:"ui-switch-state",children:o?"On":"Off"})]})}const yd=u.memo(cx),ux=/\.(safetensors|ckpt|pt|pth)$/i;function ks(e){if(typeof e!="string")return!1;const t=e.trim();if(!t)return!1;const r=t.replace(/\\/g,"/").split("/").filter(Boolean).pop()||"";return ux.test(r)}function Nh(e){if(typeof e!="string")return{folder:"",base:""};const n=e.trim().replace(/\\/g,"/").split("/").filter(Boolean),s=(n.pop()||"").replace(/\.[^.]+$/,"");return{folder:n.join(" ").trim(),base:s}}function Ea(e){if(!ks(e))return e;const{folder:t,base:n}=Nh(e);if(!n)return e;if(!t)return n;const r=t.split(/\s+/).filter(Boolean),s=r[r.length-1]||"";if(s&&n.toLowerCase().startsWith(s.toLowerCase())){const i=n.slice(s.length);return i?`${t}${i}`:t}return`${t} ${n}`.trim()}function dx(e,t){try{if(typeof window>"u"||!e)return null;const n=e.getItem(t);return n?JSON.parse(n):null}catch{return null}}function zi(e,t,n){try{if(typeof window>"u"||!e)return;e.setItem(t,JSON.stringify(n))}catch{}}function Ht(){try{return typeof window>"u"?null:window.sessionStorage||null}catch{return null}}function Wr(){try{return typeof window>"u"?null:window.localStorage||null}catch{return null}}const kh=750,dn=new Map,Xt=new Map,qt=new Map,Pr=new Map,Jt=new Map,Zt=new Map;function Ch(e){var t;if(Xt.has(e)&&(clearTimeout(Xt.get(e)),Xt.delete(e)),qt.has(e)){try{(t=window.cancelIdleCallback)==null||t.call(window,qt.get(e))}catch{}qt.delete(e)}dn.has(e)&&(zi(Ht(),e,dn.get(e)),dn.delete(e))}function fx(e){var r;if(Xt.has(e)&&(clearTimeout(Xt.get(e)),Xt.delete(e)),qt.has(e)){try{(r=window.cancelIdleCallback)==null||r.call(window,qt.get(e))}catch{}qt.delete(e)}const t=()=>{dn.has(e)&&(zi(Ht(),e,dn.get(e)),dn.delete(e))},n=setTimeout(()=>{Xt.delete(e);try{if(typeof window<"u"&&typeof window.requestIdleCallback=="function"){const s=window.requestIdleCallback(()=>{qt.delete(e),t()},{timeout:2500});qt.set(e,s);return}}catch{}t()},kh);Xt.set(e,n)}function px(){Array.from(Xt.values()).forEach(e=>clearTimeout(e)),Xt.clear(),Array.from(qt.values()).forEach(e=>{var t;try{(t=window.cancelIdleCallback)==null||t.call(window,e)}catch{}}),qt.clear(),Array.from(dn.entries()).forEach(([e,t])=>{zi(Ht(),e,t)}),dn.clear(),Array.from(Jt.values()).forEach(e=>clearTimeout(e)),Jt.clear(),Array.from(Zt.values()).forEach(e=>{var t;try{(t=window.cancelIdleCallback)==null||t.call(window,e)}catch{}}),Zt.clear(),Array.from(Pr.entries()).forEach(([e,t])=>{try{const n=Ht();n&&n.setItem(e,t)}catch{}}),Pr.clear()}if(typeof window<"u"&&!window.__cozygenFormStateFlush){const e=()=>px();window.addEventListener("beforeunload",e),window.addEventListener("pagehide",e),window.__cozygenFormStateFlush=!0}function hx(e){var r;if(!e)return{};const t=`${e}_formData`,n=dx(Ht(),t);if(n&&typeof n=="object")return n;try{const s=Wr();(r=s==null?void 0:s.removeItem)==null||r.call(s,t)}catch{}return{}}function $c(e,t,n={}){var i;if(!e)return;const{immediate:r=!1}=n||{},s=`${e}_formData`;if(r){Ch(s),zi(Ht(),s,t||{});try{const o=Wr();(i=o==null?void 0:o.removeItem)==null||i.call(o,s)}catch{}return}dn.set(s,t||{}),fx(s)}function mx(e){e&&Ch(`${e}_formData`)}function gx(e,t,n=kh){var i;if(Pr.set(e,t),Jt.has(e)&&(clearTimeout(Jt.get(e)),Jt.delete(e)),Zt.has(e)){try{(i=window.cancelIdleCallback)==null||i.call(window,Zt.get(e))}catch{}Zt.delete(e)}const r=()=>{const o=Pr.get(e);Pr.delete(e);try{const a=Ht();a&&a.setItem(e,o)}catch{}},s=setTimeout(()=>{Jt.delete(e);try{if(typeof window<"u"&&typeof window.requestIdleCallback=="function"){const o=window.requestIdleCallback(()=>{Zt.delete(e),r()},{timeout:2e3});Zt.set(e,o);return}}catch{}r()},n);Jt.set(e,s)}function yx(e,t={}){var s,i;const{immediate:n=!1}=t||{},r="cozygen_last_param";if(n){if(Jt.has(r)&&(clearTimeout(Jt.get(r)),Jt.delete(r)),Zt.has(r)){try{(s=window.cancelIdleCallback)==null||s.call(window,Zt.get(r))}catch{}Zt.delete(r)}Pr.delete(r);try{const o=Ht();o&&o.setItem(r,e||"");const a=Wr();(i=a==null?void 0:a.removeItem)==null||i.call(a,r)}catch{}return}gx(r,e||"")}function vx(){var t,n;const e="cozygen_last_param";try{const r=Ht(),s=((t=r==null?void 0:r.getItem)==null?void 0:t.call(r,e))||"";if(s)return s;const i=Wr();(n=i==null?void 0:i.removeItem)==null||n.call(i,e)}catch{}return""}function Eh(e,t){const n=e?String(e):"global",r=t?String(t):"";return`cozygen_dropdown_folder:${n}:${r}`}function vd(e,t){var r,s;const n=Eh(e,t);try{const i=Ht(),o=((r=i==null?void 0:i.getItem)==null?void 0:r.call(i,n))||"";if(o)return o;const a=Wr();(s=a==null?void 0:a.removeItem)==null||s.call(a,n)}catch{}return""}function xx(e,t,n){var s;const r=Eh(e,t);try{const i=Ht();i&&i.setItem(r,String(n||""));const o=Wr();(s=o==null?void 0:o.removeItem)==null||s.call(o,r)}catch{}}function wx({workflowName:e,name:t,label:n,description:r,value:s,onChange:i,disabled:o=!1,options:a=[]}){const c=s??"",[d,m]=u.useState(()=>vd(e,t)||"All");u.useEffect(()=>{const p=vd(e,t);m(p||"All")},[e,t]);const h=u.useMemo(()=>(a||[]).map(p=>typeof p=="string"?{value:p,label:p}:{value:p.value??p.name??"",label:p.label??p.name??String(p.value??"")}),[a]),y=(p="")=>{if(typeof p!="string")return"Other";if(!p.includes("/"))return"root";const f=p.split("/");return f.slice(0,f.length-1).join("/")||"root"},v=u.useMemo(()=>{const p=new Set(["All"]);return h.forEach(f=>p.add(y(f.label))),Array.from(p).sort((f,g)=>f.localeCompare(g))},[h]);u.useEffect(()=>{v.includes(d)||m("All")},[v,d]),u.useEffect(()=>{xx(e,t,d)},[e,t,d]);const w=u.useMemo(()=>{const p=f=>f.replace(/\.[^.]+$/,"");return h.filter(f=>{const g=y(f.label);return d==="All"||g===d}).map(f=>{const g=f.label||"";if(ks(g)){const{base:L}=Nh(g),F=Ea(g);return{...f,label:d==="All"?F:L||F}}if(d==="All")return f;const N=g.split("/"),_=p(N[N.length-1]||g);return{...f,label:_}}).sort((f,g)=>f.label.localeCompare(g.label))},[h,d]),j=u.useMemo(()=>c===""||c===null||c===void 0?!0:w.some(p=>String(p.value)===String(c)),[w,c]),x=p=>{i==null||i(p.target.value)};return l.jsxs("div",{className:"w-full space-y-2",children:[l.jsx("div",{className:"relative w-full",children:l.jsx("select",{value:d,onChange:p=>m(p.target.value),disabled:o,className:"ui-control ui-select is-compact","aria-label":`Choose folder for ${n||t}`,children:v.map(p=>l.jsx("option",{value:p,children:p},p))})}),l.jsx("div",{className:"relative w-full",children:l.jsxs("select",{id:t,name:t,value:c,onChange:x,disabled:o,"aria-label":n||t,"aria-describedby":r?`${t}-description`:void 0,className:"ui-control ui-select",children:[!j&&c!==""&&l.jsx("option",{value:c,children:Ea(String(c))}),w.length>0&&(c===void 0||c==="")&&l.jsx("option",{value:"",children:"Select"}),w.map(p=>l.jsx("option",{value:p.value,children:p.label},p.value)),w.length===0&&l.jsx("option",{value:"",children:"No matches"})]},`${t||"field"}:${d}`)})]})}const ba=u.memo(wx);function xd(e=[]){return e.map(t=>typeof t=="string"?{value:t,label:t}:{value:t.value??t.name??"",label:t.label??t.name??String(t.value??"")})}function wd(e,t){if(!e)return null;const n=String(e);if(t==="high"){const r=n.match(/(.+)-high(\.[^.]*)?$/i);return r?r[1]:null}if(t==="low"){const r=n.match(/(.+)-low(\.[^.]*)?$/i);return r?r[1]:null}return null}function jx(e){return e?e.replace(/[_-]+/g," ").replace(/\s+/g," ").trim().replace(/^./,t=>t.toUpperCase()):""}const Sx=(...e)=>e.flat().map(n=>String(n??"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")).filter(Boolean).join("-")||"field";function Nx({name:e,label:t,description:n,highParam:r,lowParam:s,highChoices:i=[],lowChoices:o=[],formData:a={},onChangeParam:c,highStrengthParam:d,lowStrengthParam:m,strengthValue:h,onChangeStrength:y,highStrengthValue:v,lowStrengthValue:w,onChangeHighStrength:j,onChangeLowStrength:x,disabled:p=!1}){const f=u.useMemo(()=>xd(i),[i]),g=u.useMemo(()=>xd(o),[o]),N=u.useMemo(()=>{const H=new Map;g.forEach(M=>{const J=wd(M.value,"low");J&&(H.has(J)||H.set(J,M))});const D=[];return f.forEach(M=>{const J=wd(M.value,"high");if(!J)return;const te=H.get(J);te&&D.push({base:J,label:jx(J),highValue:M.value,lowValue:te.value})}),D.sort((M,J)=>M.label.localeCompare(J.label)),D},[f,g]),_=u.useMemo(()=>{const H=a[r],D=a[s];if(!H||!D)return"";const M=N.find(J=>J.highValue===H&&J.lowValue===D);return M?M.base:""},[a,r,s,N]),L=d||m||`${e}_strength`,F=u.useMemo(()=>Sx(e||"lora",L||"strength"),[e,L]),z=!!(d||m),k=!!(d&&m),W=(H,D=1)=>typeof H=="number"?H:D,ie=W(typeof h=="number"?h:typeof v=="number"?v:typeof w=="number"?w:void 0,1),ue=W(typeof v=="number"?v:void 0,ie),re=W(typeof w=="number"?w:void 0,k?ie:ue),xe=k&&Math.abs(ue-re)>1e-4,[ee,ne]=u.useState(xe);u.useEffect(()=>{ne(xe)},[xe,r,s]);const de=H=>{if(!c)return;const D=N.find(M=>M.base===H);D&&(c(r,D.highValue),c(s,D.lowValue))};if(N.length===0)return l.jsxs("div",{className:"text-[11px] text-[#9DA3FFCC]",children:["No matching ",l.jsx("span",{className:"font-semibold",children:"-high"})," /"," ",l.jsx("span",{className:"font-semibold",children:"-low"})," LoRA pairs found."]});const $=`${F}-linked`,I=`${F}-high`,C=`${F}-low`,b=k?"Linked":"Strength",U=k?"Applies to high + low":d||m||"",A=(H,D)=>{const M=Array.isArray(H)?H:[H];let J=!1;M.forEach(te=>{if(te==="high"&&typeof j=="function"){j(D);return}if(te==="low"&&typeof x=="function"){x(D);return}typeof y=="function"&&!J&&(y(D),J=!0)})},B=H=>{(d||!d&&!m)&&A("high",H),m&&A("low",H)},q=()=>{k&&ne(H=>{const D=!H;return D||B(typeof ue=="number"?ue:typeof re=="number"?re:ie),D})};return l.jsxs("div",{className:"space-y-2",children:[l.jsx(ba,{name:`${e}_pair`,label:t,description:n,value:_||"",onChange:de,disabled:p,options:N.map(H=>({value:H.base,label:H.label}))}),z&&l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[10px] uppercase tracking-[0.16em] text-[#9DA3FFCC]",children:"Strength"}),k&&l.jsx("button",{type:"button",className:"text-[10px] font-semibold tracking-[0.12em] uppercase text-[#E5E7FF]",onClick:q,disabled:p,children:ee?"Link values":"Split values"})]}),ee&&k?l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-3",children:[l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:I,className:"lora-strength-label is-high",children:[l.jsx("span",{className:"lora-strength-label-pill",children:"High"}),l.jsxs("span",{className:"lora-strength-label-text",children:["High strength",d&&l.jsx("span",{className:"lora-strength-label-hint",children:d})]})]}),l.jsx(Ns,{name:`${L}_high`,label:"High strength",description:"",value:ue,onChange:H=>A("high",H),disabled:p,isFloat:!0,min:0,max:2,step:.05,inputId:I})]}),l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:C,className:"lora-strength-label is-low",children:[l.jsx("span",{className:"lora-strength-label-pill",children:"Low"}),l.jsxs("span",{className:"lora-strength-label-text",children:["Low strength",m&&l.jsx("span",{className:"lora-strength-label-hint",children:m})]})]}),l.jsx(Ns,{name:`${L}_low`,label:"Low strength",description:"",value:re,onChange:H=>A("low",H),disabled:p,isFloat:!0,min:0,max:2,step:.05,inputId:C})]})]}):l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:$,className:"lora-strength-label is-linked",children:[l.jsx("span",{className:"lora-strength-label-pill",children:b}),l.jsxs("span",{className:"lora-strength-label-text",children:["LoRA strength",U&&l.jsx("span",{className:"lora-strength-label-hint",children:U})]})]}),l.jsx(Ns,{name:L,label:"LoRA strength",description:"",value:ie,onChange:B,disabled:p,isFloat:!0,min:0,max:2,step:.05,inputId:$})]})]})]})}function kx(e,t){if(e.disabled!==t.disabled||e.name!==t.name||e.label!==t.label||e.description!==t.description||e.highParam!==t.highParam||e.lowParam!==t.lowParam||e.highStrengthParam!==t.highStrengthParam||e.lowStrengthParam!==t.lowStrengthParam||e.strengthValue!==t.strengthValue||e.highStrengthValue!==t.highStrengthValue||e.lowStrengthValue!==t.lowStrengthValue||e.highChoices!==t.highChoices||e.lowChoices!==t.lowChoices||e.onChangeParam!==t.onChangeParam||e.onChangeStrength!==t.onChangeStrength||e.onChangeHighStrength!==t.onChangeHighStrength||e.onChangeLowStrength!==t.onChangeLowStrength)return!1;const n=e.formData||{},r=t.formData||{};return!(n[e.highParam]!==r[t.highParam]||n[e.lowParam]!==r[t.lowParam])}const jd=u.memo(Nx,kx);function Cx({id:e,label:t,description:n,preview:r,expanded:s=!1,onToggle:i,children:o,trailing:a,className:c=""}){const d=typeof i=="function",m=e?`${e}-description`:void 0,h=e?`${e}-panel`:void 0,y=typeof t=="string"?t.trim().replace(/\s+/gu," ").replace(/:\s*$/u,""):t,v=typeof n=="string"?n.trim().replace(/\s+/gu," "):n,w=typeof r=="string"||typeof r=="number"?String(r):void 0,j=d?"button":"div",x=d?{type:"button",onClick:i,"aria-expanded":s,"aria-controls":h,"aria-describedby":v?m:void 0}:{};return l.jsxs("div",{className:["field-row",c].filter(Boolean).join(" "),children:[l.jsxs(j,{...x,className:["field-row-head",d?"is-collapsible":"is-static",s?"is-expanded":""].filter(Boolean).join(" "),children:[l.jsxs("div",{className:"field-row-main",children:[l.jsx("div",{className:"field-row-label",children:y}),v?l.jsx("div",{id:m,className:"field-row-description",children:v}):null]}),l.jsxs("div",{className:"field-row-trailing",children:[a?l.jsx("div",{className:"field-row-trailing-control",children:a}):null,r?l.jsx("div",{className:"field-row-preview",title:w,children:r}):null,d?l.jsx("div",{className:"field-row-chevron","aria-hidden":"true",children:l.jsx(Ic,{size:16})}):null]})]}),d&&s?l.jsx("div",{id:h,className:"field-row-body",children:o}):null]})}const mo=u.memo(Cx),Ex=16,bx=[" - "," ","-","_"],bh=e=>[...new Set(e.filter(Boolean))],di=(e,t)=>{const n=String(e||"").trim(),r=bx.map(s=>`${n}${s}${t}`);return r.push(`${n}${t}`),bh(r)},Sd=(e,t)=>{const n=di(`${e} Strength`,t),r=di(e,t).map(s=>`${s} Strength`);return bh([...n,...r])},Nd=e=>String(e||"").toLowerCase().replace(/[\s_-]+/g,""),wl=(e,t=[])=>{if(!e)return null;const n=Array.isArray(t)?t:[t];for(const s of n){if(!s)continue;const i=e.get(s);if(i)return{name:s,input:i}}const r=new Map;n.forEach(s=>{s&&r.set(Nd(s),s)});for(const[s,i]of e.entries()){const o=Nd(s);if(r.has(o))return{name:s,input:i}}return null},Lx=Array.from({length:Ex},(e,t)=>{const n=t+1,r=di("Lora High",n),s=di("Lora Low",n),i=Sd("Lora High",n),o=Sd("Lora Low",n);return{id:`video_lora_${n}`,label:`Video LoRA ${n}`,highParam:r[0],lowParam:s[0],highParamAliases:r,lowParamAliases:s,highStrengthParam:i[0],lowStrengthParam:o[0],highStrengthParamAliases:i,lowStrengthParamAliases:o}});function _x(e){var r,s;const t=((r=e==null?void 0:e.inputs)==null?void 0:r.param_type)||((s=e==null?void 0:e.inputs)==null?void 0:s.Param_type),n=String(t||"STRING").toUpperCase();return["NUMBER","FLOAT","INT"].includes(n)?"NUMBER":["BOOLEAN","BOOL"].includes(n)?"BOOLEAN":["DROPDOWN","CHOICE","SELECT"].includes(n)?"DROPDOWN":"STRING"}function Px(e){const t=(e==null?void 0:e.inputs)||{};return t.label||t.display_name||t.title||t.param_name||(e==null?void 0:e.title)||(e==null?void 0:e.class_type)||"Parameter"}function Rx(e){const t=(e==null?void 0:e.inputs)||{};return t.description||t.help||t.tooltip||t.doc||""}function dr(e){const t=(e==null?void 0:e.inputs)||{};return t.param_name||t.name||t.key||t.id||`param_${(e==null?void 0:e.id)||"unknown"}`}function ps(e){const t=(e==null?void 0:e.inputs)||{},n=t.choices||t.options||[],r=t.default_value??t.value??t.default_choice??(n&&n.length?n[0]:"")??"";return{paramName:dr(e),label:Px(e),description:Rx(e),paramType:_x(e),multiline:!!t.multiline,min:typeof t.min=="number"?t.min:void 0,max:typeof t.max=="number"?t.max:void 0,step:typeof t.step=="number"?t.step:void 0,choices:n,defaultValue:r}}function Ix({inputs:e=[],formData:t={},onFormChange:n,workflowName:r,onParamEdited:s,onSpotlight:i,compactControls:o=!0,collapseAllKey:a=0,collapseAllCollapsed:c=!0,lastEditedParam:d="",spotlightName:m="",onCloseSpotlight:h=()=>{},onVisibleParamsChange:y=()=>{},aliasOptions:v=[],aliasCatalog:w=[],onOpenComposer:j}){const[x,p]=u.useState({}),[f,g]=u.useState(0),N=u.useRef(t);u.useEffect(()=>{N.current=t},[t]);const _=u.useCallback((I,C)=>{if((I==null?void 0:I.paramType)==="BOOLEAN")return C?"On":"Off";if(C==null||C==="")return"Empty";if(typeof C=="string"){const b=C.trim();if(!b)return"Empty";const U=240,A=140,B=b.length>U?b.slice(0,U):b,H=/[\r\n\t]/.test(B)||/\s{2,}/u.test(B)?B.replace(/\s+/gu," ").trim():B;if(H.length>A)return`${H.slice(0,A)}`;const D=Ea(H);return b.length>U?`${D}`:D}return String(C)},[]),L=u.useCallback((I,C)=>{!n||!I||(n(I,C),s==null||s(I),p(b=>(b==null?void 0:b[I])===!1?b:{...b,[I]:!1}))},[n,s]),F=u.useCallback(I=>{I&&p(C=>({...C,[I]:!(C!=null&&C[I])}))},[]),z=u.useMemo(()=>e||[],[e]),k=u.useMemo(()=>{const I=new Map;return(z||[]).forEach(C=>{const b=dr(C);b&&I.set(b,U=>L(b,U))}),I},[L,z]),W=u.useMemo(()=>{const I=new Map;return(z||[]).forEach(C=>{const b=dr(C);b&&I.set(b,(U,A)=>{var B,q;L(b,U),(q=(B=A==null?void 0:A.target)==null?void 0:B.blur)==null||q.call(B),m===b&&(h==null||h())})}),I},[L,h,m,z]),ie=u.useMemo(()=>{const I=new Map;return(z||[]).forEach(C=>{const b=dr(C);b&&I.set(b,()=>F(b))}),I},[F,z]);u.useEffect(()=>{const I={};(e||[]).forEach(C=>{const b=dr(C);b&&(I[b]=c)}),d&&(I[d]=!1),p(I)},[a,c,e,d]);const ue=u.useMemo(()=>{const I=new Map;return(e||[]).forEach(C=>{const b=dr(C);b&&I.set(b,C)}),I},[e]),re=u.useMemo(()=>{const I=[];return Lx.forEach(C=>{const b=wl(ue,C.highParamAliases||C.highParam),U=wl(ue,C.lowParamAliases||C.lowParam);if(!b||!U)return;const A=b.input,B=U.input,q=ps(A),H=ps(B);if(q.paramType!=="DROPDOWN"||H.paramType!=="DROPDOWN")return;const D=q.choices||[],M=H.choices||[];if(!D.length||!M.length)return;const J=wl(ue,C.highStrengthParamAliases||C.highStrengthParam),te=wl(ue,C.lowStrengthParamAliases||C.lowStrengthParam);I.push({...C,highParam:b.name,lowParam:U.name,highStrengthParam:J==null?void 0:J.name,lowStrengthParam:te==null?void 0:te.name,highInput:A,lowInput:B,highCfg:q,lowCfg:H})}),I},[ue]),xe=u.useMemo(()=>{const I=new Map;return re.forEach(C=>{I.set(C.highParam,C)}),I},[re]),ee=u.useMemo(()=>{const I=new Set;return re.forEach(C=>{I.add(C.highParam),I.add(C.lowParam),C.highStrengthParam&&I.add(C.highStrengthParam),C.lowStrengthParam&&I.add(C.lowStrengthParam)}),I},[re]),ne=u.useMemo(()=>{const I=[];return(z||[]).forEach(C=>{const b=ps(C),U=b.paramName,A=xe.get(U);if(A){I.push({name:U,label:A.label||b.label,description:b.description,render:B=>{const q=B||N.current||{},H=A.highStrengthParam?q[A.highStrengthParam]:void 0,D=A.lowStrengthParam?q[A.lowStrengthParam]:void 0,M=H??D??1;return l.jsx(jd,{name:A.id||A.highParam,label:A.label||b.label,highParam:A.highParam,lowParam:A.lowParam,highChoices:A.highCfg.choices,lowChoices:A.lowCfg.choices,formData:q,onChangeParam:L,highStrengthParam:A.highStrengthParam,lowStrengthParam:A.lowStrengthParam,strengthValue:M,highStrengthValue:H,lowStrengthValue:D,onChangeHighStrength:A.highStrengthParam?k.get(A.highStrengthParam):void 0,onChangeLowStrength:A.lowStrengthParam?k.get(A.lowStrengthParam):void 0,disabled:!1},`lora-${U}-${f}`)}});return}ee.has(U)||I.push({name:U,label:b.label,description:b.description,render:B=>{const q=B||N.current||{},H={name:U,label:b.label,description:b.description,value:q[U],defaultValue:b.defaultValue,disabled:!1};return b.paramType==="NUMBER"?l.jsx(Ns,{...H,onChange:k.get(U),min:b.min,max:b.max,step:b.step,isFloat:!0},`field-${U}-number-${f}`):b.paramType==="BOOLEAN"?l.jsx(yd,{...H,onChange:k.get(U)},`field-${U}-bool-${f}`):b.paramType==="DROPDOWN"?l.jsx(ba,{...H,workflowName:r,onChange:k.get(U),options:b.choices||[]},`field-${U}-dropdown-${f}`):l.jsx(md,{...H,aliasOptions:v,aliasCatalog:w,onOpenComposer:j,onChange:k.get(U),onEnter:W.get(U),multiline:b.multiline},`field-${U}-string-${f}`)}})}),I},[z,xe,ee,f,r,v,w,j,L,k,W,m,h]),de=u.useMemo(()=>{const I=new Map;return ne.forEach(C=>I.set(C.name,C)),I},[ne]);u.useEffect(()=>{y==null||y(ne.map(I=>I.name))},[ne,y]);const $=u.useCallback(I=>{const C=ne.map(q=>q.name),b=de.get(I);if(!b)return;const U=C.indexOf(I),A=U>0?C[U-1]:null,B=U>=0&&U<C.length-1?C[U+1]:null;g(q=>q+1),i==null||i({name:I,label:b.label,description:b.description,render:q=>b.render(q||N.current),order:C,index:U>=0?U:0,total:C.length,onPrev:A?()=>$(A):null,onNext:B?()=>$(B):null})},[de,i,ne]);return l.jsx("div",{className:"settings-list",children:z.map(I=>{const C=ps(I),b=C.paramName,U=xe.get(b);if(U){const{id:te,label:V,highParam:X,lowParam:Oe,highStrengthParam:ye,lowStrengthParam:Ne,highCfg:ve,lowCfg:je}=U,ke=ye?t[ye]:void 0,se=Ne?t[Ne]:void 0,we=ke??se??1,he=b?`param-${b}`:void 0,Ce=o?x[b]??!0:!!x[b],Le=Ce?_(C,[t[X],t[Oe]].filter(Boolean).join("  ")):null,Pe=(T=t)=>{const Y=ye?T==null?void 0:T[ye]:void 0,ce=Ne?T==null?void 0:T[Ne]:void 0,me=Y??ce??we;return l.jsx(jd,{name:te||X,label:V||C.label,highParam:X,lowParam:Oe,highChoices:ve.choices,lowChoices:je.choices,formData:T,onChangeParam:L,highStrengthParam:ye,lowStrengthParam:Ne,strengthValue:me,highStrengthValue:Y,lowStrengthValue:ce,onChangeHighStrength:ye?k.get(ye):void 0,onChangeLowStrength:Ne?k.get(Ne):void 0,disabled:!1},`lora-${b}`)};return l.jsx("div",{id:he,"data-param-name":b,"data-param-label":V||C.label,"data-param-type":"lora_pair",className:"settings-row",children:l.jsx(mo,{id:b,label:V||C.label,description:C.description,preview:Le,expanded:!Ce,onToggle:ie.get(b),children:Ce?null:Pe(t)})},`lora_pair_${te||X}`)}if(ee.has(b))return null;const A=t[b],q={name:b,label:C.label,description:C.description,value:A,disabled:!1,defaultValue:C.defaultValue},H=(te=t,V=!1)=>{const X={...q,value:te==null?void 0:te[b]};return C.paramType==="NUMBER"?l.jsx(Ns,{...X,inputId:b,onChange:k.get(b),min:C.min,max:C.max,step:C.step,isFloat:!0},`field-${b}-number-${f}`):C.paramType==="BOOLEAN"?l.jsx(yd,{...X,onChange:k.get(b)},`field-${b}-bool-${f}`):C.paramType==="DROPDOWN"?l.jsx(ba,{...X,workflowName:r,onChange:k.get(b),options:C.choices||[]},`field-${b}-dropdown-${f}`):l.jsx(md,{...X,aliasOptions:v,aliasCatalog:w,onOpenComposer:j,onChange:k.get(b),onEnter:W.get(b),multiline:C.multiline||m===b||V},`field-${b}-string-${f}`)},D=b?`param-${b}`:void 0,M=o?x[b]??!0:!!x[b];if(C.paramType==="BOOLEAN")return l.jsx("div",{id:D,"data-param-name":b,"data-param-label":C.label,"data-param-type":"single",className:"settings-row",children:l.jsx(mo,{id:b,label:C.label,description:C.description,trailing:H(t,!0)})},b);const J=M?_(C,A):null;return l.jsx("div",{id:D,"data-param-name":b,"data-param-label":C.label,"data-param-type":"single",className:"settings-row",children:l.jsx(mo,{id:b,label:C.label,description:C.description,preview:J,expanded:!M,onToggle:ie.get(b),children:M?null:H(t,!0)})},b)})})}function Tx(e){return(e||[]).map(t=>{var n;if(["CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput","CozyGenChoiceInput"].includes(t.class_type)){let r=t.class_type.replace("CozyGen","").replace("Input","").toUpperCase();return r==="CHOICE"&&(r="DROPDOWN"),{...t,inputs:{...t.inputs,param_type:r,Multiline:((n=t.inputs)==null?void 0:n.display_multiline)||!1}}}return t})}function zx({workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,sectionRef:s,compactControls:i=!1,collapseAllState:o=null,onSpotlight:a,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:m,aliasOptions:h=[],aliasCatalog:y=[],onOpenComposer:v}){const w=u.useMemo(()=>Tx((t||[]).filter(j=>j.class_type!=="CozyGenImageInput")),[t]);return l.jsx("section",{className:"settings-surface scroll-mt-24",ref:s,children:l.jsx(Ix,{workflowName:e,inputs:w,formData:n,onFormChange:r,compactControls:i,collapseAllKey:(o==null?void 0:o.key)??0,collapseAllCollapsed:(o==null?void 0:o.collapsed)??!0,onSpotlight:a,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:m,aliasOptions:h,aliasCatalog:y,onOpenComposer:v})})}function $x({workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,parameterSectionRef:s,compactControls:i=!0,collapseAllState:o=null,onSpotlight:a,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:m,aliasOptions:h=[],aliasCatalog:y=[],onOpenComposer:v}){return l.jsx(zx,{workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,sectionRef:s,compactControls:i,collapseAllState:o,onSpotlight:a,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:m,aliasOptions:h,aliasCatalog:y,onOpenComposer:v})}const go=u.forwardRef(function({title:t,kicker:n,meta:r,defaultOpen:s=!0,variant:i="card",className:o="",bodyClassName:a,children:c},d){const m=i==="bare",h=(m?["collapsible-section","collapsible-section--bare",o]:["ui-panel","collapsible-card","sectioned-card",o]).filter(Boolean).join(" "),y=(m?["collapsible-section-body",a||"space-y-4"]:["collapsible-card-body",a||"space-y-4"]).filter(Boolean).join(" "),v=r!=null?l.jsx("div",{className:"collapsible-card-summary-meta",children:r}):null;return l.jsxs("details",{ref:d,className:h,open:s,children:[l.jsxs("summary",{className:m?"collapsible-section-summary":"collapsible-card-summary",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[n?l.jsx("span",{className:"ui-kicker",children:n}):null,l.jsx("span",{className:"text-sm font-semibold tracking-wide",children:t})]}),v,m?l.jsx("span",{className:"collapsible-section-chevron","aria-hidden":"true",children:l.jsx(Ic,{size:16})}):null]}),l.jsx("div",{className:y,children:c})]})});function kd(e){try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return""}}function Ax({open:e,onClose:t,logs:n=[],onClear:r}){const s=u.useMemo(()=>(n||[]).map(i=>`[${kd(i.ts)}] ${String(i.level||"info").toUpperCase()} ${i.message}`).join(`
`),[n]);return l.jsx(xt,{open:e,onClose:t,title:"Run logs",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>{var i,o;try{(o=(i=navigator.clipboard)==null?void 0:i.writeText)==null||o.call(i,s||"")}catch{}},children:"Copy"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:r,children:"Clear"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Close"})]}),children:l.jsx("pre",{className:"runlog-pre",children:n!=null&&n.length?n.map((i,o)=>l.jsxs("div",{className:`runlog-line is-${i.level||"info"}`,children:[l.jsx("span",{className:"runlog-ts",children:kd(i.ts)}),l.jsx("span",{className:"runlog-msg",children:i.message})]},`${i.ts}-${o}`)):"No logs yet."})})}function Mx(){const[e,t]=u.useState([]),[n,r]=u.useState(null),[s,i]=u.useState(!0),[o,a]=u.useState(null);u.useEffect(()=>{let d=!1;async function m(){i(!0),a(null);try{const h=await xv();if(d)return;const y=(h==null?void 0:h.workflows)||[];t(y);let v=null;try{if(v=typeof window<"u"?sessionStorage.getItem("selectedWorkflow"):null,typeof window<"u")try{localStorage.removeItem("selectedWorkflow")}catch{}}catch{v=null}if(v&&y.includes(v))r(v);else if(y.length>0){r(y[0]);try{typeof window<"u"&&sessionStorage.setItem("selectedWorkflow",y[0])}catch{}}else r(null)}catch(h){if(d)return;console.error("Failed to load workflows",h),a(h)}finally{d||i(!1)}}return m(),()=>{d=!0}},[]);const c=u.useCallback(d=>{r(d);try{if(typeof window<"u"&&sessionStorage.setItem("selectedWorkflow",d),typeof window<"u")try{localStorage.removeItem("selectedWorkflow")}catch{}}catch{}},[]);return{workflows:e,selectedWorkflow:n,selectWorkflow:c,loading:s,error:o}}const Ox={clip_name1:"clip",clip_name2:"clip",unet_name:"unet",vae_name:"vae",sampler_name:"sampler",scheduler:"scheduler"},Fx=["CozyGenDynamicInput","CozyGenImageInput","CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput","CozyGenChoiceInput"];function Dx(e){const[t,n]=u.useState(null),[r,s]=u.useState([]),[i,o]=u.useState({}),[a,c]=u.useState(!1),[d,m]=u.useState(null);u.useEffect(()=>{if(!e){n(null),s([]),o({});return}let w=!1;const j=new AbortController;async function x(){c(!0),m(null);try{typeof performance<"u"&&performance.mark&&performance.mark("cozygen:workflow:load")}catch{}try{const p=await wv(e,{signal:j.signal});if(w)return;for(const L in p){const F=p[L];F.class_type==="CozyGenImageInput"&&!F.inputs.param_name&&(F.inputs.param_name="Image Input"),p[L].id=L}n(p);const f=Object.values(p).filter(L=>Fx.includes(L.class_type)),g=await Promise.all(f.map(async L=>{const F=L.class_type==="CozyGenDynamicInput"&&L.inputs.param_type==="DROPDOWN",z=L.class_type==="CozyGenChoiceInput";if(F||z){const k=L.inputs.param_name;let W=L.inputs.choice_type||L.properties&&L.properties.choice_type;if(!W&&F&&(W=Ox[k]),W)try{const ie=await jv(W,{signal:j.signal});L.inputs.choices=ie.choices||[]}catch(ie){(ie==null?void 0:ie.name)!=="AbortError"&&console.error(`Choices for ${k} failed`,ie),L.inputs.choices=[]}}return L}));if(w)return;s(g);const N=hx(e),_={};g.forEach(L=>{const F=L.inputs.param_name;if(!F)return;if(N[F]!==void 0){_[F]=N[F];return}let z;if(["CozyGenDynamicInput","CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput"].includes(L.class_type)){if(z=L.inputs.default_value,L.class_type==="CozyGenIntInput"){const k=parseInt(z,10);z=Number.isNaN(k)?0:k}else if(L.class_type==="CozyGenFloatInput"){const k=parseFloat(z);z=Number.isNaN(k)?0:k}}else if(L.class_type==="CozyGenChoiceInput"){const k=L.inputs.choices||[];z=k.length?k[0]:""}else L.class_type,z="";_[F]=z}),o(_);try{typeof performance<"u"&&performance.measure&&(performance.mark("cozygen:workflow:ready"),performance.measure(`cozygen:workflow:ready:${e||"unknown"}`,"cozygen:workflow:load","cozygen:workflow:ready"))}catch{}}catch(p){if(w)return;console.error("Failed to load workflow",p),m(p),n(null),s([])}finally{w||c(!1)}}return x(),()=>{mx(e),w=!0,j.abort()}},[e]);const h=u.useMemo(()=>r.filter(w=>w.class_type==="CozyGenImageInput"),[r]),y=h[0]||null,v=u.useCallback((w,j)=>{o(x=>{const p={...x,[w]:j};return e&&$c(e,p),p})},[e]);return{workflowData:t,dynamicInputs:r,imageInputs:h,primaryImageInput:y,formData:i,setFormData:o,handleFormChange:v,loading:a,error:d}}const Cd="::";function Cs(e){const t={};return Object.entries(e||{}).forEach(([n,r])=>{const s=String(n||"").trim();if(!s||typeof r!="string")return;const i=r.trim();i&&(t[s]=i)}),t}function Ac(e){const t=new Map;return Object.entries(Cs(e)).forEach(([n,r])=>{const s=n.toLowerCase();t.set(s,r),s.includes(Cd)&&t.set(s.replace(Cd,":"),r)}),t}function Lh(e,t){if(typeof e!="string"||!e.includes("$"))return e;const n=t instanceof Map?t:Ac(t);return n.size?e.replace(/\$([a-z0-9_:-]+)\$/gi,(r,s)=>{const i=n.get(s.toLowerCase());return typeof i=="string"?i:r}):e}function Ux(e,t){const n=t instanceof Map?t:Ac(t);if(!n.size||!e||typeof e!="object")return e;let r=!1;const s={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"){const a=Lh(o,n);s[i]=a,a!==o&&(r=!0)}else s[i]=o}),r?s:e}function Bx(e){return e?JSON.parse(JSON.stringify(e)):{}}function Vx(e,t,n){const r=Bx(e),s={...n||{}};if(!t||!Array.isArray(t))return{workflow:r,formData:s};for(const i of t){if(!i||!i.id||!i.inputs||!r[i.id])continue;const o=i.inputs.param_name;if(!o||i.class_type==="CozyGenImageInput")continue;let a=s[o];const c=r[i.id];if(!c||!c.inputs)continue;const d=i.class_type;a===void 0&&(d==="CozyGenChoiceInput"?a=i.inputs.value??i.inputs.default_choice??(i.inputs.choices&&i.inputs.choices[0])??"":a=i.inputs.default_value),a===void 0&&(a=""),s[o]=a,d==="CozyGenFloatInput"||d==="CozyGenIntInput"||d==="CozyGenStringInput"||d==="CozyGenDynamicInput"?c.inputs.default_value=a:d==="CozyGenChoiceInput"&&(c.inputs.value=a)}return{workflow:r,formData:s}}function Wx({selectedWorkflow:e,workflowData:t,dynamicInputs:n,imageInputs:r,formData:s,setFormData:i,promptAliases:o=null}){const[a,c]=u.useState(!1),[d,m]=u.useState(!1),[h,y]=u.useState(0),[v,w]=u.useState(0),[j,x]=u.useState("Idle"),[p,f]=u.useState("idle"),[g,N]=u.useState([]),_=u.useRef({ts:0,value:0,max:0}),L=u.useRef(null),F=u.useRef(t),z=u.useRef(s),k=u.useRef(!1),W=u.useRef(0),ie=u.useRef(0),ue=u.useRef("idle"),re=u.useRef(null),xe=u.useRef(null);u.useEffect(()=>{F.current=t},[t]),u.useEffect(()=>{k.current=d},[d]),u.useEffect(()=>{W.current=h},[h]),u.useEffect(()=>{ie.current=v},[v]),u.useEffect(()=>{ue.current=p},[p]),u.useEffect(()=>{z.current=s},[s]);const ee=()=>{re.current&&(clearTimeout(re.current),re.current=null)},ne=()=>{xe.current&&(clearTimeout(xe.current),xe.current=null)},de=u.useCallback((B,q,H=null)=>{const D={ts:Date.now(),level:B||"info",message:String(q||""),extra:H||null};N(M=>{const J=[...M||[],D];return J.length>250?J.slice(J.length-250):J})},[]),$=u.useCallback(()=>N([]),[]),I=()=>{if(!(typeof window>"u"||typeof window.dispatchEvent!="function"))try{window.dispatchEvent(new CustomEvent("cozygen:queue-finished"))}catch{}},C=()=>{ne(),xe.current=setTimeout(()=>{k.current||(f("idle"),x("Idle"),y(0),w(0))},8e3)},b=u.useCallback(()=>{ee(),c(!1),m(!1),y(0),w(0),x("Finished"),f("finished"),de("success","Finished"),C(),I()},[de]),U=u.useCallback((B="Error")=>{ee(),c(!1),m(!1),x(B),f("error"),de("error",B||"Error"),C()},[de]);u.useEffect(()=>{ee(),!(!d||!v||v<=0||h<v)&&(re.current=setTimeout(()=>{const B=k.current,q=W.current,H=ie.current,D=ue.current;B&&H>0&&q>=H&&D!=="finished"&&D!=="error"&&b()},800))},[d,h,v,b]),u.useEffect(()=>{const B=()=>{const q=window.location.protocol==="https:"?"wss":"ws",H=window.location.host,D=Ec(),M=`${q}://${H}/ws${D?`?token=${encodeURIComponent(D)}`:""}`,J=new WebSocket(M);L.current=J,J.onmessage=te=>{var Oe,ye,Ne;if(typeof te.data!="string")return;let V;try{V=JSON.parse(te.data)}catch{return}const X=V.type;if(X==="cozygen_batch_ready"){b();return}if(X==="execution_success"||X==="execution_finished"){k.current&&b();return}if(X==="execution_error"||X==="execution_interrupted"){de("error","Execution error"),U("Execution error");return}if(X==="status"){const ve=V.data||{},je=ve.status||ve,ke=je.exec_info||ve.exec_info||je;if(ke&&k.current){const se=ke.queue_remaining??ke.queue_pending??ke.queue_remaining_items??0;(ke.queue_running??ke.running??0)===0&&se===0&&b()}return}if(X==="executing"){ne(),f("running");const ve=(Oe=V.data)==null?void 0:Oe.node,je=F.current;if(ve&&je&&je[ve]){const ke=je[ve],se=ke.title||ke.class_type||"Node";de("info",`Executing: ${se}`,{nodeId:ve}),x(`Executing: ${se}`)}else de("info","Executing"),x("Executing");return}if(X==="progress"){const ve=((ye=V.data)==null?void 0:ye.value)??0,je=((Ne=V.data)==null?void 0:Ne.max)??0;y(ve),w(je);const ke=Date.now(),se=_.current;ke-se.ts>2500&&(ve!==se.value||je!==se.max)&&je>0&&(_.current={ts:ke,value:ve,max:je},de("info",`Progress: ${ve}/${je}`));return}},J.onclose=()=>{setTimeout(B,1e3)}};return B(),()=>{ee(),ne(),L.current&&(L.current.onclose=null,L.current.close())}},[de,U,b]);const A=u.useCallback(async(B={})=>{if(!t)return;const{overrides:q=null,persistFormState:H=!0}=B||{};ee(),ne(),c(!0),m(!0),x("Queuing prompt"),f("queued"),y(0),w(0),de("info","Queuing prompt",{workflow:e||""});const D=z.current||{},M=q?{...D,...q||{}}:D,J=Ux(M,o||{}),{workflow:te,formData:V}=Vx(t,n||[],J||{}),X={...V,...M};H&&e&&$c(e,X),H&&i(X);const Oe=r||[];for(const ye of Oe){if(!ye||!ye.id||!ye.inputs)continue;const Ne=ye.inputs.param_name;if(!Ne)continue;const ve=X[Ne];if(!ve){alert(`Please upload or select an image for "${Ne}" before generating.`),U("Missing image input");return}te[ye.id]&&te[ye.id].inputs&&(te[ye.id].inputs.image_filename=ve)}try{let ye=te;if(o){const Ne=ve=>{if(typeof ve=="string")return Lh(ve,o);if(Array.isArray(ve))return ve.map(je=>Ne(je));if(ve&&typeof ve=="object"){const je=Array.isArray(ve)?[]:{};return Object.entries(ve).forEach(([ke,se])=>{je[ke]=Ne(se)}),je}return ve};try{ye=Ne(te)}catch{ye=te}}Pv({workflowName:e,workflow:ye,timestamp:Date.now()}),await ch({prompt:ye}),de("info","Prompt queued")}catch(ye){console.error("Failed to queue prompt",ye),ye!=null&&ye.unauthorized?(de("error","Session expired. Please sign in again."),U("Session expired. Please sign in again."),window.location.hash="#/login"):(de("error","Error queuing prompt"),U("Error queuing prompt"))}},[t,n,r,o,e,i,U,de]);return{isLoading:a,progressValue:h,progressMax:v,statusText:j,statusPhase:p,handleGenerate:A,logEntries:g,clearLogs:$}}const Hx="cozygen_field_order_v1";function Gx(e,t){if(!e)return t;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:t}catch{return t}}function Kx(){if(typeof window>"u")return{};try{return Gx(window.localStorage.getItem(Hx),{})}catch{return{}}}function Qx(e){if(Array.isArray(e))return{order:e.filter(Boolean),hidden:{}};if(!e||typeof e!="object")return{order:[],hidden:{}};const t=Array.isArray(e.order)?e.order.filter(Boolean):[],n=e.hidden&&typeof e.hidden=="object"?e.hidden:{};return{order:t,hidden:n}}function Yx(e){if(!e)return{order:[],hidden:{}};const n=Kx()[e];return Qx(n)}function Xx(e,t){let n=Array.isArray(t)?t:[];if(!e||n.length===0)return n;const{order:r,hidden:s}=Yx(e);if(r&&r.length){const i=new Map;n.forEach(a=>{var d;const c=(d=a==null?void 0:a.inputs)==null?void 0:d.param_name;c&&!i.has(c)&&i.set(c,a)});const o=[];r.forEach(a=>{const c=i.get(a);c&&(o.push(c),i.delete(a))}),n.forEach(a=>{var d;const c=(d=a==null?void 0:a.inputs)==null?void 0:d.param_name;if(!c){o.push(a);return}i.has(c)&&(o.push(a),i.delete(c))}),n=o}return n=n.filter(i=>{var a;const o=(a=i==null?void 0:i.inputs)==null?void 0:a.param_name;return o?!s[o]:!0}),n}const _h="cozygen_prompt_aliases",Ph="cozygen_alias_categories",Rh="cozygen_alias_category_list";function Ed(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem(_h);return e?JSON.parse(e)||{}:{}}catch{return{}}}function yo(e){if(!(typeof window>"u"))try{window.localStorage.setItem(_h,JSON.stringify(e||{}))}catch{}}function bd(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem(Ph);return e?JSON.parse(e)||{}:{}}catch{return{}}}function vo(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Ph,JSON.stringify(e||{}))}catch{}}function Ld(){if(typeof window>"u")return[];try{const e=window.localStorage.getItem(Rh);return Array.isArray(JSON.parse(e))?JSON.parse(e):[]}catch{return[]}}function xo(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Rh,JSON.stringify(e||[]))}catch{}}function Ih(){const[e,t]=u.useState(()=>Ed()),[n,r]=u.useState(()=>bd()),[s,i]=u.useState(()=>Ld()),[o,a]=u.useState(!1),[c,d]=u.useState(!1),[m,h]=u.useState(null),y=u.useCallback(async()=>{a(!0),h(null);try{const x=await Nv(),p=Cs((x==null?void 0:x.items)||x||{}),f=(x==null?void 0:x.categories)||{},g=Array.isArray(x==null?void 0:x.categoryList)?x.categoryList:[];t(p),r(f),i(g),yo(p),vo(f),xo(g)}catch(x){console.error("Failed to load prompt aliases",x),h(x);const p=Cs(Ed()),f=bd(),g=Ld();t(p),r(f),i(g)}finally{a(!1)}},[]),v=u.useCallback(async x=>{const p=(x==null?void 0:x.items)||x||{},f=(x==null?void 0:x.categories)||n||{},g=Array.isArray(x==null?void 0:x.categoryList)&&x.categoryList.length?x.categoryList:s.length?s:Array.from(new Set(Object.values(f).filter(Boolean))),N=Cs(p||{});d(!0),h(null);try{await kv({items:N,categories:f,categoryList:g}),t(N),r(f),i(g),yo(N),vo(f),xo(g)}catch(_){throw console.error("Failed to save prompt aliases",_),h(_),yo(N),vo(f),xo(g),_}finally{d(!1)}},[n,s]);u.useEffect(()=>{y()},[y]);const w=u.useMemo(()=>{const x=Ac(e),p=new Map(x);return Object.entries(n||{}).forEach(([f,g])=>{const N=String(g||"").trim();N&&(e!=null&&e[f])&&p.set(`${N}:${f}`,e[f])}),p},[e,n]),j=u.useMemo(()=>{const x=new Set,p=[];return w.forEach((f,g)=>{let N=g.includes("::")?g.replace("::",":"):g;const _=N.split(":");_.length>=3&&_[0]&&_[1]&&_[0].toLowerCase()===_[1].toLowerCase()&&(N=[_[0],..._.slice(2)].join(":"));const L=N.toLowerCase();x.has(L)||(x.add(L),p.push(N))}),p},[w]);return{aliases:e,aliasCategories:n,categoryList:s,aliasLookup:w,aliasOptions:j,loading:o,saving:c,error:m,refreshAliases:y,persistAliases:v}}const qx=u.memo(function({workflows:t,selectedWorkflow:n,onWorkflowChange:r,workflowData:s}){return l.jsx("div",{className:"context-bar",children:l.jsx("div",{className:"context-chip",children:l.jsxs("select",{value:n||"",onChange:i=>r(i.target.value),className:"context-select","aria-label":"Workflow",children:[l.jsx("option",{value:"",children:"Select workflow"}),t.map(i=>l.jsx("option",{value:i,children:i},i))]})})})});function _d(){const{workflows:e=[],selectedWorkflow:t,selectWorkflow:n}=Mx(),{workflowData:r,dynamicInputs:s=[],imageInputs:i=[],formData:o,setFormData:a,handleFormChange:c}=Dx(t),{aliases:d,aliasCategories:m,aliasLookup:h,aliasOptions:y}=Ih(),{isLoading:v,progressValue:w,progressMax:j,statusText:x,statusPhase:p,handleGenerate:f,logEntries:g,clearLogs:N}=Wx({selectedWorkflow:t,workflowData:r,dynamicInputs:s,imageInputs:i,formData:o,setFormData:a,promptAliases:h}),_=u.useRef(null),L=u.useRef(null),[F,z]=u.useState(()=>vx()),[k,W]=u.useState(null),ie=(k==null?void 0:k.name)||"",ue=u.useCallback(()=>W(null),[]),[re,xe]=u.useState(!1),[ee,ne]=u.useState("prompt"),[de,$]=u.useState(!1),[I,C]=u.useState([]),b=u.useRef(new Map),U=u.useMemo(()=>Xx(t,s),[t,s]),A=u.useMemo(()=>{const se=(U||s||[]).filter(T=>(T==null?void 0:T.class_type)!=="CozyGenImageInput"),we=/\b(checkpoint|ckpt|lora|model|vae|embedding|clip|sampler|scheduler|seed)\b/i,he=T=>{const Y=String((T==null?void 0:T.paramName)||"").toLowerCase(),ce=String((T==null?void 0:T.label)||"").toLowerCase(),me=`${Y} ${ce}`,Te=o==null?void 0:o[T==null?void 0:T.paramName],Ke=typeof Te=="string"?Te:"";let Re=0;return me.includes("prompt")&&(Re+=100),me.includes("negative")&&me.includes("prompt")&&(Re-=15),T!=null&&T.multiline&&(Re+=10),Ke.includes("$")&&(Re+=20),we.test(me)&&(Re-=200),ks(Ke)&&(Re-=200),Re};if(typeof(o==null?void 0:o.prompt)=="string")return"prompt";const Ce=se.map(T=>ps(T)).filter(T=>(T==null?void 0:T.paramType)==="STRING"&&(T==null?void 0:T.paramName));if(!Ce.length){const T=Object.entries(o||{}).find(([,ce])=>typeof ce=="string"&&ce.includes("$")&&!ks(ce));if(T)return T[0];const Y=Object.entries(o||{}).find(([,ce])=>typeof ce=="string"&&!ks(ce));return(Y==null?void 0:Y[0])||"prompt"}let Le=Ce[0],Pe=he(Le);for(let T=1;T<Ce.length;T++){const Y=Ce[T],ce=he(Y);ce>Pe&&(Le=Y,Pe=ce)}return(Le==null?void 0:Le.paramName)||"prompt"},[s,o,U]),B=u.useMemo(()=>{const se=[];return Object.entries(d||{}).forEach(([we,he])=>{const Ce=String(we).split("::"),Le=Ce.length>1,Pe=m&&m[we]||(Le?Ce[0]:""),T=Le?Ce.slice(1).join("::"):we,Y={key:we,name:T,category:Pe,text:he,token:Pe?`${Pe}:${T}`:T};se.push({...Y,...zc(Y)})}),se},[d,m]);u.useEffect(()=>{if(p==="finished"&&typeof window<"u"){try{window.localStorage.setItem("cozygen_gallery_pending","1")}catch{}window.dispatchEvent(new Event("cozygen:gallery-pending"))}},[p]);const q=u.useCallback(se=>{!se||se===t||(t&&$c(t,o||{},{immediate:!0}),n(se))},[o,t,n]),H=u.useCallback((se="prompt")=>{ne(se),xe(!0)},[]),D=u.useCallback(se=>{ee&&c(ee,se)},[ee,c]),M=u.useCallback(()=>{H(A||"prompt")},[H,A]),J=i||[],te=!!(r&&t),V=J.length>0,X=r?V?`${J.length} slots`:"No inputs":"Waiting",Oe=r?"":"Waiting",ye=u.useCallback((se,we)=>{const he=b.current;we&&se&&he.set(se,we);const Ce=I.length?I:(we==null?void 0:we.order)||[],Le=Ce.length,Pe=Le>0?Ce.indexOf(se):-1,T=Pe>0?Ce[Pe-1]:null,Y=Pe>=0&&Pe<Le-1?Ce[Pe+1]:null,ce=T?he.get(T):null,me=Y?he.get(Y):null;return{...we,index:Pe>=0?Pe:0,total:Le,onPrev:ce?()=>W(ye(T,ce)):null,onNext:me?()=>W(ye(Y,me)):null,onRender:f}},[I,f]),Ne=u.useCallback(se=>{const we=se||[];C(he=>he.length===we.length&&he.every((Ce,Le)=>Ce===we[Le])?he:we)},[]),ve=u.useCallback(se=>{const we=se||"";z(we),yx(we)},[]),je=u.useCallback(se=>{se!=null&&se.name&&W(ye(se.name,se))},[ye]),ke=u.useCallback(()=>{var se;return(se=k==null?void 0:k.render)==null?void 0:se.call(k,o)},[k,o]);return u.useEffect(()=>{const se=()=>{!te||v||f()};return window.addEventListener("cozygen:request-render",se),()=>window.removeEventListener("cozygen:request-render",se)},[f,te,v]),u.useEffect(()=>{const se=we=>{var Ce;const he=(Ce=we==null?void 0:we.detail)==null?void 0:Ce.fieldName;if(typeof he=="string"&&he.trim()){H(he.trim());return}M()};return window.addEventListener("cozygen:open-composer",se),()=>window.removeEventListener("cozygen:open-composer",se)},[H,M]),u.useEffect(()=>{const se=p==="queued"||p==="running"||v;try{window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:se}}))}catch{}},[p,v]),!e||e.length===0?l.jsx("div",{className:"page-shell",children:l.jsx("div",{className:"neon-card px-3 py-3 sm:px-4 sm:py-4",children:l.jsx("p",{className:"text-sm text-[#9DA3FFCC]",children:"No workflows found. Drop a workflow file in CozyGen and refresh."})})}):l.jsxs("div",{className:"page-shell page-stack has-dock",children:[l.jsxs(go,{kicker:"Parameters",title:l.jsxs(l.Fragment,{children:[l.jsx(Rv,{size:18,className:"inline-block mr-2 align-text-bottom"}),"Controls"]}),meta:Oe,bodyClassName:"control-shell",defaultOpen:!0,variant:"bare",children:[l.jsx(qx,{workflows:e,selectedWorkflow:t,onWorkflowChange:q,workflowData:r}),r?l.jsx($x,{workflowName:t,dynamicInputs:U,formData:o,onFormChange:c,parameterSectionRef:_,compactControls:!0,lastEditedParam:F,spotlightName:ie,onCloseSpotlight:ue,onVisibleParamsChange:Ne,aliasOptions:y,aliasCatalog:B,onOpenComposer:H,onParamEdited:ve,onSpotlight:je}):l.jsxs("div",{className:"empty-state-inline",children:[l.jsx("span",{className:"empty-state-arrow",children:l.jsx(Av,{size:20})}),l.jsx("span",{children:"Select a workflow above to get started"})]})]}),l.jsx(go,{kicker:"Run",title:l.jsxs(l.Fragment,{children:[l.jsx(Iv,{size:18,className:"inline-block mr-2 align-text-bottom"}),"Status"]}),meta:x||"Idle",defaultOpen:!1,className:"studio-status-card is-compact",children:l.jsxs("div",{className:"run-status-strip",children:[l.jsxs("div",{className:"run-status-left",children:[l.jsx("div",{className:`run-status-dot is-${p||"idle"}`,"aria-hidden":"true"}),l.jsxs("div",{className:"run-status-text",children:[l.jsx("div",{className:"run-status-phase",children:p||"idle"}),l.jsx("div",{className:"run-status-msg",children:x||"Idle"})]})]}),l.jsxs("div",{className:"run-status-actions",children:[v&&j>0?l.jsx("div",{className:"run-status-meter","aria-label":"Progress",children:l.jsx("div",{className:"run-status-meter-fill",style:{width:`${Math.max(0,Math.min(100,Math.round((w||0)/j*100)))}%`}})}):null,l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>$(!0),children:"View logs"})]})]})}),V?l.jsx(go,{ref:L,className:"scroll-mt-24 is-compact",kicker:"Assets",title:l.jsxs(l.Fragment,{children:[l.jsx(Tv,{size:18,className:"inline-block mr-2 align-text-bottom"}),"Images"]}),meta:X,defaultOpen:!1,variant:"bare",children:r?l.jsx("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:J.map(se=>l.jsx(Xv,{input:se,value:o[se.inputs.param_name]||"",onFormChange:c},se.id))}):null}):null,l.jsx("section",{className:"dock-panel",children:l.jsx(Vv,{busy:v,progressValue:w,progressMax:j,statusText:x,statusPhase:p,primaryLabel:"Render",onPrimary:f,primaryDisabled:!te})}),l.jsx(qv,{open:!!k,onClose:ue,title:k==null?void 0:k.label,description:k==null?void 0:k.description,render:ke,index:(k==null?void 0:k.index)??0,total:(k==null?void 0:k.total)??0,onPrev:(k==null?void 0:k.onPrev)||null,onNext:(k==null?void 0:k.onNext)||null,onRender:(k==null?void 0:k.onRender)||null,children:null}),l.jsx(lx,{open:re,onClose:()=>xe(!1),value:(o==null?void 0:o[ee])||"",onChange:D,aliasOptions:y,aliasCatalog:B,aliasLookup:h,fieldLabel:ee}),l.jsx(Ax,{open:de,onClose:()=>$(!1),logs:g,onClear:N})]})}function Jx({subfolder:e,crumbs:t=[],dirChips:n=[],onBack:r,onRoot:s,onCrumb:i,onSelectDir:o}){return l.jsxs("div",{className:"space-y-3 text-[#F8F4FF]",children:[l.jsx("div",{className:"flex items-center justify-start gap-2 flex-wrap"}),l.jsx("div",{className:"flex items-center gap-2 flex-wrap text-[#C3C7FF]",role:"navigation","aria-label":"Gallery path",children:t.map((a,c)=>l.jsxs(u.Fragment,{children:[l.jsx("span",{className:"text-[#6A6FA8]",children:"/"}),l.jsx("button",{type:"button",className:"gallery-chip-btn",onClick:()=>i==null?void 0:i(a.path),"aria-current":c===t.length-1?"page":void 0,children:a.name})]},a.path||a.name||c))}),n.length>0?l.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:n.map(a=>l.jsx("button",{type:"button",className:"gallery-chip-btn",onClick:()=>o==null?void 0:o(a.subfolder),children:a.filename||a.subfolder||"Collection"},a.subfolder||a.filename))}):null]})}const Zx=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e),ew=({src:e,poster:t,autoPlay:n})=>{const r=u.useRef(null);return u.useEffect(()=>{const s=r.current;s&&(s.pause(),s.currentTime=0,s.load())},[e]),u.useEffect(()=>{const s=r.current;if(!s)return;let i;const o=()=>{const c=s.play();c&&typeof c.catch=="function"&&c.catch(()=>{})},a=()=>{s.pause()};return n?typeof window<"u"&&"IntersectionObserver"in window?(i=new IntersectionObserver(d=>{d.forEach(m=>{m.isIntersecting?o():a()})},{threshold:.65}),i.observe(s)):o():(a(),s.currentTime=0),()=>{i&&i.disconnect(),a()}},[n,e]),e?l.jsx("video",{ref:r,src:e,poster:t||void 0,muted:!0,playsInline:!0,loop:!0,preload:"metadata",className:"w-full h-auto max-h-[80vh] rounded-2xl object-contain bg-black/40"}):l.jsx("div",{className:"flex items-center justify-center py-16 text-[11px] text-[#9DA3FFCC]",children:"No preview available"})},Pd={contentVisibility:"auto",containIntrinsicSize:"260px 320px"};function tw({item:e,onSelect:t,variant:n="grid",autoPlay:r=!1}){if(!e)return null;const s=e.type==="directory",i=e.filename||"",o=e.subfolder||"",a=i||o||"Unknown",c=()=>{t&&t(e)},d=n==="feed"?768:384,m=!s&&i?`/cozygen/thumb?type=output&subfolder=${encodeURIComponent(o)}&filename=${encodeURIComponent(i)}&w=${d}`:null,h=!s&&i?(()=>{const v=e.type&&e.type!=="directory"?e.type:"output",w=e.mtime?`&v=${encodeURIComponent(String(e.mtime))}`:"";return`/view?filename=${encodeURIComponent(i)}&subfolder=${encodeURIComponent(o)}&type=${encodeURIComponent(v)}${w}`})():null,y=Zx(i);if(s)return l.jsx("button",{type:"button",onClick:c,className:"gallery-dir-tile",style:Pd,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-7 w-7 rounded-lg bg-gradient-to-br from-[#6B5BFF] to-[#FF4F9A] opacity-80 group-hover:opacity-100 flex items-center justify-center text-[11px] text-white",children:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-[11px] font-medium text-[#E5E7FF] truncate",children:a}),l.jsx("div",{className:"text-[10px] text-[#9DA3FFCC] truncate",children:"Collection"})]})]})});if(n==="feed"){const v={contentVisibility:"auto",containIntrinsicSize:"520px 720px"};return l.jsxs("div",{className:"gallery-feed-item",style:v,children:[l.jsxs("button",{type:"button",onClick:c,className:"gallery-feed-media",children:[l.jsx("div",{className:"relative w-full flex items-center justify-center bg-[#020312]",children:y?l.jsx(ew,{src:h,poster:m,autoPlay:r}):m?l.jsx("img",{src:m,alt:a,className:"w-full h-auto max-h-[80vh] rounded-2xl object-contain bg-black/40",loading:"lazy",decoding:"async"}):l.jsx("div",{className:"flex items-center justify-center py-16 text-[11px] text-[#9DA3FFCC]",children:"No preview available"})}),l.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-[#05071680] opacity-0 group-hover:opacity-100 transition-opacity"}),y&&l.jsx("div",{className:"pointer-events-none absolute left-2 top-2 rounded-md bg-[#050716CC] px-2 py-[1px] text-[10px] text-[#CFFAFE] border border-[#3EF0FF80]",children:"Video"})]}),l.jsx("div",{className:"gallery-feed-meta",children:l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"gallery-feed-title",children:a}),o&&l.jsx("div",{className:"gallery-feed-subfolder",children:o})]})})]})}return l.jsxs("button",{type:"button",onClick:c,className:"gallery-tile",style:Pd,children:[l.jsxs("div",{className:"gallery-tile-media",children:[m?l.jsx("img",{src:m,alt:a,className:"gallery-tile-img",loading:"lazy",decoding:"async"}):l.jsx("div",{className:"gallery-tile-empty",children:"No preview"}),y&&l.jsx("div",{className:"gallery-badge",children:"Video"})]}),l.jsx("div",{className:"gallery-tile-caption",children:l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsx("div",{className:"gallery-tile-title",children:a}),y&&l.jsx("span",{className:"gallery-tile-flag",children:"Vid"})]})})]})}const Rd=u.memo(tw),nw=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e),rw=e=>{if(!e)return"";const t=e.filename||"",n=e.subfolder||"",r=e.type||"output",s=e.mtime?`&v=${encodeURIComponent(String(e.mtime))}`:"";return`/view?filename=${encodeURIComponent(t)}&subfolder=${encodeURIComponent(n)}&type=${encodeURIComponent(r)}${s}`};function sw({isOpen:e,media:t,onClose:n,onPrev:r,onNext:s}){const i=u.useRef(!1);if(u.useEffect(()=>{if(!e)return;const d=m=>{m.key==="Escape"&&(n==null||n()),m.key==="ArrowLeft"&&(r==null||r()),m.key==="ArrowRight"&&(s==null||s())};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e,n,s,r]),!t||!e||typeof document>"u")return null;const o=rw(t),a=t.subfolder||"Gallery",c=nw(t.filename);return Sc.createPortal(l.jsx("div",{className:"react-modal-overlay",role:"presentation",onPointerDown:d=>{i.current=d.target===d.currentTarget},onClick:d=>{i.current&&d.target===d.currentTarget&&(n==null||n())},children:l.jsx("div",{className:"react-modal-content",role:"dialog","aria-modal":"true","aria-label":"Preview",onClick:d=>d.stopPropagation(),children:l.jsxs("div",{className:"media-viewer-panel",children:[l.jsxs("header",{className:"media-viewer-head",children:[l.jsxs("div",{className:"media-viewer-meta",children:[l.jsx("div",{className:"media-viewer-title",title:t.filename,children:t.filename}),l.jsxs("div",{className:"media-viewer-sub",children:[l.jsx("span",{className:"media-chip",children:a}),l.jsx("span",{className:`media-chip ${c?"is-clip":"is-still"}`,children:c?"Video":"Image"})]})]}),l.jsxs("div",{className:"media-viewer-actions",children:[l.jsx("button",{type:"button",className:"media-btn ghost",onClick:r,"aria-label":"Previous item",children:""}),l.jsx("button",{type:"button",className:"media-btn ghost",onClick:s,"aria-label":"Next item",children:""}),l.jsx("a",{href:o,target:"_blank",rel:"noreferrer",className:"media-btn",children:"Open"}),l.jsx("button",{type:"button",className:"media-btn solid",onClick:n,children:"Close"})]})]}),l.jsxs("div",{className:"media-viewer-stage",children:[l.jsx("button",{type:"button",className:"media-stage-nav is-left",onClick:r,"aria-label":"Previous",children:""}),l.jsx("div",{className:"media-viewer-frame",children:c?l.jsx("video",{src:o,controls:!0,className:"media-viewer-media",autoPlay:!0}):l.jsx("img",{src:o,alt:t.filename,className:"media-viewer-media"})}),l.jsx("button",{type:"button",className:"media-stage-nav is-right",onClick:s,"aria-label":"Next",children:""})]})]})})}),document.body)}const lw=(e="")=>e.startsWith("."),iw=(e="")=>/\.(png|jpe?g|gif|webp|bmp|tif?f)$/i.test(e),ow=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e);function aw(){const e=(A,B="")=>{try{return typeof window<"u"&&localStorage.getItem(A)||B}catch{return B}},t=(A,B)=>{try{typeof window<"u"&&localStorage.setItem(A,B)}catch{}},[n,r]=u.useState(e("galleryPath","")),[s,i]=u.useState([]),[o,a]=u.useState(!1),[c,d]=u.useState(!1),[m,h]=u.useState(1),[y,v]=u.useState(1),[w,j]=u.useState(()=>{const A=e("galleryPageSize","30"),B=parseInt(A,10);return Number.isFinite(B)?B:30}),[x,p]=u.useState("all"),[f,g]=u.useState(!1),[N,_]=u.useState(""),[L,F]=u.useState(()=>e("galleryRecursive","0")==="1"),[z,k]=u.useState(0);u.useEffect(()=>{let A=!1;const B=new AbortController;return(async()=>{a(!0);try{typeof performance<"u"&&performance.mark&&performance.mark("cozygen:gallery:fetch")}catch{}try{const H=await uh(n,m,w,f,L,x,z,{signal:B.signal});if(A)return;H&&H.items?(i(H.items),v(H.total_pages||1)):(i([]),v(1));try{typeof performance<"u"&&performance.measure&&(performance.mark("cozygen:gallery:ready"),performance.measure("cozygen:gallery:first-paint","cozygen:gallery:fetch","cozygen:gallery:ready"))}catch{}}catch(H){if((H==null?void 0:H.name)==="AbortError")return;console.error("Failed to load gallery",H),A||(i([]),v(1))}finally{!A&&!B.signal.aborted&&(a(!1),d(!0))}})(),t("galleryPath",n),t("galleryPageSize",String(w)),()=>{A=!0,B.abort()}},[n,m,w,z,f,L,x]);const W=u.useMemo(()=>{if(!n)return[];const A=n.replace(/\\/g,"/").split("/").filter(Boolean),B=[];for(let q=0;q<A.length;q++)B.push({name:A[q],path:A.slice(0,q+1).join("/")});return B},[n]),ie=u.useMemo(()=>s.filter(A=>A.type==="directory").map(A=>({filename:A.filename,subfolder:A.subfolder})),[s]),ue=u.useMemo(()=>{const A=(N||"").trim().toLowerCase();return s.filter(B=>{const q=(B.filename||"").toLowerCase();return!(!f&&lw(q)||B.type!=="directory"&&(x==="image"&&!iw(q)||x==="video"&&!ow(q))||A&&!q.includes(A))})},[s,f,x,N]),re=u.useMemo(()=>ue.filter(A=>A.type!=="directory"),[ue]),xe=u.useCallback(()=>{if(!n)return;const A=n.replace(/\\/g,"/").lastIndexOf("/"),B=A===-1?"":n.slice(0,A);r(B),h(1)},[n]),ee=u.useCallback(()=>{r(""),h(1)},[]),ne=u.useCallback(A=>{r(A||""),h(1)},[]),de=u.useCallback(A=>{r(A),h(1)},[]),$=u.useCallback(A=>{const B=parseInt(String(A),10)||30;j(B),h(1)},[]),I=u.useCallback(A=>{p(A),h(1)},[]),C=u.useCallback(A=>{const B=!!A;F(B),h(1),t("galleryRecursive",B?"1":"0")},[]),b=u.useCallback(A=>{_(A),h(1)},[]),U=u.useCallback(()=>{k(A=>A+1)},[]);return u.useEffect(()=>{const A=()=>U();return typeof window<"u"&&window.addEventListener&&window.addEventListener("cozygen:queue-finished",A),()=>{typeof window<"u"&&window.removeEventListener&&window.removeEventListener("cozygen:queue-finished",A)}},[U]),u.useEffect(()=>{if(typeof window>"u")return;let A=!1,B,q;const H=()=>{q&&(clearTimeout(q),q=null)},D=(J=8e3)=>{H(),q=window.setTimeout(()=>{A||(U(),D(8e3))},J)};return(()=>{if(!("EventSource"in window)){D();return}const J=new URLSearchParams({subfolder:n||"",recursive:L?"1":"0",show_hidden:f?"1":"0"});B=new EventSource(`/cozygen/api/gallery/stream?${J.toString()}`),B.onmessage=()=>{A||U()},B.onerror=()=>{B&&(B.close(),B=null),D()}})(),()=>{A=!0,H(),B&&(B.close(),B=null)}},[n,L,f,U]),{path:n,items:s,loading:o,hasLoaded:c,page:m,totalPages:y,perPage:w,kind:x,showHidden:f,query:N,recursive:L,crumbs:W,dirChips:ie,filtered:ue,mediaItems:re,setPage:h,setPerPage:$,setShowHidden:g,setQuery:b,setKind:I,setRecursive:C,goBack:xe,goRoot:ee,goToPath:ne,selectDir:de,refresh:U}}function cw(e){const[t,n]=u.useState(!1),[r,s]=u.useState(null);u.useEffect(()=>{if(!e||e.length===0){s(null),n(!1);return}s(m=>m==null?m:m>=e.length?e.length-1:m)},[e]);const i=u.useCallback(m=>{if(!e||!e.length||!m)return;const h=e.indexOf(m);h!==-1&&(s(h),n(!0))},[e]),o=u.useCallback(()=>{n(!1),s(null)},[]),a=u.useCallback(()=>{!e||!e.length||s(m=>m==null?m:(m+1)%e.length)},[e]),c=u.useCallback(()=>{!e||!e.length||s(m=>m==null?m:(m-1+e.length)%e.length)},[e]),d=r!=null&&r>=0&&e&&r<e.length?e[r]:null;return{viewerOpen:t,viewerIndex:r,currentMedia:d,open:i,close:o,next:a,prev:c,setViewerOpen:n}}const Id="cozygen_gallery_view_mode",Td="cozygen_gallery_feed_autoplay";function uw(e,t){const n=u.useRef(null),[r,s]=u.useState(0),[i,o]=u.useState({width:0,cols:0,top:0,viewport:typeof window<"u"&&window.innerHeight||800}),a=y=>{if(!y||typeof window>"u")return null;let v=y.parentElement;for(;v;){const w=window.getComputedStyle(v);if(w.overflowY==="auto"||w.overflowY==="scroll")return v;v=v.parentElement}return window};u.useEffect(()=>{if(!t)return;const y=n.current;if(!y||typeof window>"u"||typeof ResizeObserver>"u")return;const v=a(y)||window,w=()=>{const f=y.getBoundingClientRect(),g=f.width||y.clientWidth||1,N=Math.max(1,Math.floor(g/160)),_=v===window?window.scrollY||0:v.scrollTop||0,L=v===window?{top:0}:v.getBoundingClientRect(),F=v===window?f.top+(window.scrollY||0):f.top-L.top+_,z=v===window?window.innerHeight||800:v.clientHeight||800;o(k=>k.width===g&&k.cols===N&&k.top===F&&k.viewport===z?k:{width:g,cols:N,top:F,viewport:z}),s(_)};w();const j=new ResizeObserver(()=>w());j.observe(y),window.addEventListener("resize",w);let x=!1;const p=()=>{x||(x=!0,window.requestAnimationFrame(()=>{x=!1;const f=v===window?window.scrollY||0:v.scrollTop||0;s(f)}))};return v.addEventListener("scroll",p,{passive:!0}),()=>{j.disconnect(),window.removeEventListener("resize",w),v.removeEventListener("scroll",p)}},[t]);const c=t&&i.cols>0&&e.length>60,{visibleItems:d,topSpacer:m,bottomSpacer:h}=u.useMemo(()=>{if(!c)return{visibleItems:e,topSpacer:0,bottomSpacer:0};const y=i.width/i.cols,v=Math.max(180,Math.ceil(y*1.25)+32),w=Math.ceil(e.length/i.cols),j=Math.max(0,r-i.top),x=Math.max(0,Math.floor(j/v)-2),p=Math.min(w,Math.ceil((j+i.viewport)/v)+2),f=x*i.cols,g=Math.min(e.length,p*i.cols);return{visibleItems:e.slice(f,g),topSpacer:x*v,bottomSpacer:Math.max(0,(w-p)*v)}},[e,i,r,c]);return{containerRef:n,visibleItems:d,topSpacer:m,bottomSpacer:h,virtualized:c}}function dw(){const{path:e,loading:t,hasLoaded:n,page:r,totalPages:s,perPage:i,kind:o,showHidden:a,recursive:c,crumbs:d,dirChips:m,filtered:h,mediaItems:y,setPage:v,setPerPage:w,setShowHidden:j,setKind:x,setRecursive:p,goBack:f,goRoot:g,goToPath:N,selectDir:_,refresh:L}=aw(),{viewerOpen:F,currentMedia:z,open:k,close:W,next:ie,prev:ue}=cw(y),[re,xe]=u.useState(()=>{if(typeof window>"u")return"grid";const V=window.localStorage.getItem(Id);return V==="feed"||V==="grid"?V:"grid"}),[ee,ne]=u.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(Td)==="true");u.useEffect(()=>{try{window.localStorage.setItem(Id,re)}catch{}},[re]),u.useEffect(()=>{try{window.localStorage.setItem(Td,ee?"true":"false")}catch{}},[ee]);const de=u.useCallback(V=>{if(V.type==="directory"){_(V.subfolder);return}k(V)},[k,_]),$=re==="grid",[I,C]=u.useState(!1),b=V=>V.type==="directory"?`dir:${V.subfolder||V.filename}`:`${V.subfolder||""}|${V.filename}`;u.useEffect(()=>{try{window.localStorage.setItem("cozygen_gallery_pending","0")}catch{}window.dispatchEvent(new Event("cozygen:gallery-viewed"))},[]);const U=t&&!n,A=t&&n,B=`${h.length} items`,q=U?"Loading":B,{containerRef:H,visibleItems:D,topSpacer:M,bottomSpacer:J,virtualized:te}=uw(h,$);return l.jsxs("div",{className:"page-shell gallery-shell",children:[l.jsx("div",{className:"screen-sticky gallery-header",children:l.jsxs("div",{className:"gallery-header-inner space-y-3",children:[l.jsx(Jx,{subfolder:e,crumbs:d,dirChips:m,onBack:f,onRoot:g,onCrumb:V=>N(V),onSelectDir:V=>_(V)}),l.jsxs("div",{className:"md:hidden flex items-center justify-between gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>C(!0),children:"Filters"}),l.jsxs("div",{className:"gallery-view-toggle",role:"group","aria-label":"View mode",children:[l.jsx("button",{type:"button",className:re==="grid"?"is-active":"",onClick:()=>xe("grid"),"aria-pressed":re==="grid",title:"Grid view",children:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("rect",{x:"1",y:"1",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"9",y:"1",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"1",y:"9",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"9",y:"9",width:"6",height:"6",rx:"1"})]})}),l.jsx("button",{type:"button",className:re==="feed"?"is-active":"",onClick:()=>xe("feed"),"aria-pressed":re==="feed",title:"Feed view",children:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("rect",{x:"2",y:"1",width:"12",height:"5",rx:"1"}),l.jsx("rect",{x:"2",y:"8",width:"12",height:"5",rx:"1"})]})})]})]}),l.jsxs("div",{className:"md:hidden gallery-mobile-meta",children:[A?l.jsx("span",{className:"loading-spinner","aria-hidden":"true"}):null,l.jsxs("span",{children:[q,"  Page ",r," of ",s]})]}),l.jsxs("div",{className:"gallery-toolbar",children:[l.jsx("div",{className:"gallery-toolbar-left",children:l.jsx("div",{className:"gallery-pills",role:"group","aria-label":"Filter by type",children:[{key:"all",label:"All"},{key:"image",label:"Images"},{key:"video",label:"Videos"}].map(V=>l.jsx("button",{type:"button",className:`gallery-pill ${o===V.key?"is-active":""}`,onClick:()=>x(V.key),"aria-pressed":o===V.key,children:V.label},V.key))})}),l.jsxs("div",{className:"gallery-toolbar-right",children:[l.jsxs("div",{className:"gallery-view-toggle",role:"group","aria-label":"View mode",children:[l.jsx("button",{type:"button",className:re==="grid"?"is-active":"",onClick:()=>xe("grid"),"aria-pressed":re==="grid",title:"Grid view",children:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("rect",{x:"1",y:"1",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"9",y:"1",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"1",y:"9",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"9",y:"9",width:"6",height:"6",rx:"1"})]})}),l.jsx("button",{type:"button",className:re==="feed"?"is-active":"",onClick:()=>xe("feed"),"aria-pressed":re==="feed",title:"Feed view",children:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("rect",{x:"2",y:"1",width:"12",height:"5",rx:"1"}),l.jsx("rect",{x:"2",y:"8",width:"12",height:"5",rx:"1"})]})})]}),l.jsxs("div",{className:"gallery-options",children:[l.jsx("button",{type:"button",className:`gallery-option-btn ${c?"is-active":""}`,onClick:()=>p(V=>!V),title:c?"Showing subfolders":"This folder only",children:c?l.jsx(ld,{size:16}):l.jsx(id,{size:16})}),l.jsx("button",{type:"button",className:`gallery-option-btn ${a?"is-active":""}`,onClick:()=>j(V=>!V),title:a?"Showing hidden":"Hiding hidden",children:a?l.jsx(od,{size:16}):l.jsx(ad,{size:16})}),re==="feed"&&l.jsx("button",{type:"button",className:`gallery-option-btn ${ee?"is-active":""}`,onClick:()=>ne(V=>!V),title:ee?"Autoplay on":"Autoplay off",children:ee?l.jsx(cd,{size:16}):l.jsx(ud,{size:16})}),l.jsx("button",{type:"button",className:"gallery-option-btn",onClick:L,title:"Refresh",children:l.jsx(ai,{size:16})})]})]})]}),l.jsxs("div",{className:"gallery-pagination",children:[l.jsxs("div",{className:"gallery-pagination-info",children:[A?l.jsx("span",{className:"loading-spinner","aria-hidden":"true"}):null,l.jsx("span",{className:U?"gallery-loading-text":"",children:q})]}),l.jsxs("div",{className:"gallery-pagination-controls",children:[l.jsx("button",{type:"button",className:"gallery-page-btn",onClick:()=>v(V=>Math.max(1,V-1)),disabled:r<=1||t,"aria-label":"Previous page",children:l.jsx(zv,{size:16})}),l.jsxs("span",{className:"gallery-page-indicator",children:[r," / ",s]}),l.jsx("button",{type:"button",className:"gallery-page-btn",onClick:()=>v(V=>V<s?V+1:V),disabled:r>=s||t,"aria-label":"Next page",children:l.jsx(Ic,{size:16})}),l.jsxs("select",{value:i,onChange:V=>w(parseInt(V.target.value,10)||30),className:"gallery-page-size","aria-label":"Items per page",children:[l.jsx("option",{value:15,children:"15"}),l.jsx("option",{value:30,children:"30"}),l.jsx("option",{value:60,children:"60"}),l.jsx("option",{value:120,children:"120"})]})]})]})]})}),U&&h.length===0?l.jsx("div",{className:"gallery-grid-responsive",children:Array.from({length:8}).map((V,X)=>l.jsxs("div",{className:"gallery-skeleton-item",children:[l.jsx("div",{className:"gallery-skeleton-thumb skeleton"}),l.jsx("div",{className:"gallery-skeleton-label skeleton skeleton-text"})]},X))}):h.length===0?l.jsxs("div",{className:"gallery-empty",children:[l.jsx("div",{className:"gallery-empty-icon",children:l.jsx($v,{size:48})}),l.jsx("div",{className:"gallery-empty-title",children:"No media found"}),l.jsx("div",{className:"gallery-empty-desc",children:o!=="all"?`No ${o}s match your filters. Try selecting "All" or adjusting your search.`:"This folder is empty. Render something new or navigate to a different folder."})]}):$?l.jsx("div",{className:"w-full overflow-hidden",children:l.jsxs("div",{className:"gallery-grid-responsive",ref:H,children:[te&&M>0?l.jsx("div",{"aria-hidden":!0,style:{gridColumn:"1 / -1",height:`${M}px`}}):null,D.map(V=>l.jsx(Rd,{item:V,onSelect:de,variant:"grid",autoPlay:!1},b(V))),te&&J>0?l.jsx("div",{"aria-hidden":!0,style:{gridColumn:"1 / -1",height:`${J}px`}}):null]})}):l.jsx("div",{className:"flex flex-col gap-6 items-center",children:h.filter(V=>V.type!=="directory").map(V=>l.jsx("div",{className:"w-full flex justify-center",children:l.jsx(Rd,{item:V,onSelect:de,variant:"feed",autoPlay:ee})},b(V)))}),l.jsx(sw,{isOpen:F,media:z,onClose:W,onPrev:ue,onNext:ie}),l.jsx(xt,{open:I,onClose:()=>C(!1),title:"Gallery filters",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>C(!1),children:"Done"}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Type"}),l.jsx("div",{className:"gallery-pills",role:"group","aria-label":"Filter by type",children:[{key:"all",label:"All"},{key:"image",label:"Images"},{key:"video",label:"Videos"}].map(V=>l.jsx("button",{type:"button",className:`gallery-pill ${o===V.key?"is-active":""}`,onClick:()=>x(V.key),"aria-pressed":o===V.key,children:V.label},V.key))})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Options"}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:`ui-button is-compact ${c?"is-primary":"is-muted"}`,onClick:()=>p(V=>!V),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[c?l.jsx(ld,{size:14}):l.jsx(id,{size:14}),l.jsx("span",{children:c?"Subfolders":"This folder"})]})}),l.jsx("button",{type:"button",className:`ui-button is-compact ${a?"is-primary":"is-muted"}`,onClick:()=>j(V=>!V),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[a?l.jsx(od,{size:14}):l.jsx(ad,{size:14}),l.jsx("span",{children:a?"Hidden on":"Hidden off"})]})}),re==="feed"?l.jsx("button",{type:"button",className:`ui-button is-compact ${ee?"is-primary":"is-muted"}`,onClick:()=>ne(V=>!V),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[ee?l.jsx(cd,{size:14}):l.jsx(ud,{size:14}),l.jsx("span",{children:ee?"Autoplay":"No autoplay"})]})}):null,l.jsx("button",{type:"button",className:"ui-button is-compact is-ghost",onClick:L,children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[l.jsx(ai,{size:14}),l.jsx("span",{children:"Refresh"})]})})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Page size"}),l.jsxs("select",{value:i,onChange:V=>w(parseInt(V.target.value,10)||30),className:"sheet-select ui-control ui-select","aria-label":"Items per page",children:[l.jsx("option",{value:15,children:"15"}),l.jsx("option",{value:30,children:"30"}),l.jsx("option",{value:60,children:"60"}),l.jsx("option",{value:120,children:"120"})]}),l.jsxs("div",{className:"sheet-hint",children:[A?l.jsx("span",{className:"loading-spinner","aria-hidden":"true"}):null,l.jsxs("span",{children:[q,"  Page ",r," of ",s]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>v(V=>Math.max(1,V-1)),disabled:r<=1||t,children:"Prev"}),l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>v(V=>V<s?V+1:V),disabled:r>=s||t,children:"Next"})]})]})]})})]})}const fi="::";function fw(){return`alias-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`}function sn(e){return String(e||"").split(",").map(t=>t.trim()).filter(Boolean)}function $i(e){return(e||[]).map(t=>String(t||"").trim()).filter(Boolean).join(", ")}function pw(e,t){const n=String(t||"").trim();if(!n)return String(e||"");const r=sn(e);return new Set(r.map(i=>i.toLowerCase())).has(n.toLowerCase())||r.push(n),$i(r)}function hw(e,t){const n=String(t||"").trim().toLowerCase();if(!n)return String(e||"");const r=sn(e).filter(s=>s.toLowerCase()!==n);return $i(r)}function mw(e,t,n){const r=String(t||"").trim().toLowerCase(),s=String(n||"").trim();if(!r||!s)return String(e||"");const i=sn(e).map(c=>c.toLowerCase()===r?s:c),o=new Set,a=[];return i.forEach(c=>{const d=String(c||"").trim().toLowerCase();!d||o.has(d)||(o.add(d),a.push(c))}),$i(a)}function wo(e,t={}){return Object.entries(Cs(e)).map(([n,r],s)=>{const[i,o]=String(n).includes(fi)?n.split(fi):["",n],a=o||n,c=t[n]||t[a]||i||"";return{id:`existing-${s}-${n}`,name:a,text:r,category:c}})}function zd(e){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.name)||"").trim(),s=typeof(n==null?void 0:n.text)=="string"?n.text.trim():"";if(r&&s){const i=String((n==null?void 0:n.category)||"").trim(),o=i?`${i}${fi}${r}`:r;t[o]=s}}),t}function $d(e){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.name)||"").trim(),s=typeof(n==null?void 0:n.category)=="string"?n.category.trim():"";if(r){const i=s?`${s}${fi}${r}`:r;t[i]=s}}),t}function gw(){var K;const e=Vr(),{aliases:t,aliasCategories:n,categoryList:r,loading:s,saving:i,error:o,persistAliases:a,refreshAliases:c}=Ih(),[d,m]=u.useState(()=>wo(t,n)),[h,y]=u.useState(()=>Array.isArray(r)?r:[]),[v,w]=u.useState("All"),[j,x]=u.useState("All"),[p,f]=u.useState(""),[g,N]=u.useState(""),[_,L]=u.useState(!1),[F,z]=u.useState(!1),[k,W]=u.useState({loading:!1,invalid:[],suggestions:{}}),[ie,ue]=u.useState(!1),[re,xe]=u.useState(null),[ee,ne]=u.useState(""),de=u.useRef(null),$=u.useRef(null),[I,C]=u.useState(!1),[b,U]=u.useState(""),[A,B]=u.useState(""),q=oi("(min-width: 1024px)");u.useEffect(()=>{if(I)return;const S=wo(t,n||{});m(S),g&&!S.some(R=>R.id===g)&&(N(""),L(!1))},[n,I]),u.useEffect(()=>{I||Array.isArray(r)&&y(r)},[r,I]),u.useEffect(()=>{if(I)return;const S=wo(t,n||{});m(S),g&&!S.some(R=>R.id===g)&&(N(""),L(!1))},[t,n,g,I]);const H=u.useMemo(()=>zd(d),[d]),D=()=>{const S={id:fw(),name:"",text:"",category:""};m(R=>[...R,S]),N(S.id),ne(""),C(!0),L(!0)},M=(S,R,G)=>{C(!0),m(Z=>Z.map((pe,oe)=>oe===S?{...pe,[R]:G}:pe))},J=S=>{C(!0),m(R=>{var Z;const G=R.filter((pe,oe)=>oe!==S);return(G.length===0||g===((Z=R[S])==null?void 0:Z.id))&&(N(""),L(!1)),G})},te=async()=>{ne("");try{const S=new Map;if(d.forEach(G=>{sn((G==null?void 0:G.text)||"").forEach(pe=>{const oe=String(pe).toLowerCase();oe&&(S.has(oe)||S.set(oe,{tag:pe,rows:[]}),S.get(oe).rows.push(G.id))})}),S.size){const G=Array.from(S.values()).map(Z=>Z.tag);try{const Z=await po(G),pe=Array.isArray(Z==null?void 0:Z.invalid)?Z.invalid:[],oe=new Set(pe.map(fe=>String(fe).toLowerCase()));if(oe.size){const fe=d.map(be=>{const Qe=sn((be==null?void 0:be.text)||"").filter(At=>oe.has(String(At).toLowerCase()));if(!Qe.length)return null;const lt=be.category?`${be.category}:${be.name}`:be.name;return{id:be.id,token:lt,friendlyName:Tl({name:be.name})||be.name||"Untitled",category:be.category||"",invalid:Qe}}).filter(Boolean);xe({invalid:pe,invalidLower:Array.from(oe),rows:fe,suggestions:(Z==null?void 0:Z.suggestions)||{}}),ue(!0),ne("Fix invalid tags before saving.");return}}catch(Z){console.error("Unable to validate tags",Z),ne("Unable to validate tags right now.");return}}const R=$d(d);await a({items:H,categories:R,categoryList:h}),C(!1),ne("Saved.")}catch{ne("Unable to save right now.")}},V=u.useMemo(()=>{const S=p.trim().toLowerCase(),G=[...d.filter(Z=>{const pe=(Z.category||"").trim();if(v===""&&pe||v!=="All"&&v!==""&&pe!==v)return!1;const oe=fs(Z.name||"",Z.category||"");if(j!=="All"&&oe!==j)return!1;if(!S)return!0;const fe=pe?`${pe}:${Z.name}`:Z.name;return(Z.name||"").toLowerCase().includes(S)||(Z.text||"").toLowerCase().includes(S)||(pe||"").toLowerCase().includes(S)||(fe||"").toLowerCase().includes(S)})];return G.sort((Z,pe)=>(Z.name||"").localeCompare(pe.name||"")),G},[d,v,j,p]),X=V.find(S=>S.id===g)||d.find(S=>S.id===g)||null,Oe=X?X.category?`${X.category}:${X.name}`:X.name||"alias":"",ye=X&&(Tl({name:X.name})||X.name)||"Alias",Ne=Oe?`$${Oe}$`:"$alias$",ve=V.length?V:d,je=X?ve.findIndex(S=>S.id===X.id):-1,ke=je>0?ve[je-1]:null,se=je>=0&&je<ve.length-1?ve[je+1]:null,we=S=>{S&&(N(S.id),L(!0),ne(""))},he=u.useMemo(()=>{const S=new Set(h||[]);return d.forEach(R=>{R.category&&S.add(R.category)}),Array.from(S).sort((R,G)=>R.localeCompare(G))},[d,h]),Ce=u.useMemo(()=>{const S=new Set;return d.forEach(R=>{const G=(R.category||"").trim();if(v===""&&G||v!=="All"&&v!==""&&G!==v)return;const Z=fs(R.name||"",R.category||"");Z&&S.add(Z)}),Array.from(S).sort((R,G)=>R.localeCompare(G))},[d,v]);u.useEffect(()=>{j!=="All"&&(Ce.includes(j)||x("All"))},[Ce,j]),u.useEffect(()=>{B("")},[g]);const Le=u.useMemo(()=>sn((X==null?void 0:X.text)||""),[X==null?void 0:X.text]),Pe=u.useMemo(()=>{const S=Array.isArray(k==null?void 0:k.invalid)?k.invalid:[];return new Set(S.map(R=>String(R).toLowerCase()))},[k]);u.useEffect(()=>{if(!X||!(_||q))return;const S=Le,R=[],G=new Set;if(S.forEach(oe=>{const fe=String(oe).toLowerCase();!fe||G.has(fe)||(G.add(fe),R.push(oe))}),!R.length){W({loading:!1,invalid:[],suggestions:{}});return}let Z=!1;const pe=window.setTimeout(async()=>{W(oe=>({...oe,loading:!0}));try{const oe=await po(R);if(Z)return;W({loading:!1,invalid:Array.isArray(oe==null?void 0:oe.invalid)?oe.invalid:[],suggestions:(oe==null?void 0:oe.suggestions)||{}})}catch(oe){console.error("Failed to validate tags",oe),Z||W({loading:!1,invalid:[],suggestions:{}})}},260);return()=>{Z=!0,window.clearTimeout(pe)}},[_,q,X,Le]);const T=S=>{var G,Z;const R=String(S||"");if(!R)return!1;try{return(Z=(G=navigator.clipboard)==null?void 0:G.writeText)==null||Z.call(G,R),!0}catch{return!1}},Y=(S="")=>{const R=S?`?q=${encodeURIComponent(S)}`:"";e(`/tags${R}`)},ce=()=>{var Z;if(!X)return;const S=sn(A);if(!S.length){ne("Enter a tag to add.");return}const R=d.findIndex(pe=>pe.id===X.id);if(R===-1)return;let G=((Z=d[R])==null?void 0:Z.text)||"";S.forEach(pe=>{G=pw(G,pe)}),M(R,"text",G),B(""),ne(`Added ${S.length} tag${S.length===1?"":"s"}.`)},me=async()=>{const S=b.trim();if(!S){ne("Enter a category name.");return}const R=Array.from(new Set([...h||[],S]));y(R),U(""),ne("Category added.");const G=zd(d),Z=$d(d);C(!0);try{await a({items:G,categories:Z,categoryList:R}),C(!1),ne("Category saved.")}catch{ne("Unable to save right now.")}},Te=S=>{S&&(N(S.id),L(!0),ne(""))},Ke=()=>{q&&N(""),L(!1),ne("")},Re=u.useMemo(()=>{const S=d.length,R=V.length;return s&&S===0?"Loading":S===R?`${S} aliases`:`${R} of ${S} aliases`},[d.length,V.length,s]);u.useEffect(()=>{const S=R=>{var be,$t;if(R.defaultPrevented)return;const G=R.target,Z=(G==null?void 0:G.tagName)||"",pe=["INPUT","TEXTAREA","SELECT"].includes(Z)||(G==null?void 0:G.isContentEditable),oe=String(R.key||"").toLowerCase(),fe=R.metaKey||R.ctrlKey;if(fe&&oe==="s"){R.preventDefault(),I&&!i&&te();return}if(fe&&oe==="n"){R.preventDefault(),D();return}if(!pe&&oe==="/"){R.preventDefault(),($t=(be=$.current)==null?void 0:be.focus)==null||$t.call(be);return}oe==="escape"&&_&&!q&&(R.preventDefault(),Ke())};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[D,Ke,I,_,te,q,i]);const Lt=l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:Ke,children:q?"Clear selection":"Close"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:te,disabled:i||!I,children:i?"Saving":I?"Save":"Saved"})]}),P=X?l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"alias-editor-toolbar",children:[l.jsxs("div",{className:"alias-editor-heading",children:[l.jsx("div",{className:"alias-editor-title",children:ye}),l.jsx("div",{className:"alias-editor-meta",children:Ne})]}),l.jsxs("div",{className:"alias-editor-actions",children:[l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>we(ke),disabled:!ke,title:"Previous alias",children:"Prev"}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>we(se),disabled:!se,title:"Next alias",children:"Next"}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>{Oe&&T(Ne)?ne("Token copied."):ne("Copy not available on this browser.")},title:"Copy token",children:"Copy token"})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Token"}),l.jsx("div",{className:"composer-token",children:Ne}),fs(X.name||"",X.category||"")?l.jsxs("div",{className:"sheet-hint",children:["Subcategory: ",An(fs(X.name||"",X.category||""))]}):null]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Friendly name"}),l.jsx("div",{className:"composer-field",children:ye})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Alias name"}),l.jsx("input",{ref:de,type:"text",value:X.name||"",onChange:S=>{const R=d.findIndex(G=>G.id===X.id);R!==-1&&M(R,"name",S.target.value)},placeholder:"e.g. cherry_fruit",className:"sheet-input ui-control ui-input"})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Category"}),l.jsxs("select",{value:X.category||"",onChange:S=>{const R=d.findIndex(G=>G.id===X.id);R!==-1&&M(R,"category",S.target.value)},className:"sheet-select ui-control ui-select",children:[l.jsx("option",{value:"",children:"Uncategorized"}),he.map(S=>l.jsx("option",{value:S,children:S?ln(S):"Uncategorized"},S||"uncat"))]}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>z(!0),children:"Manage categories"})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Expands to"}),l.jsx("textarea",{value:X.text,onChange:S=>{const R=d.findIndex(G=>G.id===X.id);R!==-1&&M(R,"text",S.target.value)},placeholder:"Prompt text for this alias",className:"sheet-textarea ui-control ui-textarea is-compact",rows:6}),l.jsxs("div",{className:"tag-quick-add",children:[l.jsx("input",{type:"text",value:A,onChange:S=>B(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),ce())},placeholder:"Add tags (comma separated)",className:"ui-control ui-input tag-quick-input","aria-label":"Add tags"}),l.jsx("button",{type:"button",className:"ui-button is-compact is-primary",onClick:ce,disabled:!A.trim(),children:"Add"})]}),l.jsxs("div",{className:"tag-editor-actions",children:[l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>Y(""),children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Nt,{size:14}),"Open tag library"]})}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>{W(R=>({...R,loading:!0}));const S=sn(X.text||"");po(S).then(R=>{W({loading:!1,invalid:Array.isArray(R==null?void 0:R.invalid)?R.invalid:[],suggestions:(R==null?void 0:R.suggestions)||{}})}).catch(()=>W({loading:!1,invalid:[],suggestions:{}}))},disabled:k.loading,title:"Validate against danbooru_tags.md",children:k.loading?"Validating":"Validate"})]}),Le.length?l.jsx("div",{className:"tag-chip-list","aria-label":"Alias tags",children:Le.map(S=>{const R=Pe.has(String(S).toLowerCase());return l.jsxs("span",{className:`tag-chip ${R?"is-invalid":""}`,children:[l.jsx("code",{className:"tag-chip-code",children:S}),l.jsx("button",{type:"button",className:"tag-chip-remove",onClick:()=>{const G=d.findIndex(Z=>Z.id===X.id);G!==-1&&M(G,"text",hw(X.text||"",S))},"aria-label":`Remove ${S}`,title:"Remove",children:""})]},S)})}):l.jsx("div",{className:"sheet-hint",children:"Tip: Use the Tag library to add validated tags quickly."}),!k.loading&&Array.isArray(k.invalid)&&k.invalid.length?l.jsxs("div",{className:"tag-invalid-panel",role:"alert",children:[l.jsxs("div",{className:"tag-invalid-title",children:["Invalid tags (",k.invalid.length,")"]}),l.jsx("div",{className:"tag-invalid-body",children:k.invalid.map(S=>{var G;const R=((G=k==null?void 0:k.suggestions)==null?void 0:G[S])||[];return l.jsxs("div",{className:"tag-invalid-row",children:[l.jsxs("div",{className:"tag-invalid-tag",children:[l.jsx("code",{children:S}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>Y(S),children:"Find"})]}),Array.isArray(R)&&R.length?l.jsx("div",{className:"tag-invalid-suggestions",children:R.slice(0,6).map(Z=>l.jsx("button",{type:"button",className:"tag-suggestion",onClick:()=>{const pe=d.findIndex(oe=>oe.id===X.id);pe!==-1&&M(pe,"text",mw(X.text||"",S,Z))},title:`Replace ${S} with ${Z}`,children:Z},`${S}-${Z}`))}):l.jsx("div",{className:"sheet-hint",children:"No suggestions found for this tag."})]},S)})})]}):null]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("button",{type:"button",className:"ui-button is-danger",onClick:()=>{const S=d.findIndex(R=>R.id===X.id);S!==-1&&(J(S),L(!1))},children:"Delete alias"}),l.jsx("div",{className:"sheet-hint",children:"Deleting removes it from your library. Use Save changes to persist."})]})]}):l.jsx("div",{className:"alias-editor-empty",children:"Select an alias to edit, or create a new one."});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"page-shell page-stack alias-page",children:[l.jsx("div",{className:"screen-sticky",children:l.jsxs("div",{className:"space-y-3 py-3",children:[l.jsxs("header",{className:"flex items-start justify-between gap-3",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"ui-kicker",children:"Library"}),l.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[l.jsx(Nt,{size:18}),l.jsx("span",{className:"truncate",children:"Aliases"})]}),l.jsx("div",{className:"text-[11px] text-[#9DA3FFCC] mt-1",children:Re})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>z(!0),children:"Categories"}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>openTagLibrary({query:p||"",targetId:""}),title:"Browse danbooru tags",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Nt,{size:14}),"Tags"]})}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:c,disabled:s,title:"Refresh",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(ai,{size:14}),"Refresh"]})}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-primary",onClick:D,children:"Add"})]})]}),l.jsxs("div",{className:"composer-filters",children:[l.jsx("input",{ref:$,type:"search",value:p,onChange:S=>f(S.target.value),className:"composer-search ui-control ui-input",placeholder:"Search aliases","aria-label":"Search aliases"}),l.jsxs("select",{className:"composer-subcategory-select ui-control ui-select is-compact",value:v,onChange:S=>w(S.target.value),"aria-label":"Filter by category",children:[l.jsx("option",{value:"All",children:"Category: All"}),l.jsx("option",{value:"",children:"Uncategorized"}),he.map(S=>l.jsx("option",{value:S,children:S?ln(S):"Uncategorized"},S||"uncat"))]}),l.jsxs("select",{className:"composer-subcategory-select ui-control ui-select is-compact",value:j,onChange:S=>x(S.target.value),"aria-label":"Filter by subcategory",children:[l.jsx("option",{value:"All",children:"Subcategory: All"}),Ce.map(S=>l.jsx("option",{value:S,children:An(S)},S))]}),I?l.jsx("button",{type:"button",className:"ui-button is-compact is-primary",onClick:te,disabled:i,children:i?"Saving":"Save changes"}):null]}),o?l.jsx("div",{className:"text-xs text-[#FF8F70]",children:"Could not load aliases. Try again later."}):null,ee?l.jsx("div",{className:"text-xs text-[#9DA3FFCC]",children:ee}):null]})}),l.jsxs("div",{className:"alias-layout",children:[l.jsx("div",{className:"alias-list",children:d.length===0&&!s?l.jsx("section",{className:"ui-panel text-center py-16",children:l.jsx("p",{className:"text-base text-[rgba(159,178,215,0.8)]",children:"No aliases yet. Add your first one."})}):l.jsxs("div",{className:"composer-alias-list",role:"list",children:[V.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases match your filters."}):null,V.map(S=>{const R=(S.category||"").trim(),G=R?`${R}:${S.name}`:S.name,Z=(S.text||"").slice(0,140)+((S.text||"").length>140?"":"");return l.jsxs("button",{type:"button",role:"listitem",className:`composer-alias-item ${g===S.id?"is-selected":""}`,onClick:()=>Te(S),children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:Tl({name:S.name})||S.name||"Untitled"}),R?l.jsx("span",{className:"composer-alias-category",children:ln(R)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",G||"alias","$"]}),l.jsx("div",{className:"composer-alias-text",children:Z||""})]},S.id)})]})}),l.jsx("aside",{className:"alias-editor-panel",children:l.jsxs("div",{className:"alias-editor-card ui-panel",children:[P,X?l.jsx("div",{className:"alias-editor-footer",children:Lt}):null]})})]})]}),l.jsx(xt,{open:_&&!!X&&!q,onClose:Ke,title:"Alias",variant:"fullscreen",footer:Lt,children:P}),l.jsx(xt,{open:F,onClose:()=>{z(!1),U(""),ne("")},title:"Categories",variant:"sheet",footer:l.jsx("div",{className:"sheet-hint",children:"Categories help you organize aliases and improve the Insert alias picker."}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Add category"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:b,onChange:S=>U(S.target.value),placeholder:"e.g. styles",className:"sheet-input ui-control ui-input"}),l.jsx("button",{type:"button",className:"ui-button is-primary is-compact",onClick:me,children:"Add"})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Existing"}),he.length===0?l.jsx("div",{className:"sheet-hint",children:"No categories yet."}):l.jsxs("select",{className:"sheet-select ui-control ui-select",defaultValue:"",onChange:S=>{const R=S.target.value;R&&(w(R),z(!1))},children:[l.jsx("option",{value:"",children:"Select a category"}),he.map(S=>l.jsx("option",{value:S,children:ln(S)},S))]})]})]})}),l.jsx(xt,{open:ie,onClose:()=>ue(!1),title:"Fix invalid tags",variant:"fullscreen",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>ue(!1),children:"Close"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>{const S=new Set(((re==null?void 0:re.invalidLower)||[]).map(R=>String(R).toLowerCase()));if(!S.size){ue(!1);return}m(R=>R.map(G=>{const pe=sn((G==null?void 0:G.text)||"").filter(fe=>!S.has(String(fe).toLowerCase())),oe=$i(pe);return oe===((G==null?void 0:G.text)||"")?G:{...G,text:oe}})),C(!0),ue(!1),ne("Removed invalid tags. Review and save again.")},children:"Remove invalid tags"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsx("div",{className:"sheet-section",children:l.jsxs("div",{className:"sheet-hint",children:["These aliases contain tags not found in ",l.jsx("code",{className:"font-mono",children:"danbooru_tags.md"}),". Fix them before saving."]})}),(K=re==null?void 0:re.rows)!=null&&K.length?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Aliases with issues"}),l.jsx("div",{className:"composer-alias-list",role:"list",children:re.rows.map(S=>l.jsxs("button",{type:"button",role:"listitem",className:"composer-alias-item",onClick:()=>{N(S.id),L(!0),ue(!1)},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:S.friendlyName}),S.category?l.jsx("span",{className:"composer-alias-category",children:ln(S.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",S.token,"$"]}),l.jsx("div",{className:"tag-invalid-inline",children:S.invalid.map(R=>l.jsx("span",{className:"tag-chip is-invalid",children:l.jsx("code",{className:"tag-chip-code",children:R})},`${S.id}-${R}`))})]},S.id))})]}):null]})})]})}function yw(e){var n,r;const t=String(e||"");if(!t)return!1;try{return(r=(n=navigator.clipboard)==null?void 0:n.writeText)==null||r.call(n,t),!0}catch{return!1}}function vw({open:e,onClose:t,onSelectTag:n,initialQuery:r="",title:s="Tag library",contextTitle:i="",contextToken:o="",contextText:a="",contextTagCount:c=null,inline:d=!1}){const[m,h]=u.useState(r||""),[y,v]=u.useState(""),[w,j]=u.useState("count"),[x,p]=u.useState([]),[f,g]=u.useState([]),[N,_]=u.useState(0),[L,F]=u.useState(0),[z,k]=u.useState(!1),[W,ie]=u.useState(!1),[ue,re]=u.useState(""),[xe,ee]=u.useState(""),[ne,de]=u.useState([]),[$,I]=u.useState(!1),[C,b]=u.useState(null),[U,A]=u.useState(null),B=u.useRef(null),q=u.useRef(null),H=u.useRef(null),D=u.useRef(null),M=u.useRef(null),J=f.length<N,te=d||e,V=u.useMemo(()=>ne.join(", "),[ne]),X=u.useMemo(()=>new Set(ne.map(T=>T.toLowerCase())),[ne]),Oe=u.useCallback(T=>{const Y=String(T||"").trim();Y&&de(ce=>new Set(ce.map(Te=>Te.toLowerCase())).has(Y.toLowerCase())?ce:[...ce,Y])},[]),ye=u.useCallback(T=>{const Y=String(T||"").trim().toLowerCase();Y&&de(ce=>ce.filter(me=>me.toLowerCase()!==Y))},[]),Ne=u.useCallback(()=>{de([]),ee("Cleared collected tags.")},[]),ve=u.useCallback(()=>{var Y,ce;if(!ne.length){ee("No tags to copy.");return}if(yw(V)){ee(`Copied ${ne.length} tag${ne.length===1?"":"s"}.`);return}const T=H.current;if(T)try{T.value=V,T.removeAttribute("readonly"),T.select(),T.setSelectionRange(0,V.length);const me=document.execCommand&&document.execCommand("copy");if(T.setAttribute("readonly","readonly"),(ce=(Y=window.getSelection())==null?void 0:Y.removeAllRanges)==null||ce.call(Y),me){ee(`Copied ${ne.length} tag${ne.length===1?"":"s"}.`);return}}catch{}ee("Copy not available on this browser.")},[ne,V]),je=u.useCallback((T,Y)=>{de(ce=>{const me=[...ce],[Te]=me.splice(T,1);return me.splice(Y,0,Te),me})},[]);u.useCallback((T,Y)=>{b(Y),D.current=T.target,T.dataTransfer.effectAllowed="move",T.dataTransfer.setData("text/plain",Y.toString()),requestAnimationFrame(()=>{D.current&&D.current.classList.add("is-dragging")})},[]),u.useCallback(()=>{D.current&&D.current.classList.remove("is-dragging"),C!==null&&U!==null&&C!==U&&je(C,U),b(null),A(null),D.current=null},[C,U,je]),u.useCallback((T,Y)=>{T.preventDefault(),T.dataTransfer.dropEffect="move",A(Y)},[]),u.useCallback(()=>{},[]),u.useCallback((T,Y)=>{const ce=T.touches[0];M.current={idx:Y,startX:ce.clientX,startY:ce.clientY,moved:!1}},[]),u.useCallback(T=>{if(!M.current)return;const Y=T.touches[0],ce=Math.abs(Y.clientX-M.current.startX),me=Math.abs(Y.clientY-M.current.startY);if(ce>10||me>10){M.current.moved=!0,b(M.current.idx),T.preventDefault();const Te=document.querySelectorAll(".collected-tag-chip"),Ke=Y.clientX,Re=Y.clientY;for(let Lt=0;Lt<Te.length;Lt++){const P=Te[Lt].getBoundingClientRect();if(Ke>=P.left&&Ke<=P.right&&Re>=P.top&&Re<=P.bottom){A(Lt);break}}}},[]),u.useCallback(()=>{var T;(T=M.current)!=null&&T.moved&&C!==null&&U!==null&&C!==U&&je(C,U),M.current=null,b(null),A(null)},[C,U,je]);const ke=u.useCallback(async({nextQuery:T,nextCategory:Y,nextSort:ce}={})=>{const me=typeof T=="string"?T:m,Te=typeof Y=="string"?Y:y,Ke=typeof ce=="string"?ce:w;k(!0),re(""),ee(""),F(0);try{const Re=await ii({q:me,category:Te,sort:Ke,limit:80,offset:0});g((Re==null?void 0:Re.items)||[]),_(Number((Re==null?void 0:Re.total)||0))}catch(Re){console.error("Failed to search tags",Re),re("Unable to load tags right now."),g([]),_(0)}finally{k(!1)}},[y,m,w]),se=u.useCallback(async()=>{if(z||W||!J)return;const T=L+80;ie(!0),re("");try{const Y=await ii({q:m,category:y,sort:w,limit:80,offset:T}),ce=(Y==null?void 0:Y.items)||[];g(me=>[...me,...ce]),_(Number((Y==null?void 0:Y.total)||0)),F(T)}catch(Y){console.error("Failed to load more tags",Y),re("Unable to load more tags.")}finally{ie(!1)}},[J,y,z,W,L,m,w]);u.useEffect(()=>{if(!te)return;re(""),ee("");let T=!1;return(async()=>{try{const Y=await dh();if(T)return;p(Array.isArray(Y==null?void 0:Y.categories)?Y.categories:[])}catch(Y){console.error("Failed to load tag categories",Y),T||p([])}})(),()=>{T=!0}},[te]),u.useEffect(()=>{te&&(h(r||""),v(""),j("count"),g([]),_(0),F(0),k(!1),ie(!1),re(""),ee(""),de([]))},[r,te]),u.useEffect(()=>{if(!te)return;const T=window.setTimeout(()=>{ke()},220);return()=>window.clearTimeout(T)},[y,te,m,ke,w]),u.useEffect(()=>{if(!te)return;const T=B.current;if(!T||typeof IntersectionObserver>"u")return;const Y=new IntersectionObserver(ce=>{const me=ce[0];me!=null&&me.isIntersecting&&se()},{threshold:.1});return Y.observe(T),()=>Y.disconnect()},[te,se]);const we=u.useMemo(()=>d?null:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:t,children:"Done"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:()=>ke(),disabled:z||W,children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(ai,{size:14}),"Refresh"]})})]}),[d,z,W,t,ke]),he=N?`${f.length.toLocaleString()} / ${N.toLocaleString()}`:`${f.length.toLocaleString()}`,Ce=!!(n&&(i||o||a)),Le=Number.isFinite(c)?`${c} tags`:"",Pe=l.jsxs("div",{className:`sheet-stack ${d?"tag-library-page":""}`,children:[Ce?l.jsxs("div",{className:"tag-library-context",children:[l.jsxs("div",{className:"tag-library-context-head",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"sheet-label",children:"Adding to alias"}),l.jsx("div",{className:"tag-library-context-title",children:i||"Alias"}),o?l.jsx("div",{className:"tag-library-context-token",children:o}):null]}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:t,children:"Back"})]}),l.jsx("div",{className:"tag-library-context-preview",children:a||""}),Le?l.jsx("div",{className:"tag-library-context-meta",children:Le}):null]}):null,l.jsxs("div",{className:"sheet-section",children:[d?null:l.jsx("div",{className:"sheet-label",children:"Browse"}),l.jsxs("div",{className:"composer-filters",children:[l.jsx("input",{ref:q,type:"search",value:m,onChange:T=>h(T.target.value),placeholder:"Search tags (e.g. smile, city, sword)",className:"composer-search ui-control ui-input","aria-label":"Search tags"}),l.jsxs("select",{value:y,onChange:T=>v(T.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Filter by category",children:[l.jsx("option",{value:"",children:"Category: All"}),x.map(T=>l.jsxs("option",{value:T.key,children:[An(T.key)," (",Number(T.actual||T.count||0).toLocaleString(),")"]},T.key))]}),l.jsxs("select",{value:w,onChange:T=>j(T.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Sort tags",children:[l.jsx("option",{value:"count",children:"Sort: Popular"}),l.jsx("option",{value:"alpha",children:"Sort: AZ"})]})]}),l.jsxs("div",{className:"sheet-hint",children:[l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Nt,{size:14}),"Tap a tag to ",n?"add it to the alias":"collect it"]}),l.jsx("span",{className:"ml-3 opacity-80",children:he})]}),xe?l.jsx("div",{className:"text-xs text-[#9DA3FFCC]",children:xe}):null,ue?l.jsx("div",{className:"text-xs text-[#FF8F70]",children:ue}):null]}),l.jsx("div",{className:"composer-alias-list tag-library-grid",role:"list",children:z?l.jsx("div",{className:"composer-alias-empty",children:"Loading tags"}):f.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No tags found."}):l.jsxs(l.Fragment,{children:[f.map(T=>l.jsx("div",{className:"tag-library-row",role:"listitem",children:l.jsxs("button",{type:"button",className:`composer-alias-item tag-library-item ${!n&&X.has(String(T.tag||"").toLowerCase())?"is-collected":""}`,onClick:()=>{if(n){n(String(T.tag||"")),ee(`Added: ${T.tag}`);return}const Y=String(T.tag||"");X.has(Y.toLowerCase())?(ye(Y),ee(`Removed: ${T.tag}`)):(Oe(Y),ee(`Added: ${T.tag}`))},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name tag-library-name",children:l.jsx("code",{className:"tag-library-code",children:T.tag})}),T.category?l.jsx("span",{className:"composer-alias-category",children:An(T.category)}):null]}),l.jsx("div",{className:"composer-alias-token",children:Number(T.count||0).toLocaleString()})]})},`${T.tag}-${T.category}`)),l.jsx("div",{ref:B,className:"composer-sentinel"}),W?l.jsx("div",{className:"composer-alias-empty",children:"Loading more"}):null]})})]});return te?d?l.jsxs("section",{className:"tag-library-surface",children:[s?l.jsx("div",{className:"sheet-label tag-library-page-title",children:s}):null,Pe,n?null:l.jsxs("div",{className:"tag-collection-bar","aria-live":"polite",children:[l.jsxs("div",{className:"tag-collection-bar-main",children:[l.jsx("div",{className:"tag-collection-bar-title",children:"Tags"}),l.jsx("div",{className:"tag-collection-bar-count","aria-live":"polite",children:ne.length===0?"No tags selected":`${ne.length} selected`})]}),l.jsx("button",{type:"button",className:"tag-collection-menu-btn",onClick:()=>I(!0),"aria-label":"Manage collected tags",children:""}),l.jsx("textarea",{ref:H,value:V,onChange:T=>{const Y=T.target.value.split(",").map(Te=>Te.trim()).filter(Boolean),ce=new Set,me=[];Y.forEach(Te=>{const Ke=Te.toLowerCase();ce.has(Ke)||(ce.add(Ke),me.push(Te))}),de(me)},className:"sr-only","aria-label":"Collected tags text"})]}),n?null:l.jsx(xt,{open:$,onClose:()=>I(!1),title:"Collected tags",variant:"sheet",shouldCloseOnOverlayClick:!0,children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsxs("div",{className:"sheet-label",children:["Tags (",ne.length,")"]}),l.jsxs("div",{className:"tag-collection-codeblock",children:[l.jsx("pre",{className:"tag-collection-pre",children:V||""}),l.jsx("button",{type:"button",className:"tag-collection-copy-btn",onClick:ve,disabled:ne.length===0,"aria-label":"Copy collected tags",children:""}),l.jsx("textarea",{ref:H,value:V,readOnly:!0,className:"sr-only","aria-label":"Collected tags text"})]}),ne.length?l.jsx("div",{className:"tag-collection-chips",children:ne.map((T,Y)=>l.jsxs("span",{className:"collected-tag-chip",onClick:()=>ye(T),children:[l.jsx("code",{className:"collected-tag-code",children:T}),l.jsx("button",{type:"button",className:"collected-tag-remove","aria-label":`Remove ${T}`,onClick:ce=>{ce.stopPropagation(),ye(T)},children:""})]},`${T}-${Y}`))}):l.jsx("div",{className:"sheet-hint",children:"No tags collected yet."})]}),l.jsxs("div",{className:"sheet-section flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>I(!1),children:"Close"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:Ne,disabled:ne.length===0,children:"Clear"})]})]})})]}):l.jsx(xt,{open:e,onClose:t,title:s,variant:"fullscreen",contentClassName:"tag-library-sheet",footer:we,shouldCloseOnOverlayClick:!1,children:Pe}):null}function xw(){const[e]=yv(),t=e.get("q")||"",n=u.useMemo(()=>t?`Tag Library  ${t}`:"Tag Library",[t]);return l.jsxs("div",{className:"page-shell page-stack",children:[l.jsx("div",{className:"page-header",children:l.jsxs("div",{className:"page-title-row",children:[l.jsx("span",{className:"page-title-icon","aria-hidden":"true",children:l.jsx(Nt,{size:18})}),l.jsxs("div",{children:[l.jsx("div",{className:"page-kicker",children:"Reference"}),l.jsx("h1",{className:"page-title",children:n}),l.jsx("p",{className:"page-subtitle",children:"Browse, collect, and copy tags from the centralized library."})]})]})}),l.jsx(vw,{inline:!0,initialQuery:t,title:"Browse",onSelectTag:null})]})}function ww(){var p,f;const{authed:e,ready:t,login:n}=Ii(),r=Vr(),i=((f=(p=bt().state)==null?void 0:p.from)==null?void 0:f.pathname)||"/studio",[o,a]=u.useState(""),[c,d]=u.useState(""),[m,h]=u.useState(""),[y,v]=u.useState(!1),[w,j]=u.useState(!1);u.useEffect(()=>{try{localStorage.getItem("cozygen_idle_logout")&&(j(!0),localStorage.removeItem("cozygen_idle_logout"))}catch{}},[]),u.useEffect(()=>{t&&e&&r(i,{replace:!0})},[t,e,i,r]);const x=async g=>{g.preventDefault(),h(""),v(!0);try{await n(o,c),r(i,{replace:!0})}catch(N){N!=null&&N.unauthorized?h("Invalid username or password."):h("Unable to sign in. Please try again.")}finally{v(!1)}};return l.jsx("div",{className:"login-shell",children:l.jsxs("div",{className:"neon-card login-card",children:[l.jsxs("div",{className:"login-brand",children:[l.jsx(yh,{size:34}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"login-title",children:"Sign in"}),l.jsx("div",{className:"login-subtitle",children:"Continue to CozyGen Studio"})]})]}),l.jsxs("form",{className:"login-form",onSubmit:x,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"login-username",className:"login-label",children:"Username"}),l.jsx("input",{id:"login-username",type:"text",className:"ui-control ui-input",value:o,onChange:g=>a(g.target.value),autoComplete:"username",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"login-password",className:"login-label",children:"Password"}),l.jsx("input",{id:"login-password",type:"password",className:"ui-control ui-input",value:c,onChange:g=>d(g.target.value),autoComplete:"current-password",required:!0})]}),m?l.jsx("div",{className:"ui-alert",children:m}):w?l.jsx("div",{className:"ui-alert is-warn",children:"You were signed out due to inactivity. Please sign in again."}):null,l.jsx("button",{type:"submit",disabled:y,className:"ui-button is-primary w-full",children:y?"Signing in":"Sign in"})]}),l.jsxs("p",{className:"login-footnote",children:["Access is protected by CozyGen auth. Set ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /"," ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server to enable."]})]})})}function jw({containerRef:e}){const{pathname:t,hash:n}=bt();return u.useEffect(()=>{if(n)return;const r=e==null?void 0:e.current;if(r&&typeof r.scrollTo=="function"){r.scrollTo({top:0,left:0,behavior:"auto"});return}typeof window<"u"&&window.scrollTo(0,0)},[t,n,e]),null}function os({children:e}){const{authed:t,ready:n}=Ii(),r=bt();return n?t?e:l.jsx(sh,{to:"/login",state:{from:r},replace:!0}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-200",children:l.jsxs("div",{className:"page-loading",children:[l.jsx("span",{className:"loading-spinner lg","aria-hidden":"true"}),l.jsx("span",{className:"sr-only",children:"Checking session"})]})})}function Sw(){const{pathname:e}=bt(),{defaultCreds:t,authed:n}=Ii(),r=e==="/login",s=u.useRef(null),i=oi("(max-width: 767px)"),o=oi("(pointer: coarse)"),a=!r&&(i||o);return l.jsxs("div",{className:"app-shell",children:[!r&&l.jsx(Ov,{}),!r&&n&&t&&l.jsxs("div",{className:"flex-shrink-0 bg-amber-500/10 text-amber-200 border-b border-amber-400/50 px-4 py-2 text-sm text-center",children:["Default CozyGen credentials are still in use. Change ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server."]}),l.jsx(jw,{containerRef:s}),l.jsx("main",{ref:s,className:r?"app-content is-login":"app-content",children:l.jsxs(rv,{children:[l.jsx(xn,{path:"/login",element:l.jsx(ww,{})}),l.jsx(xn,{path:"/",element:l.jsx(os,{children:l.jsx(_d,{})})}),l.jsx(xn,{path:"/studio",element:l.jsx(os,{children:l.jsx(_d,{})})}),l.jsx(xn,{path:"/gallery",element:l.jsx(os,{children:l.jsx(dw,{})})}),l.jsx(xn,{path:"/aliases",element:l.jsx(os,{children:l.jsx(gw,{})})}),l.jsx(xn,{path:"/tags",element:l.jsx(os,{children:l.jsx(xw,{})})}),l.jsx(xn,{path:"*",element:l.jsx(sh,{to:"/studio",replace:!0})})]})}),a?l.jsx(Uv,{}):null]})}function Nw(){return l.jsx(fv,{children:l.jsx(_v,{children:l.jsx(Sw,{})})})}jo.createRoot(document.getElementById("root")).render(l.jsx(Ot.StrictMode,{children:l.jsx(Nw,{})}));
