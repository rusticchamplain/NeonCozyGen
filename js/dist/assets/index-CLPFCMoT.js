function th(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function nh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ud={exports:{}},fo={},Bd={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),rh=Symbol.for("react.portal"),sh=Symbol.for("react.fragment"),lh=Symbol.for("react.strict_mode"),oh=Symbol.for("react.profiler"),ah=Symbol.for("react.provider"),ih=Symbol.for("react.context"),ch=Symbol.for("react.forward_ref"),uh=Symbol.for("react.suspense"),dh=Symbol.for("react.memo"),fh=Symbol.for("react.lazy"),Wc=Symbol.iterator;function ph(e){return e===null||typeof e!="object"?null:(e=Wc&&e[Wc]||e["@@iterator"],typeof e=="function"?e:null)}var Wd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vd=Object.assign,Hd={};function Vr(e,t,n){this.props=e,this.context=t,this.refs=Hd,this.updater=n||Wd}Vr.prototype.isReactComponent={};Vr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Gd(){}Gd.prototype=Vr.prototype;function Li(e,t,n){this.props=e,this.context=t,this.refs=Hd,this.updater=n||Wd}var Pi=Li.prototype=new Gd;Pi.constructor=Li;Vd(Pi,Vr.prototype);Pi.isPureReactComponent=!0;var Vc=Array.isArray,Kd=Object.prototype.hasOwnProperty,_i={current:null},Qd={key:!0,ref:!0,__self:!0,__source:!0};function Yd(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Kd.call(t,r)&&!Qd.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:Ds,type:e,key:o,ref:a,props:s,_owner:_i.current}}function mh(e,t){return{$$typeof:Ds,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ri(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ds}function hh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Hc=/\/+/g;function Fo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hh(""+e.key):t.toString(36)}function wl(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ds:case rh:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Fo(a,0):r,Vc(s)?(n="",e!=null&&(n=e.replace(Hc,"$&/")+"/"),wl(s,t,n,"",function(d){return d})):s!=null&&(Ri(s)&&(s=mh(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Hc,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Vc(e))for(var i=0;i<e.length;i++){o=e[i];var c=r+Fo(o,i);a+=wl(o,t,n,c,s)}else if(c=ph(e),typeof c=="function")for(e=c.call(e),i=0;!(o=e.next()).done;)o=o.value,c=r+Fo(o,i++),a+=wl(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function el(e,t,n){if(e==null)return e;var r=[],s=0;return wl(e,r,"","",function(o){return t.call(n,o,s++)}),r}function gh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ft={current:null},jl={transition:null},yh={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:jl,ReactCurrentOwner:_i};function qd(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:el,forEach:function(e,t,n){el(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return el(e,function(){t++}),t},toArray:function(e){return el(e,function(t){return t})||[]},only:function(e){if(!Ri(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Component=Vr;Se.Fragment=sh;Se.Profiler=oh;Se.PureComponent=Li;Se.StrictMode=lh;Se.Suspense=uh;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yh;Se.act=qd;Se.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Vd({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=_i.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Kd.call(t,c)&&!Qd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:Ds,type:e.type,key:s,ref:o,props:r,_owner:a}};Se.createContext=function(e){return e={$$typeof:ih,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ah,_context:e},e.Consumer=e};Se.createElement=Yd;Se.createFactory=function(e){var t=Yd.bind(null,e);return t.type=e,t};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:ch,render:e}};Se.isValidElement=Ri;Se.lazy=function(e){return{$$typeof:fh,_payload:{_status:-1,_result:e},_init:gh}};Se.memo=function(e,t){return{$$typeof:dh,type:e,compare:t===void 0?null:t}};Se.startTransition=function(e){var t=jl.transition;jl.transition={};try{e()}finally{jl.transition=t}};Se.unstable_act=qd;Se.useCallback=function(e,t){return ft.current.useCallback(e,t)};Se.useContext=function(e){return ft.current.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e){return ft.current.useDeferredValue(e)};Se.useEffect=function(e,t){return ft.current.useEffect(e,t)};Se.useId=function(){return ft.current.useId()};Se.useImperativeHandle=function(e,t,n){return ft.current.useImperativeHandle(e,t,n)};Se.useInsertionEffect=function(e,t){return ft.current.useInsertionEffect(e,t)};Se.useLayoutEffect=function(e,t){return ft.current.useLayoutEffect(e,t)};Se.useMemo=function(e,t){return ft.current.useMemo(e,t)};Se.useReducer=function(e,t,n){return ft.current.useReducer(e,t,n)};Se.useRef=function(e){return ft.current.useRef(e)};Se.useState=function(e){return ft.current.useState(e)};Se.useSyncExternalStore=function(e,t,n){return ft.current.useSyncExternalStore(e,t,n)};Se.useTransition=function(){return ft.current.useTransition()};Se.version="18.3.1";Bd.exports=Se;var u=Bd.exports;const _t=nh(u),vh=th({__proto__:null,default:_t},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xh=u,wh=Symbol.for("react.element"),jh=Symbol.for("react.fragment"),Sh=Object.prototype.hasOwnProperty,Nh=xh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kh={key:!0,ref:!0,__self:!0,__source:!0};function Xd(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Sh.call(t,r)&&!kh.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:wh,type:e,key:o,ref:a,props:s,_owner:Nh.current}}fo.Fragment=jh;fo.jsx=Xd;fo.jsxs=Xd;Ud.exports=fo;var l=Ud.exports,wa={},Jd={exports:{}},Et={},Zd={exports:{}},ef={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,T){var _=C.length;C.push(T);e:for(;0<_;){var R=_-1>>>1,D=C[R];if(0<s(D,T))C[R]=T,C[_]=D,_=R;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var T=C[0],_=C.pop();if(_!==T){C[0]=_;e:for(var R=0,D=C.length,J=D>>>1;R<J;){var H=2*(R+1)-1,B=C[H],F=H+1,O=C[F];if(0>s(B,_))F<D&&0>s(O,B)?(C[R]=O,C[F]=_,R=F):(C[R]=B,C[H]=_,R=H);else if(F<D&&0>s(O,_))C[R]=O,C[F]=_,R=F;else break e}}return T}function s(C,T){var _=C.sortIndex-T.sortIndex;return _!==0?_:C.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var c=[],d=[],y=1,h=null,g=3,v=!1,w=!1,N=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(C){for(var T=n(d);T!==null;){if(T.callback===null)r(d);else if(T.startTime<=C)r(d),T.sortIndex=T.expirationTime,t(c,T);else break;T=n(d)}}function j(C){if(N=!1,p(C),!w)if(n(c)!==null)w=!0,ae(k);else{var T=n(d);T!==null&&le(j,T.startTime-C)}}function k(C,T){w=!1,N&&(N=!1,m(b),b=-1),v=!0;var _=g;try{for(p(T),h=n(c);h!==null&&(!(h.expirationTime>T)||C&&!W());){var R=h.callback;if(typeof R=="function"){h.callback=null,g=h.priorityLevel;var D=R(h.expirationTime<=T);T=e.unstable_now(),typeof D=="function"?h.callback=D:h===n(c)&&r(c),p(T)}else r(c);h=n(c)}if(h!==null)var J=!0;else{var H=n(d);H!==null&&le(j,H.startTime-T),J=!1}return J}finally{h=null,g=_,v=!1}}var L=!1,I=null,b=-1,$=5,z=-1;function W(){return!(e.unstable_now()-z<$)}function de(){if(I!==null){var C=e.unstable_now();z=C;var T=!0;try{T=I(!0,C)}finally{T?se():(L=!1,I=null)}}else L=!1}var se;if(typeof f=="function")se=function(){f(de)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,X=he.port2;he.port1.onmessage=de,se=function(){X.postMessage(null)}}else se=function(){S(de,0)};function ae(C){I=C,L||(L=!0,se())}function le(C,T){b=S(function(){C(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){w||v||(w=!0,ae(k))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(C){switch(g){case 1:case 2:case 3:var T=3;break;default:T=g}var _=g;g=T;try{return C()}finally{g=_}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,T){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var _=g;g=C;try{return T()}finally{g=_}},e.unstable_scheduleCallback=function(C,T,_){var R=e.unstable_now();switch(typeof _=="object"&&_!==null?(_=_.delay,_=typeof _=="number"&&0<_?R+_:R):_=R,C){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=_+D,C={id:y++,callback:T,priorityLevel:C,startTime:_,expirationTime:D,sortIndex:-1},_>R?(C.sortIndex=_,t(d,C),n(c)===null&&C===n(d)&&(N?(m(b),b=-1):N=!0,le(j,_-R))):(C.sortIndex=D,t(c,C),w||v||(w=!0,ae(k))),C},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(C){var T=g;return function(){var _=g;g=T;try{return C.apply(this,arguments)}finally{g=_}}}})(ef);Zd.exports=ef;var Ch=Zd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bh=u,bt=Ch;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tf=new Set,js={};function cr(e,t){$r(e,t),$r(e+"Capture",t)}function $r(e,t){for(js[e]=t,e=0;e<t.length;e++)tf.add(t[e])}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,Eh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gc={},Kc={};function Lh(e){return ja.call(Kc,e)?!0:ja.call(Gc,e)?!1:Eh.test(e)?Kc[e]=!0:(Gc[e]=!0,!1)}function Ph(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _h(e,t,n,r){if(t===null||typeof t>"u"||Ph(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function pt(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){lt[e]=new pt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];lt[t]=new pt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){lt[e]=new pt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){lt[e]=new pt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){lt[e]=new pt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){lt[e]=new pt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){lt[e]=new pt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){lt[e]=new pt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){lt[e]=new pt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ii=/[\-:]([a-z])/g;function zi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ii,zi);lt[t]=new pt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ii,zi);lt[t]=new pt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ii,zi);lt[t]=new pt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){lt[e]=new pt(e,1,!1,e.toLowerCase(),null,!1,!1)});lt.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){lt[e]=new pt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ti(e,t,n,r){var s=lt.hasOwnProperty(t)?lt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_h(t,n,s,r)&&(n=null),r||s===null?Lh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var xn=bh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tl=Symbol.for("react.element"),gr=Symbol.for("react.portal"),yr=Symbol.for("react.fragment"),Ai=Symbol.for("react.strict_mode"),Sa=Symbol.for("react.profiler"),nf=Symbol.for("react.provider"),rf=Symbol.for("react.context"),$i=Symbol.for("react.forward_ref"),Na=Symbol.for("react.suspense"),ka=Symbol.for("react.suspense_list"),Mi=Symbol.for("react.memo"),Nn=Symbol.for("react.lazy"),sf=Symbol.for("react.offscreen"),Qc=Symbol.iterator;function Yr(e){return e===null||typeof e!="object"?null:(e=Qc&&e[Qc]||e["@@iterator"],typeof e=="function"?e:null)}var Be=Object.assign,Do;function ss(e){if(Do===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Do=t&&t[1]||""}return`
`+Do+e}var Uo=!1;function Bo(e,t){if(!e||Uo)return"";Uo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,i=o.length-1;1<=a&&0<=i&&s[a]!==o[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==o[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==o[i]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=i);break}}}finally{Uo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ss(e):""}function Rh(e){switch(e.tag){case 5:return ss(e.type);case 16:return ss("Lazy");case 13:return ss("Suspense");case 19:return ss("SuspenseList");case 0:case 2:case 15:return e=Bo(e.type,!1),e;case 11:return e=Bo(e.type.render,!1),e;case 1:return e=Bo(e.type,!0),e;default:return""}}function Ca(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yr:return"Fragment";case gr:return"Portal";case Sa:return"Profiler";case Ai:return"StrictMode";case Na:return"Suspense";case ka:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rf:return(e.displayName||"Context")+".Consumer";case nf:return(e._context.displayName||"Context")+".Provider";case $i:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mi:return t=e.displayName||null,t!==null?t:Ca(e.type)||"Memo";case Nn:t=e._payload,e=e._init;try{return Ca(e(t))}catch{}}return null}function Ih(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ca(t);case 8:return t===Ai?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Dn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zh(e){var t=lf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function nl(e){e._valueTracker||(e._valueTracker=zh(e))}function of(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=lf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function zl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ba(e,t){var n=t.checked;return Be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Yc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Dn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function af(e,t){t=t.checked,t!=null&&Ti(e,"checked",t,!1)}function Ea(e,t){af(e,t);var n=Dn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?La(e,t.type,n):t.hasOwnProperty("defaultValue")&&La(e,t.type,Dn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function La(e,t,n){(t!=="number"||zl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ls=Array.isArray;function Lr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Dn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Pa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Q(92));if(ls(n)){if(1<n.length)throw Error(Q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Dn(n)}}function cf(e,t){var n=Dn(t.value),r=Dn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Jc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function uf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _a(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?uf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rl,df=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(rl=rl||document.createElement("div"),rl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ss(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var us={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Th=["Webkit","ms","Moz","O"];Object.keys(us).forEach(function(e){Th.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),us[t]=us[e]})});function ff(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||us.hasOwnProperty(e)&&us[e]?(""+t).trim():t+"px"}function pf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ff(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Ah=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ra(e,t){if(t){if(Ah[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function Ia(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var za=null;function Oi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ta=null,Pr=null,_r=null;function Zc(e){if(e=Ws(e)){if(typeof Ta!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=yo(t),Ta(e.stateNode,e.type,t))}}function mf(e){Pr?_r?_r.push(e):_r=[e]:Pr=e}function hf(){if(Pr){var e=Pr,t=_r;if(_r=Pr=null,Zc(e),t)for(e=0;e<t.length;e++)Zc(t[e])}}function gf(e,t){return e(t)}function yf(){}var Wo=!1;function vf(e,t,n){if(Wo)return e(t,n);Wo=!0;try{return gf(e,t,n)}finally{Wo=!1,(Pr!==null||_r!==null)&&(yf(),hf())}}function Ns(e,t){var n=e.stateNode;if(n===null)return null;var r=yo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Q(231,t,typeof n));return n}var Aa=!1;if(hn)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){Aa=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{Aa=!1}function $h(e,t,n,r,s,o,a,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(y){this.onError(y)}}var ds=!1,Tl=null,Al=!1,$a=null,Mh={onError:function(e){ds=!0,Tl=e}};function Oh(e,t,n,r,s,o,a,i,c){ds=!1,Tl=null,$h.apply(Mh,arguments)}function Fh(e,t,n,r,s,o,a,i,c){if(Oh.apply(this,arguments),ds){if(ds){var d=Tl;ds=!1,Tl=null}else throw Error(Q(198));Al||(Al=!0,$a=d)}}function ur(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function xf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eu(e){if(ur(e)!==e)throw Error(Q(188))}function Dh(e){var t=e.alternate;if(!t){if(t=ur(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return eu(s),e;if(o===r)return eu(s),t;o=o.sibling}throw Error(Q(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=o;break}if(i===r){a=!0,r=s,n=o;break}i=i.sibling}if(!a){for(i=o.child;i;){if(i===n){a=!0,n=o,r=s;break}if(i===r){a=!0,r=o,n=s;break}i=i.sibling}if(!a)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?e:t}function wf(e){return e=Dh(e),e!==null?jf(e):null}function jf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jf(e);if(t!==null)return t;e=e.sibling}return null}var Sf=bt.unstable_scheduleCallback,tu=bt.unstable_cancelCallback,Uh=bt.unstable_shouldYield,Bh=bt.unstable_requestPaint,He=bt.unstable_now,Wh=bt.unstable_getCurrentPriorityLevel,Fi=bt.unstable_ImmediatePriority,Nf=bt.unstable_UserBlockingPriority,$l=bt.unstable_NormalPriority,Vh=bt.unstable_LowPriority,kf=bt.unstable_IdlePriority,po=null,tn=null;function Hh(e){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(po,e,void 0,(e.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:Qh,Gh=Math.log,Kh=Math.LN2;function Qh(e){return e>>>=0,e===0?32:31-(Gh(e)/Kh|0)|0}var sl=64,ll=4194304;function os(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ml(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=os(i):(o&=a,o!==0&&(r=os(o)))}else a=n&~s,a!==0?r=os(a):o!==0&&(r=os(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Wt(t),s=1<<n,r|=e[n],t&=~s;return r}function Yh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Wt(o),i=1<<a,c=s[a];c===-1?(!(i&n)||i&r)&&(s[a]=Yh(i,t)):c<=t&&(e.expiredLanes|=i),o&=~i}}function Ma(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cf(){var e=sl;return sl<<=1,!(sl&4194240)&&(sl=64),e}function Vo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Us(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wt(t),e[t]=n}function Xh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Wt(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Di(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Wt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var _e=0;function bf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ef,Ui,Lf,Pf,_f,Oa=!1,ol=[],_n=null,Rn=null,In=null,ks=new Map,Cs=new Map,Cn=[],Jh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nu(e,t){switch(e){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":ks.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cs.delete(t.pointerId)}}function Xr(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Ws(t),t!==null&&Ui(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Zh(e,t,n,r,s){switch(t){case"focusin":return _n=Xr(_n,e,t,n,r,s),!0;case"dragenter":return Rn=Xr(Rn,e,t,n,r,s),!0;case"mouseover":return In=Xr(In,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return ks.set(o,Xr(ks.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Cs.set(o,Xr(Cs.get(o)||null,e,t,n,r,s)),!0}return!1}function Rf(e){var t=Zn(e.target);if(t!==null){var n=ur(t);if(n!==null){if(t=n.tag,t===13){if(t=xf(n),t!==null){e.blockedOn=t,_f(e.priority,function(){Lf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);za=r,n.target.dispatchEvent(r),za=null}else return t=Ws(n),t!==null&&Ui(t),e.blockedOn=n,!1;t.shift()}return!0}function ru(e,t,n){Sl(e)&&n.delete(t)}function eg(){Oa=!1,_n!==null&&Sl(_n)&&(_n=null),Rn!==null&&Sl(Rn)&&(Rn=null),In!==null&&Sl(In)&&(In=null),ks.forEach(ru),Cs.forEach(ru)}function Jr(e,t){e.blockedOn===t&&(e.blockedOn=null,Oa||(Oa=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,eg)))}function bs(e){function t(s){return Jr(s,e)}if(0<ol.length){Jr(ol[0],e);for(var n=1;n<ol.length;n++){var r=ol[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_n!==null&&Jr(_n,e),Rn!==null&&Jr(Rn,e),In!==null&&Jr(In,e),ks.forEach(t),Cs.forEach(t),n=0;n<Cn.length;n++)r=Cn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Cn.length&&(n=Cn[0],n.blockedOn===null);)Rf(n),n.blockedOn===null&&Cn.shift()}var Rr=xn.ReactCurrentBatchConfig,Ol=!0;function tg(e,t,n,r){var s=_e,o=Rr.transition;Rr.transition=null;try{_e=1,Bi(e,t,n,r)}finally{_e=s,Rr.transition=o}}function ng(e,t,n,r){var s=_e,o=Rr.transition;Rr.transition=null;try{_e=4,Bi(e,t,n,r)}finally{_e=s,Rr.transition=o}}function Bi(e,t,n,r){if(Ol){var s=Fa(e,t,n,r);if(s===null)ea(e,t,r,Fl,n),nu(e,r);else if(Zh(s,e,t,n,r))r.stopPropagation();else if(nu(e,r),t&4&&-1<Jh.indexOf(e)){for(;s!==null;){var o=Ws(s);if(o!==null&&Ef(o),o=Fa(e,t,n,r),o===null&&ea(e,t,r,Fl,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else ea(e,t,r,null,n)}}var Fl=null;function Fa(e,t,n,r){if(Fl=null,e=Oi(r),e=Zn(e),e!==null)if(t=ur(e),t===null)e=null;else if(n=t.tag,n===13){if(e=xf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fl=e,null}function If(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wh()){case Fi:return 1;case Nf:return 4;case $l:case Vh:return 16;case kf:return 536870912;default:return 16}default:return 16}}var En=null,Wi=null,Nl=null;function zf(){if(Nl)return Nl;var e,t=Wi,n=t.length,r,s="value"in En?En.value:En.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return Nl=s.slice(e,1<r?1-r:void 0)}function kl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function al(){return!0}function su(){return!1}function Lt(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?al:su,this.isPropagationStopped=su,this}return Be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=al)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=al)},persist:function(){},isPersistent:al}),t}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=Lt(Hr),Bs=Be({},Hr,{view:0,detail:0}),rg=Lt(Bs),Ho,Go,Zr,mo=Be({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zr&&(Zr&&e.type==="mousemove"?(Ho=e.screenX-Zr.screenX,Go=e.screenY-Zr.screenY):Go=Ho=0,Zr=e),Ho)},movementY:function(e){return"movementY"in e?e.movementY:Go}}),lu=Lt(mo),sg=Be({},mo,{dataTransfer:0}),lg=Lt(sg),og=Be({},Bs,{relatedTarget:0}),Ko=Lt(og),ag=Be({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),ig=Lt(ag),cg=Be({},Hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ug=Lt(cg),dg=Be({},Hr,{data:0}),ou=Lt(dg),fg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mg[e])?!!t[e]:!1}function Hi(){return hg}var gg=Be({},Bs,{key:function(e){if(e.key){var t=fg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=kl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hi,charCode:function(e){return e.type==="keypress"?kl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yg=Lt(gg),vg=Be({},mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),au=Lt(vg),xg=Be({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hi}),wg=Lt(xg),jg=Be({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sg=Lt(jg),Ng=Be({},mo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kg=Lt(Ng),Cg=[9,13,27,32],Gi=hn&&"CompositionEvent"in window,fs=null;hn&&"documentMode"in document&&(fs=document.documentMode);var bg=hn&&"TextEvent"in window&&!fs,Tf=hn&&(!Gi||fs&&8<fs&&11>=fs),iu=" ",cu=!1;function Af(e,t){switch(e){case"keyup":return Cg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $f(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vr=!1;function Eg(e,t){switch(e){case"compositionend":return $f(t);case"keypress":return t.which!==32?null:(cu=!0,iu);case"textInput":return e=t.data,e===iu&&cu?null:e;default:return null}}function Lg(e,t){if(vr)return e==="compositionend"||!Gi&&Af(e,t)?(e=zf(),Nl=Wi=En=null,vr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tf&&t.locale!=="ko"?null:t.data;default:return null}}var Pg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Pg[e.type]:t==="textarea"}function Mf(e,t,n,r){mf(r),t=Dl(t,"onChange"),0<t.length&&(n=new Vi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ps=null,Es=null;function _g(e){Qf(e,0)}function ho(e){var t=jr(e);if(of(t))return e}function Rg(e,t){if(e==="change")return t}var Of=!1;if(hn){var Qo;if(hn){var Yo="oninput"in document;if(!Yo){var du=document.createElement("div");du.setAttribute("oninput","return;"),Yo=typeof du.oninput=="function"}Qo=Yo}else Qo=!1;Of=Qo&&(!document.documentMode||9<document.documentMode)}function fu(){ps&&(ps.detachEvent("onpropertychange",Ff),Es=ps=null)}function Ff(e){if(e.propertyName==="value"&&ho(Es)){var t=[];Mf(t,Es,e,Oi(e)),vf(_g,t)}}function Ig(e,t,n){e==="focusin"?(fu(),ps=t,Es=n,ps.attachEvent("onpropertychange",Ff)):e==="focusout"&&fu()}function zg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ho(Es)}function Tg(e,t){if(e==="click")return ho(t)}function Ag(e,t){if(e==="input"||e==="change")return ho(t)}function $g(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ht=typeof Object.is=="function"?Object.is:$g;function Ls(e,t){if(Ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ja.call(t,s)||!Ht(e[s],t[s]))return!1}return!0}function pu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mu(e,t){var n=pu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pu(n)}}function Df(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Df(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Uf(){for(var e=window,t=zl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zl(e.document)}return t}function Ki(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Mg(e){var t=Uf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Df(n.ownerDocument.documentElement,n)){if(r!==null&&Ki(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=mu(n,o);var a=mu(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Og=hn&&"documentMode"in document&&11>=document.documentMode,xr=null,Da=null,ms=null,Ua=!1;function hu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ua||xr==null||xr!==zl(r)||(r=xr,"selectionStart"in r&&Ki(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ms&&Ls(ms,r)||(ms=r,r=Dl(Da,"onSelect"),0<r.length&&(t=new Vi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=xr)))}function il(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:il("Animation","AnimationEnd"),animationiteration:il("Animation","AnimationIteration"),animationstart:il("Animation","AnimationStart"),transitionend:il("Transition","TransitionEnd")},qo={},Bf={};hn&&(Bf=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function go(e){if(qo[e])return qo[e];if(!wr[e])return e;var t=wr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Bf)return qo[e]=t[n];return e}var Wf=go("animationend"),Vf=go("animationiteration"),Hf=go("animationstart"),Gf=go("transitionend"),Kf=new Map,gu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wn(e,t){Kf.set(e,t),cr(t,[e])}for(var Xo=0;Xo<gu.length;Xo++){var Jo=gu[Xo],Fg=Jo.toLowerCase(),Dg=Jo[0].toUpperCase()+Jo.slice(1);Wn(Fg,"on"+Dg)}Wn(Wf,"onAnimationEnd");Wn(Vf,"onAnimationIteration");Wn(Hf,"onAnimationStart");Wn("dblclick","onDoubleClick");Wn("focusin","onFocus");Wn("focusout","onBlur");Wn(Gf,"onTransitionEnd");$r("onMouseEnter",["mouseout","mouseover"]);$r("onMouseLeave",["mouseout","mouseover"]);$r("onPointerEnter",["pointerout","pointerover"]);$r("onPointerLeave",["pointerout","pointerover"]);cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cr("onBeforeInput",["compositionend","keypress","textInput","paste"]);cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var as="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ug=new Set("cancel close invalid load scroll toggle".split(" ").concat(as));function yu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Fh(r,t,void 0,e),e.currentTarget=null}function Qf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==o&&s.isPropagationStopped())break e;yu(s,i,d),o=c}else for(a=0;a<r.length;a++){if(i=r[a],c=i.instance,d=i.currentTarget,i=i.listener,c!==o&&s.isPropagationStopped())break e;yu(s,i,d),o=c}}}if(Al)throw e=$a,Al=!1,$a=null,e}function Ae(e,t){var n=t[Ga];n===void 0&&(n=t[Ga]=new Set);var r=e+"__bubble";n.has(r)||(Yf(t,e,2,!1),n.add(r))}function Zo(e,t,n){var r=0;t&&(r|=4),Yf(n,e,r,t)}var cl="_reactListening"+Math.random().toString(36).slice(2);function Ps(e){if(!e[cl]){e[cl]=!0,tf.forEach(function(n){n!=="selectionchange"&&(Ug.has(n)||Zo(n,!1,e),Zo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cl]||(t[cl]=!0,Zo("selectionchange",!1,t))}}function Yf(e,t,n,r){switch(If(t)){case 1:var s=tg;break;case 4:s=ng;break;default:s=Bi}n=s.bind(null,t,n,e),s=void 0,!Aa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ea(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;i!==null;){if(a=Zn(i),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}i=i.parentNode}}r=r.return}vf(function(){var d=o,y=Oi(n),h=[];e:{var g=Kf.get(e);if(g!==void 0){var v=Vi,w=e;switch(e){case"keypress":if(kl(n)===0)break e;case"keydown":case"keyup":v=yg;break;case"focusin":w="focus",v=Ko;break;case"focusout":w="blur",v=Ko;break;case"beforeblur":case"afterblur":v=Ko;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=lg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=wg;break;case Wf:case Vf:case Hf:v=ig;break;case Gf:v=Sg;break;case"scroll":v=rg;break;case"wheel":v=kg;break;case"copy":case"cut":case"paste":v=ug;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=au}var N=(t&4)!==0,S=!N&&e==="scroll",m=N?g!==null?g+"Capture":null:g;N=[];for(var f=d,p;f!==null;){p=f;var j=p.stateNode;if(p.tag===5&&j!==null&&(p=j,m!==null&&(j=Ns(f,m),j!=null&&N.push(_s(f,j,p)))),S)break;f=f.return}0<N.length&&(g=new v(g,w,null,n,y),h.push({event:g,listeners:N}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",g&&n!==za&&(w=n.relatedTarget||n.fromElement)&&(Zn(w)||w[gn]))break e;if((v||g)&&(g=y.window===y?y:(g=y.ownerDocument)?g.defaultView||g.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=d,w=w?Zn(w):null,w!==null&&(S=ur(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=d),v!==w)){if(N=lu,j="onMouseLeave",m="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(N=au,j="onPointerLeave",m="onPointerEnter",f="pointer"),S=v==null?g:jr(v),p=w==null?g:jr(w),g=new N(j,f+"leave",v,n,y),g.target=S,g.relatedTarget=p,j=null,Zn(y)===d&&(N=new N(m,f+"enter",w,n,y),N.target=p,N.relatedTarget=S,j=N),S=j,v&&w)t:{for(N=v,m=w,f=0,p=N;p;p=fr(p))f++;for(p=0,j=m;j;j=fr(j))p++;for(;0<f-p;)N=fr(N),f--;for(;0<p-f;)m=fr(m),p--;for(;f--;){if(N===m||m!==null&&N===m.alternate)break t;N=fr(N),m=fr(m)}N=null}else N=null;v!==null&&vu(h,g,v,N,!1),w!==null&&S!==null&&vu(h,S,w,N,!0)}}e:{if(g=d?jr(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var k=Rg;else if(uu(g))if(Of)k=Ag;else{k=zg;var L=Ig}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(k=Tg);if(k&&(k=k(e,d))){Mf(h,k,n,y);break e}L&&L(e,g,d),e==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&La(g,"number",g.value)}switch(L=d?jr(d):window,e){case"focusin":(uu(L)||L.contentEditable==="true")&&(xr=L,Da=d,ms=null);break;case"focusout":ms=Da=xr=null;break;case"mousedown":Ua=!0;break;case"contextmenu":case"mouseup":case"dragend":Ua=!1,hu(h,n,y);break;case"selectionchange":if(Og)break;case"keydown":case"keyup":hu(h,n,y)}var I;if(Gi)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else vr?Af(e,n)&&(b="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(Tf&&n.locale!=="ko"&&(vr||b!=="onCompositionStart"?b==="onCompositionEnd"&&vr&&(I=zf()):(En=y,Wi="value"in En?En.value:En.textContent,vr=!0)),L=Dl(d,b),0<L.length&&(b=new ou(b,e,null,n,y),h.push({event:b,listeners:L}),I?b.data=I:(I=$f(n),I!==null&&(b.data=I)))),(I=bg?Eg(e,n):Lg(e,n))&&(d=Dl(d,"onBeforeInput"),0<d.length&&(y=new ou("onBeforeInput","beforeinput",null,n,y),h.push({event:y,listeners:d}),y.data=I))}Qf(h,t)})}function _s(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Dl(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Ns(e,n),o!=null&&r.unshift(_s(e,o,s)),o=Ns(e,t),o!=null&&r.push(_s(e,o,s))),e=e.return}return r}function fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vu(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var i=n,c=i.alternate,d=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&d!==null&&(i=d,s?(c=Ns(n,o),c!=null&&a.unshift(_s(n,c,i))):s||(c=Ns(n,o),c!=null&&a.push(_s(n,c,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Bg=/\r\n?/g,Wg=/\u0000|\uFFFD/g;function xu(e){return(typeof e=="string"?e:""+e).replace(Bg,`
`).replace(Wg,"")}function ul(e,t,n){if(t=xu(t),xu(e)!==t&&n)throw Error(Q(425))}function Ul(){}var Ba=null,Wa=null;function Va(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ha=typeof setTimeout=="function"?setTimeout:void 0,Vg=typeof clearTimeout=="function"?clearTimeout:void 0,wu=typeof Promise=="function"?Promise:void 0,Hg=typeof queueMicrotask=="function"?queueMicrotask:typeof wu<"u"?function(e){return wu.resolve(null).then(e).catch(Gg)}:Ha;function Gg(e){setTimeout(function(){throw e})}function ta(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),bs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);bs(t)}function zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ju(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),qt="__reactFiber$"+Gr,Rs="__reactProps$"+Gr,gn="__reactContainer$"+Gr,Ga="__reactEvents$"+Gr,Kg="__reactListeners$"+Gr,Qg="__reactHandles$"+Gr;function Zn(e){var t=e[qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gn]||n[qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ju(e);e!==null;){if(n=e[qt])return n;e=ju(e)}return t}e=n,n=e.parentNode}return null}function Ws(e){return e=e[qt]||e[gn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function yo(e){return e[Rs]||null}var Ka=[],Sr=-1;function Vn(e){return{current:e}}function $e(e){0>Sr||(e.current=Ka[Sr],Ka[Sr]=null,Sr--)}function ze(e,t){Sr++,Ka[Sr]=e.current,e.current=t}var Un={},ct=Vn(Un),yt=Vn(!1),sr=Un;function Mr(e,t){var n=e.type.contextTypes;if(!n)return Un;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function vt(e){return e=e.childContextTypes,e!=null}function Bl(){$e(yt),$e(ct)}function Su(e,t,n){if(ct.current!==Un)throw Error(Q(168));ze(ct,t),ze(yt,n)}function qf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Q(108,Ih(e)||"Unknown",s));return Be({},n,r)}function Wl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Un,sr=ct.current,ze(ct,e),ze(yt,yt.current),!0}function Nu(e,t,n){var r=e.stateNode;if(!r)throw Error(Q(169));n?(e=qf(e,t,sr),r.__reactInternalMemoizedMergedChildContext=e,$e(yt),$e(ct),ze(ct,e)):$e(yt),ze(yt,n)}var on=null,vo=!1,na=!1;function Xf(e){on===null?on=[e]:on.push(e)}function Yg(e){vo=!0,Xf(e)}function Hn(){if(!na&&on!==null){na=!0;var e=0,t=_e;try{var n=on;for(_e=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}on=null,vo=!1}catch(s){throw on!==null&&(on=on.slice(e+1)),Sf(Fi,Hn),s}finally{_e=t,na=!1}}return null}var Nr=[],kr=0,Vl=null,Hl=0,Rt=[],It=0,lr=null,un=1,dn="";function qn(e,t){Nr[kr++]=Hl,Nr[kr++]=Vl,Vl=e,Hl=t}function Jf(e,t,n){Rt[It++]=un,Rt[It++]=dn,Rt[It++]=lr,lr=e;var r=un;e=dn;var s=32-Wt(r)-1;r&=~(1<<s),n+=1;var o=32-Wt(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,un=1<<32-Wt(t)+s|n<<s|r,dn=o+e}else un=1<<o|n<<s|r,dn=e}function Qi(e){e.return!==null&&(qn(e,1),Jf(e,1,0))}function Yi(e){for(;e===Vl;)Vl=Nr[--kr],Nr[kr]=null,Hl=Nr[--kr],Nr[kr]=null;for(;e===lr;)lr=Rt[--It],Rt[It]=null,dn=Rt[--It],Rt[It]=null,un=Rt[--It],Rt[It]=null}var Ct=null,kt=null,Me=!1,Bt=null;function Zf(e,t){var n=Tt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ku(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ct=e,kt=zn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ct=e,kt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=lr!==null?{id:un,overflow:dn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Tt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ct=e,kt=null,!0):!1;default:return!1}}function Qa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ya(e){if(Me){var t=kt;if(t){var n=t;if(!ku(e,t)){if(Qa(e))throw Error(Q(418));t=zn(n.nextSibling);var r=Ct;t&&ku(e,t)?Zf(r,n):(e.flags=e.flags&-4097|2,Me=!1,Ct=e)}}else{if(Qa(e))throw Error(Q(418));e.flags=e.flags&-4097|2,Me=!1,Ct=e}}}function Cu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ct=e}function dl(e){if(e!==Ct)return!1;if(!Me)return Cu(e),Me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Va(e.type,e.memoizedProps)),t&&(t=kt)){if(Qa(e))throw ep(),Error(Q(418));for(;t;)Zf(e,t),t=zn(t.nextSibling)}if(Cu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){kt=zn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}kt=null}}else kt=Ct?zn(e.stateNode.nextSibling):null;return!0}function ep(){for(var e=kt;e;)e=zn(e.nextSibling)}function Or(){kt=Ct=null,Me=!1}function qi(e){Bt===null?Bt=[e]:Bt.push(e)}var qg=xn.ReactCurrentBatchConfig;function es(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var i=s.refs;a===null?delete i[o]:i[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,e))}return e}function fl(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bu(e){var t=e._init;return t(e._payload)}function tp(e){function t(m,f){if(e){var p=m.deletions;p===null?(m.deletions=[f],m.flags|=16):p.push(f)}}function n(m,f){if(!e)return null;for(;f!==null;)t(m,f),f=f.sibling;return null}function r(m,f){for(m=new Map;f!==null;)f.key!==null?m.set(f.key,f):m.set(f.index,f),f=f.sibling;return m}function s(m,f){return m=Mn(m,f),m.index=0,m.sibling=null,m}function o(m,f,p){return m.index=p,e?(p=m.alternate,p!==null?(p=p.index,p<f?(m.flags|=2,f):p):(m.flags|=2,f)):(m.flags|=1048576,f)}function a(m){return e&&m.alternate===null&&(m.flags|=2),m}function i(m,f,p,j){return f===null||f.tag!==6?(f=ca(p,m.mode,j),f.return=m,f):(f=s(f,p),f.return=m,f)}function c(m,f,p,j){var k=p.type;return k===yr?y(m,f,p.props.children,j,p.key):f!==null&&(f.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Nn&&bu(k)===f.type)?(j=s(f,p.props),j.ref=es(m,f,p),j.return=m,j):(j=Rl(p.type,p.key,p.props,null,m.mode,j),j.ref=es(m,f,p),j.return=m,j)}function d(m,f,p,j){return f===null||f.tag!==4||f.stateNode.containerInfo!==p.containerInfo||f.stateNode.implementation!==p.implementation?(f=ua(p,m.mode,j),f.return=m,f):(f=s(f,p.children||[]),f.return=m,f)}function y(m,f,p,j,k){return f===null||f.tag!==7?(f=rr(p,m.mode,j,k),f.return=m,f):(f=s(f,p),f.return=m,f)}function h(m,f,p){if(typeof f=="string"&&f!==""||typeof f=="number")return f=ca(""+f,m.mode,p),f.return=m,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case tl:return p=Rl(f.type,f.key,f.props,null,m.mode,p),p.ref=es(m,null,f),p.return=m,p;case gr:return f=ua(f,m.mode,p),f.return=m,f;case Nn:var j=f._init;return h(m,j(f._payload),p)}if(ls(f)||Yr(f))return f=rr(f,m.mode,p,null),f.return=m,f;fl(m,f)}return null}function g(m,f,p,j){var k=f!==null?f.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return k!==null?null:i(m,f,""+p,j);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case tl:return p.key===k?c(m,f,p,j):null;case gr:return p.key===k?d(m,f,p,j):null;case Nn:return k=p._init,g(m,f,k(p._payload),j)}if(ls(p)||Yr(p))return k!==null?null:y(m,f,p,j,null);fl(m,p)}return null}function v(m,f,p,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return m=m.get(p)||null,i(f,m,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case tl:return m=m.get(j.key===null?p:j.key)||null,c(f,m,j,k);case gr:return m=m.get(j.key===null?p:j.key)||null,d(f,m,j,k);case Nn:var L=j._init;return v(m,f,p,L(j._payload),k)}if(ls(j)||Yr(j))return m=m.get(p)||null,y(f,m,j,k,null);fl(f,j)}return null}function w(m,f,p,j){for(var k=null,L=null,I=f,b=f=0,$=null;I!==null&&b<p.length;b++){I.index>b?($=I,I=null):$=I.sibling;var z=g(m,I,p[b],j);if(z===null){I===null&&(I=$);break}e&&I&&z.alternate===null&&t(m,I),f=o(z,f,b),L===null?k=z:L.sibling=z,L=z,I=$}if(b===p.length)return n(m,I),Me&&qn(m,b),k;if(I===null){for(;b<p.length;b++)I=h(m,p[b],j),I!==null&&(f=o(I,f,b),L===null?k=I:L.sibling=I,L=I);return Me&&qn(m,b),k}for(I=r(m,I);b<p.length;b++)$=v(I,m,b,p[b],j),$!==null&&(e&&$.alternate!==null&&I.delete($.key===null?b:$.key),f=o($,f,b),L===null?k=$:L.sibling=$,L=$);return e&&I.forEach(function(W){return t(m,W)}),Me&&qn(m,b),k}function N(m,f,p,j){var k=Yr(p);if(typeof k!="function")throw Error(Q(150));if(p=k.call(p),p==null)throw Error(Q(151));for(var L=k=null,I=f,b=f=0,$=null,z=p.next();I!==null&&!z.done;b++,z=p.next()){I.index>b?($=I,I=null):$=I.sibling;var W=g(m,I,z.value,j);if(W===null){I===null&&(I=$);break}e&&I&&W.alternate===null&&t(m,I),f=o(W,f,b),L===null?k=W:L.sibling=W,L=W,I=$}if(z.done)return n(m,I),Me&&qn(m,b),k;if(I===null){for(;!z.done;b++,z=p.next())z=h(m,z.value,j),z!==null&&(f=o(z,f,b),L===null?k=z:L.sibling=z,L=z);return Me&&qn(m,b),k}for(I=r(m,I);!z.done;b++,z=p.next())z=v(I,m,b,z.value,j),z!==null&&(e&&z.alternate!==null&&I.delete(z.key===null?b:z.key),f=o(z,f,b),L===null?k=z:L.sibling=z,L=z);return e&&I.forEach(function(de){return t(m,de)}),Me&&qn(m,b),k}function S(m,f,p,j){if(typeof p=="object"&&p!==null&&p.type===yr&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case tl:e:{for(var k=p.key,L=f;L!==null;){if(L.key===k){if(k=p.type,k===yr){if(L.tag===7){n(m,L.sibling),f=s(L,p.props.children),f.return=m,m=f;break e}}else if(L.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Nn&&bu(k)===L.type){n(m,L.sibling),f=s(L,p.props),f.ref=es(m,L,p),f.return=m,m=f;break e}n(m,L);break}else t(m,L);L=L.sibling}p.type===yr?(f=rr(p.props.children,m.mode,j,p.key),f.return=m,m=f):(j=Rl(p.type,p.key,p.props,null,m.mode,j),j.ref=es(m,f,p),j.return=m,m=j)}return a(m);case gr:e:{for(L=p.key;f!==null;){if(f.key===L)if(f.tag===4&&f.stateNode.containerInfo===p.containerInfo&&f.stateNode.implementation===p.implementation){n(m,f.sibling),f=s(f,p.children||[]),f.return=m,m=f;break e}else{n(m,f);break}else t(m,f);f=f.sibling}f=ua(p,m.mode,j),f.return=m,m=f}return a(m);case Nn:return L=p._init,S(m,f,L(p._payload),j)}if(ls(p))return w(m,f,p,j);if(Yr(p))return N(m,f,p,j);fl(m,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,f!==null&&f.tag===6?(n(m,f.sibling),f=s(f,p),f.return=m,m=f):(n(m,f),f=ca(p,m.mode,j),f.return=m,m=f),a(m)):n(m,f)}return S}var Fr=tp(!0),np=tp(!1),Gl=Vn(null),Kl=null,Cr=null,Xi=null;function Ji(){Xi=Cr=Kl=null}function Zi(e){var t=Gl.current;$e(Gl),e._currentValue=t}function qa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ir(e,t){Kl=e,Xi=Cr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gt=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(Xi!==e)if(e={context:e,memoizedValue:t,next:null},Cr===null){if(Kl===null)throw Error(Q(308));Cr=e,Kl.dependencies={lanes:0,firstContext:e}}else Cr=Cr.next=e;return t}var er=null;function ec(e){er===null?er=[e]:er.push(e)}function rp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ec(t)):(n.next=s.next,s.next=n),t.interleaved=n,yn(e,r)}function yn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var kn=!1;function tc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,yn(e,n)}return s=r.interleaved,s===null?(t.next=t,ec(r)):(t.next=s.next,s.next=t),r.interleaved=t,yn(e,n)}function Cl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Di(e,n)}}function Eu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ql(e,t,n,r){var s=e.updateQueue;kn=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,d=c.next;c.next=null,a===null?o=d:a.next=d,a=c;var y=e.alternate;y!==null&&(y=y.updateQueue,i=y.lastBaseUpdate,i!==a&&(i===null?y.firstBaseUpdate=d:i.next=d,y.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;a=0,y=d=c=null,i=o;do{var g=i.lane,v=i.eventTime;if((r&g)===g){y!==null&&(y=y.next={eventTime:v,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,N=i;switch(g=t,v=n,N.tag){case 1:if(w=N.payload,typeof w=="function"){h=w.call(v,h,g);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=N.payload,g=typeof w=="function"?w.call(v,h,g):w,g==null)break e;h=Be({},h,g);break e;case 2:kn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[i]:g.push(i))}else v={eventTime:v,lane:g,tag:i.tag,payload:i.payload,callback:i.callback,next:null},y===null?(d=y=v,c=h):y=y.next=v,a|=g;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;g=i,i=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(y===null&&(c=h),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=y,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);ar|=a,e.lanes=a,e.memoizedState=h}}function Lu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Q(191,s));s.call(r)}}}var Vs={},nn=Vn(Vs),Is=Vn(Vs),zs=Vn(Vs);function tr(e){if(e===Vs)throw Error(Q(174));return e}function nc(e,t){switch(ze(zs,t),ze(Is,e),ze(nn,Vs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_a(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_a(t,e)}$e(nn),ze(nn,t)}function Dr(){$e(nn),$e(Is),$e(zs)}function lp(e){tr(zs.current);var t=tr(nn.current),n=_a(t,e.type);t!==n&&(ze(Is,e),ze(nn,n))}function rc(e){Is.current===e&&($e(nn),$e(Is))}var Fe=Vn(0);function Yl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=[];function sc(){for(var e=0;e<ra.length;e++)ra[e]._workInProgressVersionPrimary=null;ra.length=0}var bl=xn.ReactCurrentDispatcher,sa=xn.ReactCurrentBatchConfig,or=0,De=null,qe=null,et=null,ql=!1,hs=!1,Ts=0,Xg=0;function ot(){throw Error(Q(321))}function lc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ht(e[n],t[n]))return!1;return!0}function oc(e,t,n,r,s,o){if(or=o,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bl.current=e===null||e.memoizedState===null?ty:ny,e=n(r,s),hs){o=0;do{if(hs=!1,Ts=0,25<=o)throw Error(Q(301));o+=1,et=qe=null,t.updateQueue=null,bl.current=ry,e=n(r,s)}while(hs)}if(bl.current=Xl,t=qe!==null&&qe.next!==null,or=0,et=qe=De=null,ql=!1,t)throw Error(Q(300));return e}function ac(){var e=Ts!==0;return Ts=0,e}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?De.memoizedState=et=e:et=et.next=e,et}function Mt(){if(qe===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=qe.next;var t=et===null?De.memoizedState:et.next;if(t!==null)et=t,qe=e;else{if(e===null)throw Error(Q(310));qe=e,e={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},et===null?De.memoizedState=et=e:et=et.next=e}return et}function As(e,t){return typeof t=="function"?t(e):t}function la(e){var t=Mt(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=qe,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var i=a=null,c=null,d=o;do{var y=d.lane;if((or&y)===y)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:y,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=h,a=r):c=c.next=h,De.lanes|=y,ar|=y}d=d.next}while(d!==null&&d!==o);c===null?a=r:c.next=i,Ht(r,t.memoizedState)||(gt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,De.lanes|=o,ar|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function oa(e){var t=Mt(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);Ht(o,t.memoizedState)||(gt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function op(){}function ap(e,t){var n=De,r=Mt(),s=t(),o=!Ht(r.memoizedState,s);if(o&&(r.memoizedState=s,gt=!0),r=r.queue,ic(up.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,$s(9,cp.bind(null,n,r,s,t),void 0,null),tt===null)throw Error(Q(349));or&30||ip(n,t,s)}return s}function ip(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function cp(e,t,n,r){t.value=n,t.getSnapshot=r,dp(t)&&fp(e)}function up(e,t,n){return n(function(){dp(t)&&fp(e)})}function dp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ht(e,n)}catch{return!0}}function fp(e){var t=yn(e,1);t!==null&&Vt(t,e,1,-1)}function Pu(e){var t=Yt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:e},t.queue=e,e=e.dispatch=ey.bind(null,De,e),[t.memoizedState,e]}function $s(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function pp(){return Mt().memoizedState}function El(e,t,n,r){var s=Yt();De.flags|=e,s.memoizedState=$s(1|t,n,void 0,r===void 0?null:r)}function xo(e,t,n,r){var s=Mt();r=r===void 0?null:r;var o=void 0;if(qe!==null){var a=qe.memoizedState;if(o=a.destroy,r!==null&&lc(r,a.deps)){s.memoizedState=$s(t,n,o,r);return}}De.flags|=e,s.memoizedState=$s(1|t,n,o,r)}function _u(e,t){return El(8390656,8,e,t)}function ic(e,t){return xo(2048,8,e,t)}function mp(e,t){return xo(4,2,e,t)}function hp(e,t){return xo(4,4,e,t)}function gp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yp(e,t,n){return n=n!=null?n.concat([e]):null,xo(4,4,gp.bind(null,t,e),n)}function cc(){}function vp(e,t){var n=Mt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&lc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xp(e,t){var n=Mt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&lc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function wp(e,t,n){return or&21?(Ht(n,t)||(n=Cf(),De.lanes|=n,ar|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=n)}function Jg(e,t){var n=_e;_e=n!==0&&4>n?n:4,e(!0);var r=sa.transition;sa.transition={};try{e(!1),t()}finally{_e=n,sa.transition=r}}function jp(){return Mt().memoizedState}function Zg(e,t,n){var r=$n(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Sp(e))Np(t,n);else if(n=rp(e,t,n,r),n!==null){var s=dt();Vt(n,e,r,s),kp(n,t,r)}}function ey(e,t,n){var r=$n(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sp(e))Np(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,i=o(a,n);if(s.hasEagerState=!0,s.eagerState=i,Ht(i,a)){var c=t.interleaved;c===null?(s.next=s,ec(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=rp(e,t,s,r),n!==null&&(s=dt(),Vt(n,e,r,s),kp(n,t,r))}}function Sp(e){var t=e.alternate;return e===De||t!==null&&t===De}function Np(e,t){hs=ql=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function kp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Di(e,n)}}var Xl={readContext:$t,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},ty={readContext:$t,useCallback:function(e,t){return Yt().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:_u,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,El(4194308,4,gp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return El(4194308,4,e,t)},useInsertionEffect:function(e,t){return El(4,2,e,t)},useMemo:function(e,t){var n=Yt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Yt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Zg.bind(null,De,e),[r.memoizedState,e]},useRef:function(e){var t=Yt();return e={current:e},t.memoizedState=e},useState:Pu,useDebugValue:cc,useDeferredValue:function(e){return Yt().memoizedState=e},useTransition:function(){var e=Pu(!1),t=e[0];return e=Jg.bind(null,e[1]),Yt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=De,s=Yt();if(Me){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=t(),tt===null)throw Error(Q(349));or&30||ip(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,_u(up.bind(null,r,o,e),[e]),r.flags|=2048,$s(9,cp.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Yt(),t=tt.identifierPrefix;if(Me){var n=dn,r=un;n=(r&~(1<<32-Wt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ts++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Xg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ny={readContext:$t,useCallback:vp,useContext:$t,useEffect:ic,useImperativeHandle:yp,useInsertionEffect:mp,useLayoutEffect:hp,useMemo:xp,useReducer:la,useRef:pp,useState:function(){return la(As)},useDebugValue:cc,useDeferredValue:function(e){var t=Mt();return wp(t,qe.memoizedState,e)},useTransition:function(){var e=la(As)[0],t=Mt().memoizedState;return[e,t]},useMutableSource:op,useSyncExternalStore:ap,useId:jp,unstable_isNewReconciler:!1},ry={readContext:$t,useCallback:vp,useContext:$t,useEffect:ic,useImperativeHandle:yp,useInsertionEffect:mp,useLayoutEffect:hp,useMemo:xp,useReducer:oa,useRef:pp,useState:function(){return oa(As)},useDebugValue:cc,useDeferredValue:function(e){var t=Mt();return qe===null?t.memoizedState=e:wp(t,qe.memoizedState,e)},useTransition:function(){var e=oa(As)[0],t=Mt().memoizedState;return[e,t]},useMutableSource:op,useSyncExternalStore:ap,useId:jp,unstable_isNewReconciler:!1};function Dt(e,t){if(e&&e.defaultProps){t=Be({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Xa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Be({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var wo={isMounted:function(e){return(e=e._reactInternals)?ur(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dt(),s=$n(e),o=pn(r,s);o.payload=t,n!=null&&(o.callback=n),t=Tn(e,o,s),t!==null&&(Vt(t,e,s,r),Cl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dt(),s=$n(e),o=pn(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Tn(e,o,s),t!==null&&(Vt(t,e,s,r),Cl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dt(),r=$n(e),s=pn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Tn(e,s,r),t!==null&&(Vt(t,e,r,n),Cl(t,e,r))}};function Ru(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Ls(n,r)||!Ls(s,o):!0}function Cp(e,t,n){var r=!1,s=Un,o=t.contextType;return typeof o=="object"&&o!==null?o=$t(o):(s=vt(t)?sr:ct.current,r=t.contextTypes,o=(r=r!=null)?Mr(e,s):Un),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=wo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Iu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wo.enqueueReplaceState(t,t.state,null)}function Ja(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},tc(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=$t(o):(o=vt(t)?sr:ct.current,s.context=Mr(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Xa(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&wo.enqueueReplaceState(s,s.state,null),Ql(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ur(e,t){try{var n="",r=t;do n+=Rh(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function aa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Za(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var sy=typeof WeakMap=="function"?WeakMap:Map;function bp(e,t,n){n=pn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zl||(Zl=!0,ci=r),Za(e,t)},n}function Ep(e,t,n){n=pn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Za(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Za(e,t),typeof r!="function"&&(An===null?An=new Set([this]):An.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function zu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new sy;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=vy.bind(null,e,t,n),t.then(e,e))}function Tu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Au(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=pn(-1,1),t.tag=2,Tn(n,t,1))),n.lanes|=1),e)}var ly=xn.ReactCurrentOwner,gt=!1;function ut(e,t,n,r){t.child=e===null?np(t,null,n,r):Fr(t,e.child,n,r)}function $u(e,t,n,r,s){n=n.render;var o=t.ref;return Ir(t,s),r=oc(e,t,n,r,o,s),n=ac(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,vn(e,t,s)):(Me&&n&&Qi(t),t.flags|=1,ut(e,t,r,s),t.child)}function Mu(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!yc(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Lp(e,t,o,r,s)):(e=Rl(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ls,n(a,r)&&e.ref===t.ref)return vn(e,t,s)}return t.flags|=1,e=Mn(o,r),e.ref=t.ref,e.return=t,t.child=e}function Lp(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Ls(o,r)&&e.ref===t.ref)if(gt=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(gt=!0);else return t.lanes=e.lanes,vn(e,t,s)}return ei(e,t,n,r,s)}function Pp(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Er,Nt),Nt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(Er,Nt),Nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ze(Er,Nt),Nt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ze(Er,Nt),Nt|=r;return ut(e,t,s,n),t.child}function _p(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ei(e,t,n,r,s){var o=vt(n)?sr:ct.current;return o=Mr(t,o),Ir(t,s),n=oc(e,t,n,r,o,s),r=ac(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,vn(e,t,s)):(Me&&r&&Qi(t),t.flags|=1,ut(e,t,n,s),t.child)}function Ou(e,t,n,r,s){if(vt(n)){var o=!0;Wl(t)}else o=!1;if(Ir(t,s),t.stateNode===null)Ll(e,t),Cp(t,n,r),Ja(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=$t(d):(d=vt(n)?sr:ct.current,d=Mr(t,d));var y=n.getDerivedStateFromProps,h=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||c!==d)&&Iu(t,a,r,d),kn=!1;var g=t.memoizedState;a.state=g,Ql(t,r,a,s),c=t.memoizedState,i!==r||g!==c||yt.current||kn?(typeof y=="function"&&(Xa(t,n,y,r),c=t.memoizedState),(i=kn||Ru(t,n,i,r,g,c,d))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,sp(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:Dt(t.type,i),a.props=d,h=t.pendingProps,g=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=$t(c):(c=vt(n)?sr:ct.current,c=Mr(t,c));var v=n.getDerivedStateFromProps;(y=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==h||g!==c)&&Iu(t,a,r,c),kn=!1,g=t.memoizedState,a.state=g,Ql(t,r,a,s);var w=t.memoizedState;i!==h||g!==w||yt.current||kn?(typeof v=="function"&&(Xa(t,n,v,r),w=t.memoizedState),(d=kn||Ru(t,n,d,r,g,w,c)||!1)?(y||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),a.props=r,a.state=w,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return ti(e,t,n,r,o,s)}function ti(e,t,n,r,s,o){_p(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Nu(t,n,!1),vn(e,t,o);r=t.stateNode,ly.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Fr(t,e.child,null,o),t.child=Fr(t,null,i,o)):ut(e,t,i,o),t.memoizedState=r.state,s&&Nu(t,n,!0),t.child}function Rp(e){var t=e.stateNode;t.pendingContext?Su(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Su(e,t.context,!1),nc(e,t.containerInfo)}function Fu(e,t,n,r,s){return Or(),qi(s),t.flags|=256,ut(e,t,n,r),t.child}var ni={dehydrated:null,treeContext:null,retryLane:0};function ri(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ip(e,t,n){var r=t.pendingProps,s=Fe.current,o=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ze(Fe,s&1),e===null)return Ya(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=No(a,r,0,null),e=rr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ri(n),t.memoizedState=ni,e):uc(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return oy(e,t,a,r,i,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Mn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?o=Mn(i,o):(o=rr(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?ri(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=ni,r}return o=e.child,e=o.sibling,r=Mn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function uc(e,t){return t=No({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function pl(e,t,n,r){return r!==null&&qi(r),Fr(t,e.child,null,n),e=uc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oy(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=aa(Error(Q(422))),pl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=No({mode:"visible",children:r.children},s,0,null),o=rr(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Fr(t,e.child,null,a),t.child.memoizedState=ri(a),t.memoizedState=ni,o);if(!(t.mode&1))return pl(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,o=Error(Q(419)),r=aa(o,r,void 0),pl(e,t,a,r)}if(i=(a&e.childLanes)!==0,gt||i){if(r=tt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,yn(e,s),Vt(r,e,s,-1))}return gc(),r=aa(Error(Q(421))),pl(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=xy.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,kt=zn(s.nextSibling),Ct=t,Me=!0,Bt=null,e!==null&&(Rt[It++]=un,Rt[It++]=dn,Rt[It++]=lr,un=e.id,dn=e.overflow,lr=t),t=uc(t,r.children),t.flags|=4096,t)}function Du(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),qa(e.return,t,n)}function ia(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function zp(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(ut(e,t,r.children,n),r=Fe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Du(e,n,t);else if(e.tag===19)Du(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ze(Fe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Yl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ia(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Yl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ia(t,!0,n,null,o);break;case"together":ia(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ll(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ar|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,n=Mn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Mn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ay(e,t,n){switch(t.tag){case 3:Rp(t),Or();break;case 5:lp(t);break;case 1:vt(t.type)&&Wl(t);break;case 4:nc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ze(Gl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ze(Fe,Fe.current&1),t.flags|=128,null):n&t.child.childLanes?Ip(e,t,n):(ze(Fe,Fe.current&1),e=vn(e,t,n),e!==null?e.sibling:null);ze(Fe,Fe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return zp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ze(Fe,Fe.current),r)break;return null;case 22:case 23:return t.lanes=0,Pp(e,t,n)}return vn(e,t,n)}var Tp,si,Ap,$p;Tp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};si=function(){};Ap=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,tr(nn.current);var o=null;switch(n){case"input":s=ba(e,s),r=ba(e,r),o=[];break;case"select":s=Be({},s,{value:void 0}),r=Be({},r,{value:void 0}),o=[];break;case"textarea":s=Pa(e,s),r=Pa(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ul)}Ra(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(js.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(i=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(a in i)!i.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&i[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(js.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ae("scroll",e),o||i===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};$p=function(e,t,n,r){n!==r&&(t.flags|=4)};function ts(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function at(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function iy(e,t,n){var r=t.pendingProps;switch(Yi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(t),null;case 1:return vt(t.type)&&Bl(),at(t),null;case 3:return r=t.stateNode,Dr(),$e(yt),$e(ct),sc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(dl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bt!==null&&(fi(Bt),Bt=null))),si(e,t),at(t),null;case 5:rc(t);var s=tr(zs.current);if(n=t.type,e!==null&&t.stateNode!=null)Ap(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Q(166));return at(t),null}if(e=tr(nn.current),dl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[qt]=t,r[Rs]=o,e=(t.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(s=0;s<as.length;s++)Ae(as[s],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":Yc(r,o),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ae("invalid",r);break;case"textarea":Xc(r,o),Ae("invalid",r)}Ra(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var i=o[a];a==="children"?typeof i=="string"?r.textContent!==i&&(o.suppressHydrationWarning!==!0&&ul(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&ul(r.textContent,i,e),s=["children",""+i]):js.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Ae("scroll",r)}switch(n){case"input":nl(r),qc(r,o,!0);break;case"textarea":nl(r),Jc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ul)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=uf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[qt]=t,e[Rs]=r,Tp(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ia(n,r),n){case"dialog":Ae("cancel",e),Ae("close",e),s=r;break;case"iframe":case"object":case"embed":Ae("load",e),s=r;break;case"video":case"audio":for(s=0;s<as.length;s++)Ae(as[s],e);s=r;break;case"source":Ae("error",e),s=r;break;case"img":case"image":case"link":Ae("error",e),Ae("load",e),s=r;break;case"details":Ae("toggle",e),s=r;break;case"input":Yc(e,r),s=ba(e,r),Ae("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Be({},r,{value:void 0}),Ae("invalid",e);break;case"textarea":Xc(e,r),s=Pa(e,r),Ae("invalid",e);break;default:s=r}Ra(n,s),i=s;for(o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="style"?pf(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&df(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ss(e,c):typeof c=="number"&&Ss(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(js.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ae("scroll",e):c!=null&&Ti(e,o,c,a))}switch(n){case"input":nl(e),qc(e,r,!1);break;case"textarea":nl(e),Jc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Dn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Lr(e,!!r.multiple,o,!1):r.defaultValue!=null&&Lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ul)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return at(t),null;case 6:if(e&&t.stateNode!=null)$p(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Q(166));if(n=tr(zs.current),tr(nn.current),dl(t)){if(r=t.stateNode,n=t.memoizedProps,r[qt]=t,(o=r.nodeValue!==n)&&(e=Ct,e!==null))switch(e.tag){case 3:ul(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ul(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qt]=t,t.stateNode=r}return at(t),null;case 13:if($e(Fe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&kt!==null&&t.mode&1&&!(t.flags&128))ep(),Or(),t.flags|=98560,o=!1;else if(o=dl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Q(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[qt]=t}else Or(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;at(t),o=!1}else Bt!==null&&(fi(Bt),Bt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Fe.current&1?Xe===0&&(Xe=3):gc())),t.updateQueue!==null&&(t.flags|=4),at(t),null);case 4:return Dr(),si(e,t),e===null&&Ps(t.stateNode.containerInfo),at(t),null;case 10:return Zi(t.type._context),at(t),null;case 17:return vt(t.type)&&Bl(),at(t),null;case 19:if($e(Fe),o=t.memoizedState,o===null)return at(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)ts(o,!1);else{if(Xe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Yl(e),a!==null){for(t.flags|=128,ts(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ze(Fe,Fe.current&1|2),t.child}e=e.sibling}o.tail!==null&&He()>Br&&(t.flags|=128,r=!0,ts(o,!1),t.lanes=4194304)}else{if(!r)if(e=Yl(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ts(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Me)return at(t),null}else 2*He()-o.renderingStartTime>Br&&n!==1073741824&&(t.flags|=128,r=!0,ts(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=He(),t.sibling=null,n=Fe.current,ze(Fe,r?n&1|2:n&1),t):(at(t),null);case 22:case 23:return hc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Nt&1073741824&&(at(t),t.subtreeFlags&6&&(t.flags|=8192)):at(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function cy(e,t){switch(Yi(t),t.tag){case 1:return vt(t.type)&&Bl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Dr(),$e(yt),$e(ct),sc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return rc(t),null;case 13:if($e(Fe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));Or()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $e(Fe),null;case 4:return Dr(),null;case 10:return Zi(t.type._context),null;case 22:case 23:return hc(),null;case 24:return null;default:return null}}var ml=!1,it=!1,uy=typeof WeakSet=="function"?WeakSet:Set,oe=null;function br(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(e,t,r)}else n.current=null}function li(e,t,n){try{n()}catch(r){Ve(e,t,r)}}var Uu=!1;function dy(e,t){if(Ba=Ol,e=Uf(),Ki(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,i=-1,c=-1,d=0,y=0,h=e,g=null;t:for(;;){for(var v;h!==n||s!==0&&h.nodeType!==3||(i=a+s),h!==o||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(v=h.firstChild)!==null;)g=h,h=v;for(;;){if(h===e)break t;if(g===n&&++d===s&&(i=a),g===o&&++y===r&&(c=a),(v=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=v}n=i===-1||c===-1?null:{start:i,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wa={focusedElem:e,selectionRange:n},Ol=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var N=w.memoizedProps,S=w.memoizedState,m=t.stateNode,f=m.getSnapshotBeforeUpdate(t.elementType===t.type?N:Dt(t.type,N),S);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(j){Ve(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return w=Uu,Uu=!1,w}function gs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&li(t,n,o)}s=s.next}while(s!==r)}}function jo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function oi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Mp(e){var t=e.alternate;t!==null&&(e.alternate=null,Mp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qt],delete t[Rs],delete t[Ga],delete t[Kg],delete t[Qg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Op(e){return e.tag===5||e.tag===3||e.tag===4}function Bu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Op(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ai(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ul));else if(r!==4&&(e=e.child,e!==null))for(ai(e,t,n),e=e.sibling;e!==null;)ai(e,t,n),e=e.sibling}function ii(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ii(e,t,n),e=e.sibling;e!==null;)ii(e,t,n),e=e.sibling}var rt=null,Ut=!1;function Sn(e,t,n){for(n=n.child;n!==null;)Fp(e,t,n),n=n.sibling}function Fp(e,t,n){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(po,n)}catch{}switch(n.tag){case 5:it||br(n,t);case 6:var r=rt,s=Ut;rt=null,Sn(e,t,n),rt=r,Ut=s,rt!==null&&(Ut?(e=rt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(Ut?(e=rt,n=n.stateNode,e.nodeType===8?ta(e.parentNode,n):e.nodeType===1&&ta(e,n),bs(e)):ta(rt,n.stateNode));break;case 4:r=rt,s=Ut,rt=n.stateNode.containerInfo,Ut=!0,Sn(e,t,n),rt=r,Ut=s;break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&li(n,t,a),s=s.next}while(s!==r)}Sn(e,t,n);break;case 1:if(!it&&(br(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Ve(n,t,i)}Sn(e,t,n);break;case 21:Sn(e,t,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,Sn(e,t,n),it=r):Sn(e,t,n);break;default:Sn(e,t,n)}}function Wu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new uy),t.forEach(function(r){var s=wy.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ot(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:rt=i.stateNode,Ut=!1;break e;case 3:rt=i.stateNode.containerInfo,Ut=!0;break e;case 4:rt=i.stateNode.containerInfo,Ut=!0;break e}i=i.return}if(rt===null)throw Error(Q(160));Fp(o,a,s),rt=null,Ut=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ve(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Dp(t,e),t=t.sibling}function Dp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ot(t,e),Qt(e),r&4){try{gs(3,e,e.return),jo(3,e)}catch(N){Ve(e,e.return,N)}try{gs(5,e,e.return)}catch(N){Ve(e,e.return,N)}}break;case 1:Ot(t,e),Qt(e),r&512&&n!==null&&br(n,n.return);break;case 5:if(Ot(t,e),Qt(e),r&512&&n!==null&&br(n,n.return),e.flags&32){var s=e.stateNode;try{Ss(s,"")}catch(N){Ve(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&af(s,o),Ia(i,a);var d=Ia(i,o);for(a=0;a<c.length;a+=2){var y=c[a],h=c[a+1];y==="style"?pf(s,h):y==="dangerouslySetInnerHTML"?df(s,h):y==="children"?Ss(s,h):Ti(s,y,h,d)}switch(i){case"input":Ea(s,o);break;case"textarea":cf(s,o);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?Lr(s,!!o.multiple,v,!1):g!==!!o.multiple&&(o.defaultValue!=null?Lr(s,!!o.multiple,o.defaultValue,!0):Lr(s,!!o.multiple,o.multiple?[]:"",!1))}s[Rs]=o}catch(N){Ve(e,e.return,N)}}break;case 6:if(Ot(t,e),Qt(e),r&4){if(e.stateNode===null)throw Error(Q(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(N){Ve(e,e.return,N)}}break;case 3:if(Ot(t,e),Qt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bs(t.containerInfo)}catch(N){Ve(e,e.return,N)}break;case 4:Ot(t,e),Qt(e);break;case 13:Ot(t,e),Qt(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(pc=He())),r&4&&Wu(e);break;case 22:if(y=n!==null&&n.memoizedState!==null,e.mode&1?(it=(d=it)||y,Ot(t,e),it=d):Ot(t,e),Qt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!y&&e.mode&1)for(oe=e,y=e.child;y!==null;){for(h=oe=y;oe!==null;){switch(g=oe,v=g.child,g.tag){case 0:case 11:case 14:case 15:gs(4,g,g.return);break;case 1:br(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(N){Ve(r,n,N)}}break;case 5:br(g,g.return);break;case 22:if(g.memoizedState!==null){Hu(h);continue}}v!==null?(v.return=g,oe=v):Hu(h)}y=y.sibling}e:for(y=null,h=e;;){if(h.tag===5){if(y===null){y=h;try{s=h.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=ff("display",a))}catch(N){Ve(e,e.return,N)}}}else if(h.tag===6){if(y===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(N){Ve(e,e.return,N)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;y===h&&(y=null),h=h.return}y===h&&(y=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ot(t,e),Qt(e),r&4&&Wu(e);break;case 21:break;default:Ot(t,e),Qt(e)}}function Qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Op(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ss(s,""),r.flags&=-33);var o=Bu(e);ii(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Bu(e);ai(e,i,a);break;default:throw Error(Q(161))}}catch(c){Ve(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fy(e,t,n){oe=e,Up(e)}function Up(e,t,n){for(var r=(e.mode&1)!==0;oe!==null;){var s=oe,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ml;if(!a){var i=s.alternate,c=i!==null&&i.memoizedState!==null||it;i=ml;var d=it;if(ml=a,(it=c)&&!d)for(oe=s;oe!==null;)a=oe,c=a.child,a.tag===22&&a.memoizedState!==null?Gu(s):c!==null?(c.return=a,oe=c):Gu(s);for(;o!==null;)oe=o,Up(o),o=o.sibling;oe=s,ml=i,it=d}Vu(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,oe=o):Vu(e)}}function Vu(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:it||jo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!it)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Dt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Lu(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Lu(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var y=d.memoizedState;if(y!==null){var h=y.dehydrated;h!==null&&bs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}it||t.flags&512&&oi(t)}catch(g){Ve(t,t.return,g)}}if(t===e){oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,oe=n;break}oe=t.return}}function Hu(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,oe=n;break}oe=t.return}}function Gu(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{jo(4,t)}catch(c){Ve(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ve(t,s,c)}}var o=t.return;try{oi(t)}catch(c){Ve(t,o,c)}break;case 5:var a=t.return;try{oi(t)}catch(c){Ve(t,a,c)}}}catch(c){Ve(t,t.return,c)}if(t===e){oe=null;break}var i=t.sibling;if(i!==null){i.return=t.return,oe=i;break}oe=t.return}}var py=Math.ceil,Jl=xn.ReactCurrentDispatcher,dc=xn.ReactCurrentOwner,At=xn.ReactCurrentBatchConfig,ke=0,tt=null,Qe=null,st=0,Nt=0,Er=Vn(0),Xe=0,Ms=null,ar=0,So=0,fc=0,ys=null,ht=null,pc=0,Br=1/0,ln=null,Zl=!1,ci=null,An=null,hl=!1,Ln=null,eo=0,vs=0,ui=null,Pl=-1,_l=0;function dt(){return ke&6?He():Pl!==-1?Pl:Pl=He()}function $n(e){return e.mode&1?ke&2&&st!==0?st&-st:qg.transition!==null?(_l===0&&(_l=Cf()),_l):(e=_e,e!==0||(e=window.event,e=e===void 0?16:If(e.type)),e):1}function Vt(e,t,n,r){if(50<vs)throw vs=0,ui=null,Error(Q(185));Us(e,n,r),(!(ke&2)||e!==tt)&&(e===tt&&(!(ke&2)&&(So|=n),Xe===4&&bn(e,st)),xt(e,r),n===1&&ke===0&&!(t.mode&1)&&(Br=He()+500,vo&&Hn()))}function xt(e,t){var n=e.callbackNode;qh(e,t);var r=Ml(e,e===tt?st:0);if(r===0)n!==null&&tu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&tu(n),t===1)e.tag===0?Yg(Ku.bind(null,e)):Xf(Ku.bind(null,e)),Hg(function(){!(ke&6)&&Hn()}),n=null;else{switch(bf(r)){case 1:n=Fi;break;case 4:n=Nf;break;case 16:n=$l;break;case 536870912:n=kf;break;default:n=$l}n=Yp(n,Bp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Bp(e,t){if(Pl=-1,_l=0,ke&6)throw Error(Q(327));var n=e.callbackNode;if(zr()&&e.callbackNode!==n)return null;var r=Ml(e,e===tt?st:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=to(e,r);else{t=r;var s=ke;ke|=2;var o=Vp();(tt!==e||st!==t)&&(ln=null,Br=He()+500,nr(e,t));do try{gy();break}catch(i){Wp(e,i)}while(!0);Ji(),Jl.current=o,ke=s,Qe!==null?t=0:(tt=null,st=0,t=Xe)}if(t!==0){if(t===2&&(s=Ma(e),s!==0&&(r=s,t=di(e,s))),t===1)throw n=Ms,nr(e,0),bn(e,r),xt(e,He()),n;if(t===6)bn(e,r);else{if(s=e.current.alternate,!(r&30)&&!my(s)&&(t=to(e,r),t===2&&(o=Ma(e),o!==0&&(r=o,t=di(e,o))),t===1))throw n=Ms,nr(e,0),bn(e,r),xt(e,He()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Q(345));case 2:Xn(e,ht,ln);break;case 3:if(bn(e,r),(r&130023424)===r&&(t=pc+500-He(),10<t)){if(Ml(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){dt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ha(Xn.bind(null,e,ht,ln),t);break}Xn(e,ht,ln);break;case 4:if(bn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Wt(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*py(r/1960))-r,10<r){e.timeoutHandle=Ha(Xn.bind(null,e,ht,ln),r);break}Xn(e,ht,ln);break;case 5:Xn(e,ht,ln);break;default:throw Error(Q(329))}}}return xt(e,He()),e.callbackNode===n?Bp.bind(null,e):null}function di(e,t){var n=ys;return e.current.memoizedState.isDehydrated&&(nr(e,t).flags|=256),e=to(e,t),e!==2&&(t=ht,ht=n,t!==null&&fi(t)),e}function fi(e){ht===null?ht=e:ht.push.apply(ht,e)}function my(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Ht(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bn(e,t){for(t&=~fc,t&=~So,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function Ku(e){if(ke&6)throw Error(Q(327));zr();var t=Ml(e,0);if(!(t&1))return xt(e,He()),null;var n=to(e,t);if(e.tag!==0&&n===2){var r=Ma(e);r!==0&&(t=r,n=di(e,r))}if(n===1)throw n=Ms,nr(e,0),bn(e,t),xt(e,He()),n;if(n===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xn(e,ht,ln),xt(e,He()),null}function mc(e,t){var n=ke;ke|=1;try{return e(t)}finally{ke=n,ke===0&&(Br=He()+500,vo&&Hn())}}function ir(e){Ln!==null&&Ln.tag===0&&!(ke&6)&&zr();var t=ke;ke|=1;var n=At.transition,r=_e;try{if(At.transition=null,_e=1,e)return e()}finally{_e=r,At.transition=n,ke=t,!(ke&6)&&Hn()}}function hc(){Nt=Er.current,$e(Er)}function nr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Vg(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(Yi(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bl();break;case 3:Dr(),$e(yt),$e(ct),sc();break;case 5:rc(r);break;case 4:Dr();break;case 13:$e(Fe);break;case 19:$e(Fe);break;case 10:Zi(r.type._context);break;case 22:case 23:hc()}n=n.return}if(tt=e,Qe=e=Mn(e.current,null),st=Nt=t,Xe=0,Ms=null,fc=So=ar=0,ht=ys=null,er!==null){for(t=0;t<er.length;t++)if(n=er[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}er=null}return e}function Wp(e,t){do{var n=Qe;try{if(Ji(),bl.current=Xl,ql){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ql=!1}if(or=0,et=qe=De=null,hs=!1,Ts=0,dc.current=null,n===null||n.return===null){Xe=1,Ms=t,Qe=null;break}e:{var o=e,a=n.return,i=n,c=t;if(t=st,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,y=i,h=y.tag;if(!(y.mode&1)&&(h===0||h===11||h===15)){var g=y.alternate;g?(y.updateQueue=g.updateQueue,y.memoizedState=g.memoizedState,y.lanes=g.lanes):(y.updateQueue=null,y.memoizedState=null)}var v=Tu(a);if(v!==null){v.flags&=-257,Au(v,a,i,o,t),v.mode&1&&zu(o,d,t),t=v,c=d;var w=t.updateQueue;if(w===null){var N=new Set;N.add(c),t.updateQueue=N}else w.add(c);break e}else{if(!(t&1)){zu(o,d,t),gc();break e}c=Error(Q(426))}}else if(Me&&i.mode&1){var S=Tu(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Au(S,a,i,o,t),qi(Ur(c,i));break e}}o=c=Ur(c,i),Xe!==4&&(Xe=2),ys===null?ys=[o]:ys.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=bp(o,c,t);Eu(o,m);break e;case 1:i=c;var f=o.type,p=o.stateNode;if(!(o.flags&128)&&(typeof f.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(An===null||!An.has(p)))){o.flags|=65536,t&=-t,o.lanes|=t;var j=Ep(o,i,t);Eu(o,j);break e}}o=o.return}while(o!==null)}Gp(n)}catch(k){t=k,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function Vp(){var e=Jl.current;return Jl.current=Xl,e===null?Xl:e}function gc(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),tt===null||!(ar&268435455)&&!(So&268435455)||bn(tt,st)}function to(e,t){var n=ke;ke|=2;var r=Vp();(tt!==e||st!==t)&&(ln=null,nr(e,t));do try{hy();break}catch(s){Wp(e,s)}while(!0);if(Ji(),ke=n,Jl.current=r,Qe!==null)throw Error(Q(261));return tt=null,st=0,Xe}function hy(){for(;Qe!==null;)Hp(Qe)}function gy(){for(;Qe!==null&&!Uh();)Hp(Qe)}function Hp(e){var t=Qp(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,t===null?Gp(e):Qe=t,dc.current=null}function Gp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=cy(n,t),n!==null){n.flags&=32767,Qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xe=6,Qe=null;return}}else if(n=iy(n,t,Nt),n!==null){Qe=n;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);Xe===0&&(Xe=5)}function Xn(e,t,n){var r=_e,s=At.transition;try{At.transition=null,_e=1,yy(e,t,n,r)}finally{At.transition=s,_e=r}return null}function yy(e,t,n,r){do zr();while(Ln!==null);if(ke&6)throw Error(Q(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Xh(e,o),e===tt&&(Qe=tt=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hl||(hl=!0,Yp($l,function(){return zr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=At.transition,At.transition=null;var a=_e;_e=1;var i=ke;ke|=4,dc.current=null,dy(e,n),Dp(n,e),Mg(Wa),Ol=!!Ba,Wa=Ba=null,e.current=n,fy(n),Bh(),ke=i,_e=a,At.transition=o}else e.current=n;if(hl&&(hl=!1,Ln=e,eo=s),o=e.pendingLanes,o===0&&(An=null),Hh(n.stateNode),xt(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zl)throw Zl=!1,e=ci,ci=null,e;return eo&1&&e.tag!==0&&zr(),o=e.pendingLanes,o&1?e===ui?vs++:(vs=0,ui=e):vs=0,Hn(),null}function zr(){if(Ln!==null){var e=bf(eo),t=At.transition,n=_e;try{if(At.transition=null,_e=16>e?16:e,Ln===null)var r=!1;else{if(e=Ln,Ln=null,eo=0,ke&6)throw Error(Q(331));var s=ke;for(ke|=4,oe=e.current;oe!==null;){var o=oe,a=o.child;if(oe.flags&16){var i=o.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(oe=d;oe!==null;){var y=oe;switch(y.tag){case 0:case 11:case 15:gs(8,y,o)}var h=y.child;if(h!==null)h.return=y,oe=h;else for(;oe!==null;){y=oe;var g=y.sibling,v=y.return;if(Mp(y),y===d){oe=null;break}if(g!==null){g.return=v,oe=g;break}oe=v}}}var w=o.alternate;if(w!==null){var N=w.child;if(N!==null){w.child=null;do{var S=N.sibling;N.sibling=null,N=S}while(N!==null)}}oe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,oe=a;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:gs(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,oe=m;break e}oe=o.return}}var f=e.current;for(oe=f;oe!==null;){a=oe;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,oe=p;else e:for(a=f;oe!==null;){if(i=oe,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:jo(9,i)}}catch(k){Ve(i,i.return,k)}if(i===a){oe=null;break e}var j=i.sibling;if(j!==null){j.return=i.return,oe=j;break e}oe=i.return}}if(ke=s,Hn(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(po,e)}catch{}r=!0}return r}finally{_e=n,At.transition=t}}return!1}function Qu(e,t,n){t=Ur(n,t),t=bp(e,t,1),e=Tn(e,t,1),t=dt(),e!==null&&(Us(e,1,t),xt(e,t))}function Ve(e,t,n){if(e.tag===3)Qu(e,e,n);else for(;t!==null;){if(t.tag===3){Qu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(An===null||!An.has(r))){e=Ur(n,e),e=Ep(t,e,1),t=Tn(t,e,1),e=dt(),t!==null&&(Us(t,1,e),xt(t,e));break}}t=t.return}}function vy(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=dt(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(st&n)===n&&(Xe===4||Xe===3&&(st&130023424)===st&&500>He()-pc?nr(e,0):fc|=n),xt(e,t)}function Kp(e,t){t===0&&(e.mode&1?(t=ll,ll<<=1,!(ll&130023424)&&(ll=4194304)):t=1);var n=dt();e=yn(e,t),e!==null&&(Us(e,t,n),xt(e,n))}function xy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Kp(e,n)}function wy(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(t),Kp(e,n)}var Qp;Qp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||yt.current)gt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return gt=!1,ay(e,t,n);gt=!!(e.flags&131072)}else gt=!1,Me&&t.flags&1048576&&Jf(t,Hl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ll(e,t),e=t.pendingProps;var s=Mr(t,ct.current);Ir(t,n),s=oc(null,t,r,e,s,n);var o=ac();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vt(r)?(o=!0,Wl(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,tc(t),s.updater=wo,t.stateNode=s,s._reactInternals=t,Ja(t,r,e,n),t=ti(null,t,r,!0,o,n)):(t.tag=0,Me&&o&&Qi(t),ut(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ll(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Sy(r),e=Dt(r,e),s){case 0:t=ei(null,t,r,e,n);break e;case 1:t=Ou(null,t,r,e,n);break e;case 11:t=$u(null,t,r,e,n);break e;case 14:t=Mu(null,t,r,Dt(r.type,e),n);break e}throw Error(Q(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Dt(r,s),ei(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Dt(r,s),Ou(e,t,r,s,n);case 3:e:{if(Rp(t),e===null)throw Error(Q(387));r=t.pendingProps,o=t.memoizedState,s=o.element,sp(e,t),Ql(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Ur(Error(Q(423)),t),t=Fu(e,t,r,n,s);break e}else if(r!==s){s=Ur(Error(Q(424)),t),t=Fu(e,t,r,n,s);break e}else for(kt=zn(t.stateNode.containerInfo.firstChild),Ct=t,Me=!0,Bt=null,n=np(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Or(),r===s){t=vn(e,t,n);break e}ut(e,t,r,n)}t=t.child}return t;case 5:return lp(t),e===null&&Ya(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,Va(r,s)?a=null:o!==null&&Va(r,o)&&(t.flags|=32),_p(e,t),ut(e,t,a,n),t.child;case 6:return e===null&&Ya(t),null;case 13:return Ip(e,t,n);case 4:return nc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fr(t,null,r,n):ut(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Dt(r,s),$u(e,t,r,s,n);case 7:return ut(e,t,t.pendingProps,n),t.child;case 8:return ut(e,t,t.pendingProps.children,n),t.child;case 12:return ut(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,ze(Gl,r._currentValue),r._currentValue=a,o!==null)if(Ht(o.value,a)){if(o.children===s.children&&!yt.current){t=vn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){a=o.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=pn(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var y=d.pending;y===null?c.next=c:(c.next=y.next,y.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),qa(o.return,n,t),i.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Q(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),qa(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}ut(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ir(t,n),s=$t(s),r=r(s),t.flags|=1,ut(e,t,r,n),t.child;case 14:return r=t.type,s=Dt(r,t.pendingProps),s=Dt(r.type,s),Mu(e,t,r,s,n);case 15:return Lp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Dt(r,s),Ll(e,t),t.tag=1,vt(r)?(e=!0,Wl(t)):e=!1,Ir(t,n),Cp(t,r,s),Ja(t,r,s,n),ti(null,t,r,!0,e,n);case 19:return zp(e,t,n);case 22:return Pp(e,t,n)}throw Error(Q(156,t.tag))};function Yp(e,t){return Sf(e,t)}function jy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tt(e,t,n,r){return new jy(e,t,n,r)}function yc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Sy(e){if(typeof e=="function")return yc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$i)return 11;if(e===Mi)return 14}return 2}function Mn(e,t){var n=e.alternate;return n===null?(n=Tt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rl(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")yc(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case yr:return rr(n.children,s,o,t);case Ai:a=8,s|=8;break;case Sa:return e=Tt(12,n,t,s|2),e.elementType=Sa,e.lanes=o,e;case Na:return e=Tt(13,n,t,s),e.elementType=Na,e.lanes=o,e;case ka:return e=Tt(19,n,t,s),e.elementType=ka,e.lanes=o,e;case sf:return No(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nf:a=10;break e;case rf:a=9;break e;case $i:a=11;break e;case Mi:a=14;break e;case Nn:a=16,r=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=Tt(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function rr(e,t,n,r){return e=Tt(7,e,r,t),e.lanes=n,e}function No(e,t,n,r){return e=Tt(22,e,r,t),e.elementType=sf,e.lanes=n,e.stateNode={isHidden:!1},e}function ca(e,t,n){return e=Tt(6,e,null,t),e.lanes=n,e}function ua(e,t,n){return t=Tt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ny(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vo(0),this.expirationTimes=Vo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function vc(e,t,n,r,s,o,a,i,c){return e=new Ny(e,t,n,i,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Tt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tc(o),e}function ky(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function qp(e){if(!e)return Un;e=e._reactInternals;e:{if(ur(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var n=e.type;if(vt(n))return qf(e,n,t)}return t}function Xp(e,t,n,r,s,o,a,i,c){return e=vc(n,r,!0,e,s,o,a,i,c),e.context=qp(null),n=e.current,r=dt(),s=$n(n),o=pn(r,s),o.callback=t??null,Tn(n,o,s),e.current.lanes=s,Us(e,s,r),xt(e,r),e}function ko(e,t,n,r){var s=t.current,o=dt(),a=$n(s);return n=qp(n),t.context===null?t.context=n:t.pendingContext=n,t=pn(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Tn(s,t,a),e!==null&&(Vt(e,s,a,o),Cl(e,s,a)),a}function no(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Yu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xc(e,t){Yu(e,t),(e=e.alternate)&&Yu(e,t)}function Cy(){return null}var Jp=typeof reportError=="function"?reportError:function(e){console.error(e)};function wc(e){this._internalRoot=e}Co.prototype.render=wc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));ko(e,t,null,null)};Co.prototype.unmount=wc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ir(function(){ko(null,e,null,null)}),t[gn]=null}};function Co(e){this._internalRoot=e}Co.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Cn.length&&t!==0&&t<Cn[n].priority;n++);Cn.splice(n,0,e),n===0&&Rf(e)}};function jc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qu(){}function by(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=no(a);o.call(d)}}var a=Xp(t,r,e,0,null,!1,!1,"",qu);return e._reactRootContainer=a,e[gn]=a.current,Ps(e.nodeType===8?e.parentNode:e),ir(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var d=no(c);i.call(d)}}var c=vc(e,0,!1,null,null,!1,!1,"",qu);return e._reactRootContainer=c,e[gn]=c.current,Ps(e.nodeType===8?e.parentNode:e),ir(function(){ko(t,c,n,r)}),c}function Eo(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var i=s;s=function(){var c=no(a);i.call(c)}}ko(t,a,e,s)}else a=by(n,t,e,s,r);return no(a)}Ef=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=os(t.pendingLanes);n!==0&&(Di(t,n|1),xt(t,He()),!(ke&6)&&(Br=He()+500,Hn()))}break;case 13:ir(function(){var r=yn(e,1);if(r!==null){var s=dt();Vt(r,e,1,s)}}),xc(e,1)}};Ui=function(e){if(e.tag===13){var t=yn(e,134217728);if(t!==null){var n=dt();Vt(t,e,134217728,n)}xc(e,134217728)}};Lf=function(e){if(e.tag===13){var t=$n(e),n=yn(e,t);if(n!==null){var r=dt();Vt(n,e,t,r)}xc(e,t)}};Pf=function(){return _e};_f=function(e,t){var n=_e;try{return _e=e,t()}finally{_e=n}};Ta=function(e,t,n){switch(t){case"input":if(Ea(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=yo(r);if(!s)throw Error(Q(90));of(r),Ea(r,s)}}}break;case"textarea":cf(e,n);break;case"select":t=n.value,t!=null&&Lr(e,!!n.multiple,t,!1)}};gf=mc;yf=ir;var Ey={usingClientEntryPoint:!1,Events:[Ws,jr,yo,mf,hf,mc]},ns={findFiberByHostInstance:Zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ly={bundleType:ns.bundleType,version:ns.version,rendererPackageName:ns.rendererPackageName,rendererConfig:ns.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=wf(e),e===null?null:e.stateNode},findFiberByHostInstance:ns.findFiberByHostInstance||Cy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gl.isDisabled&&gl.supportsFiber)try{po=gl.inject(Ly),tn=gl}catch{}}Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ey;Et.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jc(t))throw Error(Q(200));return ky(e,t,null,n)};Et.createRoot=function(e,t){if(!jc(e))throw Error(Q(299));var n=!1,r="",s=Jp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=vc(e,1,!1,null,null,n,!1,r,s),e[gn]=t.current,Ps(e.nodeType===8?e.parentNode:e),new wc(t)};Et.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=wf(t),e=e===null?null:e.stateNode,e};Et.flushSync=function(e){return ir(e)};Et.hydrate=function(e,t,n){if(!bo(t))throw Error(Q(200));return Eo(null,e,t,!0,n)};Et.hydrateRoot=function(e,t,n){if(!jc(e))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=Jp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Xp(t,null,e,1,n??null,s,!1,o,a),e[gn]=t.current,Ps(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Co(t)};Et.render=function(e,t,n){if(!bo(t))throw Error(Q(200));return Eo(null,e,t,!1,n)};Et.unmountComponentAtNode=function(e){if(!bo(e))throw Error(Q(40));return e._reactRootContainer?(ir(function(){Eo(null,null,e,!1,function(){e._reactRootContainer=null,e[gn]=null})}),!0):!1};Et.unstable_batchedUpdates=mc;Et.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!bo(n))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return Eo(e,t,n,!1,r)};Et.version="18.3.1-next-f1338f8080-20240426";function Zp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zp)}catch(e){console.error(e)}}Zp(),Jd.exports=Et;var Sc=Jd.exports,Xu=Sc;wa.createRoot=Xu.createRoot,wa.hydrateRoot=Xu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Os(){return Os=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Os.apply(this,arguments)}var Pn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pn||(Pn={}));const Ju="popstate";function Py(e){e===void 0&&(e={});function t(s,o){let{pathname:a="/",search:i="",hash:c=""}=dr(s.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),pi("",{pathname:a,search:i,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let a=s.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");i=d===-1?c:c.slice(0,d)}return i+"#"+(typeof o=="string"?o:ro(o))}function r(s,o){Nc(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return Ry(t,n,r,e)}function Ue(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Nc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function _y(){return Math.random().toString(36).substr(2,8)}function Zu(e,t){return{usr:e.state,key:e.key,idx:t}}function pi(e,t,n,r){return n===void 0&&(n=null),Os({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?dr(t):t,{state:n,key:t&&t.key||r||_y()})}function ro(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function dr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Ry(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,i=Pn.Pop,c=null,d=y();d==null&&(d=0,a.replaceState(Os({},a.state,{idx:d}),""));function y(){return(a.state||{idx:null}).idx}function h(){i=Pn.Pop;let S=y(),m=S==null?null:S-d;d=S,c&&c({action:i,location:N.location,delta:m})}function g(S,m){i=Pn.Push;let f=pi(N.location,S,m);n&&n(f,S),d=y()+1;let p=Zu(f,d),j=N.createHref(f);try{a.pushState(p,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(j)}o&&c&&c({action:i,location:N.location,delta:1})}function v(S,m){i=Pn.Replace;let f=pi(N.location,S,m);n&&n(f,S),d=y();let p=Zu(f,d),j=N.createHref(f);a.replaceState(p,"",j),o&&c&&c({action:i,location:N.location,delta:0})}function w(S){let m=s.location.origin!=="null"?s.location.origin:s.location.href,f=typeof S=="string"?S:ro(S);return f=f.replace(/ $/,"%20"),Ue(m,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,m)}let N={get action(){return i},get location(){return e(s,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Ju,h),c=S,()=>{s.removeEventListener(Ju,h),c=null}},createHref(S){return t(s,S)},createURL:w,encodeLocation(S){let m=w(S);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:g,replace:v,go(S){return a.go(S)}};return N}var ed;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ed||(ed={}));function Iy(e,t,n){return n===void 0&&(n="/"),zy(e,t,n)}function zy(e,t,n,r){let s=typeof t=="string"?dr(t):t,o=Wr(s.pathname||"/",n);if(o==null)return null;let a=em(e);Ty(a);let i=null;for(let c=0;i==null&&c<a.length;++c){let d=Hy(o);i=Wy(a[c],d)}return i}function em(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,i)=>{let c={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(Ue(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=On([r,c.relativePath]),y=n.concat(c);o.children&&o.children.length>0&&(Ue(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),em(o.children,t,y,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:Uy(d,o.index),routesMeta:y})};return e.forEach((o,a)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))s(o,a);else for(let c of tm(o.path))s(o,a,c)}),t}function tm(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=tm(r.join("/")),i=[];return i.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&i.push(...a),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Ty(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:By(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Ay=/^:[\w-]+$/,$y=3,My=2,Oy=1,Fy=10,Dy=-2,td=e=>e==="*";function Uy(e,t){let n=e.split("/"),r=n.length;return n.some(td)&&(r+=Dy),t&&(r+=My),n.filter(s=>!td(s)).reduce((s,o)=>s+(Ay.test(o)?$y:o===""?Oy:Fy),r)}function By(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Wy(e,t,n){let{routesMeta:r}=e,s={},o="/",a=[];for(let i=0;i<r.length;++i){let c=r[i],d=i===r.length-1,y=o==="/"?t:t.slice(o.length)||"/",h=mi({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},y),g=c.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:On([o,h.pathname]),pathnameBase:Yy(On([o,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(o=On([o,h.pathnameBase]))}return a}function mi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Vy(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((d,y,h)=>{let{paramName:g,isOptional:v}=y;if(g==="*"){let N=i[h]||"";a=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const w=i[h];return v&&!w?d[g]=void 0:d[g]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:e}}function Vy(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Nc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Hy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Nc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Wr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Gy(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?dr(e):e;return{pathname:n?n.startsWith("/")?n:Ky(n,t):t,search:qy(r),hash:Xy(s)}}function Ky(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function da(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Qy(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function kc(e,t){let n=Qy(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Cc(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=dr(e):(s=Os({},e),Ue(!s.pathname||!s.pathname.includes("?"),da("?","pathname","search",s)),Ue(!s.pathname||!s.pathname.includes("#"),da("#","pathname","hash",s)),Ue(!s.search||!s.search.includes("#"),da("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,i;if(a==null)i=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),h-=1;s.pathname=g.join("/")}i=h>=0?t[h]:"/"}let c=Gy(s,i),d=a&&a!=="/"&&a.endsWith("/"),y=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||y)&&(c.pathname+="/"),c}const On=e=>e.join("/").replace(/\/\/+/g,"/"),Yy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),qy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Xy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Jy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nm=["post","put","patch","delete"];new Set(nm);const Zy=["get",...nm];new Set(Zy);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fs(){return Fs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fs.apply(this,arguments)}const Lo=u.createContext(null),rm=u.createContext(null),wn=u.createContext(null),Po=u.createContext(null),jn=u.createContext({outlet:null,matches:[],isDataRoute:!1}),sm=u.createContext(null);function ev(e,t){let{relative:n}=t===void 0?{}:t;Kr()||Ue(!1);let{basename:r,navigator:s}=u.useContext(wn),{hash:o,pathname:a,search:i}=_o(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:On([r,a])),s.createHref({pathname:c,search:i,hash:o})}function Kr(){return u.useContext(Po)!=null}function Pt(){return Kr()||Ue(!1),u.useContext(Po).location}function lm(e){u.useContext(wn).static||u.useLayoutEffect(e)}function sn(){let{isDataRoute:e}=u.useContext(jn);return e?hv():tv()}function tv(){Kr()||Ue(!1);let e=u.useContext(Lo),{basename:t,future:n,navigator:r}=u.useContext(wn),{matches:s}=u.useContext(jn),{pathname:o}=Pt(),a=JSON.stringify(kc(s,n.v7_relativeSplatPath)),i=u.useRef(!1);return lm(()=>{i.current=!0}),u.useCallback(function(d,y){if(y===void 0&&(y={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let h=Cc(d,JSON.parse(a),o,y.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:On([t,h.pathname])),(y.replace?r.replace:r.push)(h,y.state,y)},[t,r,a,o,e])}const nv=u.createContext(null);function rv(e){let t=u.useContext(jn).outlet;return t&&u.createElement(nv.Provider,{value:e},t)}function _o(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=u.useContext(wn),{matches:s}=u.useContext(jn),{pathname:o}=Pt(),a=JSON.stringify(kc(s,r.v7_relativeSplatPath));return u.useMemo(()=>Cc(e,JSON.parse(a),o,n==="path"),[e,a,o,n])}function sv(e,t){return lv(e,t)}function lv(e,t,n,r){Kr()||Ue(!1);let{navigator:s}=u.useContext(wn),{matches:o}=u.useContext(jn),a=o[o.length-1],i=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Pt(),y;if(t){var h;let S=typeof t=="string"?dr(t):t;c==="/"||(h=S.pathname)!=null&&h.startsWith(c)||Ue(!1),y=S}else y=d;let g=y.pathname||"/",v=g;if(c!=="/"){let S=c.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=Iy(e,{pathname:v}),N=uv(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},i,S.params),pathname:On([c,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:On([c,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,n,r);return t&&N?u.createElement(Po.Provider,{value:{location:Fs({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Pn.Pop}},N):N}function ov(){let e=mv(),t=Jy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const av=u.createElement(ov,null);class iv extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(jn.Provider,{value:this.props.routeContext},u.createElement(sm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cv(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(Lo);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(jn.Provider,{value:t},r)}function uv(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let y=a.findIndex(h=>h.route.id&&(i==null?void 0:i[h.route.id])!==void 0);y>=0||Ue(!1),a=a.slice(0,Math.min(a.length,y+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let y=0;y<a.length;y++){let h=a[y];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=y),h.route.id){let{loaderData:g,errors:v}=n,w=h.route.loader&&g[h.route.id]===void 0&&(!v||v[h.route.id]===void 0);if(h.route.lazy||w){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((y,h,g)=>{let v,w=!1,N=null,S=null;n&&(v=i&&h.route.id?i[h.route.id]:void 0,N=h.route.errorElement||av,c&&(d<0&&g===0?(gv("route-fallback"),w=!0,S=null):d===g&&(w=!0,S=h.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,g+1)),f=()=>{let p;return v?p=N:w?p=S:h.route.Component?p=u.createElement(h.route.Component,null):h.route.element?p=h.route.element:p=y,u.createElement(cv,{match:h,routeContext:{outlet:y,matches:m,isDataRoute:n!=null},children:p})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?u.createElement(iv,{location:n.location,revalidation:n.revalidation,component:N,error:v,children:f(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):f()},null)}var om=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(om||{}),am=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(am||{});function dv(e){let t=u.useContext(Lo);return t||Ue(!1),t}function fv(e){let t=u.useContext(rm);return t||Ue(!1),t}function pv(e){let t=u.useContext(jn);return t||Ue(!1),t}function im(e){let t=pv(),n=t.matches[t.matches.length-1];return n.route.id||Ue(!1),n.route.id}function mv(){var e;let t=u.useContext(sm),n=fv(),r=im();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function hv(){let{router:e}=dv(om.UseNavigateStable),t=im(am.UseNavigateStable),n=u.useRef(!1);return lm(()=>{n.current=!0}),u.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Fs({fromRouteId:t},o)))},[e,t])}const nd={};function gv(e,t,n){nd[e]||(nd[e]=!0)}function yv(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function hi(e){let{to:t,replace:n,state:r,relative:s}=e;Kr()||Ue(!1);let{future:o,static:a}=u.useContext(wn),{matches:i}=u.useContext(jn),{pathname:c}=Pt(),d=sn(),y=Cc(t,kc(i,o.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(y);return u.useEffect(()=>d(JSON.parse(h),{replace:n,state:r,relative:s}),[d,h,s,n,r]),null}function vv(e){return rv(e.context)}function Ft(e){Ue(!1)}function xv(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Pn.Pop,navigator:o,static:a=!1,future:i}=e;Kr()&&Ue(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:o,static:a,future:Fs({v7_relativeSplatPath:!1},i)}),[c,i,o,a]);typeof r=="string"&&(r=dr(r));let{pathname:y="/",search:h="",hash:g="",state:v=null,key:w="default"}=r,N=u.useMemo(()=>{let S=Wr(y,c);return S==null?null:{location:{pathname:S,search:h,hash:g,state:v,key:w},navigationType:s}},[c,y,h,g,v,w,s]);return N==null?null:u.createElement(wn.Provider,{value:d},u.createElement(Po.Provider,{children:n,value:N}))}function wv(e){let{children:t,location:n}=e;return sv(gi(t),n)}new Promise(()=>{});function gi(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let o=[...t,s];if(r.type===u.Fragment){n.push.apply(n,gi(r.props.children,o));return}r.type!==Ft&&Ue(!1),!r.props.index||!r.props.children||Ue(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=gi(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function so(){return so=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},so.apply(this,arguments)}function cm(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function jv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Sv(e,t){return e.button===0&&(!t||t==="_self")&&!jv(e)}function yi(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Nv(e,t){let n=yi(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(o=>{n.append(s,o)})}),n}const kv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Cv=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],bv="6";try{window.__reactRouterVersion=bv}catch{}const Ev=u.createContext({isTransitioning:!1}),Lv="startTransition",rd=vh[Lv];function Pv(e){let{basename:t,children:n,future:r,window:s}=e,o=u.useRef();o.current==null&&(o.current=Py({window:s,v5Compat:!0}));let a=o.current,[i,c]=u.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},y=u.useCallback(h=>{d&&rd?rd(()=>c(h)):c(h)},[c,d]);return u.useLayoutEffect(()=>a.listen(y),[a,y]),u.useEffect(()=>yv(r),[r]),u.createElement(xv,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}const _v=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Rv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,um=u.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:i,target:c,to:d,preventScrollReset:y,viewTransition:h}=t,g=cm(t,kv),{basename:v}=u.useContext(wn),w,N=!1;if(typeof d=="string"&&Rv.test(d)&&(w=d,_v))try{let p=new URL(window.location.href),j=d.startsWith("//")?new URL(p.protocol+d):new URL(d),k=Wr(j.pathname,v);j.origin===p.origin&&k!=null?d=k+j.search+j.hash:N=!0}catch{}let S=ev(d,{relative:s}),m=zv(d,{replace:a,state:i,target:c,preventScrollReset:y,relative:s,viewTransition:h});function f(p){r&&r(p),p.defaultPrevented||m(p)}return u.createElement("a",so({},g,{href:w||S,onClick:N||o?r:f,ref:n,target:c}))}),pr=u.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:o="",end:a=!1,style:i,to:c,viewTransition:d,children:y}=t,h=cm(t,Cv),g=_o(c,{relative:h.relative}),v=Pt(),w=u.useContext(rm),{navigator:N,basename:S}=u.useContext(wn),m=w!=null&&Tv(g)&&d===!0,f=N.encodeLocation?N.encodeLocation(g).pathname:g.pathname,p=v.pathname,j=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(p=p.toLowerCase(),j=j?j.toLowerCase():null,f=f.toLowerCase()),j&&S&&(j=Wr(j,S)||j);const k=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let L=p===f||!a&&p.startsWith(f)&&p.charAt(k)==="/",I=j!=null&&(j===f||!a&&j.startsWith(f)&&j.charAt(f.length)==="/"),b={isActive:L,isPending:I,isTransitioning:m},$=L?r:void 0,z;typeof o=="function"?z=o(b):z=[o,L?"active":null,I?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let W=typeof i=="function"?i(b):i;return u.createElement(um,so({},h,{"aria-current":$,className:z,ref:n,style:W,to:c,viewTransition:d}),typeof y=="function"?y(b):y)});var vi;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(vi||(vi={}));var sd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(sd||(sd={}));function Iv(e){let t=u.useContext(Lo);return t||Ue(!1),t}function zv(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:i}=t===void 0?{}:t,c=sn(),d=Pt(),y=_o(e,{relative:a});return u.useCallback(h=>{if(Sv(h,n)){h.preventDefault();let g=r!==void 0?r:ro(d)===ro(y);c(e,{replace:g,state:s,preventScrollReset:o,relative:a,viewTransition:i})}},[d,c,y,r,s,n,e,o,a,i])}function dm(e){let t=u.useRef(yi(e)),n=u.useRef(!1),r=Pt(),s=u.useMemo(()=>Nv(r.search,n.current?null:t.current),[r.search]),o=sn(),a=u.useCallback((i,c)=>{const d=yi(typeof i=="function"?i(s):i);n.current=!0,o("?"+d,c)},[o,s]);return[s,a]}function Tv(e,t){t===void 0&&(t={});let n=u.useContext(Ev);n==null&&Ue(!1);let{basename:r}=Iv(vi.useViewTransitionState),s=_o(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Wr(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Wr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return mi(s.pathname,a)!=null||mi(s.pathname,o)!=null}function fm(){const[e,t]=u.useState(()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("cozygen_gallery_pending")==="1"}catch{return!1}});return u.useEffect(()=>{const n=()=>t(!0),r=()=>t(!1),s=o=>{o.key==="cozygen_gallery_pending"&&t(o.newValue==="1")};return window.addEventListener("cozygen:gallery-pending",n),window.addEventListener("cozygen:gallery-viewed",r),window.addEventListener("storage",s),()=>{window.removeEventListener("cozygen:gallery-pending",n),window.removeEventListener("cozygen:gallery-viewed",r),window.removeEventListener("storage",s)}},[]),e}const xi="cozygen_token";function bc(){try{return typeof window>"u"?null:localStorage.getItem(xi)}catch{return null}}function pm(e){try{if(typeof window>"u")return;e?localStorage.setItem(xi,e):localStorage.removeItem(xi)}catch{}}function fa(){pm(null)}function Hs(){const e=bc();return e?{Authorization:`Bearer ${e}`}:{}}const Gs=async(e,t)=>{if(t.status===401){const r=new Error("unauthorized");throw r.unauthorized=!0,r.status=401,r}if(!t.ok)throw new Error(`${e} failed`);return(t.headers.get("content-type")||"").includes("application/json")?t.json():t.text()},Gn=async(e,t={})=>{const{signal:n}=t,r=await fetch(e,{headers:{...Hs()},credentials:"include",signal:n});return Gs(e,r)},Ks=async(e,t,n={})=>{const{signal:r}=n,s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...Hs()},body:JSON.stringify(t),credentials:"include",signal:r});return Gs(e,s)};async function Av(e={}){return Gn("/cozygen/workflows",e)}async function $v(e,t={}){return Gn(`/cozygen/workflows/${encodeURIComponent(e)}`,t)}async function Mv(e,t={}){const{refresh:n=!1,cacheBust:r="",...s}=t||{},o=new URLSearchParams({type:String(e||"")});return n&&o.set("refresh","1"),r&&o.set("cache_bust",String(r)),Gn(`/cozygen/get_choices?${o.toString()}`,s)}async function mm(e){const t=await fetch("/prompt",{method:"POST",headers:{"Content-Type":"application/json",...Hs()},body:JSON.stringify(e),credentials:"include"});return Gs("/prompt",t)}async function Ov(e){const t=new FormData;t.append("image",e);const n=await fetch("/cozygen/upload_image",{method:"POST",headers:{...Hs()},body:t,credentials:"include"});return Gs("/cozygen/upload_image",n)}async function hm(e="",t=1,n=50,r=!1,s=!1,o="all",a="",i={}){const{includeMeta:c=!1,...d}=i||{},y=new URLSearchParams({subfolder:e,page:String(t),per_page:String(n),show_hidden:r?"1":"0",recursive:s?"1":"0",kind:o});return c&&y.set("include_meta","1"),a&&y.set("cache_bust",String(a)),Gn(`/cozygen/api/gallery?${y.toString()}`,d)}async function Fv(){return Gn("/cozygen/api/aliases")}async function Dv(e){return Ks("/cozygen/api/aliases",e||{})}async function gm(e={}){return Gn("/cozygen/api/tags/categories",e)}async function lo({q:e="",category:t="",sort:n="count",limit:r=80,offset:s=0}={},o={}){const a=new URLSearchParams({q:String(e||""),category:String(t||""),sort:String(n||"count"),limit:String(r||80),offset:String(s||0)});return Gn(`/cozygen/api/tags/search?${a.toString()}`,o)}async function pa(e=[],t={}){return Ks("/cozygen/api/tags/validate",{tags:Array.isArray(e)?e:[]},t)}async function Uv(e,t={}){const n=new URLSearchParams;return e&&n.set("workflow",e),Gn(`/cozygen/api/workflow_presets?${n.toString()}`,t)}async function Bv(e,t,n={}){return Ks("/cozygen/api/workflow_presets",{workflow:e,preset:t},n)}async function Wv(e,t,n={}){return Ks("/cozygen/api/workflow_presets",{workflow:e,delete:t},n)}async function Vv(e,t){return Ks("/cozygen/api/login",{username:e,password:t})}async function Hv(){return fetch("/cozygen/api/auth_status",{headers:{...Hs()},credentials:"include"}).then(e=>Gs("/cozygen/api/auth_status",e))}const Gv=30*60*1e3,ld="cozygen_idle_logout",ym=u.createContext(null);function Kv({children:e}){const[t,n]=u.useState(!1),[r,s]=u.useState(null),[o,a]=u.useState(!1),[i,c]=u.useState(null),d=u.useCallback(async()=>{if(!bc()){s(null),a(!1),n(!0);return}try{const w=await Hv();s((w==null?void 0:w.user)||null),a(!!(w!=null&&w.default_credentials))}catch{fa(),s(null),a(!1)}finally{n(!0)}},[]);u.useEffect(()=>{d()},[d]);const y=u.useCallback(async(v,w)=>{const N=await Vv(v,w);pm((N==null?void 0:N.token)||""),s((N==null?void 0:N.user)||v),a(!!(N!=null&&N.default_credentials));try{localStorage.removeItem(ld)}catch{}return N},[]),h=u.useCallback(()=>{fa(),s(null),a(!1)},[]);u.useEffect(()=>{if(!t)return;const v=()=>{i&&clearTimeout(i);const N=setTimeout(()=>{fa(),s(null),a(!1);try{localStorage.setItem(ld,"1")}catch{}window.location.hash="#/login"},Gv);c(N)};v();const w=["pointerdown","keydown","visibilitychange"];return w.forEach(N=>window.addEventListener(N,v,{passive:!0})),()=>{i&&clearTimeout(i),w.forEach(N=>window.removeEventListener(N,v))}},[t,i]);const g=u.useMemo(()=>({ready:t,user:r,authed:!!r,defaultCreds:o,login:y,logout:h,refresh:d}),[t,r,o,y,h,d]);return l.jsx(ym.Provider,{value:g,children:e})}function Ro(){const e=u.useContext(ym);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function Qv({children:e}){return l.jsx(Kv,{children:e})}const vm="cozygen_last_render_payload";function Yv(e){if(e)try{if(typeof window>"u")return;window.localStorage.setItem(vm,JSON.stringify(e))}catch{}}function xm(){try{if(typeof window>"u")return null;const e=window.localStorage.getItem(vm);return e?JSON.parse(e):null}catch{return null}}async function wm(){const e=xm();if(!e||!e.workflow)return{success:!1,error:"No previous render to repeat"};try{return window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!0}})),await mm({prompt:e.workflow}),window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!1}})),{success:!0}}catch(t){return console.error("Failed to requeue prompt",t),window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!1}})),t!=null&&t.unauthorized?(window.location.hash="#/login",{success:!1,error:"Session expired"}):{success:!1,error:"Failed to queue prompt"}}}function jm(){const e=xm();return!!(e&&e.workflow)}function Io(e,t=!1){const n=()=>typeof window>"u"||!window.matchMedia?t:window.matchMedia(e).matches,[r,s]=u.useState(n);return u.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const o=window.matchMedia(e),a=()=>s(o.matches);return a(),typeof o.addEventListener=="function"?(o.addEventListener("change",a),()=>o.removeEventListener("change",a)):(o.addListener(a),()=>o.removeListener(a))},[e]),r}const Sm=({size:e=32,className:t=""})=>l.jsxs("svg",{width:e,height:e,viewBox:"0 0 32 32",fill:"none",className:t,"aria-hidden":"true",children:[l.jsx("path",{d:"M8 24L20 4",stroke:"url(#logo-gradient)",strokeWidth:"3",strokeLinecap:"round"}),l.jsx("path",{d:"M6 26C6 26 7 24 8 24C9 24 10 25 8 27C6 29 4 28 6 26Z",fill:"url(#logo-warm)"}),l.jsx("circle",{cx:"22",cy:"8",r:"2",fill:"url(#logo-spark)"}),l.jsx("circle",{cx:"26",cy:"12",r:"1.5",fill:"url(#logo-spark)",opacity:"0.8"}),l.jsx("circle",{cx:"24",cy:"16",r:"1",fill:"url(#logo-spark)",opacity:"0.6"}),l.jsxs("defs",{children:[l.jsxs("linearGradient",{id:"logo-gradient",x1:"8",y1:"24",x2:"20",y2:"4",gradientUnits:"userSpaceOnUse",children:[l.jsx("stop",{stopColor:"#FF9F7A"}),l.jsx("stop",{offset:"0.5",stopColor:"#9F8CFF"}),l.jsx("stop",{offset:"1",stopColor:"#44E1C5"})]}),l.jsxs("linearGradient",{id:"logo-warm",x1:"4",y1:"24",x2:"10",y2:"28",gradientUnits:"userSpaceOnUse",children:[l.jsx("stop",{stopColor:"#FF9F7A"}),l.jsx("stop",{offset:"1",stopColor:"#FFD666"})]}),l.jsxs("radialGradient",{id:"logo-spark",cx:"0.3",cy:"0.3",r:"0.7",children:[l.jsx("stop",{stopColor:"#FFFFFF"}),l.jsx("stop",{offset:"0.5",stopColor:"#44E1C5"}),l.jsx("stop",{offset:"1",stopColor:"#9F8CFF"})]})]})]}),Oe=({children:e,size:t=16,className:n="",...r})=>l.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,"aria-hidden":"true",...r,children:e}),qv=e=>l.jsxs(Oe,{...e,children:[l.jsx("path",{d:"M3 10l9-7 9 7"}),l.jsx("path",{d:"M5 10v10h14V10"}),l.jsx("path",{d:"M9 20v-6h6v6"})]}),Ec=e=>l.jsxs(Oe,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5",fill:"currentColor",stroke:"none"}),l.jsx("path",{d:"M21 15l-5-5L5 21"})]}),Bn=e=>l.jsxs(Oe,{...e,children:[l.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"}),l.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7",strokeWidth:"3"})]}),Qs=e=>l.jsxs(Oe,{...e,children:[l.jsx("path",{d:"M14 3H4a2 2 0 00-2 2v10l6 6h10a2 2 0 002-2V9l-6-6z"}),l.jsx("path",{d:"M14 3v6h6"}),l.jsx("path",{d:"M7 7h5"}),l.jsx("path",{d:"M7 11h7"})]}),Lc=e=>l.jsx(Oe,{...e,children:l.jsx("path",{d:"M17 3a2.828 2.828 0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Nm=e=>l.jsx(Oe,{...e,children:l.jsx("polygon",{points:"5 3 19 12 5 21 5 3",fill:"currentColor",stroke:"none"})}),od=e=>l.jsxs(Oe,{...e,children:[l.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),Pc=e=>l.jsxs(Oe,{...e,children:[l.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),l.jsx("line",{x1:"9",y1:"9",x2:"9",y2:"15"}),l.jsx("line",{x1:"15",y1:"9",x2:"15",y2:"15"}),l.jsx("circle",{cx:"9",cy:"12",r:"1.5",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"10",r:"1.5",fill:"currentColor",stroke:"none"})]}),Xv=e=>l.jsxs(Oe,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("circle",{cx:"12",cy:"12",r:"4"}),l.jsx("line",{x1:"3",y1:"9",x2:"6",y2:"9"})]}),ad=e=>l.jsxs(Oe,{...e,children:[l.jsx("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"}),l.jsx("path",{d:"M2 10h20"})]}),id=e=>l.jsx(Oe,{...e,children:l.jsx("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"})}),cd=e=>l.jsxs(Oe,{...e,children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),ud=e=>l.jsxs(Oe,{...e,children:[l.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"}),l.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),dd=e=>l.jsx(Oe,{...e,children:l.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),fd=e=>l.jsxs(Oe,{...e,children:[l.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),l.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}),wi=e=>l.jsxs(Oe,{...e,children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 11-2.12-9.36L23 10"})]}),km=e=>l.jsx(Oe,{...e,children:l.jsx("polyline",{points:"15 18 9 12 15 6"})}),zo=e=>l.jsx(Oe,{...e,children:l.jsx("polyline",{points:"9 18 15 12 9 6"})}),ji=e=>l.jsxs(Oe,{...e,children:[l.jsx("circle",{cx:"9",cy:"6",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"6",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"9",cy:"12",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"12",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"9",cy:"18",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"18",r:"1",fill:"currentColor",stroke:"none"})]}),rn=e=>l.jsxs(Oe,{...e,children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),pd=e=>l.jsxs(Oe,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",strokeDasharray:"4 2"}),l.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]}),Jv=e=>l.jsxs(Oe,{...e,children:[l.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),l.jsx("polyline",{points:"5 12 12 5 19 12"})]}),Zv=e=>l.jsxs(Oe,{...e,children:[l.jsx("circle",{cx:"6",cy:"12",r:"1.6",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"12",cy:"12",r:"1.6",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"18",cy:"12",r:"1.6",fill:"currentColor",stroke:"none"})]}),ex=e=>l.jsxs(Oe,{...e,children:[l.jsx("rect",{x:"9",y:"9",width:"10",height:"10",rx:"2"}),l.jsx("path",{d:"M7 15H6a2 2 0 01-2-2V6a2 2 0 012-2h7"})]}),md=[{to:"/studio",label:"Studio",Icon:qv,end:!0},{to:"/controls",label:"Controls",Icon:Pc}],tx=[{to:"/gallery",label:"Gallery",Icon:Ec},{to:"/tags",label:"Tag Library",Icon:Bn},{to:"/aliases",label:"Aliases",Icon:Qs}],rs=({isActive:e})=>["slim-nav-link btn-touch",e?"is-active":null].filter(Boolean).join(" ");function nx({isMobileAlignedNav:e=!1}){const[t,n]=u.useState(!1),{pathname:r}=Pt(),s=fm(),{logout:o,user:a}=Ro(),[i,c]=u.useState(!1),d=Io("(min-width: 768px)"),y=()=>n(j=>!j),h=()=>n(!1),g=r==="/login",v=d&&!e,w=!g&&v,N=v,S=!d||e;u.useEffect(()=>{const j=k=>{var I;const L=!!((I=k==null?void 0:k.detail)!=null&&I.active);c(L)};return window.addEventListener("cozygen:render-state",j),()=>window.removeEventListener("cozygen:render-state",j)},[]);const m=async()=>{if(i)return;if(r==="/controls"||r==="/compose"){try{window.dispatchEvent(new Event("cozygen:request-render"))}catch{}return}if(!jm()){alert("No previous render found yet. Render once from Studio first.");return}c(!0);const L=await wm();c(!1),L!=null&&L.success||alert((L==null?void 0:L.error)||"Failed to render.")},f=()=>{try{o()}catch{}window.location.hash="#/login"},p=[...md,...tx];return l.jsxs("header",{className:"top-bar",children:[l.jsx("div",{className:"top-bar-shell",children:l.jsxs("div",{className:"brand-row",children:[l.jsxs(um,{to:"/studio",className:"brand-mark",onClick:h,children:[l.jsx(Sm,{size:28,className:"brand-logo"}),l.jsx("span",{className:"brand-text",children:"CozyGen"})]}),v?l.jsx("nav",{className:"desktop-nav","aria-label":"Main navigation",children:p.map(j=>l.jsx(pr,{to:j.to,end:j.end,className:rs,children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[l.jsx(j.Icon,{size:16}),l.jsx("span",{children:j.label}),j.to==="/gallery"&&s?l.jsx("span",{className:"badge-dot","aria-hidden":"true"}):null]})},j.to))}):null,l.jsx("div",{className:"flex-1"}),w?l.jsxs("button",{type:"button",className:`desktop-render-btn ${i?"is-busy":""}`,onClick:m,title:i?"Rendering":"Render","aria-busy":i,"aria-disabled":i,disabled:i,children:[l.jsx("span",{className:"render-icon",children:i?l.jsx("span",{className:"render-spinner","aria-hidden":"true"}):l.jsx(Nm,{size:16})}),l.jsx("span",{className:"render-label",children:i?"Rendering":"Render"})]}):null,N?l.jsxs("button",{type:"button",className:"desktop-logout-btn",onClick:f,title:"Sign out",children:[l.jsx("span",{className:"logout-icon",children:l.jsx(od,{size:16})}),l.jsx("span",{className:"logout-label",children:"Logout"}),a?l.jsxs("span",{className:"logout-user",children:["@",a]}):null]}):null,S?l.jsx("button",{type:"button",className:`mobile-menu-toggle btn-touch ${t?"is-active":""}`,onClick:y,"aria-expanded":t,"aria-controls":"cozygen-mobile-nav","aria-label":t?"Close menu":"Open menu",children:l.jsx("span",{className:"mobile-menu-icon",children:l.jsx("span",{})})}):null]})}),S?l.jsxs("div",{id:"cozygen-mobile-nav",className:`mobile-nav-drawer ${t?"is-open":""}`,role:"menu",children:[l.jsx("div",{className:"mobile-nav-section",children:md.map(j=>l.jsx(pr,{to:j.to,end:j.end,className:rs,onClick:h,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(j.Icon,{size:16}),l.jsx("span",{children:j.label})]})},j.to))}),l.jsxs("div",{className:"mobile-nav-section secondary",children:[l.jsx(pr,{to:"/gallery",className:rs,onClick:h,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Ec,{size:16}),l.jsx("span",{children:"Gallery"}),s?l.jsx("span",{className:"badge-dot","aria-hidden":"true"}):null]})}),l.jsx(pr,{to:"/tags",className:rs,onClick:h,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Bn,{size:16}),l.jsx("span",{children:"Tag Library"})]})}),l.jsx(pr,{to:"/aliases",className:rs,onClick:h,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Qs,{size:16}),l.jsx("span",{children:"Aliases"})]})}),l.jsx("button",{type:"button",className:"slim-nav-link btn-touch text-left",onClick:()=>{h(),f()},role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(od,{size:16}),l.jsx("span",{children:"Logout"}),a?l.jsxs("span",{className:"text-[rgba(159,178,215,0.75)] text-xs",children:["@",a]}):null]})})]})]}):null]})}const hd=[{to:"/controls",label:"Controls",Icon:Pc},{to:"/compose",label:"Compose",Icon:Lc},{to:"/gallery",label:"Gallery",Icon:Ec}],rx=[{to:"/aliases",label:"Aliases",Icon:Qs},{to:"/tags",label:"Tags",Icon:Bn}],sx=({isActive:e})=>["bottom-nav-link",e?"is-active":""].filter(Boolean).join(" ");function lx(){const e=Pt(),t=sn(),n=fm(),[r,s]=_t.useState(!1),[o,a]=_t.useState(!1),[i,c]=_t.useState(!1),[d,y]=_t.useState({}),h=Io("(min-width: 768px)"),g=_t.useRef(null),v=_t.useRef(null),w=e.pathname==="/controls",N=e.pathname==="/compose",S=async()=>{if(!(typeof window>"u")&&!o)if(s(!0),setTimeout(()=>s(!1),400),w||N)try{window.dispatchEvent(new CustomEvent("cozygen:request-render"))}catch{}else{if(!jm())return;const f=await wm();f.success||console.warn("Requeue failed:",f.error)}};_t.useEffect(()=>{const f=p=>{var k;const j=!!((k=p==null?void 0:p.detail)!=null&&k.active);a(j),j&&(s(!0),setTimeout(()=>s(!1),400))};return window.addEventListener("cozygen:render-state",f),()=>window.removeEventListener("cozygen:render-state",f)},[]),_t.useEffect(()=>{if(!i||h)return;const f=p=>{g.current&&g.current.contains(p.target)||v.current&&v.current.contains(p.target)||c(!1)};return window.addEventListener("pointerdown",f),()=>window.removeEventListener("pointerdown",f)},[i,h]),_t.useEffect(()=>{if(!i||h||!v.current)return;const f=v.current.getBoundingClientRect(),p=f.left+f.width/2,j=window.innerHeight-f.top+8;y({left:`${Math.min(window.innerWidth-80,Math.max(40,p))}px`,bottom:`${j}px`,top:"auto"})},[i,h]),_t.useEffect(()=>{h&&c(!1)},[h]);const m=h?[...hd,...rx]:hd;return l.jsxs(l.Fragment,{children:[l.jsxs("nav",{className:"bottom-nav","aria-label":"Bottom navigation",children:[m.map(f=>l.jsxs(pr,{to:f.to,end:f.end,className:sx,children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(f.Icon,{size:20})}),l.jsxs("span",{className:"bottom-nav-label",children:[f.label,f.to==="/gallery"&&n?l.jsx("span",{className:"badge-dot pulse","aria-hidden":"true"}):null]})]},f.to)),h?null:l.jsxs("button",{ref:v,type:"button",className:"bottom-nav-link",onClick:()=>c(f=>!f),"aria-expanded":i,"aria-label":"Open library",children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(Bn,{size:20})}),l.jsx("span",{className:"bottom-nav-label",children:"Library"})]},"library"),l.jsxs("button",{type:"button",className:`bottom-nav-link is-action ${r?"is-flash":""} ${o?"is-rendering":""}`,onClick:S,"aria-label":"Render","aria-busy":o,"aria-disabled":o,disabled:o,children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(Nm,{size:20})}),l.jsx("span",{className:"bottom-nav-label",children:"Render"})]},"render")]}),h?null:l.jsxs("div",{ref:g,className:`library-popover ${i?"is-open":""}`,style:d,children:[l.jsxs("button",{type:"button",className:"library-popover-btn",onClick:()=>{c(!1),t("/aliases")},children:[l.jsx(Qs,{size:18}),l.jsx("span",{children:"Aliases"})]}),l.jsxs("button",{type:"button",className:"library-popover-btn",onClick:()=>{c(!1),t("/tags")},children:[l.jsx(Bn,{size:18}),l.jsx("span",{children:"Tags"})]})]})]})}function ox(e,t){if(!t||t<=0)return null;const n=Number(e)||0,r=Number(t)||0,s=Math.round(n/r*100);return Number.isFinite(s)?Math.max(0,Math.min(100,s)):null}function ax({busy:e=!1,progressValue:t=0,progressMax:n=0,statusText:r="Idle",statusPhase:s="idle",primaryLabel:o="Render",onPrimary:a,primaryDisabled:i=!1,onLogs:c,logsLabel:d="Logs"}){const y=ox(t,n),h=s==="queued"?"rgba(255, 143, 112, 0.95)":s==="running"?"rgba(68, 225, 197, 0.95)":s==="finished"?"rgba(92, 255, 154, 0.95)":s==="error"?"rgba(255, 143, 112, 0.95)":"rgba(159, 178, 215, 0.55)",v={idle:"Idle",queued:"Queued",running:"Running",finished:"Finished",error:"Error"}[s]||"Status",w=e||i;return l.jsxs("div",{className:"dock-bar-inner",children:[l.jsx("button",{type:"button",onClick:a,disabled:w,className:"dock-primary-btn",children:e?"Rendering":o}),l.jsxs("div",{className:"dock-status-row",children:[l.jsxs("span",{className:"dock-status-left",children:[l.jsx("span",{className:"dock-status-dot",style:{background:h}}),l.jsx("span",{className:"dock-status-label",children:v})]}),l.jsxs("span",{className:"dock-status-right",children:[y!=null&&e?l.jsxs("span",{className:"dock-progress",children:[l.jsx("span",{className:"dock-progress-bar","aria-hidden":"true",children:l.jsx("span",{className:"dock-progress-fill",style:{width:`${y}%`}})}),l.jsxs("span",{children:[y,"%"]})]}):null,l.jsx("span",{className:"dock-status-text",children:r||(e?"Working":"Idle")}),c?l.jsx("button",{type:"button",className:"dock-logs-btn",onClick:c,children:d}):null]})]})]})}const Cm="jpg,jpeg,png,webp,gif,bmp,tif,tiff",_c=(e="")=>/\.(png|jpe?g|gif|webp|bmp|tif?f)$/i.test(e),bm=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e);async function ma({subfolder:e="",page:t=1,perPage:n=50,exts:r=Cm}={}){const s=new URLSearchParams({subfolder:e,page:String(t),per_page:String(n),exts:r}),o=await fetch(`/cozygen/input?${s.toString()}`);if(!o.ok)throw new Error(`Input list failed: ${o.status}`);return o.json()}const oo=e=>`/cozygen/input/file?path=${encodeURIComponent(e)}`,Si="output::",To=(e="")=>e.replace(/\\/g,"/").replace(/^\/+/,"").replace(/\/+$/,""),Em=(e="")=>{const t=e.replace(/\\/g,"/").split("/").filter(Boolean);return t[t.length-1]||""},ix=({subfolder:e="",filename:t=""}={})=>{const n=Em(t);if(!n)return"";const r=To(e);return`${Si}${r}::${n}`},Ni=(e="")=>{if(typeof e!="string"||!e.startsWith(Si))return null;const t=e.slice(Si.length);if(!t)return null;const n=t.lastIndexOf("::"),r=n===-1?t:t.slice(n+2);return r?{subfolder:n===-1?"":t.slice(0,n),filename:r}:null},ao=({filename:e="",subfolder:t="",type:n="output"}={})=>{const r=Em(e);return r?`/view?${new URLSearchParams({filename:r,subfolder:To(t),type:n||"output"}).toString()}`:""},ki=(e="")=>e.split("/").slice(0,-1).join("/"),cx=e=>{if(typeof e!="string"||!e)return e!=null&&e.path?ki(e.path):"";const t=Ni(e);return t?To(t.subfolder):ki(e)},gd=(e=[])=>e.map(t=>{const n=t.rel_path||t.name||"",r=t.name||n||"Untitled",s=!!t.is_dir,o=s?"":oo(n);return{...t,name:r,rel_path:n,is_dir:s,is_image:!s&&_c(r),is_video:!s&&bm(r),source:"input",preview_url:o}}),ux=(e=[])=>e.map(t=>{const n=t.filename||"",r=t.subfolder||"",s=t.type==="directory",o=s?r||n:[r,n].filter(Boolean).join("/"),a=n||r||o||"Untitled",i=s?"":ao({filename:n,subfolder:r,type:t.type});return{...t,name:a,rel_path:o,is_dir:s,is_image:!s&&_c(n),is_video:!s&&bm(n),source:"output",preview_url:i}}),Yn={get(e,t){try{return(typeof window<"u"?JSON.parse(localStorage.getItem(e)):null)??t}catch{return t}},set(e,t){try{typeof window<"u"&&localStorage.setItem(e,JSON.stringify(t))}catch{}}};function dx({input:e,value:t,onFormChange:n}){var F;const r=((F=e==null?void 0:e.inputs)==null?void 0:F.param_name)||"Image Input",s=(e==null?void 0:e.class_type)||"CozyGenImageInput",o=`cg_last_input_cwd::${r}`,a=`cg_last_picker_source::${r}`,[i,c]=u.useState(""),[d,y]=u.useState(!1),[h,g]=u.useState(!1),[v,w]=u.useState(Yn.get(o,"")),[N,S]=u.useState(1),[m,f]=u.useState(50),[p,j]=u.useState([]),[k,L]=u.useState(1),[I,b]=u.useState(!1),[$,z]=u.useState(""),[W,de]=u.useState([]),[se,he]=u.useState(!0),[X,ae]=u.useState(()=>Yn.get(a,"inputs")==="outputs"?"outputs":"inputs"),le=X,C=u.useCallback(O=>{const M=O==="outputs"?"outputs":"inputs";ae(M),Yn.set(a,M),w(""),S(1)},[]),T=u.useMemo(()=>{if(i)try{const O=new URL(i,window.location.origin);return(O.searchParams.get("path")||O.searchParams.get("filename")||O.pathname.split("/").pop()||"").split("/").pop()||"No file selected."}catch{}if(!t)return"No file selected.";if(typeof t=="string"){const O=Ni(t);return O!=null&&O.filename?O.filename.split("/").pop():t.split("/").pop()}return t!=null&&t.path?t.path.split("/").pop():"No file selected."},[i,t]);u.useEffect(()=>{if(typeof t=="string"&&t){const O=Ni(t);O!=null&&O.filename?c(ao({filename:O.filename,subfolder:O.subfolder,type:"output"})):c(oo(t)),y(!1)}else t!=null&&t.url?(c(t.url),y(!1)):(c(""),y(!1))},[t]);const _=u.useCallback(async O=>{const M=await Ov(O),Z=`/view?filename=${M.filename}&type=input`;c(Z),y(!1),Yn.set(o,""),s==="CozyGenImageInput"?n(r,M.filename):n(r,{source:"Upload",path:M.filename,url:Z})},[s,n,r]),R=u.useCallback(()=>{c(""),y(!1),s==="CozyGenImageInput"?n(r,""):n(r,{source:"Upload",path:"",url:""})},[s,n,r]),D=u.useCallback(()=>{const M=cx(t)||Yn.get(o,"");w(M),S(1),g(!0)},[t]),J=u.useCallback(()=>{g(!1)},[]);u.useEffect(()=>{if(h){if(le!=="inputs"){de([]);return}(async()=>{try{const O=await ma({subfolder:"",page:1,perPage:0,exts:""});de((O.items||[]).filter(M=>M.is_dir))}catch{}})()}},[h,le]),u.useEffect(()=>{if(!h)return;let O=!1;async function M(){b(!0);try{if(le==="outputs"){const Z=await hm(v,N,m);if(O)return;const te=ux(Z&&Z.items||[]);O||(j(te),L(Z&&Z.total_pages||1))}else{const te=await ma({subfolder:v,page:N,perPage:m,exts:se?Cm:""}),q=(te.items||[]).some(fe=>!fe.is_dir);if(se&&!q){const fe=await ma({subfolder:v,page:N,perPage:m,exts:""});O||(j(gd(fe.items||[])),L(fe.total_pages||1),he(!1));return}O||(j(gd(te.items||[])),L(te.total_pages||1))}}catch(Z){console.error(le==="outputs"?"Failed to load output directory":"Failed to load input directory",Z),O||(j([]),L(1))}finally{O||b(!1)}}return M(),()=>{O=!0}},[h,v,N,m,se,le]);const H=u.useMemo(()=>{const O=$.trim().toLowerCase();let M=p;return se&&(M=M.filter(Z=>{if(Z.is_dir)return!0;const te=Z.name||Z.filename||Z.rel_path||"";return _c(String(te))})),O?M.filter(Z=>(Z.name||Z.filename||Z.rel_path||"").toLowerCase().includes(O)):M},[p,$,se]),B=u.useCallback(O=>{if(!O)return;const M=typeof O=="object"?O:null;if(((M==null?void 0:M.source)||"inputs")==="output"){const fe=ix({subfolder:(M==null?void 0:M.subfolder)||"",filename:(M==null?void 0:M.filename)||(M==null?void 0:M.name)||""});if(!fe)return;const Ie=(M==null?void 0:M.preview_url)||ao({filename:M==null?void 0:M.filename,subfolder:M==null?void 0:M.subfolder,type:M==null?void 0:M.type});c(Ie),y(!1),Yn.set(o,To((M==null?void 0:M.subfolder)||"")),s==="CozyGenImageInput"?n(r,fe):n(r,{source:"OutputGallery",path:fe,url:Ie}),g(!1);return}const te=typeof O=="string"?O:(M==null?void 0:M.rel_path)||(M==null?void 0:M.path)||"";if(!te)return;const q=(M==null?void 0:M.preview_url)||oo(te);c(q),y(!1),Yn.set(o,ki(te)),s==="CozyGenImageInput"?n(r,te):n(r,{source:"Server",path:te,url:q}),g(!1)},[s,n,r]);return{param:r,previewUrl:i,imgReady:d,setImgReady:y,displayName:T,serverOpen:h,openServer:D,closeServer:J,cwd:v,setCwd:w,page:N,setPage:S,perPage:m,setPerPage:f,totalPages:k,loading:I,search:$,setSearch:z,topDirs:W,imagesOnly:se,setImagesOnly:he,shownEntries:H,pickerSource:le,setPickerSource:C,handleUpload:_,clearImage:R,selectServer:B}}function wt({open:e,onClose:t,title:n,children:r,footer:s,variant:o="sheet",className:a="",contentClassName:i="",shouldCloseOnOverlayClick:c=!0,shouldCloseOnEsc:d=!0}){const y=u.useRef(!1),h=u.useRef(null),g=u.useRef(null),v=S=>S?Array.from(S.querySelectorAll('a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter(m=>!m.hasAttribute("disabled")&&m.getAttribute("aria-hidden")!=="true"):[],w=u.useMemo(()=>["bottom-sheet-content",o==="fullscreen"?"is-fullscreen":"is-sheet",i].filter(Boolean).join(" "),[i,o]),N=u.useMemo(()=>["bottom-sheet-overlay",a].filter(Boolean).join(" "),[a]);return u.useEffect(()=>{if(!e||!d)return;const S=m=>{m.key==="Escape"&&(t==null||t())};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[e,t,d]),u.useEffect(()=>{if(!e||typeof document>"u")return;const S=h.current;g.current=document.activeElement;const m=()=>{var k;const j=v(S)[0]||S;(k=j==null?void 0:j.focus)==null||k.call(j)},f=p=>{if(p.key!=="Tab"||!S)return;const j=v(S);if(!j.length){p.preventDefault(),S.focus();return}const k=j[0],L=j[j.length-1],I=document.activeElement;p.shiftKey&&I===k?(p.preventDefault(),L.focus()):!p.shiftKey&&I===L&&(p.preventDefault(),k.focus())};return requestAnimationFrame(m),S==null||S.addEventListener("keydown",f),()=>{var j;S==null||S.removeEventListener("keydown",f);const p=g.current;p&&document.contains(p)&&((j=p.focus)==null||j.call(p))}},[e]),!e||typeof document>"u"?null:Sc.createPortal(l.jsx("div",{className:N,role:"presentation",onPointerDown:S=>{y.current=S.target===S.currentTarget},onClick:S=>{c&&y.current&&S.target===S.currentTarget&&(t==null||t())},children:l.jsx("div",{ref:h,className:w,role:"dialog","aria-modal":"true","aria-label":n||"Sheet",onClick:S=>S.stopPropagation(),tabIndex:-1,children:l.jsxs("div",{className:"bottom-sheet-panel",children:[l.jsxs("header",{className:"bottom-sheet-head",children:[l.jsx("div",{className:"bottom-sheet-title",children:n||""}),l.jsx("button",{type:"button",className:"bottom-sheet-close",onClick:t,"aria-label":"Close",children:l.jsx(rn,{size:16})})]}),l.jsx("div",{className:"bottom-sheet-body",children:r}),s?l.jsx("footer",{className:"bottom-sheet-foot",children:s}):null]})})}),document.body)}function fx({items:e=[],value:t,onChange:n,ariaLabel:r,role:s="tablist",className:o="",tabClassName:a="",size:i="md",layout:c="equal",wrap:d=!1}){const y=["segmented-tabs",i==="sm"?"is-compact":"",c==="auto"?"is-auto":"",c==="icon"?"is-icon":"",d?"is-wrap":"",o].filter(Boolean).join(" "),h=s==="tablist"?"tab":"button",g=u.useRef([]);u.useEffect(()=>{g.current=g.current.slice(0,e.length)},[e.length]);const v=u.useMemo(()=>e.map((p,j)=>p.disabled?null:j).filter(p=>p!==null),[e]),w=u.useMemo(()=>e.findIndex(p=>p.key===t&&!p.disabled),[e,t]),N=v.length?v[0]:-1,S=w>=0?w:N,m=p=>{var k;const j=g.current[p];(k=j==null?void 0:j.focus)==null||k.call(j)},f=(p,j)=>{var L;if(!e.length)return p;let k=p;for(let I=0;I<e.length;I+=1)if(k=(k+j+e.length)%e.length,!((L=e[k])!=null&&L.disabled))return k;return p};return l.jsx("div",{className:y,role:s,"aria-label":r,children:e.map((p,j)=>{const k=p.key===t,L=p.label?String(p.label):"";return l.jsxs("button",{type:"button",ref:I=>{g.current[j]=I},role:h,"aria-selected":s==="tablist"?k:void 0,"aria-pressed":s!=="tablist"?k:void 0,"aria-controls":s==="tablist"?p.controls:void 0,className:["segmented-tab",k?"is-active":"",p.icon&&!L?"is-icon":"",p.className||"",a].filter(Boolean).join(" "),onClick:()=>{p.disabled||n==null||n(p.key)},onKeyDown:I=>{if(s!=="tablist"||!["ArrowRight","ArrowLeft","Home","End"].includes(I.key)||(I.preventDefault(),!e.length))return;let b=j;I.key==="Home"?b=v.length?v[0]:b:I.key==="End"?b=v.length?v[v.length-1]:b:I.key==="ArrowRight"?b=f(b,1):I.key==="ArrowLeft"&&(b=f(b,-1));const $=e[b];!$||$.disabled||(n==null||n($.key),m(b))},disabled:p.disabled,title:p.title||L||p.ariaLabel,"aria-label":p.ariaLabel,tabIndex:s==="tablist"?j===S?0:-1:void 0,children:[p.icon?l.jsx("span",{className:"segmented-tab-icon",children:p.icon}):null,L?l.jsx("span",{className:"segmented-tab-label",children:L}):null,p.badge?l.jsx("span",{className:"segmented-tab-badge",children:p.badge}):null]},p.key)})})}const Tr=u.memo(fx),px=(e=[])=>(e||[]).map(t=>typeof t=="string"||typeof t=="number"?{value:t,label:String(t)}:{value:(t==null?void 0:t.value)??(t==null?void 0:t.id)??"",label:(t==null?void 0:t.label)??(t==null?void 0:t.name)??String((t==null?void 0:t.value)??""),disabled:!!(t!=null&&t.disabled)}),mx=(e,t)=>{if(!t)return e;const n=t.trim().toLowerCase();return n?e.filter(r=>{const s=String(r.label||"").toLowerCase(),o=String(r.value||"").toLowerCase();return s.includes(n)||o.includes(n)}):e};function hx({value:e,onChange:t,options:n,children:r,placeholder:s,emptyLabel:o="No matches",disabled:a=!1,size:i="md",className:c="",wrapperClassName:d="",searchable:y=!1,searchPlaceholder:h="Search options...",searchValue:g,onSearchChange:v,searchAriaLabel:w="Search options",...N}){const[S,m]=u.useState(""),f=typeof g=="string"?g:S,p=v||m,j=u.useMemo(()=>px(n),[n]),k=u.useMemo(()=>y?mx(j,f):j,[j,f,y]),L=["ui-control","ui-select",i==="sm"?"is-compact":"",c].filter(Boolean).join(" "),I=()=>r||(k.length?k.map($=>l.jsx("option",{value:$.value,disabled:$.disabled,children:$.label},String($.value))):l.jsx("option",{value:"",disabled:!0,children:o})),b=l.jsxs("select",{...N,className:L,value:e??"",onChange:$=>t==null?void 0:t($.target.value),disabled:a,children:[s?l.jsx("option",{value:"",children:s}):null,I()]});return y?l.jsxs("div",{className:d,children:[l.jsx("input",{type:"search",value:f,onChange:$=>p($.target.value),placeholder:h,className:"ui-control ui-input is-compact","aria-label":w,disabled:a}),b]}):b}const Ye=u.memo(hx);function gx({open:e,cwd:t,setCwd:n,page:r,setPage:s,perPage:o,setPerPage:a,totalPages:i,topDirs:c,loading:d,imagesOnly:y,setImagesOnly:h,search:g,setSearch:v,shownEntries:w,onSelect:N,onClose:S,pickerSource:m,setPickerSource:f}){if(!e)return null;const p=m||"inputs",j=typeof f=="function",k=()=>{n(""),s(1)},L=W=>{j&&W!==p&&(f(W),n(""),s(1))},I=t.split("/").filter(Boolean),b=p==="outputs"?"Choose output":"Choose input",$=[{key:"",label:"Root"},...c.map(W=>({key:W.rel_path,label:W.name}))],z=W=>{n(W),s(1)};return l.jsx(wt,{open:e,onClose:S,title:b,variant:"fullscreen",footer:l.jsxs("div",{className:"flex items-center gap-2 w-full",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",disabled:r<=1||d,onClick:()=>s(W=>Math.max(1,W-1)),children:"Prev"}),l.jsxs("div",{className:"text-xs text-center text-[rgba(159,178,215,0.75)] min-w-[92px]",children:[r," / ",i]}),l.jsx("button",{type:"button",className:"ui-button is-muted w-full",disabled:r>=i||d,onClick:()=>s(W=>W<i?W+1:W),children:"Next"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Location"}),l.jsxs("div",{className:"imagepicker-breadcrumb",children:[l.jsx("button",{type:"button",className:"imagepicker-crumb",onClick:k,children:"Root"}),I.map((W,de)=>{const se=I.slice(0,de+1).join("/");return l.jsx("button",{type:"button",className:"imagepicker-crumb",onClick:()=>{n(se),s(1)},children:W},se)})]})]}),j?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Source"}),l.jsx(Tr,{ariaLabel:"Source",value:p,onChange:L,size:"sm",items:[{key:"inputs",label:"Inputs"},{key:"outputs",label:"Outputs"}]})]}):null,l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Filters"}),l.jsxs("div",{className:"composer-filters",children:[l.jsxs("label",{className:"inline-flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:y,onChange:W=>{h(W.target.checked),s(1)}}),l.jsx("span",{className:"text-sm text-[rgba(159,178,215,0.85)]",children:"Images only"})]}),l.jsx("input",{type:"search",value:g,onChange:W=>v(W.target.value),placeholder:"Search files",className:"sheet-input ui-control ui-input","aria-label":"Search files"}),l.jsx(Ye,{className:"sheet-select",value:o,onChange:W=>{const de=parseInt(W,10)||50;a(de),s(1)},"aria-label":"Items per page",size:"sm",options:[25,50,100]})]})]}),c.length>0?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Quick folders"}),l.jsx(Tr,{ariaLabel:"Quick folders",value:t,onChange:z,size:"sm",layout:"auto",wrap:!0,className:"imagepicker-chips",items:$})]}):null,l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Results"}),d?l.jsxs("div",{className:"sheet-hint",children:["Scanning ",p==="outputs"?"output":"input"," folders"]}):w.length===0?l.jsx("div",{className:"sheet-hint",children:"Nothing here yet. Try a different folder or turn off Images only."}):null,l.jsx("div",{className:"imagepicker-grid",children:!d&&w.map(W=>{const de=`${W.source||"input"}::${W.rel_path||W.name}`,se=W.is_dir?"":W.preview_url||(W.source==="output"?ao({filename:W.filename,subfolder:W.subfolder,type:W.type}):oo(W.rel_path||""));return l.jsx("button",{type:"button",className:`imagepicker-item ${W.is_dir?"is-dir":""}`,onClick:()=>{W.is_dir?(n(W.rel_path||""),s(1)):N(W)},children:W.is_dir?l.jsxs("div",{className:"imagepicker-dir-row",children:[l.jsx("div",{className:"imagepicker-dir-dot","aria-hidden":"true"}),l.jsx("div",{className:"imagepicker-name",children:W.name})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"imagepicker-thumb",children:se?l.jsx("img",{className:"imagepicker-img",alt:W.name,src:se}):l.jsx("div",{className:"imagepicker-img is-placeholder"})}),l.jsx("div",{className:"imagepicker-name",children:W.name})]})},de)})})]})]})})}function yx({open:e,onClose:t,title:n,url:r,kind:s="image"}){return r?l.jsx(wt,{open:e,onClose:t,title:n||"Preview",variant:"fullscreen",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("a",{href:r,target:"_blank",rel:"noreferrer",className:"ui-button is-muted w-full text-center",children:"Open"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Close"})]}),children:l.jsx("div",{className:"url-viewer-stage",children:s==="video"?l.jsx("video",{src:r,controls:!0,className:"url-viewer-media",autoPlay:!0}):l.jsx("img",{src:r,alt:n||"Preview",className:"url-viewer-media"})})}):null}function vx({input:e,value:t,onFormChange:n}){const{previewUrl:r,imgReady:s,setImgReady:o,displayName:a,serverOpen:i,openServer:c,closeServer:d,cwd:y,setCwd:h,page:g,setPage:v,perPage:w,setPerPage:N,totalPages:S,topDirs:m,loading:f,search:p,setSearch:j,imagesOnly:k,setImagesOnly:L,shownEntries:I,pickerSource:b,setPickerSource:$,handleUpload:z,clearImage:W,selectServer:de}=dx({input:e,value:t,onFormChange:n}),se=u.useRef(null),he=u.useRef(null),[X,ae]=u.useState(0),[le,C]=u.useState(!1);u.useEffect(()=>{const R=he.current;if(!R)return;const D=H=>{H.preventDefault(),H.stopPropagation()},J=async H=>{var F,O;D(H);const B=(O=(F=H.dataTransfer)==null?void 0:F.files)==null?void 0:O[0];B&&(await z(B),se.current&&(se.current.value=""),ae(M=>M+1))};return["dragenter","dragover","dragleave","drop"].forEach(H=>R.addEventListener(H,H==="drop"?J:D)),()=>{["dragenter","dragover","dragleave","drop"].forEach(H=>R.removeEventListener(H,H==="drop"?J:D))}},[z]);const T=async R=>{var J;const D=(J=R.target.files)==null?void 0:J[0];D&&(await z(D),se.current&&(se.current.value=""),ae(H=>H+1))},_=()=>{se.current&&se.current.click()};return l.jsxs("div",{className:"asset-card",children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[l.jsx("h3",{className:"text-sm font-semibold text-[#F8F4FF] truncate",children:a}),l.jsx("span",{className:"text-[11px] text-[#C3C7FFB3] truncate",children:"Image"})]}),l.jsx("div",{ref:he,className:"mb-3 rounded-xl border border-dashed border-[rgba(255,255,255,0.14)] bg-[rgba(255,255,255,0.02)] flex items-center justify-center min-h-[140px] sm:min-h-[180px] overflow-hidden",children:r?l.jsx("button",{type:"button",className:"asset-preview-btn",onClick:()=>C(!0),"aria-label":`Preview ${a}`,title:"Open preview",children:l.jsx("img",{src:r,alt:a,className:`max-h-64 max-w-full object-contain transition-opacity ${s?"opacity-100":"opacity-0"}`,onLoad:()=>o(!0)})}):l.jsx("div",{className:"text-[11px] text-[#9DA3FFCC] text-center px-6",children:"Drop an image here, upload from your device, or choose one from your server."})}),l.jsx("input",{ref:se,type:"file",accept:"image/*",className:"hidden",onChange:T},X),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:"ui-button is-primary is-compact",onClick:c,children:"Choose"}),l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:_,children:"Upload"}),l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:W,children:"Clear"})]}),l.jsx(gx,{open:i,cwd:y,setCwd:h,page:g,setPage:v,perPage:w,setPerPage:N,totalPages:S,topDirs:m,loading:f,imagesOnly:k,setImagesOnly:L,search:p,setSearch:j,shownEntries:I,pickerSource:b,setPickerSource:$,onSelect:de,onClose:d}),l.jsx(yx,{open:le,onClose:()=>C(!1),title:a||"Preview",url:r,kind:"image"})]})}function xx({open:e,onClose:t,title:n,description:r,render:s,index:o=0,total:a=0,children:i}){const[c,d]=u.useState("idle"),y=u.useRef(null),h=u.useRef(null),g=w=>w?Array.from(w.querySelectorAll('a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter(N=>!N.hasAttribute("disabled")&&N.getAttribute("aria-hidden")!=="true"):[];if(u.useEffect(()=>{if(c==="queued"){const w=setTimeout(()=>d("idle"),1600);return()=>clearTimeout(w)}},[c]),u.useEffect(()=>{if(!e||typeof document>"u")return;const w=y.current;h.current=document.activeElement;const N=()=>{var p;const f=g(w)[0]||w;(p=f==null?void 0:f.focus)==null||p.call(f)},S=m=>{if(m.key==="Escape"){t==null||t();return}if(m.key!=="Tab"||!w)return;const f=g(w);if(!f.length){m.preventDefault(),w.focus();return}const p=f[0],j=f[f.length-1],k=document.activeElement;m.shiftKey&&k===p?(m.preventDefault(),j.focus()):!m.shiftKey&&k===j&&(m.preventDefault(),p.focus())};return requestAnimationFrame(N),w==null||w.addEventListener("keydown",S),()=>{var f;w==null||w.removeEventListener("keydown",S);const m=h.current;m&&document.contains(m)&&((f=m.focus)==null||f.call(m))}},[e,t]),!e)return null;const v=typeof s=="function"?s():i;return l.jsxs("div",{className:"spotlight-overlay",role:"dialog","aria-modal":"true",children:[l.jsx("div",{className:"spotlight-backdrop",onClick:t}),l.jsxs("div",{className:"spotlight-sheet",ref:y,tabIndex:-1,children:[l.jsxs("div",{className:"spotlight-header",children:[l.jsxs("div",{className:"spotlight-meta",children:[l.jsx("div",{className:"spotlight-kicker",children:"Focused control"}),l.jsx("div",{className:"spotlight-title",children:n||"Control"}),r?l.jsx("div",{className:"spotlight-hint",children:r}):null]}),l.jsx("button",{type:"button",className:"spotlight-close",onClick:t,"aria-label":"Close",children:l.jsx(rn,{size:16})})]}),l.jsx("div",{className:"spotlight-body",children:v}),l.jsx("div",{className:"spotlight-footer",children:l.jsx("div",{className:"spotlight-footer-right",children:l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:t,"aria-label":"Close",children:"Close"})})})]})]})}function wx({open:e,onClose:t,title:n,value:r,onChange:s,placeholder:o="",description:a}){const i=n||"Edit",c=u.useMemo(()=>`sheet-textarea-${Math.random().toString(36).slice(2,9)}`,[]);return l.jsxs(wt,{open:e,onClose:t,title:i,variant:"fullscreen",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Done"}),children:[a?l.jsx("div",{className:"text-[12px] text-[rgba(159,178,215,0.75)] mb-3",children:a}):null,l.jsx("textarea",{id:c,value:r??"",onChange:d=>s==null?void 0:s(d.target.value),placeholder:o,className:"sheet-textarea ui-control ui-textarea",rows:12})]})}function fn(e){const t=Number(e);return Number.isFinite(t)?t.toFixed(2).replace(/\.?0+$/u,""):"1"}function jx(e=""){const t=String(e||"");if(!t.trim())return[];const n=[];let r=0;for(;r<t.length;){for(;r<t.length&&/[\s,]/.test(t[r]);)r++;if(r>=t.length)break;let s=r,o=r,a="tag",i="";const c=t[r]==="(";if(c&&(s=r,r++),t[r]==="$"){a="alias";const d=r;for(r++;r<t.length&&t[r]!=="$"&&t[r]!==","&&t[r]!==`
`;)i+=t[r],r++;t[r]==="$"&&r++,c||(s=d)}else{a="tag";const d=r;for(;r<t.length&&!(t[r]===","||t[r]==="$"||t[r]===`
`||c&&t[r]===":"||!c&&t[r]==="(");)i+=t[r],r++;i=i.trim(),c||(s=d)}if(c&&t[r]===":"){for(r++;r<t.length&&t[r]!==")"&&t[r]!==","&&t[r]!==`
`;)r++;t[r]===")"&&r++}o=r,i&&n.push({type:a,text:i,start:s,end:o})}return n}function yd(e="",t){if(!t||typeof t.start!="number"||typeof t.end!="number")return null;const r=String(e||"").slice(t.start,t.end);if(!r.startsWith("(")||!r.includes(":"))return null;const s=r.lastIndexOf(":");if(s===-1)return null;const o=r.slice(s+1);if(!o.endsWith(")"))return null;const a=o.slice(0,-1).trim();if(!/^\d+(\.\d+)?$/u.test(a))return null;const i=Number.parseFloat(a);return Number.isFinite(i)?{weight:i,wrapperStart:t.start,wrapperEnd:t.end}:null}function vd(e="",t,n){const r=String(e||"");if(!t||typeof t.start!="number"||typeof t.end!="number")return r;const s=n==null?null:Number(n),o=s===null||!Number.isFinite(s)||Math.abs(s-1)<1e-6,a=t.type==="alias"?`$${t.text}$`:t.text;if(o)return r.slice(0,t.start)+a+r.slice(t.end);const i=fn(s),c=`(${a}:${i})`;return r.slice(0,t.start)+c+r.slice(t.end)}function xd(e="",t,n,r){var g;if(n===r||n===null||r===null||!(t!=null&&t.length))return e;const s=String(e||""),o=t.map(v=>({start:v.start,end:v.end,text:s.slice(v.start,v.end)})),a=o.slice(0,-1).map((v,w)=>{const N=o[w+1];return s.slice(v.end,N.start)}),i=o.length?s.slice(0,o[0].start):"",c=o.length?s.slice(o[o.length-1].end):"",d=[...o],[y]=d.splice(n,1);d.splice(r,0,y);let h=i+(((g=d[0])==null?void 0:g.text)||"");for(let v=1;v<d.length;v++)h+=(a[v-1]??", ")+d[v].text;return h+=c,h}function Sx(e="",t){const n=String(e||"");if(!t||typeof t.start!="number"||typeof t.end!="number")return n;const r=n.slice(0,t.start).replace(/[\s,]*$/,""),s=n.slice(t.end).replace(/^[\s,]*/,"");return r?`${r}, ${s}`.trim():s.trim()}function mr(e="",t){if(!t||typeof t.index!="number"||typeof t.length!="number")return null;const n=String(e||""),r=t.index,s=t.index+t.length;if(r<=0||n[r-1]!=="("||n[s]!==":")return null;let o=s+1,a="";for(;o<n.length&&n[o]!==")";)if(a+=n[o],o+=1,a.length>12)return null;if(o>=n.length||n[o]!==")")return null;const i=a.trim();if(!/^\d+(\.\d+)?$/u.test(i))return null;const c=Number.parseFloat(i);return Number.isFinite(c)?{weight:c,wrapperStart:r-1,wrapperEnd:o+1}:null}function yl(e="",t,n){const r=String(e||"");if(!t||typeof t.index!="number"||typeof t.length!="number")return r;const s=t.index,o=t.index+t.length,a=mr(r,t),i=n==null?null:Number(n),c=i===null||!Number.isFinite(i)||Math.abs(i-1)<1e-6;if(a){if(c)return r.slice(0,a.wrapperStart)+r.slice(s,o)+r.slice(a.wrapperEnd);const y=fn(i);return r.slice(0,o+1)+y+r.slice(a.wrapperEnd-1)}if(c)return r;const d=fn(i);return r.slice(0,s)+"("+r.slice(s,o)+":"+d+")"+r.slice(o)}function vl(e,t,n){const r=Number(e);return Number.isFinite(r)?Math.max(t,Math.min(n,r)):t}function Ci({open:e,onClose:t,title:n="Alias strength",tokenLabel:r="",weight:s=1,onApply:o,onRemoveWeight:a,onDeleteToken:i}){const c=u.useMemo(()=>vl(s||1,.2,2),[s]),[d,y]=u.useState(c);u.useEffect(()=>{e&&y(c)},[e,c]);const h=fn(d);return l.jsx(wt,{open:e,onClose:t,title:n,footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:t,children:"Cancel"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>{o==null||o(d),t==null||t()},children:"Done"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Alias"}),l.jsx("div",{className:"sheet-hint",children:r||""})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Strength"}),l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>y(g=>vl(g-.05,.2,2)),children:""}),l.jsxs("div",{className:"text-sm text-[rgba(237,242,255,0.92)] tabular-nums",children:[h,""]}),l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>y(g=>vl(g+.05,.2,2)),children:"+"})]}),l.jsx("input",{type:"range",min:.2,max:2,step:.05,value:d,onChange:g=>y(vl(g.target.value,.2,2)),className:"w-full","aria-label":"Alias strength"}),l.jsx("div",{className:"sheet-hint",children:"1.0 is normal. Increase to emphasize or reduce to soften."})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Actions"}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>y(1),children:"Reset to 1.0"}),l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>{a==null||a(),t==null||t()},children:"Remove strength"}),l.jsx("button",{type:"button",className:"ui-button is-danger is-compact",onClick:()=>{i==null||i(),t==null||t()},children:"Remove alias"})]})]})]})})}function Jn(e){const t=String(e||"").trim();if(!t)return"";const n=t.toLowerCase(),r={scifi:"Sci-Fi",sci:"Sci",ui:"UI",vfx:"VFX",hdr:"HDR",dof:"DoF",bokeh:"Bokeh",vhs:"VHS",jpeg:"JPEG",jpg:"JPG",png:"PNG",gif:"GIF",webp:"WebP",api:"API",nsfw:"NSFW",sfw:"SFW",sfx:"SFX",fx:"FX",lora:"LoRA",loras:"LoRAs",ip:"IP",egirl:"E-girl",i2v:"I2V",t2i:"T2I",img2img:"Img2Img",txt2img:"Txt2Img",tts:"TTS",asmr:"ASMR",ai:"AI",highleg:"High-Leg","one-piece":"One-Piece","three-quarter":"Three-Quarter"};return r[n]?r[n]:/^\d+$/.test(n)?n:n==="3d"?"3D":n==="2d"?"2D":n.length===1?n.toUpperCase():n.charAt(0).toUpperCase()+n.slice(1)}function Nx(e=""){const t=String(e||"").trim().toLowerCase();return t?t.startsWith("flirty_")?"flirty":t.startsWith("action_")||t.startsWith("dynamic_")||t.startsWith("stealth_")||t.startsWith("athletic_")||t.startsWith("running_")||t.startsWith("walking_")?"action":t.startsWith("sleepy_")||t.startsWith("relaxed_")||t.startsWith("reclining_")||t.startsWith("sitting_")||t.startsWith("kneeling_")?"rest":t.startsWith("happy_")||t.startsWith("sad_")||t.startsWith("angry_")||t.startsWith("nervous_")||t.startsWith("smug_")||t.startsWith("surprised_")||t.startsWith("scared_")||t.startsWith("tipsy_")?"emotion":t.startsWith("composed_")||t.startsWith("contemplative_")||t.startsWith("looking_")?"posed":"everyday":""}function kx(e=""){const t=String(e||"").trim().toLowerCase();if(!t)return"";const n=t.split("_")[0]||"";return n==="lingerie"?"lingerie":n==="swimwear"||n==="swim"?"swimwear":n==="costumes"||n==="tech"?"costumes":n==="uniform"?"uniform":n==="formal"?"formal":n==="alt"?"alt":n==="casual"||n==="street"||n==="lounge"||n==="sporty"||n==="dress"?"everyday":n||"everyday"}function Cx(e=""){const t=String(e||"").trim().toLowerCase();if(!t)return"";const n=t.split("_")[0]||"";return["fire","candlelight","embers"].includes(n)?"fire":["moonlight"].includes(n)?"night":["neon"].includes(n)?"neon":["studio","stage","sidelighting","dim"].includes(n)?"studio":["golden","sunbeam","dappled"].includes(n)?"natural":["lens","light"].includes(n)?"effects":n||"other"}function is(e="",t=""){const n=String(e||"").trim(),r=String(t||"").trim().toLowerCase();if(!n)return"";if(r==="outfit")return kx(n)||"everyday";if(r==="pose")return Nx(n)||"everyday";if(r==="lighting")return Cx(n)||"effects";const s=n.indexOf("_");return s<=0?"":n.slice(0,s).trim()}function Lm(e=""){const t=String(e||"").trim();return t?t.includes(":")?t.split(":").slice(1).join(":"):t:""}function Il({token:e="",name:t=""}={}){const n=String(t||"").trim()||Lm(e);if(!n)return"";let s=n.replace(/_(\d+)$/u,"").split("_").filter(Boolean);if(s.length===0)return n;const o=[];for(let h=0;h<s.length;h++){const g=s[h],v=s[h+1];if(g&&v&&g.toLowerCase()==="one"&&v.toLowerCase()==="piece"){o.push("one-piece"),h+=1;continue}if(g&&v&&g.toLowerCase()==="three"&&v.toLowerCase()==="quarter"){o.push("three-quarter"),h+=1;continue}o.push(g)}if(s=o,Array.from(new Set(s.map(h=>String(h).toLowerCase()))).length===1)return Jn(s[0]);const i=s[0],c=s.slice(1),d=Jn(i),y=c.map(Jn).join(" ").trim();return y?y.toLowerCase()===d.toLowerCase()?c.length===1&&String(c[0]).toLowerCase()===String(i).toLowerCase()?d||n:s.map(Jn).join(" ").trim()||n:`${d} - ${y}`:s.map(Jn).join(" ").trim()||n}function Rc(e){if(!e)return{subcategory:"",displayName:""};const t=e.name||"",n=e.token||"",r=Lm(n)||t,s=is(r,e.category)||"other",o=Il({token:n,name:t})||n||t||"Alias";return{subcategory:s,displayName:o}}function cn(e=""){const t=String(e||"").trim();return t?t==="All"?"All":{action:"Actions",camera:"Camera",body:"Body",char:"Characters",mood:"Mood",outfit:"Outfits",pose:"Poses",prop:"Props",scene:"Scenes",weather:"Weather",style:"Style",hair:"Hair",lighting:"Lighting"}[t]||Jn(t):""}function Fn(e=""){const t=String(e||"").trim();return t?t==="All"?"All":t.split(/[_-]+/u).filter(Boolean).map(n=>Jn(n)).join(" ").trim():""}function bx({name:e,label:t,description:n,value:r,onChange:s,onEnter:o,disabled:a=!1,multiline:i=!1,aliasOptions:c=[],aliasCatalog:d=[],onOpenComposer:y}){var nt,jt;const h=u.useRef(null),g=u.useRef(null),v=u.useRef({start:null,end:null}),w=u.useRef(null),N=u.useRef(null),[S,m]=u.useState(null),[f,p]=u.useState(null),[j,k]=u.useState(!1),[L,I]=u.useState(""),[b,$]=u.useState("All"),[z,W]=u.useState("All"),[de]=u.useState([]),se=u.useRef(null),[he,X]=u.useState(!1),[ae,le]=u.useState(!1),[C,T]=u.useState(null),_=typeof r=="string"?r:String(r??"");u.useMemo(()=>Array.isArray(c)?c.filter(Boolean):[],[c]);const R=u.useMemo(()=>(Array.isArray(d)?d.filter(x=>x&&x.name):[]).map(x=>({...x,...Rc(x)})),[d]),D=u.useMemo(()=>R,[R]),J=x=>{const P=x.target.value;s==null||s(P)},H=x=>{if(!i&&x.key==="Enter"){x.preventDefault(),o==null||o(x.target.value,x);return}},B=u.useMemo(()=>{const x=new Map;return D.forEach(P=>{P!=null&&P.token&&x.set(String(P.token).toLowerCase(),P)}),x},[D]),F=u.useMemo(()=>{const x=new Set(["All"]);return R.forEach(P=>{P.category&&x.add(P.category)}),Array.from(x).sort((P,U)=>P.localeCompare(U))},[R]),O=u.useMemo(()=>{const x=new Set(["All"]);return D.forEach(P=>{(!b||b==="All"||P.category===b)&&P.subcategory&&x.add(P.subcategory)}),Array.from(x).sort((P,U)=>P.localeCompare(U))},[D,b]);u.useEffect(()=>{W("All")},[b]);const M=u.useMemo(()=>{const x=_||"";if(!x||!x.includes("$"))return[];const P=[],U=/\$([a-z0-9_:-]+)\$/gi;let G;for(;G=U.exec(x);)P.push({token:G[1],index:G.index,length:G[0].length});return P},[_]),Z=()=>{try{const x=h.current;x?v.current={start:x.selectionStart??null,end:x.selectionEnd??null}:v.current={start:null,end:null}}catch{v.current={start:null,end:null}}g.current&&g.current.scrollIntoView({block:"center",behavior:"smooth"}),k(!0)},te=u.useMemo(()=>{const x=L.trim().toLowerCase();return D.filter(P=>{var U,G,ce,ne;return b!=="All"&&(P.category||"")!==b||z!=="All"&&(P.subcategory||"other")!==z?!1:x?((U=P.token)==null?void 0:U.toLowerCase().includes(x))||((G=P.text)==null?void 0:G.toLowerCase().includes(x))||((ce=P.name)==null?void 0:ce.toLowerCase().includes(x))||((ne=P.displayName)==null?void 0:ne.toLowerCase().includes(x)):!0}).sort((P,U)=>{const G=(P.subcategory||"").toLowerCase(),ce=(U.subcategory||"").toLowerCase();return G!==ce?G.localeCompare(ce):P.token.localeCompare(U.token)})},[D,b,z,L]),[q,fe]=u.useState(30),Ie=u.useMemo(()=>te.slice(0,q),[te,q]);u.useEffect(()=>{fe(30)},[b,z,L,R]),u.useEffect(()=>{W("All")},[b]);const ge=(x,{closeAfter:P=!0}={})=>{var qs,Xs;const U=h.current,G=`$${x}$`,ce=_||"",ne=(qs=v.current)==null?void 0:qs.start,Ne=(Xs=v.current)==null?void 0:Xs.end,je=(U==null?void 0:U.selectionStart)??(typeof ne=="number"?ne:ce.length),ve=(U==null?void 0:U.selectionEnd)??(typeof Ne=="number"?Ne:ce.length),Te=ce.slice(0,je),mt=ce.slice(ve),We=Te.match(/[^\s]$/),St=mt.match(/^[^\s]/),Kt=We&&We[0]!==","?", ":"",Kn=St&&St[0]!==","?", ":"",Mo=Te+Kt+G+Kn+mt;s==null||s(Mo);const Ys=(Te+Kt+G+Kn).length;v.current={start:Ys,end:Ys},P&&(k(!1),requestAnimationFrame(()=>{var Js;(Js=U==null?void 0:U.blur)==null||Js.call(U)}))},xe=x=>{const P=_||"",U=mr(P,x),G=U?U.wrapperStart:x.index,ce=U?U.wrapperEnd:x.index+x.length,ne=P.slice(0,G).replace(/[\s,]*$/,""),Ne=P.slice(ce).replace(/^[\s,]*/,""),je=ne?`${ne} ${Ne}`.trim():Ne.trim();s==null||s(je)},me=x=>{if(!x)return;const P=B.get(x.token.toLowerCase()),U=(P==null?void 0:P.displayName)||x.token,G=mr(_||"",x);T({tokenObj:x,displayName:U,weight:(G==null?void 0:G.weight)??1}),le(!0),requestAnimationFrame(()=>{var ce,ne;return(ne=(ce=h.current)==null?void 0:ce.blur)==null?void 0:ne.call(ce)})},we=u.useMemo(()=>(x,P)=>{var mt;if(x===P||x===null||P===null||!(M!=null&&M.length))return;const U=_||"",G=M.map(We=>{const St=mr(U,We),Kt=St?St.wrapperStart:We.index,Kn=St?St.wrapperEnd:We.index+We.length;return{start:Kt,end:Kn,text:U.slice(Kt,Kn)||`$${We.token}$`}}),ce=G.slice(0,-1).map((We,St)=>{const Kt=G[St+1];return U.slice(We.end,Kt.start)}),ne=G.length?U.slice(0,G[0].start):"",Ne=G.length?U.slice(G[G.length-1].end):"",je=[...G],[ve]=je.splice(x,1);je.splice(P,0,ve);let Te=ne+(((mt=je[0])==null?void 0:mt.text)||"");for(let We=1;We<je.length;We+=1)Te+=(ce[We-1]??", ")+je[We].text;Te+=Ne,s==null||s(Te)},[s,M,_]),Y=(x,P)=>{m(P),w.current=x.currentTarget,x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("text/plain",String(P)),requestAnimationFrame(()=>{w.current&&w.current.classList.add("is-dragging")})},Le=(x,P)=>{x.preventDefault(),x.dataTransfer.dropEffect="move",P!==f&&p(P)},Je=x=>{x!==f&&p(x)},Ze=x=>{S!==null&&x!==null&&S!==x&&we(S,x),m(null),p(null),w.current=null},ee=()=>{w.current&&w.current.classList.remove("is-dragging"),Ze(f)},pe=(x,P)=>{x.preventDefault(),Ze(P)},V=(x,P)=>{var ce,ne;if(!((ne=(ce=x.target)==null?void 0:ce.closest)==null?void 0:ne.call(ce,".token-chip-drag-handle")))return;const G=x.touches[0];N.current={idx:P,startX:G.clientX,startY:G.clientY,moved:!1}},K=x=>{if(!N.current)return;const P=x.touches[0],U=Math.abs(P.clientX-N.current.startX),G=Math.abs(P.clientY-N.current.startY);if(U<=10&&G<=10)return;N.current.moved=!0,m(N.current.idx),x.preventDefault();const ce=g.current,ne=ce?ce.querySelectorAll(".token-chip-draggable"):document.querySelectorAll(".token-chip-draggable"),Ne=P.clientX,je=P.clientY;for(let ve=0;ve<ne.length;ve++){const Te=ne[ve].getBoundingClientRect();if(Ne>=Te.left&&Ne<=Te.right&&je>=Te.top&&je<=Te.bottom){p(ve);break}}},re=()=>{var x;(x=N.current)!=null&&x.moved&&S!==null&&f!==null&&S!==f&&we(S,f),N.current=null,m(null),p(null)},ie={id:e,name:e,value:_,onChange:J,disabled:a,className:"ui-control ui-input pr-10 text-[13px] sm:text-sm",placeholder:"","aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0},be=()=>{k(!1),requestAnimationFrame(()=>{var x,P;(P=(x=h.current)==null?void 0:x.blur)==null||P.call(x)})},Ce=(()=>{const x=String(e||"").toLowerCase(),P=String(t||"").toLowerCase();return!!`${x} ${P}`.trim().includes("prompt")})(),Ee=()=>l.jsx(wt,{open:j,onClose:be,title:Ce?"Insert alias":"Aliases",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:be,children:"Done"}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Search"}),l.jsxs("div",{className:"composer-filters",children:[l.jsx("input",{ref:se,type:"text",value:L,onChange:x=>I(x.target.value),placeholder:"Search aliases",className:"composer-search ui-control ui-input","aria-label":"Search aliases"}),l.jsx(Ye,{value:b,onChange:$,className:"composer-subcategory-select","aria-label":"Filter by category",size:"sm",options:["All",...F.filter(x=>x!=="All")].map(x=>({value:x,label:x==="All"?"Category: All":cn(x)}))}),O.length>2?l.jsx(Ye,{value:z,onChange:W,className:"composer-subcategory-select",size:"sm",options:O.map(x=>({value:x,label:x==="All"?"All subcategories":Fn(x)}))}):null]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Results"}),l.jsx("div",{className:"composer-alias-list",children:te.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases found."}):l.jsxs(l.Fragment,{children:[Ie.map(x=>l.jsxs("button",{type:"button",onClick:()=>ge(x.token,{closeAfter:!Ce}),className:"composer-alias-item",children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:x.displayName||x.token}),x.category?l.jsx("span",{className:"composer-alias-category",children:cn(x.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",x.token,"$"]}),l.jsx("div",{className:"composer-alias-text",children:x.text})]},x.key)),q<te.length?l.jsxs("button",{type:"button",onClick:()=>fe(x=>Math.min(x+30,te.length)),className:"ui-button is-muted w-full",children:["Show more (",te.length-q," left)"]}):null]})})]})]})});return i?l.jsxs("div",{className:"relative space-y-2",ref:g,children:[y&&!Ce?l.jsxs("div",{className:"stringinput-toolbar",children:[l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>y(e),children:"Open composer"}),R.length?l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:Z,children:"Aliases"}):null,l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>X(!0),children:"Expand"})]}):null,l.jsx("textarea",{ref:h,...ie,rows:3,wrap:"soft",onKeyDown:H,className:ie.className+" resize-none min-h-[88px] max-h-[160px] leading-relaxed overflow-y-auto overflow-x-hidden break-words whitespace-pre-wrap",style:{whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"}}),y&&Ce?l.jsx("div",{className:"stringinput-underbar",children:l.jsxs("div",{className:"stringinput-underbar-actions",children:[l.jsx("button",{type:"button",className:"stringinput-action-link",onClick:()=>y(e),children:"Open composer"}),R.length?l.jsx("button",{type:"button",className:"stringinput-action-link",onClick:Z,children:"Insert alias"}):null]})}):null,l.jsx(wx,{open:he,onClose:()=>X(!1),title:t||e,value:_,onChange:s,description:n}),M.length?l.jsxs("div",{className:"stringinput-tokens",children:[l.jsxs("div",{className:"stringinput-tokens-label",children:["Active aliases ",l.jsx("span",{className:"stringinput-tokens-hint",children:"(drag to reorder)"})]}),l.jsx("div",{className:"stringinput-tokens-list",children:M.map((x,P)=>{var je;const U=B.get(x.token.toLowerCase()),G=(U==null?void 0:U.displayName)||x.token,ce=S===P,ne=f===P&&S!==null&&S!==P,Ne=((je=mr(_||"",x))==null?void 0:je.weight)??1;return l.jsxs("div",{className:`token-chip token-chip-draggable ${ce?"is-dragging":""} ${ne?"is-drop-target":""}`,title:`$${x.token}$`,role:"button",tabIndex:0,draggable:!0,onDragStart:ve=>Y(ve,P),onDragEnd:ee,onDragEnter:()=>Je(P),onDragOver:ve=>Le(ve,P),onDrop:ve=>pe(ve,P),onTouchStart:ve=>V(ve,P),onTouchMove:K,onTouchEnd:re,onClick:()=>{S===null&&me(x)},onKeyDown:ve=>{(ve.key==="Enter"||ve.key===" ")&&(ve.preventDefault(),me(x))},children:[l.jsx("span",{className:"token-chip-drag-handle","aria-hidden":"true",children:l.jsx(ji,{size:14})}),l.jsx("span",{className:"token-chip-label",children:G}),Math.abs(Ne-1)>1e-6?l.jsxs("span",{className:"token-chip-weight","aria-label":`Strength ${fn(Ne)}x`,children:["",fn(Ne)]}):null,l.jsx("button",{type:"button",className:"token-chip-remove",onClick:ve=>{ve.stopPropagation(),xe(x)},"aria-label":`Remove ${x.token}`,children:l.jsx(rn,{size:12})})]},`${x.token}-${x.index}`)})})]}):null,l.jsx(Ci,{open:ae,onClose:()=>le(!1),title:"Alias strength",tokenLabel:C?`${C.displayName}  $${(nt=C.tokenObj)==null?void 0:nt.token}$`:"",weight:(C==null?void 0:C.weight)??1,onApply:x=>{C!=null&&C.tokenObj&&(s==null||s(yl(_||"",C.tokenObj,x)))},onRemoveWeight:()=>{C!=null&&C.tokenObj&&(s==null||s(yl(_||"",C.tokenObj,null)))},onDeleteToken:()=>{C!=null&&C.tokenObj&&xe(C.tokenObj)}}),j?l.jsx(Ee,{}):null]}):l.jsxs("div",{className:"relative space-y-2",ref:g,children:[l.jsx("input",{...ie,type:"text",inputMode:"text",autoComplete:"off",onKeyDown:H,className:ie.className+" min-h-[44px]",ref:h}),M.length?l.jsxs("div",{className:"stringinput-tokens",children:[l.jsxs("div",{className:"stringinput-tokens-label",children:["Active aliases ",l.jsx("span",{className:"stringinput-tokens-hint",children:"(drag to reorder)"})]}),l.jsx("div",{className:"stringinput-tokens-list",children:M.map((x,P)=>{var je;const U=B.get(x.token.toLowerCase()),G=(U==null?void 0:U.displayName)||x.token,ce=S===P,ne=f===P&&S!==null&&S!==P,Ne=((je=mr(_||"",x))==null?void 0:je.weight)??1;return l.jsxs("div",{className:`token-chip token-chip-draggable ${ce?"is-dragging":""} ${ne?"is-drop-target":""}`,title:`$${x.token}$`,onClick:()=>{S===null&&me(x)},role:"button",tabIndex:0,draggable:!0,onDragStart:ve=>Y(ve,P),onDragEnd:ee,onDragEnter:()=>Je(P),onDragOver:ve=>Le(ve,P),onDrop:ve=>pe(ve,P),onTouchStart:ve=>V(ve,P),onTouchMove:K,onTouchEnd:re,onKeyDown:ve=>{(ve.key==="Enter"||ve.key===" ")&&(ve.preventDefault(),me(x))},children:[l.jsx("span",{className:"token-chip-drag-handle","aria-hidden":"true",children:l.jsx(ji,{size:14})}),l.jsx("span",{className:"token-chip-label",children:G}),Math.abs(Ne-1)>1e-6?l.jsxs("span",{className:"token-chip-weight","aria-label":`Strength ${fn(Ne)}x`,children:["",fn(Ne)]}):null,l.jsx("button",{type:"button",className:"token-chip-remove",onClick:ve=>{ve.stopPropagation(),xe(x)},"aria-label":`Remove ${x.token}`,children:l.jsx(rn,{size:12})})]},`${x.token}-${x.index}`)})})]}):null,l.jsx(Ci,{open:ae,onClose:()=>le(!1),title:"Alias strength",tokenLabel:C?`${C.displayName}  $${(jt=C.tokenObj)==null?void 0:jt.token}$`:"",weight:(C==null?void 0:C.weight)??1,onApply:x=>{C!=null&&C.tokenObj&&(s==null||s(yl(_||"",C.tokenObj,x)))},onRemoveWeight:()=>{C!=null&&C.tokenObj&&(s==null||s(yl(_||"",C.tokenObj,null)))},onDeleteToken:()=>{C!=null&&C.tokenObj&&xe(C.tokenObj)}}),R.length?l.jsx("button",{type:"button",className:"stringinput-trailing ui-button is-ghost is-compact",onClick:()=>y?y(e):Z(),title:y?"Open prompt composer":"Insert alias","aria-label":y?"Open prompt composer":"Insert alias",children:y?l.jsx(Lc,{size:16}):l.jsx(Bn,{size:16})}):null,l.jsx(Ee,{})]})}const wd=u.memo(bx),jd=e=>e==null?void 0:String(e).trim().replace(/[^A-Za-z0-9_-]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")||void 0;function Ex({name:e,label:t,description:n,value:r,onChange:s,disabled:o=!1,min:a,max:i,step:c,isFloat:d=!1,inputId:y}){const h=c??(d?.01:1),g=y??jd(e),v=S=>{if(S===""||S===null||S===void 0)return"";const m=d?parseFloat(S):parseInt(S,10);return Number.isNaN(m)?"":m},w=S=>{const m=S.target.value,f=v(m);s==null||s(f)},N=S=>{if(S.key!=="ArrowUp"&&S.key!=="ArrowDown")return;S.preventDefault();const m=typeof r=="number"?r:v(String(r??""))||0,f=S.key==="ArrowUp"?h:-h;let p=m+f;if(typeof a=="number"&&(p=Math.max(a,p)),typeof i=="number"&&(p=Math.min(i,p)),d){const j=typeof h=="number"?(String(h).split(".")[1]||"").length:2;p=parseFloat(p.toFixed(Math.max(j,2)))}s==null||s(p)};return l.jsxs("div",{className:"w-full flex items-center gap-2",children:[l.jsx("input",{id:g,name:e,type:"number",inputMode:d?"decimal":"numeric",value:r??"",onChange:w,onKeyDown:N,disabled:o,min:a,max:i,step:h,"aria-label":t||e,"aria-describedby":n?`${g||jd(e)||e}-description`:void 0,className:"ui-control ui-input"}),typeof a=="number"||typeof i=="number"?l.jsxs("div",{className:"hidden sm:flex flex-col text-[10px] text-[#6A6FA8] text-right leading-tight",children:[typeof a=="number"&&l.jsxs("span",{children:["min ",a]}),typeof i=="number"&&l.jsxs("span",{children:["max ",i]})]}):null]})}const xs=u.memo(Ex);function Lx({name:e,label:t,description:n,value:r,onChange:s,disabled:o=!1}){const a=!!r,i=()=>{o||s==null||s(!a)},c=d=>{(d.key===" "||d.key==="Enter")&&(d.preventDefault(),i())};return l.jsxs("button",{id:e,type:"button",role:"switch","aria-checked":a,"aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0,onClick:i,onKeyDown:c,disabled:o,className:`ui-switch ${a?"is-on":""}`,children:[l.jsx("span",{className:"ui-switch-track",children:l.jsx("span",{className:"ui-switch-knob"})}),l.jsx("span",{className:"ui-switch-state",children:a?"On":"Off"})]})}const Sd=u.memo(Lx),Px=/\.(safetensors|ckpt|pt|pth)$/i;function Ic(e){if(typeof e!="string")return!1;const t=e.trim();if(!t)return!1;const r=t.replace(/\\/g,"/").split("/").filter(Boolean).pop()||"";return Px.test(r)}function Pm(e){if(typeof e!="string")return{folder:"",base:""};const n=e.trim().replace(/\\/g,"/").split("/").filter(Boolean),s=(n.pop()||"").replace(/\.[^.]+$/,"");return{folder:n.join(" ").trim(),base:s}}function bi(e){if(!Ic(e))return e;const{folder:t,base:n}=Pm(e);if(!n)return e;if(!t)return n;const r=t.split(/\s+/).filter(Boolean),s=r[r.length-1]||"";if(s&&n.toLowerCase().startsWith(s.toLowerCase())){const o=n.slice(s.length);return o?`${t}${o}`:t}return`${t} ${n}`.trim()}function _x(e,t){try{if(typeof window>"u"||!e)return null;const n=e.getItem(t);return n?JSON.parse(n):null}catch{return null}}function Ao(e,t,n){try{if(typeof window>"u"||!e)return;e.setItem(t,JSON.stringify(n))}catch{}}function Gt(){try{return typeof window>"u"?null:window.sessionStorage||null}catch{return null}}function Qr(){try{return typeof window>"u"?null:window.localStorage||null}catch{return null}}const _m=750,mn=new Map,Xt=new Map,Jt=new Map,Ar=new Map,Zt=new Map,en=new Map;function Rm(e){var t;if(Xt.has(e)&&(clearTimeout(Xt.get(e)),Xt.delete(e)),Jt.has(e)){try{(t=window.cancelIdleCallback)==null||t.call(window,Jt.get(e))}catch{}Jt.delete(e)}mn.has(e)&&(Ao(Gt(),e,mn.get(e)),mn.delete(e))}function Rx(e){var r;if(Xt.has(e)&&(clearTimeout(Xt.get(e)),Xt.delete(e)),Jt.has(e)){try{(r=window.cancelIdleCallback)==null||r.call(window,Jt.get(e))}catch{}Jt.delete(e)}const t=()=>{mn.has(e)&&(Ao(Gt(),e,mn.get(e)),mn.delete(e))},n=setTimeout(()=>{Xt.delete(e);try{if(typeof window<"u"&&typeof window.requestIdleCallback=="function"){const s=window.requestIdleCallback(()=>{Jt.delete(e),t()},{timeout:2500});Jt.set(e,s);return}}catch{}t()},_m);Xt.set(e,n)}function Ix(){Array.from(Xt.values()).forEach(e=>clearTimeout(e)),Xt.clear(),Array.from(Jt.values()).forEach(e=>{var t;try{(t=window.cancelIdleCallback)==null||t.call(window,e)}catch{}}),Jt.clear(),Array.from(mn.entries()).forEach(([e,t])=>{Ao(Gt(),e,t)}),mn.clear(),Array.from(Zt.values()).forEach(e=>clearTimeout(e)),Zt.clear(),Array.from(en.values()).forEach(e=>{var t;try{(t=window.cancelIdleCallback)==null||t.call(window,e)}catch{}}),en.clear(),Array.from(Ar.entries()).forEach(([e,t])=>{try{const n=Gt();n&&n.setItem(e,t)}catch{}}),Ar.clear()}if(typeof window<"u"&&!window.__cozygenFormStateFlush){const e=()=>Ix();window.addEventListener("beforeunload",e),window.addEventListener("pagehide",e),window.__cozygenFormStateFlush=!0}function zx(e){var r;if(!e)return{};const t=`${e}_formData`,n=_x(Gt(),t);if(n&&typeof n=="object")return n;try{const s=Qr();(r=s==null?void 0:s.removeItem)==null||r.call(s,t)}catch{}return{}}function io(e,t,n={}){var o;if(!e)return;const{immediate:r=!1}=n||{},s=`${e}_formData`;if(r){Rm(s),Ao(Gt(),s,t||{});try{const a=Qr();(o=a==null?void 0:a.removeItem)==null||o.call(a,s)}catch{}return}mn.set(s,t||{}),Rx(s)}function Tx(e){e&&Rm(`${e}_formData`)}function Ax(e,t,n=_m){var o;if(Ar.set(e,t),Zt.has(e)&&(clearTimeout(Zt.get(e)),Zt.delete(e)),en.has(e)){try{(o=window.cancelIdleCallback)==null||o.call(window,en.get(e))}catch{}en.delete(e)}const r=()=>{const a=Ar.get(e);Ar.delete(e);try{const i=Gt();i&&i.setItem(e,a)}catch{}},s=setTimeout(()=>{Zt.delete(e);try{if(typeof window<"u"&&typeof window.requestIdleCallback=="function"){const a=window.requestIdleCallback(()=>{en.delete(e),r()},{timeout:2e3});en.set(e,a);return}}catch{}r()},n);Zt.set(e,s)}function $x(e,t={}){var s,o;const{immediate:n=!1}=t||{},r="cozygen_last_param";if(n){if(Zt.has(r)&&(clearTimeout(Zt.get(r)),Zt.delete(r)),en.has(r)){try{(s=window.cancelIdleCallback)==null||s.call(window,en.get(r))}catch{}en.delete(r)}Ar.delete(r);try{const a=Gt();a&&a.setItem(r,e||"");const i=Qr();(o=i==null?void 0:i.removeItem)==null||o.call(i,r)}catch{}return}Ax(r,e||"")}function Mx(){var t,n;const e="cozygen_last_param";try{const r=Gt(),s=((t=r==null?void 0:r.getItem)==null?void 0:t.call(r,e))||"";if(s)return s;const o=Qr();(n=o==null?void 0:o.removeItem)==null||n.call(o,e)}catch{}return""}function Im(e,t){const n=e?String(e):"global",r=t?String(t):"";return`cozygen_dropdown_folder:${n}:${r}`}function Nd(e,t){var r,s;const n=Im(e,t);try{const o=Gt(),a=((r=o==null?void 0:o.getItem)==null?void 0:r.call(o,n))||"";if(a)return a;const i=Qr();(s=i==null?void 0:i.removeItem)==null||s.call(i,n)}catch{}return""}function Ox(e,t,n){var s;const r=Im(e,t);try{const o=Gt();o&&o.setItem(r,String(n||""));const a=Qr();(s=a==null?void 0:a.removeItem)==null||s.call(a,r)}catch{}}function Fx({workflowName:e,name:t,label:n,description:r,value:s,onChange:o,disabled:a=!1,options:i=[]}){const c=s??"",[d,y]=u.useState(()=>Nd(e,t)||"All");u.useEffect(()=>{const m=Nd(e,t);y(m||"All")},[e,t]);const h=u.useMemo(()=>(i||[]).map(m=>typeof m=="string"?{value:m,label:m}:{value:m.value??m.name??"",label:m.label??m.name??String(m.value??"")}),[i]),g=(m="")=>{if(typeof m!="string")return"Other";if(!m.includes("/"))return"root";const f=m.split("/");return f.slice(0,f.length-1).join("/")||"root"},v=u.useMemo(()=>{const m=new Set(["All"]);return h.forEach(f=>m.add(g(f.label))),Array.from(m).sort((f,p)=>f.localeCompare(p))},[h]);u.useEffect(()=>{v.includes(d)||y("All")},[v,d]),u.useEffect(()=>{Ox(e,t,d)},[e,t,d]);const w=u.useMemo(()=>{const m=f=>f.replace(/\.[^.]+$/,"");return h.filter(f=>{const p=g(f.label);return d==="All"||p===d}).map(f=>{const p=f.label||"";if(Ic(p)){const{base:L}=Pm(p),I=bi(p);return{...f,label:d==="All"?I:L||I}}if(d==="All")return f;const j=p.split("/"),k=m(j[j.length-1]||p);return{...f,label:k}}).sort((f,p)=>f.label.localeCompare(p.label))},[h,d]),N=u.useMemo(()=>c===""||c===null||c===void 0?!0:w.some(m=>String(m.value)===String(c)),[w,c]),S=m=>{const f=m&&m.target?m.target.value:m;o==null||o(f)};return l.jsxs("div",{className:"w-full space-y-2",children:[l.jsx("div",{className:"relative w-full",children:l.jsx(Ye,{value:d,onChange:y,disabled:a,"aria-label":`Choose folder for ${n||t}`,size:"sm",options:v.map(m=>({value:m,label:m}))})}),l.jsx("div",{className:"relative w-full",children:l.jsx(Ye,{id:t,name:t,value:c,onChange:S,disabled:a,"aria-label":n||t,"aria-describedby":r?`${t}-description`:void 0,placeholder:w.length>0&&(c===void 0||c==="")?"Select...":void 0,emptyLabel:"No matches",options:[...!N&&c!==""?[{value:c,label:bi(String(c))}]:[],...w]},`${t||"field"}:${d}`)})]})}const Ei=u.memo(Fx);function kd(e=[]){return e.map(t=>typeof t=="string"?{value:t,label:t}:{value:t.value??t.name??"",label:t.label??t.name??String(t.value??"")})}function Cd(e,t){if(!e)return null;const n=String(e);if(t==="high"){const r=n.match(/(.+)-high(\.[^.]*)?$/i);return r?r[1]:null}if(t==="low"){const r=n.match(/(.+)-low(\.[^.]*)?$/i);return r?r[1]:null}return null}function Dx(e){return e?e.replace(/[_-]+/g," ").replace(/\s+/g," ").trim().replace(/^./,t=>t.toUpperCase()):""}const Ux=(...e)=>e.flat().map(n=>String(n??"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")).filter(Boolean).join("-")||"field";function Bx({name:e,label:t,description:n,highParam:r,lowParam:s,highChoices:o=[],lowChoices:a=[],formData:i={},onChangeParam:c,highStrengthParam:d,lowStrengthParam:y,strengthValue:h,onChangeStrength:g,highStrengthValue:v,lowStrengthValue:w,onChangeHighStrength:N,onChangeLowStrength:S,disabled:m=!1}){const f=u.useMemo(()=>kd(o),[o]),p=u.useMemo(()=>kd(a),[a]),j=u.useMemo(()=>{const F=new Map;p.forEach(M=>{const Z=Cd(M.value,"low");Z&&(F.has(Z)||F.set(Z,M))});const O=[];return f.forEach(M=>{const Z=Cd(M.value,"high");if(!Z)return;const te=F.get(Z);te&&O.push({base:Z,label:Dx(Z),highValue:M.value,lowValue:te.value})}),O.sort((M,Z)=>M.label.localeCompare(Z.label)),O},[f,p]),k=u.useMemo(()=>{const F=i[r],O=i[s];if(!F||!O)return"";const M=j.find(Z=>Z.highValue===F&&Z.lowValue===O);return M?M.base:""},[i,r,s,j]),L=d||y||`${e}_strength`,I=u.useMemo(()=>Ux(e||"lora",L||"strength"),[e,L]),b=!!(d||y),$=!!(d&&y),z=(F,O=1)=>typeof F=="number"?F:O,W=z(typeof h=="number"?h:typeof v=="number"?v:typeof w=="number"?w:void 0,1),de=z(typeof v=="number"?v:void 0,W),se=z(typeof w=="number"?w:void 0,$?W:de),he=$&&Math.abs(de-se)>1e-4,[X,ae]=u.useState(he);u.useEffect(()=>{ae(he)},[he,r,s]);const le=F=>{if(!c)return;const O=j.find(M=>M.base===F);O&&(c(r,O.highValue),c(s,O.lowValue))};if(j.length===0)return l.jsxs("div",{className:"text-[11px] text-[#9DA3FFCC]",children:["No matching ",l.jsx("span",{className:"font-semibold",children:"-high"})," /"," ",l.jsx("span",{className:"font-semibold",children:"-low"})," LoRA pairs found."]});const C=`${I}-linked`,T=`${I}-high`,_=`${I}-low`,R=$?"Linked":"Strength",D=$?"Applies to high + low":d||y||"",J=(F,O)=>{const M=Array.isArray(F)?F:[F];let Z=!1;M.forEach(te=>{if(te==="high"&&typeof N=="function"){N(O);return}if(te==="low"&&typeof S=="function"){S(O);return}typeof g=="function"&&!Z&&(g(O),Z=!0)})},H=F=>{(d||!d&&!y)&&J("high",F),y&&J("low",F)},B=()=>{$&&ae(F=>{const O=!F;return O||H(typeof de=="number"?de:typeof se=="number"?se:W),O})};return l.jsxs("div",{className:"space-y-2",children:[l.jsx(Ei,{name:`${e}_pair`,label:t,description:n,value:k||"",onChange:le,disabled:m,options:j.map(F=>({value:F.base,label:F.label}))}),b&&l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[10px] uppercase tracking-[0.16em] text-[#9DA3FFCC]",children:"Strength"}),$&&l.jsx("button",{type:"button",className:"text-[10px] font-semibold tracking-[0.12em] uppercase text-[#E5E7FF]",onClick:B,disabled:m,children:X?"Link values":"Split values"})]}),X&&$?l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-3",children:[l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:T,className:"lora-strength-label is-high",children:[l.jsx("span",{className:"lora-strength-label-pill",children:"High"}),l.jsxs("span",{className:"lora-strength-label-text",children:["High strength",d&&l.jsx("span",{className:"lora-strength-label-hint",children:d})]})]}),l.jsx(xs,{name:`${L}_high`,label:"High strength",description:"",value:de,onChange:F=>J("high",F),disabled:m,isFloat:!0,min:0,max:2,step:.05,inputId:T})]}),l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:_,className:"lora-strength-label is-low",children:[l.jsx("span",{className:"lora-strength-label-pill",children:"Low"}),l.jsxs("span",{className:"lora-strength-label-text",children:["Low strength",y&&l.jsx("span",{className:"lora-strength-label-hint",children:y})]})]}),l.jsx(xs,{name:`${L}_low`,label:"Low strength",description:"",value:se,onChange:F=>J("low",F),disabled:m,isFloat:!0,min:0,max:2,step:.05,inputId:_})]})]}):l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:C,className:"lora-strength-label is-linked",children:[l.jsx("span",{className:"lora-strength-label-pill",children:R}),l.jsxs("span",{className:"lora-strength-label-text",children:["LoRA strength",D&&l.jsx("span",{className:"lora-strength-label-hint",children:D})]})]}),l.jsx(xs,{name:L,label:"LoRA strength",description:"",value:W,onChange:H,disabled:m,isFloat:!0,min:0,max:2,step:.05,inputId:C})]})]})]})}function Wx(e,t){if(e.disabled!==t.disabled||e.name!==t.name||e.label!==t.label||e.description!==t.description||e.highParam!==t.highParam||e.lowParam!==t.lowParam||e.highStrengthParam!==t.highStrengthParam||e.lowStrengthParam!==t.lowStrengthParam||e.strengthValue!==t.strengthValue||e.highStrengthValue!==t.highStrengthValue||e.lowStrengthValue!==t.lowStrengthValue||e.highChoices!==t.highChoices||e.lowChoices!==t.lowChoices||e.onChangeParam!==t.onChangeParam||e.onChangeStrength!==t.onChangeStrength||e.onChangeHighStrength!==t.onChangeHighStrength||e.onChangeLowStrength!==t.onChangeLowStrength)return!1;const n=e.formData||{},r=t.formData||{};return!(n[e.highParam]!==r[t.highParam]||n[e.lowParam]!==r[t.lowParam])}const bd=u.memo(Bx,Wx);function Vx({id:e,label:t,description:n,preview:r,expanded:s=!1,onToggle:o,children:a,trailing:i,className:c=""}){const d=typeof o=="function",y=e?`${e}-description`:void 0,h=e?`${e}-panel`:void 0,g=typeof t=="string"?t.trim().replace(/\s+/gu," ").replace(/:\s*$/u,""):t,v=typeof n=="string"?n.trim().replace(/\s+/gu," "):n,w=typeof r=="string"||typeof r=="number"?String(r):void 0,N=d?"button":"div",S=d?{type:"button",onClick:o,"aria-expanded":s,"aria-controls":h,"aria-describedby":v?y:void 0}:{};return l.jsxs("div",{className:["field-row",c].filter(Boolean).join(" "),children:[l.jsxs(N,{...S,className:["field-row-head",d?"is-collapsible":"is-static",s?"is-expanded":""].filter(Boolean).join(" "),children:[l.jsxs("div",{className:"field-row-main",children:[l.jsx("div",{className:"field-row-label",children:g}),v?l.jsx("div",{id:y,className:"field-row-description",children:v}):null]}),l.jsxs("div",{className:"field-row-trailing",children:[i?l.jsx("div",{className:"field-row-trailing-control",children:i}):null,r?l.jsx("div",{className:"field-row-preview",title:w,children:r}):null,d?l.jsx("div",{className:"field-row-chevron","aria-hidden":"true",children:l.jsx(zo,{size:16})}):null]})]}),d&&s?l.jsx("div",{id:h,className:"field-row-body",children:a}):null]})}const ha=u.memo(Vx),Hx=16,Gx=[" - "," ","-","_"],zm=e=>[...new Set(e.filter(Boolean))],co=(e,t)=>{const n=String(e||"").trim(),r=Gx.map(s=>`${n}${s}${t}`);return r.push(`${n}${t}`),zm(r)},Ed=(e,t)=>{const n=co(`${e} Strength`,t),r=co(e,t).map(s=>`${s} Strength`);return zm([...n,...r])},Ld=e=>String(e||"").toLowerCase().replace(/[\s_-]+/g,""),xl=(e,t=[])=>{if(!e)return null;const n=Array.isArray(t)?t:[t];for(const s of n){if(!s)continue;const o=e.get(s);if(o)return{name:s,input:o}}const r=new Map;n.forEach(s=>{s&&r.set(Ld(s),s)});for(const[s,o]of e.entries()){const a=Ld(s);if(r.has(a))return{name:s,input:o}}return null},Kx=Array.from({length:Hx},(e,t)=>{const n=t+1,r=co("Lora High",n),s=co("Lora Low",n),o=Ed("Lora High",n),a=Ed("Lora Low",n);return{id:`video_lora_${n}`,label:`Video LoRA ${n}`,highParam:r[0],lowParam:s[0],highParamAliases:r,lowParamAliases:s,highStrengthParam:o[0],lowStrengthParam:a[0],highStrengthParamAliases:o,lowStrengthParamAliases:a}});function Qx(e){var r,s;const t=((r=e==null?void 0:e.inputs)==null?void 0:r.param_type)||((s=e==null?void 0:e.inputs)==null?void 0:s.Param_type),n=String(t||"STRING").toUpperCase();return["NUMBER","FLOAT","INT"].includes(n)?"NUMBER":["BOOLEAN","BOOL"].includes(n)?"BOOLEAN":["DROPDOWN","CHOICE","SELECT"].includes(n)?"DROPDOWN":"STRING"}function Yx(e){const t=(e==null?void 0:e.inputs)||{};return t.label||t.display_name||t.title||t.param_name||(e==null?void 0:e.title)||(e==null?void 0:e.class_type)||"Parameter"}function qx(e){const t=(e==null?void 0:e.inputs)||{};return t.description||t.help||t.tooltip||t.doc||""}function hr(e){const t=(e==null?void 0:e.inputs)||{};return t.param_name||t.name||t.key||t.id||`param_${(e==null?void 0:e.id)||"unknown"}`}function cs(e){const t=(e==null?void 0:e.inputs)||{},n=t.choices||t.options||[],r=t.default_value??t.value??t.default_choice??(n&&n.length?n[0]:"")??"";return{paramName:hr(e),label:Yx(e),description:qx(e),paramType:Qx(e),multiline:!!t.multiline,min:typeof t.min=="number"?t.min:void 0,max:typeof t.max=="number"?t.max:void 0,step:typeof t.step=="number"?t.step:void 0,choices:n,defaultValue:r}}function Xx({inputs:e=[],formData:t={},onFormChange:n,workflowName:r,onParamEdited:s,onSpotlight:o,compactControls:a=!0,collapseAllKey:i=0,collapseAllCollapsed:c=!0,lastEditedParam:d="",spotlightName:y="",onCloseSpotlight:h=()=>{},onVisibleParamsChange:g=()=>{},aliasOptions:v=[],aliasCatalog:w=[],onOpenComposer:N}){const[S,m]=u.useState({}),[f,p]=u.useState(0),j=u.useRef(t);u.useEffect(()=>{j.current=t},[t]);const k=u.useCallback((T,_)=>{if((T==null?void 0:T.paramType)==="BOOLEAN")return _?"On":"Off";if(_==null||_==="")return"Empty";if(typeof _=="string"){const R=_.trim();if(!R)return"Empty";const D=240,J=140,H=R.length>D?R.slice(0,D):R,F=/[\r\n\t]/.test(H)||/\s{2,}/u.test(H)?H.replace(/\s+/gu," ").trim():H;if(F.length>J)return`${F.slice(0,J)}`;const O=bi(F);return R.length>D?`${O}`:O}return String(_)},[]),L=u.useCallback((T,_)=>{!n||!T||(n(T,_),s==null||s(T),m(R=>(R==null?void 0:R[T])===!1?R:{...R,[T]:!1}))},[n,s]),I=u.useCallback(T=>{T&&m(_=>({..._,[T]:!(_!=null&&_[T])}))},[]),b=u.useMemo(()=>e||[],[e]),$=u.useMemo(()=>{const T=new Map;return(b||[]).forEach(_=>{const R=hr(_);R&&T.set(R,D=>L(R,D))}),T},[L,b]),z=u.useMemo(()=>{const T=new Map;return(b||[]).forEach(_=>{const R=hr(_);R&&T.set(R,(D,J)=>{var H,B;L(R,D),(B=(H=J==null?void 0:J.target)==null?void 0:H.blur)==null||B.call(H),y===R&&(h==null||h())})}),T},[L,h,y,b]),W=u.useMemo(()=>{const T=new Map;return(b||[]).forEach(_=>{const R=hr(_);R&&T.set(R,()=>I(R))}),T},[I,b]);u.useEffect(()=>{const T={};(e||[]).forEach(_=>{const R=hr(_);R&&(T[R]=c)}),d&&(T[d]=!1),m(T)},[i,c,e,d]);const de=u.useMemo(()=>{const T=new Map;return(e||[]).forEach(_=>{const R=hr(_);R&&T.set(R,_)}),T},[e]),se=u.useMemo(()=>{const T=[];return Kx.forEach(_=>{const R=xl(de,_.highParamAliases||_.highParam),D=xl(de,_.lowParamAliases||_.lowParam);if(!R||!D)return;const J=R.input,H=D.input,B=cs(J),F=cs(H);if(B.paramType!=="DROPDOWN"||F.paramType!=="DROPDOWN")return;const O=B.choices||[],M=F.choices||[];if(!O.length||!M.length)return;const Z=xl(de,_.highStrengthParamAliases||_.highStrengthParam),te=xl(de,_.lowStrengthParamAliases||_.lowStrengthParam);T.push({..._,highParam:R.name,lowParam:D.name,highStrengthParam:Z==null?void 0:Z.name,lowStrengthParam:te==null?void 0:te.name,highInput:J,lowInput:H,highCfg:B,lowCfg:F})}),T},[de]),he=u.useMemo(()=>{const T=new Map;return se.forEach(_=>{T.set(_.highParam,_)}),T},[se]),X=u.useMemo(()=>{const T=new Set;return se.forEach(_=>{T.add(_.highParam),T.add(_.lowParam),_.highStrengthParam&&T.add(_.highStrengthParam),_.lowStrengthParam&&T.add(_.lowStrengthParam)}),T},[se]),ae=u.useMemo(()=>{const T=[];return(b||[]).forEach(_=>{const R=cs(_),D=R.paramName,J=he.get(D);if(J){T.push({name:D,label:J.label||R.label,description:R.description,render:H=>{const B=H||j.current||{},F=J.highStrengthParam?B[J.highStrengthParam]:void 0,O=J.lowStrengthParam?B[J.lowStrengthParam]:void 0,M=F??O??1;return l.jsx(bd,{name:J.id||J.highParam,label:J.label||R.label,highParam:J.highParam,lowParam:J.lowParam,highChoices:J.highCfg.choices,lowChoices:J.lowCfg.choices,formData:B,onChangeParam:L,highStrengthParam:J.highStrengthParam,lowStrengthParam:J.lowStrengthParam,strengthValue:M,highStrengthValue:F,lowStrengthValue:O,onChangeHighStrength:J.highStrengthParam?$.get(J.highStrengthParam):void 0,onChangeLowStrength:J.lowStrengthParam?$.get(J.lowStrengthParam):void 0,disabled:!1},`lora-${D}-${f}`)}});return}X.has(D)||T.push({name:D,label:R.label,description:R.description,render:H=>{const B=H||j.current||{},F={name:D,label:R.label,description:R.description,value:B[D],defaultValue:R.defaultValue,disabled:!1};return R.paramType==="NUMBER"?l.jsx(xs,{...F,onChange:$.get(D),min:R.min,max:R.max,step:R.step,isFloat:!0},`field-${D}-number-${f}`):R.paramType==="BOOLEAN"?l.jsx(Sd,{...F,onChange:$.get(D)},`field-${D}-bool-${f}`):R.paramType==="DROPDOWN"?l.jsx(Ei,{...F,workflowName:r,onChange:$.get(D),options:R.choices||[]},`field-${D}-dropdown-${f}`):l.jsx(wd,{...F,aliasOptions:v,aliasCatalog:w,onOpenComposer:N,onChange:$.get(D),onEnter:z.get(D),multiline:R.multiline},`field-${D}-string-${f}`)}})}),T},[b,he,X,f,r,v,w,N,L,$,z,y,h]),le=u.useMemo(()=>{const T=new Map;return ae.forEach(_=>T.set(_.name,_)),T},[ae]);u.useEffect(()=>{g==null||g(ae.map(T=>T.name))},[ae,g]);const C=u.useCallback(T=>{const _=ae.map(B=>B.name),R=le.get(T);if(!R)return;const D=_.indexOf(T),J=D>0?_[D-1]:null,H=D>=0&&D<_.length-1?_[D+1]:null;p(B=>B+1),o==null||o({name:T,label:R.label,description:R.description,render:B=>R.render(B||j.current),order:_,index:D>=0?D:0,total:_.length,onPrev:J?()=>C(J):null,onNext:H?()=>C(H):null})},[le,o,ae]);return l.jsx("div",{className:"settings-list",children:b.map(T=>{const _=cs(T),R=_.paramName,D=he.get(R);if(D){const{id:te,label:q,highParam:fe,lowParam:Ie,highStrengthParam:ge,lowStrengthParam:xe,highCfg:me,lowCfg:we}=D,Y=ge?t[ge]:void 0,Le=xe?t[xe]:void 0,Je=Y??Le??1,Ze=R?`param-${R}`:void 0,ee=a?S[R]??!0:!!S[R],pe=ee?k(_,[t[fe],t[Ie]].filter(Boolean).join("  ")):null,V=(K=t)=>{const re=ge?K==null?void 0:K[ge]:void 0,ie=xe?K==null?void 0:K[xe]:void 0,be=re??ie??Je;return l.jsx(bd,{name:te||fe,label:q||_.label,highParam:fe,lowParam:Ie,highChoices:me.choices,lowChoices:we.choices,formData:K,onChangeParam:L,highStrengthParam:ge,lowStrengthParam:xe,strengthValue:be,highStrengthValue:re,lowStrengthValue:ie,onChangeHighStrength:ge?$.get(ge):void 0,onChangeLowStrength:xe?$.get(xe):void 0,disabled:!1},`lora-${R}`)};return l.jsx("div",{id:Ze,"data-param-name":R,"data-param-label":q||_.label,"data-param-type":"lora_pair",className:"settings-row",children:l.jsx(ha,{id:R,label:q||_.label,description:_.description,preview:pe,expanded:!ee,onToggle:W.get(R),children:ee?null:V(t)})},`lora_pair_${te||fe}`)}if(X.has(R))return null;const J=t[R],B={name:R,label:_.label,description:_.description,value:J,disabled:!1,defaultValue:_.defaultValue},F=(te=t,q=!1)=>{const fe={...B,value:te==null?void 0:te[R]};return _.paramType==="NUMBER"?l.jsx(xs,{...fe,inputId:R,onChange:$.get(R),min:_.min,max:_.max,step:_.step,isFloat:!0},`field-${R}-number-${f}`):_.paramType==="BOOLEAN"?l.jsx(Sd,{...fe,onChange:$.get(R)},`field-${R}-bool-${f}`):_.paramType==="DROPDOWN"?l.jsx(Ei,{...fe,workflowName:r,onChange:$.get(R),options:_.choices||[]},`field-${R}-dropdown-${f}`):l.jsx(wd,{...fe,aliasOptions:v,aliasCatalog:w,onOpenComposer:N,onChange:$.get(R),onEnter:z.get(R),multiline:_.multiline||y===R||q},`field-${R}-string-${f}`)},O=R?`param-${R}`:void 0,M=a?S[R]??!0:!!S[R];if(_.paramType==="BOOLEAN")return l.jsx("div",{id:O,"data-param-name":R,"data-param-label":_.label,"data-param-type":"single",className:"settings-row",children:l.jsx(ha,{id:R,label:_.label,description:_.description,trailing:F(t,!0)})},R);const Z=M?k(_,J):null;return l.jsx("div",{id:O,"data-param-name":R,"data-param-label":_.label,"data-param-type":"single",className:"settings-row",children:l.jsx(ha,{id:R,label:_.label,description:_.description,preview:Z,expanded:!M,onToggle:W.get(R),children:M?null:F(t,!0)})},R)})})}function Jx(e){return(e||[]).map(t=>{var n;if(["CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput","CozyGenChoiceInput"].includes(t.class_type)){let r=t.class_type.replace("CozyGen","").replace("Input","").toUpperCase();return r==="CHOICE"&&(r="DROPDOWN"),{...t,inputs:{...t.inputs,param_type:r,Multiline:((n=t.inputs)==null?void 0:n.display_multiline)||!1}}}return t})}function Zx({workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,sectionRef:s,compactControls:o=!1,collapseAllState:a=null,onSpotlight:i,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:y,aliasOptions:h=[],aliasCatalog:g=[],onOpenComposer:v}){const w=u.useMemo(()=>Jx((t||[]).filter(N=>N.class_type!=="CozyGenImageInput")),[t]);return l.jsx("section",{className:"settings-surface scroll-mt-24",ref:s,children:l.jsx(Xx,{workflowName:e,inputs:w,formData:n,onFormChange:r,compactControls:o,collapseAllKey:(a==null?void 0:a.key)??0,collapseAllCollapsed:(a==null?void 0:a.collapsed)??!0,onSpotlight:i,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:y,aliasOptions:h,aliasCatalog:g,onOpenComposer:v})})}function ew({workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,parameterSectionRef:s,compactControls:o=!0,collapseAllState:a=null,onSpotlight:i,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:y,aliasOptions:h=[],aliasCatalog:g=[],onOpenComposer:v}){return l.jsx(Zx,{workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,sectionRef:s,compactControls:o,collapseAllState:a,onSpotlight:i,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:y,aliasOptions:h,aliasCatalog:g,onOpenComposer:v})}const Pd=u.forwardRef(function({title:t,kicker:n,meta:r,defaultOpen:s=!0,variant:o="card",className:a="",bodyClassName:i,children:c},d){const y=o==="bare",h=(y?["collapsible-section","collapsible-section--bare",a]:["ui-panel","collapsible-card","sectioned-card",a]).filter(Boolean).join(" "),g=(y?["collapsible-section-body",i||"space-y-4"]:["collapsible-card-body",i||"space-y-4"]).filter(Boolean).join(" "),v=r!=null?l.jsx("div",{className:"collapsible-card-summary-meta",children:r}):null;return l.jsxs("details",{ref:d,className:h,open:s,children:[l.jsxs("summary",{className:y?"collapsible-section-summary":"collapsible-card-summary",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[n?l.jsx("span",{className:"ui-kicker",children:n}):null,l.jsx("span",{className:"text-sm font-semibold tracking-wide",children:t})]}),v,y?l.jsx("span",{className:"collapsible-section-chevron","aria-hidden":"true",children:l.jsx(zo,{size:16})}):null]}),l.jsx("div",{className:g,children:c})]})});function _d(e){try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return""}}function tw({open:e,onClose:t,logs:n=[],onClear:r}){const s=u.useMemo(()=>(n||[]).map(o=>`[${_d(o.ts)}] ${String(o.level||"info").toUpperCase()} ${o.message}`).join(`
`),[n]);return l.jsx(wt,{open:e,onClose:t,title:"Run logs",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>{var o,a;try{(a=(o=navigator.clipboard)==null?void 0:o.writeText)==null||a.call(o,s||"")}catch{}},children:"Copy"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:r,children:"Clear"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Close"})]}),children:l.jsx("pre",{className:"runlog-pre",children:n!=null&&n.length?n.map((o,a)=>l.jsxs("div",{className:`runlog-line is-${o.level||"info"}`,children:[l.jsx("span",{className:"runlog-ts",children:_d(o.ts)}),l.jsx("span",{className:"runlog-msg",children:o.message})]},`${o.ts}-${a}`)):"No logs yet."})})}const zt=u.forwardRef(function({as:t,href:n,variant:r,size:s="md",iconOnly:o=!1,active:a=!1,pressed:i,className:c="",type:d,...y},h){const g=t||(n?"a":"button"),v=s==="sm"?"is-compact":s==="xs"?"is-tiny":s==="icon"?"is-icon":"",w=r?`is-${r}`:"",m=["ui-button",v,w,o?"is-icon":"",a?"is-active":"",c].filter(Boolean).join(" "),f={ref:h,className:m,"aria-pressed":i,...y};return g==="button"?l.jsx("button",{...f,type:d||"button"}):l.jsx(g,{...f,href:n})}),nw="cozygen_field_order_v1";function rw(e,t){if(!e)return t;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:t}catch{return t}}function sw(){if(typeof window>"u")return{};try{return rw(window.localStorage.getItem(nw),{})}catch{return{}}}function lw(e){if(Array.isArray(e))return{order:e.filter(Boolean),hidden:{}};if(!e||typeof e!="object")return{order:[],hidden:{}};const t=Array.isArray(e.order)?e.order.filter(Boolean):[],n=e.hidden&&typeof e.hidden=="object"?e.hidden:{};return{order:t,hidden:n}}function ow(e){if(!e)return{order:[],hidden:{}};const n=sw()[e];return lw(n)}function aw(e,t){let n=Array.isArray(t)?t:[];if(!e||n.length===0)return n;const{order:r,hidden:s}=ow(e);if(r&&r.length){const o=new Map;n.forEach(i=>{var d;const c=(d=i==null?void 0:i.inputs)==null?void 0:d.param_name;c&&!o.has(c)&&o.set(c,i)});const a=[];r.forEach(i=>{const c=o.get(i);c&&(a.push(c),o.delete(i))}),n.forEach(i=>{var d;const c=(d=i==null?void 0:i.inputs)==null?void 0:d.param_name;if(!c){a.push(i);return}o.has(c)&&(a.push(i),o.delete(c))}),n=a}return n=n.filter(o=>{var i;const a=(i=o==null?void 0:o.inputs)==null?void 0:i.param_name;return a?!s[a]:!0}),n}function iw(){const[e,t]=u.useState([]),[n,r]=u.useState(null),[s,o]=u.useState(!0),[a,i]=u.useState(null);u.useEffect(()=>{let d=!1;async function y(){o(!0),i(null);try{const h=await Av();if(d)return;const g=(h==null?void 0:h.workflows)||[];t(g);let v=null;try{if(v=typeof window<"u"?sessionStorage.getItem("selectedWorkflow"):null,typeof window<"u")try{localStorage.removeItem("selectedWorkflow")}catch{}}catch{v=null}if(v&&g.includes(v))r(v);else if(g.length>0){r(g[0]);try{typeof window<"u"&&sessionStorage.setItem("selectedWorkflow",g[0])}catch{}}else r(null)}catch(h){if(d)return;console.error("Failed to load workflows",h),i(h)}finally{d||o(!1)}}return y(),()=>{d=!0}},[]);const c=u.useCallback(d=>{r(d);try{if(typeof window<"u"&&sessionStorage.setItem("selectedWorkflow",d),typeof window<"u")try{localStorage.removeItem("selectedWorkflow")}catch{}}catch{}},[]);return{workflows:e,selectedWorkflow:n,selectWorkflow:c,loading:s,error:a}}const cw={clip_name1:"clip",clip_name2:"clip",unet_name:"unet",vae_name:"vae",sampler_name:"sampler",scheduler:"scheduler"},uw=["CozyGenDynamicInput","CozyGenImageInput","CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput","CozyGenChoiceInput"];function dw(e){const[t,n]=u.useState(null),[r,s]=u.useState([]),[o,a]=u.useState({}),[i,c]=u.useState(!1),[d,y]=u.useState(null);u.useEffect(()=>{if(!e){n(null),s([]),a({});return}let w=!1;const N=new AbortController;async function S(){c(!0),y(null);try{typeof performance<"u"&&performance.mark&&performance.mark("cozygen:workflow:load")}catch{}try{const m=await $v(e,{signal:N.signal});if(w)return;for(const L in m){const I=m[L];I.class_type==="CozyGenImageInput"&&!I.inputs.param_name&&(I.inputs.param_name="Image Input"),m[L].id=L}n(m);const f=Object.values(m).filter(L=>uw.includes(L.class_type)),p=await Promise.all(f.map(async L=>{const I=L.class_type==="CozyGenDynamicInput"&&L.inputs.param_type==="DROPDOWN",b=L.class_type==="CozyGenChoiceInput";if(I||b){const $=L.inputs.param_name;let z=L.inputs.choice_type||L.properties&&L.properties.choice_type;if(!z&&I&&(z=cw[$]),z)try{const W=await Mv(z,{signal:N.signal,refresh:z==="loras"});L.inputs.choices=W.choices||[]}catch(W){(W==null?void 0:W.name)!=="AbortError"&&console.error(`Choices for ${$} failed`,W),L.inputs.choices=[]}}return L}));if(w)return;s(p);const j=zx(e),k={};p.forEach(L=>{const I=L.inputs.param_name;if(!I)return;if(j[I]!==void 0){k[I]=j[I];return}let b;if(["CozyGenDynamicInput","CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput"].includes(L.class_type)){if(b=L.inputs.default_value,L.class_type==="CozyGenIntInput"){const $=parseInt(b,10);b=Number.isNaN($)?0:$}else if(L.class_type==="CozyGenFloatInput"){const $=parseFloat(b);b=Number.isNaN($)?0:$}}else if(L.class_type==="CozyGenChoiceInput"){const $=L.inputs.choices||[];b=$.length?$[0]:""}else L.class_type,b="";k[I]=b}),a(k);try{typeof performance<"u"&&performance.measure&&(performance.mark("cozygen:workflow:ready"),performance.measure(`cozygen:workflow:ready:${e||"unknown"}`,"cozygen:workflow:load","cozygen:workflow:ready"))}catch{}}catch(m){if(w)return;console.error("Failed to load workflow",m),y(m),n(null),s([])}finally{w||c(!1)}}return S(),()=>{Tx(e),w=!0,N.abort()}},[e]);const h=u.useMemo(()=>r.filter(w=>w.class_type==="CozyGenImageInput"),[r]),g=h[0]||null,v=u.useCallback((w,N)=>{a(S=>{const m={...S,[w]:N};return e&&io(e,m),m})},[e]);return{workflowData:t,dynamicInputs:r,imageInputs:h,primaryImageInput:g,formData:o,setFormData:a,handleFormChange:v,loading:i,error:d}}const Rd="::";function ws(e){const t={};return Object.entries(e||{}).forEach(([n,r])=>{const s=String(n||"").trim();if(!s||typeof r!="string")return;const o=r.trim();o&&(t[s]=o)}),t}function zc(e){const t=new Map;return Object.entries(ws(e)).forEach(([n,r])=>{const s=n.toLowerCase();t.set(s,r),s.includes(Rd)&&t.set(s.replace(Rd,":"),r)}),t}function Tm(e,t){if(typeof e!="string"||!e.includes("$"))return e;const n=t instanceof Map?t:zc(t);return n.size?e.replace(/\$([a-z0-9_:-]+)\$/gi,(r,s)=>{const o=n.get(s.toLowerCase());return typeof o=="string"?o:r}):e}function fw(e,t){const n=t instanceof Map?t:zc(t);if(!n.size||!e||typeof e!="object")return e;let r=!1;const s={};return Object.entries(e).forEach(([o,a])=>{if(typeof a=="string"){const i=Tm(a,n);s[o]=i,i!==a&&(r=!0)}else s[o]=a}),r?s:e}function pw(e){return e?JSON.parse(JSON.stringify(e)):{}}function mw(e,t,n){const r=pw(e),s={...n||{}};if(!t||!Array.isArray(t))return{workflow:r,formData:s};for(const o of t){if(!o||!o.id||!o.inputs||!r[o.id])continue;const a=o.inputs.param_name;if(!a||o.class_type==="CozyGenImageInput")continue;let i=s[a];const c=r[o.id];if(!c||!c.inputs)continue;const d=o.class_type;i===void 0&&(d==="CozyGenChoiceInput"?i=o.inputs.value??o.inputs.default_choice??(o.inputs.choices&&o.inputs.choices[0])??"":i=o.inputs.default_value),i===void 0&&(i=""),s[a]=i,d==="CozyGenFloatInput"||d==="CozyGenIntInput"||d==="CozyGenStringInput"||d==="CozyGenDynamicInput"?c.inputs.default_value=i:d==="CozyGenChoiceInput"&&(c.inputs.value=i)}return{workflow:r,formData:s}}function hw({selectedWorkflow:e,workflowData:t,dynamicInputs:n,imageInputs:r,formData:s,setFormData:o,promptAliases:a=null}){const[i,c]=u.useState(!1),[d,y]=u.useState(!1),[h,g]=u.useState(0),[v,w]=u.useState(0),[N,S]=u.useState("Idle"),[m,f]=u.useState("idle"),[p,j]=u.useState([]),k=u.useRef({ts:0,value:0,max:0}),L=u.useRef(null),I=u.useRef(t),b=u.useRef(s),$=u.useRef(!1),z=u.useRef(0),W=u.useRef(0),de=u.useRef("idle"),se=u.useRef(null),he=u.useRef(null);u.useEffect(()=>{I.current=t},[t]),u.useEffect(()=>{$.current=d},[d]),u.useEffect(()=>{z.current=h},[h]),u.useEffect(()=>{W.current=v},[v]),u.useEffect(()=>{de.current=m},[m]),u.useEffect(()=>{b.current=s},[s]);const X=()=>{se.current&&(clearTimeout(se.current),se.current=null)},ae=()=>{he.current&&(clearTimeout(he.current),he.current=null)},le=u.useCallback((H,B,F=null)=>{const O={ts:Date.now(),level:H||"info",message:String(B||""),extra:F||null};j(M=>{const Z=[...M||[],O];return Z.length>250?Z.slice(Z.length-250):Z})},[]),C=u.useCallback(()=>j([]),[]),T=()=>{if(!(typeof window>"u"||typeof window.dispatchEvent!="function"))try{window.dispatchEvent(new CustomEvent("cozygen:queue-finished"))}catch{}},_=()=>{ae(),he.current=setTimeout(()=>{$.current||(f("idle"),S("Idle"),g(0),w(0))},8e3)},R=u.useCallback(()=>{X(),c(!1),y(!1),g(0),w(0),S("Finished"),f("finished"),le("success","Finished"),_(),T()},[le]),D=u.useCallback((H="Error")=>{X(),c(!1),y(!1),S(H),f("error"),le("error",H||"Error"),_()},[le]);u.useEffect(()=>{X(),!(!d||!v||v<=0||h<v)&&(se.current=setTimeout(()=>{const H=$.current,B=z.current,F=W.current,O=de.current;H&&F>0&&B>=F&&O!=="finished"&&O!=="error"&&R()},800))},[d,h,v,R]),u.useEffect(()=>{const H=()=>{const B=window.location.protocol==="https:"?"wss":"ws",F=window.location.host,O=bc(),M=`${B}://${F}/ws${O?`?token=${encodeURIComponent(O)}`:""}`,Z=new WebSocket(M);L.current=Z,Z.onmessage=te=>{var Ie,ge,xe;if(typeof te.data!="string")return;let q;try{q=JSON.parse(te.data)}catch{return}const fe=q.type;if(fe==="cozygen_batch_ready"){R();return}if(fe==="execution_success"||fe==="execution_finished"){$.current&&R();return}if(fe==="execution_error"||fe==="execution_interrupted"){le("error","Execution error"),D("Execution error");return}if(fe==="status"){const me=q.data||{},we=me.status||me,Y=we.exec_info||me.exec_info||we;if(Y&&$.current){const Le=Y.queue_remaining??Y.queue_pending??Y.queue_remaining_items??0;(Y.queue_running??Y.running??0)===0&&Le===0&&R()}return}if(fe==="executing"){ae(),f("running");const me=(Ie=q.data)==null?void 0:Ie.node,we=I.current;if(me&&we&&we[me]){const Y=we[me],Le=Y.title||Y.class_type||"Node";le("info",`Executing: ${Le}`,{nodeId:me}),S(`Executing: ${Le}`)}else le("info","Executing"),S("Executing");return}if(fe==="progress"){const me=((ge=q.data)==null?void 0:ge.value)??0,we=((xe=q.data)==null?void 0:xe.max)??0;g(me),w(we);const Y=Date.now(),Le=k.current;Y-Le.ts>2500&&(me!==Le.value||we!==Le.max)&&we>0&&(k.current={ts:Y,value:me,max:we},le("info",`Progress: ${me}/${we}`));return}},Z.onclose=()=>{setTimeout(H,1e3)}};return H(),()=>{X(),ae(),L.current&&(L.current.onclose=null,L.current.close())}},[le,D,R]);const J=u.useCallback(async(H={})=>{if(!t)return;const{overrides:B=null,persistFormState:F=!0}=H||{};X(),ae(),c(!0),y(!0),S("Queuing prompt"),f("queued"),g(0),w(0),le("info","Queuing prompt",{workflow:e||""});const O=b.current||{},M=B?{...O,...B||{}}:O,Z=fw(M,a||{}),{workflow:te,formData:q}=mw(t,n||[],Z||{}),fe={...q,...M};F&&e&&io(e,fe),F&&o(fe);const Ie=r||[];for(const ge of Ie){if(!ge||!ge.id||!ge.inputs)continue;const xe=ge.inputs.param_name;if(!xe)continue;const me=fe[xe];if(!me){alert(`Please upload or select an image for "${xe}" before generating.`),D("Missing image input");return}te[ge.id]&&te[ge.id].inputs&&(te[ge.id].inputs.image_filename=me)}try{let ge=te;if(a){const xe=me=>{if(typeof me=="string")return Tm(me,a);if(Array.isArray(me))return me.map(we=>xe(we));if(me&&typeof me=="object"){const we=Array.isArray(me)?[]:{};return Object.entries(me).forEach(([Y,Le])=>{we[Y]=xe(Le)}),we}return me};try{ge=xe(te)}catch{ge=te}}Yv({workflowName:e,workflow:ge,timestamp:Date.now()}),await mm({prompt:ge}),le("info","Prompt queued")}catch(ge){console.error("Failed to queue prompt",ge),ge!=null&&ge.unauthorized?(le("error","Session expired. Please sign in again."),D("Session expired. Please sign in again."),window.location.hash="#/login"):(le("error","Error queuing prompt"),D("Error queuing prompt"))}},[t,n,r,a,e,o,D,le]);return{isLoading:i,progressValue:h,progressMax:v,statusText:N,statusPhase:m,handleGenerate:J,logEntries:p,clearLogs:C}}const Am="cozygen_prompt_aliases",$m="cozygen_alias_categories",Mm="cozygen_alias_category_list";function Id(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem(Am);return e?JSON.parse(e)||{}:{}}catch{return{}}}function ga(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Am,JSON.stringify(e||{}))}catch{}}function zd(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem($m);return e?JSON.parse(e)||{}:{}}catch{return{}}}function ya(e){if(!(typeof window>"u"))try{window.localStorage.setItem($m,JSON.stringify(e||{}))}catch{}}function Td(){if(typeof window>"u")return[];try{const e=window.localStorage.getItem(Mm);return Array.isArray(JSON.parse(e))?JSON.parse(e):[]}catch{return[]}}function va(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Mm,JSON.stringify(e||[]))}catch{}}function Om(){const[e,t]=u.useState(()=>Id()),[n,r]=u.useState(()=>zd()),[s,o]=u.useState(()=>Td()),[a,i]=u.useState(!1),[c,d]=u.useState(!1),[y,h]=u.useState(null),g=u.useCallback(async()=>{i(!0),h(null);try{const S=await Fv(),m=ws((S==null?void 0:S.items)||S||{}),f=(S==null?void 0:S.categories)||{},p=Array.isArray(S==null?void 0:S.categoryList)?S.categoryList:[];t(m),r(f),o(p),ga(m),ya(f),va(p)}catch(S){console.error("Failed to load prompt aliases",S),h(S);const m=ws(Id()),f=zd(),p=Td();t(m),r(f),o(p)}finally{i(!1)}},[]),v=u.useCallback(async S=>{const m=(S==null?void 0:S.items)||S||{},f=(S==null?void 0:S.categories)||n||{},p=Array.isArray(S==null?void 0:S.categoryList)&&S.categoryList.length?S.categoryList:s.length?s:Array.from(new Set(Object.values(f).filter(Boolean))),j=ws(m||{});d(!0),h(null);try{await Dv({items:j,categories:f,categoryList:p}),t(j),r(f),o(p),ga(j),ya(f),va(p)}catch(k){throw console.error("Failed to save prompt aliases",k),h(k),ga(j),ya(f),va(p),k}finally{d(!1)}},[n,s]);u.useEffect(()=>{g()},[g]);const w=u.useMemo(()=>{const S=zc(e),m=new Map(S);return Object.entries(n||{}).forEach(([f,p])=>{const j=String(p||"").trim();j&&(e!=null&&e[f])&&m.set(`${j}:${f}`,e[f])}),m},[e,n]),N=u.useMemo(()=>{const S=new Set,m=[];return w.forEach((f,p)=>{let j=p.includes("::")?p.replace("::",":"):p;const k=j.split(":");k.length>=3&&k[0]&&k[1]&&k[0].toLowerCase()===k[1].toLowerCase()&&(j=[k[0],...k.slice(2)].join(":"));const L=j.toLowerCase();S.has(L)||(S.add(L),m.push(j))}),m},[w]);return{aliases:e,aliasCategories:n,categoryList:s,aliasLookup:w,aliasOptions:N,loading:a,saving:c,error:y,refreshAliases:g,persistAliases:v}}const Fm=u.createContext(null);function Dm(){const e=u.useContext(Fm);if(!e)throw new Error("useStudioContext must be used within a StudioProvider");return e}function gw({children:e}){const{workflows:t,selectedWorkflow:n,selectWorkflow:r,loading:s,error:o}=iw(),{workflowData:a,dynamicInputs:i,imageInputs:c,primaryImageInput:d,formData:y,setFormData:h,handleFormChange:g,loading:v,error:w}=dw(n),N=Om(),S=u.useMemo(()=>{const de=[];return Object.entries(N.aliases||{}).forEach(([se,he])=>{const X=String(se).split("::"),ae=X.length>1,le=N.aliasCategories&&N.aliasCategories[se]||(ae?X[0]:""),C=ae?X.slice(1).join("::"):se,T={key:se,name:C,category:le,text:he,token:le?`${le}:${C}`:C};de.push({...T,...Rc(T)})}),de},[N.aliases,N.aliasCategories]),m=u.useMemo(()=>aw(n,i),[n,i]),f=u.useMemo(()=>{const de=(m||i||[]).filter(C=>(C==null?void 0:C.class_type)!=="CozyGenImageInput"),se=/\b(checkpoint|ckpt|lora|model|vae|embedding|clip|sampler|scheduler|seed)\b/i,he=C=>{const T=String((C==null?void 0:C.paramName)||"").toLowerCase(),_=String((C==null?void 0:C.label)||"").toLowerCase(),R=`${T} ${_}`,D=y==null?void 0:y[C==null?void 0:C.paramName],J=typeof D=="string"?D:"";let H=0;return R.includes("prompt")&&(H+=100),R.includes("negative")&&R.includes("prompt")&&(H-=15),C!=null&&C.multiline&&(H+=10),J.includes("$")&&(H+=20),se.test(R)&&(H-=200),Ic(J)&&(H-=200),H};if(typeof(y==null?void 0:y.prompt)=="string")return"prompt";const X=de.map(C=>cs(C)).filter(C=>(C==null?void 0:C.paramType)==="STRING"&&(C==null?void 0:C.paramName));if(!X.length)return"prompt";let ae=X[0],le=he(ae);for(let C=1;C<X.length;C+=1){const T=X[C],_=he(T);_>le&&(ae=T,le=_)}return(ae==null?void 0:ae.paramName)||"prompt"},[i,y,m]),{isLoading:p,progressValue:j,progressMax:k,statusText:L,statusPhase:I,handleGenerate:b,logEntries:$,clearLogs:z}=hw({selectedWorkflow:n,workflowData:a,dynamicInputs:i,imageInputs:c,formData:y,setFormData:h,promptAliases:N.aliasLookup});u.useEffect(()=>{if(I==="finished"&&!(typeof window>"u")){try{window.localStorage.setItem("cozygen_gallery_pending","1")}catch{}window.dispatchEvent(new Event("cozygen:gallery-pending"))}},[I]),u.useEffect(()=>{if(typeof window>"u")return;const de=I==="queued"||I==="running"||p;try{window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:de}}))}catch{}},[I,p]);const W=u.useMemo(()=>({workflows:t,selectedWorkflow:n,selectWorkflow:r,workflowsLoading:s,workflowsError:o,workflowData:a,dynamicInputs:i,orderedDynamicInputs:m,imageInputs:c,primaryImageInput:d,formData:y,setFormData:h,handleFormChange:g,workflowLoading:v,workflowError:w,promptFieldName:f,aliasOptions:N.aliasOptions,aliasCatalog:S,aliasLookup:N.aliasLookup,aliasCategories:N.aliasCategories,aliasLoading:N.loading,aliasSaving:N.saving,aliasError:N.error,refreshAliases:N.refreshAliases,persistAliases:N.persistAliases,isLoading:p,progressValue:j,progressMax:k,statusText:L,statusPhase:I,handleGenerate:b,logEntries:$,clearLogs:z}),[t,n,r,s,o,a,i,m,c,d,y,h,g,v,w,f,N.aliasOptions,N.aliasLookup,N.aliasCategories,S,N.loading,N.saving,N.error,N.refreshAliases,N.persistAliases,p,j,k,L,I,b,$,z]);return l.jsx(Fm.Provider,{value:W,children:e})}const yw=u.memo(function({workflows:t=[],selectedWorkflow:n,onWorkflowChange:r,workflowData:s,presets:o=[],presetName:a="",onPresetNameChange:i,selectedPresetId:c="",onPresetSelect:d,onPresetSave:y,onPresetDelete:h,presetStatus:g}){const v=Array.isArray(t)?t:[],w=Array.isArray(o)?o:[],N=w.length,S=N?`${N} saved`:"No presets yet",m=Io("(min-width: 768px)"),[f,p]=u.useState(!1),[j,k]=u.useState(!1);u.useEffect(()=>{p(!1),k(!1)},[m]);const L=()=>{p(!1),k(!1)},I=()=>{if(!m){k(!0);return}p(z=>!z)},b=()=>{y(),L()},$=()=>{h(),L()};return l.jsxs("div",{className:"controls-context",children:[l.jsxs("div",{className:"controls-context-row",children:[l.jsxs("div",{className:"controls-context-field",children:[l.jsx("label",{className:"controls-context-label",htmlFor:"workflow-select",children:"Workflow"}),l.jsx(Ye,{id:"workflow-select",value:n||"",onChange:r,className:"controls-context-select","aria-label":"Workflow",size:"sm",placeholder:"Select workflow...",options:v.map(z=>({value:z,label:z}))})]}),l.jsxs("div",{className:"controls-context-field",children:[l.jsx("label",{className:"controls-context-label",htmlFor:"preset-select",children:"Preset"}),l.jsx(Ye,{id:"preset-select",value:c||"",onChange:d,className:"controls-context-select","aria-label":"Workflow preset",disabled:!s,size:"sm",placeholder:"Presets...",options:w.map(z=>({value:z.id,label:z.name}))})]}),l.jsx("div",{className:"controls-context-actions",children:l.jsxs("div",{className:"controls-context-menu",children:[l.jsx(zt,{variant:"ghost",size:"xs",onClick:I,"aria-haspopup":m?"menu":"dialog","aria-expanded":m?f:j,"aria-label":"Manage presets",children:"Manage presets"}),m&&f?l.jsxs("div",{className:"controls-context-menu-items",role:"menu",children:[l.jsxs("div",{className:"controls-context-menu-row",children:[l.jsx("input",{type:"text",value:a,onChange:z=>i(z.target.value),className:"controls-context-input ui-control ui-input is-compact",placeholder:"Preset name","aria-label":"Preset name",disabled:!s}),l.jsx("button",{type:"button",className:"controls-context-menu-btn",onClick:b,disabled:!s||!a.trim(),role:"menuitem",children:"Save"})]}),l.jsx("button",{type:"button",className:"controls-context-menu-btn is-danger",onClick:$,disabled:!s||!c,role:"menuitem",children:"Delete"})]}):null]})})]}),l.jsxs("div",{className:"controls-context-meta",children:[l.jsx("span",{children:S}),g?l.jsx("span",{className:"controls-context-status",children:g}):null]}),!m&&j?l.jsx(wt,{open:j,onClose:L,title:"Manage presets",children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Preset"}),l.jsx(Ye,{value:c||"",onChange:handlePresetSelect,className:"sheet-select","aria-label":"Select preset",size:"sm",options:[{value:"",label:"New preset"},...w.map(z=>({value:z.id,label:z.name}))]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Preset name"}),l.jsx("input",{type:"text",value:a,onChange:z=>i(z.target.value),className:"sheet-input ui-control ui-input",placeholder:"Preset name","aria-label":"Preset name",disabled:!s})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Actions"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:b,disabled:!s||!a.trim(),children:"Save"}),l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:$,disabled:!s||!c,children:"Delete"})]})]})]})}):null]})});function vw(){const e=sn(),{workflows:t=[],selectedWorkflow:n,selectWorkflow:r,workflowData:s,dynamicInputs:o=[],imageInputs:a=[],formData:i,setFormData:c,handleFormChange:d,aliasOptions:y,aliasCatalog:h,isLoading:g,progressValue:v,progressMax:w,statusText:N,statusPhase:S,handleGenerate:m,logEntries:f,clearLogs:p,promptFieldName:j,orderedDynamicInputs:k}=Dm(),L=u.useRef(null),I=u.useRef(null),[b,$]=u.useState(()=>Mx()),[z,W]=u.useState(null),de=(z==null?void 0:z.name)||"",se=u.useCallback(()=>W(null),[]),[he,X]=u.useState(!1),[ae,le]=u.useState([]),[C,T]=u.useState([]),[_,R]=u.useState(""),[D,J]=u.useState(""),[H,B]=u.useState(""),F=u.useRef(new Map),O=u.useCallback((ee="")=>{const V=`?field=${encodeURIComponent(ee||j||"prompt")}`;e(`/compose${V}`)},[e,j]),M=u.useCallback(ee=>{!ee||ee===n||(n&&io(n,i||{},{immediate:!0}),R(""),J(""),B(""),r(ee))},[i,n,r]),Z=u.useMemo(()=>{const pe=[...k||[],...a||[]].map(V=>{var K;return(K=V==null?void 0:V.inputs)==null?void 0:K.param_name}).filter(V=>V&&typeof V=="string");return new Set(pe)},[k,a]),te=u.useCallback(ee=>{J(ee);const pe=C.find(re=>re.id===ee);if(R((pe==null?void 0:pe.name)||""),!ee||!(pe!=null&&pe.values)||!n){ee||B("");return}const V=Z,K={};Object.entries(pe.values).forEach(([re,ie])=>{(!V.size||V.has(re))&&(K[re]=ie)}),c(re=>{const ie={...re,...K};return io(n,ie,{immediate:!0}),ie}),B(`Applied "${pe.name}".`)},[Z,C,n,c]),q=a||[],fe=!!(s&&n),Ie=q.length>0,ge=u.useCallback((ee,pe)=>{const V=F.current;pe&&ee&&V.set(ee,pe);const K=ae.length?ae:(pe==null?void 0:pe.order)||[],re=K.length,ie=re>0?K.indexOf(ee):-1,be=ie>0?K[ie-1]:null,Ce=ie>=0&&ie<re-1?K[ie+1]:null,Ee=be?V.get(be):null,nt=Ce?V.get(Ce):null;return{...pe,index:ie>=0?ie:0,total:re,onPrev:Ee?()=>W(ge(be,Ee)):null,onNext:nt?()=>W(ge(Ce,nt)):null,onRender:m}},[ae,m]),xe=u.useCallback(ee=>{const pe=ee||[];le(V=>V.length===pe.length&&V.every((K,re)=>K===pe[re])?V:pe)},[]),me=u.useCallback(ee=>{const pe=ee||"";$(pe),$x(pe)},[]),we=u.useCallback(ee=>{ee!=null&&ee.name&&W(ge(ee.name,ee))},[ge]),Y=u.useCallback(async ee=>{if(!ee){T([]),J("");return}try{const pe=await Uv(ee),V=Array.isArray(pe==null?void 0:pe.presets)?pe.presets:[];T(V),J(K=>K&&V.some(re=>re.id===K)?K:"")}catch(pe){console.error("Failed to load workflow presets",pe),T([]),B("Presets unavailable.")}},[]);u.useEffect(()=>{Y(n)},[n,Y]);const Le=u.useCallback(async()=>{if(!n)return;const ee=_.trim();if(!ee){B("Name a preset to save.");return}const pe={},V=Z;Object.entries(i||{}).forEach(([ie,be])=>{(!V.size||V.has(ie))&&(pe[ie]=be)});const K=C.find(ie=>ie.id===D),re=K&&K.name.toLowerCase()===ee.toLowerCase()?K.id:void 0;try{const ie=await Bv(n,{id:re,name:ee,values:pe}),be=Array.isArray(ie==null?void 0:ie.presets)?ie.presets:[],Ce=ie==null?void 0:ie.preset;T(be),Ce!=null&&Ce.id&&J(Ce.id),B(`Saved "${ee}".`)}catch(ie){console.error("Failed to save preset",ie),B("Save failed.")}},[Z,i,_,C,D,n]),Je=u.useCallback(async()=>{if(!(!n||!D))try{const ee=await Wv(n,D),pe=Array.isArray(ee==null?void 0:ee.presets)?ee.presets:[];T(pe),J(""),B("Preset deleted.")}catch(ee){console.error("Failed to delete preset",ee),B("Delete failed.")}},[D,n]),Ze=u.useCallback(()=>{var ee;return(ee=z==null?void 0:z.render)==null?void 0:ee.call(z,i)},[z,i]);return u.useEffect(()=>{const ee=()=>{!fe||g||m()};return window.addEventListener("cozygen:request-render",ee),()=>window.removeEventListener("cozygen:request-render",ee)},[m,fe,g]),!t||t.length===0?l.jsx("div",{className:"page-shell",children:l.jsx("div",{className:"neon-card px-3 py-3 sm:px-4 sm:py-4",children:l.jsx("p",{className:"text-sm text-[#9DA3FFCC]",children:"No workflows found. Drop a workflow file in CozyGen and refresh."})})}):l.jsxs("div",{className:"page-shell page-stack has-dock controls-page",children:[l.jsxs("div",{className:"page-bar controls-bar",children:[l.jsx("h1",{className:"page-bar-title",children:"Controls"}),l.jsx("div",{className:"page-bar-actions",children:b?l.jsxs("span",{className:"controls-meta",children:["Last: ",b]}):null})]}),l.jsxs("section",{className:"controls-board",children:[l.jsxs(Pd,{title:l.jsxs(l.Fragment,{children:[l.jsx(Pc,{size:18,className:"inline-block mr-2 align-text-bottom"}),"Parameters"]}),bodyClassName:"control-shell controls-body",defaultOpen:!0,className:"controls-panel",children:[l.jsx(yw,{workflows:t,selectedWorkflow:n,onWorkflowChange:M,workflowData:s,presets:C,presetName:_,onPresetNameChange:R,selectedPresetId:D,onPresetSelect:te,onPresetSave:Le,onPresetDelete:Je,presetStatus:H}),s?l.jsx(ew,{workflowName:n,dynamicInputs:k,formData:i,onFormChange:d,parameterSectionRef:L,compactControls:!0,lastEditedParam:b,spotlightName:de,onCloseSpotlight:se,onVisibleParamsChange:xe,aliasOptions:y,aliasCatalog:h,onOpenComposer:O,onParamEdited:me,onSpotlight:we}):l.jsxs("div",{className:"empty-state-inline",children:[l.jsx("span",{className:"empty-state-arrow",children:l.jsx(Jv,{size:20})}),l.jsx("span",{children:"Select a workflow above to get started"})]})]}),Ie?l.jsx(Pd,{ref:I,className:"scroll-mt-24 controls-panel controls-subpanel",title:l.jsxs(l.Fragment,{children:[l.jsx(Xv,{size:18,className:"inline-block mr-2 align-text-bottom"}),"Images"]}),defaultOpen:!1,variant:"bare",children:s?l.jsx("div",{className:"grid grid-cols-1 gap-3 lg:grid-cols-2",children:q.map(ee=>l.jsx(vx,{input:ee,value:i[ee.inputs.param_name]||"",onFormChange:d},ee.id))}):null}):null]}),l.jsxs("div",{className:"controls-status-strip",children:[l.jsxs("div",{className:"controls-status-left",children:[l.jsx("span",{className:`controls-status-dot is-${S||"idle"}`,"aria-hidden":"true"}),l.jsxs("div",{className:"controls-status-text",children:[l.jsx("span",{className:"controls-status-phase",children:S||"idle"}),l.jsx("span",{className:"controls-status-msg",children:N||"Idle"})]})]}),l.jsxs("div",{className:"controls-status-right",children:[g&&w>0?l.jsx("div",{className:"controls-status-meter","aria-label":"Progress",children:l.jsx("div",{className:"controls-status-meter-fill",style:{width:`${Math.max(0,Math.min(100,Math.round((v||0)/w*100)))}%`}})}):null,l.jsx("button",{type:"button",className:"controls-status-btn",onClick:()=>X(!0),children:"Logs"})]})]}),l.jsx("section",{className:"dock-panel",children:l.jsx(ax,{busy:g,progressValue:v,progressMax:w,statusText:N,statusPhase:S,primaryLabel:"Render",onPrimary:m,primaryDisabled:!fe,onLogs:()=>X(!0)})}),l.jsx(xx,{open:!!z,onClose:se,title:z==null?void 0:z.label,description:z==null?void 0:z.description,render:Ze,index:(z==null?void 0:z.index)??0,total:(z==null?void 0:z.total)??0,onPrev:(z==null?void 0:z.onPrev)||null,onNext:(z==null?void 0:z.onNext)||null,onRender:(z==null?void 0:z.onRender)||null,children:null}),l.jsx(tw,{open:he,onClose:()=>X(!1),logs:f,onClear:p})]})}function xw(){return l.jsx("div",{className:"page-shell page-stack",children:l.jsxs("section",{className:"home-hero",children:[l.jsx("span",{className:"home-hero-orb is-warm","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-orb is-cool","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-spark","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-beam","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-ring","aria-hidden":"true"}),l.jsxs("div",{className:"home-hero-inner home-hero-full",children:[l.jsx("div",{className:"home-hero-kicker",children:"CozyGen Studio"}),l.jsx("h1",{className:"home-hero-title",children:"Creative studio for prompt-first storytelling"}),l.jsx("p",{className:"home-hero-description",children:"CozyGen is a quiet, cinematic workspace for people who sketch with wordsshape the mood, stage the scene, then send it down the render runway without losing your flow."}),l.jsxs("div",{className:"home-info-grid",children:[l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Control as composition"}),l.jsx("p",{children:"Dial the palette, tempo, and texture in one place. The controls read like a creative brief, not a checklist."})]}),l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Alias & tag storyboards"}),l.jsx("p",{children:"Save characters, atmospheres, and motifs as building blocks, then arrange them like panels in a storyboard."})]}),l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Gallery inspiration"}),l.jsx("p",{children:"Pin your strongest frames, compare variations, and carry the aesthetic through to your next scene."})]}),l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Render runway"}),l.jsx("p",{children:"Stack iterations like takes on a set. Keep composing while the queue runs in the background."})]})]})]})]})})}function ww({subfolder:e,crumbs:t=[],dirChips:n=[],onBack:r,onRoot:s,onCrumb:o,onSelectDir:a}){return l.jsxs("div",{className:"gallery-nav",children:[l.jsx("div",{className:"gallery-crumbs",role:"navigation","aria-label":"Gallery path",children:t.map((i,c)=>l.jsxs(u.Fragment,{children:[l.jsx("span",{className:"text-[#6A6FA8]",children:"/"}),l.jsx("button",{type:"button",className:"gallery-chip-btn",onClick:()=>o==null?void 0:o(i.path),"aria-current":c===t.length-1?"page":void 0,children:i.name})]},i.path||i.name||c))}),n.length>0?l.jsx("div",{className:"gallery-dir-chips",children:n.map(i=>l.jsx("button",{type:"button",className:"gallery-chip-btn",onClick:()=>a==null?void 0:a(i.subfolder),children:i.filename||i.subfolder||"Collection"},i.subfolder||i.filename))}):null]})}const jw=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e),Sw=({src:e,poster:t,autoPlay:n})=>{const r=u.useRef(null);return u.useEffect(()=>{const s=r.current;s&&(s.pause(),s.currentTime=0,s.load())},[e]),u.useEffect(()=>{const s=r.current;if(!s)return;let o;const a=()=>{const c=s.play();c&&typeof c.catch=="function"&&c.catch(()=>{})},i=()=>{s.pause()};return n?typeof window<"u"&&"IntersectionObserver"in window?(o=new IntersectionObserver(d=>{d.forEach(y=>{y.isIntersecting?a():i()})},{threshold:.65}),o.observe(s)):a():(i(),s.currentTime=0),()=>{o&&o.disconnect(),i()}},[n,e]),e?l.jsx("video",{ref:r,src:e,poster:t||void 0,muted:!0,playsInline:!0,loop:!0,preload:"metadata",className:"w-full h-auto max-h-[80vh] rounded-2xl object-contain bg-black/40"}):l.jsx("div",{className:"flex items-center justify-center py-16 text-[11px] text-[#9DA3FFCC]",children:"No preview available"})},Ad={contentVisibility:"auto",containIntrinsicSize:"260px 320px"};function Nw({item:e,onSelect:t,variant:n="grid",autoPlay:r=!1}){if(!e)return null;const s=e.type==="directory",o=e.filename||"",a=e.subfolder||"",i=o||a||"Unknown",c=!!(e!=null&&e.meta&&(e.meta.model||e.meta.prompt||Array.isArray(e.meta.loras)&&e.meta.loras.length)),d=()=>{t&&t(e)},y=n==="feed"?768:384,h=!s&&o?`/cozygen/thumb?type=output&subfolder=${encodeURIComponent(a)}&filename=${encodeURIComponent(o)}&w=${y}`:null,g=!s&&o?(()=>{const w=e.type&&e.type!=="directory"?e.type:"output",N=e.mtime?`&v=${encodeURIComponent(String(e.mtime))}`:"";return`/view?filename=${encodeURIComponent(o)}&subfolder=${encodeURIComponent(a)}&type=${encodeURIComponent(w)}${N}`})():null,v=jw(o);if(s)return l.jsx("button",{type:"button",onClick:d,className:"gallery-dir-tile",style:Ad,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-7 w-7 rounded-lg bg-gradient-to-br from-[#6B5BFF] to-[#FF4F9A] opacity-80 group-hover:opacity-100 flex items-center justify-center text-[11px] text-white",children:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-[11px] font-medium text-[#E5E7FF] truncate",children:i}),l.jsx("div",{className:"text-[10px] text-[#9DA3FFCC] truncate",children:"Collection"})]})]})});if(n==="feed"){const w={contentVisibility:"auto",containIntrinsicSize:"520px 720px"};return l.jsxs("div",{className:"gallery-feed-item",style:w,children:[l.jsxs("button",{type:"button",onClick:d,className:"gallery-feed-media",children:[c?l.jsx("span",{className:"gallery-meta-badge",role:"img","aria-label":"Metadata available",title:"Metadata available",children:"i"}):null,l.jsx("div",{className:"relative w-full flex items-center justify-center bg-[#020312]",children:v?l.jsx(Sw,{src:g,poster:h,autoPlay:r}):h?l.jsx("img",{src:h,alt:i,className:"w-full h-auto max-h-[80vh] rounded-2xl object-contain bg-black/40",loading:"lazy",decoding:"async"}):l.jsx("div",{className:"flex items-center justify-center py-16 text-[11px] text-[#9DA3FFCC]",children:"No preview available"})}),l.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-[#05071680] opacity-0 group-hover:opacity-100 transition-opacity"}),v&&l.jsx("div",{className:"pointer-events-none absolute left-2 top-2 rounded-md bg-[#050716CC] px-2 py-[1px] text-[10px] text-[#CFFAFE] border border-[#3EF0FF80]",children:"Video"})]}),l.jsx("div",{className:"gallery-feed-meta",children:l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"gallery-feed-title",children:i}),a&&l.jsx("div",{className:"gallery-feed-subfolder",children:a})]})})]})}return l.jsxs("button",{type:"button",onClick:d,className:"gallery-tile",style:Ad,children:[l.jsxs("div",{className:"gallery-tile-media",children:[c?l.jsx("span",{className:"gallery-meta-badge",role:"img","aria-label":"Metadata available",title:"Metadata available",children:"i"}):null,h?l.jsx("img",{src:h,alt:i,className:"gallery-tile-img",loading:"lazy",decoding:"async"}):l.jsx("div",{className:"gallery-tile-empty",children:"No preview"}),v&&l.jsx("div",{className:"gallery-badge",children:"Video"})]}),l.jsx("div",{className:"gallery-tile-caption",children:l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsx("div",{className:"gallery-tile-title",children:i}),v&&l.jsx("span",{className:"gallery-tile-flag",children:"Vid"})]})})]})}const $d=u.memo(Nw),kw=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e),Cw=e=>{if(!e)return"";const t=e.filename||"",n=e.subfolder||"",r=e.type||"output",s=e.mtime?`&v=${encodeURIComponent(String(e.mtime))}`:"";return`/view?filename=${encodeURIComponent(t)}&subfolder=${encodeURIComponent(n)}&type=${encodeURIComponent(r)}${s}`};function bw({isOpen:e,media:t,onClose:n,onPrev:r,onNext:s,total:o=0,canPrev:a=!1,canNext:i=!1}){const c=u.useRef(!1),d=u.useRef(null),[y,h]=u.useState(!1),g=u.useRef(null),v=u.useRef(null),w=k=>k?Array.from(k.querySelectorAll('a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])')).filter(L=>!L.hasAttribute("disabled")&&L.getAttribute("aria-hidden")!=="true"):[];if(u.useEffect(()=>{if(!e)return;const k=L=>{L.key==="Escape"&&(n==null||n()),L.key==="ArrowLeft"&&a&&(r==null||r()),L.key==="ArrowRight"&&i&&(s==null||s())};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[e,n,s,r,a,i]),u.useEffect(()=>{e&&h(!1)},[e,t]),u.useEffect(()=>{if(!e||typeof document>"u")return;const k=g.current;v.current=document.activeElement;const L=()=>{var z;const b=w(k),$=d.current||b[0]||k;(z=$==null?void 0:$.focus)==null||z.call($)},I=b=>{if(b.key!=="Tab"||!k)return;const $=w(k);if(!$.length){b.preventDefault(),k.focus();return}const z=$[0],W=$[$.length-1],de=document.activeElement;b.shiftKey&&de===z?(b.preventDefault(),W.focus()):!b.shiftKey&&de===W&&(b.preventDefault(),z.focus())};return requestAnimationFrame(L),k==null||k.addEventListener("keydown",I),()=>{var $;k==null||k.removeEventListener("keydown",I);const b=v.current;b&&document.contains(b)&&(($=b.focus)==null||$.call(b))}},[e]),!t||!e||typeof document>"u")return null;const N=Cw(t),S=t.subfolder||"Gallery",m=kw(t.filename),f=o>1,p=(t==null?void 0:t.meta)||{},j=[p!=null&&p.model?{label:"Model",value:p.model}:null,p!=null&&p.prompt?{label:"Prompt",value:p.prompt,isPrompt:!0}:null,Array.isArray(p==null?void 0:p.loras)&&p.loras.length?{label:"LoRAs",value:p.loras.join(", ")}:null].filter(Boolean);return Sc.createPortal(l.jsx("div",{className:"react-modal-overlay",role:"presentation",onPointerDown:k=>{c.current=k.target===k.currentTarget},onClick:k=>{c.current&&k.target===k.currentTarget&&(n==null||n())},children:l.jsx("div",{className:"react-modal-content",ref:g,role:"dialog","aria-modal":"true","aria-label":"Preview",onClick:k=>k.stopPropagation(),tabIndex:-1,children:l.jsxs("div",{className:"media-viewer-panel",children:[l.jsxs("header",{className:"media-viewer-head",children:[l.jsxs("div",{className:"media-viewer-head-bar bottom-sheet-head",children:[l.jsxs("div",{className:"media-viewer-meta",children:[l.jsx("div",{className:"media-viewer-title",title:t.filename,children:t.filename}),l.jsxs("div",{className:"media-viewer-sub",children:[l.jsx("span",{className:"media-chip",children:S}),l.jsx("span",{className:`media-chip ${m?"is-clip":"is-still"}`,children:m?"Video":"Image"})]})]}),l.jsx("button",{ref:d,type:"button",className:"bottom-sheet-close media-viewer-close",onClick:n,"aria-label":"Close",children:l.jsx(rn,{size:16})})]}),l.jsxs("div",{className:"media-viewer-actions",children:[j.length?l.jsx(zt,{variant:"ghost",size:"sm",onClick:()=>h(k=>!k),"aria-expanded":y,"aria-label":y?"Hide metadata":"Show metadata",children:y?"Hide metadata":"Metadata"}):null,l.jsx(zt,{as:"a",href:N,target:"_blank",rel:"noreferrer",variant:"ghost",size:"sm",children:"Open"})]})]}),y&&j.length?l.jsx("div",{className:"media-viewer-info","aria-label":"Generation metadata",children:j.map(k=>l.jsxs("div",{className:"media-info-row",children:[l.jsx("span",{className:"media-info-label",children:k.label}),l.jsx("span",{className:`media-info-value ${k.isPrompt?"is-prompt":""}`,children:k.value})]},k.label))}):null,l.jsxs("div",{className:"media-viewer-stage",children:[f?l.jsx("button",{type:"button",className:`media-stage-nav is-left ${a?"":"is-disabled"}`,onClick:r,"aria-label":"Previous",disabled:!a,children:l.jsx(km,{size:18})}):null,l.jsx("div",{className:"media-viewer-frame",children:m?l.jsx("video",{src:N,controls:!0,className:"media-viewer-media",autoPlay:!0,muted:!0,playsInline:!0}):l.jsx("img",{src:N,alt:t.filename,className:"media-viewer-media"})}),f?l.jsx("button",{type:"button",className:`media-stage-nav is-right ${i?"":"is-disabled"}`,onClick:s,"aria-label":"Next",disabled:!i,children:l.jsx(zo,{size:18})}):null]})]})})}),document.body)}const Ew=(e="")=>e.startsWith("."),Lw=(e="")=>/\.(png|jpe?g|gif|webp|bmp|tif?f)$/i.test(e),Pw=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e);function _w(){const e=(B,F="")=>{try{return typeof window<"u"&&localStorage.getItem(B)||F}catch{return F}},t=(B,F)=>{try{typeof window<"u"&&localStorage.setItem(B,F)}catch{}},[n,r]=u.useState(e("galleryPath","")),[s,o]=u.useState([]),[a,i]=u.useState(!1),[c,d]=u.useState(!1),[y,h]=u.useState(""),[g,v]=u.useState(1),[w,N]=u.useState(1),[S,m]=u.useState(()=>{const B=e("galleryPageSize","30"),F=parseInt(B,10);return Number.isFinite(F)?F:30}),[f,p]=u.useState("all"),[j,k]=u.useState(!1),[L,I]=u.useState(""),[b,$]=u.useState(()=>e("galleryRecursive","0")==="1"),[z,W]=u.useState(0);u.useEffect(()=>{let B=!1;const F=new AbortController;return(async()=>{i(!0),h("");try{typeof performance<"u"&&performance.mark&&performance.mark("cozygen:gallery:fetch")}catch{}try{const M=await hm(n,g,S,j,b,f,z,{signal:F.signal,includeMeta:!0});if(B)return;M&&M.items?(o(M.items),N(M.total_pages||1),h("")):(o([]),N(1));try{typeof performance<"u"&&performance.measure&&(performance.mark("cozygen:gallery:ready"),performance.measure("cozygen:gallery:first-paint","cozygen:gallery:fetch","cozygen:gallery:ready"))}catch{}}catch(M){if((M==null?void 0:M.name)==="AbortError")return;console.error("Failed to load gallery",M),B||h("Unable to load gallery right now."),B||(o([]),N(1))}finally{!B&&!F.signal.aborted&&(i(!1),d(!0))}})(),t("galleryPath",n),t("galleryPageSize",String(S)),()=>{B=!0,F.abort()}},[n,g,S,z,j,b,f]);const de=u.useMemo(()=>{if(!n)return[];const B=n.replace(/\\/g,"/").split("/").filter(Boolean),F=[];for(let O=0;O<B.length;O++)F.push({name:B[O],path:B.slice(0,O+1).join("/")});return F},[n]),se=u.useMemo(()=>s.filter(B=>B.type==="directory").map(B=>({filename:B.filename,subfolder:B.subfolder})),[s]),he=u.useMemo(()=>{const B=(L||"").trim().toLowerCase();return s.filter(F=>{const O=(F.filename||"").toLowerCase();return!(!j&&Ew(O)||F.type!=="directory"&&(f==="image"&&!Lw(O)||f==="video"&&!Pw(O))||B&&!O.includes(B))})},[s,j,f,L]),X=u.useMemo(()=>he.filter(B=>B.type!=="directory"),[he]),ae=u.useCallback(()=>{if(!n)return;const B=n.replace(/\\/g,"/").lastIndexOf("/"),F=B===-1?"":n.slice(0,B);r(F),v(1)},[n]),le=u.useCallback(()=>{r(""),v(1)},[]),C=u.useCallback(B=>{r(B||""),v(1)},[]),T=u.useCallback(B=>{r(B),v(1)},[]),_=u.useCallback(B=>{const F=parseInt(String(B),10)||30;m(F),v(1)},[]),R=u.useCallback(B=>{p(B),v(1)},[]),D=u.useCallback(B=>{const F=!!B;$(F),v(1),t("galleryRecursive",F?"1":"0")},[]),J=u.useCallback(B=>{I(B),v(1)},[]),H=u.useCallback(()=>{W(B=>B+1)},[]);return u.useEffect(()=>{const B=()=>H();return typeof window<"u"&&window.addEventListener&&window.addEventListener("cozygen:queue-finished",B),()=>{typeof window<"u"&&window.removeEventListener&&window.removeEventListener("cozygen:queue-finished",B)}},[H]),u.useEffect(()=>{if(typeof window>"u")return;let B=!1,F,O;const M=()=>{O&&(clearTimeout(O),O=null)},Z=(q=8e3)=>{M(),O=window.setTimeout(()=>{B||(H(),Z(8e3))},q)};return(()=>{if(!("EventSource"in window)){Z();return}const q=new URLSearchParams({subfolder:n||"",recursive:b?"1":"0",show_hidden:j?"1":"0"});F=new EventSource(`/cozygen/api/gallery/stream?${q.toString()}`),F.onmessage=()=>{B||H()},F.onerror=()=>{F&&(F.close(),F=null),Z()}})(),()=>{B=!0,M(),F&&(F.close(),F=null)}},[n,b,j,H]),{path:n,items:s,loading:a,hasLoaded:c,error:y,page:g,totalPages:w,perPage:S,kind:f,showHidden:j,query:L,recursive:b,crumbs:de,dirChips:se,filtered:he,mediaItems:X,setPage:v,setPerPage:_,setShowHidden:k,setQuery:J,setKind:R,setRecursive:D,goBack:ae,goRoot:le,goToPath:C,selectDir:T,refresh:H}}function Rw(e){const[t,n]=u.useState(!1),[r,s]=u.useState(null);u.useEffect(()=>{if(!e||e.length===0){s(null),n(!1);return}s(v=>v==null?v:v>=e.length?e.length-1:v)},[e]);const o=u.useCallback(v=>{if(!e||!e.length||!v)return;const w=e.indexOf(v);w!==-1&&(s(w),n(!0))},[e]),a=u.useCallback(()=>{n(!1),s(null)},[]),i=u.useCallback(()=>{!e||!e.length||s(v=>v==null||v>=e.length-1?v:v+1)},[e]),c=u.useCallback(()=>{!e||!e.length||s(v=>v==null||v<=0?v:v-1)},[e]),d=r!=null&&r>=0&&e&&r<e.length?e[r]:null,y=(e==null?void 0:e.length)||0,h=r!==null&&r>0,g=r!==null&&r<y-1;return{viewerOpen:t,viewerIndex:r,currentMedia:d,total:y,canPrev:h,canNext:g,open:o,close:a,next:i,prev:c,setViewerOpen:n}}const Md="cozygen_gallery_view_mode",Od="cozygen_gallery_feed_autoplay";function Iw(e,t){const n=u.useRef(null),[r,s]=u.useState(0),[o,a]=u.useState({width:0,cols:0,top:0,viewport:typeof window<"u"&&window.innerHeight||800}),i=g=>{if(!g||typeof window>"u")return null;let v=g.parentElement;for(;v;){const w=window.getComputedStyle(v);if(w.overflowY==="auto"||w.overflowY==="scroll")return v;v=v.parentElement}return window};u.useEffect(()=>{if(!t)return;const g=n.current;if(!g||typeof window>"u"||typeof ResizeObserver>"u")return;const v=i(g)||window,w=()=>{const f=g.getBoundingClientRect(),p=f.width||g.clientWidth||1,j=Math.max(1,Math.floor(p/160)),k=v===window?window.scrollY||0:v.scrollTop||0,L=v===window?{top:0}:v.getBoundingClientRect(),I=v===window?f.top+(window.scrollY||0):f.top-L.top+k,b=v===window?window.innerHeight||800:v.clientHeight||800;a($=>$.width===p&&$.cols===j&&$.top===I&&$.viewport===b?$:{width:p,cols:j,top:I,viewport:b}),s(k)};w();const N=new ResizeObserver(()=>w());N.observe(g),window.addEventListener("resize",w);let S=!1;const m=()=>{S||(S=!0,window.requestAnimationFrame(()=>{S=!1;const f=v===window?window.scrollY||0:v.scrollTop||0;s(f)}))};return v.addEventListener("scroll",m,{passive:!0}),()=>{N.disconnect(),window.removeEventListener("resize",w),v.removeEventListener("scroll",m)}},[t]);const c=t&&o.cols>0&&e.length>60,{visibleItems:d,topSpacer:y,bottomSpacer:h}=u.useMemo(()=>{if(!c)return{visibleItems:e,topSpacer:0,bottomSpacer:0};const g=o.width/o.cols,v=Math.max(180,Math.ceil(g*1.25)+32),w=Math.ceil(e.length/o.cols),N=Math.max(0,r-o.top),S=Math.max(0,Math.floor(N/v)-2),m=Math.min(w,Math.ceil((N+o.viewport)/v)+2),f=S*o.cols,p=Math.min(e.length,m*o.cols);return{visibleItems:e.slice(f,p),topSpacer:S*v,bottomSpacer:Math.max(0,(w-m)*v)}},[e,o,r,c]);return{containerRef:n,visibleItems:d,topSpacer:y,bottomSpacer:h,virtualized:c}}function zw(){const{path:e,loading:t,hasLoaded:n,page:r,totalPages:s,perPage:o,kind:a,showHidden:i,recursive:c,error:d,crumbs:y,dirChips:h,filtered:g,mediaItems:v,setPage:w,setPerPage:N,setShowHidden:S,setKind:m,setRecursive:f,goBack:p,goRoot:j,goToPath:k,selectDir:L,refresh:I}=_w(),{viewerOpen:b,currentMedia:$,total:z,canPrev:W,canNext:de,open:se,close:he,next:X,prev:ae}=Rw(v),[le,C]=u.useState(()=>{if(typeof window>"u")return"grid";const Y=window.localStorage.getItem(Md);return Y==="feed"||Y==="grid"?Y:"grid"}),[T,_]=u.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(Od)==="true");u.useEffect(()=>{try{window.localStorage.setItem(Md,le)}catch{}},[le]),u.useEffect(()=>{try{window.localStorage.setItem(Od,T?"true":"false")}catch{}},[T]);const R=u.useCallback(Y=>{if(Y.type==="directory"){L(Y.subfolder);return}se(Y)},[se,L]),D=le==="grid",[J,H]=u.useState(!1),B=u.useMemo(()=>[{key:"all",label:"All"},{key:"image",label:"Images"},{key:"video",label:"Videos"}],[]),F=u.useMemo(()=>[{key:"grid",ariaLabel:"Grid view",icon:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("rect",{x:"1",y:"1",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"9",y:"1",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"1",y:"9",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"9",y:"9",width:"6",height:"6",rx:"1"})]})},{key:"feed",ariaLabel:"Feed view",icon:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("rect",{x:"2",y:"1",width:"12",height:"5",rx:"1"}),l.jsx("rect",{x:"2",y:"8",width:"12",height:"5",rx:"1"})]})}],[]),O=Y=>Y.type==="directory"?`dir:${Y.subfolder||Y.filename}`:`${Y.subfolder||""}|${Y.filename}`;u.useEffect(()=>{try{window.localStorage.setItem("cozygen_gallery_pending","0")}catch{}window.dispatchEvent(new Event("cozygen:gallery-viewed"))},[]);const M=t&&!n,Z=t&&n,te=`${g.length} items`,q=M?"Loading":te,fe=!!d,{containerRef:Ie,visibleItems:ge,topSpacer:xe,bottomSpacer:me,virtualized:we}=Iw(g,D);return l.jsxs("div",{className:"page-shell gallery-shell",children:[l.jsx("div",{className:"screen-sticky gallery-header",children:l.jsxs("div",{className:"gallery-header-inner",children:[l.jsxs("div",{className:"page-bar gallery-bar",children:[l.jsx("h1",{className:"page-bar-title",children:"Gallery"}),l.jsxs("div",{className:"page-bar-actions",children:[l.jsx("span",{className:"gallery-status",children:q}),l.jsx(Tr,{ariaLabel:"View mode",value:le,onChange:C,layout:"icon",size:"sm",items:F}),l.jsx(zt,{size:"xs",className:"gallery-filter-btn",onClick:()=>H(!0),children:"Filters"})]})]}),l.jsx("div",{className:"gallery-nav-row",children:l.jsx(ww,{subfolder:e,crumbs:y,dirChips:h,onBack:p,onRoot:j,onCrumb:Y=>k(Y),onSelectDir:Y=>L(Y)})}),l.jsxs("div",{className:"gallery-toolbar",children:[l.jsx("div",{className:"gallery-toolbar-left",children:l.jsx(Tr,{ariaLabel:"Filter by type",value:a,onChange:m,size:"sm",items:B})}),l.jsx("div",{className:"gallery-toolbar-right",children:l.jsxs("div",{className:"gallery-options",children:[l.jsx(zt,{size:"icon",active:c,pressed:c,onClick:()=>f(Y=>!Y),title:c?"Showing subfolders":"This folder only","aria-label":"Toggle subfolders",children:c?l.jsx(ad,{size:16}):l.jsx(id,{size:16})}),l.jsx(zt,{size:"icon",active:i,pressed:i,onClick:()=>S(Y=>!Y),title:i?"Showing hidden":"Hiding hidden","aria-label":"Toggle hidden items",children:i?l.jsx(cd,{size:16}):l.jsx(ud,{size:16})}),le==="feed"&&l.jsx(zt,{size:"icon",active:T,pressed:T,onClick:()=>_(Y=>!Y),title:T?"Autoplay on":"Autoplay off","aria-label":"Toggle autoplay",children:T?l.jsx(dd,{size:16}):l.jsx(fd,{size:16})}),l.jsx(zt,{size:"icon",onClick:I,title:"Refresh","aria-label":"Refresh gallery",children:l.jsx(wi,{size:16})})]})})]}),l.jsxs("div",{className:"gallery-pagination",children:[l.jsxs("div",{className:"gallery-pagination-info",children:[Z?l.jsx("span",{className:"loading-spinner","aria-hidden":"true"}):null,l.jsx("span",{className:M?"gallery-loading-text":"",children:q})]}),l.jsxs("div",{className:"gallery-pagination-controls",children:[l.jsx("button",{type:"button",className:"gallery-page-btn",onClick:()=>w(Y=>Math.max(1,Y-1)),disabled:r<=1||t,"aria-label":"Previous page",children:l.jsx(km,{size:16})}),l.jsxs("span",{className:"gallery-page-indicator",children:[r," / ",s]}),l.jsx("button",{type:"button",className:"gallery-page-btn",onClick:()=>w(Y=>Y<s?Y+1:Y),disabled:r>=s||t,"aria-label":"Next page",children:l.jsx(zo,{size:16})}),l.jsx(Ye,{value:o,onChange:Y=>N(parseInt(Y,10)||30),className:"gallery-page-size","aria-label":"Items per page",size:"sm",options:[15,30,60,120]})]})]})]})}),M&&g.length===0?l.jsx("div",{className:"gallery-grid-responsive",children:Array.from({length:8}).map((Y,Le)=>l.jsxs("div",{className:"gallery-skeleton-item",children:[l.jsx("div",{className:"gallery-skeleton-thumb skeleton"}),l.jsx("div",{className:"gallery-skeleton-label skeleton skeleton-text"})]},Le))}):fe&&g.length===0?l.jsxs("div",{className:"gallery-empty",role:"alert",children:[l.jsx("div",{className:"gallery-empty-icon",children:l.jsx(pd,{size:48})}),l.jsx("div",{className:"gallery-empty-title",children:"Gallery unavailable"}),l.jsx("div",{className:"gallery-empty-desc",children:d}),l.jsx("button",{type:"button",className:"ui-button is-primary is-compact mt-4",onClick:I,children:"Retry"})]}):g.length===0?l.jsxs("div",{className:"gallery-empty",children:[l.jsx("div",{className:"gallery-empty-icon",children:l.jsx(pd,{size:48})}),l.jsx("div",{className:"gallery-empty-title",children:"No media found"}),l.jsx("div",{className:"gallery-empty-desc",children:a!=="all"?`No ${a}s match your filters. Try selecting "All" or adjusting your search.`:"This folder is empty. Render something new or navigate to a different folder."})]}):D?l.jsx("div",{className:"w-full overflow-hidden",children:l.jsxs("div",{className:"gallery-grid-responsive",ref:Ie,children:[we&&xe>0?l.jsx("div",{"aria-hidden":!0,style:{gridColumn:"1 / -1",height:`${xe}px`}}):null,ge.map(Y=>l.jsx($d,{item:Y,onSelect:R,variant:"grid",autoPlay:!1},O(Y))),we&&me>0?l.jsx("div",{"aria-hidden":!0,style:{gridColumn:"1 / -1",height:`${me}px`}}):null]})}):l.jsx("div",{className:"flex flex-col gap-6 items-center",children:g.filter(Y=>Y.type!=="directory").map(Y=>l.jsx("div",{className:"w-full flex justify-center",children:l.jsx($d,{item:Y,onSelect:R,variant:"feed",autoPlay:T})},O(Y)))}),l.jsx(bw,{isOpen:b,media:$,onClose:he,onPrev:ae,onNext:X,total:z,canPrev:W,canNext:de}),l.jsx(wt,{open:J,onClose:()=>H(!1),title:"Gallery filters",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>H(!1),children:"Done"}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Type"}),l.jsx(Tr,{ariaLabel:"Filter by type",value:a,onChange:m,size:"sm",items:B})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Options"}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:`ui-button is-compact ${c?"is-primary":"is-muted"}`,onClick:()=>f(Y=>!Y),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[c?l.jsx(ad,{size:14}):l.jsx(id,{size:14}),l.jsx("span",{children:c?"Subfolders":"This folder"})]})}),l.jsx("button",{type:"button",className:`ui-button is-compact ${i?"is-primary":"is-muted"}`,onClick:()=>S(Y=>!Y),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[i?l.jsx(cd,{size:14}):l.jsx(ud,{size:14}),l.jsx("span",{children:i?"Hidden on":"Hidden off"})]})}),le==="feed"?l.jsx("button",{type:"button",className:`ui-button is-compact ${T?"is-primary":"is-muted"}`,onClick:()=>_(Y=>!Y),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[T?l.jsx(dd,{size:14}):l.jsx(fd,{size:14}),l.jsx("span",{children:T?"Autoplay":"No autoplay"})]})}):null,l.jsx("button",{type:"button",className:"ui-button is-compact is-ghost",onClick:I,children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[l.jsx(wi,{size:14}),l.jsx("span",{children:"Refresh"})]})})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Page size"}),l.jsx(Ye,{value:o,onChange:Y=>N(parseInt(Y,10)||30),className:"sheet-select","aria-label":"Items per page",size:"sm",options:[15,30,60,120]}),l.jsxs("div",{className:"sheet-hint",children:[Z?l.jsx("span",{className:"loading-spinner","aria-hidden":"true"}):null,l.jsxs("span",{children:[q,"  Page ",r," of ",s]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>w(Y=>Math.max(1,Y-1)),disabled:r<=1||t,children:"Prev"}),l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>w(Y=>Y<s?Y+1:Y),disabled:r>=s||t,children:"Next"})]})]})]})})]})}const uo="::";function Tw(){return`alias-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`}function an(e){return String(e||"").split(",").map(t=>t.trim()).filter(Boolean)}function $o(e){return(e||[]).map(t=>String(t||"").trim()).filter(Boolean).join(", ")}function Aw(e,t){const n=String(t||"").trim();if(!n)return String(e||"");const r=an(e);return new Set(r.map(o=>o.toLowerCase())).has(n.toLowerCase())||r.push(n),$o(r)}function $w(e,t){const n=String(t||"").trim().toLowerCase();if(!n)return String(e||"");const r=an(e).filter(s=>s.toLowerCase()!==n);return $o(r)}function Mw(e,t,n){const r=String(t||"").trim().toLowerCase(),s=String(n||"").trim();if(!r||!s)return String(e||"");const o=an(e).map(c=>c.toLowerCase()===r?s:c),a=new Set,i=[];return o.forEach(c=>{const d=String(c||"").trim().toLowerCase();!d||a.has(d)||(a.add(d),i.push(c))}),$o(i)}function xa(e,t={}){return Object.entries(ws(e)).map(([n,r],s)=>{const[o,a]=String(n).includes(uo)?n.split(uo):["",n],i=a||n,c=t[n]||t[i]||o||"";return{id:`existing-${s}-${n}`,name:i,text:r,category:c}})}function Fd(e){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.name)||"").trim(),s=typeof(n==null?void 0:n.text)=="string"?n.text.trim():"";if(r&&s){const o=String((n==null?void 0:n.category)||"").trim(),a=o?`${o}${uo}${r}`:r;t[a]=s}}),t}function Dd(e){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.name)||"").trim(),s=typeof(n==null?void 0:n.category)=="string"?n.category.trim():"";if(r){const o=s?`${s}${uo}${r}`:r;t[o]=s}}),t}function Ow(){var jt;const e=sn(),{aliases:t,aliasCategories:n,categoryList:r,loading:s,saving:o,error:a,persistAliases:i}=Om(),[c,d]=u.useState(()=>xa(t,n)),[y,h]=u.useState(()=>Array.isArray(r)?r:[]),[g,v]=u.useState("All"),[w,N]=u.useState("All"),[S,m]=u.useState(""),[f,p]=u.useState(""),[j,k]=u.useState(!1),[L,I]=u.useState(!1),[b,$]=u.useState({loading:!1,invalid:[],suggestions:{}}),[z,W]=u.useState(!1),[de,se]=u.useState(null),[he,X]=u.useState(""),ae=u.useRef(null),le=u.useRef(null),[C,T]=u.useState(!1),[_,R]=u.useState(""),[D,J]=u.useState(""),H=Io("(min-width: 1024px)");u.useEffect(()=>{if(C)return;const x=xa(t,n||{});d(x),f&&!x.some(P=>P.id===f)&&(p(""),k(!1))},[n,C]),u.useEffect(()=>{C||Array.isArray(r)&&h(r)},[r,C]),u.useEffect(()=>{if(C)return;const x=xa(t,n||{});d(x),f&&!x.some(P=>P.id===f)&&(p(""),k(!1))},[t,n,f,C]);const B=u.useMemo(()=>Fd(c),[c]),F=()=>{const x={id:Tw(),name:"",text:"",category:""};d(P=>[...P,x]),p(x.id),X(""),T(!0),k(!0)},O=(x,P,U)=>{T(!0),d(G=>G.map((ce,ne)=>ne===x?{...ce,[P]:U}:ce))},M=x=>{T(!0),d(P=>{var G;const U=P.filter((ce,ne)=>ne!==x);return(U.length===0||f===((G=P[x])==null?void 0:G.id))&&(p(""),k(!1)),U})},Z=async()=>{X("");try{const x=new Map;if(c.forEach(U=>{an((U==null?void 0:U.text)||"").forEach(ce=>{const ne=String(ce).toLowerCase();ne&&(x.has(ne)||x.set(ne,{tag:ce,rows:[]}),x.get(ne).rows.push(U.id))})}),x.size){const U=Array.from(x.values()).map(G=>G.tag);try{const G=await pa(U),ce=Array.isArray(G==null?void 0:G.invalid)?G.invalid:[],ne=new Set(ce.map(Ne=>String(Ne).toLowerCase()));if(ne.size){const Ne=c.map(je=>{const Te=an((je==null?void 0:je.text)||"").filter(We=>ne.has(String(We).toLowerCase()));if(!Te.length)return null;const mt=je.category?`${je.category}:${je.name}`:je.name;return{id:je.id,token:mt,friendlyName:Il({name:je.name})||je.name||"Untitled",category:je.category||"",invalid:Te}}).filter(Boolean);se({invalid:ce,invalidLower:Array.from(ne),rows:Ne,suggestions:(G==null?void 0:G.suggestions)||{}}),W(!0),X("Fix invalid tags before saving.");return}}catch(G){console.error("Unable to validate tags",G),X("Unable to validate tags right now.");return}}const P=Dd(c);await i({items:B,categories:P,categoryList:y}),T(!1),X("Saved.")}catch{X("Unable to save right now.")}},te=u.useMemo(()=>{const x=S.trim().toLowerCase(),U=[...c.filter(G=>{const ce=(G.category||"").trim();if(g===""&&ce||g!=="All"&&g!==""&&ce!==g)return!1;const ne=is(G.name||"",G.category||"");if(w!=="All"&&ne!==w)return!1;if(!x)return!0;const Ne=ce?`${ce}:${G.name}`:G.name;return(G.name||"").toLowerCase().includes(x)||(G.text||"").toLowerCase().includes(x)||(ce||"").toLowerCase().includes(x)||(Ne||"").toLowerCase().includes(x)})];return U.sort((G,ce)=>(G.name||"").localeCompare(ce.name||"")),U},[c,g,w,S]),q=te.find(x=>x.id===f)||c.find(x=>x.id===f)||null,fe=q?q.category?`${q.category}:${q.name}`:q.name||"alias":"",Ie=q&&(Il({name:q.name})||q.name)||"Alias",ge=fe?`$${fe}$`:"$alias$",xe=te.length?te:c,me=q?xe.findIndex(x=>x.id===q.id):-1,we=me>0?xe[me-1]:null,Y=me>=0&&me<xe.length-1?xe[me+1]:null,Le=x=>{x&&(p(x.id),k(!0),X(""))},Je=u.useMemo(()=>{const x=new Set(y||[]);return c.forEach(P=>{P.category&&x.add(P.category)}),Array.from(x).sort((P,U)=>P.localeCompare(U))},[c,y]),Ze=u.useMemo(()=>{const x=new Set;return c.forEach(P=>{const U=(P.category||"").trim();if(g===""&&U||g!=="All"&&g!==""&&U!==g)return;const G=is(P.name||"",P.category||"");G&&x.add(G)}),Array.from(x).sort((P,U)=>P.localeCompare(U))},[c,g]);u.useEffect(()=>{w!=="All"&&(Ze.includes(w)||N("All"))},[Ze,w]),u.useEffect(()=>{J("")},[f]);const ee=u.useMemo(()=>an((q==null?void 0:q.text)||""),[q==null?void 0:q.text]),pe=u.useMemo(()=>{const x=Array.isArray(b==null?void 0:b.invalid)?b.invalid:[];return new Set(x.map(P=>String(P).toLowerCase()))},[b]);u.useEffect(()=>{if(!q||!(j||H))return;const x=ee,P=[],U=new Set;if(x.forEach(ne=>{const Ne=String(ne).toLowerCase();!Ne||U.has(Ne)||(U.add(Ne),P.push(ne))}),!P.length){$({loading:!1,invalid:[],suggestions:{}});return}let G=!1;const ce=window.setTimeout(async()=>{$(ne=>({...ne,loading:!0}));try{const ne=await pa(P);if(G)return;$({loading:!1,invalid:Array.isArray(ne==null?void 0:ne.invalid)?ne.invalid:[],suggestions:(ne==null?void 0:ne.suggestions)||{}})}catch(ne){console.error("Failed to validate tags",ne),G||$({loading:!1,invalid:[],suggestions:{}})}},260);return()=>{G=!0,window.clearTimeout(ce)}},[j,H,q,ee]);const V=x=>{var U,G;const P=String(x||"");if(!P)return!1;try{return(G=(U=navigator.clipboard)==null?void 0:U.writeText)==null||G.call(U,P),!0}catch{return!1}},K=(x="")=>{const P=x?`?q=${encodeURIComponent(x)}`:"";e(`/tags${P}`)},re=()=>{var G;if(!q)return;const x=an(D);if(!x.length){X("Enter a tag to add.");return}const P=c.findIndex(ce=>ce.id===q.id);if(P===-1)return;let U=((G=c[P])==null?void 0:G.text)||"";x.forEach(ce=>{U=Aw(U,ce)}),O(P,"text",U),J(""),X(`Added ${x.length} tag${x.length===1?"":"s"}.`)},ie=async()=>{const x=_.trim();if(!x){X("Enter a category name.");return}const P=Array.from(new Set([...y||[],x]));h(P),R(""),X("Category added.");const U=Fd(c),G=Dd(c);T(!0);try{await i({items:U,categories:G,categoryList:P}),T(!1),X("Category saved.")}catch{X("Unable to save right now.")}},be=x=>{x&&(p(x.id),k(!0),X(""))},Ce=()=>{H&&p(""),k(!1),X("")};u.useMemo(()=>{const x=c.length,P=te.length;return s&&x===0?"Loading":x===P?`${x} aliases`:`${P} of ${x} aliases`},[c.length,te.length,s]),u.useEffect(()=>{const x=P=>{var je,ve;if(P.defaultPrevented)return;const U=P.target,G=(U==null?void 0:U.tagName)||"",ce=["INPUT","TEXTAREA","SELECT"].includes(G)||(U==null?void 0:U.isContentEditable),ne=String(P.key||"").toLowerCase(),Ne=P.metaKey||P.ctrlKey;if(Ne&&ne==="s"){P.preventDefault(),C&&!o&&Z();return}if(Ne&&ne==="n"){P.preventDefault(),F();return}if(!ce&&ne==="/"){P.preventDefault(),(ve=(je=le.current)==null?void 0:je.focus)==null||ve.call(je);return}ne==="escape"&&j&&!H&&(P.preventDefault(),Ce())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[F,Ce,C,j,Z,H,o]);const Ee=l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:Ce,children:H?"Clear selection":"Close"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:Z,disabled:o||!C,children:o?"Saving":C?"Save":"Saved"})]}),nt=q?l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"alias-editor-toolbar",children:[l.jsxs("div",{className:"alias-editor-heading",children:[l.jsx("div",{className:"alias-editor-title",children:Ie}),l.jsx("div",{className:"alias-editor-meta",children:ge})]}),l.jsxs("div",{className:"alias-editor-actions",children:[l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>Le(we),disabled:!we,title:"Previous alias",children:"Prev"}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>Le(Y),disabled:!Y,title:"Next alias",children:"Next"}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>{fe&&V(ge)?X("Token copied."):X("Copy not available on this browser.")},title:"Copy token",children:"Copy token"})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Token"}),l.jsx("div",{className:"composer-token",children:ge}),is(q.name||"",q.category||"")?l.jsxs("div",{className:"sheet-hint",children:["Subcategory: ",Fn(is(q.name||"",q.category||""))]}):null]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Friendly name"}),l.jsx("div",{className:"composer-field",children:Ie})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Alias name"}),l.jsx("input",{ref:ae,type:"text",value:q.name||"",onChange:x=>{const P=c.findIndex(U=>U.id===q.id);P!==-1&&O(P,"name",x.target.value)},placeholder:"e.g. cherry_fruit",className:"sheet-input ui-control ui-input"})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Category"}),l.jsx(Ye,{value:q.category||"",onChange:x=>{const P=c.findIndex(U=>U.id===q.id);P!==-1&&O(P,"category",x)},className:"sheet-select",size:"sm",options:[{value:"",label:"Uncategorized"},...Je.filter(Boolean).map(x=>({value:x,label:cn(x)}))]}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>I(!0),children:"Manage categories"})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Expands to"}),l.jsx("textarea",{value:q.text,onChange:x=>{const P=c.findIndex(U=>U.id===q.id);P!==-1&&O(P,"text",x.target.value)},placeholder:"Prompt text for this alias",className:"sheet-textarea ui-control ui-textarea is-compact",rows:6}),l.jsxs("div",{className:"tag-quick-add",children:[l.jsx("input",{type:"text",value:D,onChange:x=>J(x.target.value),onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),re())},placeholder:"Add tags (comma separated)",className:"ui-control ui-input tag-quick-input","aria-label":"Add tags"}),l.jsx("button",{type:"button",className:"ui-button is-compact is-primary",onClick:re,disabled:!D.trim(),children:"Add"})]}),l.jsxs("div",{className:"tag-editor-actions",children:[l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>K(""),children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Bn,{size:14}),"Open tag library"]})}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>{$(P=>({...P,loading:!0}));const x=an(q.text||"");pa(x).then(P=>{$({loading:!1,invalid:Array.isArray(P==null?void 0:P.invalid)?P.invalid:[],suggestions:(P==null?void 0:P.suggestions)||{}})}).catch(()=>$({loading:!1,invalid:[],suggestions:{}}))},disabled:b.loading,title:"Validate against danbooru_tags.md",children:b.loading?"Validating":"Validate"})]}),ee.length?l.jsx("div",{className:"tag-chip-list","aria-label":"Alias tags",children:ee.map(x=>{const P=pe.has(String(x).toLowerCase());return l.jsxs("span",{className:`tag-chip ${P?"is-invalid":""}`,children:[l.jsx("code",{className:"tag-chip-code",children:x}),l.jsx("button",{type:"button",className:"tag-chip-remove",onClick:()=>{const U=c.findIndex(G=>G.id===q.id);U!==-1&&O(U,"text",$w(q.text||"",x))},"aria-label":`Remove ${x}`,title:"Remove",children:l.jsx(rn,{size:12})})]},x)})}):l.jsx("div",{className:"sheet-hint",children:"Tip: Use the Tag library to add validated tags quickly."}),!b.loading&&Array.isArray(b.invalid)&&b.invalid.length?l.jsxs("div",{className:"tag-invalid-panel",role:"alert",children:[l.jsxs("div",{className:"tag-invalid-title",children:["Invalid tags (",b.invalid.length,")"]}),l.jsx("div",{className:"tag-invalid-body",children:b.invalid.map(x=>{var U;const P=((U=b==null?void 0:b.suggestions)==null?void 0:U[x])||[];return l.jsxs("div",{className:"tag-invalid-row",children:[l.jsxs("div",{className:"tag-invalid-tag",children:[l.jsx("code",{children:x}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>K(x),children:"Find"})]}),Array.isArray(P)&&P.length?l.jsx("div",{className:"tag-invalid-suggestions",children:P.slice(0,6).map(G=>l.jsx("button",{type:"button",className:"tag-suggestion",onClick:()=>{const ce=c.findIndex(ne=>ne.id===q.id);ce!==-1&&O(ce,"text",Mw(q.text||"",x,G))},title:`Replace ${x} with ${G}`,children:G},`${x}-${G}`))}):l.jsx("div",{className:"sheet-hint",children:"No suggestions found for this tag."})]},x)})})]}):null]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("button",{type:"button",className:"ui-button is-danger",onClick:()=>{const x=c.findIndex(P=>P.id===q.id);x!==-1&&(M(x),k(!1))},children:"Delete alias"}),l.jsx("div",{className:"sheet-hint",children:"Deleting removes it from your library. Use Save changes to persist."})]})]}):l.jsx("div",{className:"alias-editor-empty",children:"Select an alias to edit, or create a new one."});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"page-shell page-stack alias-page",children:[l.jsxs("div",{className:"page-bar",children:[l.jsx("h1",{className:"page-bar-title",children:"Aliases"}),l.jsxs("div",{className:"page-bar-actions",children:[l.jsx(zt,{size:"xs",onClick:()=>openTagLibrary({query:S||"",targetId:""}),title:"Browse danbooru tags",children:"Tags"}),l.jsx(zt,{size:"xs",variant:"primary",onClick:F,children:"Add"})]})]}),l.jsx("div",{className:"library-toolbar screen-sticky",children:l.jsxs("div",{className:"library-toolbar-inner",children:[l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:le,type:"search",value:S,onChange:x=>m(x.target.value),className:"composer-search ui-control ui-input",placeholder:"Search aliases","aria-label":"Search aliases"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>m(""),disabled:!S,children:"Clear"})]}),l.jsx(Ye,{className:"composer-subcategory-select",value:g,onChange:v,"aria-label":"Filter by category",size:"sm",options:[{value:"All",label:"Category: All"},{value:"",label:"Uncategorized"},...Je.filter(Boolean).map(x=>({value:x,label:cn(x)}))]}),l.jsx(Ye,{className:"composer-subcategory-select",value:w,onChange:N,"aria-label":"Filter by subcategory",size:"sm",options:[{value:"All",label:"Subcategory: All"},...Ze.map(x=>({value:x,label:Fn(x)}))]}),C?l.jsx("button",{type:"button",className:"ui-button is-compact is-primary",onClick:Z,disabled:o,children:o?"Saving":"Save changes"}):null]}),a?l.jsx("div",{className:"library-toolbar-status is-error",children:"Could not load aliases. Try again later."}):null,he?l.jsx("div",{className:"library-toolbar-status",children:he}):null]})}),l.jsxs("div",{className:"alias-layout",children:[l.jsx("div",{className:"alias-list",children:c.length===0&&!s?l.jsx("section",{className:"ui-panel text-center py-16",children:l.jsx("p",{className:"text-base text-[rgba(159,178,215,0.8)]",children:"No aliases yet. Add your first one."})}):l.jsxs("div",{className:"composer-alias-list",role:"list",children:[te.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases match your filters."}):null,te.map(x=>{const P=(x.category||"").trim(),U=P?`${P}:${x.name}`:x.name,G=(x.text||"").slice(0,140)+((x.text||"").length>140?"":"");return l.jsxs("button",{type:"button",role:"listitem",className:`composer-alias-item ${f===x.id?"is-selected":""}`,onClick:()=>be(x),children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:Il({name:x.name})||x.name||"Untitled"}),P?l.jsx("span",{className:"composer-alias-category",children:cn(P)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",U||"alias","$"]}),l.jsx("div",{className:"composer-alias-text",children:G||""})]},x.id)})]})}),l.jsx("aside",{className:"alias-editor-panel",children:l.jsxs("div",{className:"alias-editor-card ui-panel",children:[nt,q?l.jsx("div",{className:"alias-editor-footer",children:Ee}):null]})})]})]}),l.jsx(wt,{open:j&&!!q&&!H,onClose:Ce,title:"Alias",variant:"fullscreen",footer:Ee,children:nt}),l.jsx(wt,{open:L,onClose:()=>{I(!1),R(""),X("")},title:"Categories",variant:"sheet",footer:l.jsx("div",{className:"sheet-hint",children:"Categories help you organize aliases and improve the Insert alias picker."}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Add category"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:_,onChange:x=>R(x.target.value),placeholder:"e.g. styles",className:"sheet-input ui-control ui-input"}),l.jsx("button",{type:"button",className:"ui-button is-primary is-compact",onClick:ie,children:"Add"})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Existing"}),Je.length===0?l.jsx("div",{className:"sheet-hint",children:"No categories yet."}):l.jsx(Ye,{className:"sheet-select",value:"",onChange:x=>{x&&(v(x),I(!1))},size:"sm",placeholder:"Select a category",options:Je.filter(Boolean).map(x=>({value:x,label:cn(x)}))})]})]})}),l.jsx(wt,{open:z,onClose:()=>W(!1),title:"Fix invalid tags",variant:"fullscreen",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>W(!1),children:"Close"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>{const x=new Set(((de==null?void 0:de.invalidLower)||[]).map(P=>String(P).toLowerCase()));if(!x.size){W(!1);return}d(P=>P.map(U=>{const ce=an((U==null?void 0:U.text)||"").filter(Ne=>!x.has(String(Ne).toLowerCase())),ne=$o(ce);return ne===((U==null?void 0:U.text)||"")?U:{...U,text:ne}})),T(!0),W(!1),X("Removed invalid tags. Review and save again.")},children:"Remove invalid tags"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsx("div",{className:"sheet-section",children:l.jsxs("div",{className:"sheet-hint",children:["These aliases contain tags not found in ",l.jsx("code",{className:"font-mono",children:"danbooru_tags.md"}),". Fix them before saving."]})}),(jt=de==null?void 0:de.rows)!=null&&jt.length?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Aliases with issues"}),l.jsx("div",{className:"composer-alias-list",role:"list",children:de.rows.map(x=>l.jsxs("button",{type:"button",role:"listitem",className:"composer-alias-item",onClick:()=>{p(x.id),k(!0),W(!1)},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:x.friendlyName}),x.category?l.jsx("span",{className:"composer-alias-category",children:cn(x.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",x.token,"$"]}),l.jsx("div",{className:"tag-invalid-inline",children:x.invalid.map(P=>l.jsx("span",{className:"tag-chip is-invalid",children:l.jsx("code",{className:"tag-chip-code",children:P})},`${x.id}-${P}`))})]},x.id))})]}):null]})})]})}function Fw(e){var n,r;const t=String(e||"");if(!t)return!1;try{return(r=(n=navigator.clipboard)==null?void 0:n.writeText)==null||r.call(n,t),!0}catch{return!1}}function Dw({open:e,onClose:t,onSelectTag:n,initialQuery:r="",title:s="Tag library",contextTitle:o="",contextToken:a="",contextText:i="",contextTagCount:c=null,inline:d=!1}){const[y,h]=u.useState(r||""),[g,v]=u.useState(""),[w,N]=u.useState("count"),[S,m]=u.useState([]),[f,p]=u.useState([]),[j,k]=u.useState(0),[L,I]=u.useState(0),[b,$]=u.useState(!1),[z,W]=u.useState(!1),[de,se]=u.useState(""),[he,X]=u.useState(""),[ae,le]=u.useState([]),[C,T]=u.useState(!1),[_,R]=u.useState(null),[D,J]=u.useState(null),H=u.useRef(null),B=u.useRef(null),F=u.useRef(null),O=u.useRef(null),M=u.useRef(null),Z=f.length<j,te=d||e,q=u.useMemo(()=>ae.join(", "),[ae]),fe=u.useMemo(()=>new Set(ae.map(V=>V.toLowerCase())),[ae]),Ie=u.useCallback(V=>{const K=String(V||"").trim();K&&le(re=>new Set(re.map(be=>be.toLowerCase())).has(K.toLowerCase())?re:[...re,K])},[]),ge=u.useCallback(V=>{const K=String(V||"").trim().toLowerCase();K&&le(re=>re.filter(ie=>ie.toLowerCase()!==K))},[]),xe=u.useCallback(()=>{le([]),X("Cleared collected tags.")},[]),me=u.useCallback(()=>{var K,re;if(!ae.length){X("No tags to copy.");return}if(Fw(q)){X(`Copied ${ae.length} tag${ae.length===1?"":"s"}.`);return}const V=F.current;if(V)try{V.value=q,V.removeAttribute("readonly"),V.select(),V.setSelectionRange(0,q.length);const ie=document.execCommand&&document.execCommand("copy");if(V.setAttribute("readonly","readonly"),(re=(K=window.getSelection())==null?void 0:K.removeAllRanges)==null||re.call(K),ie){X(`Copied ${ae.length} tag${ae.length===1?"":"s"}.`);return}}catch{}X("Copy not available on this browser.")},[ae,q]),we=u.useCallback((V,K)=>{le(re=>{const ie=[...re],[be]=ie.splice(V,1);return ie.splice(K,0,be),ie})},[]);u.useCallback((V,K)=>{R(K),O.current=V.target,V.dataTransfer.effectAllowed="move",V.dataTransfer.setData("text/plain",K.toString()),requestAnimationFrame(()=>{O.current&&O.current.classList.add("is-dragging")})},[]),u.useCallback(()=>{O.current&&O.current.classList.remove("is-dragging"),_!==null&&D!==null&&_!==D&&we(_,D),R(null),J(null),O.current=null},[_,D,we]),u.useCallback((V,K)=>{V.preventDefault(),V.dataTransfer.dropEffect="move",J(K)},[]),u.useCallback(()=>{},[]),u.useCallback((V,K)=>{const re=V.touches[0];M.current={idx:K,startX:re.clientX,startY:re.clientY,moved:!1}},[]),u.useCallback(V=>{if(!M.current)return;const K=V.touches[0],re=Math.abs(K.clientX-M.current.startX),ie=Math.abs(K.clientY-M.current.startY);if(re>10||ie>10){M.current.moved=!0,R(M.current.idx),V.preventDefault();const be=document.querySelectorAll(".collected-tag-chip"),Ce=K.clientX,Ee=K.clientY;for(let nt=0;nt<be.length;nt++){const jt=be[nt].getBoundingClientRect();if(Ce>=jt.left&&Ce<=jt.right&&Ee>=jt.top&&Ee<=jt.bottom){J(nt);break}}}},[]),u.useCallback(()=>{var V;(V=M.current)!=null&&V.moved&&_!==null&&D!==null&&_!==D&&we(_,D),M.current=null,R(null),J(null)},[_,D,we]);const Y=u.useCallback(async({nextQuery:V,nextCategory:K,nextSort:re}={})=>{const ie=typeof V=="string"?V:y,be=typeof K=="string"?K:g,Ce=typeof re=="string"?re:w;$(!0),se(""),X(""),I(0);try{const Ee=await lo({q:ie,category:be,sort:Ce,limit:80,offset:0});p((Ee==null?void 0:Ee.items)||[]),k(Number((Ee==null?void 0:Ee.total)||0))}catch(Ee){console.error("Failed to search tags",Ee),se("Unable to load tags right now."),p([]),k(0)}finally{$(!1)}},[g,y,w]),Le=u.useCallback(async()=>{if(b||z||!Z)return;const V=L+80;W(!0),se("");try{const K=await lo({q:y,category:g,sort:w,limit:80,offset:V}),re=(K==null?void 0:K.items)||[];p(ie=>[...ie,...re]),k(Number((K==null?void 0:K.total)||0)),I(V)}catch(K){console.error("Failed to load more tags",K),se("Unable to load more tags.")}finally{W(!1)}},[Z,g,b,z,L,y,w]);u.useEffect(()=>{if(!te)return;se(""),X("");let V=!1;return(async()=>{try{const K=await gm();if(V)return;m(Array.isArray(K==null?void 0:K.categories)?K.categories:[])}catch(K){console.error("Failed to load tag categories",K),V||m([])}})(),()=>{V=!0}},[te]),u.useEffect(()=>{te&&(h(r||""),v(""),N("count"),p([]),k(0),I(0),$(!1),W(!1),se(""),X(""),le([]))},[r,te]),u.useEffect(()=>{if(!te)return;const V=window.setTimeout(()=>{Y()},220);return()=>window.clearTimeout(V)},[g,te,y,Y,w]),u.useEffect(()=>{if(!te)return;const V=H.current;if(!V||typeof IntersectionObserver>"u")return;const K=new IntersectionObserver(re=>{const ie=re[0];ie!=null&&ie.isIntersecting&&Le()},{threshold:.1});return K.observe(V),()=>K.disconnect()},[te,Le]);const Je=u.useMemo(()=>d?null:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:t,children:"Done"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:()=>Y(),disabled:b||z,children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(wi,{size:14}),"Refresh"]})})]}),[d,b,z,t,Y]),Ze=!!(n&&(o||a||i)),ee=Number.isFinite(c)?`${c} tags`:"",pe=l.jsxs("div",{className:`sheet-stack ${d?"tag-library-page":""}`,children:[Ze?l.jsxs("div",{className:"tag-library-context",children:[l.jsxs("div",{className:"tag-library-context-head",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"sheet-label",children:"Adding to alias"}),l.jsx("div",{className:"tag-library-context-title",children:o||"Alias"}),a?l.jsx("div",{className:"tag-library-context-token",children:a}):null]}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:t,children:"Back"})]}),l.jsx("div",{className:"tag-library-context-preview",children:i||""}),ee?l.jsx("div",{className:"tag-library-context-meta",children:ee}):null]}):null,l.jsxs("div",{className:"sheet-section",children:[d?null:l.jsx("div",{className:"sheet-label",children:"Browse"}),l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:B,type:"search",value:y,onChange:V=>h(V.target.value),placeholder:"Search tags (e.g. smile, city, sword)",className:"composer-search ui-control ui-input","aria-label":"Search tags"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>h(""),disabled:!y,children:"Clear"})]}),l.jsx(Ye,{value:g,onChange:v,className:"composer-subcategory-select","aria-label":"Filter by category",size:"sm",options:[{value:"",label:"Category: All"},...S.map(V=>({value:V.key,label:`${Fn(V.key)} (${Number(V.actual||V.count||0).toLocaleString()})`}))]}),l.jsx(Ye,{value:w,onChange:N,className:"composer-subcategory-select","aria-label":"Sort tags",size:"sm",options:[{value:"count",label:"Sort: Popular"},{value:"alpha",label:"Sort: AZ"}]})]}),he?l.jsx("div",{className:"text-xs text-[#9DA3FFCC]",children:he}):null,de?l.jsx("div",{className:"text-xs text-[#FF8F70]",children:de}):null]}),l.jsx("div",{className:"composer-alias-list tag-library-grid",role:"list",children:b?l.jsx("div",{className:"composer-alias-empty",children:"Loading tags"}):f.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No tags found."}):l.jsxs(l.Fragment,{children:[f.map(V=>l.jsx("div",{className:"tag-library-row",role:"listitem",children:l.jsxs("button",{type:"button",className:`composer-alias-item tag-library-item ${!n&&fe.has(String(V.tag||"").toLowerCase())?"is-collected":""}`,onClick:()=>{if(n){n(String(V.tag||"")),X(`Added: ${V.tag}`);return}const K=String(V.tag||"");fe.has(K.toLowerCase())?(ge(K),X(`Removed: ${V.tag}`)):(Ie(K),X(`Added: ${V.tag}`))},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name tag-library-name",children:l.jsx("code",{className:"tag-library-code",children:V.tag})}),V.category?l.jsx("span",{className:"composer-alias-category",children:Fn(V.category)}):null]}),l.jsx("div",{className:"composer-alias-token",children:Number(V.count||0).toLocaleString()})]})},`${V.tag}-${V.category}`)),l.jsx("div",{ref:H,className:"composer-sentinel"}),z?l.jsx("div",{className:"composer-alias-empty",children:"Loading more"}):null]})})]});return te?d?l.jsxs("section",{className:"tag-library-surface",children:[s?l.jsx("div",{className:"sheet-label tag-library-page-title",children:s}):null,pe,n?null:l.jsxs("div",{className:"tag-collection-bar","aria-live":"polite",children:[l.jsxs("div",{className:"tag-collection-bar-main",children:[l.jsx("div",{className:"tag-collection-bar-title",children:"Tags"}),l.jsx("div",{className:"tag-collection-bar-count","aria-live":"polite",children:ae.length===0?"No tags selected":`${ae.length} selected`})]}),l.jsx("button",{type:"button",className:"tag-collection-menu-btn",onClick:()=>T(!0),"aria-label":"Manage collected tags",children:l.jsx(Zv,{size:16})}),l.jsx("textarea",{ref:F,value:q,onChange:V=>{const K=V.target.value.split(",").map(be=>be.trim()).filter(Boolean),re=new Set,ie=[];K.forEach(be=>{const Ce=be.toLowerCase();re.has(Ce)||(re.add(Ce),ie.push(be))}),le(ie)},className:"sr-only","aria-label":"Collected tags text"})]}),n?null:l.jsx(wt,{open:C,onClose:()=>T(!1),title:"Collected tags",variant:"sheet",shouldCloseOnOverlayClick:!0,children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsxs("div",{className:"sheet-label",children:["Tags (",ae.length,")"]}),l.jsxs("div",{className:"tag-collection-codeblock",children:[l.jsx("pre",{className:"tag-collection-pre",children:q||""}),l.jsx("button",{type:"button",className:"tag-collection-copy-btn",onClick:me,disabled:ae.length===0,"aria-label":"Copy collected tags",children:l.jsx(ex,{size:16})}),l.jsx("textarea",{ref:F,value:q,readOnly:!0,className:"sr-only","aria-label":"Collected tags text"})]}),ae.length?l.jsx("div",{className:"tag-collection-chips",children:ae.map((V,K)=>l.jsxs("span",{className:"collected-tag-chip",onClick:()=>ge(V),role:"button",tabIndex:0,onKeyDown:re=>{re.target===re.currentTarget&&(re.key==="Enter"||re.key===" ")&&(re.preventDefault(),ge(V))},children:[l.jsx("code",{className:"collected-tag-code",children:V}),l.jsx("button",{type:"button",className:"collected-tag-remove","aria-label":`Remove ${V}`,onClick:re=>{re.stopPropagation(),ge(V)},children:l.jsx(rn,{size:12})})]},`${V}-${K}`))}):l.jsx("div",{className:"sheet-hint",children:"No tags collected yet."})]}),l.jsxs("div",{className:"sheet-section flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>T(!1),children:"Close"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:xe,disabled:ae.length===0,children:"Clear"})]})]})})]}):l.jsx(wt,{open:e,onClose:t,title:s,variant:"fullscreen",contentClassName:"tag-library-sheet",footer:Je,shouldCloseOnOverlayClick:!1,children:pe}):null}function Uw(){const e=sn(),[t]=dm(),n=t.get("q")||"",r=u.useMemo(()=>n?`Tag Library  ${n}`:"Tag Library",[n]);return l.jsxs("div",{className:"page-shell page-stack",children:[l.jsxs("div",{className:"page-bar",children:[l.jsx("h1",{className:"page-bar-title",children:r}),l.jsxs("div",{className:"page-bar-actions",children:[l.jsx(zt,{size:"xs",onClick:()=>e("/aliases"),children:"Aliases"}),l.jsx(zt,{size:"xs",onClick:()=>e("/compose"),children:"Composer"})]})]}),l.jsx(Dw,{inline:!0,initialQuery:n,title:"Browse",onSelectTag:null})]})}function Bw({open:e=!1,onClose:t,value:n="",onChange:r,aliasOptions:s=[],aliasCatalog:o=[],fieldLabel:a="Prompt",variant:i="sheet"}){var Dc,Uc,Bc;const c=u.useRef(null),d=u.useRef(null),y=u.useRef(null),h=u.useRef(null),[g,v]=u.useState(n),[w,N]=u.useState(""),[S,m]=u.useState("All"),[f,p]=u.useState("All"),[j,k]=u.useState(30),[L,I]=u.useState("compose"),[b,$]=u.useState(null),[z,W]=u.useState(null),[de,se]=u.useState(null),he=u.useRef(null),X=u.useRef(null),[ae,le]=u.useState(!1),[C,T]=u.useState(null),_=u.useRef(null),R=u.useRef(null),[D,J]=u.useState(""),[H,B]=u.useState(""),[F,O]=u.useState("count"),[M,Z]=u.useState([]),[te,q]=u.useState([]),[fe,Ie]=u.useState(0),[ge,xe]=u.useState(0),[me,we]=u.useState(!1),[Y,Le]=u.useState(!1),[Je,Ze]=u.useState(""),[ee,pe]=u.useState([]),[V,K]=u.useState(""),[re,ie]=u.useState([]),[be,Ce]=u.useState("");u.useEffect(()=>{e&&(v(n),I("compose"),N(""),m("All"),p("All"),k(30),$(null),W(null),se(null),le(!1),T(null),St(""),J(""),B(""),O("count"),q([]),Ie(0),xe(0),we(!1),Le(!1),Ze(""))},[e,n]),u.useEffect(()=>{if(b===null||typeof document>"u")return;const E=document.querySelector("main.app-content"),A={htmlOverscroll:document.documentElement.style.overscrollBehavior,bodyOverscroll:document.body.style.overscrollBehavior,bodyOverflow:document.body.style.overflow,scrollOverflow:E==null?void 0:E.style.overflow,scrollTouch:E==null?void 0:E.style.touchAction,scrollOverscroll:E==null?void 0:E.style.overscrollBehavior};return document.documentElement.style.overscrollBehavior="none",document.body.style.overscrollBehavior="none",document.body.style.overflow="hidden",E&&(E.style.overflow="hidden",E.style.touchAction="none",E.style.overscrollBehavior="none"),()=>{document.documentElement.style.overscrollBehavior=A.htmlOverscroll||"",document.body.style.overscrollBehavior=A.bodyOverscroll||"",document.body.style.overflow=A.bodyOverflow||"",E&&(E.style.overflow=A.scrollOverflow||"",E.style.touchAction=A.scrollTouch||"",E.style.overscrollBehavior=A.scrollOverscroll||"")}},[b]);const Ee=u.useMemo(()=>(Array.isArray(o)?o.filter(E=>E&&E.name):[]).map(E=>({...E,...Rc(E)})),[o]),nt=u.useMemo(()=>{const E=new Map;return Ee.forEach(A=>{A!=null&&A.token&&E.set(String(A.token).toLowerCase(),A)}),E},[Ee]),jt=u.useMemo(()=>{const E=new Set(["All"]);return Ee.forEach(A=>{A.category&&E.add(A.category)}),Array.from(E).sort((A,ue)=>A.localeCompare(ue))},[Ee]),x=u.useMemo(()=>{const E=new Set(["All"]);return Ee.forEach(A=>{(!S||S==="All"||A.category===S)&&A.subcategory&&E.add(A.subcategory)}),Array.from(E).sort((A,ue)=>A.localeCompare(ue))},[Ee,S]),P=u.useMemo(()=>["All",...jt.filter(E=>E!=="All")],[jt]),U=u.useMemo(()=>["All",...x.filter(E=>E!=="All")],[x]),G=u.useMemo(()=>{const E=w.trim().toLowerCase();return Ee.filter(A=>{var ue,ye,Ge,Re;return S!=="All"&&(A.category||"")!==S||f!=="All"&&(A.subcategory||"other")!==f?!1:E?((ue=A.token)==null?void 0:ue.toLowerCase().includes(E))||((ye=A.text)==null?void 0:ye.toLowerCase().includes(E))||((Ge=A.name)==null?void 0:Ge.toLowerCase().includes(E))||((Re=A.displayName)==null?void 0:Re.toLowerCase().includes(E)):!0}).sort((A,ue)=>{const ye=(A.subcategory||"").toLowerCase(),Ge=(ue.subcategory||"").toLowerCase();return ye!==Ge?ye.localeCompare(Ge):A.token.localeCompare(ue.token)})},[Ee,S,f,w]),ce=u.useMemo(()=>G.slice(0,j),[G,j]);u.useEffect(()=>{k(30)},[S,f,w,Ee]),u.useEffect(()=>{p("All")},[S]),u.useEffect(()=>{const E=y.current;if(!E)return;const A=new IntersectionObserver(ue=>{ue[0].isIntersecting&&j<G.length&&k(Ge=>Math.min(Ge+20,G.length))},{threshold:.1});return A.observe(E),()=>A.disconnect()},[j,G.length]);const ne=u.useMemo(()=>typeof g!="string"?[]:jx(g),[g]);u.useEffect(()=>{if(!e||L!=="tags"||M.length>0)return;let E=!1;return(async()=>{try{const A=await gm();if(E)return;Z(Array.isArray(A==null?void 0:A.categories)?A.categories:[])}catch(A){console.error("Failed to load tag categories",A),E||Z([])}})(),()=>{E=!0}},[e,L,M.length]);const Ne=u.useCallback(async({nextQuery:E,nextCategory:A,nextSort:ue}={})=>{const ye=typeof E=="string"?E:D,Ge=typeof A=="string"?A:H,Re=typeof ue=="string"?ue:F;we(!0),Ze(""),xe(0);try{const Ke=await lo({q:ye,category:Ge,sort:Re,limit:80,offset:0});q((Ke==null?void 0:Ke.items)||[]),Ie(Number((Ke==null?void 0:Ke.total)||0))}catch(Ke){console.error("Failed to search tags",Ke),Ze("Unable to load tags right now."),q([]),Ie(0)}finally{we(!1)}},[H,D,F]),je=u.useCallback(async()=>{if(me||Y||te.length>=fe)return;const E=ge+80;Le(!0),Ze("");try{const A=await lo({q:D,category:H,sort:F,limit:80,offset:E}),ue=(A==null?void 0:A.items)||[];q(ye=>[...ye,...ue]),Ie(Number((A==null?void 0:A.total)||0)),xe(E)}catch(A){console.error("Failed to load more tags",A),Ze("Unable to load more tags.")}finally{Le(!1)}},[H,me,Y,ge,D,F,te.length,fe]);u.useEffect(()=>{if(!e||L!=="tags")return;const E=window.setTimeout(()=>{Ne()},220);return()=>window.clearTimeout(E)},[e,L,D,H,F,Ne]),u.useEffect(()=>{if(!e||L!=="tags")return;const E=R.current;if(!E||typeof IntersectionObserver>"u")return;const A=new IntersectionObserver(ue=>{const ye=ue[0];ye!=null&&ye.isIntersecting&&je()},{threshold:.1});return A.observe(E),()=>A.disconnect()},[e,L,je]);const ve=fe?`${te.length.toLocaleString()} / ${fe.toLocaleString()}`:`${te.length.toLocaleString()}`,Te=u.useCallback(E=>{v(A=>{const ye=typeof E=="function"?E(typeof A=="string"?A:""):String(E||"");return i==="page"&&(r==null||r(ye)),ye})},[r,i]),mt=u.useCallback(E=>{const A=String(E||"").trim();if(A&&(Te(ue=>{const ye=ue.length,Ge=ue.length,Re=ue.slice(0,ye),Ke=ue.slice(Ge),Pe=Re.match(/[^\s]$/),Qn=Ke.match(/^[^\s]/),Zm=Pe&&Pe[0]!==","?", ":"",eh=Qn&&Qn[0]!==","?", ":"";return Re+Zm+A+eh+Ke}),c.current))try{c.current.blur()}catch{}},[Te]),[We,St]=u.useState(""),Kt=u.useCallback(()=>{const E=String(We||"").trim();if(!E)return;const ue=E.split(",").map(ye=>ye.trim()).filter(Boolean).join(", ");ue&&(mt(ue),St(""),I("compose"))},[We,mt]),Kn=u.useCallback(()=>{pe([]),K("Cleared collected tags.")},[]),Mo=u.useCallback(E=>{const A=String(E||"").trim().toLowerCase();A&&pe(ue=>ue.filter(ye=>ye.toLowerCase()!==A))},[]),Ys=u.useCallback(()=>{if(!ee.length){K("No tags to apply.");return}mt(ee.join(", ")),K(`Applied ${ee.length} tag${ee.length===1?"":"s"}.`),pe([]),I("compose")},[ee,mt]),qs=u.useCallback(E=>{const A=String(E||"").trim();A&&pe(ue=>{const ye=A.toLowerCase();return ue.some(Re=>Re.toLowerCase()===ye)?(K(`Removed: ${A}`),ue.filter(Re=>Re.toLowerCase()!==ye)):(K(`Selected: ${A}`),[...ue,A])})},[]),Xs=u.useCallback(E=>{const A=String(E||"").trim();A&&ie(ue=>{const ye=A.toLowerCase();return ue.some(Re=>Re.toLowerCase()===ye)?(Ce(`Removed: ${A}`),ue.filter(Re=>Re.toLowerCase()!==ye)):(Ce(`Selected: ${A}`),[...ue,A])})},[]),Js=u.useCallback(()=>{ie([]),Ce("Cleared selected aliases.")},[]),Um=u.useCallback(E=>{const A=String(E||"").trim().toLowerCase();A&&ie(ue=>ue.filter(ye=>ye.toLowerCase()!==A))},[]),Bm=u.useCallback(()=>{if(!re.length){Ce("No aliases to apply.");return}const E=re.map(A=>`$${A}$`).join(", ");mt(E),Ce(`Applied ${re.length} alias${re.length===1?"":"es"}.`),ie([]),I("compose")},[re,mt]),Tc=E=>{Te(A=>Sx(A||"",E))},Ac=u.useCallback((E,A)=>{if(!(ne!=null&&ne.length))return;const ue=E+A;ue<0||ue>=ne.length||(Te(ye=>xd(ye||"",ne,E,ue)),se(ue))},[ne,Te]),$c=E=>{if(!E)return;let A=E.text;if(E.type==="alias"){const ye=nt.get(E.text.toLowerCase());A=(ye==null?void 0:ye.displayName)||E.text}const ue=yd(g||"",E);T({element:E,displayName:A,weight:(ue==null?void 0:ue.weight)??1}),le(!0)},Zs=u.useCallback((E,A)=>{E===A||E===null||A===null||ne!=null&&ne.length&&Te(ue=>xd(ue||"",ne,E,A))},[ne,Te]),Wm=u.useCallback((E,A)=>{$(A),he.current=E.target,E.dataTransfer.effectAllowed="move",E.dataTransfer.setData("text/plain",A.toString()),requestAnimationFrame(()=>{he.current&&he.current.classList.add("is-dragging")})},[]),Vm=u.useCallback(()=>{he.current&&he.current.classList.remove("is-dragging"),b!==null&&z!==null&&b!==z&&Zs(b,z),$(null),W(null),he.current=null},[b,z,Zs]),Hm=u.useCallback((E,A)=>{E.preventDefault(),E.dataTransfer.dropEffect="move",A!==z&&W(A)},[z]),Gm=u.useCallback(()=>{},[]),Km=u.useCallback((E,A)=>{var Re,Ke;if(!((Ke=(Re=E.target)==null?void 0:Re.closest)==null?void 0:Ke.call(Re,".composer-token-drag-handle")))return;const ye=E.touches[0],Ge=window.setTimeout(()=>{X.current&&(X.current.active=!0,$(A),W(A))},240);X.current={idx:A,startX:ye.clientX,startY:ye.clientY,active:!1,timer:Ge}},[]),Qm=u.useCallback(E=>{if(!X.current)return;const A=E.touches[0],ue=Math.abs(A.clientX-X.current.startX),ye=Math.abs(A.clientY-X.current.startY);if(!X.current.active){(ue>8||ye>8)&&(window.clearTimeout(X.current.timer),X.current=null);return}E.preventDefault();const Ge=document.querySelectorAll(".composer-token-draggable"),Re=A.clientX,Ke=A.clientY;for(let Pe=0;Pe<Ge.length;Pe++){const Qn=Ge[Pe].getBoundingClientRect();if(Re>=Qn.left&&Re<=Qn.right&&Ke>=Qn.top&&Ke<=Qn.bottom){W(Pe);break}}},[]),Ym=u.useCallback(()=>{var E,A;(E=X.current)!=null&&E.timer&&window.clearTimeout(X.current.timer),(A=X.current)!=null&&A.active&&b!==null&&z!==null&&b!==z&&Zs(b,z),X.current=null,$(null),W(null)},[b,z,Zs]),qm=u.useCallback(()=>{var E;(E=X.current)!=null&&E.timer&&window.clearTimeout(X.current.timer),X.current=null,$(null),W(null)},[]),Xm=()=>{r==null||r(g),t==null||t()},Mc=()=>{t==null||t()},Oo=i==="page";if(!(Oo||e))return null;const Oc=l.jsxs("div",{className:`composer-shell ${Oo?"is-page":""}`,children:[l.jsx(Tr,{ariaLabel:"Composer tabs",value:L,onChange:I,items:[{key:"compose",label:"Compose",icon:l.jsx(Lc,{size:14})},{key:"aliases",label:"Aliases",icon:l.jsx(Qs,{size:14})},{key:"tags",label:"Tags",icon:l.jsx(Bn,{size:14})}]}),l.jsxs("div",{className:`composer-panel composer-panel-compose ${L==="compose"?"is-visible":""}`,children:[l.jsx("div",{className:"composer-editor",children:l.jsxs("div",{className:"composer-input-row",children:[l.jsx("input",{ref:c,type:"text",value:We,onChange:E=>St(E.target.value),onKeyDown:E=>{E.key==="Enter"&&(E.preventDefault(),Kt())},className:"composer-input ui-control ui-input is-compact",placeholder:"Add prompt text","aria-label":"Add prompt text"}),l.jsx("button",{type:"button",className:"composer-add-btn",onClick:Kt,disabled:!We.trim(),"aria-label":"Add prompt text",children:"+"})]})}),l.jsxs("div",{className:"composer-tokens",children:[l.jsxs("div",{className:"composer-tokens-header",children:[l.jsxs("span",{className:"composer-tokens-label",children:["Elements",l.jsx("span",{className:"composer-tokens-count",children:ne.length})]}),l.jsx("span",{className:"composer-tokens-hint",children:"Drag to reorder  Tap to adjust"})]}),ne.length?l.jsx("div",{ref:h,className:`composer-tokens-list ${b!==null?"is-dragging":""}`,children:ne.map((E,A)=>{let ue=E.text;if(E.type==="alias"){const Pe=nt.get(E.text.toLowerCase());ue=(Pe==null?void 0:Pe.displayName)||E.text}const ye=b===A,Ge=z===A&&b!==null&&b!==A,Re=yd(g||"",E),Ke=(Re==null?void 0:Re.weight)??1;return l.jsxs("span",{className:`composer-token composer-token-draggable ${E.type==="alias"?"is-alias":"is-tag"} ${ye?"is-dragging":""} ${Ge?"is-drop-target":""} ${de===A?"is-selected":""}`,title:E.type==="alias"?`Alias: $${E.text}$`:`Tag: ${E.text}`,role:"button",tabIndex:0,draggable:!0,onDragStart:Pe=>Wm(Pe,A),onDragEnd:Vm,onDragOver:Pe=>Hm(Pe,A),onDragLeave:Gm,onTouchStart:Pe=>Km(Pe,A),onTouchMove:Qm,onTouchEnd:Ym,onTouchCancel:qm,onClick:()=>{b===null&&(se(A),$c(E))},onKeyDown:Pe=>{if(Pe.target===Pe.currentTarget&&(Pe.key==="Enter"||Pe.key===" ")){if(Pe.preventDefault(),b!==null)return;se(A),$c(E)}},children:[l.jsx("span",{className:"composer-token-order",children:A+1}),l.jsx("span",{className:"composer-token-drag-handle","aria-hidden":"true",children:l.jsx(ji,{size:10})}),l.jsx("span",{className:"composer-token-name",children:ue}),E.type==="alias"&&l.jsx("span",{className:"composer-token-type",children:"$"}),Math.abs(Ke-1)>1e-6&&l.jsxs("span",{className:"composer-token-weight",children:[fn(Ke),""]}),l.jsxs("div",{className:"composer-token-shift",role:"group","aria-label":"Reorder token",children:[l.jsx("button",{type:"button",className:"composer-token-shift-btn",onClick:Pe=>{Pe.stopPropagation(),Ac(A,-1)},"aria-label":"Move up",disabled:A===0,children:""}),l.jsx("button",{type:"button",className:"composer-token-shift-btn",onClick:Pe=>{Pe.stopPropagation(),Ac(A,1)},"aria-label":"Move down",disabled:A===ne.length-1,children:""})]}),l.jsx("button",{type:"button",className:"composer-token-remove",onClick:Pe=>{Pe.stopPropagation(),Tc(E)},"aria-label":`Remove ${E.text}`,children:l.jsx(rn,{size:9})})]},`${E.type}-${E.text}-${E.start}`)})}):l.jsx("div",{className:"composer-empty",children:"No elements yet."})]}),l.jsxs("div",{className:"composer-expanded",children:[l.jsxs("div",{className:"composer-expanded-header",children:[l.jsx("span",{className:"composer-expanded-label",children:"Expanded prompt"}),l.jsx("span",{className:"composer-expanded-meta",children:g?`${g.length} chars`:"Empty"})]}),l.jsx("div",{className:"composer-expanded-box","aria-label":"Expanded prompt",children:g||"No prompt yet."})]})]}),l.jsxs("div",{className:`composer-panel composer-panel-aliases ${L==="aliases"?"is-visible":""}`,children:[l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:d,type:"text",value:w,onChange:E=>N(E.target.value),placeholder:"Search aliases",className:"composer-search ui-control ui-input","aria-label":"Search aliases"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>N(""),disabled:!w,children:"Clear"})]}),l.jsx(Ye,{value:S,onChange:m,className:"composer-subcategory-select","aria-label":"Filter by category",size:"sm",options:P.map(E=>({value:E,label:E==="All"?"Category: All":cn(E)}))}),U.length>2&&l.jsx(Ye,{value:f,onChange:p,className:"composer-subcategory-select",size:"sm",options:U.map(E=>({value:E,label:E==="All"?"All subcategories":Fn(E)}))})]}),l.jsxs("div",{className:"composer-tag-collection-bar is-sticky",children:[l.jsxs("div",{children:[l.jsx("div",{className:"composer-tag-collection-label",children:re.length?`${re.length} selected`:"No aliases selected"}),be?l.jsx("div",{className:"composer-tag-collection-status",children:be}):null]}),l.jsxs("div",{className:"composer-tag-collection-actions",children:[l.jsx("button",{type:"button",className:"composer-tag-collection-btn",onClick:Js,disabled:!re.length,children:"Clear"}),l.jsx("button",{type:"button",className:"composer-tag-collection-btn is-primary",onClick:Bm,disabled:!re.length,children:"Apply"})]})]}),re.length?l.jsxs("div",{className:"composer-collection-inline",role:"list",children:[re.slice(0,3).map(E=>{const A=nt.get(E.toLowerCase()),ue=(A==null?void 0:A.displayName)||E;return l.jsxs("button",{type:"button",className:"collected-tag-chip",onClick:()=>Um(E),"aria-label":`Remove ${E}`,title:`$${E}$`,children:[l.jsx("code",{className:"collected-tag-code",children:ue}),l.jsx(rn,{size:12})]},E)}),re.length>3?l.jsxs("div",{className:"collected-tag-chip tag-overflow-chip","aria-hidden":"true",children:["+",re.length-3," more"]}):null]}):null,l.jsx("div",{className:"composer-alias-list",children:G.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases found."}):l.jsxs(l.Fragment,{children:[ce.map(E=>l.jsxs("button",{type:"button",onClick:()=>Xs(E.token),className:`composer-alias-item ${re.some(A=>A.toLowerCase()===E.token.toLowerCase())?"is-collected":""}`,children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:E.displayName||E.token}),E.category?l.jsx("span",{className:"composer-alias-category",children:cn(E.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",E.token,"$"]}),l.jsx("div",{className:"composer-alias-text",children:E.text})]},E.key)),j<G.length&&l.jsx("div",{ref:y,className:"composer-sentinel"})]})})]}),l.jsxs("div",{className:`composer-panel composer-panel-tags ${L==="tags"?"is-visible":""}`,onClick:E=>E.stopPropagation(),children:[l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:_,type:"search",value:D,onChange:E=>J(E.target.value),placeholder:"Search tags (e.g. smile, city, sword)",className:"composer-search ui-control ui-input","aria-label":"Search tags"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>J(""),disabled:!D,children:"Clear"})]}),l.jsx(Ye,{value:H,onChange:B,className:"composer-subcategory-select","aria-label":"Filter by category",size:"sm",options:[{value:"",label:"Category: All"},...M.map(E=>({value:E.key,label:`${Fn(E.key)} (${Number(E.actual||E.count||0).toLocaleString()})`}))]}),l.jsx(Ye,{value:F,onChange:O,className:"composer-subcategory-select","aria-label":"Sort tags",size:"sm",options:[{value:"count",label:"Sort: Popular"},{value:"alpha",label:"Sort: AZ"}]})]}),l.jsx("div",{className:"composer-tags-header",children:l.jsx("div",{className:"composer-tags-hint",children:l.jsx("span",{className:"ml-3 opacity-80",children:ve})})}),l.jsxs("div",{className:"composer-tag-collection-bar is-sticky",children:[l.jsxs("div",{children:[l.jsx("div",{className:"composer-tag-collection-label",children:ee.length?`${ee.length} selected`:"No tags selected"}),V?l.jsx("div",{className:"composer-tag-collection-status",children:V}):null]}),l.jsxs("div",{className:"composer-tag-collection-actions",children:[l.jsx("button",{type:"button",className:"composer-tag-collection-btn",onClick:Kn,disabled:!ee.length,children:"Clear"}),l.jsx("button",{type:"button",className:"composer-tag-collection-btn is-primary",onClick:Ys,disabled:!ee.length,children:"Apply"})]})]}),ee.length?l.jsxs("div",{className:"composer-collection-inline",role:"list",children:[ee.slice(0,3).map(E=>l.jsxs("button",{type:"button",className:"collected-tag-chip",onClick:()=>Mo(E),"aria-label":`Remove ${E}`,children:[l.jsx("code",{className:"collected-tag-code",children:E}),l.jsx(rn,{size:12})]},E)),ee.length>3?l.jsxs("div",{className:"collected-tag-chip tag-overflow-chip","aria-hidden":"true",children:["+",ee.length-3," more"]}):null]}):null,Je?l.jsx("div",{className:"composer-tags-error",children:Je}):null,l.jsx("div",{className:"composer-alias-list composer-tags-grid",role:"list",children:me?l.jsx("div",{className:"composer-alias-empty",children:"Loading tags"}):te.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No tags found."}):l.jsxs(l.Fragment,{children:[te.map(E=>{const A=ee.some(ue=>ue.toLowerCase()===String(E.tag||"").toLowerCase());return l.jsxs("button",{type:"button",className:`composer-alias-item composer-tag-item ${A?"is-collected":""}`,onClick:ue=>{ue.stopPropagation(),qs(E.tag)},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name composer-tag-name",children:l.jsx("code",{className:"composer-tag-code",children:E.tag})}),E.category?l.jsx("span",{className:"composer-alias-category",children:Fn(E.category)}):null]}),l.jsx("div",{className:"composer-alias-token composer-tag-count",children:Number(E.count||0).toLocaleString()})]},`${E.tag}-${E.category}`)}),te.length<fe&&l.jsx("div",{ref:R,className:"composer-sentinel"}),Y?l.jsx("div",{className:"composer-alias-empty",children:"Loading more"}):null]})})]})]}),Fc=l.jsx(Ci,{open:ae,onClose:()=>le(!1),title:((Dc=C==null?void 0:C.element)==null?void 0:Dc.type)==="alias"?"Alias strength":"Tag strength",tokenLabel:C?((Uc=C.element)==null?void 0:Uc.type)==="alias"?`${C.displayName}  $${(Bc=C.element)==null?void 0:Bc.text}$`:C.displayName:"",weight:(C==null?void 0:C.weight)??1,onApply:E=>{C!=null&&C.element&&Te(A=>vd(A||"",C.element,E))},onRemoveWeight:()=>{C!=null&&C.element&&Te(E=>vd(E||"",C.element,null))},onDeleteToken:()=>{C!=null&&C.element&&Tc(C.element)}}),Jm=l.jsx("div",{className:"page-bar composer-bar",children:l.jsx("h1",{className:"page-bar-title",children:a||"Prompt"})});return Oo?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"page-shell page-stack",children:[Jm,Oc]}),Fc]}):l.jsxs(l.Fragment,{children:[l.jsx(wt,{open:e,onClose:Mc,title:"Composer",variant:"fullscreen",shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:Mc,children:"Cancel"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:Xm,children:"Apply"})]}),children:Oc}),Fc]})}function Ww(){const e=sn(),[t]=dm(),{formData:n,handleFormChange:r,aliasOptions:s,aliasCatalog:o,promptFieldName:a,handleGenerate:i,workflowData:c,selectedWorkflow:d,isLoading:y}=Dm(),g=t.get("field")||a||"prompt",v=(n==null?void 0:n[g])||"";return u.useEffect(()=>{if(!(typeof document>"u"))return document.body.classList.add("no-pull-refresh"),document.documentElement.classList.add("no-pull-refresh"),()=>{document.body.classList.remove("no-pull-refresh"),document.documentElement.classList.remove("no-pull-refresh")}},[]),u.useEffect(()=>{const w=()=>{!c||!d||y||i()};return window.addEventListener("cozygen:request-render",w),()=>window.removeEventListener("cozygen:request-render",w)},[i,y,d,c]),l.jsx(Bw,{open:!0,onClose:()=>e("/controls"),value:v,onChange:w=>r(g,w),aliasOptions:s,aliasCatalog:o,fieldLabel:g,variant:"page"})}function Vw(){var m,f;const{authed:e,ready:t,login:n}=Ro(),r=sn(),o=((f=(m=Pt().state)==null?void 0:m.from)==null?void 0:f.pathname)||"/studio",[a,i]=u.useState(""),[c,d]=u.useState(""),[y,h]=u.useState(""),[g,v]=u.useState(!1),[w,N]=u.useState(!1);u.useEffect(()=>{try{localStorage.getItem("cozygen_idle_logout")&&(N(!0),localStorage.removeItem("cozygen_idle_logout"))}catch{}},[]),u.useEffect(()=>{t&&e&&r(o,{replace:!0})},[t,e,o,r]);const S=async p=>{p.preventDefault(),h(""),v(!0);try{await n(a,c),r(o,{replace:!0})}catch(j){j!=null&&j.unauthorized?h("Invalid username or password."):h("Unable to sign in. Please try again.")}finally{v(!1)}};return l.jsx("div",{className:"login-shell",children:l.jsxs("div",{className:"neon-card login-card",children:[l.jsxs("div",{className:"login-brand",children:[l.jsx(Sm,{size:34}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"login-title",children:"Sign in"}),l.jsx("div",{className:"login-subtitle",children:"Continue to CozyGen Studio"})]})]}),l.jsxs("form",{className:"login-form",onSubmit:S,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"login-username",className:"login-label",children:"Username"}),l.jsx("input",{id:"login-username",type:"text",className:"ui-control ui-input",value:a,onChange:p=>i(p.target.value),autoComplete:"username",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"login-password",className:"login-label",children:"Password"}),l.jsx("input",{id:"login-password",type:"password",className:"ui-control ui-input",value:c,onChange:p=>d(p.target.value),autoComplete:"current-password",required:!0})]}),y?l.jsx("div",{className:"ui-alert",children:y}):w?l.jsx("div",{className:"ui-alert is-warn",children:"You were signed out due to inactivity. Please sign in again."}):null,l.jsx("button",{type:"submit",disabled:g,className:"ui-button is-primary w-full",children:g?"Signing in":"Sign in"})]}),l.jsxs("p",{className:"login-footnote",children:["Access is protected by CozyGen auth. Set ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /"," ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server to enable."]})]})})}function Hw({containerRef:e}){const{pathname:t,hash:n}=Pt();return u.useEffect(()=>{if(n)return;const r=e==null?void 0:e.current;if(r&&typeof r.scrollTo=="function"){r.scrollTo({top:0,left:0,behavior:"auto"});return}typeof window<"u"&&window.scrollTo(0,0)},[t,n,e]),null}function Gw({children:e}){const{authed:t,ready:n}=Ro(),r=Pt();return n?t?e:l.jsx(hi,{to:"/login",state:{from:r},replace:!0}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-200",children:l.jsxs("div",{className:"page-loading",children:[l.jsx("span",{className:"loading-spinner lg","aria-hidden":"true"}),l.jsx("span",{className:"sr-only",children:"Checking session"})]})})}function Kw(){const{pathname:e}=Pt(),t=sn(),{defaultCreds:n,authed:r}=Ro(),s=e==="/login",o=u.useRef(null),a=!s,i=a;return u.useEffect(()=>{if(!r)return;const c=d=>{var g;const y=String(((g=d==null?void 0:d.detail)==null?void 0:g.fieldName)||"").trim(),h=y?`?field=${encodeURIComponent(y)}`:"";t(`/compose${h}`)};return window.addEventListener("cozygen:open-composer",c),()=>window.removeEventListener("cozygen:open-composer",c)},[r,t]),l.jsxs("div",{className:"app-shell",children:[!s&&l.jsx(nx,{isMobileAlignedNav:a}),!s&&r&&n&&l.jsxs("div",{className:"flex-shrink-0 bg-amber-500/10 text-amber-200 border-b border-amber-400/50 px-4 py-2 text-sm text-center",children:["Default CozyGen credentials are still in use. Change ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server."]}),l.jsx(Hw,{containerRef:o}),l.jsxs("div",{className:"app-body",children:[l.jsx("main",{ref:o,className:s?"app-content is-login":"app-content",children:l.jsxs(wv,{children:[l.jsx(Ft,{path:"/login",element:l.jsx(Vw,{})}),l.jsxs(Ft,{element:l.jsx(Gw,{children:l.jsx(gw,{children:l.jsx(vv,{})})}),children:[l.jsx(Ft,{path:"/",element:l.jsx(hi,{to:"/studio",replace:!0})}),l.jsx(Ft,{path:"/studio",element:l.jsx(xw,{})}),l.jsx(Ft,{path:"/controls",element:l.jsx(vw,{})}),l.jsx(Ft,{path:"/compose",element:l.jsx(Ww,{})}),l.jsx(Ft,{path:"/gallery",element:l.jsx(zw,{})}),l.jsx(Ft,{path:"/aliases",element:l.jsx(Ow,{})}),l.jsx(Ft,{path:"/tags",element:l.jsx(Uw,{})})]}),l.jsx(Ft,{path:"*",element:l.jsx(hi,{to:"/studio",replace:!0})})]})}),i?l.jsx(lx,{}):null]})]})}function Qw(){return l.jsx(Pv,{children:l.jsx(Qv,{children:l.jsx(Kw,{})})})}wa.createRoot(document.getElementById("root")).render(l.jsx(_t.StrictMode,{children:l.jsx(Qw,{})}));
