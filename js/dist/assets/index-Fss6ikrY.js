function Dm(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in e)){const s=Object.getOwnPropertyDescriptor(r,l);s&&Object.defineProperty(e,l,s.get?s:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();function Cd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $m(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var l=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,l.get?l:{enumerable:!0,get:function(){return e[r]}})}),n}var kd={exports:{}},lo={},Ed={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ml=Symbol.for("react.element"),Um=Symbol.for("react.portal"),Bm=Symbol.for("react.fragment"),Wm=Symbol.for("react.strict_mode"),Vm=Symbol.for("react.profiler"),Hm=Symbol.for("react.provider"),Gm=Symbol.for("react.context"),Km=Symbol.for("react.forward_ref"),Qm=Symbol.for("react.suspense"),Ym=Symbol.for("react.memo"),qm=Symbol.for("react.lazy"),_u=Symbol.iterator;function Jm(e){return e===null||typeof e!="object"?null:(e=_u&&e[_u]||e["@@iterator"],typeof e=="function"?e:null)}var _d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fd=Object.assign,Pd={};function Rr(e,t,n){this.props=e,this.context=t,this.refs=Pd,this.updater=n||_d}Rr.prototype.isReactComponent={};Rr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ad(){}Ad.prototype=Rr.prototype;function wi(e,t,n){this.props=e,this.context=t,this.refs=Pd,this.updater=n||_d}var Ni=wi.prototype=new Ad;Ni.constructor=wi;Fd(Ni,Rr.prototype);Ni.isPureReactComponent=!0;var Fu=Array.isArray,Ld=Object.prototype.hasOwnProperty,ji={current:null},Od={key:!0,ref:!0,__self:!0,__source:!0};function Rd(e,t,n){var r,l={},s=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)Ld.call(t,r)&&!Od.hasOwnProperty(r)&&(l[r]=t[r]);var i=arguments.length-2;if(i===1)l.children=n;else if(1<i){for(var u=Array(i),d=0;d<i;d++)u[d]=arguments[d+2];l.children=u}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)l[r]===void 0&&(l[r]=i[r]);return{$$typeof:Ml,type:e,key:s,ref:a,props:l,_owner:ji.current}}function Xm(e,t){return{$$typeof:Ml,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Si(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ml}function Zm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Pu=/\/+/g;function Fo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Zm(""+e.key):t.toString(36)}function ds(e,t,n,r,l){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ml:case Um:a=!0}}if(a)return a=e,l=l(a),e=r===""?"."+Fo(a,0):r,Fu(l)?(n="",e!=null&&(n=e.replace(Pu,"$&/")+"/"),ds(l,t,n,"",function(d){return d})):l!=null&&(Si(l)&&(l=Xm(l,n+(!l.key||a&&a.key===l.key?"":(""+l.key).replace(Pu,"$&/")+"/")+e)),t.push(l)),1;if(a=0,r=r===""?".":r+":",Fu(e))for(var i=0;i<e.length;i++){s=e[i];var u=r+Fo(s,i);a+=ds(s,t,n,u,l)}else if(u=Jm(e),typeof u=="function")for(e=u.call(e),i=0;!(s=e.next()).done;)s=s.value,u=r+Fo(s,i++),a+=ds(s,t,n,u,l);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Kl(e,t,n){if(e==null)return e;var r=[],l=0;return ds(e,r,"","",function(s){return t.call(n,s,l++)}),r}function eh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rt={current:null},fs={transition:null},th={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:fs,ReactCurrentOwner:ji};function Td(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Kl,forEach:function(e,t,n){Kl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Kl(e,function(){t++}),t},toArray:function(e){return Kl(e,function(t){return t})||[]},only:function(e){if(!Si(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};me.Component=Rr;me.Fragment=Bm;me.Profiler=Vm;me.PureComponent=wi;me.StrictMode=Wm;me.Suspense=Qm;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=th;me.act=Td;me.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Fd({},e.props),l=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=ji.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(u in t)Ld.call(t,u)&&!Od.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&i!==void 0?i[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){i=Array(u);for(var d=0;d<u;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:Ml,type:e.type,key:l,ref:s,props:r,_owner:a}};me.createContext=function(e){return e={$$typeof:Gm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Hm,_context:e},e.Consumer=e};me.createElement=Rd;me.createFactory=function(e){var t=Rd.bind(null,e);return t.type=e,t};me.createRef=function(){return{current:null}};me.forwardRef=function(e){return{$$typeof:Km,render:e}};me.isValidElement=Si;me.lazy=function(e){return{$$typeof:qm,_payload:{_status:-1,_result:e},_init:eh}};me.memo=function(e,t){return{$$typeof:Ym,type:e,compare:t===void 0?null:t}};me.startTransition=function(e){var t=fs.transition;fs.transition={};try{e()}finally{fs.transition=t}};me.unstable_act=Td;me.useCallback=function(e,t){return rt.current.useCallback(e,t)};me.useContext=function(e){return rt.current.useContext(e)};me.useDebugValue=function(){};me.useDeferredValue=function(e){return rt.current.useDeferredValue(e)};me.useEffect=function(e,t){return rt.current.useEffect(e,t)};me.useId=function(){return rt.current.useId()};me.useImperativeHandle=function(e,t,n){return rt.current.useImperativeHandle(e,t,n)};me.useInsertionEffect=function(e,t){return rt.current.useInsertionEffect(e,t)};me.useLayoutEffect=function(e,t){return rt.current.useLayoutEffect(e,t)};me.useMemo=function(e,t){return rt.current.useMemo(e,t)};me.useReducer=function(e,t,n){return rt.current.useReducer(e,t,n)};me.useRef=function(e){return rt.current.useRef(e)};me.useState=function(e){return rt.current.useState(e)};me.useSyncExternalStore=function(e,t,n){return rt.current.useSyncExternalStore(e,t,n)};me.useTransition=function(){return rt.current.useTransition()};me.version="18.3.1";Ed.exports=me;var c=Ed.exports;const tl=Cd(c),nh=Dm({__proto__:null,default:tl},[c]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rh=c,lh=Symbol.for("react.element"),sh=Symbol.for("react.fragment"),oh=Object.prototype.hasOwnProperty,ah=rh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ih={key:!0,ref:!0,__self:!0,__source:!0};function Id(e,t,n){var r,l={},s=null,a=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)oh.call(t,r)&&!ih.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:lh,type:e,key:s,ref:a,props:l,_owner:ah.current}}lo.Fragment=sh;lo.jsx=Id;lo.jsxs=Id;kd.exports=lo;var o=kd.exports,da={},Md={exports:{}},yt={},zd={exports:{}},Dd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(C,V){var I=C.length;C.push(V);e:for(;0<I;){var R=I-1>>>1,T=C[R];if(0<l(T,V))C[R]=V,C[I]=T,I=R;else break e}}function n(C){return C.length===0?null:C[0]}function r(C){if(C.length===0)return null;var V=C[0],I=C.pop();if(I!==V){C[0]=I;e:for(var R=0,T=C.length,te=T>>>1;R<te;){var K=2*(R+1)-1,z=C[K],O=K+1,m=C[O];if(0>l(z,I))O<T&&0>l(m,z)?(C[R]=m,C[O]=I,R=O):(C[R]=z,C[K]=I,R=K);else if(O<T&&0>l(m,I))C[R]=m,C[O]=I,R=O;else break e}}return V}function l(C,V){var I=C.sortIndex-V.sortIndex;return I!==0?I:C.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var u=[],d=[],f=1,p=null,g=3,w=!1,x=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(C){for(var V=n(d);V!==null;){if(V.callback===null)r(d);else if(V.startTime<=C)r(d),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(d)}}function N(C){if(j=!1,v(C),!x)if(n(u)!==null)x=!0,M(P);else{var V=n(d);V!==null&&b(N,V.startTime-C)}}function P(C,V){x=!1,j&&(j=!1,y(E),E=-1),w=!0;var I=g;try{for(v(V),p=n(u);p!==null&&(!(p.expirationTime>V)||C&&!G());){var R=p.callback;if(typeof R=="function"){p.callback=null,g=p.priorityLevel;var T=R(p.expirationTime<=V);V=e.unstable_now(),typeof T=="function"?p.callback=T:p===n(u)&&r(u),v(V)}else r(u);p=n(u)}if(p!==null)var te=!0;else{var K=n(d);K!==null&&b(N,K.startTime-V),te=!1}return te}finally{p=null,g=I,w=!1}}var L=!1,A=null,E=-1,W=5,B=-1;function G(){return!(e.unstable_now()-B<W)}function J(){if(A!==null){var C=e.unstable_now();B=C;var V=!0;try{V=A(!0,C)}finally{V?Y():(L=!1,A=null)}}else L=!1}var Y;if(typeof h=="function")Y=function(){h(J)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,_=k.port2;k.port1.onmessage=J,Y=function(){_.postMessage(null)}}else Y=function(){S(J,0)};function M(C){A=C,L||(L=!0,Y())}function b(C,V){E=S(function(){C(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(C){C.callback=null},e.unstable_continueExecution=function(){x||w||(x=!0,M(P))},e.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<C?Math.floor(1e3/C):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(C){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var I=g;g=V;try{return C()}finally{g=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(C,V){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var I=g;g=C;try{return V()}finally{g=I}},e.unstable_scheduleCallback=function(C,V,I){var R=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?R+I:R):I=R,C){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=I+T,C={id:f++,callback:V,priorityLevel:C,startTime:I,expirationTime:T,sortIndex:-1},I>R?(C.sortIndex=I,t(d,C),n(u)===null&&C===n(d)&&(j?(y(E),E=-1):j=!0,b(N,I-R))):(C.sortIndex=T,t(u,C),x||w||(x=!0,M(P))),C},e.unstable_shouldYield=G,e.unstable_wrapCallback=function(C){var V=g;return function(){var I=g;g=V;try{return C.apply(this,arguments)}finally{g=I}}}})(Dd);zd.exports=Dd;var uh=zd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ch=c,gt=uh;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $d=new Set,hl={};function Xn(e,t){br(e,t),br(e+"Capture",t)}function br(e,t){for(hl[e]=t,e=0;e<t.length;e++)$d.add(t[e])}var Xt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fa=Object.prototype.hasOwnProperty,dh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Au={},Lu={};function fh(e){return fa.call(Lu,e)?!0:fa.call(Au,e)?!1:dh.test(e)?Lu[e]=!0:(Au[e]=!0,!1)}function ph(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function mh(e,t,n,r){if(t===null||typeof t>"u"||ph(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lt(e,t,n,r,l,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ge[e]=new lt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ge[t]=new lt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ge[e]=new lt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ge[e]=new lt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ge[e]=new lt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ge[e]=new lt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ge[e]=new lt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ge[e]=new lt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ge[e]=new lt(e,5,!1,e.toLowerCase(),null,!1,!1)});var bi=/[\-:]([a-z])/g;function Ci(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bi,Ci);Ge[t]=new lt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bi,Ci);Ge[t]=new lt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bi,Ci);Ge[t]=new lt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ge[e]=new lt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ge[e]=new lt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ki(e,t,n,r){var l=Ge.hasOwnProperty(t)?Ge[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(mh(t,n,l,r)&&(n=null),r||l===null?fh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var nn=ch.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ql=Symbol.for("react.element"),lr=Symbol.for("react.portal"),sr=Symbol.for("react.fragment"),Ei=Symbol.for("react.strict_mode"),pa=Symbol.for("react.profiler"),Ud=Symbol.for("react.provider"),Bd=Symbol.for("react.context"),_i=Symbol.for("react.forward_ref"),ma=Symbol.for("react.suspense"),ha=Symbol.for("react.suspense_list"),Fi=Symbol.for("react.memo"),an=Symbol.for("react.lazy"),Wd=Symbol.for("react.offscreen"),Ou=Symbol.iterator;function Wr(e){return e===null||typeof e!="object"?null:(e=Ou&&e[Ou]||e["@@iterator"],typeof e=="function"?e:null)}var Pe=Object.assign,Po;function Jr(e){if(Po===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Po=t&&t[1]||""}return`
`+Po+e}var Ao=!1;function Lo(e,t){if(!e||Ao)return"";Ao=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var l=d.stack.split(`
`),s=r.stack.split(`
`),a=l.length-1,i=s.length-1;1<=a&&0<=i&&l[a]!==s[i];)i--;for(;1<=a&&0<=i;a--,i--)if(l[a]!==s[i]){if(a!==1||i!==1)do if(a--,i--,0>i||l[a]!==s[i]){var u=`
`+l[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=i);break}}}finally{Ao=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Jr(e):""}function hh(e){switch(e.tag){case 5:return Jr(e.type);case 16:return Jr("Lazy");case 13:return Jr("Suspense");case 19:return Jr("SuspenseList");case 0:case 2:case 15:return e=Lo(e.type,!1),e;case 11:return e=Lo(e.type.render,!1),e;case 1:return e=Lo(e.type,!0),e;default:return""}}function ga(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case sr:return"Fragment";case lr:return"Portal";case pa:return"Profiler";case Ei:return"StrictMode";case ma:return"Suspense";case ha:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Bd:return(e.displayName||"Context")+".Consumer";case Ud:return(e._context.displayName||"Context")+".Provider";case _i:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fi:return t=e.displayName||null,t!==null?t:ga(e.type)||"Memo";case an:t=e._payload,e=e._init;try{return ga(e(t))}catch{}}return null}function gh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ga(t);case 8:return t===Ei?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yh(e){var t=Vd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Yl(e){e._valueTracker||(e._valueTracker=yh(e))}function Hd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Vd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Cs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ya(e,t){var n=t.checked;return Pe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ru(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Fn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Gd(e,t){t=t.checked,t!=null&&ki(e,"checked",t,!1)}function va(e,t){Gd(e,t);var n=Fn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xa(e,t.type,n):t.hasOwnProperty("defaultValue")&&xa(e,t.type,Fn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Tu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function xa(e,t,n){(t!=="number"||Cs(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Xr=Array.isArray;function yr(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Fn(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function wa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Pe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Iu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Q(92));if(Xr(n)){if(1<n.length)throw Error(Q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Fn(n)}}function Kd(e,t){var n=Fn(t.value),r=Fn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Mu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Qd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Na(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Qd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ql,Yd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ql=ql||document.createElement("div"),ql.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ql.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vh=["Webkit","ms","Moz","O"];Object.keys(nl).forEach(function(e){vh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),nl[t]=nl[e]})});function qd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||nl.hasOwnProperty(e)&&nl[e]?(""+t).trim():t+"px"}function Jd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=qd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var xh=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ja(e,t){if(t){if(xh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function Sa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ba=null;function Pi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ca=null,vr=null,xr=null;function zu(e){if(e=$l(e)){if(typeof Ca!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=uo(t),Ca(e.stateNode,e.type,t))}}function Xd(e){vr?xr?xr.push(e):xr=[e]:vr=e}function Zd(){if(vr){var e=vr,t=xr;if(xr=vr=null,zu(e),t)for(e=0;e<t.length;e++)zu(t[e])}}function ef(e,t){return e(t)}function tf(){}var Oo=!1;function nf(e,t,n){if(Oo)return e(t,n);Oo=!0;try{return ef(e,t,n)}finally{Oo=!1,(vr!==null||xr!==null)&&(tf(),Zd())}}function yl(e,t){var n=e.stateNode;if(n===null)return null;var r=uo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Q(231,t,typeof n));return n}var ka=!1;if(Xt)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){ka=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{ka=!1}function wh(e,t,n,r,l,s,a,i,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var rl=!1,ks=null,Es=!1,Ea=null,Nh={onError:function(e){rl=!0,ks=e}};function jh(e,t,n,r,l,s,a,i,u){rl=!1,ks=null,wh.apply(Nh,arguments)}function Sh(e,t,n,r,l,s,a,i,u){if(jh.apply(this,arguments),rl){if(rl){var d=ks;rl=!1,ks=null}else throw Error(Q(198));Es||(Es=!0,Ea=d)}}function Zn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function rf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Du(e){if(Zn(e)!==e)throw Error(Q(188))}function bh(e){var t=e.alternate;if(!t){if(t=Zn(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var s=l.alternate;if(s===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===s.child){for(s=l.child;s;){if(s===n)return Du(l),e;if(s===r)return Du(l),t;s=s.sibling}throw Error(Q(188))}if(n.return!==r.return)n=l,r=s;else{for(var a=!1,i=l.child;i;){if(i===n){a=!0,n=l,r=s;break}if(i===r){a=!0,r=l,n=s;break}i=i.sibling}if(!a){for(i=s.child;i;){if(i===n){a=!0,n=s,r=l;break}if(i===r){a=!0,r=s,n=l;break}i=i.sibling}if(!a)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?e:t}function lf(e){return e=bh(e),e!==null?sf(e):null}function sf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sf(e);if(t!==null)return t;e=e.sibling}return null}var of=gt.unstable_scheduleCallback,$u=gt.unstable_cancelCallback,Ch=gt.unstable_shouldYield,kh=gt.unstable_requestPaint,Oe=gt.unstable_now,Eh=gt.unstable_getCurrentPriorityLevel,Ai=gt.unstable_ImmediatePriority,af=gt.unstable_UserBlockingPriority,_s=gt.unstable_NormalPriority,_h=gt.unstable_LowPriority,uf=gt.unstable_IdlePriority,so=null,Bt=null;function Fh(e){if(Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(so,e,void 0,(e.current.flags&128)===128)}catch{}}var At=Math.clz32?Math.clz32:Lh,Ph=Math.log,Ah=Math.LN2;function Lh(e){return e>>>=0,e===0?32:31-(Ph(e)/Ah|0)|0}var Jl=64,Xl=4194304;function Zr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Fs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,s=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~l;i!==0?r=Zr(i):(s&=a,s!==0&&(r=Zr(s)))}else a=n&~l,a!==0?r=Zr(a):s!==0&&(r=Zr(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,s=t&-t,l>=s||l===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-At(t),l=1<<n,r|=e[n],t&=~l;return r}function Oh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-At(s),i=1<<a,u=l[a];u===-1?(!(i&n)||i&r)&&(l[a]=Oh(i,t)):u<=t&&(e.expiredLanes|=i),s&=~i}}function _a(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cf(){var e=Jl;return Jl<<=1,!(Jl&4194240)&&(Jl=64),e}function Ro(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-At(t),e[t]=n}function Th(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-At(n),s=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~s}}function Li(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-At(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var we=0;function df(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ff,Oi,pf,mf,hf,Fa=!1,Zl=[],vn=null,xn=null,wn=null,vl=new Map,xl=new Map,cn=[],Ih="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uu(e,t){switch(e){case"focusin":case"focusout":vn=null;break;case"dragenter":case"dragleave":xn=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":vl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(t.pointerId)}}function Hr(e,t,n,r,l,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[l]},t!==null&&(t=$l(t),t!==null&&Oi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Mh(e,t,n,r,l){switch(t){case"focusin":return vn=Hr(vn,e,t,n,r,l),!0;case"dragenter":return xn=Hr(xn,e,t,n,r,l),!0;case"mouseover":return wn=Hr(wn,e,t,n,r,l),!0;case"pointerover":var s=l.pointerId;return vl.set(s,Hr(vl.get(s)||null,e,t,n,r,l)),!0;case"gotpointercapture":return s=l.pointerId,xl.set(s,Hr(xl.get(s)||null,e,t,n,r,l)),!0}return!1}function gf(e){var t=$n(e.target);if(t!==null){var n=Zn(t);if(n!==null){if(t=n.tag,t===13){if(t=rf(n),t!==null){e.blockedOn=t,hf(e.priority,function(){pf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ps(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Pa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ba=r,n.target.dispatchEvent(r),ba=null}else return t=$l(n),t!==null&&Oi(t),e.blockedOn=n,!1;t.shift()}return!0}function Bu(e,t,n){ps(e)&&n.delete(t)}function zh(){Fa=!1,vn!==null&&ps(vn)&&(vn=null),xn!==null&&ps(xn)&&(xn=null),wn!==null&&ps(wn)&&(wn=null),vl.forEach(Bu),xl.forEach(Bu)}function Gr(e,t){e.blockedOn===t&&(e.blockedOn=null,Fa||(Fa=!0,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,zh)))}function wl(e){function t(l){return Gr(l,e)}if(0<Zl.length){Gr(Zl[0],e);for(var n=1;n<Zl.length;n++){var r=Zl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(vn!==null&&Gr(vn,e),xn!==null&&Gr(xn,e),wn!==null&&Gr(wn,e),vl.forEach(t),xl.forEach(t),n=0;n<cn.length;n++)r=cn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<cn.length&&(n=cn[0],n.blockedOn===null);)gf(n),n.blockedOn===null&&cn.shift()}var wr=nn.ReactCurrentBatchConfig,Ps=!0;function Dh(e,t,n,r){var l=we,s=wr.transition;wr.transition=null;try{we=1,Ri(e,t,n,r)}finally{we=l,wr.transition=s}}function $h(e,t,n,r){var l=we,s=wr.transition;wr.transition=null;try{we=4,Ri(e,t,n,r)}finally{we=l,wr.transition=s}}function Ri(e,t,n,r){if(Ps){var l=Pa(e,t,n,r);if(l===null)Vo(e,t,r,As,n),Uu(e,r);else if(Mh(l,e,t,n,r))r.stopPropagation();else if(Uu(e,r),t&4&&-1<Ih.indexOf(e)){for(;l!==null;){var s=$l(l);if(s!==null&&ff(s),s=Pa(e,t,n,r),s===null&&Vo(e,t,r,As,n),s===l)break;l=s}l!==null&&r.stopPropagation()}else Vo(e,t,r,null,n)}}var As=null;function Pa(e,t,n,r){if(As=null,e=Pi(r),e=$n(e),e!==null)if(t=Zn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=rf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return As=e,null}function yf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Eh()){case Ai:return 1;case af:return 4;case _s:case _h:return 16;case uf:return 536870912;default:return 16}default:return 16}}var fn=null,Ti=null,ms=null;function vf(){if(ms)return ms;var e,t=Ti,n=t.length,r,l="value"in fn?fn.value:fn.textContent,s=l.length;for(e=0;e<n&&t[e]===l[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===l[s-r];r++);return ms=l.slice(e,1<r?1-r:void 0)}function hs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function es(){return!0}function Wu(){return!1}function vt(e){function t(n,r,l,s,a){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(s):s[i]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?es:Wu,this.isPropagationStopped=Wu,this}return Pe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),t}var Tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ii=vt(Tr),Dl=Pe({},Tr,{view:0,detail:0}),Uh=vt(Dl),To,Io,Kr,oo=Pe({},Dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kr&&(Kr&&e.type==="mousemove"?(To=e.screenX-Kr.screenX,Io=e.screenY-Kr.screenY):Io=To=0,Kr=e),To)},movementY:function(e){return"movementY"in e?e.movementY:Io}}),Vu=vt(oo),Bh=Pe({},oo,{dataTransfer:0}),Wh=vt(Bh),Vh=Pe({},Dl,{relatedTarget:0}),Mo=vt(Vh),Hh=Pe({},Tr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gh=vt(Hh),Kh=Pe({},Tr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qh=vt(Kh),Yh=Pe({},Tr,{data:0}),Hu=vt(Yh),qh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Xh[e])?!!t[e]:!1}function Mi(){return Zh}var eg=Pe({},Dl,{key:function(e){if(e.key){var t=qh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Jh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mi,charCode:function(e){return e.type==="keypress"?hs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tg=vt(eg),ng=Pe({},oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gu=vt(ng),rg=Pe({},Dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mi}),lg=vt(rg),sg=Pe({},Tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),og=vt(sg),ag=Pe({},oo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ig=vt(ag),ug=[9,13,27,32],zi=Xt&&"CompositionEvent"in window,ll=null;Xt&&"documentMode"in document&&(ll=document.documentMode);var cg=Xt&&"TextEvent"in window&&!ll,xf=Xt&&(!zi||ll&&8<ll&&11>=ll),Ku=" ",Qu=!1;function wf(e,t){switch(e){case"keyup":return ug.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var or=!1;function dg(e,t){switch(e){case"compositionend":return Nf(t);case"keypress":return t.which!==32?null:(Qu=!0,Ku);case"textInput":return e=t.data,e===Ku&&Qu?null:e;default:return null}}function fg(e,t){if(or)return e==="compositionend"||!zi&&wf(e,t)?(e=vf(),ms=Ti=fn=null,or=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xf&&t.locale!=="ko"?null:t.data;default:return null}}var pg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pg[e.type]:t==="textarea"}function jf(e,t,n,r){Xd(r),t=Ls(t,"onChange"),0<t.length&&(n=new Ii("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var sl=null,Nl=null;function mg(e){Of(e,0)}function ao(e){var t=ur(e);if(Hd(t))return e}function hg(e,t){if(e==="change")return t}var Sf=!1;if(Xt){var zo;if(Xt){var Do="oninput"in document;if(!Do){var qu=document.createElement("div");qu.setAttribute("oninput","return;"),Do=typeof qu.oninput=="function"}zo=Do}else zo=!1;Sf=zo&&(!document.documentMode||9<document.documentMode)}function Ju(){sl&&(sl.detachEvent("onpropertychange",bf),Nl=sl=null)}function bf(e){if(e.propertyName==="value"&&ao(Nl)){var t=[];jf(t,Nl,e,Pi(e)),nf(mg,t)}}function gg(e,t,n){e==="focusin"?(Ju(),sl=t,Nl=n,sl.attachEvent("onpropertychange",bf)):e==="focusout"&&Ju()}function yg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ao(Nl)}function vg(e,t){if(e==="click")return ao(t)}function xg(e,t){if(e==="input"||e==="change")return ao(t)}function wg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Rt=typeof Object.is=="function"?Object.is:wg;function jl(e,t){if(Rt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!fa.call(t,l)||!Rt(e[l],t[l]))return!1}return!0}function Xu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zu(e,t){var n=Xu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xu(n)}}function Cf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Cf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kf(){for(var e=window,t=Cs();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Cs(e.document)}return t}function Di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ng(e){var t=kf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Cf(n.ownerDocument.documentElement,n)){if(r!==null&&Di(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,s=Math.min(r.start,l);r=r.end===void 0?s:Math.min(r.end,l),!e.extend&&s>r&&(l=r,r=s,s=l),l=Zu(n,s);var a=Zu(n,r);l&&a&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jg=Xt&&"documentMode"in document&&11>=document.documentMode,ar=null,Aa=null,ol=null,La=!1;function ec(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;La||ar==null||ar!==Cs(r)||(r=ar,"selectionStart"in r&&Di(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ol&&jl(ol,r)||(ol=r,r=Ls(Aa,"onSelect"),0<r.length&&(t=new Ii("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function ts(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ir={animationend:ts("Animation","AnimationEnd"),animationiteration:ts("Animation","AnimationIteration"),animationstart:ts("Animation","AnimationStart"),transitionend:ts("Transition","TransitionEnd")},$o={},Ef={};Xt&&(Ef=document.createElement("div").style,"AnimationEvent"in window||(delete ir.animationend.animation,delete ir.animationiteration.animation,delete ir.animationstart.animation),"TransitionEvent"in window||delete ir.transitionend.transition);function io(e){if($o[e])return $o[e];if(!ir[e])return e;var t=ir[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ef)return $o[e]=t[n];return e}var _f=io("animationend"),Ff=io("animationiteration"),Pf=io("animationstart"),Af=io("transitionend"),Lf=new Map,tc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(e,t){Lf.set(e,t),Xn(t,[e])}for(var Uo=0;Uo<tc.length;Uo++){var Bo=tc[Uo],Sg=Bo.toLowerCase(),bg=Bo[0].toUpperCase()+Bo.slice(1);An(Sg,"on"+bg)}An(_f,"onAnimationEnd");An(Ff,"onAnimationIteration");An(Pf,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(Af,"onTransitionEnd");br("onMouseEnter",["mouseout","mouseover"]);br("onMouseLeave",["mouseout","mouseover"]);br("onPointerEnter",["pointerout","pointerover"]);br("onPointerLeave",["pointerout","pointerover"]);Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cg=new Set("cancel close invalid load scroll toggle".split(" ").concat(el));function nc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Sh(r,t,void 0,e),e.currentTarget=null}function Of(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],u=i.instance,d=i.currentTarget;if(i=i.listener,u!==s&&l.isPropagationStopped())break e;nc(l,i,d),s=u}else for(a=0;a<r.length;a++){if(i=r[a],u=i.instance,d=i.currentTarget,i=i.listener,u!==s&&l.isPropagationStopped())break e;nc(l,i,d),s=u}}}if(Es)throw e=Ea,Es=!1,Ea=null,e}function Se(e,t){var n=t[Ma];n===void 0&&(n=t[Ma]=new Set);var r=e+"__bubble";n.has(r)||(Rf(t,e,2,!1),n.add(r))}function Wo(e,t,n){var r=0;t&&(r|=4),Rf(n,e,r,t)}var ns="_reactListening"+Math.random().toString(36).slice(2);function Sl(e){if(!e[ns]){e[ns]=!0,$d.forEach(function(n){n!=="selectionchange"&&(Cg.has(n)||Wo(n,!1,e),Wo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ns]||(t[ns]=!0,Wo("selectionchange",!1,t))}}function Rf(e,t,n,r){switch(yf(t)){case 1:var l=Dh;break;case 4:l=$h;break;default:l=Ri}n=l.bind(null,t,n,e),l=void 0,!ka||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Vo(e,t,n,r,l){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===l||i.nodeType===8&&i.parentNode===l)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===l||u.nodeType===8&&u.parentNode===l))return;a=a.return}for(;i!==null;){if(a=$n(i),a===null)return;if(u=a.tag,u===5||u===6){r=s=a;continue e}i=i.parentNode}}r=r.return}nf(function(){var d=s,f=Pi(n),p=[];e:{var g=Lf.get(e);if(g!==void 0){var w=Ii,x=e;switch(e){case"keypress":if(hs(n)===0)break e;case"keydown":case"keyup":w=tg;break;case"focusin":x="focus",w=Mo;break;case"focusout":x="blur",w=Mo;break;case"beforeblur":case"afterblur":w=Mo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Wh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=lg;break;case _f:case Ff:case Pf:w=Gh;break;case Af:w=og;break;case"scroll":w=Uh;break;case"wheel":w=ig;break;case"copy":case"cut":case"paste":w=Qh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Gu}var j=(t&4)!==0,S=!j&&e==="scroll",y=j?g!==null?g+"Capture":null:g;j=[];for(var h=d,v;h!==null;){v=h;var N=v.stateNode;if(v.tag===5&&N!==null&&(v=N,y!==null&&(N=yl(h,y),N!=null&&j.push(bl(h,N,v)))),S)break;h=h.return}0<j.length&&(g=new w(g,x,null,n,f),p.push({event:g,listeners:j}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",g&&n!==ba&&(x=n.relatedTarget||n.fromElement)&&($n(x)||x[Zt]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(x=n.relatedTarget||n.toElement,w=d,x=x?$n(x):null,x!==null&&(S=Zn(x),x!==S||x.tag!==5&&x.tag!==6)&&(x=null)):(w=null,x=d),w!==x)){if(j=Vu,N="onMouseLeave",y="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(j=Gu,N="onPointerLeave",y="onPointerEnter",h="pointer"),S=w==null?g:ur(w),v=x==null?g:ur(x),g=new j(N,h+"leave",w,n,f),g.target=S,g.relatedTarget=v,N=null,$n(f)===d&&(j=new j(y,h+"enter",x,n,f),j.target=v,j.relatedTarget=S,N=j),S=N,w&&x)t:{for(j=w,y=x,h=0,v=j;v;v=nr(v))h++;for(v=0,N=y;N;N=nr(N))v++;for(;0<h-v;)j=nr(j),h--;for(;0<v-h;)y=nr(y),v--;for(;h--;){if(j===y||y!==null&&j===y.alternate)break t;j=nr(j),y=nr(y)}j=null}else j=null;w!==null&&rc(p,g,w,j,!1),x!==null&&S!==null&&rc(p,S,x,j,!0)}}e:{if(g=d?ur(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var P=hg;else if(Yu(g))if(Sf)P=xg;else{P=yg;var L=gg}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(P=vg);if(P&&(P=P(e,d))){jf(p,P,n,f);break e}L&&L(e,g,d),e==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&xa(g,"number",g.value)}switch(L=d?ur(d):window,e){case"focusin":(Yu(L)||L.contentEditable==="true")&&(ar=L,Aa=d,ol=null);break;case"focusout":ol=Aa=ar=null;break;case"mousedown":La=!0;break;case"contextmenu":case"mouseup":case"dragend":La=!1,ec(p,n,f);break;case"selectionchange":if(jg)break;case"keydown":case"keyup":ec(p,n,f)}var A;if(zi)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else or?wf(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(xf&&n.locale!=="ko"&&(or||E!=="onCompositionStart"?E==="onCompositionEnd"&&or&&(A=vf()):(fn=f,Ti="value"in fn?fn.value:fn.textContent,or=!0)),L=Ls(d,E),0<L.length&&(E=new Hu(E,e,null,n,f),p.push({event:E,listeners:L}),A?E.data=A:(A=Nf(n),A!==null&&(E.data=A)))),(A=cg?dg(e,n):fg(e,n))&&(d=Ls(d,"onBeforeInput"),0<d.length&&(f=new Hu("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=A))}Of(p,t)})}function bl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ls(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,s=l.stateNode;l.tag===5&&s!==null&&(l=s,s=yl(e,n),s!=null&&r.unshift(bl(e,s,l)),s=yl(e,t),s!=null&&r.push(bl(e,s,l))),e=e.return}return r}function nr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function rc(e,t,n,r,l){for(var s=t._reactName,a=[];n!==null&&n!==r;){var i=n,u=i.alternate,d=i.stateNode;if(u!==null&&u===r)break;i.tag===5&&d!==null&&(i=d,l?(u=yl(n,s),u!=null&&a.unshift(bl(n,u,i))):l||(u=yl(n,s),u!=null&&a.push(bl(n,u,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var kg=/\r\n?/g,Eg=/\u0000|\uFFFD/g;function lc(e){return(typeof e=="string"?e:""+e).replace(kg,`
`).replace(Eg,"")}function rs(e,t,n){if(t=lc(t),lc(e)!==t&&n)throw Error(Q(425))}function Os(){}var Oa=null,Ra=null;function Ta(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ia=typeof setTimeout=="function"?setTimeout:void 0,_g=typeof clearTimeout=="function"?clearTimeout:void 0,sc=typeof Promise=="function"?Promise:void 0,Fg=typeof queueMicrotask=="function"?queueMicrotask:typeof sc<"u"?function(e){return sc.resolve(null).then(e).catch(Pg)}:Ia;function Pg(e){setTimeout(function(){throw e})}function Ho(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),wl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);wl(t)}function Nn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function oc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ir=Math.random().toString(36).slice(2),Ut="__reactFiber$"+Ir,Cl="__reactProps$"+Ir,Zt="__reactContainer$"+Ir,Ma="__reactEvents$"+Ir,Ag="__reactListeners$"+Ir,Lg="__reactHandles$"+Ir;function $n(e){var t=e[Ut];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Zt]||n[Ut]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=oc(e);e!==null;){if(n=e[Ut])return n;e=oc(e)}return t}e=n,n=e.parentNode}return null}function $l(e){return e=e[Ut]||e[Zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ur(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function uo(e){return e[Cl]||null}var za=[],cr=-1;function Ln(e){return{current:e}}function be(e){0>cr||(e.current=za[cr],za[cr]=null,cr--)}function Ne(e,t){cr++,za[cr]=e.current,e.current=t}var Pn={},Xe=Ln(Pn),it=Ln(!1),Gn=Pn;function Cr(e,t){var n=e.type.contextTypes;if(!n)return Pn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},s;for(s in n)l[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function ut(e){return e=e.childContextTypes,e!=null}function Rs(){be(it),be(Xe)}function ac(e,t,n){if(Xe.current!==Pn)throw Error(Q(168));Ne(Xe,t),Ne(it,n)}function Tf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(Q(108,gh(e)||"Unknown",l));return Pe({},n,r)}function Ts(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pn,Gn=Xe.current,Ne(Xe,e),Ne(it,it.current),!0}function ic(e,t,n){var r=e.stateNode;if(!r)throw Error(Q(169));n?(e=Tf(e,t,Gn),r.__reactInternalMemoizedMergedChildContext=e,be(it),be(Xe),Ne(Xe,e)):be(it),Ne(it,n)}var Kt=null,co=!1,Go=!1;function If(e){Kt===null?Kt=[e]:Kt.push(e)}function Og(e){co=!0,If(e)}function On(){if(!Go&&Kt!==null){Go=!0;var e=0,t=we;try{var n=Kt;for(we=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Kt=null,co=!1}catch(l){throw Kt!==null&&(Kt=Kt.slice(e+1)),of(Ai,On),l}finally{we=t,Go=!1}}return null}var dr=[],fr=0,Is=null,Ms=0,wt=[],Nt=0,Kn=null,Qt=1,Yt="";function Mn(e,t){dr[fr++]=Ms,dr[fr++]=Is,Is=e,Ms=t}function Mf(e,t,n){wt[Nt++]=Qt,wt[Nt++]=Yt,wt[Nt++]=Kn,Kn=e;var r=Qt;e=Yt;var l=32-At(r)-1;r&=~(1<<l),n+=1;var s=32-At(t)+l;if(30<s){var a=l-l%5;s=(r&(1<<a)-1).toString(32),r>>=a,l-=a,Qt=1<<32-At(t)+l|n<<l|r,Yt=s+e}else Qt=1<<s|n<<l|r,Yt=e}function $i(e){e.return!==null&&(Mn(e,1),Mf(e,1,0))}function Ui(e){for(;e===Is;)Is=dr[--fr],dr[fr]=null,Ms=dr[--fr],dr[fr]=null;for(;e===Kn;)Kn=wt[--Nt],wt[Nt]=null,Yt=wt[--Nt],wt[Nt]=null,Qt=wt[--Nt],wt[Nt]=null}var ht=null,mt=null,ke=!1,Pt=null;function zf(e,t){var n=jt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function uc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ht=e,mt=Nn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ht=e,mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Kn!==null?{id:Qt,overflow:Yt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=jt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ht=e,mt=null,!0):!1;default:return!1}}function Da(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $a(e){if(ke){var t=mt;if(t){var n=t;if(!uc(e,t)){if(Da(e))throw Error(Q(418));t=Nn(n.nextSibling);var r=ht;t&&uc(e,t)?zf(r,n):(e.flags=e.flags&-4097|2,ke=!1,ht=e)}}else{if(Da(e))throw Error(Q(418));e.flags=e.flags&-4097|2,ke=!1,ht=e}}}function cc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ht=e}function ls(e){if(e!==ht)return!1;if(!ke)return cc(e),ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ta(e.type,e.memoizedProps)),t&&(t=mt)){if(Da(e))throw Df(),Error(Q(418));for(;t;)zf(e,t),t=Nn(t.nextSibling)}if(cc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){mt=Nn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}mt=null}}else mt=ht?Nn(e.stateNode.nextSibling):null;return!0}function Df(){for(var e=mt;e;)e=Nn(e.nextSibling)}function kr(){mt=ht=null,ke=!1}function Bi(e){Pt===null?Pt=[e]:Pt.push(e)}var Rg=nn.ReactCurrentBatchConfig;function Qr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,e));var l=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var i=l.refs;a===null?delete i[s]:i[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,e))}return e}function ss(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function dc(e){var t=e._init;return t(e._payload)}function $f(e){function t(y,h){if(e){var v=y.deletions;v===null?(y.deletions=[h],y.flags|=16):v.push(h)}}function n(y,h){if(!e)return null;for(;h!==null;)t(y,h),h=h.sibling;return null}function r(y,h){for(y=new Map;h!==null;)h.key!==null?y.set(h.key,h):y.set(h.index,h),h=h.sibling;return y}function l(y,h){return y=Cn(y,h),y.index=0,y.sibling=null,y}function s(y,h,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<h?(y.flags|=2,h):v):(y.flags|=2,h)):(y.flags|=1048576,h)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function i(y,h,v,N){return h===null||h.tag!==6?(h=Zo(v,y.mode,N),h.return=y,h):(h=l(h,v),h.return=y,h)}function u(y,h,v,N){var P=v.type;return P===sr?f(y,h,v.props.children,N,v.key):h!==null&&(h.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===an&&dc(P)===h.type)?(N=l(h,v.props),N.ref=Qr(y,h,v),N.return=y,N):(N=js(v.type,v.key,v.props,null,y.mode,N),N.ref=Qr(y,h,v),N.return=y,N)}function d(y,h,v,N){return h===null||h.tag!==4||h.stateNode.containerInfo!==v.containerInfo||h.stateNode.implementation!==v.implementation?(h=ea(v,y.mode,N),h.return=y,h):(h=l(h,v.children||[]),h.return=y,h)}function f(y,h,v,N,P){return h===null||h.tag!==7?(h=Vn(v,y.mode,N,P),h.return=y,h):(h=l(h,v),h.return=y,h)}function p(y,h,v){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Zo(""+h,y.mode,v),h.return=y,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Ql:return v=js(h.type,h.key,h.props,null,y.mode,v),v.ref=Qr(y,null,h),v.return=y,v;case lr:return h=ea(h,y.mode,v),h.return=y,h;case an:var N=h._init;return p(y,N(h._payload),v)}if(Xr(h)||Wr(h))return h=Vn(h,y.mode,v,null),h.return=y,h;ss(y,h)}return null}function g(y,h,v,N){var P=h!==null?h.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return P!==null?null:i(y,h,""+v,N);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ql:return v.key===P?u(y,h,v,N):null;case lr:return v.key===P?d(y,h,v,N):null;case an:return P=v._init,g(y,h,P(v._payload),N)}if(Xr(v)||Wr(v))return P!==null?null:f(y,h,v,N,null);ss(y,v)}return null}function w(y,h,v,N,P){if(typeof N=="string"&&N!==""||typeof N=="number")return y=y.get(v)||null,i(h,y,""+N,P);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ql:return y=y.get(N.key===null?v:N.key)||null,u(h,y,N,P);case lr:return y=y.get(N.key===null?v:N.key)||null,d(h,y,N,P);case an:var L=N._init;return w(y,h,v,L(N._payload),P)}if(Xr(N)||Wr(N))return y=y.get(v)||null,f(h,y,N,P,null);ss(h,N)}return null}function x(y,h,v,N){for(var P=null,L=null,A=h,E=h=0,W=null;A!==null&&E<v.length;E++){A.index>E?(W=A,A=null):W=A.sibling;var B=g(y,A,v[E],N);if(B===null){A===null&&(A=W);break}e&&A&&B.alternate===null&&t(y,A),h=s(B,h,E),L===null?P=B:L.sibling=B,L=B,A=W}if(E===v.length)return n(y,A),ke&&Mn(y,E),P;if(A===null){for(;E<v.length;E++)A=p(y,v[E],N),A!==null&&(h=s(A,h,E),L===null?P=A:L.sibling=A,L=A);return ke&&Mn(y,E),P}for(A=r(y,A);E<v.length;E++)W=w(A,y,E,v[E],N),W!==null&&(e&&W.alternate!==null&&A.delete(W.key===null?E:W.key),h=s(W,h,E),L===null?P=W:L.sibling=W,L=W);return e&&A.forEach(function(G){return t(y,G)}),ke&&Mn(y,E),P}function j(y,h,v,N){var P=Wr(v);if(typeof P!="function")throw Error(Q(150));if(v=P.call(v),v==null)throw Error(Q(151));for(var L=P=null,A=h,E=h=0,W=null,B=v.next();A!==null&&!B.done;E++,B=v.next()){A.index>E?(W=A,A=null):W=A.sibling;var G=g(y,A,B.value,N);if(G===null){A===null&&(A=W);break}e&&A&&G.alternate===null&&t(y,A),h=s(G,h,E),L===null?P=G:L.sibling=G,L=G,A=W}if(B.done)return n(y,A),ke&&Mn(y,E),P;if(A===null){for(;!B.done;E++,B=v.next())B=p(y,B.value,N),B!==null&&(h=s(B,h,E),L===null?P=B:L.sibling=B,L=B);return ke&&Mn(y,E),P}for(A=r(y,A);!B.done;E++,B=v.next())B=w(A,y,E,B.value,N),B!==null&&(e&&B.alternate!==null&&A.delete(B.key===null?E:B.key),h=s(B,h,E),L===null?P=B:L.sibling=B,L=B);return e&&A.forEach(function(J){return t(y,J)}),ke&&Mn(y,E),P}function S(y,h,v,N){if(typeof v=="object"&&v!==null&&v.type===sr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ql:e:{for(var P=v.key,L=h;L!==null;){if(L.key===P){if(P=v.type,P===sr){if(L.tag===7){n(y,L.sibling),h=l(L,v.props.children),h.return=y,y=h;break e}}else if(L.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===an&&dc(P)===L.type){n(y,L.sibling),h=l(L,v.props),h.ref=Qr(y,L,v),h.return=y,y=h;break e}n(y,L);break}else t(y,L);L=L.sibling}v.type===sr?(h=Vn(v.props.children,y.mode,N,v.key),h.return=y,y=h):(N=js(v.type,v.key,v.props,null,y.mode,N),N.ref=Qr(y,h,v),N.return=y,y=N)}return a(y);case lr:e:{for(L=v.key;h!==null;){if(h.key===L)if(h.tag===4&&h.stateNode.containerInfo===v.containerInfo&&h.stateNode.implementation===v.implementation){n(y,h.sibling),h=l(h,v.children||[]),h.return=y,y=h;break e}else{n(y,h);break}else t(y,h);h=h.sibling}h=ea(v,y.mode,N),h.return=y,y=h}return a(y);case an:return L=v._init,S(y,h,L(v._payload),N)}if(Xr(v))return x(y,h,v,N);if(Wr(v))return j(y,h,v,N);ss(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,h!==null&&h.tag===6?(n(y,h.sibling),h=l(h,v),h.return=y,y=h):(n(y,h),h=Zo(v,y.mode,N),h.return=y,y=h),a(y)):n(y,h)}return S}var Er=$f(!0),Uf=$f(!1),zs=Ln(null),Ds=null,pr=null,Wi=null;function Vi(){Wi=pr=Ds=null}function Hi(e){var t=zs.current;be(zs),e._currentValue=t}function Ua(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Nr(e,t){Ds=e,Wi=pr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(at=!0),e.firstContext=null)}function bt(e){var t=e._currentValue;if(Wi!==e)if(e={context:e,memoizedValue:t,next:null},pr===null){if(Ds===null)throw Error(Q(308));pr=e,Ds.dependencies={lanes:0,firstContext:e}}else pr=pr.next=e;return t}var Un=null;function Gi(e){Un===null?Un=[e]:Un.push(e)}function Bf(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,Gi(t)):(n.next=l.next,l.next=n),t.interleaved=n,en(e,r)}function en(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var un=!1;function Ki(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ye&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,en(e,n)}return l=r.interleaved,l===null?(t.next=t,Gi(r)):(t.next=l.next,l.next=t),r.interleaved=t,en(e,n)}function gs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Li(e,n)}}function fc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?l=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?l=s=t:s=s.next=t}else l=s=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $s(e,t,n,r){var l=e.updateQueue;un=!1;var s=l.firstBaseUpdate,a=l.lastBaseUpdate,i=l.shared.pending;if(i!==null){l.shared.pending=null;var u=i,d=u.next;u.next=null,a===null?s=d:a.next=d,a=u;var f=e.alternate;f!==null&&(f=f.updateQueue,i=f.lastBaseUpdate,i!==a&&(i===null?f.firstBaseUpdate=d:i.next=d,f.lastBaseUpdate=u))}if(s!==null){var p=l.baseState;a=0,f=d=u=null,i=s;do{var g=i.lane,w=i.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var x=e,j=i;switch(g=t,w=n,j.tag){case 1:if(x=j.payload,typeof x=="function"){p=x.call(w,p,g);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=j.payload,g=typeof x=="function"?x.call(w,p,g):x,g==null)break e;p=Pe({},p,g);break e;case 2:un=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,g=l.effects,g===null?l.effects=[i]:g.push(i))}else w={eventTime:w,lane:g,tag:i.tag,payload:i.payload,callback:i.callback,next:null},f===null?(d=f=w,u=p):f=f.next=w,a|=g;if(i=i.next,i===null){if(i=l.shared.pending,i===null)break;g=i,i=g.next,g.next=null,l.lastBaseUpdate=g,l.shared.pending=null}}while(!0);if(f===null&&(u=p),l.baseState=u,l.firstBaseUpdate=d,l.lastBaseUpdate=f,t=l.shared.interleaved,t!==null){l=t;do a|=l.lane,l=l.next;while(l!==t)}else s===null&&(l.shared.lanes=0);Yn|=a,e.lanes=a,e.memoizedState=p}}function pc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(Q(191,l));l.call(r)}}}var Ul={},Wt=Ln(Ul),kl=Ln(Ul),El=Ln(Ul);function Bn(e){if(e===Ul)throw Error(Q(174));return e}function Qi(e,t){switch(Ne(El,t),Ne(kl,e),Ne(Wt,Ul),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Na(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Na(t,e)}be(Wt),Ne(Wt,t)}function _r(){be(Wt),be(kl),be(El)}function Vf(e){Bn(El.current);var t=Bn(Wt.current),n=Na(t,e.type);t!==n&&(Ne(kl,e),Ne(Wt,n))}function Yi(e){kl.current===e&&(be(Wt),be(kl))}var Ee=Ln(0);function Us(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ko=[];function qi(){for(var e=0;e<Ko.length;e++)Ko[e]._workInProgressVersionPrimary=null;Ko.length=0}var ys=nn.ReactCurrentDispatcher,Qo=nn.ReactCurrentBatchConfig,Qn=0,_e=null,Ie=null,De=null,Bs=!1,al=!1,_l=0,Tg=0;function Qe(){throw Error(Q(321))}function Ji(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Rt(e[n],t[n]))return!1;return!0}function Xi(e,t,n,r,l,s){if(Qn=s,_e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ys.current=e===null||e.memoizedState===null?Dg:$g,e=n(r,l),al){s=0;do{if(al=!1,_l=0,25<=s)throw Error(Q(301));s+=1,De=Ie=null,t.updateQueue=null,ys.current=Ug,e=n(r,l)}while(al)}if(ys.current=Ws,t=Ie!==null&&Ie.next!==null,Qn=0,De=Ie=_e=null,Bs=!1,t)throw Error(Q(300));return e}function Zi(){var e=_l!==0;return _l=0,e}function $t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?_e.memoizedState=De=e:De=De.next=e,De}function Ct(){if(Ie===null){var e=_e.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var t=De===null?_e.memoizedState:De.next;if(t!==null)De=t,Ie=e;else{if(e===null)throw Error(Q(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},De===null?_e.memoizedState=De=e:De=De.next=e}return De}function Fl(e,t){return typeof t=="function"?t(e):t}function Yo(e){var t=Ct(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=Ie,l=r.baseQueue,s=n.pending;if(s!==null){if(l!==null){var a=l.next;l.next=s.next,s.next=a}r.baseQueue=l=s,n.pending=null}if(l!==null){s=l.next,r=r.baseState;var i=a=null,u=null,d=s;do{var f=d.lane;if((Qn&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(i=u=p,a=r):u=u.next=p,_e.lanes|=f,Yn|=f}d=d.next}while(d!==null&&d!==s);u===null?a=r:u.next=i,Rt(r,t.memoizedState)||(at=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do s=l.lane,_e.lanes|=s,Yn|=s,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function qo(e){var t=Ct(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,s=t.memoizedState;if(l!==null){n.pending=null;var a=l=l.next;do s=e(s,a.action),a=a.next;while(a!==l);Rt(s,t.memoizedState)||(at=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Hf(){}function Gf(e,t){var n=_e,r=Ct(),l=t(),s=!Rt(r.memoizedState,l);if(s&&(r.memoizedState=l,at=!0),r=r.queue,eu(Yf.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||De!==null&&De.memoizedState.tag&1){if(n.flags|=2048,Pl(9,Qf.bind(null,n,r,l,t),void 0,null),$e===null)throw Error(Q(349));Qn&30||Kf(n,t,l)}return l}function Kf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Qf(e,t,n,r){t.value=n,t.getSnapshot=r,qf(t)&&Jf(e)}function Yf(e,t,n){return n(function(){qf(t)&&Jf(e)})}function qf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Rt(e,n)}catch{return!0}}function Jf(e){var t=en(e,1);t!==null&&Lt(t,e,1,-1)}function mc(e){var t=$t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:e},t.queue=e,e=e.dispatch=zg.bind(null,_e,e),[t.memoizedState,e]}function Pl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=_e.updateQueue,t===null?(t={lastEffect:null,stores:null},_e.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Xf(){return Ct().memoizedState}function vs(e,t,n,r){var l=$t();_e.flags|=e,l.memoizedState=Pl(1|t,n,void 0,r===void 0?null:r)}function fo(e,t,n,r){var l=Ct();r=r===void 0?null:r;var s=void 0;if(Ie!==null){var a=Ie.memoizedState;if(s=a.destroy,r!==null&&Ji(r,a.deps)){l.memoizedState=Pl(t,n,s,r);return}}_e.flags|=e,l.memoizedState=Pl(1|t,n,s,r)}function hc(e,t){return vs(8390656,8,e,t)}function eu(e,t){return fo(2048,8,e,t)}function Zf(e,t){return fo(4,2,e,t)}function ep(e,t){return fo(4,4,e,t)}function tp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function np(e,t,n){return n=n!=null?n.concat([e]):null,fo(4,4,tp.bind(null,t,e),n)}function tu(){}function rp(e,t){var n=Ct();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ji(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function lp(e,t){var n=Ct();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ji(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function sp(e,t,n){return Qn&21?(Rt(n,t)||(n=cf(),_e.lanes|=n,Yn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,at=!0),e.memoizedState=n)}function Ig(e,t){var n=we;we=n!==0&&4>n?n:4,e(!0);var r=Qo.transition;Qo.transition={};try{e(!1),t()}finally{we=n,Qo.transition=r}}function op(){return Ct().memoizedState}function Mg(e,t,n){var r=bn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ap(e))ip(t,n);else if(n=Bf(e,t,n,r),n!==null){var l=nt();Lt(n,e,r,l),up(n,t,r)}}function zg(e,t,n){var r=bn(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ap(e))ip(t,l);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,i=s(a,n);if(l.hasEagerState=!0,l.eagerState=i,Rt(i,a)){var u=t.interleaved;u===null?(l.next=l,Gi(t)):(l.next=u.next,u.next=l),t.interleaved=l;return}}catch{}finally{}n=Bf(e,t,l,r),n!==null&&(l=nt(),Lt(n,e,r,l),up(n,t,r))}}function ap(e){var t=e.alternate;return e===_e||t!==null&&t===_e}function ip(e,t){al=Bs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function up(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Li(e,n)}}var Ws={readContext:bt,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},Dg={readContext:bt,useCallback:function(e,t){return $t().memoizedState=[e,t===void 0?null:t],e},useContext:bt,useEffect:hc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,vs(4194308,4,tp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vs(4194308,4,e,t)},useInsertionEffect:function(e,t){return vs(4,2,e,t)},useMemo:function(e,t){var n=$t();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$t();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Mg.bind(null,_e,e),[r.memoizedState,e]},useRef:function(e){var t=$t();return e={current:e},t.memoizedState=e},useState:mc,useDebugValue:tu,useDeferredValue:function(e){return $t().memoizedState=e},useTransition:function(){var e=mc(!1),t=e[0];return e=Ig.bind(null,e[1]),$t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_e,l=$t();if(ke){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=t(),$e===null)throw Error(Q(349));Qn&30||Kf(r,t,n)}l.memoizedState=n;var s={value:n,getSnapshot:t};return l.queue=s,hc(Yf.bind(null,r,s,e),[e]),r.flags|=2048,Pl(9,Qf.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=$t(),t=$e.identifierPrefix;if(ke){var n=Yt,r=Qt;n=(r&~(1<<32-At(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=_l++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Tg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$g={readContext:bt,useCallback:rp,useContext:bt,useEffect:eu,useImperativeHandle:np,useInsertionEffect:Zf,useLayoutEffect:ep,useMemo:lp,useReducer:Yo,useRef:Xf,useState:function(){return Yo(Fl)},useDebugValue:tu,useDeferredValue:function(e){var t=Ct();return sp(t,Ie.memoizedState,e)},useTransition:function(){var e=Yo(Fl)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:Hf,useSyncExternalStore:Gf,useId:op,unstable_isNewReconciler:!1},Ug={readContext:bt,useCallback:rp,useContext:bt,useEffect:eu,useImperativeHandle:np,useInsertionEffect:Zf,useLayoutEffect:ep,useMemo:lp,useReducer:qo,useRef:Xf,useState:function(){return qo(Fl)},useDebugValue:tu,useDeferredValue:function(e){var t=Ct();return Ie===null?t.memoizedState=e:sp(t,Ie.memoizedState,e)},useTransition:function(){var e=qo(Fl)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:Hf,useSyncExternalStore:Gf,useId:op,unstable_isNewReconciler:!1};function Et(e,t){if(e&&e.defaultProps){t=Pe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ba(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var po={isMounted:function(e){return(e=e._reactInternals)?Zn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nt(),l=bn(e),s=qt(r,l);s.payload=t,n!=null&&(s.callback=n),t=jn(e,s,l),t!==null&&(Lt(t,e,l,r),gs(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nt(),l=bn(e),s=qt(r,l);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=jn(e,s,l),t!==null&&(Lt(t,e,l,r),gs(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nt(),r=bn(e),l=qt(n,r);l.tag=2,t!=null&&(l.callback=t),t=jn(e,l,r),t!==null&&(Lt(t,e,r,n),gs(t,e,r))}};function gc(e,t,n,r,l,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,a):t.prototype&&t.prototype.isPureReactComponent?!jl(n,r)||!jl(l,s):!0}function cp(e,t,n){var r=!1,l=Pn,s=t.contextType;return typeof s=="object"&&s!==null?s=bt(s):(l=ut(t)?Gn:Xe.current,r=t.contextTypes,s=(r=r!=null)?Cr(e,l):Pn),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=po,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=s),t}function yc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Ki(e);var s=t.contextType;typeof s=="object"&&s!==null?l.context=bt(s):(s=ut(t)?Gn:Xe.current,l.context=Cr(e,s)),l.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Ba(e,t,s,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&po.enqueueReplaceState(l,l.state,null),$s(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Fr(e,t){try{var n="",r=t;do n+=hh(r),r=r.return;while(r);var l=n}catch(s){l=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:l,digest:null}}function Jo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Va(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Bg=typeof WeakMap=="function"?WeakMap:Map;function dp(e,t,n){n=qt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hs||(Hs=!0,ei=r),Va(e,t)},n}function fp(e,t,n){n=qt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){Va(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Va(e,t),typeof r!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function vc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Bg;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=ny.bind(null,e,t,n),t.then(e,e))}function xc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wc(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=qt(-1,1),t.tag=2,jn(n,t,1))),n.lanes|=1),e)}var Wg=nn.ReactCurrentOwner,at=!1;function tt(e,t,n,r){t.child=e===null?Uf(t,null,n,r):Er(t,e.child,n,r)}function Nc(e,t,n,r,l){n=n.render;var s=t.ref;return Nr(t,l),r=Xi(e,t,n,r,s,l),n=Zi(),e!==null&&!at?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,tn(e,t,l)):(ke&&n&&$i(t),t.flags|=1,tt(e,t,r,l),t.child)}function jc(e,t,n,r,l){if(e===null){var s=n.type;return typeof s=="function"&&!uu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,pp(e,t,s,r,l)):(e=js(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&l)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:jl,n(a,r)&&e.ref===t.ref)return tn(e,t,l)}return t.flags|=1,e=Cn(s,r),e.ref=t.ref,e.return=t,t.child=e}function pp(e,t,n,r,l){if(e!==null){var s=e.memoizedProps;if(jl(s,r)&&e.ref===t.ref)if(at=!1,t.pendingProps=r=s,(e.lanes&l)!==0)e.flags&131072&&(at=!0);else return t.lanes=e.lanes,tn(e,t,l)}return Ha(e,t,n,r,l)}function mp(e,t,n){var r=t.pendingProps,l=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(hr,pt),pt|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(hr,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ne(hr,pt),pt|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ne(hr,pt),pt|=r;return tt(e,t,l,n),t.child}function hp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ha(e,t,n,r,l){var s=ut(n)?Gn:Xe.current;return s=Cr(t,s),Nr(t,l),n=Xi(e,t,n,r,s,l),r=Zi(),e!==null&&!at?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,tn(e,t,l)):(ke&&r&&$i(t),t.flags|=1,tt(e,t,n,l),t.child)}function Sc(e,t,n,r,l){if(ut(n)){var s=!0;Ts(t)}else s=!1;if(Nr(t,l),t.stateNode===null)xs(e,t),cp(t,n,r),Wa(t,n,r,l),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=bt(d):(d=ut(n)?Gn:Xe.current,d=Cr(t,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||u!==d)&&yc(t,a,r,d),un=!1;var g=t.memoizedState;a.state=g,$s(t,r,a,l),u=t.memoizedState,i!==r||g!==u||it.current||un?(typeof f=="function"&&(Ba(t,n,f,r),u=t.memoizedState),(i=un||gc(t,n,i,r,g,u,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=d,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Wf(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:Et(t.type,i),a.props=d,p=t.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=bt(u):(u=ut(n)?Gn:Xe.current,u=Cr(t,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==p||g!==u)&&yc(t,a,r,u),un=!1,g=t.memoizedState,a.state=g,$s(t,r,a,l);var x=t.memoizedState;i!==p||g!==x||it.current||un?(typeof w=="function"&&(Ba(t,n,w,r),x=t.memoizedState),(d=un||gc(t,n,d,r,g,x,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),a.props=r,a.state=x,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Ga(e,t,n,r,s,l)}function Ga(e,t,n,r,l,s){hp(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return l&&ic(t,n,!1),tn(e,t,s);r=t.stateNode,Wg.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Er(t,e.child,null,s),t.child=Er(t,null,i,s)):tt(e,t,i,s),t.memoizedState=r.state,l&&ic(t,n,!0),t.child}function gp(e){var t=e.stateNode;t.pendingContext?ac(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ac(e,t.context,!1),Qi(e,t.containerInfo)}function bc(e,t,n,r,l){return kr(),Bi(l),t.flags|=256,tt(e,t,n,r),t.child}var Ka={dehydrated:null,treeContext:null,retryLane:0};function Qa(e){return{baseLanes:e,cachePool:null,transitions:null}}function yp(e,t,n){var r=t.pendingProps,l=Ee.current,s=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(l&2)!==0),i?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Ne(Ee,l&1),e===null)return $a(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,s?(r=t.mode,s=t.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=go(a,r,0,null),e=Vn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Qa(n),t.memoizedState=Ka,e):nu(t,a));if(l=e.memoizedState,l!==null&&(i=l.dehydrated,i!==null))return Vg(e,t,a,r,i,l,n);if(s){s=r.fallback,a=t.mode,l=e.child,i=l.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Cn(l,u),r.subtreeFlags=l.subtreeFlags&14680064),i!==null?s=Cn(i,s):(s=Vn(s,a,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,a=e.child.memoizedState,a=a===null?Qa(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~n,t.memoizedState=Ka,r}return s=e.child,e=s.sibling,r=Cn(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function nu(e,t){return t=go({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function os(e,t,n,r){return r!==null&&Bi(r),Er(t,e.child,null,n),e=nu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Vg(e,t,n,r,l,s,a){if(n)return t.flags&256?(t.flags&=-257,r=Jo(Error(Q(422))),os(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,l=t.mode,r=go({mode:"visible",children:r.children},l,0,null),s=Vn(s,l,a,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Er(t,e.child,null,a),t.child.memoizedState=Qa(a),t.memoizedState=Ka,s);if(!(t.mode&1))return os(e,t,a,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var i=r.dgst;return r=i,s=Error(Q(419)),r=Jo(s,r,void 0),os(e,t,a,r)}if(i=(a&e.childLanes)!==0,at||i){if(r=$e,r!==null){switch(a&-a){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|a)?0:l,l!==0&&l!==s.retryLane&&(s.retryLane=l,en(e,l),Lt(r,e,l,-1))}return iu(),r=Jo(Error(Q(421))),os(e,t,a,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=ry.bind(null,e),l._reactRetry=t,null):(e=s.treeContext,mt=Nn(l.nextSibling),ht=t,ke=!0,Pt=null,e!==null&&(wt[Nt++]=Qt,wt[Nt++]=Yt,wt[Nt++]=Kn,Qt=e.id,Yt=e.overflow,Kn=t),t=nu(t,r.children),t.flags|=4096,t)}function Cc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ua(e.return,t,n)}function Xo(e,t,n,r,l){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=l)}function vp(e,t,n){var r=t.pendingProps,l=r.revealOrder,s=r.tail;if(tt(e,t,r.children,n),r=Ee.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cc(e,n,t);else if(e.tag===19)Cc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ne(Ee,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Us(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Xo(t,!1,l,n,s);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Us(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Xo(t,!0,n,null,s);break;case"together":Xo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function tn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,n=Cn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Cn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Hg(e,t,n){switch(t.tag){case 3:gp(t),kr();break;case 5:Vf(t);break;case 1:ut(t.type)&&Ts(t);break;case 4:Qi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;Ne(zs,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Ee,Ee.current&1),t.flags|=128,null):n&t.child.childLanes?yp(e,t,n):(Ne(Ee,Ee.current&1),e=tn(e,t,n),e!==null?e.sibling:null);Ne(Ee,Ee.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return vp(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ne(Ee,Ee.current),r)break;return null;case 22:case 23:return t.lanes=0,mp(e,t,n)}return tn(e,t,n)}var xp,Ya,wp,Np;xp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ya=function(){};wp=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,Bn(Wt.current);var s=null;switch(n){case"input":l=ya(e,l),r=ya(e,r),s=[];break;case"select":l=Pe({},l,{value:void 0}),r=Pe({},r,{value:void 0}),s=[];break;case"textarea":l=wa(e,l),r=wa(e,r),s=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Os)}ja(n,r);var a;n=null;for(d in l)if(!r.hasOwnProperty(d)&&l.hasOwnProperty(d)&&l[d]!=null)if(d==="style"){var i=l[d];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(hl.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(i=l!=null?l[d]:void 0,r.hasOwnProperty(d)&&u!==i&&(u!=null||i!=null))if(d==="style")if(i){for(a in i)!i.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&i[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,i=i?i.__html:void 0,u!=null&&i!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(hl.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Se("scroll",e),s||i===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}};Np=function(e,t,n,r){n!==r&&(t.flags|=4)};function Yr(e,t){if(!ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ye(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gg(e,t,n){var r=t.pendingProps;switch(Ui(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ye(t),null;case 1:return ut(t.type)&&Rs(),Ye(t),null;case 3:return r=t.stateNode,_r(),be(it),be(Xe),qi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ls(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pt!==null&&(ri(Pt),Pt=null))),Ya(e,t),Ye(t),null;case 5:Yi(t);var l=Bn(El.current);if(n=t.type,e!==null&&t.stateNode!=null)wp(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Q(166));return Ye(t),null}if(e=Bn(Wt.current),ls(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Ut]=t,r[Cl]=s,e=(t.mode&1)!==0,n){case"dialog":Se("cancel",r),Se("close",r);break;case"iframe":case"object":case"embed":Se("load",r);break;case"video":case"audio":for(l=0;l<el.length;l++)Se(el[l],r);break;case"source":Se("error",r);break;case"img":case"image":case"link":Se("error",r),Se("load",r);break;case"details":Se("toggle",r);break;case"input":Ru(r,s),Se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Se("invalid",r);break;case"textarea":Iu(r,s),Se("invalid",r)}ja(n,s),l=null;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];a==="children"?typeof i=="string"?r.textContent!==i&&(s.suppressHydrationWarning!==!0&&rs(r.textContent,i,e),l=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(s.suppressHydrationWarning!==!0&&rs(r.textContent,i,e),l=["children",""+i]):hl.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Se("scroll",r)}switch(n){case"input":Yl(r),Tu(r,s,!0);break;case"textarea":Yl(r),Mu(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Os)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Ut]=t,e[Cl]=r,xp(e,t,!1,!1),t.stateNode=e;e:{switch(a=Sa(n,r),n){case"dialog":Se("cancel",e),Se("close",e),l=r;break;case"iframe":case"object":case"embed":Se("load",e),l=r;break;case"video":case"audio":for(l=0;l<el.length;l++)Se(el[l],e);l=r;break;case"source":Se("error",e),l=r;break;case"img":case"image":case"link":Se("error",e),Se("load",e),l=r;break;case"details":Se("toggle",e),l=r;break;case"input":Ru(e,r),l=ya(e,r),Se("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=Pe({},r,{value:void 0}),Se("invalid",e);break;case"textarea":Iu(e,r),l=wa(e,r),Se("invalid",e);break;default:l=r}ja(n,l),i=l;for(s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="style"?Jd(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Yd(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&gl(e,u):typeof u=="number"&&gl(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(hl.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Se("scroll",e):u!=null&&ki(e,s,u,a))}switch(n){case"input":Yl(e),Tu(e,r,!1);break;case"textarea":Yl(e),Mu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Fn(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?yr(e,!!r.multiple,s,!1):r.defaultValue!=null&&yr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Os)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ye(t),null;case 6:if(e&&t.stateNode!=null)Np(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Q(166));if(n=Bn(El.current),Bn(Wt.current),ls(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ut]=t,(s=r.nodeValue!==n)&&(e=ht,e!==null))switch(e.tag){case 3:rs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rs(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ut]=t,t.stateNode=r}return Ye(t),null;case 13:if(be(Ee),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ke&&mt!==null&&t.mode&1&&!(t.flags&128))Df(),kr(),t.flags|=98560,s=!1;else if(s=ls(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Q(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));s[Ut]=t}else kr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ye(t),s=!1}else Pt!==null&&(ri(Pt),Pt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ee.current&1?Me===0&&(Me=3):iu())),t.updateQueue!==null&&(t.flags|=4),Ye(t),null);case 4:return _r(),Ya(e,t),e===null&&Sl(t.stateNode.containerInfo),Ye(t),null;case 10:return Hi(t.type._context),Ye(t),null;case 17:return ut(t.type)&&Rs(),Ye(t),null;case 19:if(be(Ee),s=t.memoizedState,s===null)return Ye(t),null;if(r=(t.flags&128)!==0,a=s.rendering,a===null)if(r)Yr(s,!1);else{if(Me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Us(e),a!==null){for(t.flags|=128,Yr(s,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ne(Ee,Ee.current&1|2),t.child}e=e.sibling}s.tail!==null&&Oe()>Pr&&(t.flags|=128,r=!0,Yr(s,!1),t.lanes=4194304)}else{if(!r)if(e=Us(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Yr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!ke)return Ye(t),null}else 2*Oe()-s.renderingStartTime>Pr&&n!==1073741824&&(t.flags|=128,r=!0,Yr(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(n=s.last,n!==null?n.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Oe(),t.sibling=null,n=Ee.current,Ne(Ee,r?n&1|2:n&1),t):(Ye(t),null);case 22:case 23:return au(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?pt&1073741824&&(Ye(t),t.subtreeFlags&6&&(t.flags|=8192)):Ye(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function Kg(e,t){switch(Ui(t),t.tag){case 1:return ut(t.type)&&Rs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _r(),be(it),be(Xe),qi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yi(t),null;case 13:if(be(Ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(Ee),null;case 4:return _r(),null;case 10:return Hi(t.type._context),null;case 22:case 23:return au(),null;case 24:return null;default:return null}}var as=!1,Je=!1,Qg=typeof WeakSet=="function"?WeakSet:Set,re=null;function mr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(e,t,r)}else n.current=null}function qa(e,t,n){try{n()}catch(r){Ae(e,t,r)}}var kc=!1;function Yg(e,t){if(Oa=Ps,e=kf(),Di(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,i=-1,u=-1,d=0,f=0,p=e,g=null;t:for(;;){for(var w;p!==n||l!==0&&p.nodeType!==3||(i=a+l),p!==s||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===e)break t;if(g===n&&++d===l&&(i=a),g===s&&++f===r&&(u=a),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=i===-1||u===-1?null:{start:i,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ra={focusedElem:e,selectionRange:n},Ps=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var j=x.memoizedProps,S=x.memoizedState,y=t.stateNode,h=y.getSnapshotBeforeUpdate(t.elementType===t.type?j:Et(t.type,j),S);y.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(N){Ae(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return x=kc,kc=!1,x}function il(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var s=l.destroy;l.destroy=void 0,s!==void 0&&qa(t,n,s)}l=l.next}while(l!==r)}}function mo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ja(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function jp(e){var t=e.alternate;t!==null&&(e.alternate=null,jp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ut],delete t[Cl],delete t[Ma],delete t[Ag],delete t[Lg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sp(e){return e.tag===5||e.tag===3||e.tag===4}function Ec(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Os));else if(r!==4&&(e=e.child,e!==null))for(Xa(e,t,n),e=e.sibling;e!==null;)Xa(e,t,n),e=e.sibling}function Za(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Za(e,t,n),e=e.sibling;e!==null;)Za(e,t,n),e=e.sibling}var Ve=null,Ft=!1;function on(e,t,n){for(n=n.child;n!==null;)bp(e,t,n),n=n.sibling}function bp(e,t,n){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(so,n)}catch{}switch(n.tag){case 5:Je||mr(n,t);case 6:var r=Ve,l=Ft;Ve=null,on(e,t,n),Ve=r,Ft=l,Ve!==null&&(Ft?(e=Ve,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ve.removeChild(n.stateNode));break;case 18:Ve!==null&&(Ft?(e=Ve,n=n.stateNode,e.nodeType===8?Ho(e.parentNode,n):e.nodeType===1&&Ho(e,n),wl(e)):Ho(Ve,n.stateNode));break;case 4:r=Ve,l=Ft,Ve=n.stateNode.containerInfo,Ft=!0,on(e,t,n),Ve=r,Ft=l;break;case 0:case 11:case 14:case 15:if(!Je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var s=l,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&qa(n,t,a),l=l.next}while(l!==r)}on(e,t,n);break;case 1:if(!Je&&(mr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Ae(n,t,i)}on(e,t,n);break;case 21:on(e,t,n);break;case 22:n.mode&1?(Je=(r=Je)||n.memoizedState!==null,on(e,t,n),Je=r):on(e,t,n);break;default:on(e,t,n)}}function _c(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Qg),t.forEach(function(r){var l=ly.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function kt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var s=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:Ve=i.stateNode,Ft=!1;break e;case 3:Ve=i.stateNode.containerInfo,Ft=!0;break e;case 4:Ve=i.stateNode.containerInfo,Ft=!0;break e}i=i.return}if(Ve===null)throw Error(Q(160));bp(s,a,l),Ve=null,Ft=!1;var u=l.alternate;u!==null&&(u.return=null),l.return=null}catch(d){Ae(l,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Cp(t,e),t=t.sibling}function Cp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(kt(t,e),Dt(e),r&4){try{il(3,e,e.return),mo(3,e)}catch(j){Ae(e,e.return,j)}try{il(5,e,e.return)}catch(j){Ae(e,e.return,j)}}break;case 1:kt(t,e),Dt(e),r&512&&n!==null&&mr(n,n.return);break;case 5:if(kt(t,e),Dt(e),r&512&&n!==null&&mr(n,n.return),e.flags&32){var l=e.stateNode;try{gl(l,"")}catch(j){Ae(e,e.return,j)}}if(r&4&&(l=e.stateNode,l!=null)){var s=e.memoizedProps,a=n!==null?n.memoizedProps:s,i=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{i==="input"&&s.type==="radio"&&s.name!=null&&Gd(l,s),Sa(i,a);var d=Sa(i,s);for(a=0;a<u.length;a+=2){var f=u[a],p=u[a+1];f==="style"?Jd(l,p):f==="dangerouslySetInnerHTML"?Yd(l,p):f==="children"?gl(l,p):ki(l,f,p,d)}switch(i){case"input":va(l,s);break;case"textarea":Kd(l,s);break;case"select":var g=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?yr(l,!!s.multiple,w,!1):g!==!!s.multiple&&(s.defaultValue!=null?yr(l,!!s.multiple,s.defaultValue,!0):yr(l,!!s.multiple,s.multiple?[]:"",!1))}l[Cl]=s}catch(j){Ae(e,e.return,j)}}break;case 6:if(kt(t,e),Dt(e),r&4){if(e.stateNode===null)throw Error(Q(162));l=e.stateNode,s=e.memoizedProps;try{l.nodeValue=s}catch(j){Ae(e,e.return,j)}}break;case 3:if(kt(t,e),Dt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wl(t.containerInfo)}catch(j){Ae(e,e.return,j)}break;case 4:kt(t,e),Dt(e);break;case 13:kt(t,e),Dt(e),l=e.child,l.flags&8192&&(s=l.memoizedState!==null,l.stateNode.isHidden=s,!s||l.alternate!==null&&l.alternate.memoizedState!==null||(su=Oe())),r&4&&_c(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Je=(d=Je)||f,kt(t,e),Je=d):kt(t,e),Dt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(re=e,f=e.child;f!==null;){for(p=re=f;re!==null;){switch(g=re,w=g.child,g.tag){case 0:case 11:case 14:case 15:il(4,g,g.return);break;case 1:mr(g,g.return);var x=g.stateNode;if(typeof x.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(j){Ae(r,n,j)}}break;case 5:mr(g,g.return);break;case 22:if(g.memoizedState!==null){Pc(p);continue}}w!==null?(w.return=g,re=w):Pc(p)}f=f.sibling}e:for(f=null,p=e;;){if(p.tag===5){if(f===null){f=p;try{l=p.stateNode,d?(s=l.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(i=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,i.style.display=qd("display",a))}catch(j){Ae(e,e.return,j)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(j){Ae(e,e.return,j)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:kt(t,e),Dt(e),r&4&&_c(e);break;case 21:break;default:kt(t,e),Dt(e)}}function Dt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Sp(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(gl(l,""),r.flags&=-33);var s=Ec(e);Za(e,s,l);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Ec(e);Xa(e,i,a);break;default:throw Error(Q(161))}}catch(u){Ae(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qg(e,t,n){re=e,kp(e)}function kp(e,t,n){for(var r=(e.mode&1)!==0;re!==null;){var l=re,s=l.child;if(l.tag===22&&r){var a=l.memoizedState!==null||as;if(!a){var i=l.alternate,u=i!==null&&i.memoizedState!==null||Je;i=as;var d=Je;if(as=a,(Je=u)&&!d)for(re=l;re!==null;)a=re,u=a.child,a.tag===22&&a.memoizedState!==null?Ac(l):u!==null?(u.return=a,re=u):Ac(l);for(;s!==null;)re=s,kp(s),s=s.sibling;re=l,as=i,Je=d}Fc(e)}else l.subtreeFlags&8772&&s!==null?(s.return=l,re=s):Fc(e)}}function Fc(e){for(;re!==null;){var t=re;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Je||mo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Je)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Et(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&pc(t,s,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}pc(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&wl(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Je||t.flags&512&&Ja(t)}catch(g){Ae(t,t.return,g)}}if(t===e){re=null;break}if(n=t.sibling,n!==null){n.return=t.return,re=n;break}re=t.return}}function Pc(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,re=n;break}re=t.return}}function Ac(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mo(4,t)}catch(u){Ae(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(u){Ae(t,l,u)}}var s=t.return;try{Ja(t)}catch(u){Ae(t,s,u)}break;case 5:var a=t.return;try{Ja(t)}catch(u){Ae(t,a,u)}}}catch(u){Ae(t,t.return,u)}if(t===e){re=null;break}var i=t.sibling;if(i!==null){i.return=t.return,re=i;break}re=t.return}}var Jg=Math.ceil,Vs=nn.ReactCurrentDispatcher,ru=nn.ReactCurrentOwner,St=nn.ReactCurrentBatchConfig,ye=0,$e=null,Re=null,He=0,pt=0,hr=Ln(0),Me=0,Al=null,Yn=0,ho=0,lu=0,ul=null,ot=null,su=0,Pr=1/0,Gt=null,Hs=!1,ei=null,Sn=null,is=!1,pn=null,Gs=0,cl=0,ti=null,ws=-1,Ns=0;function nt(){return ye&6?Oe():ws!==-1?ws:ws=Oe()}function bn(e){return e.mode&1?ye&2&&He!==0?He&-He:Rg.transition!==null?(Ns===0&&(Ns=cf()),Ns):(e=we,e!==0||(e=window.event,e=e===void 0?16:yf(e.type)),e):1}function Lt(e,t,n,r){if(50<cl)throw cl=0,ti=null,Error(Q(185));zl(e,n,r),(!(ye&2)||e!==$e)&&(e===$e&&(!(ye&2)&&(ho|=n),Me===4&&dn(e,He)),ct(e,r),n===1&&ye===0&&!(t.mode&1)&&(Pr=Oe()+500,co&&On()))}function ct(e,t){var n=e.callbackNode;Rh(e,t);var r=Fs(e,e===$e?He:0);if(r===0)n!==null&&$u(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&$u(n),t===1)e.tag===0?Og(Lc.bind(null,e)):If(Lc.bind(null,e)),Fg(function(){!(ye&6)&&On()}),n=null;else{switch(df(r)){case 1:n=Ai;break;case 4:n=af;break;case 16:n=_s;break;case 536870912:n=uf;break;default:n=_s}n=Rp(n,Ep.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ep(e,t){if(ws=-1,Ns=0,ye&6)throw Error(Q(327));var n=e.callbackNode;if(jr()&&e.callbackNode!==n)return null;var r=Fs(e,e===$e?He:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ks(e,r);else{t=r;var l=ye;ye|=2;var s=Fp();($e!==e||He!==t)&&(Gt=null,Pr=Oe()+500,Wn(e,t));do try{ey();break}catch(i){_p(e,i)}while(!0);Vi(),Vs.current=s,ye=l,Re!==null?t=0:($e=null,He=0,t=Me)}if(t!==0){if(t===2&&(l=_a(e),l!==0&&(r=l,t=ni(e,l))),t===1)throw n=Al,Wn(e,0),dn(e,r),ct(e,Oe()),n;if(t===6)dn(e,r);else{if(l=e.current.alternate,!(r&30)&&!Xg(l)&&(t=Ks(e,r),t===2&&(s=_a(e),s!==0&&(r=s,t=ni(e,s))),t===1))throw n=Al,Wn(e,0),dn(e,r),ct(e,Oe()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(Q(345));case 2:zn(e,ot,Gt);break;case 3:if(dn(e,r),(r&130023424)===r&&(t=su+500-Oe(),10<t)){if(Fs(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){nt(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Ia(zn.bind(null,e,ot,Gt),t);break}zn(e,ot,Gt);break;case 4:if(dn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var a=31-At(r);s=1<<a,a=t[a],a>l&&(l=a),r&=~s}if(r=l,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Jg(r/1960))-r,10<r){e.timeoutHandle=Ia(zn.bind(null,e,ot,Gt),r);break}zn(e,ot,Gt);break;case 5:zn(e,ot,Gt);break;default:throw Error(Q(329))}}}return ct(e,Oe()),e.callbackNode===n?Ep.bind(null,e):null}function ni(e,t){var n=ul;return e.current.memoizedState.isDehydrated&&(Wn(e,t).flags|=256),e=Ks(e,t),e!==2&&(t=ot,ot=n,t!==null&&ri(t)),e}function ri(e){ot===null?ot=e:ot.push.apply(ot,e)}function Xg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],s=l.getSnapshot;l=l.value;try{if(!Rt(s(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function dn(e,t){for(t&=~lu,t&=~ho,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-At(t),r=1<<n;e[n]=-1,t&=~r}}function Lc(e){if(ye&6)throw Error(Q(327));jr();var t=Fs(e,0);if(!(t&1))return ct(e,Oe()),null;var n=Ks(e,t);if(e.tag!==0&&n===2){var r=_a(e);r!==0&&(t=r,n=ni(e,r))}if(n===1)throw n=Al,Wn(e,0),dn(e,t),ct(e,Oe()),n;if(n===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zn(e,ot,Gt),ct(e,Oe()),null}function ou(e,t){var n=ye;ye|=1;try{return e(t)}finally{ye=n,ye===0&&(Pr=Oe()+500,co&&On())}}function qn(e){pn!==null&&pn.tag===0&&!(ye&6)&&jr();var t=ye;ye|=1;var n=St.transition,r=we;try{if(St.transition=null,we=1,e)return e()}finally{we=r,St.transition=n,ye=t,!(ye&6)&&On()}}function au(){pt=hr.current,be(hr)}function Wn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,_g(n)),Re!==null)for(n=Re.return;n!==null;){var r=n;switch(Ui(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rs();break;case 3:_r(),be(it),be(Xe),qi();break;case 5:Yi(r);break;case 4:_r();break;case 13:be(Ee);break;case 19:be(Ee);break;case 10:Hi(r.type._context);break;case 22:case 23:au()}n=n.return}if($e=e,Re=e=Cn(e.current,null),He=pt=t,Me=0,Al=null,lu=ho=Yn=0,ot=ul=null,Un!==null){for(t=0;t<Un.length;t++)if(n=Un[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=l,r.next=a}n.pending=r}Un=null}return e}function _p(e,t){do{var n=Re;try{if(Vi(),ys.current=Ws,Bs){for(var r=_e.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Bs=!1}if(Qn=0,De=Ie=_e=null,al=!1,_l=0,ru.current=null,n===null||n.return===null){Me=1,Al=t,Re=null;break}e:{var s=e,a=n.return,i=n,u=t;if(t=He,i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=i,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=xc(a);if(w!==null){w.flags&=-257,wc(w,a,i,s,t),w.mode&1&&vc(s,d,t),t=w,u=d;var x=t.updateQueue;if(x===null){var j=new Set;j.add(u),t.updateQueue=j}else x.add(u);break e}else{if(!(t&1)){vc(s,d,t),iu();break e}u=Error(Q(426))}}else if(ke&&i.mode&1){var S=xc(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),wc(S,a,i,s,t),Bi(Fr(u,i));break e}}s=u=Fr(u,i),Me!==4&&(Me=2),ul===null?ul=[s]:ul.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=dp(s,u,t);fc(s,y);break e;case 1:i=u;var h=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Sn===null||!Sn.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t;var N=fp(s,i,t);fc(s,N);break e}}s=s.return}while(s!==null)}Ap(n)}catch(P){t=P,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function Fp(){var e=Vs.current;return Vs.current=Ws,e===null?Ws:e}function iu(){(Me===0||Me===3||Me===2)&&(Me=4),$e===null||!(Yn&268435455)&&!(ho&268435455)||dn($e,He)}function Ks(e,t){var n=ye;ye|=2;var r=Fp();($e!==e||He!==t)&&(Gt=null,Wn(e,t));do try{Zg();break}catch(l){_p(e,l)}while(!0);if(Vi(),ye=n,Vs.current=r,Re!==null)throw Error(Q(261));return $e=null,He=0,Me}function Zg(){for(;Re!==null;)Pp(Re)}function ey(){for(;Re!==null&&!Ch();)Pp(Re)}function Pp(e){var t=Op(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?Ap(e):Re=t,ru.current=null}function Ap(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Kg(n,t),n!==null){n.flags&=32767,Re=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,Re=null;return}}else if(n=Gg(n,t,pt),n!==null){Re=n;return}if(t=t.sibling,t!==null){Re=t;return}Re=t=e}while(t!==null);Me===0&&(Me=5)}function zn(e,t,n){var r=we,l=St.transition;try{St.transition=null,we=1,ty(e,t,n,r)}finally{St.transition=l,we=r}return null}function ty(e,t,n,r){do jr();while(pn!==null);if(ye&6)throw Error(Q(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Th(e,s),e===$e&&(Re=$e=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||is||(is=!0,Rp(_s,function(){return jr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=St.transition,St.transition=null;var a=we;we=1;var i=ye;ye|=4,ru.current=null,Yg(e,n),Cp(n,e),Ng(Ra),Ps=!!Oa,Ra=Oa=null,e.current=n,qg(n),kh(),ye=i,we=a,St.transition=s}else e.current=n;if(is&&(is=!1,pn=e,Gs=l),s=e.pendingLanes,s===0&&(Sn=null),Fh(n.stateNode),ct(e,Oe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(Hs)throw Hs=!1,e=ei,ei=null,e;return Gs&1&&e.tag!==0&&jr(),s=e.pendingLanes,s&1?e===ti?cl++:(cl=0,ti=e):cl=0,On(),null}function jr(){if(pn!==null){var e=df(Gs),t=St.transition,n=we;try{if(St.transition=null,we=16>e?16:e,pn===null)var r=!1;else{if(e=pn,pn=null,Gs=0,ye&6)throw Error(Q(331));var l=ye;for(ye|=4,re=e.current;re!==null;){var s=re,a=s.child;if(re.flags&16){var i=s.deletions;if(i!==null){for(var u=0;u<i.length;u++){var d=i[u];for(re=d;re!==null;){var f=re;switch(f.tag){case 0:case 11:case 15:il(8,f,s)}var p=f.child;if(p!==null)p.return=f,re=p;else for(;re!==null;){f=re;var g=f.sibling,w=f.return;if(jp(f),f===d){re=null;break}if(g!==null){g.return=w,re=g;break}re=w}}}var x=s.alternate;if(x!==null){var j=x.child;if(j!==null){x.child=null;do{var S=j.sibling;j.sibling=null,j=S}while(j!==null)}}re=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,re=a;else e:for(;re!==null;){if(s=re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:il(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,re=y;break e}re=s.return}}var h=e.current;for(re=h;re!==null;){a=re;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,re=v;else e:for(a=h;re!==null;){if(i=re,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:mo(9,i)}}catch(P){Ae(i,i.return,P)}if(i===a){re=null;break e}var N=i.sibling;if(N!==null){N.return=i.return,re=N;break e}re=i.return}}if(ye=l,On(),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(so,e)}catch{}r=!0}return r}finally{we=n,St.transition=t}}return!1}function Oc(e,t,n){t=Fr(n,t),t=dp(e,t,1),e=jn(e,t,1),t=nt(),e!==null&&(zl(e,1,t),ct(e,t))}function Ae(e,t,n){if(e.tag===3)Oc(e,e,n);else for(;t!==null;){if(t.tag===3){Oc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sn===null||!Sn.has(r))){e=Fr(n,e),e=fp(t,e,1),t=jn(t,e,1),e=nt(),t!==null&&(zl(t,1,e),ct(t,e));break}}t=t.return}}function ny(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=nt(),e.pingedLanes|=e.suspendedLanes&n,$e===e&&(He&n)===n&&(Me===4||Me===3&&(He&130023424)===He&&500>Oe()-su?Wn(e,0):lu|=n),ct(e,t)}function Lp(e,t){t===0&&(e.mode&1?(t=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):t=1);var n=nt();e=en(e,t),e!==null&&(zl(e,t,n),ct(e,n))}function ry(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Lp(e,n)}function ly(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(t),Lp(e,n)}var Op;Op=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||it.current)at=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return at=!1,Hg(e,t,n);at=!!(e.flags&131072)}else at=!1,ke&&t.flags&1048576&&Mf(t,Ms,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;xs(e,t),e=t.pendingProps;var l=Cr(t,Xe.current);Nr(t,n),l=Xi(null,t,r,e,l,n);var s=Zi();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ut(r)?(s=!0,Ts(t)):s=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Ki(t),l.updater=po,t.stateNode=l,l._reactInternals=t,Wa(t,r,e,n),t=Ga(null,t,r,!0,s,n)):(t.tag=0,ke&&s&&$i(t),tt(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(xs(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=oy(r),e=Et(r,e),l){case 0:t=Ha(null,t,r,e,n);break e;case 1:t=Sc(null,t,r,e,n);break e;case 11:t=Nc(null,t,r,e,n);break e;case 14:t=jc(null,t,r,Et(r.type,e),n);break e}throw Error(Q(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Et(r,l),Ha(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Et(r,l),Sc(e,t,r,l,n);case 3:e:{if(gp(t),e===null)throw Error(Q(387));r=t.pendingProps,s=t.memoizedState,l=s.element,Wf(e,t),$s(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){l=Fr(Error(Q(423)),t),t=bc(e,t,r,n,l);break e}else if(r!==l){l=Fr(Error(Q(424)),t),t=bc(e,t,r,n,l);break e}else for(mt=Nn(t.stateNode.containerInfo.firstChild),ht=t,ke=!0,Pt=null,n=Uf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kr(),r===l){t=tn(e,t,n);break e}tt(e,t,r,n)}t=t.child}return t;case 5:return Vf(t),e===null&&$a(t),r=t.type,l=t.pendingProps,s=e!==null?e.memoizedProps:null,a=l.children,Ta(r,l)?a=null:s!==null&&Ta(r,s)&&(t.flags|=32),hp(e,t),tt(e,t,a,n),t.child;case 6:return e===null&&$a(t),null;case 13:return yp(e,t,n);case 4:return Qi(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Er(t,null,r,n):tt(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Et(r,l),Nc(e,t,r,l,n);case 7:return tt(e,t,t.pendingProps,n),t.child;case 8:return tt(e,t,t.pendingProps.children,n),t.child;case 12:return tt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,s=t.memoizedProps,a=l.value,Ne(zs,r._currentValue),r._currentValue=a,s!==null)if(Rt(s.value,a)){if(s.children===l.children&&!it.current){t=tn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var i=s.dependencies;if(i!==null){a=s.child;for(var u=i.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=qt(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Ua(s.return,n,t),i.lanes|=n;break}u=u.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Q(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Ua(a,n,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}tt(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,Nr(t,n),l=bt(l),r=r(l),t.flags|=1,tt(e,t,r,n),t.child;case 14:return r=t.type,l=Et(r,t.pendingProps),l=Et(r.type,l),jc(e,t,r,l,n);case 15:return pp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Et(r,l),xs(e,t),t.tag=1,ut(r)?(e=!0,Ts(t)):e=!1,Nr(t,n),cp(t,r,l),Wa(t,r,l,n),Ga(null,t,r,!0,e,n);case 19:return vp(e,t,n);case 22:return mp(e,t,n)}throw Error(Q(156,t.tag))};function Rp(e,t){return of(e,t)}function sy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(e,t,n,r){return new sy(e,t,n,r)}function uu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function oy(e){if(typeof e=="function")return uu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_i)return 11;if(e===Fi)return 14}return 2}function Cn(e,t){var n=e.alternate;return n===null?(n=jt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function js(e,t,n,r,l,s){var a=2;if(r=e,typeof e=="function")uu(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case sr:return Vn(n.children,l,s,t);case Ei:a=8,l|=8;break;case pa:return e=jt(12,n,t,l|2),e.elementType=pa,e.lanes=s,e;case ma:return e=jt(13,n,t,l),e.elementType=ma,e.lanes=s,e;case ha:return e=jt(19,n,t,l),e.elementType=ha,e.lanes=s,e;case Wd:return go(n,l,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ud:a=10;break e;case Bd:a=9;break e;case _i:a=11;break e;case Fi:a=14;break e;case an:a=16,r=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=jt(a,n,t,l),t.elementType=e,t.type=r,t.lanes=s,t}function Vn(e,t,n,r){return e=jt(7,e,r,t),e.lanes=n,e}function go(e,t,n,r){return e=jt(22,e,r,t),e.elementType=Wd,e.lanes=n,e.stateNode={isHidden:!1},e}function Zo(e,t,n){return e=jt(6,e,null,t),e.lanes=n,e}function ea(e,t,n){return t=jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ay(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ro(0),this.expirationTimes=Ro(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ro(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function cu(e,t,n,r,l,s,a,i,u){return e=new ay(e,t,n,i,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=jt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ki(s),e}function iy(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Tp(e){if(!e)return Pn;e=e._reactInternals;e:{if(Zn(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ut(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var n=e.type;if(ut(n))return Tf(e,n,t)}return t}function Ip(e,t,n,r,l,s,a,i,u){return e=cu(n,r,!0,e,l,s,a,i,u),e.context=Tp(null),n=e.current,r=nt(),l=bn(n),s=qt(r,l),s.callback=t??null,jn(n,s,l),e.current.lanes=l,zl(e,l,r),ct(e,r),e}function yo(e,t,n,r){var l=t.current,s=nt(),a=bn(l);return n=Tp(n),t.context===null?t.context=n:t.pendingContext=n,t=qt(s,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=jn(l,t,a),e!==null&&(Lt(e,l,a,s),gs(e,l,a)),a}function Qs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Rc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function du(e,t){Rc(e,t),(e=e.alternate)&&Rc(e,t)}function uy(){return null}var Mp=typeof reportError=="function"?reportError:function(e){console.error(e)};function fu(e){this._internalRoot=e}vo.prototype.render=fu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));yo(e,t,null,null)};vo.prototype.unmount=fu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qn(function(){yo(null,e,null,null)}),t[Zt]=null}};function vo(e){this._internalRoot=e}vo.prototype.unstable_scheduleHydration=function(e){if(e){var t=mf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<cn.length&&t!==0&&t<cn[n].priority;n++);cn.splice(n,0,e),n===0&&gf(e)}};function pu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Tc(){}function cy(e,t,n,r,l){if(l){if(typeof r=="function"){var s=r;r=function(){var d=Qs(a);s.call(d)}}var a=Ip(t,r,e,0,null,!1,!1,"",Tc);return e._reactRootContainer=a,e[Zt]=a.current,Sl(e.nodeType===8?e.parentNode:e),qn(),a}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var i=r;r=function(){var d=Qs(u);i.call(d)}}var u=cu(e,0,!1,null,null,!1,!1,"",Tc);return e._reactRootContainer=u,e[Zt]=u.current,Sl(e.nodeType===8?e.parentNode:e),qn(function(){yo(t,u,n,r)}),u}function wo(e,t,n,r,l){var s=n._reactRootContainer;if(s){var a=s;if(typeof l=="function"){var i=l;l=function(){var u=Qs(a);i.call(u)}}yo(t,a,e,l)}else a=cy(n,t,e,l,r);return Qs(a)}ff=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Zr(t.pendingLanes);n!==0&&(Li(t,n|1),ct(t,Oe()),!(ye&6)&&(Pr=Oe()+500,On()))}break;case 13:qn(function(){var r=en(e,1);if(r!==null){var l=nt();Lt(r,e,1,l)}}),du(e,1)}};Oi=function(e){if(e.tag===13){var t=en(e,134217728);if(t!==null){var n=nt();Lt(t,e,134217728,n)}du(e,134217728)}};pf=function(e){if(e.tag===13){var t=bn(e),n=en(e,t);if(n!==null){var r=nt();Lt(n,e,t,r)}du(e,t)}};mf=function(){return we};hf=function(e,t){var n=we;try{return we=e,t()}finally{we=n}};Ca=function(e,t,n){switch(t){case"input":if(va(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=uo(r);if(!l)throw Error(Q(90));Hd(r),va(r,l)}}}break;case"textarea":Kd(e,n);break;case"select":t=n.value,t!=null&&yr(e,!!n.multiple,t,!1)}};ef=ou;tf=qn;var dy={usingClientEntryPoint:!1,Events:[$l,ur,uo,Xd,Zd,ou]},qr={findFiberByHostInstance:$n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fy={bundleType:qr.bundleType,version:qr.version,rendererPackageName:qr.rendererPackageName,rendererConfig:qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=lf(e),e===null?null:e.stateNode},findFiberByHostInstance:qr.findFiberByHostInstance||uy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var us=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!us.isDisabled&&us.supportsFiber)try{so=us.inject(fy),Bt=us}catch{}}yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dy;yt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pu(t))throw Error(Q(200));return iy(e,t,null,n)};yt.createRoot=function(e,t){if(!pu(e))throw Error(Q(299));var n=!1,r="",l=Mp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=cu(e,1,!1,null,null,n,!1,r,l),e[Zt]=t.current,Sl(e.nodeType===8?e.parentNode:e),new fu(t)};yt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=lf(t),e=e===null?null:e.stateNode,e};yt.flushSync=function(e){return qn(e)};yt.hydrate=function(e,t,n){if(!xo(t))throw Error(Q(200));return wo(null,e,t,!0,n)};yt.hydrateRoot=function(e,t,n){if(!pu(e))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,l=!1,s="",a=Mp;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Ip(t,null,e,1,n??null,l,!1,s,a),e[Zt]=t.current,Sl(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new vo(t)};yt.render=function(e,t,n){if(!xo(t))throw Error(Q(200));return wo(null,e,t,!1,n)};yt.unmountComponentAtNode=function(e){if(!xo(e))throw Error(Q(40));return e._reactRootContainer?(qn(function(){wo(null,null,e,!1,function(){e._reactRootContainer=null,e[Zt]=null})}),!0):!1};yt.unstable_batchedUpdates=ou;yt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xo(n))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return wo(e,t,n,!1,r)};yt.version="18.3.1-next-f1338f8080-20240426";function zp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zp)}catch(e){console.error(e)}}zp(),Md.exports=yt;var Dp=Md.exports,Ic=Dp;da.createRoot=Ic.createRoot,da.hydrateRoot=Ic.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ll(){return Ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ll.apply(this,arguments)}var mn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(mn||(mn={}));const Mc="popstate";function py(e){e===void 0&&(e={});function t(l,s){let{pathname:a="/",search:i="",hash:u=""}=er(l.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),li("",{pathname:a,search:i,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(l,s){let a=l.document.querySelector("base"),i="";if(a&&a.getAttribute("href")){let u=l.location.href,d=u.indexOf("#");i=d===-1?u:u.slice(0,d)}return i+"#"+(typeof s=="string"?s:Ys(s))}function r(l,s){mu(l.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return hy(t,n,r,e)}function Fe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function mu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function my(){return Math.random().toString(36).substr(2,8)}function zc(e,t){return{usr:e.state,key:e.key,idx:t}}function li(e,t,n,r){return n===void 0&&(n=null),Ll({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?er(t):t,{state:n,key:t&&t.key||r||my()})}function Ys(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function er(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function hy(e,t,n,r){r===void 0&&(r={});let{window:l=document.defaultView,v5Compat:s=!1}=r,a=l.history,i=mn.Pop,u=null,d=f();d==null&&(d=0,a.replaceState(Ll({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function p(){i=mn.Pop;let S=f(),y=S==null?null:S-d;d=S,u&&u({action:i,location:j.location,delta:y})}function g(S,y){i=mn.Push;let h=li(j.location,S,y);n&&n(h,S),d=f()+1;let v=zc(h,d),N=j.createHref(h);try{a.pushState(v,"",N)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;l.location.assign(N)}s&&u&&u({action:i,location:j.location,delta:1})}function w(S,y){i=mn.Replace;let h=li(j.location,S,y);n&&n(h,S),d=f();let v=zc(h,d),N=j.createHref(h);a.replaceState(v,"",N),s&&u&&u({action:i,location:j.location,delta:0})}function x(S){let y=l.location.origin!=="null"?l.location.origin:l.location.href,h=typeof S=="string"?S:Ys(S);return h=h.replace(/ $/,"%20"),Fe(y,"No window.location.(origin|href) available to create URL for href: "+h),new URL(h,y)}let j={get action(){return i},get location(){return e(l,a)},listen(S){if(u)throw new Error("A history only accepts one active listener");return l.addEventListener(Mc,p),u=S,()=>{l.removeEventListener(Mc,p),u=null}},createHref(S){return t(l,S)},createURL:x,encodeLocation(S){let y=x(S);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:g,replace:w,go(S){return a.go(S)}};return j}var Dc;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Dc||(Dc={}));function gy(e,t,n){return n===void 0&&(n="/"),yy(e,t,n)}function yy(e,t,n,r){let l=typeof t=="string"?er(t):t,s=Ar(l.pathname||"/",n);if(s==null)return null;let a=$p(e);vy(a);let i=null;for(let u=0;i==null&&u<a.length;++u){let d=Fy(s);i=Ey(a[u],d)}return i}function $p(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let l=(s,a,i)=>{let u={relativePath:i===void 0?s.path||"":i,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};u.relativePath.startsWith("/")&&(Fe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=kn([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(Fe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),$p(s.children,t,f,d)),!(s.path==null&&!s.index)&&t.push({path:d,score:Cy(d,s.index),routesMeta:f})};return e.forEach((s,a)=>{var i;if(s.path===""||!((i=s.path)!=null&&i.includes("?")))l(s,a);else for(let u of Up(s.path))l(s,a,u)}),t}function Up(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,l=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return l?[s,""]:[s];let a=Up(r.join("/")),i=[];return i.push(...a.map(u=>u===""?s:[s,u].join("/"))),l&&i.push(...a),i.map(u=>e.startsWith("/")&&u===""?"/":u)}function vy(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ky(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const xy=/^:[\w-]+$/,wy=3,Ny=2,jy=1,Sy=10,by=-2,$c=e=>e==="*";function Cy(e,t){let n=e.split("/"),r=n.length;return n.some($c)&&(r+=by),t&&(r+=Ny),n.filter(l=>!$c(l)).reduce((l,s)=>l+(xy.test(s)?wy:s===""?jy:Sy),r)}function ky(e,t){return e.length===t.length&&e.slice(0,-1).every((r,l)=>r===t[l])?e[e.length-1]-t[t.length-1]:0}function Ey(e,t,n){let{routesMeta:r}=e,l={},s="/",a=[];for(let i=0;i<r.length;++i){let u=r[i],d=i===r.length-1,f=s==="/"?t:t.slice(s.length)||"/",p=si({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p)return null;Object.assign(l,p.params),a.push({params:l,pathname:kn([s,p.pathname]),pathnameBase:Oy(kn([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=kn([s,p.pathnameBase]))}return a}function si(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=_y(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let s=l[0],a=s.replace(/(.)\/+$/,"$1"),i=l.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:w}=f;if(g==="*"){let j=i[p]||"";a=s.slice(0,s.length-j.length).replace(/(.)\/+$/,"$1")}const x=i[p];return w&&!x?d[g]=void 0:d[g]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:a,pattern:e}}function _y(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),mu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,i,u)=>(r.push({paramName:i,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),r]}function Fy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return mu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ar(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Py(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:l=""}=typeof e=="string"?er(e):e;return{pathname:n?n.startsWith("/")?n:Ay(n,t):t,search:Ry(r),hash:Ty(l)}}function Ay(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function ta(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ly(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function hu(e,t){let n=Ly(e);return t?n.map((r,l)=>l===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function gu(e,t,n,r){r===void 0&&(r=!1);let l;typeof e=="string"?l=er(e):(l=Ll({},e),Fe(!l.pathname||!l.pathname.includes("?"),ta("?","pathname","search",l)),Fe(!l.pathname||!l.pathname.includes("#"),ta("#","pathname","hash",l)),Fe(!l.search||!l.search.includes("#"),ta("#","search","hash",l)));let s=e===""||l.pathname==="",a=s?"/":l.pathname,i;if(a==null)i=n;else{let p=t.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;l.pathname=g.join("/")}i=p>=0?t[p]:"/"}let u=Py(l,i),d=a&&a!=="/"&&a.endsWith("/"),f=(s||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const kn=e=>e.join("/").replace(/\/\/+/g,"/"),Oy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ry=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ty=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Iy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Bp=["post","put","patch","delete"];new Set(Bp);const My=["get",...Bp];new Set(My);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ol(){return Ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ol.apply(this,arguments)}const No=c.createContext(null),Wp=c.createContext(null),rn=c.createContext(null),jo=c.createContext(null),Rn=c.createContext({outlet:null,matches:[],isDataRoute:!1}),Vp=c.createContext(null);function zy(e,t){let{relative:n}=t===void 0?{}:t;Mr()||Fe(!1);let{basename:r,navigator:l}=c.useContext(rn),{hash:s,pathname:a,search:i}=So(e,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:kn([r,a])),l.createHref({pathname:u,search:i,hash:s})}function Mr(){return c.useContext(jo)!=null}function Tt(){return Mr()||Fe(!1),c.useContext(jo).location}function Hp(e){c.useContext(rn).static||c.useLayoutEffect(e)}function Bl(){let{isDataRoute:e}=c.useContext(Rn);return e?Jy():Dy()}function Dy(){Mr()||Fe(!1);let e=c.useContext(No),{basename:t,future:n,navigator:r}=c.useContext(rn),{matches:l}=c.useContext(Rn),{pathname:s}=Tt(),a=JSON.stringify(hu(l,n.v7_relativeSplatPath)),i=c.useRef(!1);return Hp(()=>{i.current=!0}),c.useCallback(function(d,f){if(f===void 0&&(f={}),!i.current)return;if(typeof d=="number"){r.go(d);return}let p=gu(d,JSON.parse(a),s,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:kn([t,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[t,r,a,s,e])}function So(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=c.useContext(rn),{matches:l}=c.useContext(Rn),{pathname:s}=Tt(),a=JSON.stringify(hu(l,r.v7_relativeSplatPath));return c.useMemo(()=>gu(e,JSON.parse(a),s,n==="path"),[e,a,s,n])}function $y(e,t){return Uy(e,t)}function Uy(e,t,n,r){Mr()||Fe(!1);let{navigator:l}=c.useContext(rn),{matches:s}=c.useContext(Rn),a=s[s.length-1],i=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=Tt(),f;if(t){var p;let S=typeof t=="string"?er(t):t;u==="/"||(p=S.pathname)!=null&&p.startsWith(u)||Fe(!1),f=S}else f=d;let g=f.pathname||"/",w=g;if(u!=="/"){let S=u.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(S.length).join("/")}let x=gy(e,{pathname:w}),j=Gy(x&&x.map(S=>Object.assign({},S,{params:Object.assign({},i,S.params),pathname:kn([u,l.encodeLocation?l.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:kn([u,l.encodeLocation?l.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,n,r);return t&&j?c.createElement(jo.Provider,{value:{location:Ol({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:mn.Pop}},j):j}function By(){let e=qy(),t=Iy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},t),n?c.createElement("pre",{style:l},n):null,null)}const Wy=c.createElement(By,null);class Vy extends c.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?c.createElement(Rn.Provider,{value:this.props.routeContext},c.createElement(Vp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Hy(e){let{routeContext:t,match:n,children:r}=e,l=c.useContext(No);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),c.createElement(Rn.Provider,{value:t},r)}function Gy(e,t,n,r){var l;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=(l=n)==null?void 0:l.errors;if(i!=null){let f=a.findIndex(p=>p.route.id&&(i==null?void 0:i[p.route.id])!==void 0);f>=0||Fe(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:w}=n,x=p.route.loader&&g[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||x){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,p,g)=>{let w,x=!1,j=null,S=null;n&&(w=i&&p.route.id?i[p.route.id]:void 0,j=p.route.errorElement||Wy,u&&(d<0&&g===0?(Xy("route-fallback"),x=!0,S=null):d===g&&(x=!0,S=p.route.hydrateFallbackElement||null)));let y=t.concat(a.slice(0,g+1)),h=()=>{let v;return w?v=j:x?v=S:p.route.Component?v=c.createElement(p.route.Component,null):p.route.element?v=p.route.element:v=f,c.createElement(Hy,{match:p,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:v})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?c.createElement(Vy,{location:n.location,revalidation:n.revalidation,component:j,error:w,children:h(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):h()},null)}var Gp=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Gp||{}),Kp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Kp||{});function Ky(e){let t=c.useContext(No);return t||Fe(!1),t}function Qy(e){let t=c.useContext(Wp);return t||Fe(!1),t}function Yy(e){let t=c.useContext(Rn);return t||Fe(!1),t}function Qp(e){let t=Yy(),n=t.matches[t.matches.length-1];return n.route.id||Fe(!1),n.route.id}function qy(){var e;let t=c.useContext(Vp),n=Qy(),r=Qp();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Jy(){let{router:e}=Ky(Gp.UseNavigateStable),t=Qp(Kp.UseNavigateStable),n=c.useRef(!1);return Hp(()=>{n.current=!0}),c.useCallback(function(l,s){s===void 0&&(s={}),n.current&&(typeof l=="number"?e.navigate(l):e.navigate(l,Ol({fromRouteId:t},s)))},[e,t])}const Uc={};function Xy(e,t,n){Uc[e]||(Uc[e]=!0)}function Zy(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Yp(e){let{to:t,replace:n,state:r,relative:l}=e;Mr()||Fe(!1);let{future:s,static:a}=c.useContext(rn),{matches:i}=c.useContext(Rn),{pathname:u}=Tt(),d=Bl(),f=gu(t,hu(i,s.v7_relativeSplatPath),u,l==="path"),p=JSON.stringify(f);return c.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:l}),[d,p,l,n,r]),null}function Ht(e){Fe(!1)}function ev(e){let{basename:t="/",children:n=null,location:r,navigationType:l=mn.Pop,navigator:s,static:a=!1,future:i}=e;Mr()&&Fe(!1);let u=t.replace(/^\/*/,"/"),d=c.useMemo(()=>({basename:u,navigator:s,static:a,future:Ol({v7_relativeSplatPath:!1},i)}),[u,i,s,a]);typeof r=="string"&&(r=er(r));let{pathname:f="/",search:p="",hash:g="",state:w=null,key:x="default"}=r,j=c.useMemo(()=>{let S=Ar(f,u);return S==null?null:{location:{pathname:S,search:p,hash:g,state:w,key:x},navigationType:l}},[u,f,p,g,w,x,l]);return j==null?null:c.createElement(rn.Provider,{value:d},c.createElement(jo.Provider,{children:n,value:j}))}function tv(e){let{children:t,location:n}=e;return $y(oi(t),n)}new Promise(()=>{});function oi(e,t){t===void 0&&(t=[]);let n=[];return c.Children.forEach(e,(r,l)=>{if(!c.isValidElement(r))return;let s=[...t,l];if(r.type===c.Fragment){n.push.apply(n,oi(r.props.children,s));return}r.type!==Ht&&Fe(!1),!r.props.index||!r.props.children||Fe(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=oi(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qs(){return qs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qs.apply(this,arguments)}function qp(e,t){if(e==null)return{};var n={},r=Object.keys(e),l,s;for(s=0;s<r.length;s++)l=r[s],!(t.indexOf(l)>=0)&&(n[l]=e[l]);return n}function nv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function rv(e,t){return e.button===0&&(!t||t==="_self")&&!nv(e)}const lv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],sv=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],ov="6";try{window.__reactRouterVersion=ov}catch{}const av=c.createContext({isTransitioning:!1}),iv="startTransition",Bc=nh[iv];function uv(e){let{basename:t,children:n,future:r,window:l}=e,s=c.useRef();s.current==null&&(s.current=py({window:l,v5Compat:!0}));let a=s.current,[i,u]=c.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},f=c.useCallback(p=>{d&&Bc?Bc(()=>u(p)):u(p)},[u,d]);return c.useLayoutEffect(()=>a.listen(f),[a,f]),c.useEffect(()=>Zy(r),[r]),c.createElement(ev,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a,future:r})}const cv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jp=c.forwardRef(function(t,n){let{onClick:r,relative:l,reloadDocument:s,replace:a,state:i,target:u,to:d,preventScrollReset:f,viewTransition:p}=t,g=qp(t,lv),{basename:w}=c.useContext(rn),x,j=!1;if(typeof d=="string"&&dv.test(d)&&(x=d,cv))try{let v=new URL(window.location.href),N=d.startsWith("//")?new URL(v.protocol+d):new URL(d),P=Ar(N.pathname,w);N.origin===v.origin&&P!=null?d=P+N.search+N.hash:j=!0}catch{}let S=zy(d,{relative:l}),y=pv(d,{replace:a,state:i,target:u,preventScrollReset:f,relative:l,viewTransition:p});function h(v){r&&r(v),v.defaultPrevented||y(v)}return c.createElement("a",qs({},g,{href:x||S,onClick:j||s?r:h,ref:n,target:u}))}),Ss=c.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:l=!1,className:s="",end:a=!1,style:i,to:u,viewTransition:d,children:f}=t,p=qp(t,sv),g=So(u,{relative:p.relative}),w=Tt(),x=c.useContext(Wp),{navigator:j,basename:S}=c.useContext(rn),y=x!=null&&mv(g)&&d===!0,h=j.encodeLocation?j.encodeLocation(g).pathname:g.pathname,v=w.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;l||(v=v.toLowerCase(),N=N?N.toLowerCase():null,h=h.toLowerCase()),N&&S&&(N=Ar(N,S)||N);const P=h!=="/"&&h.endsWith("/")?h.length-1:h.length;let L=v===h||!a&&v.startsWith(h)&&v.charAt(P)==="/",A=N!=null&&(N===h||!a&&N.startsWith(h)&&N.charAt(h.length)==="/"),E={isActive:L,isPending:A,isTransitioning:y},W=L?r:void 0,B;typeof s=="function"?B=s(E):B=[s,L?"active":null,A?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let G=typeof i=="function"?i(E):i;return c.createElement(Jp,qs({},p,{"aria-current":W,className:B,ref:n,style:G,to:u,viewTransition:d}),typeof f=="function"?f(E):f)});var ai;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ai||(ai={}));var Wc;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Wc||(Wc={}));function fv(e){let t=c.useContext(No);return t||Fe(!1),t}function pv(e,t){let{target:n,replace:r,state:l,preventScrollReset:s,relative:a,viewTransition:i}=t===void 0?{}:t,u=Bl(),d=Tt(),f=So(e,{relative:a});return c.useCallback(p=>{if(rv(p,n)){p.preventDefault();let g=r!==void 0?r:Ys(d)===Ys(f);u(e,{replace:g,state:l,preventScrollReset:s,relative:a,viewTransition:i})}},[d,u,f,r,l,n,e,s,a,i])}function mv(e,t){t===void 0&&(t={});let n=c.useContext(av);n==null&&Fe(!1);let{basename:r}=fv(ai.useViewTransitionState),l=So(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=Ar(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Ar(n.nextLocation.pathname,r)||n.nextLocation.pathname;return si(l.pathname,a)!=null||si(l.pathname,s)!=null}function Xp(){const[e,t]=c.useState(()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("cozygen_gallery_pending")==="1"}catch{return!1}});return c.useEffect(()=>{const n=()=>t(!0),r=()=>t(!1),l=s=>{s.key==="cozygen_gallery_pending"&&t(s.newValue==="1")};return window.addEventListener("cozygen:gallery-pending",n),window.addEventListener("cozygen:gallery-viewed",r),window.addEventListener("storage",l),()=>{window.removeEventListener("cozygen:gallery-pending",n),window.removeEventListener("cozygen:gallery-viewed",r),window.removeEventListener("storage",l)}},[]),e}const ii="cozygen_token";function yu(){try{return typeof window>"u"?null:localStorage.getItem(ii)}catch{return null}}function Zp(e){try{if(typeof window>"u")return;e?localStorage.setItem(ii,e):localStorage.removeItem(ii)}catch{}}function na(){Zp(null)}function zr(){const e=yu();return e?{Authorization:`Bearer ${e}`}:{}}const Dr=async(e,t)=>{if(t.status===401){const r=new Error("unauthorized");throw r.unauthorized=!0,r.status=401,r}if(!t.ok)throw new Error(`${e} failed`);return(t.headers.get("content-type")||"").includes("application/json")?t.json():t.text()},Tn=async(e,t={})=>{const{signal:n}=t,r=await fetch(e,{headers:{...zr()},signal:n});return Dr(e,r)},Wl=async(e,t,n={})=>{const{signal:r}=n,l=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...zr()},body:JSON.stringify(t),credentials:"include",signal:r});return Dr(e,l)},hv=async(e,t={})=>{const{signal:n}=t,r=await fetch(e,{method:"DELETE",headers:{...zr()},credentials:"include",signal:n});return Dr(e,r)};async function gv(e={}){return Tn("/cozygen/workflows",e)}async function yv(e,t={}){return Tn(`/cozygen/workflows/${encodeURIComponent(e)}`,t)}async function vv(e,t={}){return Tn(`/cozygen/get_choices?type=${encodeURIComponent(e)}`,t)}async function em(e){const t=await fetch("/prompt",{method:"POST",headers:{"Content-Type":"application/json",...zr()},body:JSON.stringify(e),credentials:"include"});return Dr("/prompt",t)}async function xv(e){const t=new FormData;t.append("image",e);const n=await fetch("/cozygen/upload_image",{method:"POST",headers:{...zr()},body:t,credentials:"include"});return Dr("/cozygen/upload_image",n)}async function tm(e="",t=1,n=50,r=!1,l=!1,s="all",a="",i={}){const u=new URLSearchParams({subfolder:e,page:String(t),per_page:String(n),show_hidden:r?"1":"0",recursive:l?"1":"0",kind:s});return a&&u.set("cache_bust",String(a)),Tn(`/cozygen/api/gallery?${u.toString()}`,i)}function wv(e){if(!(typeof window>"u"||typeof window.dispatchEvent!="function"))try{window.dispatchEvent(new CustomEvent("cozygen:preset-changed",{detail:{workflow:e||"default"}}))}catch(t){console.warn("Failed to emit preset change event",t)}}async function nm(e,t={}){return Tn(`/cozygen/api/presets?workflow=${encodeURIComponent(e||"default")}`,t)}async function Nv(e,t,n,r){const l={name:t,values:n};typeof r<"u"&&(l.meta=r);const s=await Wl(`/cozygen/api/presets?workflow=${encodeURIComponent(e||"default")}`,l);return wv(e),s}async function jv(){return Tn("/cozygen/api/aliases")}async function Sv(e){return Wl("/cozygen/api/aliases",e||{})}async function bv(){return Tn("/cozygen/api/workflow_types")}async function Cv(e,t){return Wl("/cozygen/api/workflow_types",{workflow:e,mode:t})}async function kv(){return Tn("/cozygen/api/lora_library")}async function Ev(e,t){return Wl("/cozygen/api/lora_library",{id:e,data:t})}async function _v(e){return hv(`/cozygen/api/lora_library/${encodeURIComponent(e)}`)}async function Fv(e,t){return Wl("/cozygen/api/login",{username:e,password:t})}async function Pv(){return fetch("/cozygen/api/auth_status",{headers:{...zr()},credentials:"include"}).then(e=>Dr("/cozygen/api/auth_status",e))}const Av=30*60*1e3,Vc="cozygen_idle_logout",rm=c.createContext(null);function Lv({children:e}){const[t,n]=c.useState(!1),[r,l]=c.useState(null),[s,a]=c.useState(!1),[i,u]=c.useState(null),d=c.useCallback(async()=>{if(!yu()){l(null),a(!1),n(!0);return}try{const x=await Pv();l((x==null?void 0:x.user)||null),a(!!(x!=null&&x.default_credentials))}catch{na(),l(null),a(!1)}finally{n(!0)}},[]);c.useEffect(()=>{d()},[d]);const f=c.useCallback(async(w,x)=>{const j=await Fv(w,x);Zp((j==null?void 0:j.token)||""),l((j==null?void 0:j.user)||w),a(!!(j!=null&&j.default_credentials));try{localStorage.removeItem(Vc)}catch{}return j},[]),p=c.useCallback(()=>{na(),l(null),a(!1)},[]);c.useEffect(()=>{if(!t)return;const w=()=>{i&&clearTimeout(i);const j=setTimeout(()=>{na(),l(null),a(!1);try{localStorage.setItem(Vc,"1")}catch{}window.location.hash="#/login"},Av);u(j)};w();const x=["pointerdown","keydown","visibilitychange"];return x.forEach(j=>window.addEventListener(j,w,{passive:!0})),()=>{i&&clearTimeout(i),x.forEach(j=>window.removeEventListener(j,w))}},[t,i]);const g=c.useMemo(()=>({ready:t,user:r,authed:!!r,defaultCreds:s,login:f,logout:p,refresh:d}),[t,r,s,f,p,d]);return o.jsx(rm.Provider,{value:g,children:e})}function bo(){const e=c.useContext(rm);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function Ov({children:e}){return o.jsx(Lv,{children:e})}var ui={exports:{}},Jn={},lm={exports:{}},Rv="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Tv=Rv,Iv=Tv;function sm(){}function om(){}om.resetWarningCache=sm;var Mv=function(){function e(r,l,s,a,i,u){if(u!==Iv){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:om,resetWarningCache:sm};return n.PropTypes=n,n};lm.exports=Mv();var am=lm.exports,ci={exports:{}},It={},di={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var n="none",r="contents",l=/^(input|select|textarea|button|object|iframe)$/;function s(p,g){return g.getPropertyValue("overflow")!=="visible"||p.scrollWidth<=0&&p.scrollHeight<=0}function a(p){var g=p.offsetWidth<=0&&p.offsetHeight<=0;if(g&&!p.innerHTML)return!0;try{var w=window.getComputedStyle(p),x=w.getPropertyValue("display");return g?x!==r&&s(p,w):x===n}catch{return console.warn("Failed to inspect element style"),!1}}function i(p){for(var g=p,w=p.getRootNode&&p.getRootNode();g&&g!==document.body;){if(w&&g===w&&(g=w.host.parentNode),a(g))return!1;g=g.parentNode}return!0}function u(p,g){var w=p.nodeName.toLowerCase(),x=l.test(w)&&!p.disabled||w==="a"&&p.href||g;return x&&i(p)}function d(p){var g=p.getAttribute("tabindex");g===null&&(g=void 0);var w=isNaN(g);return(w||g>=0)&&u(p,!w)}function f(p){var g=[].slice.call(p.querySelectorAll("*"),0).reduce(function(w,x){return w.concat(x.shadowRoot?f(x.shadowRoot):[x])},[]);return g.filter(d)}e.exports=t.default})(di,di.exports);var im=di.exports;Object.defineProperty(It,"__esModule",{value:!0});It.resetState=Uv;It.log=Bv;It.handleBlur=Rl;It.handleFocus=Tl;It.markForFocusLater=Wv;It.returnFocus=Vv;It.popWithoutFocus=Hv;It.setupScopedFocus=Gv;It.teardownScopedFocus=Kv;var zv=im,Dv=$v(zv);function $v(e){return e&&e.__esModule?e:{default:e}}var Lr=[],gr=null,fi=!1;function Uv(){Lr=[]}function Bv(){}function Rl(){fi=!0}function Tl(){if(fi){if(fi=!1,!gr)return;setTimeout(function(){if(!gr.contains(document.activeElement)){var e=(0,Dv.default)(gr)[0]||gr;e.focus()}},0)}}function Wv(){Lr.push(document.activeElement)}function Vv(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=null;try{Lr.length!==0&&(t=Lr.pop(),t.focus({preventScroll:e}));return}catch{console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}}function Hv(){Lr.length>0&&Lr.pop()}function Gv(e){gr=e,window.addEventListener?(window.addEventListener("blur",Rl,!1),document.addEventListener("focus",Tl,!0)):(window.attachEvent("onBlur",Rl),document.attachEvent("onFocus",Tl))}function Kv(){gr=null,window.addEventListener?(window.removeEventListener("blur",Rl),document.removeEventListener("focus",Tl)):(window.detachEvent("onBlur",Rl),document.detachEvent("onFocus",Tl))}var pi={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var n=im,r=l(n);function l(i){return i&&i.__esModule?i:{default:i}}function s(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return i.activeElement.shadowRoot?s(i.activeElement.shadowRoot):i.activeElement}function a(i,u){var d=(0,r.default)(i);if(!d.length){u.preventDefault();return}var f=void 0,p=u.shiftKey,g=d[0],w=d[d.length-1],x=s();if(i===x){if(!p)return;f=w}if(w===x&&!p&&(f=g),g===x&&p&&(f=w),f){u.preventDefault(),f.focus();return}var j=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),S=j!=null&&j[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(S){var y=d.indexOf(x);if(y>-1&&(y+=p?-1:1),f=d[y],typeof f>"u"){u.preventDefault(),f=p?w:g,f.focus();return}u.preventDefault(),f.focus()}}e.exports=t.default})(pi,pi.exports);var Qv=pi.exports,Mt={},Yv=function(){},qv=Yv,Ot={},um={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(e){(function(){var t=!!(typeof window<"u"&&window.document&&window.document.createElement),n={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen};e.exports?e.exports=n:window.ExecutionEnvironment=n})()})(um);var Jv=um.exports;Object.defineProperty(Ot,"__esModule",{value:!0});Ot.canUseDOM=Ot.SafeNodeList=Ot.SafeHTMLCollection=void 0;var Xv=Jv,Zv=ex(Xv);function ex(e){return e&&e.__esModule?e:{default:e}}var Co=Zv.default,tx=Co.canUseDOM?window.HTMLElement:{};Ot.SafeHTMLCollection=Co.canUseDOM?window.HTMLCollection:{};Ot.SafeNodeList=Co.canUseDOM?window.NodeList:{};Ot.canUseDOM=Co.canUseDOM;Ot.default=tx;Object.defineProperty(Mt,"__esModule",{value:!0});Mt.resetState=ox;Mt.log=ax;Mt.assertNodeList=cm;Mt.setElement=ix;Mt.validateElement=vu;Mt.hide=ux;Mt.show=cx;Mt.documentNotReadyOrSSRTesting=dx;var nx=qv,rx=sx(nx),lx=Ot;function sx(e){return e&&e.__esModule?e:{default:e}}var xt=null;function ox(){xt&&(xt.removeAttribute?xt.removeAttribute("aria-hidden"):xt.length!=null?xt.forEach(function(e){return e.removeAttribute("aria-hidden")}):document.querySelectorAll(xt).forEach(function(e){return e.removeAttribute("aria-hidden")})),xt=null}function ax(){}function cm(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function ix(e){var t=e;if(typeof t=="string"&&lx.canUseDOM){var n=document.querySelectorAll(t);cm(n,t),t=n}return xt=t||xt,xt}function vu(e){var t=e||xt;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,rx.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function ux(e){var t=!0,n=!1,r=void 0;try{for(var l=vu(e)[Symbol.iterator](),s;!(t=(s=l.next()).done);t=!0){var a=s.value;a.setAttribute("aria-hidden","true")}}catch(i){n=!0,r=i}finally{try{!t&&l.return&&l.return()}finally{if(n)throw r}}}function cx(e){var t=!0,n=!1,r=void 0;try{for(var l=vu(e)[Symbol.iterator](),s;!(t=(s=l.next()).done);t=!0){var a=s.value;a.removeAttribute("aria-hidden")}}catch(i){n=!0,r=i}finally{try{!t&&l.return&&l.return()}finally{if(n)throw r}}}function dx(){xt=null}var $r={};Object.defineProperty($r,"__esModule",{value:!0});$r.resetState=fx;$r.log=px;var dl={},fl={};function Hc(e,t){e.classList.remove(t)}function fx(){var e=document.getElementsByTagName("html")[0];for(var t in dl)Hc(e,dl[t]);var n=document.body;for(var r in fl)Hc(n,fl[r]);dl={},fl={}}function px(){}var mx=function(t,n){return t[n]||(t[n]=0),t[n]+=1,n},hx=function(t,n){return t[n]&&(t[n]-=1),n},gx=function(t,n,r){r.forEach(function(l){mx(n,l),t.add(l)})},yx=function(t,n,r){r.forEach(function(l){hx(n,l),n[l]===0&&t.remove(l)})};$r.add=function(t,n){return gx(t.classList,t.nodeName.toLowerCase()=="html"?dl:fl,n.split(" "))};$r.remove=function(t,n){return yx(t.classList,t.nodeName.toLowerCase()=="html"?dl:fl,n.split(" "))};var Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.log=xx;Ur.resetState=wx;function vx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var dm=function e(){var t=this;vx(this,e),this.register=function(n){t.openInstances.indexOf(n)===-1&&(t.openInstances.push(n),t.emit("register"))},this.deregister=function(n){var r=t.openInstances.indexOf(n);r!==-1&&(t.openInstances.splice(r,1),t.emit("deregister"))},this.subscribe=function(n){t.subscribers.push(n)},this.emit=function(n){t.subscribers.forEach(function(r){return r(n,t.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},Js=new dm;function xx(){console.log("portalOpenInstances ----------"),console.log(Js.openInstances.length),Js.openInstances.forEach(function(e){return console.log(e)}),console.log("end portalOpenInstances ----------")}function wx(){Js=new dm}Ur.default=Js;var xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.resetState=bx;xu.log=Cx;var Nx=Ur,jx=Sx(Nx);function Sx(e){return e&&e.__esModule?e:{default:e}}var qe=void 0,_t=void 0,Hn=[];function bx(){for(var e=[qe,_t],t=0;t<e.length;t++){var n=e[t];n&&n.parentNode&&n.parentNode.removeChild(n)}qe=_t=null,Hn=[]}function Cx(){console.log("bodyTrap ----------"),console.log(Hn.length);for(var e=[qe,_t],t=0;t<e.length;t++){var n=e[t],r=n||{};console.log(r.nodeName,r.className,r.id)}console.log("edn bodyTrap ----------")}function Gc(){Hn.length!==0&&Hn[Hn.length-1].focusContent()}function kx(e,t){!qe&&!_t&&(qe=document.createElement("div"),qe.setAttribute("data-react-modal-body-trap",""),qe.style.position="absolute",qe.style.opacity="0",qe.setAttribute("tabindex","0"),qe.addEventListener("focus",Gc),_t=qe.cloneNode(),_t.addEventListener("focus",Gc)),Hn=t,Hn.length>0?(document.body.firstChild!==qe&&document.body.insertBefore(qe,document.body.firstChild),document.body.lastChild!==_t&&document.body.appendChild(_t)):(qe.parentElement&&qe.parentElement.removeChild(qe),_t.parentElement&&_t.parentElement.removeChild(_t))}jx.default.subscribe(kx);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(k){for(var _=1;_<arguments.length;_++){var M=arguments[_];for(var b in M)Object.prototype.hasOwnProperty.call(M,b)&&(k[b]=M[b])}return k},r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},l=function(){function k(_,M){for(var b=0;b<M.length;b++){var C=M[b];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(_,C.key,C)}}return function(_,M,b){return M&&k(_.prototype,M),b&&k(_,b),_}}(),s=c,a=am,i=P(a),u=It,d=N(u),f=Qv,p=P(f),g=Mt,w=N(g),x=$r,j=N(x),S=Ot,y=P(S),h=Ur,v=P(h);function N(k){if(k&&k.__esModule)return k;var _={};if(k!=null)for(var M in k)Object.prototype.hasOwnProperty.call(k,M)&&(_[M]=k[M]);return _.default=k,_}function P(k){return k&&k.__esModule?k:{default:k}}function L(k,_){if(!(k instanceof _))throw new TypeError("Cannot call a class as a function")}function A(k,_){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:k}function E(k,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);k.prototype=Object.create(_&&_.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(k,_):k.__proto__=_)}var W={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},B=function(_){return _.code==="Tab"||_.keyCode===9},G=function(_){return _.code==="Escape"||_.keyCode===27},J=0,Y=function(k){E(_,k);function _(M){L(this,_);var b=A(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,M));return b.setOverlayRef=function(C){b.overlay=C,b.props.overlayRef&&b.props.overlayRef(C)},b.setContentRef=function(C){b.content=C,b.props.contentRef&&b.props.contentRef(C)},b.afterClose=function(){var C=b.props,V=C.appElement,I=C.ariaHideApp,R=C.htmlOpenClassName,T=C.bodyOpenClassName,te=C.parentSelector,K=te&&te().ownerDocument||document;T&&j.remove(K.body,T),R&&j.remove(K.getElementsByTagName("html")[0],R),I&&J>0&&(J-=1,J===0&&w.show(V)),b.props.shouldFocusAfterRender&&(b.props.shouldReturnFocusAfterClose?(d.returnFocus(b.props.preventScroll),d.teardownScopedFocus()):d.popWithoutFocus()),b.props.onAfterClose&&b.props.onAfterClose(),v.default.deregister(b)},b.open=function(){b.beforeOpen(),b.state.afterOpen&&b.state.beforeClose?(clearTimeout(b.closeTimer),b.setState({beforeClose:!1})):(b.props.shouldFocusAfterRender&&(d.setupScopedFocus(b.node),d.markForFocusLater()),b.setState({isOpen:!0},function(){b.openAnimationFrame=requestAnimationFrame(function(){b.setState({afterOpen:!0}),b.props.isOpen&&b.props.onAfterOpen&&b.props.onAfterOpen({overlayEl:b.overlay,contentEl:b.content})})}))},b.close=function(){b.props.closeTimeoutMS>0?b.closeWithTimeout():b.closeWithoutTimeout()},b.focusContent=function(){return b.content&&!b.contentHasFocus()&&b.content.focus({preventScroll:!0})},b.closeWithTimeout=function(){var C=Date.now()+b.props.closeTimeoutMS;b.setState({beforeClose:!0,closesAt:C},function(){b.closeTimer=setTimeout(b.closeWithoutTimeout,b.state.closesAt-Date.now())})},b.closeWithoutTimeout=function(){b.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},b.afterClose)},b.handleKeyDown=function(C){B(C)&&(0,p.default)(b.content,C),b.props.shouldCloseOnEsc&&G(C)&&(C.stopPropagation(),b.requestClose(C))},b.handleOverlayOnClick=function(C){b.shouldClose===null&&(b.shouldClose=!0),b.shouldClose&&b.props.shouldCloseOnOverlayClick&&(b.ownerHandlesClose()?b.requestClose(C):b.focusContent()),b.shouldClose=null},b.handleContentOnMouseUp=function(){b.shouldClose=!1},b.handleOverlayOnMouseDown=function(C){!b.props.shouldCloseOnOverlayClick&&C.target==b.overlay&&C.preventDefault()},b.handleContentOnClick=function(){b.shouldClose=!1},b.handleContentOnMouseDown=function(){b.shouldClose=!1},b.requestClose=function(C){return b.ownerHandlesClose()&&b.props.onRequestClose(C)},b.ownerHandlesClose=function(){return b.props.onRequestClose},b.shouldBeClosed=function(){return!b.state.isOpen&&!b.state.beforeClose},b.contentHasFocus=function(){return document.activeElement===b.content||b.content.contains(document.activeElement)},b.buildClassName=function(C,V){var I=(typeof V>"u"?"undefined":r(V))==="object"?V:{base:W[C],afterOpen:W[C]+"--after-open",beforeClose:W[C]+"--before-close"},R=I.base;return b.state.afterOpen&&(R=R+" "+I.afterOpen),b.state.beforeClose&&(R=R+" "+I.beforeClose),typeof V=="string"&&V?R+" "+V:R},b.attributesFromObject=function(C,V){return Object.keys(V).reduce(function(I,R){return I[C+"-"+R]=V[R],I},{})},b.state={afterOpen:!1,beforeClose:!1},b.shouldClose=null,b.moveFromContentToOverlay=null,b}return l(_,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(b,C){this.props.isOpen&&!b.isOpen?this.open():!this.props.isOpen&&b.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!C.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var b=this.props,C=b.appElement,V=b.ariaHideApp,I=b.htmlOpenClassName,R=b.bodyOpenClassName,T=b.parentSelector,te=T&&T().ownerDocument||document;R&&j.add(te.body,R),I&&j.add(te.getElementsByTagName("html")[0],I),V&&(J+=1,w.hide(C)),v.default.register(this)}},{key:"render",value:function(){var b=this.props,C=b.id,V=b.className,I=b.overlayClassName,R=b.defaultStyles,T=b.children,te=V?{}:R.content,K=I?{}:R.overlay;if(this.shouldBeClosed())return null;var z={ref:this.setOverlayRef,className:this.buildClassName("overlay",I),style:n({},K,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},O=n({id:C,ref:this.setContentRef,style:n({},te,this.props.style.content),className:this.buildClassName("content",V),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",n({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),m=this.props.contentElement(O,T);return this.props.overlayElement(z,m)}}]),_}(s.Component);Y.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},Y.propTypes={isOpen:i.default.bool.isRequired,defaultStyles:i.default.shape({content:i.default.object,overlay:i.default.object}),style:i.default.shape({content:i.default.object,overlay:i.default.object}),className:i.default.oneOfType([i.default.string,i.default.object]),overlayClassName:i.default.oneOfType([i.default.string,i.default.object]),parentSelector:i.default.func,bodyOpenClassName:i.default.string,htmlOpenClassName:i.default.string,ariaHideApp:i.default.bool,appElement:i.default.oneOfType([i.default.instanceOf(y.default),i.default.instanceOf(S.SafeHTMLCollection),i.default.instanceOf(S.SafeNodeList),i.default.arrayOf(i.default.instanceOf(y.default))]),onAfterOpen:i.default.func,onAfterClose:i.default.func,onRequestClose:i.default.func,closeTimeoutMS:i.default.number,shouldFocusAfterRender:i.default.bool,shouldCloseOnOverlayClick:i.default.bool,shouldReturnFocusAfterClose:i.default.bool,preventScroll:i.default.bool,role:i.default.string,contentLabel:i.default.string,aria:i.default.object,data:i.default.object,children:i.default.node,shouldCloseOnEsc:i.default.bool,overlayRef:i.default.func,contentRef:i.default.func,id:i.default.string,overlayElement:i.default.func,contentElement:i.default.func,testId:i.default.string},t.default=Y,e.exports=t.default})(ci,ci.exports);var Ex=ci.exports;function fm(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function pm(e){function t(n){var r=this.constructor.getDerivedStateFromProps(e,n);return r??null}this.setState(t.bind(this))}function mm(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}fm.__suppressDeprecationWarning=!0;pm.__suppressDeprecationWarning=!0;mm.__suppressDeprecationWarning=!0;function _x(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var n=null,r=null,l=null;if(typeof t.componentWillMount=="function"?n="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?l="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(l="UNSAFE_componentWillUpdate"),n!==null||r!==null||l!==null){var s=e.displayName||e.name,a=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+a+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+(l!==null?`
  `+l:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=fm,t.componentWillReceiveProps=pm),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=mm;var i=t.componentDidUpdate;t.componentDidUpdate=function(d,f,p){var g=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:p;i.call(this,d,f,g)}}return e}const Fx=Object.freeze(Object.defineProperty({__proto__:null,polyfill:_x},Symbol.toStringTag,{value:"Module"})),Px=$m(Fx);Object.defineProperty(Jn,"__esModule",{value:!0});Jn.bodyOpenClassName=Jn.portalClassName=void 0;var Kc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ax=function(){function e(t,n){for(var r=0;r<n.length;r++){var l=n[r];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),hm=c,Xs=Vl(hm),Lx=Dp,Zs=Vl(Lx),Ox=am,ue=Vl(Ox),Rx=Ex,Qc=Vl(Rx),Tx=Mt,Ix=zx(Tx),hn=Ot,Yc=Vl(hn),Mx=Px;function zx(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function Vl(e){return e&&e.__esModule?e:{default:e}}function Dx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function $x(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ux=Jn.portalClassName="ReactModalPortal",Bx=Jn.bodyOpenClassName="ReactModal__Body--open",Dn=hn.canUseDOM&&Zs.default.createPortal!==void 0,Jc=function(t){return document.createElement(t)},Xc=function(){return Dn?Zs.default.createPortal:Zs.default.unstable_renderSubtreeIntoContainer};function cs(e){return e()}var Hl=function(e){$x(t,e);function t(){var n,r,l,s;Dx(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return s=(r=(l=qc(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(i))),l),l.removePortal=function(){!Dn&&Zs.default.unmountComponentAtNode(l.node);var d=cs(l.props.parentSelector);d&&d.contains(l.node)?d.removeChild(l.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},l.portalRef=function(d){l.portal=d},l.renderPortal=function(d){var f=Xc(),p=f(l,Xs.default.createElement(Qc.default,Kc({defaultStyles:t.defaultStyles},d)),l.node);l.portalRef(p)},r),qc(l,s)}return Ax(t,[{key:"componentDidMount",value:function(){if(hn.canUseDOM){Dn||(this.node=Jc("div")),this.node.className=this.props.portalClassName;var r=cs(this.props.parentSelector);r.appendChild(this.node),!Dn&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(r){var l=cs(r.parentSelector),s=cs(this.props.parentSelector);return{prevParent:l,nextParent:s}}},{key:"componentDidUpdate",value:function(r,l,s){if(hn.canUseDOM){var a=this.props,i=a.isOpen,u=a.portalClassName;r.portalClassName!==u&&(this.node.className=u);var d=s.prevParent,f=s.nextParent;f!==d&&(d.removeChild(this.node),f.appendChild(this.node)),!(!r.isOpen&&!i)&&!Dn&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!hn.canUseDOM||!this.node||!this.portal)){var r=this.portal.state,l=Date.now(),s=r.isOpen&&this.props.closeTimeoutMS&&(r.closesAt||l+this.props.closeTimeoutMS);s?(r.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,s-l)):this.removePortal()}}},{key:"render",value:function(){if(!hn.canUseDOM||!Dn)return null;!this.node&&Dn&&(this.node=Jc("div"));var r=Xc();return r(Xs.default.createElement(Qc.default,Kc({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(r){Ix.setElement(r)}}]),t}(hm.Component);Hl.propTypes={isOpen:ue.default.bool.isRequired,style:ue.default.shape({content:ue.default.object,overlay:ue.default.object}),portalClassName:ue.default.string,bodyOpenClassName:ue.default.string,htmlOpenClassName:ue.default.string,className:ue.default.oneOfType([ue.default.string,ue.default.shape({base:ue.default.string.isRequired,afterOpen:ue.default.string.isRequired,beforeClose:ue.default.string.isRequired})]),overlayClassName:ue.default.oneOfType([ue.default.string,ue.default.shape({base:ue.default.string.isRequired,afterOpen:ue.default.string.isRequired,beforeClose:ue.default.string.isRequired})]),appElement:ue.default.oneOfType([ue.default.instanceOf(Yc.default),ue.default.instanceOf(hn.SafeHTMLCollection),ue.default.instanceOf(hn.SafeNodeList),ue.default.arrayOf(ue.default.instanceOf(Yc.default))]),onAfterOpen:ue.default.func,onRequestClose:ue.default.func,closeTimeoutMS:ue.default.number,ariaHideApp:ue.default.bool,shouldFocusAfterRender:ue.default.bool,shouldCloseOnOverlayClick:ue.default.bool,shouldReturnFocusAfterClose:ue.default.bool,preventScroll:ue.default.bool,parentSelector:ue.default.func,aria:ue.default.object,data:ue.default.object,role:ue.default.string,contentLabel:ue.default.string,shouldCloseOnEsc:ue.default.bool,overlayRef:ue.default.func,contentRef:ue.default.func,id:ue.default.string,overlayElement:ue.default.func,contentElement:ue.default.func};Hl.defaultProps={isOpen:!1,portalClassName:Ux,bodyOpenClassName:Bx,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(t,n){return Xs.default.createElement("div",t,n)},contentElement:function(t,n){return Xs.default.createElement("div",t,n)}};Hl.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,Mx.polyfill)(Hl);Jn.default=Hl;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Jn,r=l(n);function l(s){return s&&s.__esModule?s:{default:s}}t.default=r.default,e.exports=t.default})(ui,ui.exports);var Wx=ui.exports;const ko=Cd(Wx);ko.setAppElement("#root");function Gl({open:e,onClose:t,title:n,children:r,footer:l,variant:s="sheet",className:a="",contentClassName:i="",shouldCloseOnOverlayClick:u=!0}){const d=["bottom-sheet-content",s==="fullscreen"?"is-fullscreen":"is-sheet",i].filter(Boolean).join(" ");return o.jsx(ko,{isOpen:!!e,onRequestClose:t,shouldCloseOnOverlayClick:u,overlayClassName:["bottom-sheet-overlay",a].filter(Boolean).join(" "),className:d,contentLabel:n||"Sheet",children:o.jsxs("div",{className:"bottom-sheet-panel",role:"dialog","aria-modal":"true",children:[o.jsxs("header",{className:"bottom-sheet-head",children:[o.jsx("div",{className:"bottom-sheet-title",children:n||""}),o.jsx("button",{type:"button",className:"bottom-sheet-close",onClick:t,"aria-label":"Close",children:""})]}),o.jsx("div",{className:"bottom-sheet-body",children:r}),l?o.jsx("footer",{className:"bottom-sheet-foot",children:l}):null]})})}function Vx({open:e,onClose:t}){const n=Bl(),r=l=>{t==null||t(),n(l)};return o.jsx(Gl,{open:e,onClose:t,title:"Library",footer:o.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Close"}),children:o.jsxs("div",{className:"sheet-stack",children:[o.jsxs("div",{className:"sheet-section",children:[o.jsx("div",{className:"sheet-label",children:"Collections"}),o.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>r("/presets"),children:" Presets"}),o.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>r("/aliases"),children:" Aliases"}),o.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>r("/lora-library"),children:" LoRA Library"})]}),o.jsx("div",{className:"sheet-section",children:o.jsx("div",{className:"sheet-hint",children:"Tip: keep Studio open while you browse; apply presets/aliases from their screens."})})]})})}const Zc=[{to:"/",label:" Studio",end:!0}],Hx=[{to:"/gallery",label:" Gallery"},{to:"/presets",label:" Presets"},{to:"/lora-library",label:" LoRA"},{to:"/aliases",label:" Aliases"}],ra=({isActive:e})=>["slim-nav-link btn-touch",e?"is-active":null].filter(Boolean).join(" ");function Gx(){const[e,t]=c.useState(!1),[n,r]=c.useState(!1),l=Xp(),{logout:s,user:a}=bo(),i=()=>t(p=>!p),u=()=>t(!1),d=()=>{try{s()}catch{}window.location.hash="#/login"},f=[...Zc,...Hx];return o.jsxs("header",{className:"top-bar",children:[o.jsx("div",{className:"top-bar-shell",children:o.jsxs("div",{className:"brand-row",children:[o.jsxs(Jp,{to:"/",className:"brand-mark",onClick:u,children:[o.jsx("span",{className:"brand-icon",children:"CG"}),o.jsx("span",{className:"brand-text",children:"CozyGen"})]}),o.jsx("nav",{className:"desktop-nav","aria-label":"Main navigation",children:f.map(p=>o.jsx(Ss,{to:p.to,end:p.end,className:ra,children:o.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[o.jsx("span",{children:p.label}),p.to==="/gallery"&&l?o.jsx("span",{className:"badge-dot","aria-hidden":"true"}):null]})},p.to))}),o.jsx("div",{className:"flex-1"}),o.jsxs("button",{type:"button",className:"desktop-logout-btn",onClick:d,title:"Sign out",children:[o.jsx("span",{className:"logout-icon",children:""}),o.jsx("span",{className:"logout-label",children:"Logout"}),a?o.jsxs("span",{className:"logout-user",children:["@",a]}):null]}),o.jsx("button",{type:"button",className:`mobile-menu-toggle btn-touch ${e?"is-active":""} md:hidden`,onClick:i,"aria-expanded":e,"aria-controls":"cozygen-mobile-nav","aria-label":e?"Close menu":"Open menu",children:o.jsx("span",{className:"mobile-menu-icon",children:o.jsx("span",{})})})]})}),o.jsxs("div",{id:"cozygen-mobile-nav",className:`mobile-nav-drawer md:hidden ${e?"is-open":""}`,role:"menu",children:[o.jsx("div",{className:"mobile-nav-section",children:Zc.map(p=>o.jsx(Ss,{to:p.to,end:p.end,className:ra,onClick:u,role:"menuitem",children:p.label},p.to))}),o.jsxs("div",{className:"mobile-nav-section secondary",children:[o.jsx(Ss,{to:"/gallery",className:ra,onClick:u,role:"menuitem",children:o.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[o.jsx("span",{children:" Gallery"}),l?o.jsx("span",{className:"badge-dot","aria-hidden":"true"}):null]})}),o.jsx("button",{type:"button",className:"slim-nav-link btn-touch text-left",onClick:()=>{u(),r(!0)},role:"menuitem",children:" Library"}),o.jsx("button",{type:"button",className:"slim-nav-link btn-touch text-left",onClick:()=>{u(),d()},role:"menuitem",children:o.jsxs("span",{className:"inline-flex items-center gap-2",children:[o.jsx("span",{children:" Logout"}),a?o.jsxs("span",{className:"text-slate-400 text-xs",children:["@",a]}):null]})})]})]}),o.jsx(Vx,{open:n,onClose:()=>r(!1)})]})}const gm="cozygen_last_render_payload";function Kx(e){if(e)try{if(typeof window>"u")return;window.localStorage.setItem(gm,JSON.stringify(e))}catch{}}function ym(){try{if(typeof window>"u")return null;const e=window.localStorage.getItem(gm);return e?JSON.parse(e):null}catch{return null}}async function Qx(){const e=ym();if(!e||!e.workflow)return{success:!1,error:"No previous render to repeat"};try{return window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!0}})),await em({prompt:e.workflow}),{success:!0}}catch(t){return console.error("Failed to requeue prompt",t),window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!1}})),t!=null&&t.unauthorized?(window.location.hash="#/login",{success:!1,error:"Session expired"}):{success:!1,error:"Failed to queue prompt"}}}function Yx(){const e=ym();return!!(e&&e.workflow)}const qx=[{to:"/",label:"Studio",icon:"",end:!0},{to:"/gallery",label:"Gallery",icon:""},{to:"/aliases",label:"Aliases",icon:""},{to:"#composer",label:"Composer",icon:"",isComposer:!0},{to:"#render",label:"Render",icon:"",isAction:!0}],Jx=({isActive:e})=>["bottom-nav-link",e?"is-active":""].filter(Boolean).join(" ");function Xx(){const e=Tt(),t=Bl(),n=Xp(),[r,l]=tl.useState(!1),[s,a]=tl.useState(!1),i=e.pathname==="/"||e.pathname==="",u=async()=>{if(!(typeof window>"u")){if(!i){t("/studio"),setTimeout(()=>{try{window.dispatchEvent(new CustomEvent("cozygen:open-composer",{detail:{}}))}catch{}},0);return}try{window.dispatchEvent(new CustomEvent("cozygen:open-composer",{detail:{}}))}catch{}}},d=async()=>{if(!(typeof window>"u"))if(l(!0),setTimeout(()=>l(!1),400),i)try{window.dispatchEvent(new CustomEvent("cozygen:request-render"))}catch{}else{if(!Yx())return;const f=await Qx();f.success||console.warn("Requeue failed:",f.error)}};return tl.useEffect(()=>{const f=p=>{var w;const g=!!((w=p==null?void 0:p.detail)!=null&&w.active);a(g),g&&(l(!0),setTimeout(()=>l(!1),400))};return window.addEventListener("cozygen:render-state",f),()=>window.removeEventListener("cozygen:render-state",f)},[]),o.jsx("nav",{className:"bottom-nav md:hidden","aria-label":"Bottom navigation",children:qx.map(f=>f.isAction?o.jsxs("button",{type:"button",className:`bottom-nav-link is-action ${r?"is-flash":""} ${s?"is-rendering":""}`,onClick:d,"aria-label":"Render",children:[o.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:""}),o.jsx("span",{className:"bottom-nav-label",children:"Render"})]},"render"):f.isComposer?o.jsxs("button",{type:"button",className:"bottom-nav-link",onClick:u,"aria-label":"Prompt composer",children:[o.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:""}),o.jsx("span",{className:"bottom-nav-label",children:"Composer"})]},"composer"):o.jsxs(Ss,{to:f.to,end:f.end,className:Jx,children:[o.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:f.icon}),o.jsxs("span",{className:"bottom-nav-label",children:[f.label,f.to==="/gallery"&&n?o.jsx("span",{className:"badge-dot pulse","aria-hidden":"true"}):null]})]},f.to))})}function Zx(e,t){if(!t||t<=0)return null;const n=Number(e)||0,r=Number(t)||0,l=Math.round(n/r*100);return Number.isFinite(l)?Math.max(0,Math.min(100,l)):null}function e0({busy:e=!1,progressValue:t=0,progressMax:n=0,statusText:r="Idle",statusPhase:l="idle",primaryLabel:s="Render",onPrimary:a,primaryDisabled:i=!1}){const u=Zx(t,n);let d="bg-[#3D4270]";l==="queued"?d="bg-[#FF60D0]":l==="running"?d="bg-[#3EF0FF]":l==="finished"?d="bg-[#5CFF9A]":l==="error"&&(d="bg-[#FF4F88]");const p={idle:"Idle",queued:"Queued",running:"Running",finished:"Finished",error:"Error"}[l]||"Status",g=l==="running"?"animate-pulse":"",w=e||i;return o.jsxs("div",{className:"dock-bar-inner",children:[o.jsx("button",{type:"button",onClick:a,disabled:w,className:`w-full rounded-full px-6 py-3 text-sm sm:text-base font-semibold tracking-[0.25em] uppercase
          bg-[linear-gradient(90deg,#FF60D0,#3EF0FF)]
          text-[#050716]
          shadow-[0_0_35px_rgba(255,96,208,0.45)]
          transition-transform
          disabled:opacity-60 disabled:cursor-not-allowed
          active:translate-y-[1px]`,children:e?"Rendering":s}),o.jsxs("div",{className:"mt-2 flex items-center justify-between text-[10px] sm:text-[11px] text-[#9DA3FFCC]",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`h-2 w-2 rounded-full shadow-[0_0_8px_rgba(255,255,255,0.35)] ${d} ${g}`}),o.jsx("span",{className:"tracking-[0.25em] uppercase",children:p})]}),o.jsxs("span",{className:"flex items-center gap-2",children:[u!=null&&e&&o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx("span",{className:"h-1.5 w-10 rounded-full bg-[#1B1F3A] overflow-hidden",children:o.jsx("span",{className:"block h-full bg-[#3EF0FF]",style:{width:`${u}%`}})}),o.jsxs("span",{children:[u,"%"]})]}),o.jsx("span",{className:"truncate max-w-[9rem] text-right",children:r||(e?"Working":"Idle")})]})]})]})}const vm="jpg,jpeg,png,webp,gif,bmp,tif,tiff",wu=(e="")=>/\.(png|jpe?g|gif|webp|bmp|tif?f)$/i.test(e),xm=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e);async function la({subfolder:e="",page:t=1,perPage:n=50,exts:r=vm}={}){const l=new URLSearchParams({subfolder:e,page:String(t),per_page:String(n),exts:r}),s=await fetch(`/cozygen/input?${l.toString()}`);if(!s.ok)throw new Error(`Input list failed: ${s.status}`);return s.json()}const eo=e=>`/cozygen/input/file?path=${encodeURIComponent(e)}`,mi="output::",Eo=(e="")=>e.replace(/\\/g,"/").replace(/^\/+/,"").replace(/\/+$/,""),wm=(e="")=>{const t=e.replace(/\\/g,"/").split("/").filter(Boolean);return t[t.length-1]||""},t0=({subfolder:e="",filename:t=""}={})=>{const n=wm(t);if(!n)return"";const r=Eo(e);return`${mi}${r}::${n}`},hi=(e="")=>{if(typeof e!="string"||!e.startsWith(mi))return null;const t=e.slice(mi.length);if(!t)return null;const n=t.lastIndexOf("::"),r=n===-1?t:t.slice(n+2);return r?{subfolder:n===-1?"":t.slice(0,n),filename:r}:null},to=({filename:e="",subfolder:t="",type:n="output"}={})=>{const r=wm(e);return r?`/view?${new URLSearchParams({filename:r,subfolder:Eo(t),type:n||"output"}).toString()}`:""},gi=(e="")=>e.split("/").slice(0,-1).join("/"),n0=e=>{if(typeof e!="string"||!e)return e!=null&&e.path?gi(e.path):"";const t=hi(e);return t?Eo(t.subfolder):gi(e)},ed=(e=[])=>e.map(t=>{const n=t.rel_path||t.name||"",r=t.name||n||"Untitled",l=!!t.is_dir,s=l?"":eo(n);return{...t,name:r,rel_path:n,is_dir:l,is_image:!l&&wu(r),is_video:!l&&xm(r),source:"input",preview_url:s}}),r0=(e=[])=>e.map(t=>{const n=t.filename||"",r=t.subfolder||"",l=t.type==="directory",s=l?r||n:[r,n].filter(Boolean).join("/"),a=n||r||s||"Untitled",i=l?"":to({filename:n,subfolder:r,type:t.type});return{...t,name:a,rel_path:s,is_dir:l,is_image:!l&&wu(n),is_video:!l&&xm(n),source:"output",preview_url:i}}),In={get(e,t){try{return(typeof window<"u"?JSON.parse(localStorage.getItem(e)):null)??t}catch{return t}},set(e,t){try{typeof window<"u"&&localStorage.setItem(e,JSON.stringify(t))}catch{}}};function Nu({input:e,value:t,onFormChange:n}){var O;const r=((O=e==null?void 0:e.inputs)==null?void 0:O.param_name)||"Image Input",l=(e==null?void 0:e.class_type)||"CozyGenImageInput",s=`cg_last_input_cwd::${r}`,a=`cg_last_picker_source::${r}`,[i,u]=c.useState(""),[d,f]=c.useState(!1),[p,g]=c.useState(!1),[w,x]=c.useState(In.get(s,"")),[j,S]=c.useState(1),[y,h]=c.useState(50),[v,N]=c.useState([]),[P,L]=c.useState(1),[A,E]=c.useState(!1),[W,B]=c.useState(""),[G,J]=c.useState([]),[Y,k]=c.useState(!0),[_,M]=c.useState(()=>In.get(a,"inputs")==="outputs"?"outputs":"inputs"),b=_,C=c.useCallback(m=>{const F=m==="outputs"?"outputs":"inputs";M(F),In.set(a,F),x(""),S(1)},[]),V=c.useMemo(()=>{if(i)try{const m=new URL(i,window.location.origin);return(m.searchParams.get("path")||m.searchParams.get("filename")||m.pathname.split("/").pop()||"").split("/").pop()||"No file selected."}catch{}if(!t)return"No file selected.";if(typeof t=="string"){const m=hi(t);return m!=null&&m.filename?m.filename.split("/").pop():t.split("/").pop()}return t!=null&&t.path?t.path.split("/").pop():"No file selected."},[i,t]);c.useEffect(()=>{if(typeof t=="string"&&t){const m=hi(t);m!=null&&m.filename?u(to({filename:m.filename,subfolder:m.subfolder,type:"output"})):u(eo(t)),f(!1)}else t!=null&&t.url?(u(t.url),f(!1)):(u(""),f(!1))},[t]);const I=c.useCallback(async m=>{const F=await xv(m),H=`/view?filename=${F.filename}&type=input`;u(H),f(!1),In.set(s,""),l==="CozyGenImageInput"?n(r,F.filename):n(r,{source:"Upload",path:F.filename,url:H})},[l,n,r]),R=c.useCallback(()=>{u(""),f(!1),l==="CozyGenImageInput"?n(r,""):n(r,{source:"Upload",path:"",url:""})},[l,n,r]),T=c.useCallback(()=>{const F=n0(t)||In.get(s,"");x(F),S(1),g(!0)},[t]),te=c.useCallback(()=>{g(!1)},[]);c.useEffect(()=>{if(p){if(b!=="inputs"){J([]);return}(async()=>{try{const m=await la({subfolder:"",page:1,perPage:0,exts:""});J((m.items||[]).filter(F=>F.is_dir))}catch{}})()}},[p,b]),c.useEffect(()=>{if(!p)return;let m=!1;async function F(){E(!0);try{if(b==="outputs"){const H=await tm(w,j,y);if(m)return;const q=r0(H&&H.items||[]);m||(N(q),L(H&&H.total_pages||1))}else{const q=await la({subfolder:w,page:j,perPage:y,exts:Y?vm:""}),le=(q.items||[]).some(oe=>!oe.is_dir);if(Y&&!le){const oe=await la({subfolder:w,page:j,perPage:y,exts:""});m||(N(ed(oe.items||[])),L(oe.total_pages||1),k(!1));return}m||(N(ed(q.items||[])),L(q.total_pages||1))}}catch(H){console.error(b==="outputs"?"Failed to load output directory":"Failed to load input directory",H),m||(N([]),L(1))}finally{m||E(!1)}}return F(),()=>{m=!0}},[p,w,j,y,Y,b]);const K=c.useMemo(()=>{const m=W.trim().toLowerCase();let F=v;return Y&&(F=F.filter(H=>{if(H.is_dir)return!0;const q=H.name||H.filename||H.rel_path||"";return wu(String(q))})),m?F.filter(H=>(H.name||H.filename||H.rel_path||"").toLowerCase().includes(m)):F},[v,W,Y]),z=c.useCallback(m=>{if(!m)return;const F=typeof m=="object"?m:null;if(((F==null?void 0:F.source)||"inputs")==="output"){const oe=t0({subfolder:(F==null?void 0:F.subfolder)||"",filename:(F==null?void 0:F.filename)||(F==null?void 0:F.name)||""});if(!oe)return;const je=(F==null?void 0:F.preview_url)||to({filename:F==null?void 0:F.filename,subfolder:F==null?void 0:F.subfolder,type:F==null?void 0:F.type});u(je),f(!1),In.set(s,Eo((F==null?void 0:F.subfolder)||"")),l==="CozyGenImageInput"?n(r,oe):n(r,{source:"OutputGallery",path:oe,url:je}),g(!1);return}const q=typeof m=="string"?m:(F==null?void 0:F.rel_path)||(F==null?void 0:F.path)||"";if(!q)return;const le=(F==null?void 0:F.preview_url)||eo(q);u(le),f(!1),In.set(s,gi(q)),l==="CozyGenImageInput"?n(r,q):n(r,{source:"Server",path:q,url:le}),g(!1)},[l,n,r]);return{param:r,previewUrl:i,imgReady:d,setImgReady:f,displayName:V,serverOpen:p,openServer:T,closeServer:te,cwd:w,setCwd:x,page:j,setPage:S,perPage:y,setPerPage:h,totalPages:P,loading:A,search:W,setSearch:B,topDirs:G,imagesOnly:Y,setImagesOnly:k,shownEntries:K,pickerSource:b,setPickerSource:C,handleUpload:I,clearImage:R,selectServer:z}}function ju({open:e,cwd:t,setCwd:n,page:r,setPage:l,perPage:s,setPerPage:a,totalPages:i,topDirs:u,loading:d,imagesOnly:f,setImagesOnly:p,search:g,setSearch:w,shownEntries:x,onSelect:j,onClose:S,pickerSource:y,setPickerSource:h}){if(c.useEffect(()=>{if(!e)return;const E=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=E}},[e]),!e)return null;const v=y||"inputs",N=typeof h=="function",P=()=>{n(""),l(1)},L=E=>{N&&E!==v&&(h(E),n(""),l(1))},A=t.split("/").filter(Boolean);return o.jsxs("div",{className:"fixed inset-0 z-40",children:[o.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:S}),o.jsx("div",{className:"relative w-full h-full sm:h-[90vh] sm:max-w-5xl sm:mx-auto sm:mt-8",children:o.jsxs("div",{className:"flex flex-col w-full h-full rounded-none sm:rounded-3xl border border-[#3D4270] bg-[#050716] shadow-[0_0_40px_rgba(0,0,0,0.9)] overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-3 px-3 sm:px-4 py-2 sm:py-3 border-b border-[#3D4270] bg-[#050716F2]",children:[o.jsx("button",{type:"button",className:"text-[11px] sm:text-xs font-medium tracking-[0.16em] uppercase text-[#9CF7FF] hover:text-[#FFFFFF]",onClick:S,children:"Close"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-[10px] tracking-[0.18em] uppercase text-[#9DA3FFCC]",children:v==="outputs"?"Output Browser":"Input Browser"}),o.jsxs("div",{className:"mt-1 text-[10px] text-[#C3C7FF] overflow-x-auto whitespace-nowrap no-scrollbar",children:[o.jsx("button",{type:"button",className:"hover:text-[#FFFFFF]",onClick:P,children:"/"}),A.map((E,W)=>{const B=A.slice(0,W+1).join("/");return o.jsxs("span",{children:[o.jsx("span",{className:"mx-1 text-[#555A96]",children:"/"}),o.jsx("button",{type:"button",className:"hover:text-[#FFFFFF]",onClick:()=>{n(B),l(1)},children:E})]},B)})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-2 sm:gap-3",children:[N&&o.jsxs("div",{className:"inline-flex rounded-full border border-[#3D4270] bg-[#050716] p-[2px] text-[10px]",children:[o.jsx("button",{type:"button",className:`px-3 py-1 rounded-full tracking-[0.14em] uppercase ${v==="inputs"?"bg-[linear-gradient(90deg,#FF60D0,#3EF0FF)] text-[#050716]":"text-[#C3C7FF] hover:text-[#FFFFFF]"}`,onClick:()=>L("inputs"),children:"Inputs"}),o.jsx("button",{type:"button",className:`px-3 py-1 rounded-full tracking-[0.14em] uppercase ${v==="outputs"?"bg-[linear-gradient(90deg,#FF60D0,#3EF0FF)] text-[#050716]":"text-[#C3C7FF] hover:text-[#FFFFFF]"}`,onClick:()=>L("outputs"),children:"Outputs"})]}),o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsxs("label",{className:"inline-flex items-center gap-1.5",children:[o.jsx("input",{type:"checkbox",className:"h-3.5 w-3.5 accent-[#3EF0FF]",checked:f,onChange:E=>{p(E.target.checked),l(1)}}),o.jsx("span",{className:"text-[10px] sm:text-[11px] text-[#9DA3FFCC]",children:"Images only"})]}),o.jsx("input",{type:"search",value:g,onChange:E=>w(E.target.value),placeholder:"Search",className:"w-28 sm:w-44 rounded-full border border-[#3D4270] bg-[#050716] px-3 py-1.5 text-[11px] text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]"}),o.jsxs("select",{className:"rounded-full border border-[#3D4270] bg-[#050716] px-2.5 py-1.5 text-[11px] text-[#C3C7FF]",value:s,onChange:E=>{const W=parseInt(E.target.value,10)||50;a(W),l(1)},children:[o.jsx("option",{value:25,children:"25"}),o.jsx("option",{value:50,children:"50"}),o.jsx("option",{value:100,children:"100"})]})]}),o.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"px-2.5 py-1 rounded-full border border-[#3D4270] bg-[#050716] text-[11px] text-[#C3C7FF] hover:bg-[#111325] disabled:opacity-40",disabled:r<=1||d,onClick:()=>l(E=>Math.max(1,E-1)),children:""}),o.jsxs("span",{className:"text-[11px] text-[#9DA3FFCC]",children:[r," / ",i]}),o.jsx("button",{type:"button",className:"px-2.5 py-1 rounded-full border border-[#3D4270] bg-[#050716] text-[11px] text-[#C3C7FF] hover:bg-[#111325] disabled:opacity-40",disabled:r>=i||d,onClick:()=>l(E=>E<i?E+1:E),children:""})]})]})]}),u.length>0&&o.jsxs("div",{className:"px-3 sm:px-4 py-2 border-b border-[#3D4270] flex gap-2 overflow-x-auto no-scrollbar",children:[o.jsx("button",{type:"button",className:`px-3 py-1.5 rounded-full text-[11px] font-medium tracking-[0.16em] uppercase ${t===""?"bg-[linear-gradient(90deg,#FF60D0,#3EF0FF)] text-[#050716]":"border border-[#3D4270] bg-[#050716] text-[#C3C7FF] hover:border-[#3EF0FF80]"}`,onClick:P,children:"Root"}),u.map(E=>o.jsx("button",{type:"button",className:`px-3 py-1.5 rounded-full text-[11px] font-medium tracking-[0.16em] uppercase ${t===E.rel_path?"bg-[linear-gradient(90deg,#FF60D0,#3EF0FF)] text-[#050716]":"border border-[#3D4270] bg-[#050716] text-[#C3C7FF] hover:border-[#3EF0FF80]"}`,onClick:()=>{n(E.rel_path),l(1)},children:E.name},E.rel_path))]}),o.jsxs("div",{className:"flex-1 min-h-0 overflow-auto p-3 sm:p-4",children:[d&&o.jsxs("div",{className:"py-10 text-center text-[11px] text-[#9DA3FFCC]",children:["Scanning ",v==="outputs"?"output":"input"," folders"]}),!d&&x.length===0&&o.jsx("div",{className:"py-10 text-center text-[11px] text-[#9DA3FFCC]",children:"Nothing here yet. Try a different folder or turn off Images only."}),o.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-3",children:!d&&x.map(E=>{const W=`${E.source||"input"}::${E.rel_path||E.name}`,B=E.is_dir?"":E.preview_url||(E.source==="output"?to({filename:E.filename,subfolder:E.subfolder,type:E.type}):eo(E.rel_path||""));return o.jsx("button",{type:"button",className:"text-left rounded-xl border border-[#3D4270] bg-[#050716] px-2.5 py-2 transition hover:border-[#3EF0FF80]",onClick:()=>{E.is_dir?(n(E.rel_path||""),l(1)):j(E)},children:E.is_dir?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-7 w-7 rounded-xl bg-[radial-gradient(circle_at_0%_0%,#3EF0FF,transparent_55%),radial-gradient(circle_at_100%_100%,#FF60D0,transparent_55%)] opacity-90"}),o.jsx("div",{className:"text-[11px] text-[#E5E7FF] truncate",children:E.name})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"aspect-square w-full rounded-lg overflow-hidden mb-2 bg-[#111325] flex items-center justify-center",children:B?o.jsx("img",{className:"w-full h-full object-cover",alt:E.name,src:B}):o.jsx("div",{className:"w-full h-full bg-[#1b1f3b]"})}),o.jsx("div",{className:"text-[10px] text-[#C3C7FF] truncate",children:E.name})]})},W)})})]}),o.jsxs("div",{className:"sm:hidden border-t border-[#3D4270] px-3 py-2 flex items-center justify-between text-[10px] text-[#9DA3FFCC]",children:[o.jsxs("span",{children:["Page ",r," / ",i]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"px-2 py-1 rounded-full border border-[#3D4270] bg-[#050716] hover:bg-[#111325] disabled:opacity-40",disabled:r<=1||d,onClick:()=>l(E=>Math.max(1,E-1)),children:""}),o.jsx("button",{type:"button",className:"px-2 py-1 rounded-full border border-[#3D4270] bg-[#050716] hover:bg-[#111325] disabled:opacity-40",disabled:r>=i||d,onClick:()=>l(E=>E<i?E+1:E),children:""})]})]})]})})]})}function l0({open:e,onClose:t,title:n,url:r,kind:l="image"}){return r?o.jsx(Gl,{open:e,onClose:t,title:n||"Preview",variant:"fullscreen",footer:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("a",{href:r,target:"_blank",rel:"noreferrer",className:"ui-button is-muted w-full text-center",children:"Open"}),o.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Close"})]}),children:o.jsx("div",{className:"url-viewer-stage",children:l==="video"?o.jsx("video",{src:r,controls:!0,className:"url-viewer-media",autoPlay:!0}):o.jsx("img",{src:r,alt:n||"Preview",className:"url-viewer-media"})})}):null}function s0({input:e,value:t,onFormChange:n}){const{previewUrl:r,imgReady:l,setImgReady:s,displayName:a,serverOpen:i,openServer:u,closeServer:d,cwd:f,setCwd:p,page:g,setPage:w,perPage:x,setPerPage:j,totalPages:S,topDirs:y,loading:h,search:v,setSearch:N,imagesOnly:P,setImagesOnly:L,shownEntries:A,pickerSource:E,setPickerSource:W,handleUpload:B,clearImage:G,selectServer:J}=Nu({input:e,value:t,onFormChange:n}),Y=c.useRef(null),k=c.useRef(null),[_,M]=c.useState(0),[b,C]=c.useState(!1);c.useEffect(()=>{const R=k.current;if(!R)return;const T=K=>{K.preventDefault(),K.stopPropagation()},te=async K=>{var O,m;T(K);const z=(m=(O=K.dataTransfer)==null?void 0:O.files)==null?void 0:m[0];z&&(await B(z),Y.current&&(Y.current.value=""),M(F=>F+1))};return["dragenter","dragover","dragleave","drop"].forEach(K=>R.addEventListener(K,K==="drop"?te:T)),()=>{["dragenter","dragover","dragleave","drop"].forEach(K=>R.removeEventListener(K,K==="drop"?te:T))}},[B]);const V=async R=>{var te;const T=(te=R.target.files)==null?void 0:te[0];T&&(await B(T),Y.current&&(Y.current.value=""),M(K=>K+1))},I=()=>{Y.current&&Y.current.click()};return o.jsxs("div",{className:"asset-card",children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[o.jsx("h3",{className:"text-sm font-semibold text-[#F8F4FF] truncate",children:a}),o.jsx("span",{className:"text-[11px] text-[#C3C7FFB3] truncate",children:"Image"})]}),o.jsx("div",{ref:k,className:"mb-3 rounded-xl border border-dashed border-[#3D4270] bg-[#0b1226] flex items-center justify-center min-h-[140px] sm:min-h-[180px] overflow-hidden",children:r?o.jsx("button",{type:"button",className:"asset-preview-btn",onClick:()=>C(!0),"aria-label":`Preview ${a}`,title:"Open preview",children:o.jsx("img",{src:r,alt:a,className:`max-h-64 max-w-full object-contain transition-opacity ${l?"opacity-100":"opacity-0"}`,onLoad:()=>s(!0)})}):o.jsx("div",{className:"text-[11px] text-[#9DA3FFCC] text-center px-6",children:"Drop an image here, upload from your device, or choose one from your server."})}),o.jsx("input",{ref:Y,type:"file",accept:"image/*",className:"hidden",onChange:V},_),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("button",{type:"button",className:"ui-button is-primary is-compact",onClick:u,children:"Choose"}),o.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:I,children:"Upload"}),o.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:G,children:"Clear"})]}),o.jsx(ju,{open:i,cwd:f,setCwd:p,page:g,setPage:w,perPage:x,setPerPage:j,totalPages:S,topDirs:y,loading:h,imagesOnly:P,setImagesOnly:L,search:v,setSearch:N,shownEntries:A,pickerSource:E,setPickerSource:W,onSelect:J,onClose:d}),o.jsx(l0,{open:b,onClose:()=>C(!1),title:a||"Preview",url:r,kind:"image"})]})}function o0({open:e,onClose:t,title:n,description:r,render:l,index:s=0,total:a=0,children:i}){const[u,d]=c.useState("idle");if(c.useEffect(()=>{if(u==="queued"){const p=setTimeout(()=>d("idle"),1600);return()=>clearTimeout(p)}},[u]),!e)return null;const f=typeof l=="function"?l():i;return o.jsxs("div",{className:"spotlight-overlay",role:"dialog","aria-modal":"true",children:[o.jsx("div",{className:"spotlight-backdrop",onClick:t}),o.jsxs("div",{className:"spotlight-sheet",children:[o.jsxs("div",{className:"spotlight-header",children:[o.jsxs("div",{className:"spotlight-meta",children:[o.jsx("div",{className:"spotlight-kicker",children:"Focused control"}),o.jsx("div",{className:"spotlight-title",children:n||"Control"}),r?o.jsx("div",{className:"spotlight-hint",children:r}):null]}),o.jsx("button",{type:"button",className:"spotlight-close",onClick:t,"aria-label":"Close",children:""})]}),o.jsx("div",{className:"spotlight-body",children:f}),o.jsx("div",{className:"spotlight-footer",children:o.jsx("div",{className:"spotlight-footer-right",children:o.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:t,"aria-label":"Close",children:"Close"})})})]})]})}function a0({open:e,onClose:t,value:n="",onChange:r,aliasOptions:l=[],aliasCatalog:s=[],aliasLookup:a,fieldLabel:i="Prompt"}){const u=c.useRef(null),d=c.useRef(null),f=c.useRef(null),p=c.useRef(null),[g,w]=c.useState(n),[x,j]=c.useState(""),[S,y]=c.useState("All"),[h,v]=c.useState("All"),[N,P]=c.useState(30),[L,A]=c.useState("compose"),[E,W]=c.useState(null),[B,G]=c.useState(null),J=c.useRef(null),Y=c.useRef(null);c.useEffect(()=>{e&&w(n)},[e,n]);const k=c.useMemo(()=>Array.isArray(s)?s.filter($=>$&&$.name):[],[s]),_=c.useMemo(()=>{const $={precip:"Weather",ambient:"Atmosphere",sky:"Sky",urbex:"Urban Exploration",scifi:"Sci-Fi",framing:"Framing",angle:"Angle",perspective:"Perspective",composition:"Composition",motion:"Motion"},U={sky_hour:"Golden Hour",sky_blue:"Clear Blue Sky",sky_clouds:"Sunset Clouds",sky_lights:"Aurora Borealis",sky_night:"Starry Night",sky_rainbow:"Rainbow",ambient_mist:"Misty Fog",ambient_blossom:"Cherry Blossoms",ambient_leaves:"Autumn Leaves",ambient_storm:"Sandstorm",ambient_heatwave:"Heat Wave",precip_day:"Rainy Day",precip_thunderstorm:"Thunderstorm",precip_snowfall:"Snowfall",precip_blizzard:"Blizzard",painterly_painterly:"Painterly",explorer_explorer:"Explorer",painterly_e_print:"Ukiyo-e Print",painterly_wash_monochrome:"Ink Wash"};return k.map(Z=>{const se=Z.name||"",ae=Z.token||se,fe=ae.includes(":")?ae.split(":")[1]:ae;if(U[fe]){const Ce=fe.split("_").filter(Boolean),Te=Ce.length>0?Ce[0]:"other";return{...Z,subcategory:Te,displayName:U[fe]}}const ge=fe.replace(/_(\d+)$/,"").split("_").filter(Boolean),Le=ge.length>0?ge[0]:"other",Ze=ge.length>1?ge.slice(1):[],et=Ce=>Ce.charAt(0).toUpperCase()+Ce.slice(1),D=Ze.map(et).join(" ").trim(),X=ge.map(et).join(" ").trim(),ne=$[Le.toLowerCase()]||et(Le);let pe;return!D||D.toLowerCase()===ne.toLowerCase()?pe=X||fe||se:pe=`${ne} - ${D}`,{...Z,subcategory:Le,displayName:pe}})},[k]),M=c.useMemo(()=>{const $=new Set(["All"]);return k.forEach(U=>{U.category&&$.add(U.category)}),Array.from($).sort((U,Z)=>U.localeCompare(Z))},[k]),b=c.useMemo(()=>{const $=new Set(["All"]);return _.forEach(U=>{(!S||S==="All"||U.category===S)&&U.subcategory&&$.add(U.subcategory)}),Array.from($).sort((U,Z)=>U.localeCompare(Z))},[_,S]),C=c.useMemo(()=>{const $=x.trim().toLowerCase();return _.filter(U=>{var Z,se,ae;return S!=="All"&&(U.category||"")!==S||h!=="All"&&(U.subcategory||"other")!==h?!1:$?((Z=U.token)==null?void 0:Z.toLowerCase().includes($))||((se=U.text)==null?void 0:se.toLowerCase().includes($))||((ae=U.name)==null?void 0:ae.toLowerCase().includes($)):!0}).sort((U,Z)=>{const se=(U.subcategory||"").toLowerCase(),ae=(Z.subcategory||"").toLowerCase();return se!==ae?se.localeCompare(ae):U.token.localeCompare(Z.token)})},[_,S,h,x]),V=c.useMemo(()=>C.slice(0,N),[C,N]);c.useEffect(()=>{P(30)},[S,h,x,k]),c.useEffect(()=>{v("All")},[S]),c.useEffect(()=>{const $=p.current;if(!$)return;const U=new IntersectionObserver(Z=>{Z[0].isIntersecting&&N<C.length&&P(ae=>Math.min(ae+20,C.length))},{threshold:.1});return U.observe($),()=>U.disconnect()},[N,C.length]);const I=c.useMemo(()=>{if(typeof g!="string")return[];const $=[],U=/\$([a-z0-9_:-]+)\$/gi;let Z;for(;Z=U.exec(g);)$.push({token:Z[1],index:Z.index,length:Z[0].length});return $},[g]),R=c.useMemo(()=>{if(!g||!a)return g;try{return g.replace(/\$([a-z0-9_:-]+)\$/gi,($,U)=>{const Z=a.get(U.toLowerCase());return typeof Z=="string"?Z:$})}catch{return g}},[g,a]);c.useEffect(()=>{const $=document.body;if(e&&$){const U=window.scrollY||window.pageYOffset;d.current=U,$.style.position="fixed",$.style.top=`-${U}px`,$.style.left="0",$.style.right="0",$.style.width="100%"}else if(!e&&$&&d.current!==null){const U=d.current;$.style.position="",$.style.top="",$.style.left="",$.style.right="",$.style.width="",window.scrollTo({top:U,behavior:"auto"}),d.current=null}},[e]),c.useEffect(()=>{e&&u.current&&requestAnimationFrame(()=>{var $;return($=u.current)==null?void 0:$.focus({preventScroll:!0})})},[e]);const T=$=>{w($.target.value)},te=$=>{const U=u.current,Z=`$${$}$`,se=g||"",ae=(U==null?void 0:U.selectionStart)??se.length,fe=(U==null?void 0:U.selectionEnd)??se.length,he=se.slice(0,ae),ge=se.slice(fe),Le=he.match(/[^\s]$/),Ze=ge.match(/^[^\s]/),et=Le&&Le[0]!==","?", ":"",D=Ze&&Ze[0]!==","?", ":"",X=he+et+Z+D+ge;w(X);const ne=(he+et+Z+D).length;A("compose"),requestAnimationFrame(()=>{U&&(U.focus(),U.setSelectionRange(ne,ne))})},K=$=>{const U=g||"",Z=$.index,se=$.index+$.length,ae=U.slice(0,Z).replace(/[\s,]*$/,""),fe=U.slice(se).replace(/^[\s,]*/,""),he=ae?`${ae} ${fe}`.trim():fe.trim();w(he)},z=c.useCallback(($,U)=>{if($===U||$===null||U===null)return;const Z=g||"",se=I[0],ae=I[I.length-1],fe=se?Z.slice(0,se.index).replace(/[\s,]*$/,""):"",he=ae?Z.slice(ae.index+ae.length).replace(/^[\s,]*/,""):"",ge=[...I],[Le]=ge.splice($,1);ge.splice(U,0,Le);const et=ge.map(X=>`$${X.token}$`).join(", ");let D="";fe?D=`${fe}, ${et}`:D=et,he&&(D=`${D}, ${he}`),w(D.trim())},[g,I]),O=c.useCallback(($,U)=>{W(U),J.current=$.target,$.dataTransfer.effectAllowed="move",$.dataTransfer.setData("text/plain",U.toString()),requestAnimationFrame(()=>{J.current&&J.current.classList.add("is-dragging")})},[]),m=c.useCallback(()=>{J.current&&J.current.classList.remove("is-dragging"),E!==null&&B!==null&&E!==B&&z(E,B),W(null),G(null),J.current=null},[E,B,z]),F=c.useCallback(($,U)=>{$.preventDefault(),$.dataTransfer.dropEffect="move",U!==B&&G(U)},[B]),H=c.useCallback(()=>{},[]),q=c.useCallback(($,U)=>{const Z=$.touches[0];Y.current={idx:U,startX:Z.clientX,startY:Z.clientY,moved:!1}},[]),le=c.useCallback($=>{if(!Y.current)return;const U=$.touches[0],Z=Math.abs(U.clientX-Y.current.startX),se=Math.abs(U.clientY-Y.current.startY);if(Z>10||se>10){Y.current.moved=!0,W(Y.current.idx);const ae=document.querySelectorAll(".composer-token-draggable"),fe=U.clientX,he=U.clientY;for(let ge=0;ge<ae.length;ge++){const Le=ae[ge].getBoundingClientRect();if(fe>=Le.left&&fe<=Le.right&&he>=Le.top&&he<=Le.bottom){G(ge);break}}}},[]),oe=c.useCallback(()=>{var $;($=Y.current)!=null&&$.moved&&E!==null&&B!==null&&E!==B&&z(E,B),Y.current=null,W(null),G(null)},[E,B,z]),je=()=>{r==null||r(g),t==null||t()},ce=()=>{t==null||t()};return e?o.jsxs("div",{className:"composer-overlay",role:"dialog","aria-modal":"true",children:[o.jsx("div",{className:"composer-backdrop",onClick:ce}),o.jsxs("div",{className:"composer-sheet",children:[o.jsxs("div",{className:"composer-header",children:[o.jsxs("div",{className:"composer-header-left",children:[o.jsx("div",{className:"composer-kicker",children:"Prompt Composer"}),o.jsx("div",{className:"composer-title",children:i})]}),o.jsx("button",{type:"button",className:"composer-close",onClick:ce,"aria-label":"Close",children:""})]}),o.jsxs("div",{className:"composer-tabs",children:[o.jsx("button",{type:"button",className:`composer-tab ${L==="compose"?"is-active":""}`,onClick:()=>A("compose"),children:"Write"}),o.jsxs("button",{type:"button",className:`composer-tab ${L==="aliases"?"is-active":""}`,onClick:()=>A("aliases"),children:["Aliases",k.length>0&&o.jsx("span",{className:"composer-tab-badge",children:k.length})]})]}),o.jsxs("div",{className:"composer-content",children:[o.jsxs("div",{className:`composer-panel composer-panel-compose ${L==="compose"?"is-visible":""}`,children:[o.jsx("div",{className:"composer-textarea-wrap",children:o.jsx("textarea",{ref:u,value:g,onChange:T,placeholder:"Write your prompt here... Use $alias$ tokens to insert dynamic content.",className:"composer-textarea",rows:6})}),I.length>0&&o.jsxs("div",{className:"composer-tokens",children:[o.jsxs("div",{className:"composer-tokens-label",children:["Active tokens: ",o.jsx("span",{className:"composer-tokens-hint",children:"(drag to reorder)"})]}),o.jsx("div",{className:"composer-tokens-list",children:I.map(($,U)=>{const Z=_.find(he=>{var ge;return((ge=he.token)==null?void 0:ge.toLowerCase())===$.token.toLowerCase()}),se=(Z==null?void 0:Z.displayName)||$.token,ae=E===U,fe=B===U&&E!==null&&E!==U;return o.jsxs("span",{className:`composer-token composer-token-draggable ${ae?"is-dragging":""} ${fe?"is-drop-target":""}`,title:`$${$.token}$`,draggable:!0,onDragStart:he=>O(he,U),onDragEnd:m,onDragOver:he=>F(he,U),onDragLeave:H,onTouchStart:he=>q(he,U),onTouchMove:le,onTouchEnd:oe,children:[o.jsx("span",{className:"composer-token-drag-handle","aria-hidden":"true",children:""}),o.jsx("span",{className:"composer-token-name",children:se}),o.jsx("button",{type:"button",className:"composer-token-remove",onClick:he=>{he.stopPropagation(),K($)},"aria-label":`Remove ${$.token}`,children:""})]},`${$.token}-${$.index}`)})})]}),o.jsxs("div",{className:"composer-preview",children:[o.jsx("div",{className:"composer-preview-label",children:"Preview (expanded):"}),o.jsx("div",{className:"composer-preview-content",children:R||""})]}),o.jsxs("div",{className:"composer-actions",children:[o.jsx("button",{type:"button",className:"composer-btn composer-btn-secondary",onClick:ce,children:"Cancel"}),o.jsx("button",{type:"button",className:"composer-btn composer-btn-primary",onClick:je,children:"Apply"})]})]}),o.jsxs("div",{className:`composer-panel composer-panel-aliases ${L==="aliases"?"is-visible":""}`,children:[o.jsx("div",{className:"composer-categories",children:M.map($=>o.jsx("button",{type:"button",onClick:()=>y($),className:`composer-category-pill ${S===$?"is-active":""}`,children:$==="All"?"All":$},`cat-${$}`))}),o.jsxs("div",{className:"composer-filters",children:[o.jsx("input",{ref:f,type:"text",value:x,onChange:$=>j($.target.value),placeholder:"Search aliases...",className:"composer-search"}),b.length>2&&o.jsx("select",{value:h,onChange:$=>v($.target.value),className:"composer-subcategory-select",children:b.map($=>o.jsx("option",{value:$,children:$==="All"?"All subcategories":$},$))})]}),o.jsx("div",{className:"composer-alias-list",children:C.length===0?o.jsx("div",{className:"composer-alias-empty",children:"No aliases found."}):o.jsxs(o.Fragment,{children:[V.map($=>o.jsxs("button",{type:"button",onClick:()=>te($.token),className:"composer-alias-item",children:[o.jsxs("div",{className:"composer-alias-header",children:[o.jsx("div",{className:"composer-alias-name",children:$.displayName||$.token}),$.category&&o.jsx("span",{className:"composer-alias-category",children:$.category})]}),o.jsxs("div",{className:"composer-alias-token",children:["$",$.token,"$"]}),o.jsx("div",{className:"composer-alias-text",children:$.text})]},$.key)),N<C.length&&o.jsx("div",{ref:p,className:"composer-sentinel"})]})})]})]})]})]}):null}function i0({open:e,onClose:t,title:n,value:r,onChange:l,placeholder:s="",description:a}){const i=n||"Edit",u=c.useMemo(()=>`sheet-textarea-${Math.random().toString(36).slice(2,9)}`,[]);return o.jsxs(Gl,{open:e,onClose:t,title:i,variant:"fullscreen",footer:o.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Done"}),children:[a?o.jsx("div",{className:"text-[12px] text-[#9DA3FFCC] mb-3",children:a}):null,o.jsx("textarea",{id:u,value:r??"",onChange:d=>l==null?void 0:l(d.target.value),placeholder:s,className:"sheet-textarea",rows:12,autoFocus:!0})]})}function td({name:e,label:t,description:n,value:r,onChange:l,onEnter:s,disabled:a=!1,multiline:i=!1,aliasOptions:u=[],aliasCatalog:d=[],onOpenComposer:f}){const p=c.useRef(null),g=c.useRef(null),w=c.useRef(null),[x,j]=c.useState(!1),[S,y]=c.useState(""),[h,v]=c.useState("All"),[N,P]=c.useState("All"),[L]=c.useState([]),[A,E]=c.useState([]),W=c.useRef(null),[B,G]=c.useState(!1);c.useMemo(()=>Array.isArray(u)?u.filter(Boolean):[],[u]);const J=c.useMemo(()=>Array.isArray(d)?d.filter(m=>m&&m.name):[],[d]),Y=c.useMemo(()=>{const m={precip:"Weather",ambient:"Atmosphere",sky:"Sky",urbex:"Urban Exploration",scifi:"Sci-Fi",framing:"Framing",angle:"Angle",perspective:"Perspective",composition:"Composition",motion:"Motion"},F={sky_hour:"Golden Hour",sky_blue:"Clear Blue Sky",sky_clouds:"Sunset Clouds",sky_lights:"Aurora Borealis",sky_night:"Starry Night",sky_rainbow:"Rainbow",ambient_mist:"Misty Fog",ambient_blossom:"Cherry Blossoms",ambient_leaves:"Autumn Leaves",ambient_storm:"Sandstorm",ambient_heatwave:"Heat Wave",precip_day:"Rainy Day",precip_thunderstorm:"Thunderstorm",precip_snowfall:"Snowfall",precip_blizzard:"Blizzard",painterly_painterly:"Painterly",explorer_explorer:"Explorer",painterly_e_print:"Ukiyo-e Print",painterly_wash_monochrome:"Ink Wash"};return J.map(H=>{const q=H.name||"",le=H.token||q,oe=le.includes(":")?le.split(":")[1]:le;if(F[oe]){const ge=oe.split("_").filter(Boolean),Le=ge.length>0?ge[0]:"other";return{...H,subcategory:Le,displayName:F[oe]}}const ce=oe.replace(/_(\d+)$/,"").split("_").filter(Boolean),$=ce.length>0?ce[0]:"other",U=ce.length>1?ce.slice(1):[],Z=ge=>ge.charAt(0).toUpperCase()+ge.slice(1),se=U.map(Z).join(" ").trim(),ae=ce.map(Z).join(" ").trim(),fe=m[$.toLowerCase()]||Z($);let he;return!se||se.toLowerCase()===fe.toLowerCase()?he=ae||oe||q:he=`${fe} - ${se}`,{...H,subcategory:$,displayName:he}})},[J]),k=m=>{const F=m.target.value;l==null||l(F),C(F)},_=m=>{if(!i&&m.key==="Enter"){m.preventDefault(),s==null||s(m.target.value,m);return}};c.useEffect(()=>{if(!i)return;const m=p.current;if(!m)return;const F=()=>{m.style.height="auto",m.style.height=`${Math.min(m.scrollHeight,320)}px`};F();const H=new MutationObserver(F);return H.observe(m,{characterData:!0,subtree:!0}),()=>H.disconnect()},[r,i]);const M=c.useMemo(()=>{const m=new Set(["All"]);return J.forEach(F=>{F.category&&m.add(F.category)}),Array.from(m).sort((F,H)=>F.localeCompare(H))},[J]),b=c.useMemo(()=>{const m=new Set(["All"]);return Y.forEach(F=>{(!h||h==="All"||F.category===h)&&F.subcategory&&m.add(F.subcategory)}),Array.from(m).sort((F,H)=>F.localeCompare(H))},[Y,h]),C=m=>{if(typeof m!="string"){E([]);return}const F=[],H=/\$([a-z0-9_:-]+)\$/gi;let q;for(;q=H.exec(m);)F.push({token:q[1],index:q.index,length:q[0].length});E(F)};c.useEffect(()=>{C(r||"")},[r]),c.useEffect(()=>{x&&W.current&&requestAnimationFrame(()=>{var m;return(m=W.current)==null?void 0:m.focus({preventScroll:!0})})},[x]),c.useEffect(()=>{const m=document.body;if(x&&m){const F=window.scrollY||window.pageYOffset;w.current=F,m.style.position="fixed",m.style.top=`-${F}px`,m.style.left="0",m.style.right="0",m.style.width="100%"}else if(!x&&m&&w.current!==null){const F=w.current;m.style.position="",m.style.top="",m.style.left="",m.style.right="",m.style.width="",window.scrollTo({top:F,behavior:"auto"}),w.current=null}},[x]);const V=()=>{g.current&&g.current.scrollIntoView({block:"center",behavior:"smooth"}),j(!0)},I=c.useMemo(()=>{const m=S.trim().toLowerCase();return Y.filter(F=>{var H,q,le;return h!=="All"&&(F.category||"")!==h||N!=="All"&&(F.subcategory||"other")!==N?!1:m?((H=F.token)==null?void 0:H.toLowerCase().includes(m))||((q=F.text)==null?void 0:q.toLowerCase().includes(m))||((le=F.name)==null?void 0:le.toLowerCase().includes(m)):!0}).sort((F,H)=>{const q=(F.subcategory||"").toLowerCase(),le=(H.subcategory||"").toLowerCase();return q!==le?q.localeCompare(le):F.token.localeCompare(H.token)})},[Y,h,N,S]),[R,T]=c.useState(30),te=c.useMemo(()=>I.slice(0,R),[I,R]);c.useEffect(()=>{T(30)},[h,N,S,J]),c.useEffect(()=>{P("All")},[h]);const K=m=>{const F=p.current,H=`$${m}$`,q=r||"",le=(F==null?void 0:F.selectionStart)??q.length,oe=(F==null?void 0:F.selectionEnd)??q.length,je=q.slice(0,le),ce=q.slice(oe),$=je.match(/[^\s]$/),U=ce.match(/^[^\s]/),Z=$&&$[0]!==","?", ":"",se=U&&U[0]!==","?", ":"",ae=je+Z+H+se+ce;l==null||l(ae);const fe=(je+Z+H+se).length;requestAnimationFrame(()=>{F&&(F.focus(),F.setSelectionRange(fe,fe))}),j(!1)},z=m=>{const F=r||"",H=m.index,q=m.index+m.length,le=F.slice(0,H).replace(/[\s,]*$/,""),oe=F.slice(q).replace(/^[\s,]*/,""),je=le?`${le} ${oe}`.trim():oe.trim();l==null||l(je)},O={id:e,name:e,value:r??"",onChange:k,disabled:a,className:"w-full rounded-xl border border-[#2A2E4A] bg-[#050716] px-3 py-2.5 pr-10 text-[13px] sm:text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80] transition-shadow shadow-[0_0_18px_rgba(5,7,22,0.7)]",placeholder:"","aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0};return i?o.jsxs("div",{className:"relative space-y-2",ref:g,children:[o.jsxs("div",{className:"stringinput-actions",children:[o.jsx("button",{type:"button",className:"stringinput-action",onClick:()=>G(!0),"aria-label":`Expand ${t||e}`,title:"Expand",children:""}),J.length?o.jsx("button",{type:"button",className:"stringinput-action",onClick:()=>f?f(e):V(),"aria-label":f?"Open prompt composer":"Insert alias",title:f?"Compose":"Insert alias",children:f?"":""}):null]}),o.jsx("textarea",{ref:p,...O,rows:3,wrap:"soft",onKeyDown:_,className:O.className+" resize-none min-h-[88px] max-h-[160px] leading-relaxed overflow-y-auto overflow-x-hidden break-words whitespace-pre-wrap",style:{whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"}}),o.jsx(i0,{open:B,onClose:()=>G(!1),title:t||e,value:r??"",onChange:l,description:n}),A.length?o.jsx("div",{className:"flex flex-wrap gap-1",children:A.map(m=>{const F=Y.find(q=>{var le;return((le=q.token)==null?void 0:le.toLowerCase())===m.token.toLowerCase()}),H=(F==null?void 0:F.displayName)||m.token;return o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md bg-[#0F1A2F] border border-[#2A2E4A] px-2 py-1 text-[11px] text-[#E5E7FF]",title:`$${m.token}$`,onClick:()=>{const q=m.index,le=m.index+m.length,oe=p.current;oe&&(oe.focus(),oe.setSelectionRange(q,le)),V()},children:[H,o.jsx("button",{type:"button",className:"text-[#FF8F70]",onClick:q=>{q.stopPropagation(),z(m)},"aria-label":`Remove ${m.token}`,children:""})]},`${m.token}-${m.index}`)})}):null,x?o.jsxs("div",{className:"fixed inset-0 z-50 sm:z-40 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>j(!1)}),o.jsxs("div",{className:"relative w-full max-w-xl mx-3 sm:mx-0 bg-[#0B1226] border border-[#2A2E4A] rounded-2xl shadow-[0_20px_50px_rgba(4,7,16,0.45)] p-3 sm:p-4 space-y-3 h-[70vh] max-h-[80vh] flex flex-col min-h-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-[#E5E7FF]",children:"Alias picker"}),o.jsx("button",{type:"button",className:"text-xs text-[#E5E7FF] underline",onClick:()=>j(!1),children:"Close"})]}),o.jsxs("div",{className:"flex flex-col gap-3 flex-1 min-h-0",children:[o.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-1",children:["All",...M.filter(m=>m!=="All")].map(m=>o.jsx("button",{type:"button",onClick:()=>v(m),className:`flex-shrink-0 rounded-full border px-3 py-1 text-[12px] ${h===m?"border-[#5EF1D4] bg-[#0F1A2F]":"border-[#1D2440] bg-[#0A1022] hover:border-[#2A2E4A]"} text-[#E5E7FF] transition`,children:m==="All"?"All Aliases":m},`cat-${m}`))}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 flex-wrap",children:[o.jsx("div",{className:"flex-1 min-w-[160px] w-full",children:o.jsx("input",{ref:W,type:"text",value:S,onChange:m=>y(m.target.value),placeholder:"Search aliases",className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]"})}),o.jsxs("label",{className:"flex sm:flex-row flex-col sm:items-center gap-1 text-[12px] text-[#7F91B6]",children:[o.jsx("span",{children:"Subcategory"}),o.jsx("select",{value:N,onChange:m=>P(m.target.value),className:"h-9 rounded-lg border border-[#2A2E4A] bg-[#0C1222] px-2 text-sm text-[#E5E7FF] focus:outline-none",children:b.map(m=>o.jsx("option",{value:m,children:m==="All"?"All subcategories":m},m))})]})]}),o.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto overscroll-contain pr-1 space-y-1",children:I.length===0?o.jsx("div",{className:"text-[12px] text-[#A9B6D9]",children:"No aliases found."}):o.jsxs(o.Fragment,{children:[te.map(m=>o.jsxs("button",{type:"button",onClick:()=>K(m.token),className:"w-full text-left rounded-lg border border-[#1D2440] bg-[#0C1222] px-3 py-2 hover:border-[#5EF1D4] transition-colors",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"text-[13px] font-semibold text-[#E5E7FF] truncate",children:m.displayName||m.token}),m.category?o.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-[#0F1A2F] border border-[#2A2E4A] text-[#7F91B6]",children:m.category}):null]}),o.jsxs("div",{className:"text-[11px] text-[#7F91B6] truncate",children:["$",m.token,"$"]}),o.jsx("div",{className:"text-[11px] text-[#A9B6D9] line-clamp-2",children:m.text})]},m.key)),R<I.length?o.jsx("div",{className:"flex justify-center py-2",children:o.jsxs("button",{type:"button",onClick:()=>T(m=>Math.min(m+30,I.length)),className:"px-3 py-1 rounded-md border border-[#2A2E4A] bg-[#0F1A2F] text-[12px] text-[#E5E7FF] hover:border-[#5EF1D4] transition",children:["Show more (",I.length-R," left)"]})}):null]})})]})]})]}):null]}):o.jsxs("div",{className:"relative space-y-2",ref:g,children:[o.jsx("input",{...O,type:"text",inputMode:"text",autoComplete:"off",onKeyDown:_,className:O.className+" min-h-[44px]",ref:p}),A.length?o.jsx("div",{className:"flex flex-wrap gap-1",children:A.map(m=>{const F=Y.find(q=>{var le;return((le=q.token)==null?void 0:le.toLowerCase())===m.token.toLowerCase()}),H=(F==null?void 0:F.displayName)||m.token;return o.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md bg-[#0F1A2F] border border-[#2A2E4A] px-2 py-1 text-[11px] text-[#E5E7FF]",title:`$${m.token}$`,onClick:()=>{const q=m.index,le=m.index+m.length,oe=p.current;oe&&(oe.focus(),oe.setSelectionRange(q,le)),V()},children:[H,o.jsx("button",{type:"button",className:"text-[#FF8F70]",onClick:q=>{q.stopPropagation(),z(m)},"aria-label":`Remove ${m.token}`,children:""})]},`${m.token}-${m.index}`)})}):null,J.length?o.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 h-8 w-8 rounded-lg border border-[#2A2E4A] bg-[#0F1A2F] text-sm text-[#E5E7FF] shadow-sm hover:border-[#5EF1D4] transition",onClick:()=>f?f(e):V(),title:f?"Open prompt composer":"Insert alias",children:f?"":""}):null,x?o.jsxs("div",{className:"fixed inset-0 z-50 sm:z-40 flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>j(!1)}),o.jsxs("div",{className:"relative w-full max-w-xl mx-3 sm:mx-0 bg-[#0B1226] border border-[#2A2E4A] rounded-2xl shadow-[0_20px_50px_rgba(4,7,16,0.45)] p-3 sm:p-4 space-y-3 h-[70vh] max-h-[80vh] flex flex-col min-h-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h3",{className:"text-sm font-semibold text-[#E5E7FF]",children:"Alias picker"}),o.jsx("button",{type:"button",className:"text-xs text-[#E5E7FF] underline",onClick:()=>j(!1),children:"Close"})]}),o.jsxs("div",{className:"flex flex-col gap-3 flex-1 min-h-0",children:[o.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-1",children:["All",...M.filter(m=>m!=="All")].map(m=>o.jsx("button",{type:"button",onClick:()=>v(m),className:`flex-shrink-0 rounded-full border px-3 py-1 text-[12px] ${h===m?"border-[#5EF1D4] bg-[#0F1A2F]":"border-[#1D2440] bg-[#0A1022] hover:border-[#2A2E4A]"} text-[#E5E7FF] transition`,children:m==="All"?"All Aliases":m},`cat-${m}`))}),o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 flex-wrap",children:[o.jsx("div",{className:"flex-1 min-w-[160px]",children:o.jsx("input",{ref:W,type:"text",value:S,onChange:m=>y(m.target.value),placeholder:"Search aliases",className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]"})}),o.jsxs("label",{className:"flex sm:flex-row flex-col sm:items-center gap-1 text-[12px] text-[#7F91B6]",children:[o.jsx("span",{children:"Subcategory"}),o.jsx("select",{value:N,onChange:m=>P(m.target.value),className:"h-9 rounded-lg border border-[#2A2E4A] bg-[#0C1222] px-2 text-sm text-[#E5E7FF] focus:outline-none",children:b.map(m=>o.jsx("option",{value:m,children:m==="All"?"All subcategories":m},m))})]})]}),o.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto overscroll-contain pr-1 space-y-1",children:I.length===0?o.jsx("div",{className:"text-[12px] text-[#A9B6D9]",children:"No aliases found."}):o.jsxs(o.Fragment,{children:[te.map(m=>o.jsxs("button",{type:"button",onClick:()=>K(m.token),className:"w-full text-left rounded-lg border border-[#1D2440] bg-[#0C1222] px-3 py-2 hover:border-[#5EF1D4] transition-colors",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"text-[13px] font-semibold text-[#E5E7FF] truncate",children:m.displayName||m.token}),m.category?o.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-[#0F1A2F] border border-[#2A2E4A] text-[#7F91B6]",children:m.category}):null]}),o.jsxs("div",{className:"text-[11px] text-[#7F91B6] truncate",children:["$",m.token,"$"]}),o.jsx("div",{className:"text-[11px] text-[#A9B6D9] line-clamp-2",children:m.text})]},m.key)),R<I.length?o.jsx("div",{className:"flex justify-center py-2",children:o.jsxs("button",{type:"button",onClick:()=>T(m=>Math.min(m+30,I.length)),className:"px-3 py-1 rounded-md border border-[#2A2E4A] bg-[#0F1A2F] text-[12px] text-[#E5E7FF] hover:border-[#5EF1D4] transition",children:["Show more (",I.length-R," left)"]})}):null]})})]})]})]}):null]})}const nd=e=>e==null?void 0:String(e).trim().replace(/[^A-Za-z0-9_-]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")||void 0;function pl({name:e,label:t,description:n,value:r,onChange:l,disabled:s=!1,min:a,max:i,step:u,isFloat:d=!1,inputId:f}){const p=u??(d?.01:1),g=f??nd(e),w=S=>{if(S===""||S===null||S===void 0)return"";const y=d?parseFloat(S):parseInt(S,10);return Number.isNaN(y)?"":y},x=S=>{const y=S.target.value,h=w(y);l==null||l(h)},j=S=>{if(S.key!=="ArrowUp"&&S.key!=="ArrowDown")return;S.preventDefault();const y=typeof r=="number"?r:w(String(r??""))||0,h=S.key==="ArrowUp"?p:-p;let v=y+h;if(typeof a=="number"&&(v=Math.max(a,v)),typeof i=="number"&&(v=Math.min(i,v)),d){const N=typeof p=="number"?(String(p).split(".")[1]||"").length:2;v=parseFloat(v.toFixed(Math.max(N,2)))}l==null||l(v)};return o.jsxs("div",{className:"w-full flex items-center gap-2",children:[o.jsx("input",{id:g,name:e,type:"number",inputMode:d?"decimal":"numeric",value:r??"",onChange:x,onKeyDown:j,disabled:s,min:a,max:i,step:p,"aria-label":t||e,"aria-describedby":n?`${g||nd(e)||e}-description`:void 0,className:"w-full rounded-xl border border-[#2A2E4A] bg-[#050716] px-3 py-2.5 text-[13px] sm:text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80] transition-shadow shadow-[0_0_18px_rgba(5,7,22,0.7)]"}),typeof a=="number"||typeof i=="number"?o.jsxs("div",{className:"hidden sm:flex flex-col text-[10px] text-[#6A6FA8] text-right leading-tight",children:[typeof a=="number"&&o.jsxs("span",{children:["min ",a]}),typeof i=="number"&&o.jsxs("span",{children:["max ",i]})]}):null]})}function rd({name:e,label:t,description:n,value:r,onChange:l,disabled:s=!1}){const a=!!r,i=()=>{s||l==null||l(!a)},u=d=>{(d.key===" "||d.key==="Enter")&&(d.preventDefault(),i())};return o.jsxs("button",{id:e,type:"button",role:"switch","aria-checked":a,"aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0,onClick:i,onKeyDown:u,disabled:s,className:"inline-flex items-center justify-between gap-2 rounded-full border border-[#3D4270] bg-[#050716] px-2.5 py-1.5 text-[10px] sm:text-[11px] text-[#C3C7FF] transition-colors shadow-[0_0_16px_rgba(5,7,22,0.9)] "+(a?"bg-[radial-gradient(circle_at_0%_0%,#3EF0FF,transparent_60%),radial-gradient(circle_at_100%_100%,#FF60D0,transparent_60%)] text-[#050716]":"hover:border-[#3EF0FF80]"),children:[o.jsx("span",{className:"relative inline-flex h-4 w-8 items-center rounded-full "+(a?"bg-[#3EF0FF]":"bg-[#2A2E4A]"),children:o.jsx("span",{className:"h-3 w-3 rounded-full bg-[#050716] shadow-[0_0_6px_rgba(0,0,0,0.6)] transform transition-transform "+(a?"translate-x-[14px]":"translate-x-[2px]")})}),o.jsx("span",{className:"uppercase tracking-[0.16em]",children:a?"TRUE":"FALSE"})]})}function yi({name:e,label:t,description:n,value:r,onChange:l,disabled:s=!1,options:a=[]}){const[i,u]=c.useState("All"),d=c.useMemo(()=>(a||[]).map(x=>typeof x=="string"?{value:x,label:x}:{value:x.value??x.name??"",label:x.label??x.name??String(x.value??"")}),[a]),f=(x="")=>{if(typeof x!="string")return"Other";if(!x.includes("/"))return"root";const j=x.split("/");return j.slice(0,j.length-1).join("/")||"root"},p=c.useMemo(()=>{const x=new Set(["All"]);return d.forEach(j=>x.add(f(j.label))),Array.from(x).sort((j,S)=>j.localeCompare(S))},[d]),g=c.useMemo(()=>{const x=j=>j.replace(/\.[^.]+$/,"");return d.filter(j=>{const S=f(j.label);return i==="All"||S===i}).map(j=>{if(i==="All")return j;const S=(j.label||"").split("/"),y=x(S[S.length-1]||j.label);return{...j,label:y}}).sort((j,S)=>j.label.localeCompare(S.label))},[d,i]),w=x=>{l==null||l(x.target.value)};return o.jsxs("div",{className:"relative w-full space-y-2",children:[o.jsx("select",{value:i,onChange:x=>u(x.target.value),className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-[13px] sm:text-sm text-[#E5E7FF] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80] transition-shadow shadow-[0_0_12px_rgba(5,7,22,0.6)]","aria-label":`Choose folder for ${t||e}`,children:p.map(x=>o.jsx("option",{value:x,children:x},x))}),o.jsxs("select",{id:e,name:e,value:r??"",onChange:w,disabled:s,"aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0,className:"w-full rounded-xl border border-[#2A2E4A] bg-[#050716] px-3 py-2.5 pr-8 text-[13px] sm:text-sm text-[#E5E7FF] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80] appearance-none transition-shadow shadow-[0_0_18px_rgba(5,7,22,0.7)]",children:[g.length>0&&(r===void 0||r==="")&&o.jsx("option",{value:"",children:"Select"}),g.map(x=>o.jsx("option",{value:x.value,children:x.label},x.value)),g.length===0&&o.jsx("option",{value:"",children:"No matches"})]}),o.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center",children:o.jsx("span",{className:"inline-block h-[6px] w-[10px] border-x-[5px] border-t-[6px] border-x-transparent border-t-[#9CF7FF]"})})]})}function ld(e=[]){return e.map(t=>typeof t=="string"?{value:t,label:t}:{value:t.value??t.name??"",label:t.label??t.name??String(t.value??"")})}function sd(e,t){if(!e)return null;const n=String(e);if(t==="high"){const r=n.match(/(.+)-high(\.[^.]*)?$/i);return r?r[1]:null}if(t==="low"){const r=n.match(/(.+)-low(\.[^.]*)?$/i);return r?r[1]:null}return null}function u0(e){return e?e.replace(/[_-]+/g," ").replace(/\s+/g," ").trim().replace(/^./,t=>t.toUpperCase()):""}const c0=(...e)=>e.flat().map(n=>String(n??"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")).filter(Boolean).join("-")||"field";function vi({name:e,label:t,description:n,highParam:r,lowParam:l,highChoices:s=[],lowChoices:a=[],formData:i={},onChangeParam:u,highStrengthParam:d,lowStrengthParam:f,strengthValue:p,onChangeStrength:g,highStrengthValue:w,lowStrengthValue:x,onChangeHighStrength:j,onChangeLowStrength:S,disabled:y=!1}){const h=c.useMemo(()=>ld(s),[s]),v=c.useMemo(()=>ld(a),[a]),N=c.useMemo(()=>{const O=new Map;v.forEach(F=>{const H=sd(F.value,"low");H&&(O.has(H)||O.set(H,F))});const m=[];return h.forEach(F=>{const H=sd(F.value,"high");if(!H)return;const q=O.get(H);q&&m.push({base:H,label:u0(H),highValue:F.value,lowValue:q.value})}),m.sort((F,H)=>F.label.localeCompare(H.label)),m},[h,v]),P=c.useMemo(()=>{const O=i[r],m=i[l];if(!O||!m)return"";const F=N.find(H=>H.highValue===O&&H.lowValue===m);return F?F.base:""},[i,r,l,N]),L=d||f||`${e}_strength`,A=c.useMemo(()=>c0(e||"lora",L||"strength"),[e,L]),E=!!(d||f),W=!!(d&&f),B=(O,m=1)=>typeof O=="number"?O:m,G=B(typeof p=="number"?p:typeof w=="number"?w:typeof x=="number"?x:void 0,1),J=B(typeof w=="number"?w:void 0,G),Y=B(typeof x=="number"?x:void 0,W?G:J),k=W&&Math.abs(J-Y)>1e-4,[_,M]=c.useState(k);c.useEffect(()=>{M(k)},[k,r,l]);const b=O=>{if(!u)return;const m=N.find(F=>F.base===O);m&&(u(r,m.highValue),u(l,m.lowValue))};if(N.length===0)return o.jsxs("div",{className:"text-[11px] text-[#9DA3FFCC]",children:["No matching ",o.jsx("span",{className:"font-semibold",children:"-high"})," /"," ",o.jsx("span",{className:"font-semibold",children:"-low"})," LoRA pairs found."]});const C=`${A}-linked`,V=`${A}-high`,I=`${A}-low`,R=W?"Linked":"Strength",T=W?"Applies to high + low":d||f||"",te=(O,m)=>{const F=Array.isArray(O)?O:[O];let H=!1;F.forEach(q=>{if(q==="high"&&typeof j=="function"){j(m);return}if(q==="low"&&typeof S=="function"){S(m);return}typeof g=="function"&&!H&&(g(m),H=!0)})},K=O=>{(d||!d&&!f)&&te("high",O),f&&te("low",O)},z=()=>{W&&M(O=>{const m=!O;return m||K(typeof J=="number"?J:typeof Y=="number"?Y:G),m})};return o.jsxs("div",{className:"space-y-2",children:[o.jsx(yi,{name:`${e}_pair`,label:t,description:n,value:P||"",onChange:b,disabled:y,options:N.map(O=>({value:O.base,label:O.label}))}),E&&o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px] uppercase tracking-[0.16em] text-[#9DA3FFCC]",children:"Strength"}),W&&o.jsx("button",{type:"button",className:"text-[10px] font-semibold tracking-[0.12em] uppercase text-[#E5E7FF]",onClick:z,disabled:y,children:_?"Link values":"Split values"})]}),_&&W?o.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-3",children:[o.jsxs("div",{className:"flex-1 max-w-[220px]",children:[o.jsxs("label",{htmlFor:V,className:"lora-strength-label is-high",children:[o.jsx("span",{className:"lora-strength-label-pill",children:"High"}),o.jsxs("span",{className:"lora-strength-label-text",children:["High strength",d&&o.jsx("span",{className:"lora-strength-label-hint",children:d})]})]}),o.jsx(pl,{name:`${L}_high`,label:"High strength",description:"",value:J,onChange:O=>te("high",O),disabled:y,isFloat:!0,min:0,max:2,step:.05,inputId:V})]}),o.jsxs("div",{className:"flex-1 max-w-[220px]",children:[o.jsxs("label",{htmlFor:I,className:"lora-strength-label is-low",children:[o.jsx("span",{className:"lora-strength-label-pill",children:"Low"}),o.jsxs("span",{className:"lora-strength-label-text",children:["Low strength",f&&o.jsx("span",{className:"lora-strength-label-hint",children:f})]})]}),o.jsx(pl,{name:`${L}_low`,label:"Low strength",description:"",value:Y,onChange:O=>te("low",O),disabled:y,isFloat:!0,min:0,max:2,step:.05,inputId:I})]})]}):o.jsxs("div",{className:"flex-1 max-w-[220px]",children:[o.jsxs("label",{htmlFor:C,className:"lora-strength-label is-linked",children:[o.jsx("span",{className:"lora-strength-label-pill",children:R}),o.jsxs("span",{className:"lora-strength-label-text",children:["LoRA strength",T&&o.jsx("span",{className:"lora-strength-label-hint",children:T})]})]}),o.jsx(pl,{name:L,label:"LoRA strength",description:"",value:G,onChange:K,disabled:y,isFloat:!0,min:0,max:2,step:.05,inputId:C})]})]})]})}function sa({id:e,label:t,description:n,preview:r,expanded:l=!1,onToggle:s,children:a,trailing:i,className:u=""}){const d=typeof s=="function",f=e?`${e}-description`:void 0,p=e?`${e}-panel`:void 0,g=d?"button":"div",w=d?{type:"button",onClick:s,"aria-expanded":l,"aria-controls":p}:{};return o.jsxs("div",{className:["field-row",u].filter(Boolean).join(" "),children:[o.jsxs(g,{...w,className:["field-row-head",d?"is-collapsible":"is-static",l?"is-expanded":""].filter(Boolean).join(" "),children:[o.jsxs("div",{className:"field-row-main",children:[o.jsx("div",{className:"field-row-label",children:t}),n?o.jsx("div",{id:f,className:"field-row-description",children:n}):null]}),o.jsxs("div",{className:"field-row-trailing",children:[i?o.jsx("div",{className:"field-row-trailing-control",children:i}):null,r?o.jsx("div",{className:"field-row-preview",children:r}):null,d?o.jsx("div",{className:"field-row-chevron","aria-hidden":"true",children:""}):null]})]}),d&&l?o.jsx("div",{id:p,className:"field-row-body",children:a}):null]})}const d0=16,f0=[" - "," ","-","_"],Nm=e=>[...new Set(e.filter(Boolean))],no=(e,t)=>{const n=String(e||"").trim(),r=f0.map(l=>`${n}${l}${t}`);return r.push(`${n}${t}`),Nm(r)},od=(e,t)=>{const n=no(`${e} Strength`,t),r=no(e,t).map(l=>`${l} Strength`);return Nm([...n,...r])},ad=e=>String(e||"").toLowerCase().replace(/[\s_-]+/g,""),gn=(e,t=[])=>{if(!e)return null;const n=Array.isArray(t)?t:[t];for(const l of n){if(!l)continue;const s=e.get(l);if(s)return{name:l,input:s}}const r=new Map;n.forEach(l=>{l&&r.set(ad(l),l)});for(const[l,s]of e.entries()){const a=ad(l);if(r.has(a))return{name:l,input:s}}return null},jm=Array.from({length:d0},(e,t)=>{const n=t+1,r=no("Lora High",n),l=no("Lora Low",n),s=od("Lora High",n),a=od("Lora Low",n);return{id:`video_lora_${n}`,label:`Video LoRA ${n}`,highParam:r[0],lowParam:l[0],highParamAliases:r,lowParamAliases:l,highStrengthParam:s[0],lowStrengthParam:a[0],highStrengthParamAliases:s,lowStrengthParamAliases:a}});function p0(e){var r,l;const t=((r=e==null?void 0:e.inputs)==null?void 0:r.param_type)||((l=e==null?void 0:e.inputs)==null?void 0:l.Param_type),n=String(t||"STRING").toUpperCase();return["NUMBER","FLOAT","INT"].includes(n)?"NUMBER":["BOOLEAN","BOOL"].includes(n)?"BOOLEAN":["DROPDOWN","CHOICE","SELECT"].includes(n)?"DROPDOWN":"STRING"}function m0(e){const t=(e==null?void 0:e.inputs)||{};return t.label||t.display_name||t.title||t.param_name||(e==null?void 0:e.title)||(e==null?void 0:e.class_type)||"Parameter"}function h0(e){const t=(e==null?void 0:e.inputs)||{};return t.description||t.help||t.tooltip||t.doc||""}function Il(e){const t=(e==null?void 0:e.inputs)||{};return t.param_name||t.name||t.key||t.id||`param_${(e==null?void 0:e.id)||"unknown"}`}function yn(e){const t=(e==null?void 0:e.inputs)||{},n=t.choices||t.options||[],r=t.default_value??t.value??t.default_choice??(n&&n.length?n[0]:"")??"";return{paramName:Il(e),label:m0(e),description:h0(e),paramType:p0(e),multiline:!!t.multiline,min:typeof t.min=="number"?t.min:void 0,max:typeof t.max=="number"?t.max:void 0,step:typeof t.step=="number"?t.step:void 0,choices:n,defaultValue:r}}function g0({inputs:e=[],formData:t={},onFormChange:n,onParamEdited:r,onSpotlight:l,compactControls:s=!0,collapseAllKey:a=0,collapseAllCollapsed:i=!0,lastEditedParam:u="",spotlightName:d="",onCloseSpotlight:f=()=>{},onVisibleParamsChange:p=()=>{},aliasOptions:g=[],aliasCatalog:w=[],onOpenComposer:x}){const[j,S]=c.useState({}),[y,h]=c.useState(0),v=c.useCallback((k,_)=>{if((k==null?void 0:k.paramType)==="BOOLEAN")return _?"On":"Off";if(_==null||_==="")return"Empty";if(typeof _=="string"){const M=_.trim();return M||"Empty"}return String(_)},[]),N=(k,_)=>{n&&(n(k,_),r==null||r(k),S(M=>({...M,[k]:!1})))},P=c.useCallback(k=>{k&&S(_=>({..._,[k]:!(_!=null&&_[k])}))},[]),L=c.useMemo(()=>e||[],[e]);c.useEffect(()=>{const k={};(e||[]).forEach(_=>{const M=Il(_);M&&(k[M]=i)}),u&&(k[u]=!1),S(k)},[a,i,e,u]);const A=c.useMemo(()=>{const k=new Map;return(e||[]).forEach(_=>{const M=Il(_);M&&k.set(M,_)}),k},[e]),E=c.useMemo(()=>{const k=[];return jm.forEach(_=>{const M=gn(A,_.highParamAliases||_.highParam),b=gn(A,_.lowParamAliases||_.lowParam);if(!M||!b)return;const C=M.input,V=b.input,I=yn(C),R=yn(V);if(I.paramType!=="DROPDOWN"||R.paramType!=="DROPDOWN")return;const T=I.choices||[],te=R.choices||[];if(!T.length||!te.length)return;const K=gn(A,_.highStrengthParamAliases||_.highStrengthParam),z=gn(A,_.lowStrengthParamAliases||_.lowStrengthParam);k.push({..._,highParam:M.name,lowParam:b.name,highStrengthParam:K==null?void 0:K.name,lowStrengthParam:z==null?void 0:z.name,highInput:C,lowInput:V,highCfg:I,lowCfg:R})}),k},[A]),W=c.useMemo(()=>{const k=new Map;return E.forEach(_=>{k.set(_.highParam,_)}),k},[E]),B=c.useMemo(()=>{const k=new Set;return E.forEach(_=>{k.add(_.highParam),k.add(_.lowParam),_.highStrengthParam&&k.add(_.highStrengthParam),_.lowStrengthParam&&k.add(_.lowStrengthParam)}),k},[E]),G=c.useMemo(()=>{const k=[];return(L||[]).forEach(_=>{const M=yn(_),b=M.paramName,C=W.get(b);if(C){k.push({name:b,label:C.label||M.label,description:M.description,render:V=>{const I=V||t||{},R=C.highStrengthParam?I[C.highStrengthParam]:void 0,T=C.lowStrengthParam?I[C.lowStrengthParam]:void 0,te=R??T??1;return o.jsx(vi,{name:C.id||C.highParam,label:C.label||M.label,highParam:C.highParam,lowParam:C.lowParam,highChoices:C.highCfg.choices,lowChoices:C.lowCfg.choices,formData:I,onChangeParam:N,highStrengthParam:C.highStrengthParam,lowStrengthParam:C.lowStrengthParam,strengthValue:te,highStrengthValue:R,lowStrengthValue:T,onChangeHighStrength:C.highStrengthParam?K=>N(C.highStrengthParam,K):void 0,onChangeLowStrength:C.lowStrengthParam?K=>N(C.lowStrengthParam,K):void 0,disabled:!1},`lora-${b}-${y}`)}});return}B.has(b)||k.push({name:b,label:M.label,description:M.description,render:V=>{const I=V||t||{},R={name:b,label:M.label,description:M.description,value:I[b],defaultValue:M.defaultValue,disabled:!1};return M.paramType==="NUMBER"?o.jsx(pl,{...R,onChange:T=>N(b,T),min:M.min,max:M.max,step:M.step,isFloat:!0},`field-${b}-number-${y}`):M.paramType==="BOOLEAN"?o.jsx(rd,{...R,onChange:T=>N(b,T)},`field-${b}-bool-${y}`):M.paramType==="DROPDOWN"?o.jsx(yi,{...R,onChange:T=>N(b,T),options:M.choices||[]},`field-${b}-dropdown-${y}`):o.jsx(td,{...R,aliasOptions:g,aliasCatalog:w,onOpenComposer:x,onChange:T=>N(b,T),onEnter:(T,te)=>{var K,z;N(b,T),(z=(K=te==null?void 0:te.target)==null?void 0:K.blur)==null||z.call(K),d===b&&(f==null||f())},multiline:M.multiline},`field-${b}-string-${y}`)}})}),k},[L,W,B,t,y,d,f]),J=c.useMemo(()=>{const k=new Map;return G.forEach(_=>k.set(_.name,_)),k},[G]);c.useEffect(()=>{p==null||p(G.map(k=>k.name))},[G,p]);const Y=c.useCallback(k=>{const _=G.map(I=>I.name),M=J.get(k);if(!M)return;const b=_.indexOf(k),C=b>0?_[b-1]:null,V=b>=0&&b<_.length-1?_[b+1]:null;h(I=>I+1),l==null||l({name:k,label:M.label,description:M.description,render:I=>M.render(I||t),order:_,index:b>=0?b:0,total:_.length,onPrev:C?()=>Y(C):null,onNext:V?()=>Y(V):null})},[J,t,l,G]);return o.jsx("div",{className:"settings-list",children:L.map(k=>{const _=yn(k),M=_.paramName,b=W.get(M);if(b){const{id:z,label:O,highParam:m,lowParam:F,highStrengthParam:H,lowStrengthParam:q,highCfg:le,lowCfg:oe}=b,je=H?t[H]:void 0,ce=q?t[q]:void 0,$=je??ce??1,U=M?`param-${M}`:void 0,Z=s?j[M]??!0:!!j[M],se=v(_,[t[m],t[F]].filter(Boolean).join("  ")),ae=(fe=t)=>{const he=H?fe==null?void 0:fe[H]:void 0,ge=q?fe==null?void 0:fe[q]:void 0,Le=he??ge??$;return o.jsx(vi,{name:z||m,label:O||_.label,highParam:m,lowParam:F,highChoices:le.choices,lowChoices:oe.choices,formData:fe,onChangeParam:N,highStrengthParam:H,lowStrengthParam:q,strengthValue:Le,highStrengthValue:he,lowStrengthValue:ge,onChangeHighStrength:H?Ze=>N(H,Ze):void 0,onChangeLowStrength:q?Ze=>N(q,Ze):void 0,disabled:!1},`lora-${M}`)};return o.jsx("div",{id:U,"data-param-name":M,"data-param-label":O||_.label,"data-param-type":"lora_pair",className:"settings-row",children:o.jsx(sa,{id:M,label:O||_.label,description:_.description,preview:se,expanded:!Z,onToggle:()=>P(M),children:ae()})},`lora_pair_${z||m}`)}if(B.has(M))return null;const C=t[M],V=!1,I=v(_,C),R={name:M,label:_.label,description:_.description,value:C,disabled:V,defaultValue:_.defaultValue},T=(z=t,O=!1)=>{const m={...R,value:z==null?void 0:z[M]};return _.paramType==="NUMBER"?o.jsx(pl,{...m,inputId:M,onChange:F=>N(M,F),min:_.min,max:_.max,step:_.step,isFloat:!0},`field-${M}-number-${y}`):_.paramType==="BOOLEAN"?o.jsx(rd,{...m,onChange:F=>N(M,F)},`field-${M}-bool-${y}`):_.paramType==="DROPDOWN"?o.jsx(yi,{...m,onChange:F=>N(M,F),options:_.choices||[]},`field-${M}-dropdown-${y}`):o.jsx(td,{...m,aliasOptions:g,aliasCatalog:w,onOpenComposer:x,onChange:F=>N(M,F),onEnter:(F,H)=>{var q,le;N(M,F),(le=(q=H==null?void 0:H.target)==null?void 0:q.blur)==null||le.call(q),d===M&&(f==null||f())},multiline:_.multiline||d===M||O},`field-${M}-string-${y}`)},te=M?`param-${M}`:void 0,K=s?j[M]??!0:!!j[M];return _.paramType==="BOOLEAN"?o.jsx("div",{id:te,"data-param-name":M,"data-param-label":_.label,"data-param-type":"single",className:"settings-row",children:o.jsx(sa,{id:M,label:_.label,description:_.description,trailing:T(t,!0)})},M):o.jsx("div",{id:te,"data-param-name":M,"data-param-label":_.label,"data-param-type":"single",className:"settings-row",children:o.jsx(sa,{id:M,label:_.label,description:_.description,preview:I,expanded:!K,onToggle:()=>P(M),children:T(t,!K)})},M)})})}function y0(e){return(e||[]).map(t=>{var n;if(["CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput","CozyGenChoiceInput"].includes(t.class_type)){let r=t.class_type.replace("CozyGen","").replace("Input","").toUpperCase();return r==="CHOICE"&&(r="DROPDOWN"),{...t,inputs:{...t.inputs,param_type:r,Multiline:((n=t.inputs)==null?void 0:n.display_multiline)||!1}}}return t})}function v0({dynamicInputs:e,formData:t,onFormChange:n,sectionRef:r,compactControls:l=!1,collapseAllState:s=null,onSpotlight:a,spotlightName:i,onCloseSpotlight:u,onVisibleParamsChange:d,aliasOptions:f=[],aliasCatalog:p=[],onOpenComposer:g}){const w=c.useMemo(()=>y0((e||[]).filter(x=>x.class_type!=="CozyGenImageInput")),[e]);return o.jsx("section",{className:"settings-surface scroll-mt-24",ref:r,children:o.jsx(g0,{inputs:w,formData:t,onFormChange:n,compactControls:l,collapseAllKey:(s==null?void 0:s.key)??0,collapseAllCollapsed:(s==null?void 0:s.collapsed)??!0,onSpotlight:a,spotlightName:i,onCloseSpotlight:u,onVisibleParamsChange:d,aliasOptions:f,aliasCatalog:p,onOpenComposer:g})})}function x0({dynamicInputs:e,formData:t,onFormChange:n,parameterSectionRef:r,compactControls:l=!0,collapseAllState:s=null,onSpotlight:a,spotlightName:i,onCloseSpotlight:u,onVisibleParamsChange:d,aliasOptions:f=[],aliasCatalog:p=[],onOpenComposer:g}){return o.jsx(v0,{dynamicInputs:e,formData:t,onFormChange:n,sectionRef:r,compactControls:l,collapseAllState:s,onSpotlight:a,spotlightName:i,onCloseSpotlight:u,onVisibleParamsChange:d,aliasOptions:f,aliasCatalog:p,onOpenComposer:g})}const id=c.forwardRef(function({title:t,kicker:n,meta:r,defaultOpen:l=!0,variant:s="card",className:a="",bodyClassName:i,children:u},d){const f=s==="bare",p=(f?["collapsible-section","collapsible-section--bare",a]:["ui-panel","collapsible-card","sectioned-card",a]).filter(Boolean).join(" "),g=(f?["collapsible-section-body",i||"space-y-4"]:["collapsible-card-body",i||"space-y-4"]).filter(Boolean).join(" "),w=r!=null?o.jsx("div",{className:"collapsible-card-summary-meta",children:r}):null;return o.jsxs("details",{ref:d,className:p,open:l,children:[o.jsxs("summary",{className:f?"collapsible-section-summary":"collapsible-card-summary",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[n?o.jsx("span",{className:"ui-kicker",children:n}):null,o.jsx("span",{className:"text-sm font-semibold tracking-wide",children:t})]}),w,f?o.jsx("span",{className:"collapsible-section-chevron","aria-hidden":"true",children:""}):null]}),o.jsx("div",{className:g,children:u})]})});function ud(e){try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return""}}function w0({open:e,onClose:t,logs:n=[],onClear:r}){const l=c.useMemo(()=>(n||[]).map(s=>`[${ud(s.ts)}] ${String(s.level||"info").toUpperCase()} ${s.message}`).join(`
`),[n]);return o.jsx(Gl,{open:e,onClose:t,title:"Run logs",footer:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>{var s,a;try{(a=(s=navigator.clipboard)==null?void 0:s.writeText)==null||a.call(s,l||"")}catch{}},children:"Copy"}),o.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:r,children:"Clear"}),o.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Close"})]}),children:o.jsx("pre",{className:"runlog-pre",children:n!=null&&n.length?n.map((s,a)=>o.jsxs("div",{className:`runlog-line is-${s.level||"info"}`,children:[o.jsx("span",{className:"runlog-ts",children:ud(s.ts)}),o.jsx("span",{className:"runlog-msg",children:s.message})]},`${s.ts}-${a}`)):"No logs yet."})})}function Sm(){const[e,t]=c.useState([]),[n,r]=c.useState(null),[l,s]=c.useState(!0),[a,i]=c.useState(null);c.useEffect(()=>{let d=!1;async function f(){s(!0),i(null);try{const p=await gv();if(d)return;const g=(p==null?void 0:p.workflows)||[];t(g);let w=null;try{w=typeof window<"u"?localStorage.getItem("selectedWorkflow"):null}catch{w=null}if(w&&g.includes(w))r(w);else if(g.length>0){r(g[0]);try{typeof window<"u"&&localStorage.setItem("selectedWorkflow",g[0])}catch{}}else r(null)}catch(p){if(d)return;console.error("Failed to load workflows",p),i(p)}finally{d||s(!1)}}return f(),()=>{d=!0}},[]);const u=c.useCallback(d=>{r(d);try{typeof window<"u"&&localStorage.setItem("selectedWorkflow",d)}catch{}},[]);return{workflows:e,selectedWorkflow:n,selectWorkflow:u,loading:l,error:a}}function N0(e){try{if(typeof window>"u")return null;const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}}function _o(e,t){try{if(typeof window>"u")return;localStorage.setItem(e,JSON.stringify(t))}catch{}}const bm=260,Jt=new Map,En=new Map,Sr=new Map,_n=new Map;function j0(e){En.has(e)&&(clearTimeout(En.get(e)),En.delete(e)),Jt.has(e)&&(_o(e,Jt.get(e)),Jt.delete(e))}function S0(e){if(En.has(e))return;const t=setTimeout(()=>{En.delete(e),Jt.has(e)&&(_o(e,Jt.get(e)),Jt.delete(e))},bm);En.set(e,t)}function b0(){Array.from(En.values()).forEach(e=>clearTimeout(e)),En.clear(),Array.from(Jt.entries()).forEach(([e,t])=>{_o(e,t)}),Jt.clear(),Array.from(_n.values()).forEach(e=>clearTimeout(e)),_n.clear(),Array.from(Sr.entries()).forEach(([e,t])=>{try{typeof window<"u"&&localStorage.setItem(e,t)}catch{}}),Sr.clear()}if(typeof window<"u"&&!window.__cozygenFormStateFlush){const e=()=>b0();window.addEventListener("beforeunload",e),window.addEventListener("pagehide",e),window.__cozygenFormStateFlush=!0}function C0(e){return e?N0(`${e}_formData`)||{}:{}}function Or(e,t,n={}){if(!e)return;const{immediate:r=!1}=n||{},l=`${e}_formData`;if(r){j0(l),_o(l,t||{});return}Jt.set(l,t||{}),S0(l)}function k0(e,t,n=bm){if(Sr.set(e,t),_n.has(e))return;const r=setTimeout(()=>{_n.delete(e);const l=Sr.get(e);Sr.delete(e);try{typeof window<"u"&&localStorage.setItem(e,l)}catch{}},n);_n.set(e,r)}function E0(e,t={}){const{immediate:n=!1}=t||{},r="cozygen_last_param";if(n){_n.has(r)&&(clearTimeout(_n.get(r)),_n.delete(r)),Sr.delete(r);try{typeof window<"u"&&localStorage.setItem(r,e||"")}catch{}return}k0(r,e||"")}const _0={clip_name1:"clip",clip_name2:"clip",unet_name:"unet",vae_name:"vae",sampler_name:"sampler",scheduler:"scheduler"},F0=["CozyGenDynamicInput","CozyGenImageInput","CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput","CozyGenChoiceInput"];function Cm(e){const[t,n]=c.useState(null),[r,l]=c.useState([]),[s,a]=c.useState({}),[i,u]=c.useState(!1),[d,f]=c.useState(null);c.useEffect(()=>{if(!e){n(null),l([]),a({});return}let x=!1;const j=new AbortController;async function S(){u(!0),f(null);try{typeof performance<"u"&&performance.mark&&performance.mark("cozygen:workflow:load")}catch{}try{const y=await yv(e,{signal:j.signal});if(x)return;for(const L in y){const A=y[L];A.class_type==="CozyGenImageInput"&&!A.inputs.param_name&&(A.inputs.param_name="Image Input"),y[L].id=L}n(y);const h=Object.values(y).filter(L=>F0.includes(L.class_type)),v=await Promise.all(h.map(async L=>{const A=L.class_type==="CozyGenDynamicInput"&&L.inputs.param_type==="DROPDOWN",E=L.class_type==="CozyGenChoiceInput";if(A||E){const W=L.inputs.param_name;let B=L.inputs.choice_type||L.properties&&L.properties.choice_type;if(!B&&A&&(B=_0[W]),B)try{const G=await vv(B,{signal:j.signal});L.inputs.choices=G.choices||[]}catch(G){(G==null?void 0:G.name)!=="AbortError"&&console.error(`Choices for ${W} failed`,G),L.inputs.choices=[]}}return L}));if(x)return;l(v);const N=C0(e),P={};v.forEach(L=>{const A=L.inputs.param_name;if(!A)return;if(N[A]!==void 0){P[A]=N[A];return}let E;if(["CozyGenDynamicInput","CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput"].includes(L.class_type)){if(E=L.inputs.default_value,L.class_type==="CozyGenIntInput"){const W=parseInt(E,10);E=Number.isNaN(W)?0:W}else if(L.class_type==="CozyGenFloatInput"){const W=parseFloat(E);E=Number.isNaN(W)?0:W}}else if(L.class_type==="CozyGenChoiceInput"){const W=L.inputs.choices||[];E=W.length?W[0]:""}else L.class_type,E="";P[A]=E}),a(P);try{typeof performance<"u"&&performance.measure&&(performance.mark("cozygen:workflow:ready"),performance.measure(`cozygen:workflow:ready:${e||"unknown"}`,"cozygen:workflow:load","cozygen:workflow:ready"))}catch{}}catch(y){if(x)return;console.error("Failed to load workflow",y),f(y),n(null),l([])}finally{x||u(!1)}}return S(),()=>{x=!0,j.abort()}},[e]);const p=c.useMemo(()=>r.filter(x=>x.class_type==="CozyGenImageInput"),[r]),g=p[0]||null,w=c.useCallback((x,j)=>{a(S=>{const y={...S,[x]:j};return e&&Or(e,y),y})},[e]);return{workflowData:t,dynamicInputs:r,imageInputs:p,primaryImageInput:g,formData:s,setFormData:a,handleFormChange:w,loading:i,error:d}}const cd="::";function ml(e){const t={};return Object.entries(e||{}).forEach(([n,r])=>{const l=String(n||"").trim();if(!l||typeof r!="string")return;const s=r.trim();s&&(t[l]=s)}),t}function Su(e){const t=new Map;return Object.entries(ml(e)).forEach(([n,r])=>{const l=n.toLowerCase();t.set(l,r),l.includes(cd)&&t.set(l.replace(cd,":"),r)}),t}function km(e,t){if(typeof e!="string"||!e.includes("$"))return e;const n=t instanceof Map?t:Su(t);return n.size?e.replace(/\$([a-z0-9_:-]+)\$/gi,(r,l)=>{const s=n.get(l.toLowerCase());return typeof s=="string"?s:r}):e}function P0(e,t){const n=t instanceof Map?t:Su(t);if(!n.size||!e||typeof e!="object")return e;let r=!1;const l={};return Object.entries(e).forEach(([s,a])=>{if(typeof a=="string"){const i=km(a,n);l[s]=i,i!==a&&(r=!0)}else l[s]=a}),r?l:e}function A0(e){return e?JSON.parse(JSON.stringify(e)):{}}function L0(e,t,n){const r=A0(e),l={...n||{}};if(!t||!Array.isArray(t))return{workflow:r,formData:l};for(const s of t){if(!s||!s.id||!s.inputs||!r[s.id])continue;const a=s.inputs.param_name;if(!a||s.class_type==="CozyGenImageInput")continue;let i=l[a];const u=r[s.id];if(!u||!u.inputs)continue;const d=s.class_type;i===void 0&&(d==="CozyGenChoiceInput"?i=s.inputs.value??s.inputs.default_choice??(s.inputs.choices&&s.inputs.choices[0])??"":i=s.inputs.default_value),i===void 0&&(i=""),l[a]=i,d==="CozyGenFloatInput"||d==="CozyGenIntInput"||d==="CozyGenStringInput"||d==="CozyGenDynamicInput"?u.inputs.default_value=i:d==="CozyGenChoiceInput"&&(u.inputs.value=i)}return{workflow:r,formData:l}}function Em({selectedWorkflow:e,workflowData:t,dynamicInputs:n,imageInputs:r,formData:l,setFormData:s,promptAliases:a=null}){const[i,u]=c.useState(!1),[d,f]=c.useState(!1),[p,g]=c.useState(0),[w,x]=c.useState(0),[j,S]=c.useState("Idle"),[y,h]=c.useState("idle"),[v,N]=c.useState([]),P=c.useRef({ts:0,value:0,max:0}),L=c.useRef(null),A=c.useRef(t),E=c.useRef(l),W=c.useRef(!1),B=c.useRef(0),G=c.useRef(0),J=c.useRef("idle"),Y=c.useRef(null),k=c.useRef(null);c.useEffect(()=>{A.current=t},[t]),c.useEffect(()=>{W.current=d},[d]),c.useEffect(()=>{B.current=p},[p]),c.useEffect(()=>{G.current=w},[w]),c.useEffect(()=>{J.current=y},[y]),c.useEffect(()=>{E.current=l},[l]);const _=()=>{Y.current&&(clearTimeout(Y.current),Y.current=null)},M=()=>{k.current&&(clearTimeout(k.current),k.current=null)},b=c.useCallback((K,z,O=null)=>{const m={ts:Date.now(),level:K||"info",message:String(z||""),extra:O||null};N(F=>{const H=[...F||[],m];return H.length>250?H.slice(H.length-250):H})},[]),C=c.useCallback(()=>N([]),[]),V=()=>{if(!(typeof window>"u"||typeof window.dispatchEvent!="function"))try{window.dispatchEvent(new CustomEvent("cozygen:queue-finished"))}catch{}},I=()=>{M(),k.current=setTimeout(()=>{W.current||(h("idle"),S("Idle"),g(0),x(0))},8e3)},R=c.useCallback(()=>{_(),u(!1),f(!1),g(0),x(0),S("Finished"),h("finished"),b("success","Finished"),I(),V()},[b]),T=c.useCallback((K="Error")=>{_(),u(!1),f(!1),S(K),h("error"),b("error",K||"Error"),I()},[b]);c.useEffect(()=>{_(),!(!d||!w||w<=0||p<w)&&(Y.current=setTimeout(()=>{const K=W.current,z=B.current,O=G.current,m=J.current;K&&O>0&&z>=O&&m!=="finished"&&m!=="error"&&R()},800))},[d,p,w,R]),c.useEffect(()=>{const K=()=>{const z=window.location.protocol==="https:"?"wss":"ws",O=window.location.host,m=yu(),F=`${z}://${O}/ws${m?`?token=${encodeURIComponent(m)}`:""}`,H=new WebSocket(F);L.current=H,H.onmessage=q=>{var je,ce,$;if(typeof q.data!="string")return;let le;try{le=JSON.parse(q.data)}catch{return}const oe=le.type;if(oe==="cozygen_batch_ready"){R();return}if(oe==="execution_success"||oe==="execution_finished"){W.current&&R();return}if(oe==="execution_error"||oe==="execution_interrupted"){b("error","Execution error"),T("Execution error");return}if(oe==="status"){const U=le.data||{},Z=U.status||U,se=Z.exec_info||U.exec_info||Z;if(se&&W.current){const ae=se.queue_remaining??se.queue_pending??se.queue_remaining_items??0;(se.queue_running??se.running??0)===0&&ae===0&&R()}return}if(oe==="executing"){M(),h("running");const U=(je=le.data)==null?void 0:je.node,Z=A.current;if(U&&Z&&Z[U]){const se=Z[U],ae=se.title||se.class_type||"Node";b("info",`Executing: ${ae}`,{nodeId:U}),S(`Executing: ${ae}`)}else b("info","Executing"),S("Executing");return}if(oe==="progress"){const U=((ce=le.data)==null?void 0:ce.value)??0,Z=(($=le.data)==null?void 0:$.max)??0;g(U),x(Z);const se=Date.now(),ae=P.current;se-ae.ts>2500&&(U!==ae.value||Z!==ae.max)&&Z>0&&(P.current={ts:se,value:U,max:Z},b("info",`Progress: ${U}/${Z}`));return}},H.onclose=()=>{setTimeout(K,1e3)}};return K(),()=>{_(),M(),L.current&&(L.current.onclose=null,L.current.close())}},[b,T,R]);const te=c.useCallback(async(K={})=>{if(!t)return;const{overrides:z=null,persistFormState:O=!0}=K||{};_(),M(),u(!0),f(!0),S("Queuing prompt"),h("queued"),g(0),x(0),b("info","Queuing prompt",{workflow:e||""});const m=E.current||{},F=z?{...m,...z||{}}:m,H=P0(F,a||{}),{workflow:q,formData:le}=L0(t,n||[],H||{}),oe={...le,...F};O&&e&&Or(e,oe),O&&s(oe);const je=r||[];for(const ce of je){if(!ce||!ce.id||!ce.inputs)continue;const $=ce.inputs.param_name;if(!$)continue;const U=oe[$];if(!U){alert(`Please upload or select an image for "${$}" before generating.`),T("Missing image input");return}q[ce.id]&&q[ce.id].inputs&&(q[ce.id].inputs.image_filename=U)}try{let ce=q;if(a){const $=U=>{if(typeof U=="string")return km(U,a);if(Array.isArray(U))return U.map(Z=>$(Z));if(U&&typeof U=="object"){const Z=Array.isArray(U)?[]:{};return Object.entries(U).forEach(([se,ae])=>{Z[se]=$(ae)}),Z}return U};try{ce=$(q)}catch{ce=q}}Kx({workflowName:e,workflow:ce,timestamp:Date.now()}),await em({prompt:ce}),b("info","Prompt queued")}catch(ce){console.error("Failed to queue prompt",ce),ce!=null&&ce.unauthorized?(b("error","Session expired. Please sign in again."),T("Session expired. Please sign in again."),window.location.hash="#/login"):(b("error","Error queuing prompt"),T("Error queuing prompt"))}},[t,n,r,a,e,s,T,b]);return{isLoading:i,progressValue:p,progressMax:w,statusText:j,statusPhase:y,handleGenerate:te,logEntries:v,clearLogs:C}}const O0="cozygen_field_order_v1";function R0(e,t){if(!e)return t;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:t}catch{return t}}function T0(){if(typeof window>"u")return{};try{return R0(window.localStorage.getItem(O0),{})}catch{return{}}}function I0(e){if(Array.isArray(e))return{order:e.filter(Boolean),hidden:{}};if(!e||typeof e!="object")return{order:[],hidden:{}};const t=Array.isArray(e.order)?e.order.filter(Boolean):[],n=e.hidden&&typeof e.hidden=="object"?e.hidden:{};return{order:t,hidden:n}}function M0(e){if(!e)return{order:[],hidden:{}};const n=T0()[e];return I0(n)}function _m(e,t){let n=Array.isArray(t)?t:[];if(!e||n.length===0)return n;const{order:r,hidden:l}=M0(e);if(r&&r.length){const s=new Map;n.forEach(i=>{var d;const u=(d=i==null?void 0:i.inputs)==null?void 0:d.param_name;u&&!s.has(u)&&s.set(u,i)});const a=[];r.forEach(i=>{const u=s.get(i);u&&(a.push(u),s.delete(i))}),n.forEach(i=>{var d;const u=(d=i==null?void 0:i.inputs)==null?void 0:d.param_name;if(!u){a.push(i);return}s.has(u)&&(a.push(i),s.delete(u))}),n=a}return n=n.filter(s=>{var i;const a=(i=s==null?void 0:s.inputs)==null?void 0:i.param_name;return a?!l[a]:!0}),n}const Fm="cozygen_prompt_aliases",Pm="cozygen_alias_categories",Am="cozygen_alias_category_list";function dd(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem(Fm);return e?JSON.parse(e)||{}:{}}catch{return{}}}function oa(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Fm,JSON.stringify(e||{}))}catch{}}function fd(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem(Pm);return e?JSON.parse(e)||{}:{}}catch{return{}}}function aa(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Pm,JSON.stringify(e||{}))}catch{}}function pd(){if(typeof window>"u")return[];try{const e=window.localStorage.getItem(Am);return Array.isArray(JSON.parse(e))?JSON.parse(e):[]}catch{return[]}}function ia(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Am,JSON.stringify(e||[]))}catch{}}function bu(){const[e,t]=c.useState(()=>dd()),[n,r]=c.useState(()=>fd()),[l,s]=c.useState(()=>pd()),[a,i]=c.useState(!1),[u,d]=c.useState(!1),[f,p]=c.useState(null),g=c.useCallback(async()=>{i(!0),p(null);try{const S=await jv(),y=ml((S==null?void 0:S.items)||S||{}),h=(S==null?void 0:S.categories)||{},v=Array.isArray(S==null?void 0:S.categoryList)?S.categoryList:[];t(y),r(h),s(v),oa(y),aa(h),ia(v)}catch(S){console.error("Failed to load prompt aliases",S),p(S);const y=ml(dd()),h=fd(),v=pd();t(y),r(h),s(v)}finally{i(!1)}},[]),w=c.useCallback(async S=>{const y=(S==null?void 0:S.items)||S||{},h=(S==null?void 0:S.categories)||n||{},v=Array.isArray(S==null?void 0:S.categoryList)&&S.categoryList.length?S.categoryList:l.length?l:Array.from(new Set(Object.values(h).filter(Boolean))),N=ml(y||{});d(!0),p(null);try{await Sv({items:N,categories:h,categoryList:v}),t(N),r(h),s(v),oa(N),aa(h),ia(v)}catch(P){throw console.error("Failed to save prompt aliases",P),p(P),oa(N),aa(h),ia(v),P}finally{d(!1)}},[n,l]);c.useEffect(()=>{g()},[g]);const x=c.useMemo(()=>{const S=Su(e),y=new Map(S);return Object.entries(n||{}).forEach(([h,v])=>{const N=String(v||"").trim();N&&(e!=null&&e[h])&&y.set(`${N}:${h}`,e[h])}),y},[e,n]),j=c.useMemo(()=>{const S=new Set,y=[];return x.forEach((h,v)=>{let N=v.includes("::")?v.replace("::",":"):v;const P=N.split(":");P.length>=3&&P[0]&&P[1]&&P[0].toLowerCase()===P[1].toLowerCase()&&(N=[P[0],...P.slice(2)].join(":"));const L=N.toLowerCase();S.has(L)||(S.add(L),y.push(N))}),y},[x]);return{aliases:e,aliasCategories:n,categoryList:l,aliasLookup:x,aliasOptions:j,loading:a,saving:u,error:f,refreshAliases:g,persistAliases:w}}const xi=[{id:"text-to-image",label:"Text to Image"},{id:"image-to-image",label:"Image to Image"},{id:"text-to-video",label:"Text to Video"},{id:"image-to-video",label:"Image to Video"}];xi.reduce((e,t)=>(e[t.id]=t.label,e),{});function md(e={}){return e&&typeof e=="object"&&e.formData&&typeof e.formData=="object"?{...e.formData}:{...e||{}}}function z0(e){if(!e||typeof e!="object")return{values:e||{},meta:{}};if(Object.prototype.hasOwnProperty.call(e,"values")){const t=e.values&&typeof e.values=="object"?e.values:{},n=md(t),r=e.meta&&typeof e.meta=="object"?e.meta:{};return{values:n,meta:r}}return{values:md(e),meta:{}}}function Lm(e={}){return Object.entries(e||{}).map(([t,n])=>({name:t,...z0(n)}))}const D0=c.memo(function({workflows:t,selectedWorkflow:n,onWorkflowChange:r,workflowData:l,inlinePresets:s,inlinePresetSel:a,onInlinePresetSelect:i,inlinePresetStatus:u}){return o.jsxs("div",{className:"context-bar",children:[o.jsx("div",{className:"context-chip",children:o.jsxs("select",{value:n||"",onChange:d=>r(d.target.value),className:"context-select","aria-label":"Workflow",children:[o.jsx("option",{value:"",children:"Select workflow"}),t.map(d=>o.jsx("option",{value:d,children:d},d))]})}),l&&s.length>0?o.jsxs("div",{className:"context-chip is-secondary",children:[o.jsxs("select",{value:a,onChange:d=>i(d.target.value),className:"context-select","aria-label":"Preset",children:[o.jsx("option",{value:"",children:"No preset"}),s.map(d=>o.jsx("option",{value:d.name,children:d.name},d.name))]}),u?o.jsx("span",{className:"context-status",children:u}):null]}):null]})}),$0=c.memo(function({workflowData:t,expandedPrompt:n,onOpenComposer:r,promptFieldName:l}){return t?o.jsxs("div",{className:"mt-3 rounded-xl border border-[#2A2E4A] bg-[#0B1226] px-3 py-3 text-[12px] text-[#9DA3FFCC] space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("span",{className:"font-semibold text-[#E5E7FF]",children:"Expanded prompt"}),o.jsx("button",{type:"button",onClick:()=>r(l),className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg border border-[#2A2E4A] bg-[#0F1A2F] text-[11px] font-medium text-[#E5E7FF] hover:border-[#5EF1D4] hover:bg-[#0F1A2F]/80 transition-colors",children:o.jsx("span",{children:"Compose"})})]}),o.jsx("div",{className:"max-h-32 overflow-hidden whitespace-pre-wrap break-words text-[#D8DEFF] text-[12px] border border-[#1D2440] rounded-lg px-2 py-2 bg-[#080E1D]",children:n||""})]}):null});function hd(){const{workflows:e=[],selectedWorkflow:t,selectWorkflow:n}=Sm(),{workflowData:r,dynamicInputs:l=[],imageInputs:s=[],formData:a,setFormData:i,handleFormChange:u}=Cm(t),{aliases:d,aliasCategories:f,aliasLookup:p,aliasOptions:g}=bu(),{isLoading:w,progressValue:x,progressMax:j,statusText:S,statusPhase:y,handleGenerate:h,logEntries:v,clearLogs:N}=Em({selectedWorkflow:t,workflowData:r,dynamicInputs:l,imageInputs:s,formData:a,setFormData:i,promptAliases:p}),P=c.useRef(null),L=c.useRef(null),[A,E]=c.useState([]),[W,B]=c.useState(""),[G,J]=c.useState(""),Y=c.useRef(null),k=c.useRef(new Map),[_]=c.useState({key:0,collapsed:!0}),[M,b]=c.useState(()=>{if(typeof window>"u")return"";try{return window.localStorage.getItem("cozygen_last_param")||""}catch{return""}}),[C,V]=c.useState(null),I=(C==null?void 0:C.name)||"",R=c.useCallback(()=>V(null),[]),[T,te]=c.useState(!1),[K,z]=c.useState("prompt"),[O,m]=c.useState(!1),[F,H]=c.useState([]),q=c.useRef(new Map),le=c.useDeferredValue(a),oe=c.useMemo(()=>{const ee=[];return Object.entries(d||{}).forEach(([ie,ve])=>{const xe=String(ie).split("::"),Be=xe.length>1,Ke=f&&f[ie]||(Be?xe[0]:""),dt=Be?xe.slice(1).join("::"):ie;ee.push({key:ie,name:dt,category:Ke,text:ve,token:Ke?`${Ke}:${dt}`:dt})}),ee},[d,f]);c.useEffect(()=>{if(y==="finished"&&typeof window<"u"){try{window.localStorage.setItem("cozygen_gallery_pending","1")}catch{}window.dispatchEvent(new Event("cozygen:gallery-pending"))}},[y]);const je=c.useMemo(()=>{if(typeof(le==null?void 0:le.prompt)=="string")return"prompt";const ee=Object.entries(le||{}).find(([,ie])=>typeof ie=="string"&&ie.includes("$"));return ee?ee[0]:""},[le]),ce=c.useMemo(()=>{if(!je)return"";const ee=(le==null?void 0:le[je])||"";if(!ee||!p)return ee;try{return ee.replace(/\$([a-z0-9_:-]+)\$/gi,(ie,ve)=>{const xe=p.get(ve.toLowerCase());return typeof xe=="string"?xe:ie})}catch{return ee}},[le,p,je]),$=c.useCallback(ee=>{!ee||ee===t||(t&&Or(t,a||{},{immediate:!0}),n(ee))},[a,t,n]),U=c.useCallback(ee=>{ee&&i(ie=>{const ve={...ie||{},...ee||{}};return t&&Or(t,ve),ve})},[t,i]),Z=c.useCallback((ee="prompt")=>{z(ee),te(!0)},[]),se=c.useCallback(ee=>{K&&u(K,ee)},[K,u]),ae=c.useMemo(()=>{if(typeof(a==null?void 0:a.prompt)=="string")return"prompt";const ee=["prompt","positive_prompt","text","positive"];for(const xe of ee)if(typeof(a==null?void 0:a[xe])=="string")return xe;const ie=Object.entries(a||{}).find(([,xe])=>typeof xe=="string"&&xe.includes("$"));if(ie)return ie[0];const ve=Object.entries(a||{}).find(([,xe])=>typeof xe=="string");return(ve==null?void 0:ve[0])||"prompt"},[a]),fe=c.useCallback(()=>{Z(ae||"prompt")},[Z,ae]);c.useEffect(()=>{const ee=new AbortController;let ie=!1;const ve=5*60*1e3;return(async()=>{var dt;if(!t){E([]),B("");return}const Be=k.current.get(t),Ke=Date.now();Be&&Ke-Be.ts<ve&&(E(Be.items),B(ze=>{var ft;return ze&&Be.items.some(Vt=>Vt.name===ze)?ze:((ft=Be.items[0])==null?void 0:ft.name)||""}));try{const ze=await nm(t,{signal:ee.signal}),ft=Lm((ze==null?void 0:ze.items)||{});if(ie||ee.signal.aborted)return;k.current.set(t,{items:ft,ts:Date.now()}),E(ft);const Vt=((dt=ft[0])==null?void 0:dt.name)||"";B(tr=>tr&&ft.some(We=>We.name===tr)?tr:Vt)}catch(ze){if((ze==null?void 0:ze.name)==="AbortError")return;ie||(E([]),B(""))}})(),()=>{ie=!0,ee.abort()}},[t]);const he=c.useCallback(ee=>{clearTimeout(Y.current),J(ee),ee&&(Y.current=setTimeout(()=>J(""),1600))},[]);c.useEffect(()=>()=>{Y.current&&clearTimeout(Y.current)},[]);const ge=c.useCallback(ee=>{B(ee);const ie=A.find(ve=>ve.name===ee);ie!=null&&ie.values&&(U(ie.values),he(`Applied "${ee}"`))},[A,U,he]),Le=c.useMemo(()=>_m(t,l),[t,l]),Ze=s||[],et=!!(r&&t),D=Ze.length>0,X=r?D?`${Ze.length} slots`:"No inputs":"Waiting",ne=r?"":"Waiting",pe=c.useCallback((ee,ie)=>{const ve=q.current;ie&&ee&&ve.set(ee,ie);const xe=F.length?F:(ie==null?void 0:ie.order)||[],Be=xe.length,Ke=Be>0?xe.indexOf(ee):-1,dt=Ke>0?xe[Ke-1]:null,ze=Ke>=0&&Ke<Be-1?xe[Ke+1]:null,ft=dt?ve.get(dt):null,Vt=ze?ve.get(ze):null;return{...ie,index:Ke>=0?Ke:0,total:Be,onPrev:ft?()=>V(pe(dt,ft)):null,onNext:Vt?()=>V(pe(ze,Vt)):null,onRender:h}},[F,h]),Ce=c.useCallback(ee=>{const ie=ee||[];H(ve=>ve.length===ie.length&&ve.every((xe,Be)=>xe===ie[Be])?ve:ie)},[]),Te=c.useCallback(ee=>{const ie=ee||"";b(ie),E0(ie)},[]),Ue=c.useCallback(ee=>{ee!=null&&ee.name&&V(pe(ee.name,ee))},[pe]),st=c.useCallback(()=>{var ee;return(ee=C==null?void 0:C.render)==null?void 0:ee.call(C,a)},[C,a]);return c.useEffect(()=>{const ee=()=>{!et||w||h()};return window.addEventListener("cozygen:request-render",ee),()=>window.removeEventListener("cozygen:request-render",ee)},[h,et,w]),c.useEffect(()=>{const ee=ie=>{var xe;const ve=(xe=ie==null?void 0:ie.detail)==null?void 0:xe.fieldName;if(typeof ve=="string"&&ve.trim()){Z(ve.trim());return}fe()};return window.addEventListener("cozygen:open-composer",ee),()=>window.removeEventListener("cozygen:open-composer",ee)},[Z,fe]),c.useEffect(()=>{const ee=y==="queued"||y==="running"||w;try{window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:ee}}))}catch{}},[y,w]),!e||e.length===0?o.jsx("div",{className:"page-shell",children:o.jsx("div",{className:"neon-card px-3 py-3 sm:px-4 sm:py-4",children:o.jsx("p",{className:"text-sm text-[#9DA3FFCC]",children:"No workflows found. Drop a workflow file in CozyGen and refresh."})})}):o.jsxs("div",{className:"page-shell page-stack has-dock",children:[o.jsxs(id,{kicker:"Parameters",title:" Controls",meta:ne,bodyClassName:"control-shell",defaultOpen:!0,variant:"bare",children:[o.jsx(D0,{workflows:e,selectedWorkflow:t,onWorkflowChange:$,workflowData:r,inlinePresets:A,inlinePresetSel:W,onInlinePresetSelect:ge,inlinePresetStatus:G}),o.jsxs("div",{className:"run-status-strip",children:[o.jsxs("div",{className:"run-status-left",children:[o.jsx("div",{className:`run-status-dot is-${y||"idle"}`,"aria-hidden":"true"}),o.jsxs("div",{className:"run-status-text",children:[o.jsx("div",{className:"run-status-phase",children:y||"idle"}),o.jsx("div",{className:"run-status-msg",children:S||"Idle"})]})]}),o.jsxs("div",{className:"run-status-actions",children:[w&&j>0?o.jsx("div",{className:"run-status-meter","aria-label":"Progress",children:o.jsx("div",{className:"run-status-meter-fill",style:{width:`${Math.max(0,Math.min(100,Math.round((x||0)/j*100)))}%`}})}):null,o.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>m(!0),children:"View logs"})]})]}),r?o.jsx(x0,{workflowName:t,dynamicInputs:Le,formData:a,onFormChange:u,parameterSectionRef:P,compactControls:!0,collapseAllState:_,lastEditedParam:M,spotlightName:I,onCloseSpotlight:R,onVisibleParamsChange:Ce,aliasOptions:g,aliasCatalog:oe,onOpenComposer:Z,onParamEdited:Te,onSpotlight:Ue}):o.jsxs("div",{className:"empty-state-inline",children:[o.jsx("span",{className:"empty-state-arrow",children:""}),o.jsx("span",{children:"Select a workflow above to get started"})]}),o.jsx($0,{workflowData:r,expandedPrompt:ce,onOpenComposer:Z,promptFieldName:ae})]}),D?o.jsx(id,{ref:L,className:"scroll-mt-24 is-compact",kicker:"Assets",title:" Images",meta:X,defaultOpen:!1,variant:"bare",children:r?o.jsx("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:Ze.map(ee=>o.jsx(s0,{input:ee,value:a[ee.inputs.param_name]||"",onFormChange:u},ee.id))}):null}):null,o.jsx("section",{className:"dock-panel",children:o.jsx(e0,{busy:w,progressValue:x,progressMax:j,statusText:S,statusPhase:y,primaryLabel:"Render",onPrimary:h,primaryDisabled:!et})}),o.jsx(o0,{open:!!C,onClose:R,title:C==null?void 0:C.label,description:C==null?void 0:C.description,render:st,index:(C==null?void 0:C.index)??0,total:(C==null?void 0:C.total)??0,onPrev:(C==null?void 0:C.onPrev)||null,onNext:(C==null?void 0:C.onNext)||null,onRender:(C==null?void 0:C.onRender)||null,children:null}),o.jsx(a0,{open:T,onClose:()=>te(!1),value:(a==null?void 0:a[K])||"",onChange:se,aliasOptions:g,aliasCatalog:oe,aliasLookup:p,fieldLabel:K}),o.jsx(w0,{open:O,onClose:()=>m(!1),logs:v,onClear:N})]})}function U0({subfolder:e,crumbs:t=[],dirChips:n=[],onBack:r,onRoot:l,onCrumb:s,onSelectDir:a}){return o.jsxs("div",{className:"space-y-3 text-[#F8F4FF]",children:[o.jsx("div",{className:"flex items-center justify-start gap-2 flex-wrap"}),o.jsx("div",{className:"flex items-center gap-2 flex-wrap text-[#C3C7FF]",role:"navigation","aria-label":"Gallery path",children:t.map((i,u)=>o.jsxs(c.Fragment,{children:[o.jsx("span",{className:"text-[#6A6FA8]",children:"/"}),o.jsx("button",{type:"button",className:"gallery-chip-btn",onClick:()=>s==null?void 0:s(i.path),"aria-current":u===t.length-1?"page":void 0,children:i.name})]},i.path||i.name||u))}),n.length>0?o.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:n.map(i=>o.jsx("button",{type:"button",className:"gallery-chip-btn",onClick:()=>a==null?void 0:a(i.subfolder),children:i.filename||i.subfolder||"Collection"},i.subfolder||i.filename))}):null]})}const B0=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e),W0=({src:e,poster:t,autoPlay:n})=>{const r=c.useRef(null);return c.useEffect(()=>{const l=r.current;l&&(l.pause(),l.currentTime=0,l.load())},[e]),c.useEffect(()=>{const l=r.current;if(!l)return;let s;const a=()=>{const u=l.play();u&&typeof u.catch=="function"&&u.catch(()=>{})},i=()=>{l.pause()};return n?typeof window<"u"&&"IntersectionObserver"in window?(s=new IntersectionObserver(d=>{d.forEach(f=>{f.isIntersecting?a():i()})},{threshold:.65}),s.observe(l)):a():(i(),l.currentTime=0),()=>{s&&s.disconnect(),i()}},[n,e]),e?o.jsx("video",{ref:r,src:e,poster:t||void 0,muted:!0,playsInline:!0,loop:!0,preload:"metadata",className:"w-full h-auto max-h-[80vh] rounded-2xl object-contain bg-black/40"}):o.jsx("div",{className:"flex items-center justify-center py-16 text-[11px] text-[#9DA3FFCC]",children:"No preview available"})},gd={contentVisibility:"auto",containIntrinsicSize:"260px 320px"};function V0({item:e,onSelect:t,variant:n="grid",autoPlay:r=!1}){if(!e)return null;const l=e.type==="directory",s=e.filename||"",a=e.subfolder||"",i=s||a||"Unknown",u=()=>{t&&t(e)},d=n==="feed"?768:384,f=!l&&s?`/cozygen/thumb?type=output&subfolder=${encodeURIComponent(a)}&filename=${encodeURIComponent(s)}&w=${d}`:null,p=!l&&s?(()=>{const w=e.type&&e.type!=="directory"?e.type:"output",x=e.mtime?`&v=${encodeURIComponent(String(e.mtime))}`:"";return`/view?filename=${encodeURIComponent(s)}&subfolder=${encodeURIComponent(a)}&type=${encodeURIComponent(w)}${x}`})():null,g=B0(s);if(l)return o.jsx("button",{type:"button",onClick:u,className:"group flex flex-col items-start justify-between rounded-xl border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-left hover:border-[#6B5BFF] hover:bg-[#0B0E27] transition-colors",style:gd,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-7 w-7 rounded-lg bg-gradient-to-br from-[#6B5BFF] to-[#FF4F9A] opacity-80 group-hover:opacity-100 flex items-center justify-center text-[11px] text-white",children:""}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-[11px] font-medium text-[#E5E7FF] truncate",children:i}),o.jsx("div",{className:"text-[10px] text-[#9DA3FFCC] truncate",children:"Collection"})]})]})});if(n==="feed"){const w={contentVisibility:"auto",containIntrinsicSize:"520px 720px"};return o.jsxs("div",{className:"flex flex-col gap-2",style:w,children:[o.jsxs("button",{type:"button",onClick:u,className:"group relative w-full overflow-hidden rounded-2xl bg-[#020312]",children:[o.jsx("div",{className:"relative w-full flex items-center justify-center bg-[#020312]",children:g?o.jsx(W0,{src:p,poster:f,autoPlay:r}):f?o.jsx("img",{src:f,alt:i,className:"w-full h-auto max-h-[80vh] rounded-2xl object-contain bg-black/40",loading:"lazy",decoding:"async"}):o.jsx("div",{className:"flex items-center justify-center py-16 text-[11px] text-[#9DA3FFCC]",children:"No preview available"})}),o.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-[#05071680] opacity-0 group-hover:opacity-100 transition-opacity"}),g&&o.jsx("div",{className:"pointer-events-none absolute left-2 top-2 rounded-full bg-[#050716CC] px-2 py-[1px] text-[10px] text-[#CFFAFE] border border-[#3EF0FF80]",children:"Video"})]}),o.jsx("div",{className:"flex items-center justify-between text-[11px] text-[#9DA3FFCC]",children:o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"truncate text-[#E5E7FF]",children:i}),a&&o.jsx("div",{className:"truncate text-[10px] text-[#6A6FA8]",children:a})]})})]})}return o.jsxs("button",{type:"button",onClick:u,className:"group relative w-full overflow-hidden rounded-xl border border-[#2A2E4A] bg-[#050716] hover:border-[#6B5BFF] hover:bg-[#0B0E27] transition-colors",style:gd,children:[o.jsxs("div",{className:"relative w-full aspect-[4/5] bg-[#020312]",children:[f?o.jsx("img",{src:f,alt:i,className:"w-full h-full object-cover",loading:"lazy",decoding:"async"}):o.jsx("div",{className:"flex items-center justify-center h-full text-[10px] text-[#9DA3FFCC] px-2 text-center",children:"No preview"}),g&&o.jsx("div",{className:"pointer-events-none absolute left-2 top-2 rounded-full bg-[#050716E0] px-2 py-[2px] text-[10px] text-[#CFFAFE] border border-[#3EF0FF80]",children:"Video"})]}),o.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 bg-gradient-to-t from-[#050716CC] via-[#05071699] to-transparent px-2 py-1.5",children:o.jsxs("div",{className:"flex items-center justify-between gap-2",children:[o.jsx("div",{className:"text-[10px] text-[#E5E7FF] truncate",children:i}),g&&o.jsx("span",{className:"text-[9px] uppercase tracking-[0.16em] text-[#CFFAFE]",children:"Vid"})]})})]})}const yd=c.memo(V0);ko.setAppElement("#root");const H0=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e),G0=e=>{if(!e)return"";const t=e.filename||"",n=e.subfolder||"",r=e.type||"output",l=e.mtime?`&v=${encodeURIComponent(String(e.mtime))}`:"";return`/view?filename=${encodeURIComponent(t)}&subfolder=${encodeURIComponent(n)}&type=${encodeURIComponent(r)}${l}`};function K0({isOpen:e,media:t,onClose:n,onPrev:r,onNext:l}){if(!t)return null;const s=G0(t),a=t.subfolder||"Gallery",i=H0(t.filename);return o.jsx(ko,{isOpen:e,onRequestClose:n,overlayClassName:"react-modal-overlay",className:"react-modal-content",contentLabel:"Preview",children:o.jsxs("div",{className:"media-viewer-panel",children:[o.jsxs("header",{className:"media-viewer-head",children:[o.jsxs("div",{className:"media-viewer-meta",children:[o.jsx("div",{className:"media-viewer-title",title:t.filename,children:t.filename}),o.jsxs("div",{className:"media-viewer-sub",children:[o.jsx("span",{className:"media-chip",children:a}),o.jsx("span",{className:`media-chip ${i?"is-clip":"is-still"}`,children:i?"Video":"Image"})]})]}),o.jsxs("div",{className:"media-viewer-actions",children:[o.jsx("button",{type:"button",className:"media-btn ghost",onClick:r,"aria-label":"Previous item",children:""}),o.jsx("button",{type:"button",className:"media-btn ghost",onClick:l,"aria-label":"Next item",children:""}),o.jsx("a",{href:s,target:"_blank",rel:"noreferrer",className:"media-btn",children:"Open"}),o.jsx("button",{type:"button",className:"media-btn solid",onClick:n,children:"Close"})]})]}),o.jsxs("div",{className:"media-viewer-stage",children:[o.jsx("button",{type:"button",className:"media-stage-nav is-left",onClick:r,"aria-label":"Previous",children:""}),o.jsx("div",{className:"media-viewer-frame",children:i?o.jsx("video",{src:s,controls:!0,className:"media-viewer-media",autoPlay:!0}):o.jsx("img",{src:s,alt:t.filename,className:"media-viewer-media"})}),o.jsx("button",{type:"button",className:"media-stage-nav is-right",onClick:l,"aria-label":"Next",children:""})]})]})})}const Q0=(e="")=>e.startsWith("."),Y0=(e="")=>/\.(png|jpe?g|gif|webp|bmp|tif?f)$/i.test(e),q0=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e);function J0(){const e=(R,T="")=>{try{return typeof window<"u"&&localStorage.getItem(R)||T}catch{return T}},t=(R,T)=>{try{typeof window<"u"&&localStorage.setItem(R,T)}catch{}},[n,r]=c.useState(e("galleryPath","")),[l,s]=c.useState([]),[a,i]=c.useState(!1),[u,d]=c.useState(1),[f,p]=c.useState(1),[g,w]=c.useState(()=>{const R=e("galleryPageSize","30"),T=parseInt(R,10);return Number.isFinite(T)?T:30}),[x,j]=c.useState("all"),[S,y]=c.useState(!1),[h,v]=c.useState(""),[N,P]=c.useState(()=>e("galleryRecursive","0")==="1"),[L,A]=c.useState(0);c.useEffect(()=>{let R=!1;const T=new AbortController;return(async()=>{i(!0);try{typeof performance<"u"&&performance.mark&&performance.mark("cozygen:gallery:fetch")}catch{}try{const K=await tm(n,u,g,S,N,x,L,{signal:T.signal});if(R)return;K&&K.items?(s(K.items),p(K.total_pages||1)):(s([]),p(1));try{typeof performance<"u"&&performance.measure&&(performance.mark("cozygen:gallery:ready"),performance.measure("cozygen:gallery:first-paint","cozygen:gallery:fetch","cozygen:gallery:ready"))}catch{}}catch(K){if((K==null?void 0:K.name)==="AbortError")return;console.error("Failed to load gallery",K),R||(s([]),p(1))}finally{!R&&!T.signal.aborted&&i(!1)}})(),t("galleryPath",n),t("galleryPageSize",String(g)),()=>{R=!0,T.abort()}},[n,u,g,L,S,N,x]);const E=c.useMemo(()=>{if(!n)return[];const R=n.replace(/\\/g,"/").split("/").filter(Boolean),T=[];for(let te=0;te<R.length;te++)T.push({name:R[te],path:R.slice(0,te+1).join("/")});return T},[n]),W=c.useMemo(()=>l.filter(R=>R.type==="directory").map(R=>({filename:R.filename,subfolder:R.subfolder})),[l]),B=c.useMemo(()=>{const R=(h||"").trim().toLowerCase();return l.filter(T=>{const te=(T.filename||"").toLowerCase();return!(!S&&Q0(te)||T.type!=="directory"&&(x==="image"&&!Y0(te)||x==="video"&&!q0(te))||R&&!te.includes(R))})},[l,S,x,h]),G=c.useMemo(()=>B.filter(R=>R.type!=="directory"),[B]),J=c.useCallback(()=>{if(!n)return;const R=n.replace(/\\/g,"/").lastIndexOf("/"),T=R===-1?"":n.slice(0,R);r(T),d(1)},[n]),Y=c.useCallback(()=>{r(""),d(1)},[]),k=c.useCallback(R=>{r(R||""),d(1)},[]),_=c.useCallback(R=>{r(R),d(1)},[]),M=c.useCallback(R=>{const T=parseInt(String(R),10)||30;w(T),d(1)},[]),b=c.useCallback(R=>{j(R),d(1)},[]),C=c.useCallback(R=>{const T=!!R;P(T),d(1),t("galleryRecursive",T?"1":"0")},[]),V=c.useCallback(R=>{v(R),d(1)},[]),I=c.useCallback(()=>{A(R=>R+1)},[]);return c.useEffect(()=>{const R=()=>I();return typeof window<"u"&&window.addEventListener&&window.addEventListener("cozygen:queue-finished",R),()=>{typeof window<"u"&&window.removeEventListener&&window.removeEventListener("cozygen:queue-finished",R)}},[I]),c.useEffect(()=>{if(typeof window>"u")return;let R=!1,T,te;const K=()=>{te&&(clearTimeout(te),te=null)},z=(m=8e3)=>{K(),te=window.setTimeout(()=>{R||(I(),z(8e3))},m)};return(()=>{if(!("EventSource"in window)){z();return}const m=new URLSearchParams({subfolder:n||"",recursive:N?"1":"0",show_hidden:S?"1":"0"});T=new EventSource(`/cozygen/api/gallery/stream?${m.toString()}`),T.onmessage=()=>{R||I()},T.onerror=()=>{T&&(T.close(),T=null),z()}})(),()=>{R=!0,K(),T&&(T.close(),T=null)}},[n,N,S,I]),{path:n,items:l,loading:a,page:u,totalPages:f,perPage:g,kind:x,showHidden:S,query:h,recursive:N,crumbs:E,dirChips:W,filtered:B,mediaItems:G,setPage:d,setPerPage:M,setShowHidden:y,setQuery:V,setKind:b,setRecursive:C,goBack:J,goRoot:Y,goToPath:k,selectDir:_,refresh:I}}function X0(e){const[t,n]=c.useState(!1),[r,l]=c.useState(null);c.useEffect(()=>{if(!e||e.length===0){l(null),n(!1);return}l(f=>f==null?f:f>=e.length?e.length-1:f)},[e]);const s=c.useCallback(f=>{if(!e||!e.length||!f)return;const p=e.indexOf(f);p!==-1&&(l(p),n(!0))},[e]),a=c.useCallback(()=>{n(!1),l(null)},[]),i=c.useCallback(()=>{!e||!e.length||l(f=>f==null?f:(f+1)%e.length)},[e]),u=c.useCallback(()=>{!e||!e.length||l(f=>f==null?f:(f-1+e.length)%e.length)},[e]),d=r!=null&&r>=0&&e&&r<e.length?e[r]:null;return{viewerOpen:t,viewerIndex:r,currentMedia:d,open:s,close:a,next:i,prev:u,setViewerOpen:n}}const vd="cozygen_gallery_view_mode",xd="cozygen_gallery_feed_autoplay";function Z0(e,t){const n=c.useRef(null),[r,l]=c.useState(0),[s,a]=c.useState({width:0,cols:0,top:0,viewport:typeof window<"u"&&window.innerHeight||800}),i=g=>{if(!g||typeof window>"u")return null;let w=g.parentElement;for(;w;){const x=window.getComputedStyle(w);if(x.overflowY==="auto"||x.overflowY==="scroll")return w;w=w.parentElement}return window};c.useEffect(()=>{if(!t)return;const g=n.current;if(!g||typeof window>"u"||typeof ResizeObserver>"u")return;const w=i(g)||window,x=()=>{const h=g.getBoundingClientRect(),v=h.width||g.clientWidth||1,N=Math.max(1,Math.floor(v/160)),P=w===window?window.scrollY||0:w.scrollTop||0,L=w===window?{top:0}:w.getBoundingClientRect(),A=w===window?h.top+(window.scrollY||0):h.top-L.top+P,E=w===window?window.innerHeight||800:w.clientHeight||800;a(W=>W.width===v&&W.cols===N&&W.top===A&&W.viewport===E?W:{width:v,cols:N,top:A,viewport:E}),l(P)};x();const j=new ResizeObserver(()=>x());j.observe(g),window.addEventListener("resize",x);let S=!1;const y=()=>{S||(S=!0,window.requestAnimationFrame(()=>{S=!1;const h=w===window?window.scrollY||0:w.scrollTop||0;l(h)}))};return w.addEventListener("scroll",y,{passive:!0}),()=>{j.disconnect(),window.removeEventListener("resize",x),w.removeEventListener("scroll",y)}},[t]);const u=t&&s.cols>0&&e.length>60,{visibleItems:d,topSpacer:f,bottomSpacer:p}=c.useMemo(()=>{if(!u)return{visibleItems:e,topSpacer:0,bottomSpacer:0};const g=s.width/s.cols,w=Math.max(180,Math.ceil(g*1.25)+32),x=Math.ceil(e.length/s.cols),j=Math.max(0,r-s.top),S=Math.max(0,Math.floor(j/w)-2),y=Math.min(x,Math.ceil((j+s.viewport)/w)+2),h=S*s.cols,v=Math.min(e.length,y*s.cols);return{visibleItems:e.slice(h,v),topSpacer:S*w,bottomSpacer:Math.max(0,(x-y)*w)}},[e,s,r,u]);return{containerRef:n,visibleItems:d,topSpacer:f,bottomSpacer:p,virtualized:u}}function ew(){const{path:e,loading:t,page:n,totalPages:r,perPage:l,kind:s,showHidden:a,recursive:i,crumbs:u,dirChips:d,filtered:f,mediaItems:p,setPage:g,setPerPage:w,setShowHidden:x,setKind:j,setRecursive:S,goBack:y,goRoot:h,goToPath:v,selectDir:N,refresh:P}=J0(),{viewerOpen:L,currentMedia:A,open:E,close:W,next:B,prev:G}=X0(p),[J,Y]=c.useState(()=>{if(typeof window>"u")return"grid";const m=window.localStorage.getItem(vd);return m==="feed"||m==="grid"?m:"grid"}),[k,_]=c.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(xd)==="true");c.useEffect(()=>{try{window.localStorage.setItem(vd,J)}catch{}},[J]),c.useEffect(()=>{try{window.localStorage.setItem(xd,k?"true":"false")}catch{}},[k]);const M=c.useCallback(m=>{if(m.type==="directory"){N(m.subfolder);return}E(m)},[E,N]),b=J==="grid",[C,V]=c.useState(!1),I=m=>m.type==="directory"?`dir:${m.subfolder||m.filename}`:`${m.subfolder||""}|${m.filename}`;c.useEffect(()=>{try{window.localStorage.setItem("cozygen_gallery_pending","0")}catch{}window.dispatchEvent(new Event("cozygen:gallery-viewed"))},[]);const R=t?"Loading":`${f.length} items`,{containerRef:T,visibleItems:te,topSpacer:K,bottomSpacer:z,virtualized:O}=Z0(f,b);return o.jsxs("div",{className:"page-shell page-stack",children:[o.jsx("div",{className:"screen-sticky rounded-2xl",children:o.jsxs("div",{className:"px-3 pt-2 pb-3 space-y-3",children:[o.jsx(U0,{subfolder:e,crumbs:u,dirChips:d,onBack:y,onRoot:h,onCrumb:m=>v(m),onSelectDir:m=>N(m)}),o.jsxs("div",{className:"md:hidden flex items-center justify-between gap-2",children:[o.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>V(!0),children:"Filters"}),o.jsxs("div",{className:"gallery-view-toggle",role:"group","aria-label":"View mode",children:[o.jsx("button",{type:"button",className:J==="grid"?"is-active":"",onClick:()=>Y("grid"),"aria-pressed":J==="grid",title:"Grid view",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[o.jsx("rect",{x:"1",y:"1",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"9",y:"1",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"1",y:"9",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"9",y:"9",width:"6",height:"6",rx:"1"})]})}),o.jsx("button",{type:"button",className:J==="feed"?"is-active":"",onClick:()=>Y("feed"),"aria-pressed":J==="feed",title:"Feed view",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[o.jsx("rect",{x:"2",y:"1",width:"12",height:"5",rx:"1"}),o.jsx("rect",{x:"2",y:"8",width:"12",height:"5",rx:"1"})]})})]})]}),o.jsxs("div",{className:"gallery-toolbar hidden md:flex",children:[o.jsx("div",{className:"gallery-toolbar-left",children:o.jsx("div",{className:"gallery-pills",role:"group","aria-label":"Filter by type",children:[{key:"all",label:"All"},{key:"image",label:"Images"},{key:"video",label:"Videos"}].map(m=>o.jsx("button",{type:"button",className:`gallery-pill ${s===m.key?"is-active":""}`,onClick:()=>j(m.key),"aria-pressed":s===m.key,children:m.label},m.key))})}),o.jsxs("div",{className:"gallery-toolbar-right",children:[o.jsxs("div",{className:"gallery-view-toggle",role:"group","aria-label":"View mode",children:[o.jsx("button",{type:"button",className:J==="grid"?"is-active":"",onClick:()=>Y("grid"),"aria-pressed":J==="grid",title:"Grid view",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[o.jsx("rect",{x:"1",y:"1",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"9",y:"1",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"1",y:"9",width:"6",height:"6",rx:"1"}),o.jsx("rect",{x:"9",y:"9",width:"6",height:"6",rx:"1"})]})}),o.jsx("button",{type:"button",className:J==="feed"?"is-active":"",onClick:()=>Y("feed"),"aria-pressed":J==="feed",title:"Feed view",children:o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[o.jsx("rect",{x:"2",y:"1",width:"12",height:"5",rx:"1"}),o.jsx("rect",{x:"2",y:"8",width:"12",height:"5",rx:"1"})]})})]}),o.jsxs("div",{className:"gallery-options",children:[o.jsx("button",{type:"button",className:`gallery-option-btn ${i?"is-active":""}`,onClick:()=>S(m=>!m),title:i?"Showing subfolders":"This folder only",children:i?"":""}),o.jsx("button",{type:"button",className:`gallery-option-btn ${a?"is-active":""}`,onClick:()=>x(m=>!m),title:a?"Showing hidden":"Hiding hidden",children:a?"":""}),J==="feed"&&o.jsx("button",{type:"button",className:`gallery-option-btn ${k?"is-active":""}`,onClick:()=>_(m=>!m),title:k?"Autoplay on":"Autoplay off",children:k?"":""}),o.jsx("button",{type:"button",className:"gallery-option-btn",onClick:P,title:"Refresh",children:""})]})]})]}),o.jsxs("div",{className:"gallery-pagination hidden md:flex",children:[o.jsx("div",{className:"gallery-pagination-info",children:t?o.jsx("span",{className:"gallery-loading-text",children:"Loading"}):o.jsx("span",{children:R})}),o.jsxs("div",{className:"gallery-pagination-controls",children:[o.jsx("button",{type:"button",className:"gallery-page-btn",onClick:()=>g(m=>Math.max(1,m-1)),disabled:n<=1||t,"aria-label":"Previous page",children:""}),o.jsxs("span",{className:"gallery-page-indicator",children:[n," / ",r]}),o.jsx("button",{type:"button",className:"gallery-page-btn",onClick:()=>g(m=>m<r?m+1:m),disabled:n>=r||t,"aria-label":"Next page",children:""}),o.jsxs("select",{value:l,onChange:m=>w(parseInt(m.target.value,10)||30),className:"gallery-page-size","aria-label":"Items per page",children:[o.jsx("option",{value:15,children:"15"}),o.jsx("option",{value:30,children:"30"}),o.jsx("option",{value:60,children:"60"}),o.jsx("option",{value:120,children:"120"})]})]})]})]})}),t&&f.length===0?o.jsx("div",{className:"gallery-grid-responsive",children:Array.from({length:8}).map((m,F)=>o.jsxs("div",{className:"gallery-skeleton-item",children:[o.jsx("div",{className:"gallery-skeleton-thumb skeleton"}),o.jsx("div",{className:"gallery-skeleton-label skeleton skeleton-text"})]},F))}):f.length===0&&!t?o.jsxs("div",{className:"gallery-empty",children:[o.jsx("div",{className:"gallery-empty-icon",children:""}),o.jsx("div",{className:"gallery-empty-title",children:"No media found"}),o.jsx("div",{className:"gallery-empty-desc",children:s!=="all"?`No ${s}s match your filters. Try selecting "All" or adjusting your search.`:"This folder is empty. Render something new or navigate to a different folder."})]}):b?o.jsx("div",{className:"w-full overflow-hidden",children:o.jsxs("div",{className:"gallery-grid-responsive",ref:T,children:[O&&K>0?o.jsx("div",{"aria-hidden":!0,style:{gridColumn:"1 / -1",height:`${K}px`}}):null,te.map(m=>o.jsx(yd,{item:m,onSelect:M,variant:"grid",autoPlay:!1},I(m))),O&&z>0?o.jsx("div",{"aria-hidden":!0,style:{gridColumn:"1 / -1",height:`${z}px`}}):null]})}):o.jsx("div",{className:"flex flex-col gap-4 items-center",children:f.filter(m=>m.type!=="directory").map(m=>o.jsx("div",{className:"w-full flex justify-center",children:o.jsx("div",{className:"w-full max-w-[480px] sm:max-w-[640px] rounded-2xl border border-[#2A2E4A] bg-[#050716] px-3 py-3 shadow-[0_0_24px_rgba(5,7,22,0.9)]",children:o.jsx(yd,{item:m,onSelect:M,variant:"feed",autoPlay:k})})},I(m)))}),o.jsx(K0,{isOpen:L,media:A,onClose:W,onPrev:G,onNext:B}),o.jsx(Gl,{open:C,onClose:()=>V(!1),title:"Gallery filters",footer:o.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>V(!1),children:"Done"}),children:o.jsxs("div",{className:"sheet-stack",children:[o.jsxs("div",{className:"sheet-section",children:[o.jsx("div",{className:"sheet-label",children:"Type"}),o.jsx("div",{className:"gallery-pills",role:"group","aria-label":"Filter by type",children:[{key:"all",label:"All"},{key:"image",label:"Images"},{key:"video",label:"Videos"}].map(m=>o.jsx("button",{type:"button",className:`gallery-pill ${s===m.key?"is-active":""}`,onClick:()=>j(m.key),"aria-pressed":s===m.key,children:m.label},m.key))})]}),o.jsxs("div",{className:"sheet-section",children:[o.jsx("div",{className:"sheet-label",children:"Options"}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("button",{type:"button",className:`ui-button is-compact ${i?"is-primary":"is-muted"}`,onClick:()=>S(m=>!m),children:i?" Subfolders":" This folder"}),o.jsx("button",{type:"button",className:`ui-button is-compact ${a?"is-primary":"is-muted"}`,onClick:()=>x(m=>!m),children:a?" Hidden on":" Hidden off"}),J==="feed"?o.jsx("button",{type:"button",className:`ui-button is-compact ${k?"is-primary":"is-muted"}`,onClick:()=>_(m=>!m),children:k?" Autoplay":" No autoplay"}):null,o.jsx("button",{type:"button",className:"ui-button is-compact is-ghost",onClick:P,children:" Refresh"})]})]}),o.jsxs("div",{className:"sheet-section",children:[o.jsx("div",{className:"sheet-label",children:"Page size"}),o.jsxs("select",{value:l,onChange:m=>w(parseInt(m.target.value,10)||30),className:"sheet-select","aria-label":"Items per page",children:[o.jsx("option",{value:15,children:"15"}),o.jsx("option",{value:30,children:"30"}),o.jsx("option",{value:60,children:"60"}),o.jsx("option",{value:120,children:"120"})]}),o.jsx("div",{className:"sheet-hint",children:t?"Loading":`${R}  Page ${n} of ${r}`}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>g(m=>Math.max(1,m-1)),disabled:n<=1||t,children:"Prev"}),o.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>g(m=>m<r?m+1:m),disabled:n>=r||t,children:"Next"})]})]})]})})]})}function tw({workflow:e,preset:t,workflowMode:n,modeOptions:r=[],previewSrc:l,previewType:s="image",tags:a=[],isSelected:i,requiresImages:u=!1,onActivate:d,onQuickEdit:f,onImages:p,onAssignMode:g,onUploadPreview:w,onClear:x,savingMode:j,previewSaving:S=!1,quickEditActive:y=!1,children:h,description:v}){var B;const N=c.useRef(null),P=c.useRef(null);c.useEffect(()=>{i&&N.current&&N.current.focus()},[i]),c.useEffect(()=>{if(typeof document>"u")return;const G=N.current;if(!i||!G){const Y=document.activeElement;!i&&G&&Y&&G.contains(Y)&&typeof Y.blur=="function"&&Y.blur();return}const J=Y=>{N.current&&(N.current.contains(Y.target)||requestAnimationFrame(()=>{var k;(k=N.current)==null||k.focus()}))};return document.addEventListener("focusin",J,!0),()=>{document.removeEventListener("focusin",J,!0)}},[i]),c.useEffect(()=>{if(!i||!N.current)return;const G=N.current,J=Y=>{if(Y.key==="Escape"){x==null||x();return}};return G.addEventListener("keydown",J),()=>G.removeEventListener("keydown",J)},[i,x]);const L=c.useMemo(()=>{if(!n)return"Uncategorized";const G=r.find(J=>J.id===n);return G?G.label:n},[n,r]),A=s==="video"||l&&l.startsWith("data:video"),E=G=>{var Y;const J=(Y=G.target.files)==null?void 0:Y[0];J&&(w==null||w(J),G.target.value="")},W=["preset-card",i?"preset-card--active":""].filter(Boolean).join(" ");return o.jsxs("div",{className:W,tabIndex:i?0:-1,ref:N,children:[o.jsxs("div",{className:"preset-card-media",onClick:()=>d==null?void 0:d(),children:[l?A?o.jsx("video",{src:l,muted:!0,loop:!0,playsInline:!0,autoPlay:!0,className:"preset-card-media-src"}):o.jsx("img",{src:l,alt:`${t==null?void 0:t.name} preview`,loading:"lazy",className:"preset-card-media-src"}):o.jsx("div",{className:"preset-card-preview preset-card-preview--placeholder",children:o.jsx("span",{children:((B=t==null?void 0:t.name)==null?void 0:B.slice(0,1))||"P"})}),o.jsxs("div",{className:"preset-card-overlay",children:[o.jsxs("div",{children:[o.jsx("span",{className:"ui-kicker",children:e}),o.jsx("div",{className:"preset-card-title",children:t==null?void 0:t.name})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("select",{id:`mode-${e}-${t==null?void 0:t.name}`,value:n||"",onChange:G=>g==null?void 0:g(G.target.value||null),disabled:j,className:"preset-card-mode-select",children:[o.jsx("option",{value:"",children:"Unset"}),r.map(G=>o.jsx("option",{value:G.id,children:G.label},G.id))]}),o.jsx("button",{type:"button",className:"preset-card-setref",onClick:G=>{var J;G.stopPropagation(),(J=P.current)==null||J.click()},disabled:S,children:S?"Uploading":"Reference"}),o.jsx("input",{ref:P,type:"file",accept:"image/*,video/*",hidden:!0,onChange:E})]})]})]}),o.jsxs("div",{className:"preset-card-underbar",children:[o.jsxs("div",{className:"preset-card-tagrow",children:[o.jsx("span",{className:"preset-card-chip is-kind",children:L}),u&&o.jsx("span",{className:"preset-card-chip is-alert",children:"Image input"}),a.map(G=>o.jsx("span",{className:"preset-card-chip",children:G},G))]}),v&&o.jsx("p",{className:"preset-card-description",children:v}),o.jsxs("div",{className:"preset-card-actions",children:[o.jsx("button",{type:"button",className:"ui-button is-primary is-compact",onClick:G=>{G.stopPropagation(),d==null||d()},children:i?"Reapply":"Activate"}),o.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:G=>{G.stopPropagation(),f==null||f()},children:y?"Hide tweaks":"Quick tweaks"}),o.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:G=>{G.stopPropagation(),p==null||p()},children:"Images"})]})]}),i&&h&&o.jsx("div",{className:"preset-card-drawer",onClick:G=>G.stopPropagation(),children:h})]})}function nw({input:e,value:t,onFormChange:n}){const{param:r,previewUrl:l,imgReady:s,setImgReady:a,displayName:i,serverOpen:u,openServer:d,closeServer:f,cwd:p,setCwd:g,page:w,setPage:x,perPage:j,setPerPage:S,totalPages:y,topDirs:h,loading:v,search:N,setSearch:P,imagesOnly:L,setImagesOnly:A,shownEntries:E,pickerSource:W,setPickerSource:B,handleUpload:G,clearImage:J,selectServer:Y}=Nu({input:e,value:t,onFormChange:n}),k=c.useRef(null),[_,M]=c.useState(0),b=async V=>{var R;const I=(R=V.target.files)==null?void 0:R[0];I&&(await G(I),k.current&&(k.current.value=""),M(T=>T+1))},C=()=>{var V;return(V=k.current)==null?void 0:V.click()};return o.jsxs("div",{className:"preset-image-row",children:[o.jsx("input",{ref:k,type:"file",accept:"image/*",className:"hidden",onChange:b},_),o.jsx("div",{className:"preset-image-thumb",children:l?o.jsx("img",{src:l,alt:r,className:s?"opacity-100":"opacity-0",onLoad:()=>a(!0)}):o.jsx("span",{children:(r==null?void 0:r.slice(0,1))||"I"})}),o.jsxs("div",{className:"preset-image-info",children:[o.jsx("div",{className:"preset-image-name",children:r}),o.jsx("div",{className:"preset-image-hint",children:t||i||"No file selected"})]}),o.jsxs("div",{className:"preset-image-actions",children:[o.jsx("button",{type:"button",className:"preset-image-action",onClick:C,children:"Upload"}),o.jsx("button",{type:"button",className:"preset-image-action",onClick:d,children:"Server"}),t?o.jsx("button",{type:"button",className:"preset-image-action is-clear",onClick:J,children:"Clear"}):null]}),o.jsx(ju,{open:u,cwd:p,setCwd:g,page:w,setPage:x,perPage:j,setPerPage:S,totalPages:y,topDirs:h,loading:v,imagesOnly:L,setImagesOnly:A,search:N,setSearch:P,shownEntries:E,pickerSource:W,setPickerSource:B,onSelect:Y,onClose:f})]})}function rw(e){return!e||!e.filename?null:`/cozygen/thumb?${new URLSearchParams({type:e.type||"output",subfolder:e.subfolder||"",filename:e.filename,w:"640"}).toString()}`}function lw(e){var t;return((t=e==null?void 0:e.preview)==null?void 0:t.kind)==="data"&&e.preview.data?e.preview.data:rw(e==null?void 0:e.example)}function sw(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=n,r.readAsDataURL(e)})}const Om=/\.(png|jpe?g|webp|gif|bmp)$/i,ow=/\.(mp4|webm|mov|mkv)$/i;function aw(e){var d;const t=(e==null?void 0:e.values)||{},n=Array.isArray((d=e==null?void 0:e.meta)==null?void 0:d.tags)?e.meta.tags:[],r=[];n.forEach(f=>{typeof f=="string"&&f.trim()&&r.push(f.trim().slice(0,24))}),Object.values(t).some(f=>typeof f=="string"&&Om.test(f))&&r.push("Image Input");const s=t["Frame Count"]||t.frames;s&&r.push(`${s} frames`);const a=t.Steps||t["Sampling Steps"]||t.steps;a&&r.push(`${a} steps`);const i=t.Seed||t.seed;typeof i<"u"&&r.push(`Seed ${i}`);const u=t.FPS||t["Video FPS"];return u&&r.push(`${u} fps`),[...new Set(r)].slice(0,4)}const wd=4,iw=[{id:"prompt",weight:1,test:e=>/prompt/i.test(e.label||"")&&!/negative/i.test(e.label||"")},{id:"negative_prompt",weight:2,test:e=>/negative/i.test(e.label||"")&&/prompt/i.test(e.label||"")},{id:"steps",weight:3,test:e=>/step/i.test(e.label||e.paramName||"")},{id:"cfg",weight:4,test:e=>/cfg|guidance/i.test(e.label||e.paramName||"")},{id:"seed",weight:5,test:e=>/seed/i.test(e.label||e.paramName||"")},{id:"sampler",weight:6,test:e=>/sampler|schedule/i.test(e.label||e.paramName||"")},{id:"frames",weight:7,test:e=>/frame/i.test(e.label||e.paramName||"")},{id:"dimensions",weight:8,test:e=>/width|height|resolution/i.test(e.label||e.paramName||"")}];function uw(e=[],t){var s;if(!e.length)return[];const n=new Map;e.forEach(a=>{const i=Il(a);i&&n.set(i,a)});const r=Array.isArray((s=t==null?void 0:t.meta)==null?void 0:s.quick_params)?t.meta.quick_params.map(a=>String(a||"").trim()).filter(a=>!!a&&n.has(a)):null;if(r&&r.length)return r.slice(0,wd).map(a=>{const i=n.get(a);return{cfg:yn(i),input:i}});const l=[];return e.forEach(a=>{if(!a||a.class_type==="CozyGenImageInput")return;const i=yn(a),u=iw.reduce((d,f)=>d!==1/0?d:f.test(i)?f.weight:1/0,1/0);u!==1/0&&l.push({cfg:i,input:a,priority:u})}),l.sort((a,i)=>a.priority-i.priority),l.slice(0,wd)}function cw(e,t,n){const r=`quick-${e.paramName}`,l={id:r,name:e.paramName,className:"quick-field-control",placeholder:typeof e.placeholder=="string"?e.placeholder:""};if(e.paramType==="DROPDOWN"){const a=Array.isArray(e.choices)?e.choices:[];return o.jsxs("select",{...l,value:t??"",onChange:i=>n(i.target.value),children:[o.jsx("option",{value:"",children:"Preset value"}),a.map(i=>o.jsx("option",{value:i,children:i},i))]})}if(e.paramType==="BOOLEAN")return o.jsxs("label",{className:"quick-field-boolean",htmlFor:r,children:[o.jsx("input",{id:r,name:e.paramName,type:"checkbox",checked:!!t,onChange:a=>n(a.target.checked)}),o.jsx("span",{children:"Enable"})]});const s=e.paramType==="NUMBER"?"number":"text";return o.jsx("input",{...l,type:s,value:typeof t=="number"&&Number.isFinite(t)?t:t??"",onChange:a=>n(a.target.value),min:e.min,max:e.max,step:e.step||(e.paramType==="NUMBER"?"any":void 0)})}function dw(){const{workflows:e,selectedWorkflow:t,selectWorkflow:n,loading:r}=Sm(),{workflowData:l,dynamicInputs:s=[],imageInputs:a=[],formData:i={},setFormData:u,handleFormChange:d}=Cm(t),{aliasLookup:f}=bu(),{isLoading:p,statusText:g,handleGenerate:w}=Em({selectedWorkflow:t,workflowData:l,dynamicInputs:s,imageInputs:a,formData:i,setFormData:u,promptAliases:f}),x=c.useCallback(()=>{t&&w()},[t,w]),[j,S]=c.useState({}),[y,h]=c.useState(!1),[v,N]=c.useState(""),[P,L]=c.useState(""),[A,E]=c.useState(null),[W,B]=c.useState({}),[G,J]=c.useState(null),[Y,k]=c.useState("all"),[_,M]=c.useState(""),[b,C]=c.useState(null),[V,I]=c.useState(!0),[R,T]=c.useState(""),[te,K]=c.useState({}),[z,O]=c.useState(!0),m=c.useRef({}),F=c.useRef(null),H=c.useMemo(()=>_m(t,s),[t,s]),q=c.useCallback(async(D,X,ne)=>{const Ce=(j[D]||[]).find(Te=>Te.name===X);if(Ce){C(`${D}::${X}`);try{await Nv(D,X,Ce.values||{},ne||{}),S(Te=>({...Te,[D]:(Te[D]||[]).map(Ue=>Ue.name===X?{...Ue,meta:ne||{}}:Ue)}))}catch(Te){console.error("Failed to update preset metadata",Te),N("Failed to update preset metadata")}finally{C(null)}}},[j]),le=c.useCallback(async()=>{if(!e||e.length===0){S({});return}h(!0),N("");const D={};for(const X of e)try{const ne=await nm(X);D[X]=Lm((ne==null?void 0:ne.items)||{})}catch(ne){console.error("Failed to load presets for",X,ne),D[X]=[],N("Some presets could not be loaded.")}S(D),h(!1)},[e]);c.useEffect(()=>{le()},[le]),c.useEffect(()=>{const D=()=>{le()};return window.addEventListener("cozygen:preset-changed",D),()=>window.removeEventListener("cozygen:preset-changed",D)},[le]),c.useEffect(()=>{let D=!1;async function X(){try{const ne=await bv();D||B((ne==null?void 0:ne.workflows)||{})}catch(ne){console.error("Failed to load workflow types",ne)}}return X(),()=>{D=!0}},[]),c.useEffect(()=>{if(!P)return;const[D,X]=P.split("::");(j[D]||[]).some(pe=>pe.name===X)||L("")},[j,P]),c.useEffect(()=>{R&&R!==P&&T("")},[R,P]);const oe=c.useCallback(D=>{if(!D)return;const X=m.current[D];X&&(X.scrollIntoView({behavior:"smooth",block:"center"}),X.classList.add("preset-card-section--highlight"),setTimeout(()=>{X.classList.remove("preset-card-section--highlight")},800))},[]);c.useEffect(()=>{if(!A||!l||A.workflow!==t)return;const D=A.values||{};u(D),t&&Or(t,D),E(null)},[A,t,l,u]),c.useEffect(()=>{P&&F.current===P&&(oe(P),F.current=null)},[P,oe]);const je=c.useMemo(()=>Object.entries(j).flatMap(([D,X])=>(X||[]).map(ne=>({workflow:D,...ne}))),[j]),ce=c.useMemo(()=>{const D=_.trim().toLowerCase();return je.filter(X=>{var Ce;const ne=W[X.workflow]||"";return Y!=="all"&&ne!==Y?!1:D?`${X.name} ${X.workflow} ${((Ce=X.meta)==null?void 0:Ce.description)||""}`.toLowerCase().includes(D):!0})},[je,Y,_,W]),$=c.useMemo(()=>{if(!P)return null;const[D,X]=P.split("::"),ne=(j[D]||[]).find(pe=>pe.name===X);return ne?{workflow:D,...ne}:null},[P,j]),U=!!$&&!!l&&t===$.workflow,Z=c.useMemo(()=>{if(!U)return[];const D=new Map;(H||[]).forEach(ne=>{const pe=Il(ne);pe&&D.set(pe,ne)});const X=[];return jm.forEach(ne=>{var ie,ve;const pe=gn(D,ne.highParamAliases||ne.highParam),Ce=gn(D,ne.lowParamAliases||ne.lowParam);if(!pe||!Ce)return;const Te=yn(pe.input),Ue=yn(Ce.input);if(Te.paramType!=="DROPDOWN"||Ue.paramType!=="DROPDOWN"||!((ie=Te.choices)!=null&&ie.length)||!((ve=Ue.choices)!=null&&ve.length))return;const st=gn(D,ne.highStrengthParamAliases||ne.highStrengthParam),ee=gn(D,ne.lowStrengthParamAliases||ne.lowStrengthParam);X.push({...ne,highParam:pe.name,lowParam:Ce.name,highStrengthParam:st==null?void 0:st.name,lowStrengthParam:ee==null?void 0:ee.name,highCfg:Te,lowCfg:Ue})}),X},[U,H]),se=c.useCallback(()=>{T(D=>D===P?"":D),K(D=>{if(!P||!D[P])return D;const X={...D};return delete X[P],X}),L("")},[P]),ae=c.useCallback((D,X)=>{if(!(X!=null&&X.name))return;const ne=`${D}::${X.name}`;if(P===ne){se();return}if(L(ne),E({workflow:D,values:X.values||{}}),D!==t)n(D);else{const pe=X.values||{};u(pe),D&&Or(D,pe)}},[P,se,n,t,u]),fe=c.useCallback(D=>{if(!(D!=null&&D.name))return;const X=`${D.workflow}::${D.name}`;P!==X?(F.current=X,ae(D.workflow,D)):oe(X)},[ae,oe,P]),he=c.useCallback((D,X,ne,pe)=>{const Te=(()=>{if(pe==="NUMBER"){if(ne===""||ne===null||typeof ne>"u")return"";const Ue=Number(ne);return Number.isNaN(Ue)?"":Ue}return pe==="BOOLEAN"?!!ne:ne===""||ne===null||typeof ne>"u"?"":ne})();K(Ue=>{const st={...Ue},ee={...Ue[D]||{}};return typeof Te>"u"?delete ee[X]:ee[X]=Te,Object.keys(ee).length===0?delete st[D]:st[D]=ee,st})},[]),ge=c.useCallback(D=>{K(X=>{if(!X[D])return X;const ne={...X};return delete ne[D],ne})},[]),Le=c.useCallback(D=>{if(!(D!=null&&D.name))return;const X=`${D.workflow}::${D.name}`;P!==X&&ae(D.workflow,D),T(ne=>ne===X?"":X)},[P,ae]),Ze=c.useCallback(async(D,X,ne)=>{if(ne)try{const pe=await sw(ne),Ce={...X.meta||{},preview:{kind:"data",data:pe,mime:ne.type,name:ne.name,updatedAt:Date.now()}};await q(D,X.name,Ce)}catch(pe){console.error("Preview upload failed",pe),N("Preview upload failed")}},[q]),et=c.useCallback(async(D,X)=>{J(D);try{await Cv(D,X),B(ne=>{const pe={...ne};return X?pe[D]=X:delete pe[D],pe})}catch(ne){console.error("Failed to save workflow type",ne),N("Workflow type update failed")}finally{J(null)}},[]);return r?o.jsx("div",{className:"page-shell",children:o.jsxs("details",{className:"ui-panel collapsible-card",children:[o.jsx("summary",{className:"collapsible-card-summary",children:o.jsx("span",{className:"collapsible-card-summary-label",children:"Preset library"})}),o.jsx("div",{className:"collapsible-card-body text-center text-sm text-[#9DA3FFCC]",children:"Loading workflows"})]})}):!e||e.length===0?o.jsx("div",{className:"page-shell",children:o.jsxs("details",{className:"ui-panel collapsible-card",children:[o.jsx("summary",{className:"collapsible-card-summary",children:o.jsx("span",{className:"collapsible-card-summary-label",children:"Preset library"})}),o.jsx("div",{className:"collapsible-card-body text-center text-sm text-[#9DA3FFCC]",children:"No workflows found. Drop workflow JSON files into CozyGen/workflows and refresh."})]})}):o.jsxs("div",{className:"page-shell page-stack",children:[o.jsxs("details",{className:"ui-panel collapsible-card",open:!V,onToggle:D=>I(!D.target.open),children:[o.jsx("summary",{className:"collapsible-card-summary",children:o.jsx("span",{className:"collapsible-card-summary-label",children:"Preset library"})}),o.jsxs("div",{className:"collapsible-card-body space-y-4",children:[o.jsxs("div",{className:"ui-section-text",children:[o.jsx("span",{className:"ui-kicker",children:"Preset library"}),o.jsx("h1",{className:"ui-title",children:"Pick, tap, launch."})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{type:"button",onClick:le,className:"ui-button is-ghost is-compact",children:"Refresh"})}),o.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-[11px] text-[#7C82BF]",children:[o.jsxs("span",{children:[ce.length," presets"]}),v&&o.jsx("span",{className:"text-[#FF9BEA]",children:v})]}),o.jsxs("div",{className:"filter-rail flex items-center gap-2 overflow-x-auto rounded-full border border-[#1F2342] bg-[#050716] px-2 py-1 text-[11px] uppercase tracking-[0.16em] text-[#9DA3FF]",children:[[{id:"all",label:"All"},...xi].map(D=>o.jsx("button",{type:"button",onClick:()=>k(D.id),className:`shrink-0 rounded-full px-3 py-1 border ${Y===D.id?"bg-[#11152C] border-[#3EF0FF99] text-[#F8F4FF]":"border-transparent text-[#8B90C9]"}`,children:D.label},D.id)),o.jsx("div",{className:"mx-1 h-4 w-px bg-[#1F2342]"}),o.jsxs("label",{className:"flex items-center gap-1 rounded-full bg-[#0C0F2C] px-3 py-1 text-[#C3C7FF]",children:[o.jsx("span",{className:"text-xs",children:"Search"}),o.jsx("input",{type:"search",value:_,onChange:D=>M(D.target.value),placeholder:"Keywords",className:"w-24 bg-transparent text-[11px] text-[#F8F4FF] placeholder-[#61679B] focus:outline-none"})]})]})]})]}),o.jsxs("details",{className:"ui-panel collapsible-card",open:!z,onToggle:D=>O(!D.target.open),children:[o.jsx("summary",{className:"collapsible-card-summary",children:o.jsx("span",{className:"collapsible-card-summary-label",children:"Preset selection"})}),o.jsx("div",{className:"collapsible-card-body space-y-4",children:y?o.jsx("div",{className:"ui-card text-center text-sm text-[#9DA3FFCC]",children:"Loading presets"}):ce.length===0?o.jsx("div",{className:"ui-card text-center text-sm text-[#9DA3FFCC]",children:"No presets yet. Save one from Studio to get started."}):o.jsx("div",{className:["preset-grid","grid gap-5 sm:grid-cols-2 xl:grid-cols-3",$?"has-active":""].filter(Boolean).join(" "),children:ce.map(D=>{var Be,Ke,dt,ze,ft,Vt,tr;const X=`${D.workflow}::${D.name}`,ne=aw(D),pe=P===X,Ce=lw(D.meta),Te=(dt=(Ke=(Be=D.meta)==null?void 0:Be.preview)==null?void 0:Ke.mime)!=null&&dt.startsWith("video")||(ft=(ze=D.meta)==null?void 0:ze.example)!=null&&ft.filename&&ow.test(D.meta.example.filename)||Ce&&Ce.startsWith("data:video")?"video":"image",Ue=(((Vt=D.meta)==null?void 0:Vt.requires_images)??Object.values(D.values||{}).some(We=>typeof We=="string"&&Om.test(We)))||!1,st=te[X]||{};let ee=!1;const ie=b===X,ve=We=>{We?m.current[X]=We:delete m.current[X]};let xe=null;if(pe)if(!U||D.workflow!==t)xe=o.jsxs("div",{className:"preset-card-section",children:[o.jsx("p",{className:"ui-hint",children:"Loading workflow controls"}),o.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:We=>{We.stopPropagation(),se()},children:"Clear selection"})]});else{const We=a.length>0,Cu=We&&a.some(de=>!i[de.inputs.param_name]);ee=U&&(!We||!Cu)&&!p;const ku=R===X?uw(H,D):[],Im=R===X&&ku.length>0;xe=o.jsxs(o.Fragment,{children:[R===X&&o.jsxs("div",{className:"preset-card-section",children:[o.jsx("h4",{children:"Quick tweaks"}),Im?o.jsx("div",{className:"quick-field-grid",children:ku.map(({cfg:de})=>{var Eu;const zt=i[de.paramName]??((Eu=D.values)==null?void 0:Eu[de.paramName])??"",ln=Object.prototype.hasOwnProperty.call(st,de.paramName),Br=st[de.paramName],sn=ln?Br:zt,Mm=!ln&&(typeof zt=="number"||typeof zt=="string")?`Preset: ${zt}`:"";return o.jsxs("div",{className:"quick-field",children:[o.jsx("label",{htmlFor:`quick-${de.paramName}`,className:"quick-field-label",children:de.label}),cw({...de,placeholder:Mm},sn,zm=>he(X,de.paramName,zm,de.paramType))]},de.paramName)})}):null,o.jsx("div",{className:"quick-field-footer",children:o.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:de=>{de.stopPropagation(),ge(X)},disabled:!st||!Object.keys(st).length,children:"Reset overrides"})})]}),o.jsxs("div",{className:"preset-card-section",ref:ve,children:[o.jsx("h4",{children:"Image inputs"}),a.length?o.jsx("div",{className:"preset-image-list",children:a.map(de=>{var sn;const zt=de.inputs.param_name,ln=(sn=$.values)==null?void 0:sn[zt],Br=i[zt]||(typeof ln=="string"?ln:"");return o.jsx(nw,{input:de,value:Br,onFormChange:d},de.id)})}):o.jsx("p",{className:"ui-hint",children:"This preset does not need reference images."})]}),Z.length>0&&o.jsxs("div",{className:"preset-card-section",children:[o.jsx("h4",{children:"LoRA controls"}),o.jsx("div",{className:"space-y-2",children:Z.map(de=>{const zt=de.highStrengthParam?i[de.highStrengthParam]:void 0,ln=de.lowStrengthParam?i[de.lowStrengthParam]:void 0,Br=zt??ln??1;return o.jsx(vi,{name:de.id||de.highParam,label:de.label,highParam:de.highParam,lowParam:de.lowParam,highChoices:de.highCfg.choices,lowChoices:de.lowCfg.choices,formData:i,onChangeParam:d,highStrengthParam:de.highStrengthParam,lowStrengthParam:de.lowStrengthParam,strengthValue:Br,highStrengthValue:zt,lowStrengthValue:ln,onChangeHighStrength:de.highStrengthParam?sn=>d(de.highStrengthParam,sn):void 0,onChangeLowStrength:de.lowStrengthParam?sn=>d(de.lowStrengthParam,sn):void 0},de.id||de.highParam)})})]}),o.jsxs("div",{className:"preset-card-section preset-card-generate",children:[We&&Cu&&o.jsx("p",{className:"ui-hint text-[#FF9BEA]",children:"Provide the required reference images to unlock render."}),o.jsx("button",{type:"button",className:"ui-button is-primary",disabled:!ee,onClick:()=>ee&&x(),children:p?"Rendering":"Generate"}),o.jsx("div",{className:"preset-card-status",children:g||(p?"Working":"Idle")}),o.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:de=>{de.stopPropagation(),se()},children:"Clear selection"})]})]})}return o.jsx(tw,{workflow:D.workflow,preset:D,workflowMode:W[D.workflow],modeOptions:xi,previewSrc:Ce,previewType:Te,isSelected:pe,tags:ne,requiresImages:Ue,onActivate:()=>ae(D.workflow,D),onQuickEdit:()=>Le(D),quickEditActive:R===X,onAssignMode:We=>et(D.workflow,We),onUploadPreview:We=>Ze(D.workflow,D,We),onImages:()=>fe(D),onClear:se,savingMode:G===D.workflow,description:(((tr=D.meta)==null?void 0:tr.description)||"").trim(),previewSaving:ie,children:xe},X)})})})]})]})}function ua({sectionTitle:e,name:t,description:n,preview:r,keywords:l=[],promptExamples:s=[],sourceUrl:a,sourceLabel:i="Visit source",tags:u=[],recommendedWeight:d,modelName:f,status:p="configured",files:g,pairState:w,folder:x,onEdit:j}){const S=r&&r.src,y=(r==null?void 0:r.alt)||`${t} preview`,h=Array.isArray(l)&&l.length>0,v=Array.isArray(s)&&s.length>0,N=Array.isArray(g==null?void 0:g.others)?g.others:[],P=(g==null?void 0:g.high)||(g==null?void 0:g.low)||(g==null?void 0:g.single)||N.length>0,L=p==="detected"?"Needs details":p==="missing"?"Missing files":"Published";return o.jsxs("article",{className:"lora-card",children:[o.jsxs("div",{className:"lora-card-media",children:[S?o.jsx("img",{src:r.src,alt:y,loading:"lazy"}):o.jsx("div",{className:"lora-card-media-placeholder",children:(t==null?void 0:t.slice(0,2))||"LL"}),o.jsxs("div",{className:"lora-card-media-badges",children:[e&&o.jsx("span",{className:"lora-card-chip is-section",children:e}),d&&o.jsx("span",{className:"lora-card-chip",children:`Weight ${d}`}),o.jsx("span",{className:`lora-card-chip is-status-${p}`,children:L})]})]}),o.jsxs("div",{className:"lora-card-body",children:[o.jsxs("div",{className:"lora-card-head",children:[o.jsxs("div",{children:[o.jsx("span",{className:"ui-kicker",children:"LoRA"}),o.jsx("h3",{className:"lora-card-title",children:t}),f&&o.jsx("p",{className:"lora-card-model",children:f}),x&&o.jsxs("p",{className:"lora-card-folder",children:["Folder: ",x]}),w&&o.jsxs("p",{className:"lora-card-folder",children:["Pair: ",w]})]}),u.length>0&&o.jsx("div",{className:"lora-card-tagcol",children:u.map(A=>o.jsx("span",{className:"lora-card-chip is-muted",children:A},A))})]}),n&&o.jsx("p",{className:"lora-card-description",children:n}),h&&o.jsxs("section",{className:"lora-card-section",children:[o.jsx("header",{children:o.jsx("span",{className:"ui-kicker",children:"Keywords"})}),o.jsx("div",{className:"lora-card-chiprow",children:l.map(A=>o.jsx("span",{className:"lora-card-chip is-soft",children:A},A))})]}),v&&o.jsxs("section",{className:"lora-card-section",children:[o.jsx("header",{children:o.jsx("span",{className:"ui-kicker",children:"Prompt examples"})}),o.jsx("div",{className:"lora-card-prompts",children:s.map((A,E)=>o.jsxs("article",{className:"lora-card-prompt",children:[A.title&&o.jsx("h4",{className:"lora-card-prompt-title",children:A.title}),A.text&&o.jsx("p",{className:"lora-card-prompt-text",children:A.text}),A.weightTip&&o.jsx("p",{className:"lora-card-prompt-note",children:A.weightTip}),A.negative&&o.jsxs("p",{className:"lora-card-prompt-note is-negative",children:["Negative: ",A.negative]})]},A.title||E))})]}),P&&o.jsxs("section",{className:"lora-card-section",children:[o.jsx("header",{children:o.jsx("span",{className:"ui-kicker",children:"Detected files"})}),o.jsxs("ul",{className:"lora-card-files",children:[(g==null?void 0:g.high)&&o.jsxs("li",{children:[o.jsx("strong",{children:"High:"})," ",g.high]}),(g==null?void 0:g.low)&&o.jsxs("li",{children:[o.jsx("strong",{children:"Low:"})," ",g.low]}),N.map(A=>o.jsx("li",{children:A},A)),!(g!=null&&g.high)&&!(g!=null&&g.low)&&N.length===0&&o.jsx("li",{children:"No files detected yet."})]})]}),a&&o.jsxs("section",{className:"lora-card-section",children:[o.jsx("header",{children:o.jsx("span",{className:"ui-kicker",children:"Original website"})}),o.jsx("a",{href:a,target:"_blank",rel:"noreferrer",className:"lora-card-link",children:i})]}),typeof j=="function"&&o.jsx("div",{className:"lora-card-actions",children:o.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>j(),children:p==="detected"?"Add details":"Edit card"})})]})]})}const bs=()=>({title:"",text:"",negative:"",weightTip:""});function Nd(e){return e?e.split(",").map(t=>t.trim()).filter(Boolean):[]}function fw({examples:e,onChange:t}){const n=e.length?e:[bs()],r=(a,i,u)=>{const d=n.map((f,p)=>p===a?{...f,[i]:u}:f);t(d)},l=a=>{const i=n.filter((u,d)=>d!==a);t(i.length?i:[bs()])},s=()=>{t([...n,bs()])};return o.jsxs("div",{className:"lora-editor-prompts",children:[n.map((a,i)=>o.jsxs("div",{className:"lora-editor-prompt-card",children:[o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:`prompt-title-${i}`,children:"Title"}),o.jsx("input",{id:`prompt-title-${i}`,type:"text",value:a.title,onChange:u=>r(i,"title",u.target.value)})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:`prompt-text-${i}`,children:"Prompt text"}),o.jsx("textarea",{id:`prompt-text-${i}`,value:a.text,rows:3,onChange:u=>r(i,"text",u.target.value)})]}),o.jsxs("div",{className:"lora-editor-field two-col",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:`prompt-weight-${i}`,children:"Weight tip"}),o.jsx("input",{id:`prompt-weight-${i}`,type:"text",value:a.weightTip,onChange:u=>r(i,"weightTip",u.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:`prompt-negative-${i}`,children:"Negative hint"}),o.jsx("input",{id:`prompt-negative-${i}`,type:"text",value:a.negative,onChange:u=>r(i,"negative",u.target.value)})]})]}),o.jsx("button",{type:"button",className:"lora-editor-remove",onClick:()=>l(i),disabled:n.length===1,children:"Remove example"})]},`example-${i}`)),o.jsx("button",{type:"button",className:"ui-button is-muted",onClick:s,children:"Add prompt example"})]})}function pw({card:e,onCancel:t,onSave:n,onDelete:r,saving:l=!1}){var T,te,K,z;const[s,a]=c.useState((e==null?void 0:e.name)||(e==null?void 0:e.baseName)||""),[i,u]=c.useState((e==null?void 0:e.modelName)||""),[d,f]=c.useState((e==null?void 0:e.category)||""),[p,g]=c.useState((e==null?void 0:e.description)||""),[w,x]=c.useState((e==null?void 0:e.recommendedWeight)||""),[j,S]=c.useState(((e==null?void 0:e.tags)||[]).join(", ")),[y,h]=c.useState(((e==null?void 0:e.keywords)||[]).join(", ")),[v,N]=c.useState((e==null?void 0:e.sourceLabel)||""),[P,L]=c.useState((e==null?void 0:e.sourceUrl)||""),[A,E]=c.useState(((T=e==null?void 0:e.preview)==null?void 0:T.src)||""),[W,B]=c.useState(((te=e==null?void 0:e.preview)==null?void 0:te.alt)||""),[G,J]=c.useState((e==null?void 0:e.notes)||""),[Y,k]=c.useState((K=e==null?void 0:e.promptExamples)!=null&&K.length?e.promptExamples:[bs()]),[_,M]=c.useState((z=e==null?void 0:e.preview)!=null&&z.src?{url:e.preview.src}:""),b=(e==null?void 0:e.files)||{},C=Array.isArray(b==null?void 0:b.others)?b.others:[],I=Nu({input:{inputs:{param_name:"lora_preview"},class_type:"LoraPreview"},value:_,onFormChange:(O,m)=>{if(m){if(M(m),typeof m=="string"){E(m);return}m.url&&E(m.url),m.alt&&B(m.alt)}}}),R=O=>{if(O.preventDefault(),typeof n!="function")return;const m=Y.filter(H=>Object.values(H||{}).some(q=>(q||"").trim())),F={name:s,modelName:i,category:d,description:p,recommendedWeight:w,tags:Nd(j),keywords:Nd(y),sourceLabel:v,sourceUrl:P,notes:G,preview:{src:A,alt:W},promptExamples:m};n(F)};return o.jsxs("form",{className:"ui-panel lora-editor",onSubmit:R,children:[o.jsxs("header",{className:"lora-editor-head",children:[o.jsxs("div",{children:[o.jsx("span",{className:"ui-kicker",children:"Editing"}),o.jsx("h2",{children:(e==null?void 0:e.name)||(e==null?void 0:e.baseName)||(e==null?void 0:e.id)}),o.jsxs("p",{className:"text-sm text-slate-200/80",children:["Fill in keywords, prompt examples, and source links. Changes are stored in ",o.jsx("code",{children:"data/lora_library.json"}),"."]})]}),o.jsxs("div",{className:"lora-editor-actions",children:[typeof r=="function"&&(e==null?void 0:e.status)!=="detected"&&o.jsx("button",{type:"button",className:"ui-button is-ghost",disabled:l,onClick:()=>r(),children:"Reset card"}),o.jsx("button",{type:"button",className:"ui-button is-muted",onClick:t,disabled:l,children:"Cancel"}),o.jsx("button",{type:"submit",className:"ui-button is-primary",disabled:l,children:l?"Saving":"Save card"})]})]}),o.jsxs("div",{className:"lora-editor-grid",children:[o.jsxs("div",{className:"lora-editor-section",children:[o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-name",children:"Display name"}),o.jsx("input",{id:"lora-name",type:"text",value:s,onChange:O=>a(O.target.value)})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-model",children:"Model name"}),o.jsx("input",{id:"lora-model",type:"text",value:i,onChange:O=>u(O.target.value)})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-category",children:"Category"}),o.jsx("input",{id:"lora-category",type:"text",value:d,onChange:O=>f(O.target.value),placeholder:"e.g. Stylized, Motion, Utility"})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-description",children:"Description"}),o.jsx("textarea",{id:"lora-description",value:p,rows:4,onChange:O=>g(O.target.value)})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-weight",children:"Recommended weight"}),o.jsx("input",{id:"lora-weight",type:"text",value:w,onChange:O=>x(O.target.value),placeholder:"0.65 - 0.85"})]})]}),o.jsxs("div",{className:"lora-editor-section",children:[o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-tags",children:"Tags (comma separated)"}),o.jsx("input",{id:"lora-tags",type:"text",value:j,onChange:O=>S(O.target.value)})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-keywords",children:"Keywords (comma separated)"}),o.jsx("input",{id:"lora-keywords",type:"text",value:y,onChange:O=>h(O.target.value)})]}),o.jsxs("div",{className:"lora-editor-field two-col",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lora-source-label",children:"Source label"}),o.jsx("input",{id:"lora-source-label",type:"text",value:v,onChange:O=>N(O.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lora-source-url",children:"Source URL"}),o.jsx("input",{id:"lora-source-url",type:"url",value:P,onChange:O=>L(O.target.value)})]})]}),o.jsxs("div",{className:"lora-editor-field two-col",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lora-preview-src",children:"Preview image URL"}),o.jsx("input",{id:"lora-preview-src",type:"text",value:A,onChange:O=>{const m=O.target.value;E(m),M(m?{url:m}:"")}})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lora-preview-alt",children:"Preview alt text"}),o.jsx("input",{id:"lora-preview-alt",type:"text",value:W,onChange:O=>B(O.target.value)})]})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{htmlFor:"lora-notes",children:"Notes (internal)"}),o.jsx("textarea",{id:"lora-notes",rows:3,value:G,onChange:O=>J(O.target.value)})]}),o.jsxs("div",{className:"lora-editor-field",children:[o.jsx("label",{children:"Example from gallery"}),o.jsx("button",{type:"button",className:"ui-button is-muted",onClick:I.openServer,children:"Choose from gallery"}),I.previewUrl&&o.jsxs("div",{className:"mt-2 text-[11px] text-[#C3C7FF]",children:["Using: ",I.displayName]})]})]})]}),o.jsxs("section",{className:"lora-editor-section",children:[o.jsx("header",{children:o.jsx("span",{className:"ui-kicker",children:"Prompt examples"})}),o.jsx(fw,{examples:Y,onChange:k})]}),o.jsxs("section",{className:"lora-editor-files",children:[o.jsxs("header",{children:[o.jsx("span",{className:"ui-kicker",children:"Detected files"}),o.jsx("span",{className:"lora-editor-chip",children:(e==null?void 0:e.pairState)||"unknown"})]}),o.jsxs("div",{className:"lora-editor-filelist",children:[(b==null?void 0:b.high)&&o.jsxs("div",{className:"lora-editor-file",children:[o.jsx("strong",{children:"High"}),o.jsx("span",{children:b.high})]}),(b==null?void 0:b.low)&&o.jsxs("div",{className:"lora-editor-file",children:[o.jsx("strong",{children:"Low"}),o.jsx("span",{children:b.low})]}),C.map(O=>o.jsx("div",{className:"lora-editor-file",children:o.jsx("span",{children:O})},O)),!(b!=null&&b.high)&&!(b!=null&&b.low)&&C.length===0&&o.jsx("p",{children:"No files detected in the LoRA directory yet."})]})]}),o.jsx(ju,{open:I.serverOpen,cwd:I.cwd,setCwd:I.setCwd,page:I.page,setPage:I.setPage,perPage:I.perPage,setPerPage:I.setPerPage,totalPages:I.totalPages,topDirs:I.topDirs,loading:I.loading,imagesOnly:I.imagesOnly,setImagesOnly:I.setImagesOnly,search:I.search,setSearch:I.setSearch,shownEntries:I.shownEntries,onSelect:I.selectServer,onClose:I.closeServer,pickerSource:I.pickerSource,setPickerSource:I.setPickerSource})]})}function mw(e){return(e||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")||"section"}function hw(e,t,n){const r=t.trim().toLowerCase(),l=n.length>0,s=[],a=d=>{d&&s.push(String(d))};a(e.name),a(e.description),a(e.modelName),a(e.recommendedWeight),a(e.folder),(e.keywords||[]).forEach(a),(e.tags||[]).forEach(a),(e.promptExamples||[]).forEach(d=>{a(d.title),a(d.text),a(d.negative),a(d.weightTip)}),e.files&&(a(e.files.high),a(e.files.low),(e.files.others||[]).forEach(a));const i=!r||s.some(d=>d.toLowerCase().includes(r)),u=!l||n.every(d=>(e.tags||[]).includes(d));return i&&u}function gw(e){const t=new Map;return e.forEach(n=>{var l;const r=((l=n.category)==null?void 0:l.trim())||"LoRA Library";t.has(r)||t.set(r,[]),t.get(r).push(n)}),Array.from(t.entries()).map(([n,r])=>({id:`${mw(n)}-${r.length}`,title:n,cards:r}))}function yw(){const[e,t]=c.useState([]),[n,r]=c.useState({draftCount:0,missingCount:0}),[l,s]=c.useState(!0),[a,i]=c.useState(""),[u,d]=c.useState(""),[f,p]=c.useState(""),[g,w]=c.useState([]),[x,j]=c.useState(null),[S,y]=c.useState(!1),h=c.useCallback(async()=>{s(!0),i("");try{const k=await kv();t(Array.isArray(k==null?void 0:k.items)?k.items:[]),r({draftCount:(k==null?void 0:k.draftCount)||0,missingCount:(k==null?void 0:k.missingCount)||0})}catch(k){i(k.message||"Failed to load LoRA library.")}finally{s(!1)}},[]);c.useEffect(()=>{h()},[h]);const v=c.useMemo(()=>{const k=new Set;return e.forEach(_=>{(_.tags||[]).forEach(M=>M&&k.add(M))}),Array.from(k).sort((_,M)=>_.toLowerCase().localeCompare(M.toLowerCase()))},[e]),N=c.useMemo(()=>e.filter(k=>hw(k,f,g)),[e,f,g]),P=N.filter(k=>k.status==="detected"),L=N.filter(k=>k.status==="missing"),A=N.filter(k=>k.status!=="detected"&&k.status!=="missing"),E=c.useMemo(()=>gw(A),[A]),W=N.length,B=k=>{w(_=>_.includes(k)?_.filter(M=>M!==k):[..._,k])},G=k=>{j(k),d(""),i("")},J=async k=>{if(x){y(!0),i("");try{await Ev(x.id,k),d(`Saved ${k.name||x.id}`),j(null),await h()}catch(_){i(_.message||"Failed to save LoRA card.")}finally{y(!1)}}},Y=async()=>{if(x&&!(typeof window<"u"&&!window.confirm("Remove saved details for this card?"))){y(!0),i("");try{await _v(x.id),d("Card reset to detected state."),j(null),await h()}catch(k){i(k.message||"Failed to reset card.")}finally{y(!1)}}};return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("section",{className:"ui-panel lora-library-hero",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("span",{className:"ui-kicker",children:"LoRA Library"}),o.jsx("h1",{className:"text-2xl font-semibold tracking-wide",children:"Tarot board for your LoRAs"}),u&&o.jsx("p",{className:"text-xs text-[#3EF0FF] uppercase tracking-[0.3em]",children:u}),a&&o.jsx("p",{className:"text-xs text-[#FF9DBB] uppercase tracking-[0.3em]",children:a})]}),o.jsxs("div",{className:"lora-library-controls space-y-3",children:[o.jsx("label",{htmlFor:"lora-library-search",className:"sr-only",children:"Search LoRAs"}),o.jsx("input",{id:"lora-library-search",type:"text",value:f,onChange:k=>p(k.target.value),className:"lora-library-search",placeholder:"Search LoRAs..."}),v.length>0&&o.jsxs("div",{className:"lora-library-tags",children:[v.map(k=>{const _=g.includes(k);return o.jsx("button",{type:"button",onClick:()=>B(k),className:["lora-tag-chip",_?"is-active":""].filter(Boolean).join(" "),children:k},k)}),g.length>0&&o.jsx("button",{type:"button",className:"lora-tag-chip is-muted",onClick:()=>w([]),children:"Clear"})]}),o.jsxs("div",{className:"lora-library-meta",children:[o.jsxs("span",{children:["Showing ",W," of ",e.length," cards"]}),o.jsxs("span",{children:["Drafts ",n.draftCount,"  Missing ",n.missingCount]}),o.jsx("button",{type:"button",className:"ui-button is-compact is-muted",onClick:h,disabled:l,children:"Refresh"})]})]})]}),x&&o.jsx(pw,{card:x,saving:S,onCancel:()=>j(null),onSave:J,onDelete:x.status!=="detected"?Y:void 0}),l?o.jsx("section",{className:"ui-panel text-center py-16",children:o.jsx("p",{className:"text-base text-slate-200/80",children:"Loading library"})}):o.jsxs(o.Fragment,{children:[P.length>0&&o.jsxs("section",{className:"space-y-4",children:[o.jsx("header",{className:"ui-section-head",children:o.jsxs("div",{className:"ui-section-text",children:[o.jsx("span",{className:"ui-kicker",children:"Auto-detected"}),o.jsx("h2",{className:"text-xl font-semibold",children:"LoRAs that need details"})]})}),o.jsx("div",{className:"lora-card-grid",children:P.map(k=>o.jsx(ua,{...k,sectionTitle:"Detected",onEdit:()=>G(k)},k.id))})]}),E.length===0&&P.length===0&&L.length===0?o.jsx("section",{className:"ui-panel text-center py-16",children:o.jsx("p",{className:"text-base text-slate-200/80",children:"No cards match your filters yet. Try refreshing or clear the search above."})}):E.map(k=>o.jsxs("section",{className:"space-y-4",children:[o.jsx("header",{className:"ui-section-head",children:o.jsxs("div",{className:"ui-section-text",children:[o.jsx("span",{className:"ui-kicker",children:"Collection"}),o.jsx("h2",{className:"text-xl font-semibold",children:k.title})]})}),o.jsx("div",{className:"lora-card-grid",children:k.cards.map(_=>o.jsx(ua,{..._,sectionTitle:k.title,onEdit:()=>G(_)},_.id))})]},k.id)),L.length>0&&o.jsxs("section",{className:"space-y-4",children:[o.jsx("header",{className:"ui-section-head",children:o.jsxs("div",{className:"ui-section-text",children:[o.jsx("span",{className:"ui-kicker",children:"Needs attention"}),o.jsx("h2",{className:"text-xl font-semibold",children:"Cards referencing missing files"})]})}),o.jsx("div",{className:"lora-card-grid",children:L.map(k=>o.jsx(ua,{...k,sectionTitle:"Missing",onEdit:()=>G(k)},k.id))})]})]})]})}const Rm="cozygen_alias_categories",Tm="cozygen_alias_category_list",ro="::";function vw(){return`alias-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`}function xw(){try{const e=window.localStorage.getItem(Rm)||"{}",t=JSON.parse(e);return typeof t=="object"&&t?t:{}}catch{return{}}}function jd(e){try{window.localStorage.setItem(Rm,JSON.stringify(e||{}))}catch{}}function ww(){try{const e=window.localStorage.getItem(Tm)||"[]",t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}}function Nw(e){try{window.localStorage.setItem(Tm,JSON.stringify(e||[]))}catch{}}function Sd(e,t={}){return Object.entries(ml(e)).map(([n,r],l)=>{const[s,a]=String(n).includes(ro)?n.split(ro):["",n],i=a||n,u=t[n]||t[i]||s||"";return{id:`existing-${l}-${n}`,name:i,text:r,category:u}})}function bd(e){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.name)||"").trim(),l=typeof(n==null?void 0:n.text)=="string"?n.text.trim():"";if(r&&l){const s=String((n==null?void 0:n.category)||"").trim(),a=s?`${s}${ro}${r}`:r;t[a]=l}}),t}function ca(e){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.name)||"").trim(),l=typeof(n==null?void 0:n.category)=="string"?n.category.trim():"";if(r){const s=l?`${l}${ro}${r}`:r;t[s]=l}}),t}function jw(){const{aliases:e,aliasCategories:t,categoryList:n,loading:r,saving:l,error:s,persistAliases:a}=bu(),[i,u]=c.useState(()=>Sd(e)),[d,f]=c.useState(()=>xw()),[p,g]=c.useState(()=>ww()),[w,x]=c.useState(""),[j,S]=c.useState("All"),[y,h]=c.useState(!1),[v,N]=c.useState(""),P=c.useRef(null),[L,A]=c.useState(!1),[E,W]=c.useState(!1),[B,G]=c.useState(""),J=typeof window<"u"?window.innerWidth<768:!1,[Y,k]=c.useState(J),_=c.useRef(J);c.useEffect(()=>{L||f(t||{})},[t,L]),c.useEffect(()=>{L||Array.isArray(n)&&g(n)},[n,L]),c.useEffect(()=>{if(L)return;const z=Sd(e,d);u(z),w&&!z.some(O=>O.id===w)&&x("")},[e,d,w,L]);const M=c.useMemo(()=>bd(i),[i]),b=()=>{const z={id:vw(),name:"",text:"",category:""};u(O=>[...O,z]),x(z.id),h(!0),N("Editing new alias"),A(!0)},C=(z,O,m)=>{!y&&O!=="category"||(A(!0),u(F=>F.map((H,q)=>q===z?{...H,[O]:m}:H)))},V=z=>{A(!0),u(O=>{var H;const m=O.filter((q,le)=>le!==z),F=ca(m);return f(F),jd(F),m.length===0?(x(""),h(!1)):w===((H=O[z])==null?void 0:H.id)&&(x(m[0].id),h(!1)),m})},I=async()=>{N("");try{const z=ca(i);await a({items:M,categories:z}),f(z),jd(z),A(!1),h(!1),N("Saved")}catch{N("Unable to save right now.")}},R=c.useMemo(()=>{const O=[...i.filter(m=>!(j!=="All"&&(m.category||"")!==j))];return O.sort((m,F)=>(m.name||"").localeCompare(F.name||"")),O},[i,j]),T=R.find(z=>z.id===w)||i.find(z=>z.id===w)||null,te=c.useMemo(()=>{const z=new Set(p||[]);return i.forEach(O=>{O.category&&z.add(O.category)}),Array.from(z).sort((O,m)=>O.localeCompare(m))},[i,p]);c.useEffect(()=>{y&&P.current&&P.current.focus()},[y,w]),c.useEffect(()=>{const z=()=>{const O=window.innerWidth<768;k(O),_.current=O};return z(),window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[]);const K=async()=>{const z=B.trim();if(!z){N("Enter a category name.");return}const O=Array.from(new Set([...p||[],z]));Nw(O),g(O),W(!1),G(""),N("Saved category. Use the dropdown on a card to assign it.");const m=bd(i),F=ca(i);A(!0);try{await a({items:m,categories:F,categoryList:O}),A(!1),N("Saved category. Use the dropdown on a card to assign it.")}catch{N("Unable to save right now.")}};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"page-shell page-stack",children:[o.jsx("div",{className:"neon-card p-4 sm:p-6 space-y-4",children:o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3",children:o.jsx("div",{children:o.jsx("h2",{className:"text-lg font-semibold",children:"Alias library"})})}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("button",{type:"button",onClick:b,className:"btn-touch h-9 px-3 rounded-lg border border-[#2A2E4A] bg-[#0C1222] text-sm font-semibold text-[#E5E7FF]",children:"+ Add alias"}),o.jsxs("div",{className:"flex items-center gap-2 h-9 bg-[#0C1222] border border-[#2A2E4A] rounded-lg px-2 text-xs text-[#7F91B6] flex-wrap w-full sm:w-auto",children:[o.jsx("span",{children:"Category"}),o.jsxs("select",{value:j,onChange:z=>S(z.target.value),className:"bg-transparent text-sm text-[#E5E7FF] focus:outline-none h-7",children:[o.jsx("option",{value:"All",children:"All"}),o.jsx("option",{value:"",children:"Uncategorized"}),te.map(z=>o.jsx("option",{value:z,children:z||"Uncategorized"},z||"uncat"))]}),E?o.jsxs("div",{className:"flex items-center gap-1 w-full sm:w-auto",children:[o.jsx("input",{type:"text",value:B,onChange:z=>G(z.target.value),placeholder:"New category",className:"flex-1 min-w-[140px] rounded-md border border-[#2A2E4A] bg-[#050716] px-2 py-1 text-xs text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]"}),o.jsx("button",{type:"button",onClick:K,className:"h-8 px-2 rounded-md bg-[#0F1A2F] border border-[#2A2E4A] text-[11px] font-semibold text-[#E5E7FF]",children:"Save"}),o.jsx("button",{type:"button",onClick:()=>{W(!1),G("")},className:"h-8 px-2 rounded-md text-[11px] font-semibold text-[#7F91B6] hover:text-[#E5E7FF]",children:"Cancel"})]}):o.jsx("button",{type:"button",className:"px-2 py-1 rounded bg-[#0F1A2F] border border-[#2A2E4A] text-[#E5E7FF] text-[11px] font-semibold",onClick:()=>{W(!0),G("")},children:"+ Add"})]})]}),v&&!T?o.jsx("p",{className:"text-[11px] text-[#A9B6D9]",children:v}):null,T?o.jsxs("div",{className:`rounded-xl border border-[#2A2E4A] bg-[#0B1226] p-3 sm:p-4 shadow-[0_10px_30px_rgba(4,7,16,0.35)] space-y-3 ${Y?"hidden sm:block":""}`,children:[o.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-[#E5E7FF] leading-tight",children:T.name||"Untitled alias"}),T.category?o.jsxs("p",{className:"text-[11px] text-[#7F91B6]",children:["Category: ",T.category]}):null]})}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-[#7F91B6]",children:[o.jsx("button",{type:"button",onClick:()=>{y?I():(h(!0),N("Editing"))},className:"underline hover:text-[#5EF1D4] transition-colors",children:y?l?"Saving":"Save":"Edit"}),o.jsx("span",{className:"text-[#2A2E4A]",children:"|"}),o.jsx("button",{type:"button",onClick:()=>{const z=i.findIndex(O=>O.id===T.id);z!==-1&&V(z)},className:"underline hover:text-[#FF8F70] transition-colors",children:"Remove"}),o.jsx("span",{className:"text-[#2A2E4A]",children:"|"}),o.jsx("button",{type:"button",onClick:()=>{x(""),h(!1),N("")},className:"underline hover:text-[#E5E7FF] transition-colors",children:"Hide"}),v?o.jsx("span",{className:"text-[11px] text-[#A9B6D9]",children:v}):null]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs uppercase tracking-wide text-[#7F91B6] block mb-1",children:"Alias name"}),o.jsx("input",{ref:P,type:"text",value:T.name||"",onChange:z=>{const O=i.findIndex(m=>m.id===T.id);O!==-1&&C(O,"name",z.target.value)},placeholder:"e.g. cherry_fruit",disabled:!y,className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs uppercase tracking-wide text-[#7F91B6] block mb-1",children:"Category (optional)"}),o.jsxs("select",{value:T.category||"",onChange:z=>{const O=i.findIndex(m=>m.id===T.id);O!==-1&&C(O,"category",z.target.value)},className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]",children:[o.jsx("option",{value:"",children:"Uncategorized"}),te.map(z=>o.jsx("option",{value:z,children:z||"Uncategorized"},z||"uncat"))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs uppercase tracking-wide text-[#7F91B6] block mb-1",children:"Expands to"}),o.jsx("textarea",{value:T.text,onChange:z=>{const O=i.findIndex(m=>m.id===T.id);O!==-1&&C(O,"text",z.target.value)},placeholder:"Prompt text for this alias",rows:2,disabled:!y,className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80] resize-y min-h-[72px]"})]}),o.jsxs("div",{className:"text-[11px] text-[#7F91B6]",children:["Invoke with:"," ",o.jsx("code",{className:"text-[#E5E7FF] bg-[#0F1A2F] px-1 py-0.5 rounded",children:T.category?`${T.category}:${T.name}`:T.name||"alias"})]})]})]}):null,i.length===0?o.jsx("div",{className:"rounded-lg border border-dashed border-[#2A2E4A] px-4 py-6 text-center text-sm text-[#A9B6D9]",children:"No aliases yet. Add your first one."}):o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3",children:R.map(z=>{const O=z.id===w,m=z.category?`${z.category}:${z.name}`:z.name,F=(z.text||"").slice(0,96)+((z.text||"").length>96?"":"");return o.jsxs("button",{type:"button",onClick:()=>x(H=>H===z.id?"":z.id),className:`text-left rounded-xl border px-3 py-3 transition-all btn-touch ${O?"border-[#5EF1D4] bg-[#0F1A2F] shadow-[0_12px_34px_rgba(5,7,22,0.35)]":"border-[#27304A] bg-[#0C1222]"}`,children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[o.jsx("div",{className:"text-sm font-semibold text-[#E5E7FF] truncate",children:z.name||"Untitled"}),O?o.jsx("span",{className:"text-xs text-[#5EF1D4]",children:""}):null]}),o.jsx("div",{className:"text-xs text-[#A9B6D9] line-clamp-2",children:F||""}),o.jsxs("div",{className:"mt-2 text-[11px] text-[#7F91B6] font-mono",children:["$",m||"alias","$"]})]},z.id)})})]})]})}),s?o.jsx("p",{className:"text-xs text-[#FF8F70]",children:"Could not load aliases. Try again later."}):null,r?o.jsx("p",{className:"text-xs text-[#A9B6D9]",children:"Loading aliases"}):null]}),T&&Y?o.jsxs("div",{className:"fixed inset-0 z-40 sm:hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>{x(""),h(!1),N("")}}),o.jsxs("div",{className:"absolute left-2 right-2 bg-[#0B1226] border border-[#2A2E4A] rounded-2xl shadow-[0_-10px_30px_rgba(4,7,16,0.35)] p-3 space-y-3 pb-3 overflow-y-auto",style:{maxHeight:"80vh",bottom:"72px"},children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-[#E5E7FF] leading-tight",children:T.name||"Untitled alias"}),T.category?o.jsxs("p",{className:"text-[11px] text-[#7F91B6]",children:["Category: ",T.category]}):null]}),o.jsx("button",{type:"button",onClick:()=>{x(""),h(!1),N("")},className:"text-sm text-[#E5E7FF] underline",children:"Close"})]}),o.jsxs("div",{className:"flex items-center gap-3 text-xs text-[#7F91B6]",children:[o.jsx("button",{type:"button",onClick:()=>{y?I():(h(!0),N("Editing"))},className:"underline hover:text-[#5EF1D4] transition-colors",children:y?l?"Saving":"Save":"Edit"}),o.jsx("span",{className:"text-[#2A2E4A]",children:"|"}),o.jsx("button",{type:"button",onClick:()=>{const z=i.findIndex(O=>O.id===T.id);z!==-1&&V(z)},className:"underline hover:text-[#FF8F70] transition-colors",children:"Remove"}),v?o.jsx("span",{className:"text-[11px] text-[#A9B6D9]",children:v}):null]}),o.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs uppercase tracking-wide text-[#7F91B6] block mb-1",children:"Alias name"}),o.jsx("input",{ref:P,type:"text",value:T.name||"",onChange:z=>{const O=i.findIndex(m=>m.id===T.id);O!==-1&&C(O,"name",z.target.value)},placeholder:"e.g. cherry_fruit",disabled:!y,className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs uppercase tracking-wide text-[#7F91B6] block mb-1",children:"Category (optional)"}),o.jsxs("select",{value:T.category||"",onChange:z=>{const O=i.findIndex(m=>m.id===T.id);O!==-1&&C(O,"category",z.target.value)},className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80]",children:[o.jsx("option",{value:"",children:"Uncategorized"}),te.map(z=>o.jsx("option",{value:z,children:z||"Uncategorized"},z||"uncat"))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs uppercase tracking-wide text-[#7F91B6] block mb-1",children:"Expands to"}),o.jsx("textarea",{value:T.text,onChange:z=>{const O=i.findIndex(m=>m.id===T.id);O!==-1&&C(O,"text",z.target.value)},placeholder:"Prompt text for this alias",rows:2,disabled:!y,className:"w-full rounded-lg border border-[#2A2E4A] bg-[#050716] px-3 py-2 text-sm text-[#E5E7FF] placeholder-[#6A6FA8] focus:outline-none focus:ring-1 focus:ring-[#3EF0FF80] resize-y min-h-[72px]"})]}),o.jsxs("div",{className:"text-[11px] text-[#7F91B6]",children:["Invoke with:"," ",o.jsx("code",{className:"text-[#E5E7FF] bg-[#0F1A2F] px-1 py-0.5 rounded",children:T.category?`${T.category}:${T.name}`:T.name||"alias"})]})]})]})]}):null]})}function Sw(){var y,h;const{authed:e,ready:t,login:n}=bo(),r=Bl(),s=((h=(y=Tt().state)==null?void 0:y.from)==null?void 0:h.pathname)||"/studio",[a,i]=c.useState(""),[u,d]=c.useState(""),[f,p]=c.useState(""),[g,w]=c.useState(!1),[x,j]=c.useState(!1);c.useEffect(()=>{try{localStorage.getItem("cozygen_idle_logout")&&(j(!0),localStorage.removeItem("cozygen_idle_logout"))}catch{}},[]),c.useEffect(()=>{t&&e&&r(s,{replace:!0})},[t,e,s,r]);const S=async v=>{v.preventDefault(),p(""),w(!0);try{await n(a,u),r(s,{replace:!0})}catch(N){N!=null&&N.unauthorized?p("Invalid username or password."):p("Unable to sign in. Please try again.")}finally{w(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-950 to-black px-4 py-10",children:o.jsx("div",{className:"w-full max-w-md rounded-2xl bg-slate-900/70 border border-slate-800/80 shadow-2xl backdrop-blur",children:o.jsxs("div",{className:"p-6 sm:p-8",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"h-10 w-10 rounded-xl bg-emerald-500/10 border border-emerald-400/30 flex items-center justify-center text-emerald-300 text-xl",children:""}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm uppercase tracking-[0.2em] text-slate-400",children:"CozyGen"}),o.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Sign in to continue"})]})]}),o.jsxs("form",{className:"space-y-4",onSubmit:S,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"login-username",className:"block text-sm font-medium text-slate-300 mb-2",children:"Username"}),o.jsx("input",{id:"login-username",type:"text",className:"w-full rounded-xl border border-slate-700 bg-slate-800/70 px-4 py-3 text-white placeholder-slate-500 focus:border-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-400/40 transition",value:a,onChange:v=>i(v.target.value),autoComplete:"username",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"login-password",className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),o.jsx("input",{id:"login-password",type:"password",className:"w-full rounded-xl border border-slate-700 bg-slate-800/70 px-4 py-3 text-white placeholder-slate-500 focus:border-emerald-400 focus:outline-none focus:ring-2 focus:ring-emerald-400/40 transition",value:u,onChange:v=>d(v.target.value),autoComplete:"current-password",required:!0})]}),f&&o.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-red-200 text-sm",children:f}),x&&!f&&o.jsx("div",{className:"rounded-lg border border-amber-500/60 bg-amber-500/10 px-4 py-3 text-amber-200 text-sm",children:"You were signed out due to inactivity. Please sign in again."}),o.jsx("button",{type:"submit",disabled:g,className:"w-full inline-flex items-center justify-center gap-2 rounded-xl bg-emerald-500 hover:bg-emerald-400 text-slate-950 font-semibold px-4 py-3 transition disabled:opacity-60 disabled:cursor-not-allowed shadow-lg shadow-emerald-500/20",children:g?"Signing in":"Sign in"})]}),o.jsxs("p",{className:"text-xs text-slate-500 mt-6",children:["Access is protected by CozyGen auth. Set ",o.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /",o.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server to enable."]})]})})})}function bw({containerRef:e}){const{pathname:t,hash:n}=Tt();return c.useEffect(()=>{if(n)return;const r=e==null?void 0:e.current;if(r&&typeof r.scrollTo=="function"){r.scrollTo({top:0,left:0,behavior:"auto"});return}typeof window<"u"&&window.scrollTo(0,0)},[t,n,e]),null}function rr({children:e}){const{authed:t,ready:n}=bo(),r=Tt();return n?t?e:o.jsx(Yp,{to:"/login",state:{from:r},replace:!0}):o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-200",children:"Loading"})}function Cw(){const{pathname:e}=Tt(),{defaultCreds:t,authed:n}=bo(),r=e==="/login",l=c.useRef(null);return o.jsxs("div",{className:"app-shell",children:[!r&&o.jsx(Gx,{}),!r&&n&&t&&o.jsxs("div",{className:"flex-shrink-0 bg-amber-500/10 text-amber-200 border-b border-amber-400/50 px-4 py-2 text-sm text-center",children:["Default CozyGen credentials are still in use. Change ",o.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /",o.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server."]}),o.jsx(bw,{containerRef:l}),o.jsx("main",{ref:l,className:r?"app-content is-login":"app-content",children:o.jsxs(tv,{children:[o.jsx(Ht,{path:"/login",element:o.jsx(Sw,{})}),o.jsx(Ht,{path:"/",element:o.jsx(rr,{children:o.jsx(hd,{})})}),o.jsx(Ht,{path:"/studio",element:o.jsx(rr,{children:o.jsx(hd,{})})}),o.jsx(Ht,{path:"/gallery",element:o.jsx(rr,{children:o.jsx(ew,{})})}),o.jsx(Ht,{path:"/presets",element:o.jsx(rr,{children:o.jsx(dw,{})})}),o.jsx(Ht,{path:"/lora-library",element:o.jsx(rr,{children:o.jsx(yw,{})})}),o.jsx(Ht,{path:"/aliases",element:o.jsx(rr,{children:o.jsx(jw,{})})}),o.jsx(Ht,{path:"*",element:o.jsx(Yp,{to:"/studio",replace:!0})})]})}),!r&&o.jsx(Xx,{})]})}function kw(){return o.jsx(uv,{children:o.jsx(Ov,{children:o.jsx(Cw,{})})})}da.createRoot(document.getElementById("root")).render(o.jsx(tl.StrictMode,{children:o.jsx(kw,{})}));
