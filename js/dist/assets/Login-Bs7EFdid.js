import{H as y,J as b,K as w,r as s,j as e,L as C}from"./index-BHgq2Ao1.js";function z(){var h,p;const{authed:l,ready:r,login:f}=y(),t=b(),n=((p=(h=w().state)==null?void 0:h.from)==null?void 0:p.pathname)||"/studio",[c,x]=s.useState(""),[u,j]=s.useState(""),[d,i]=s.useState(""),[m,g]=s.useState(!1),[N,v]=s.useState(!1);s.useEffect(()=>{try{localStorage.getItem("cozygen_idle_logout")&&(v(!0),localStorage.removeItem("cozygen_idle_logout"))}catch{}},[]),s.useEffect(()=>{r&&l&&t(n,{replace:!0})},[r,l,n,t]);const S=async a=>{a.preventDefault(),i(""),g(!0);try{await f(c,u),t(n,{replace:!0})}catch(o){o!=null&&o.unauthorized?i("Invalid username or password."):i("Unable to sign in. Please try again.")}finally{g(!1)}};return e.jsx("div",{className:"login-shell",children:e.jsxs("div",{className:"neon-card login-card",children:[e.jsxs("div",{className:"login-brand",children:[e.jsx(C,{size:34}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"login-title",children:"Sign in"}),e.jsx("div",{className:"login-subtitle",children:"Continue to CozyGen Studio"})]})]}),e.jsxs("form",{className:"login-form",onSubmit:S,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"login-username",className:"login-label",children:"Username"}),e.jsx("input",{id:"login-username",type:"text",className:"ui-control ui-input",value:c,onChange:a=>x(a.target.value),autoComplete:"username",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"login-password",className:"login-label",children:"Password"}),e.jsx("input",{id:"login-password",type:"password",className:"ui-control ui-input",value:u,onChange:a=>j(a.target.value),autoComplete:"current-password",required:!0})]}),d?e.jsx("div",{className:"ui-alert",children:d}):N?e.jsx("div",{className:"ui-alert is-warn",children:"You were signed out due to inactivity. Please sign in again."}):null,e.jsx("button",{type:"submit",disabled:m,className:"ui-button is-primary w-full",children:m?"Signing inâ€¦":"Sign in"})]}),e.jsxs("p",{className:"login-footnote",children:["Access is protected by CozyGen auth. Set ",e.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /"," ",e.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server to enable."]})]})})}export{z as default};
