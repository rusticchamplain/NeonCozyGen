function Xm(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Jm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Md={exports:{}},ao={},Od={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ms=Symbol.for("react.element"),Zm=Symbol.for("react.portal"),eh=Symbol.for("react.fragment"),th=Symbol.for("react.strict_mode"),nh=Symbol.for("react.profiler"),rh=Symbol.for("react.provider"),sh=Symbol.for("react.context"),lh=Symbol.for("react.forward_ref"),oh=Symbol.for("react.suspense"),ih=Symbol.for("react.memo"),ah=Symbol.for("react.lazy"),Dc=Symbol.iterator;function ch(e){return e===null||typeof e!="object"?null:(e=Dc&&e[Dc]||e["@@iterator"],typeof e=="function"?e:null)}var Fd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dd=Object.assign,Ud={};function Ur(e,t,n){this.props=e,this.context=t,this.refs=Ud,this.updater=n||Fd}Ur.prototype.isReactComponent={};Ur.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ur.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Bd(){}Bd.prototype=Ur.prototype;function ka(e,t,n){this.props=e,this.context=t,this.refs=Ud,this.updater=n||Fd}var Ca=ka.prototype=new Bd;Ca.constructor=ka;Dd(Ca,Ur.prototype);Ca.isPureReactComponent=!0;var Uc=Array.isArray,Wd=Object.prototype.hasOwnProperty,ba={current:null},Vd={key:!0,ref:!0,__self:!0,__source:!0};function Hd(e,t,n){var r,s={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Wd.call(t,r)&&!Vd.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ms,type:e,key:o,ref:i,props:s,_owner:ba.current}}function uh(e,t){return{$$typeof:Ms,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ea(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ms}function dh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Bc=/\/+/g;function zo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?dh(""+e.key):t.toString(36)}function yl(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ms:case Zm:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+zo(i,0):r,Uc(s)?(n="",e!=null&&(n=e.replace(Bc,"$&/")+"/"),yl(s,t,n,"",function(d){return d})):s!=null&&(Ea(s)&&(s=uh(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Bc,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",Uc(e))for(var a=0;a<e.length;a++){o=e[a];var c=r+zo(o,a);i+=yl(o,t,n,c,s)}else if(c=ch(e),typeof c=="function")for(e=c.call(e),a=0;!(o=e.next()).done;)o=o.value,c=r+zo(o,a++),i+=yl(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Xs(e,t,n){if(e==null)return e;var r=[],s=0;return yl(e,r,"","",function(o){return t.call(n,o,s++)}),r}function fh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ft={current:null},vl={transition:null},ph={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:vl,ReactCurrentOwner:ba};function Gd(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:Xs,forEach:function(e,t,n){Xs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Xs(e,function(){t++}),t},toArray:function(e){return Xs(e,function(t){return t})||[]},only:function(e){if(!Ea(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};je.Component=Ur;je.Fragment=eh;je.Profiler=nh;je.PureComponent=ka;je.StrictMode=th;je.Suspense=oh;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ph;je.act=Gd;je.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Dd({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=ba.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Wd.call(t,c)&&!Vd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Ms,type:e.type,key:s,ref:o,props:r,_owner:i}};je.createContext=function(e){return e={$$typeof:sh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:rh,_context:e},e.Consumer=e};je.createElement=Hd;je.createFactory=function(e){var t=Hd.bind(null,e);return t.type=e,t};je.createRef=function(){return{current:null}};je.forwardRef=function(e){return{$$typeof:lh,render:e}};je.isValidElement=Ea;je.lazy=function(e){return{$$typeof:ah,_payload:{_status:-1,_result:e},_init:fh}};je.memo=function(e,t){return{$$typeof:ih,type:e,compare:t===void 0?null:t}};je.startTransition=function(e){var t=vl.transition;vl.transition={};try{e()}finally{vl.transition=t}};je.unstable_act=Gd;je.useCallback=function(e,t){return ft.current.useCallback(e,t)};je.useContext=function(e){return ft.current.useContext(e)};je.useDebugValue=function(){};je.useDeferredValue=function(e){return ft.current.useDeferredValue(e)};je.useEffect=function(e,t){return ft.current.useEffect(e,t)};je.useId=function(){return ft.current.useId()};je.useImperativeHandle=function(e,t,n){return ft.current.useImperativeHandle(e,t,n)};je.useInsertionEffect=function(e,t){return ft.current.useInsertionEffect(e,t)};je.useLayoutEffect=function(e,t){return ft.current.useLayoutEffect(e,t)};je.useMemo=function(e,t){return ft.current.useMemo(e,t)};je.useReducer=function(e,t,n){return ft.current.useReducer(e,t,n)};je.useRef=function(e){return ft.current.useRef(e)};je.useState=function(e){return ft.current.useState(e)};je.useSyncExternalStore=function(e,t,n){return ft.current.useSyncExternalStore(e,t,n)};je.useTransition=function(){return ft.current.useTransition()};je.version="18.3.1";Od.exports=je;var u=Od.exports;const Pt=Jm(u),mh=Xm({__proto__:null,default:Pt},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh=u,gh=Symbol.for("react.element"),yh=Symbol.for("react.fragment"),vh=Object.prototype.hasOwnProperty,xh=hh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wh={key:!0,ref:!0,__self:!0,__source:!0};function Kd(e,t,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)vh.call(t,r)&&!wh.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:gh,type:e,key:o,ref:i,props:s,_owner:xh.current}}ao.Fragment=yh;ao.jsx=Kd;ao.jsxs=Kd;Md.exports=ao;var l=Md.exports,hi={},Qd={exports:{}},bt={},Yd={exports:{}},qd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,I){var E=k.length;k.push(I);e:for(;0<E;){var L=E-1>>>1,M=k[L];if(0<s(M,I))k[L]=I,k[E]=M,E=L;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var I=k[0],E=k.pop();if(E!==I){k[0]=E;e:for(var L=0,M=k.length,z=M>>>1;L<z;){var $=2*(L+1)-1,Z=k[$],H=$+1,D=k[H];if(0>s(Z,E))H<M&&0>s(D,Z)?(k[L]=D,k[H]=E,L=H):(k[L]=Z,k[$]=E,L=$);else if(H<M&&0>s(D,E))k[L]=D,k[H]=E,L=H;else break e}}return I}function s(k,I){var E=k.sortIndex-I.sortIndex;return E!==0?E:k.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var c=[],d=[],g=1,m=null,h=3,v=!1,w=!1,N=!1,j=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(k){for(var I=n(d);I!==null;){if(I.callback===null)r(d);else if(I.startTime<=k)r(d),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(d)}}function S(k){if(N=!1,y(k),!w)if(n(c)!==null)w=!0,le(R);else{var I=n(d);I!==null&&ae(S,I.startTime-k)}}function R(k,I){w=!1,N&&(N=!1,p(_),_=-1),v=!0;var E=h;try{for(y(I),m=n(c);m!==null&&(!(m.expirationTime>I)||k&&!W());){var L=m.callback;if(typeof L=="function"){m.callback=null,h=m.priorityLevel;var M=L(m.expirationTime<=I);I=e.unstable_now(),typeof M=="function"?m.callback=M:m===n(c)&&r(c),y(I)}else r(c);m=n(c)}if(m!==null)var z=!0;else{var $=n(d);$!==null&&ae(S,$.startTime-I),z=!1}return z}finally{m=null,h=E,v=!1}}var P=!1,O=null,_=-1,V=5,A=-1;function W(){return!(e.unstable_now()-A<V)}function ue(){if(O!==null){var k=e.unstable_now();A=k;var I=!0;try{I=O(!0,k)}finally{I?se():(P=!1,O=null)}}else P=!1}var se;if(typeof f=="function")se=function(){f(ue)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,q=pe.port2;pe.port1.onmessage=ue,se=function(){q.postMessage(null)}}else se=function(){j(ue,0)};function le(k){O=k,P||(P=!0,se())}function ae(k,I){_=j(function(){k(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){w||v||(w=!0,le(R))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(k){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var E=h;h=I;try{return k()}finally{h=E}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,I){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var E=h;h=k;try{return I()}finally{h=E}},e.unstable_scheduleCallback=function(k,I,E){var L=e.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?L+E:L):E=L,k){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=E+M,k={id:g++,callback:I,priorityLevel:k,startTime:E,expirationTime:M,sortIndex:-1},E>L?(k.sortIndex=E,t(d,k),n(c)===null&&k===n(d)&&(N?(p(_),_=-1):N=!0,ae(S,E-L))):(k.sortIndex=M,t(c,k),w||v||(w=!0,le(R))),k},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(k){var I=h;return function(){var E=h;h=I;try{return k.apply(this,arguments)}finally{h=E}}}})(qd);Yd.exports=qd;var jh=Yd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sh=u,Ct=jh;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xd=new Set,vs={};function or(e,t){Tr(e,t),Tr(e+"Capture",t)}function Tr(e,t){for(vs[e]=t,e=0;e<t.length;e++)Xd.add(t[e])}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gi=Object.prototype.hasOwnProperty,Nh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wc={},Vc={};function kh(e){return gi.call(Vc,e)?!0:gi.call(Wc,e)?!1:Nh.test(e)?Vc[e]=!0:(Wc[e]=!0,!1)}function Ch(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bh(e,t,n,r){if(t===null||typeof t>"u"||Ch(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function pt(e,t,n,r,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){st[e]=new pt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];st[t]=new pt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){st[e]=new pt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){st[e]=new pt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){st[e]=new pt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){st[e]=new pt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){st[e]=new pt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){st[e]=new pt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){st[e]=new pt(e,5,!1,e.toLowerCase(),null,!1,!1)});var La=/[\-:]([a-z])/g;function Pa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(La,Pa);st[t]=new pt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(La,Pa);st[t]=new pt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(La,Pa);st[t]=new pt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){st[e]=new pt(e,1,!1,e.toLowerCase(),null,!1,!1)});st.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){st[e]=new pt(e,1,!1,e.toLowerCase(),null,!0,!0)});function _a(e,t,n,r){var s=st.hasOwnProperty(t)?st[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bh(t,n,s,r)&&(n=null),r||s===null?kh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var gn=Sh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Js=Symbol.for("react.element"),pr=Symbol.for("react.portal"),mr=Symbol.for("react.fragment"),Ra=Symbol.for("react.strict_mode"),yi=Symbol.for("react.profiler"),Jd=Symbol.for("react.provider"),Zd=Symbol.for("react.context"),Ia=Symbol.for("react.forward_ref"),vi=Symbol.for("react.suspense"),xi=Symbol.for("react.suspense_list"),Ta=Symbol.for("react.memo"),wn=Symbol.for("react.lazy"),ef=Symbol.for("react.offscreen"),Hc=Symbol.iterator;function Gr(e){return e===null||typeof e!="object"?null:(e=Hc&&e[Hc]||e["@@iterator"],typeof e=="function"?e:null)}var Ue=Object.assign,Ao;function ts(e){if(Ao===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ao=t&&t[1]||""}return`
`+Ao+e}var $o=!1;function Mo(e,t){if(!e||$o)return"";$o=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==o[a]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=a);break}}}finally{$o=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ts(e):""}function Eh(e){switch(e.tag){case 5:return ts(e.type);case 16:return ts("Lazy");case 13:return ts("Suspense");case 19:return ts("SuspenseList");case 0:case 2:case 15:return e=Mo(e.type,!1),e;case 11:return e=Mo(e.type.render,!1),e;case 1:return e=Mo(e.type,!0),e;default:return""}}function wi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case mr:return"Fragment";case pr:return"Portal";case yi:return"Profiler";case Ra:return"StrictMode";case vi:return"Suspense";case xi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Zd:return(e.displayName||"Context")+".Consumer";case Jd:return(e._context.displayName||"Context")+".Provider";case Ia:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ta:return t=e.displayName||null,t!==null?t:wi(e.type)||"Memo";case wn:t=e._payload,e=e._init;try{return wi(e(t))}catch{}}return null}function Lh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wi(t);case 8:return t===Ra?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ph(e){var t=tf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zs(e){e._valueTracker||(e._valueTracker=Ph(e))}function nf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=tf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function _l(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ji(e,t){var n=t.checked;return Ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Gc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Mn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function rf(e,t){t=t.checked,t!=null&&_a(e,"checked",t,!1)}function Si(e,t){rf(e,t);var n=Mn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ni(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ni(e,t.type,Mn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Kc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ni(e,t,n){(t!=="number"||_l(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ns=Array.isArray;function Cr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Mn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ki(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Y(92));if(ns(n)){if(1<n.length)throw Error(Y(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Mn(n)}}function sf(e,t){var n=Mn(t.value),r=Mn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Yc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ci(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var el,of=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(el=el||document.createElement("div"),el.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=el.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var is={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_h=["Webkit","ms","Moz","O"];Object.keys(is).forEach(function(e){_h.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),is[t]=is[e]})});function af(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||is.hasOwnProperty(e)&&is[e]?(""+t).trim():t+"px"}function cf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=af(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Rh=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bi(e,t){if(t){if(Rh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function Ei(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Li=null;function za(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pi=null,br=null,Er=null;function qc(e){if(e=Ds(e)){if(typeof Pi!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=mo(t),Pi(e.stateNode,e.type,t))}}function uf(e){br?Er?Er.push(e):Er=[e]:br=e}function df(){if(br){var e=br,t=Er;if(Er=br=null,qc(e),t)for(e=0;e<t.length;e++)qc(t[e])}}function ff(e,t){return e(t)}function pf(){}var Oo=!1;function mf(e,t,n){if(Oo)return e(t,n);Oo=!0;try{return ff(e,t,n)}finally{Oo=!1,(br!==null||Er!==null)&&(pf(),df())}}function ws(e,t){var n=e.stateNode;if(n===null)return null;var r=mo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Y(231,t,typeof n));return n}var _i=!1;if(fn)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){_i=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{_i=!1}function Ih(e,t,n,r,s,o,i,a,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(g){this.onError(g)}}var as=!1,Rl=null,Il=!1,Ri=null,Th={onError:function(e){as=!0,Rl=e}};function zh(e,t,n,r,s,o,i,a,c){as=!1,Rl=null,Ih.apply(Th,arguments)}function Ah(e,t,n,r,s,o,i,a,c){if(zh.apply(this,arguments),as){if(as){var d=Rl;as=!1,Rl=null}else throw Error(Y(198));Il||(Il=!0,Ri=d)}}function ir(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function hf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xc(e){if(ir(e)!==e)throw Error(Y(188))}function $h(e){var t=e.alternate;if(!t){if(t=ir(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Xc(s),e;if(o===r)return Xc(s),t;o=o.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:t}function gf(e){return e=$h(e),e!==null?yf(e):null}function yf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yf(e);if(t!==null)return t;e=e.sibling}return null}var vf=Ct.unstable_scheduleCallback,Jc=Ct.unstable_cancelCallback,Mh=Ct.unstable_shouldYield,Oh=Ct.unstable_requestPaint,He=Ct.unstable_now,Fh=Ct.unstable_getCurrentPriorityLevel,Aa=Ct.unstable_ImmediatePriority,xf=Ct.unstable_UserBlockingPriority,Tl=Ct.unstable_NormalPriority,Dh=Ct.unstable_LowPriority,wf=Ct.unstable_IdlePriority,co=null,Zt=null;function Uh(e){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(co,e,void 0,(e.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Vh,Bh=Math.log,Wh=Math.LN2;function Vh(e){return e>>>=0,e===0?32:31-(Bh(e)/Wh|0)|0}var tl=64,nl=4194304;function rs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=rs(a):(o&=i,o!==0&&(r=rs(o)))}else i=n&~s,i!==0?r=rs(i):o!==0&&(r=rs(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ut(t),s=1<<n,r|=e[n],t&=~s;return r}function Hh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Ut(o),a=1<<i,c=s[i];c===-1?(!(a&n)||a&r)&&(s[i]=Hh(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}function Ii(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jf(){var e=tl;return tl<<=1,!(tl&4194240)&&(tl=64),e}function Fo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Os(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ut(t),e[t]=n}function Kh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Ut(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function $a(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ut(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Pe=0;function Sf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Nf,Ma,kf,Cf,bf,Ti=!1,rl=[],En=null,Ln=null,Pn=null,js=new Map,Ss=new Map,Sn=[],Qh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zc(e,t){switch(e){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":js.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(t.pointerId)}}function Qr(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Ds(t),t!==null&&Ma(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Yh(e,t,n,r,s){switch(t){case"focusin":return En=Qr(En,e,t,n,r,s),!0;case"dragenter":return Ln=Qr(Ln,e,t,n,r,s),!0;case"mouseover":return Pn=Qr(Pn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return js.set(o,Qr(js.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Ss.set(o,Qr(Ss.get(o)||null,e,t,n,r,s)),!0}return!1}function Ef(e){var t=qn(e.target);if(t!==null){var n=ir(t);if(n!==null){if(t=n.tag,t===13){if(t=hf(n),t!==null){e.blockedOn=t,bf(e.priority,function(){kf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=zi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Li=r,n.target.dispatchEvent(r),Li=null}else return t=Ds(n),t!==null&&Ma(t),e.blockedOn=n,!1;t.shift()}return!0}function eu(e,t,n){xl(e)&&n.delete(t)}function qh(){Ti=!1,En!==null&&xl(En)&&(En=null),Ln!==null&&xl(Ln)&&(Ln=null),Pn!==null&&xl(Pn)&&(Pn=null),js.forEach(eu),Ss.forEach(eu)}function Yr(e,t){e.blockedOn===t&&(e.blockedOn=null,Ti||(Ti=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,qh)))}function Ns(e){function t(s){return Yr(s,e)}if(0<rl.length){Yr(rl[0],e);for(var n=1;n<rl.length;n++){var r=rl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(En!==null&&Yr(En,e),Ln!==null&&Yr(Ln,e),Pn!==null&&Yr(Pn,e),js.forEach(t),Ss.forEach(t),n=0;n<Sn.length;n++)r=Sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sn.length&&(n=Sn[0],n.blockedOn===null);)Ef(n),n.blockedOn===null&&Sn.shift()}var Lr=gn.ReactCurrentBatchConfig,Al=!0;function Xh(e,t,n,r){var s=Pe,o=Lr.transition;Lr.transition=null;try{Pe=1,Oa(e,t,n,r)}finally{Pe=s,Lr.transition=o}}function Jh(e,t,n,r){var s=Pe,o=Lr.transition;Lr.transition=null;try{Pe=4,Oa(e,t,n,r)}finally{Pe=s,Lr.transition=o}}function Oa(e,t,n,r){if(Al){var s=zi(e,t,n,r);if(s===null)Yo(e,t,r,$l,n),Zc(e,r);else if(Yh(s,e,t,n,r))r.stopPropagation();else if(Zc(e,r),t&4&&-1<Qh.indexOf(e)){for(;s!==null;){var o=Ds(s);if(o!==null&&Nf(o),o=zi(e,t,n,r),o===null&&Yo(e,t,r,$l,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Yo(e,t,r,null,n)}}var $l=null;function zi(e,t,n,r){if($l=null,e=za(r),e=qn(e),e!==null)if(t=ir(e),t===null)e=null;else if(n=t.tag,n===13){if(e=hf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $l=e,null}function Lf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fh()){case Aa:return 1;case xf:return 4;case Tl:case Dh:return 16;case wf:return 536870912;default:return 16}default:return 16}}var kn=null,Fa=null,wl=null;function Pf(){if(wl)return wl;var e,t=Fa,n=t.length,r,s="value"in kn?kn.value:kn.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[o-r];r++);return wl=s.slice(e,1<r?1-r:void 0)}function jl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sl(){return!0}function tu(){return!1}function Et(e){function t(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?sl:tu,this.isPropagationStopped=tu,this}return Ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sl)},persist:function(){},isPersistent:sl}),t}var Br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Da=Et(Br),Fs=Ue({},Br,{view:0,detail:0}),Zh=Et(Fs),Do,Uo,qr,uo=Ue({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ua,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qr&&(qr&&e.type==="mousemove"?(Do=e.screenX-qr.screenX,Uo=e.screenY-qr.screenY):Uo=Do=0,qr=e),Do)},movementY:function(e){return"movementY"in e?e.movementY:Uo}}),nu=Et(uo),eg=Ue({},uo,{dataTransfer:0}),tg=Et(eg),ng=Ue({},Fs,{relatedTarget:0}),Bo=Et(ng),rg=Ue({},Br,{animationName:0,elapsedTime:0,pseudoElement:0}),sg=Et(rg),lg=Ue({},Br,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),og=Et(lg),ig=Ue({},Br,{data:0}),ru=Et(ig),ag={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ug={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ug[e])?!!t[e]:!1}function Ua(){return dg}var fg=Ue({},Fs,{key:function(e){if(e.key){var t=ag[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=jl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ua,charCode:function(e){return e.type==="keypress"?jl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?jl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pg=Et(fg),mg=Ue({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),su=Et(mg),hg=Ue({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ua}),gg=Et(hg),yg=Ue({},Br,{propertyName:0,elapsedTime:0,pseudoElement:0}),vg=Et(yg),xg=Ue({},uo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wg=Et(xg),jg=[9,13,27,32],Ba=fn&&"CompositionEvent"in window,cs=null;fn&&"documentMode"in document&&(cs=document.documentMode);var Sg=fn&&"TextEvent"in window&&!cs,_f=fn&&(!Ba||cs&&8<cs&&11>=cs),lu=" ",ou=!1;function Rf(e,t){switch(e){case"keyup":return jg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function If(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hr=!1;function Ng(e,t){switch(e){case"compositionend":return If(t);case"keypress":return t.which!==32?null:(ou=!0,lu);case"textInput":return e=t.data,e===lu&&ou?null:e;default:return null}}function kg(e,t){if(hr)return e==="compositionend"||!Ba&&Rf(e,t)?(e=Pf(),wl=Fa=kn=null,hr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _f&&t.locale!=="ko"?null:t.data;default:return null}}var Cg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Cg[e.type]:t==="textarea"}function Tf(e,t,n,r){uf(r),t=Ml(t,"onChange"),0<t.length&&(n=new Da("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var us=null,ks=null;function bg(e){Vf(e,0)}function fo(e){var t=vr(e);if(nf(t))return e}function Eg(e,t){if(e==="change")return t}var zf=!1;if(fn){var Wo;if(fn){var Vo="oninput"in document;if(!Vo){var au=document.createElement("div");au.setAttribute("oninput","return;"),Vo=typeof au.oninput=="function"}Wo=Vo}else Wo=!1;zf=Wo&&(!document.documentMode||9<document.documentMode)}function cu(){us&&(us.detachEvent("onpropertychange",Af),ks=us=null)}function Af(e){if(e.propertyName==="value"&&fo(ks)){var t=[];Tf(t,ks,e,za(e)),mf(bg,t)}}function Lg(e,t,n){e==="focusin"?(cu(),us=t,ks=n,us.attachEvent("onpropertychange",Af)):e==="focusout"&&cu()}function Pg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fo(ks)}function _g(e,t){if(e==="click")return fo(t)}function Rg(e,t){if(e==="input"||e==="change")return fo(t)}function Ig(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wt=typeof Object.is=="function"?Object.is:Ig;function Cs(e,t){if(Wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!gi.call(t,s)||!Wt(e[s],t[s]))return!1}return!0}function uu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function du(e,t){var n=uu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uu(n)}}function $f(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$f(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mf(){for(var e=window,t=_l();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_l(e.document)}return t}function Wa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Tg(e){var t=Mf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&$f(n.ownerDocument.documentElement,n)){if(r!==null&&Wa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=du(n,o);var i=du(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zg=fn&&"documentMode"in document&&11>=document.documentMode,gr=null,Ai=null,ds=null,$i=!1;function fu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$i||gr==null||gr!==_l(r)||(r=gr,"selectionStart"in r&&Wa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ds&&Cs(ds,r)||(ds=r,r=Ml(Ai,"onSelect"),0<r.length&&(t=new Da("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function ll(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yr={animationend:ll("Animation","AnimationEnd"),animationiteration:ll("Animation","AnimationIteration"),animationstart:ll("Animation","AnimationStart"),transitionend:ll("Transition","TransitionEnd")},Ho={},Of={};fn&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete yr.animationend.animation,delete yr.animationiteration.animation,delete yr.animationstart.animation),"TransitionEvent"in window||delete yr.transitionend.transition);function po(e){if(Ho[e])return Ho[e];if(!yr[e])return e;var t=yr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Of)return Ho[e]=t[n];return e}var Ff=po("animationend"),Df=po("animationiteration"),Uf=po("animationstart"),Bf=po("transitionend"),Wf=new Map,pu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){Wf.set(e,t),or(t,[e])}for(var Go=0;Go<pu.length;Go++){var Ko=pu[Go],Ag=Ko.toLowerCase(),$g=Ko[0].toUpperCase()+Ko.slice(1);Dn(Ag,"on"+$g)}Dn(Ff,"onAnimationEnd");Dn(Df,"onAnimationIteration");Dn(Uf,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(Bf,"onTransitionEnd");Tr("onMouseEnter",["mouseout","mouseover"]);Tr("onMouseLeave",["mouseout","mouseover"]);Tr("onPointerEnter",["pointerout","pointerover"]);Tr("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mg=new Set("cancel close invalid load scroll toggle".split(" ").concat(ss));function mu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ah(r,t,void 0,e),e.currentTarget=null}function Vf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==o&&s.isPropagationStopped())break e;mu(s,a,d),o=c}else for(i=0;i<r.length;i++){if(a=r[i],c=a.instance,d=a.currentTarget,a=a.listener,c!==o&&s.isPropagationStopped())break e;mu(s,a,d),o=c}}}if(Il)throw e=Ri,Il=!1,Ri=null,e}function ze(e,t){var n=t[Ui];n===void 0&&(n=t[Ui]=new Set);var r=e+"__bubble";n.has(r)||(Hf(t,e,2,!1),n.add(r))}function Qo(e,t,n){var r=0;t&&(r|=4),Hf(n,e,r,t)}var ol="_reactListening"+Math.random().toString(36).slice(2);function bs(e){if(!e[ol]){e[ol]=!0,Xd.forEach(function(n){n!=="selectionchange"&&(Mg.has(n)||Qo(n,!1,e),Qo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ol]||(t[ol]=!0,Qo("selectionchange",!1,t))}}function Hf(e,t,n,r){switch(Lf(t)){case 1:var s=Xh;break;case 4:s=Jh;break;default:s=Oa}n=s.bind(null,t,n,e),s=void 0,!_i||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Yo(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;a!==null;){if(i=qn(a),i===null)return;if(c=i.tag,c===5||c===6){r=o=i;continue e}a=a.parentNode}}r=r.return}mf(function(){var d=o,g=za(n),m=[];e:{var h=Wf.get(e);if(h!==void 0){var v=Da,w=e;switch(e){case"keypress":if(jl(n)===0)break e;case"keydown":case"keyup":v=pg;break;case"focusin":w="focus",v=Bo;break;case"focusout":w="blur",v=Bo;break;case"beforeblur":case"afterblur":v=Bo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=nu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=tg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=gg;break;case Ff:case Df:case Uf:v=sg;break;case Bf:v=vg;break;case"scroll":v=Zh;break;case"wheel":v=wg;break;case"copy":case"cut":case"paste":v=og;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=su}var N=(t&4)!==0,j=!N&&e==="scroll",p=N?h!==null?h+"Capture":null:h;N=[];for(var f=d,y;f!==null;){y=f;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,p!==null&&(S=ws(f,p),S!=null&&N.push(Es(f,S,y)))),j)break;f=f.return}0<N.length&&(h=new v(h,w,null,n,g),m.push({event:h,listeners:N}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",h&&n!==Li&&(w=n.relatedTarget||n.fromElement)&&(qn(w)||w[pn]))break e;if((v||h)&&(h=g.window===g?g:(h=g.ownerDocument)?h.defaultView||h.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=d,w=w?qn(w):null,w!==null&&(j=ir(w),w!==j||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=d),v!==w)){if(N=nu,S="onMouseLeave",p="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(N=su,S="onPointerLeave",p="onPointerEnter",f="pointer"),j=v==null?h:vr(v),y=w==null?h:vr(w),h=new N(S,f+"leave",v,n,g),h.target=j,h.relatedTarget=y,S=null,qn(g)===d&&(N=new N(p,f+"enter",w,n,g),N.target=y,N.relatedTarget=j,S=N),j=S,v&&w)t:{for(N=v,p=w,f=0,y=N;y;y=cr(y))f++;for(y=0,S=p;S;S=cr(S))y++;for(;0<f-y;)N=cr(N),f--;for(;0<y-f;)p=cr(p),y--;for(;f--;){if(N===p||p!==null&&N===p.alternate)break t;N=cr(N),p=cr(p)}N=null}else N=null;v!==null&&hu(m,h,v,N,!1),w!==null&&j!==null&&hu(m,j,w,N,!0)}}e:{if(h=d?vr(d):window,v=h.nodeName&&h.nodeName.toLowerCase(),v==="select"||v==="input"&&h.type==="file")var R=Eg;else if(iu(h))if(zf)R=Rg;else{R=Pg;var P=Lg}else(v=h.nodeName)&&v.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(R=_g);if(R&&(R=R(e,d))){Tf(m,R,n,g);break e}P&&P(e,h,d),e==="focusout"&&(P=h._wrapperState)&&P.controlled&&h.type==="number"&&Ni(h,"number",h.value)}switch(P=d?vr(d):window,e){case"focusin":(iu(P)||P.contentEditable==="true")&&(gr=P,Ai=d,ds=null);break;case"focusout":ds=Ai=gr=null;break;case"mousedown":$i=!0;break;case"contextmenu":case"mouseup":case"dragend":$i=!1,fu(m,n,g);break;case"selectionchange":if(zg)break;case"keydown":case"keyup":fu(m,n,g)}var O;if(Ba)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else hr?Rf(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(_f&&n.locale!=="ko"&&(hr||_!=="onCompositionStart"?_==="onCompositionEnd"&&hr&&(O=Pf()):(kn=g,Fa="value"in kn?kn.value:kn.textContent,hr=!0)),P=Ml(d,_),0<P.length&&(_=new ru(_,e,null,n,g),m.push({event:_,listeners:P}),O?_.data=O:(O=If(n),O!==null&&(_.data=O)))),(O=Sg?Ng(e,n):kg(e,n))&&(d=Ml(d,"onBeforeInput"),0<d.length&&(g=new ru("onBeforeInput","beforeinput",null,n,g),m.push({event:g,listeners:d}),g.data=O))}Vf(m,t)})}function Es(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ml(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ws(e,n),o!=null&&r.unshift(Es(e,o,s)),o=ws(e,t),o!=null&&r.push(Es(e,o,s))),e=e.return}return r}function cr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hu(e,t,n,r,s){for(var o=t._reactName,i=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,s?(c=ws(n,o),c!=null&&i.unshift(Es(n,c,a))):s||(c=ws(n,o),c!=null&&i.push(Es(n,c,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Og=/\r\n?/g,Fg=/\u0000|\uFFFD/g;function gu(e){return(typeof e=="string"?e:""+e).replace(Og,`
`).replace(Fg,"")}function il(e,t,n){if(t=gu(t),gu(e)!==t&&n)throw Error(Y(425))}function Ol(){}var Mi=null,Oi=null;function Fi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Di=typeof setTimeout=="function"?setTimeout:void 0,Dg=typeof clearTimeout=="function"?clearTimeout:void 0,yu=typeof Promise=="function"?Promise:void 0,Ug=typeof queueMicrotask=="function"?queueMicrotask:typeof yu<"u"?function(e){return yu.resolve(null).then(e).catch(Bg)}:Di;function Bg(e){setTimeout(function(){throw e})}function qo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ns(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ns(t)}function _n(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wr=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Wr,Ls="__reactProps$"+Wr,pn="__reactContainer$"+Wr,Ui="__reactEvents$"+Wr,Wg="__reactListeners$"+Wr,Vg="__reactHandles$"+Wr;function qn(e){var t=e[Qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pn]||n[Qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vu(e);e!==null;){if(n=e[Qt])return n;e=vu(e)}return t}e=n,n=e.parentNode}return null}function Ds(e){return e=e[Qt]||e[pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function mo(e){return e[Ls]||null}var Bi=[],xr=-1;function Un(e){return{current:e}}function Ae(e){0>xr||(e.current=Bi[xr],Bi[xr]=null,xr--)}function Ie(e,t){xr++,Bi[xr]=e.current,e.current=t}var On={},ct=Un(On),yt=Un(!1),tr=On;function zr(e,t){var n=e.type.contextTypes;if(!n)return On;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function vt(e){return e=e.childContextTypes,e!=null}function Fl(){Ae(yt),Ae(ct)}function xu(e,t,n){if(ct.current!==On)throw Error(Y(168));Ie(ct,t),Ie(yt,n)}function Gf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Y(108,Lh(e)||"Unknown",s));return Ue({},n,r)}function Dl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||On,tr=ct.current,Ie(ct,e),Ie(yt,yt.current),!0}function wu(e,t,n){var r=e.stateNode;if(!r)throw Error(Y(169));n?(e=Gf(e,t,tr),r.__reactInternalMemoizedMergedChildContext=e,Ae(yt),Ae(ct),Ie(ct,e)):Ae(yt),Ie(yt,n)}var rn=null,ho=!1,Xo=!1;function Kf(e){rn===null?rn=[e]:rn.push(e)}function Hg(e){ho=!0,Kf(e)}function Bn(){if(!Xo&&rn!==null){Xo=!0;var e=0,t=Pe;try{var n=rn;for(Pe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}rn=null,ho=!1}catch(s){throw rn!==null&&(rn=rn.slice(e+1)),vf(Aa,Bn),s}finally{Pe=t,Xo=!1}}return null}var wr=[],jr=0,Ul=null,Bl=0,_t=[],Rt=0,nr=null,on=1,an="";function Kn(e,t){wr[jr++]=Bl,wr[jr++]=Ul,Ul=e,Bl=t}function Qf(e,t,n){_t[Rt++]=on,_t[Rt++]=an,_t[Rt++]=nr,nr=e;var r=on;e=an;var s=32-Ut(r)-1;r&=~(1<<s),n+=1;var o=32-Ut(t)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,on=1<<32-Ut(t)+s|n<<s|r,an=o+e}else on=1<<o|n<<s|r,an=e}function Va(e){e.return!==null&&(Kn(e,1),Qf(e,1,0))}function Ha(e){for(;e===Ul;)Ul=wr[--jr],wr[jr]=null,Bl=wr[--jr],wr[jr]=null;for(;e===nr;)nr=_t[--Rt],_t[Rt]=null,an=_t[--Rt],_t[Rt]=null,on=_t[--Rt],_t[Rt]=null}var Nt=null,St=null,$e=!1,Dt=null;function Yf(e,t){var n=It(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ju(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nt=e,St=_n(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nt=e,St=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=nr!==null?{id:on,overflow:an}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=It(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Nt=e,St=null,!0):!1;default:return!1}}function Wi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Vi(e){if($e){var t=St;if(t){var n=t;if(!ju(e,t)){if(Wi(e))throw Error(Y(418));t=_n(n.nextSibling);var r=Nt;t&&ju(e,t)?Yf(r,n):(e.flags=e.flags&-4097|2,$e=!1,Nt=e)}}else{if(Wi(e))throw Error(Y(418));e.flags=e.flags&-4097|2,$e=!1,Nt=e}}}function Su(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nt=e}function al(e){if(e!==Nt)return!1;if(!$e)return Su(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fi(e.type,e.memoizedProps)),t&&(t=St)){if(Wi(e))throw qf(),Error(Y(418));for(;t;)Yf(e,t),t=_n(t.nextSibling)}if(Su(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){St=_n(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}St=null}}else St=Nt?_n(e.stateNode.nextSibling):null;return!0}function qf(){for(var e=St;e;)e=_n(e.nextSibling)}function Ar(){St=Nt=null,$e=!1}function Ga(e){Dt===null?Dt=[e]:Dt.push(e)}var Gg=gn.ReactCurrentBatchConfig;function Xr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=s.refs;i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,e))}return e}function cl(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nu(e){var t=e._init;return t(e._payload)}function Xf(e){function t(p,f){if(e){var y=p.deletions;y===null?(p.deletions=[f],p.flags|=16):y.push(f)}}function n(p,f){if(!e)return null;for(;f!==null;)t(p,f),f=f.sibling;return null}function r(p,f){for(p=new Map;f!==null;)f.key!==null?p.set(f.key,f):p.set(f.index,f),f=f.sibling;return p}function s(p,f){return p=zn(p,f),p.index=0,p.sibling=null,p}function o(p,f,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<f?(p.flags|=2,f):y):(p.flags|=2,f)):(p.flags|=1048576,f)}function i(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,f,y,S){return f===null||f.tag!==6?(f=si(y,p.mode,S),f.return=p,f):(f=s(f,y),f.return=p,f)}function c(p,f,y,S){var R=y.type;return R===mr?g(p,f,y.props.children,S,y.key):f!==null&&(f.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===wn&&Nu(R)===f.type)?(S=s(f,y.props),S.ref=Xr(p,f,y),S.return=p,S):(S=Ll(y.type,y.key,y.props,null,p.mode,S),S.ref=Xr(p,f,y),S.return=p,S)}function d(p,f,y,S){return f===null||f.tag!==4||f.stateNode.containerInfo!==y.containerInfo||f.stateNode.implementation!==y.implementation?(f=li(y,p.mode,S),f.return=p,f):(f=s(f,y.children||[]),f.return=p,f)}function g(p,f,y,S,R){return f===null||f.tag!==7?(f=er(y,p.mode,S,R),f.return=p,f):(f=s(f,y),f.return=p,f)}function m(p,f,y){if(typeof f=="string"&&f!==""||typeof f=="number")return f=si(""+f,p.mode,y),f.return=p,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Js:return y=Ll(f.type,f.key,f.props,null,p.mode,y),y.ref=Xr(p,null,f),y.return=p,y;case pr:return f=li(f,p.mode,y),f.return=p,f;case wn:var S=f._init;return m(p,S(f._payload),y)}if(ns(f)||Gr(f))return f=er(f,p.mode,y,null),f.return=p,f;cl(p,f)}return null}function h(p,f,y,S){var R=f!==null?f.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return R!==null?null:a(p,f,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Js:return y.key===R?c(p,f,y,S):null;case pr:return y.key===R?d(p,f,y,S):null;case wn:return R=y._init,h(p,f,R(y._payload),S)}if(ns(y)||Gr(y))return R!==null?null:g(p,f,y,S,null);cl(p,y)}return null}function v(p,f,y,S,R){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(y)||null,a(f,p,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Js:return p=p.get(S.key===null?y:S.key)||null,c(f,p,S,R);case pr:return p=p.get(S.key===null?y:S.key)||null,d(f,p,S,R);case wn:var P=S._init;return v(p,f,y,P(S._payload),R)}if(ns(S)||Gr(S))return p=p.get(y)||null,g(f,p,S,R,null);cl(f,S)}return null}function w(p,f,y,S){for(var R=null,P=null,O=f,_=f=0,V=null;O!==null&&_<y.length;_++){O.index>_?(V=O,O=null):V=O.sibling;var A=h(p,O,y[_],S);if(A===null){O===null&&(O=V);break}e&&O&&A.alternate===null&&t(p,O),f=o(A,f,_),P===null?R=A:P.sibling=A,P=A,O=V}if(_===y.length)return n(p,O),$e&&Kn(p,_),R;if(O===null){for(;_<y.length;_++)O=m(p,y[_],S),O!==null&&(f=o(O,f,_),P===null?R=O:P.sibling=O,P=O);return $e&&Kn(p,_),R}for(O=r(p,O);_<y.length;_++)V=v(O,p,_,y[_],S),V!==null&&(e&&V.alternate!==null&&O.delete(V.key===null?_:V.key),f=o(V,f,_),P===null?R=V:P.sibling=V,P=V);return e&&O.forEach(function(W){return t(p,W)}),$e&&Kn(p,_),R}function N(p,f,y,S){var R=Gr(y);if(typeof R!="function")throw Error(Y(150));if(y=R.call(y),y==null)throw Error(Y(151));for(var P=R=null,O=f,_=f=0,V=null,A=y.next();O!==null&&!A.done;_++,A=y.next()){O.index>_?(V=O,O=null):V=O.sibling;var W=h(p,O,A.value,S);if(W===null){O===null&&(O=V);break}e&&O&&W.alternate===null&&t(p,O),f=o(W,f,_),P===null?R=W:P.sibling=W,P=W,O=V}if(A.done)return n(p,O),$e&&Kn(p,_),R;if(O===null){for(;!A.done;_++,A=y.next())A=m(p,A.value,S),A!==null&&(f=o(A,f,_),P===null?R=A:P.sibling=A,P=A);return $e&&Kn(p,_),R}for(O=r(p,O);!A.done;_++,A=y.next())A=v(O,p,_,A.value,S),A!==null&&(e&&A.alternate!==null&&O.delete(A.key===null?_:A.key),f=o(A,f,_),P===null?R=A:P.sibling=A,P=A);return e&&O.forEach(function(ue){return t(p,ue)}),$e&&Kn(p,_),R}function j(p,f,y,S){if(typeof y=="object"&&y!==null&&y.type===mr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Js:e:{for(var R=y.key,P=f;P!==null;){if(P.key===R){if(R=y.type,R===mr){if(P.tag===7){n(p,P.sibling),f=s(P,y.props.children),f.return=p,p=f;break e}}else if(P.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===wn&&Nu(R)===P.type){n(p,P.sibling),f=s(P,y.props),f.ref=Xr(p,P,y),f.return=p,p=f;break e}n(p,P);break}else t(p,P);P=P.sibling}y.type===mr?(f=er(y.props.children,p.mode,S,y.key),f.return=p,p=f):(S=Ll(y.type,y.key,y.props,null,p.mode,S),S.ref=Xr(p,f,y),S.return=p,p=S)}return i(p);case pr:e:{for(P=y.key;f!==null;){if(f.key===P)if(f.tag===4&&f.stateNode.containerInfo===y.containerInfo&&f.stateNode.implementation===y.implementation){n(p,f.sibling),f=s(f,y.children||[]),f.return=p,p=f;break e}else{n(p,f);break}else t(p,f);f=f.sibling}f=li(y,p.mode,S),f.return=p,p=f}return i(p);case wn:return P=y._init,j(p,f,P(y._payload),S)}if(ns(y))return w(p,f,y,S);if(Gr(y))return N(p,f,y,S);cl(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,f!==null&&f.tag===6?(n(p,f.sibling),f=s(f,y),f.return=p,p=f):(n(p,f),f=si(y,p.mode,S),f.return=p,p=f),i(p)):n(p,f)}return j}var $r=Xf(!0),Jf=Xf(!1),Wl=Un(null),Vl=null,Sr=null,Ka=null;function Qa(){Ka=Sr=Vl=null}function Ya(e){var t=Wl.current;Ae(Wl),e._currentValue=t}function Hi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pr(e,t){Vl=e,Ka=Sr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gt=!0),e.firstContext=null)}function zt(e){var t=e._currentValue;if(Ka!==e)if(e={context:e,memoizedValue:t,next:null},Sr===null){if(Vl===null)throw Error(Y(308));Sr=e,Vl.dependencies={lanes:0,firstContext:e}}else Sr=Sr.next=e;return t}var Xn=null;function qa(e){Xn===null?Xn=[e]:Xn.push(e)}function Zf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,qa(t)):(n.next=s.next,s.next=n),t.interleaved=n,mn(e,r)}function mn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var jn=!1;function Xa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ep(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function un(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ce&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,mn(e,n)}return s=r.interleaved,s===null?(t.next=t,qa(r)):(t.next=s.next,s.next=t),r.interleaved=t,mn(e,n)}function Sl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$a(e,n)}}function ku(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hl(e,t,n,r){var s=e.updateQueue;jn=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,d=c.next;c.next=null,i===null?o=d:i.next=d,i=c;var g=e.alternate;g!==null&&(g=g.updateQueue,a=g.lastBaseUpdate,a!==i&&(a===null?g.firstBaseUpdate=d:a.next=d,g.lastBaseUpdate=c))}if(o!==null){var m=s.baseState;i=0,g=d=c=null,a=o;do{var h=a.lane,v=a.eventTime;if((r&h)===h){g!==null&&(g=g.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=e,N=a;switch(h=t,v=n,N.tag){case 1:if(w=N.payload,typeof w=="function"){m=w.call(v,m,h);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=N.payload,h=typeof w=="function"?w.call(v,m,h):w,h==null)break e;m=Ue({},m,h);break e;case 2:jn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else v={eventTime:v,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},g===null?(d=g=v,c=m):g=g.next=v,i|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(g===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=g,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);sr|=i,e.lanes=i,e.memoizedState=m}}function Cu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var Us={},en=Un(Us),Ps=Un(Us),_s=Un(Us);function Jn(e){if(e===Us)throw Error(Y(174));return e}function Ja(e,t){switch(Ie(_s,t),Ie(Ps,e),Ie(en,Us),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ci(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ci(t,e)}Ae(en),Ie(en,t)}function Mr(){Ae(en),Ae(Ps),Ae(_s)}function tp(e){Jn(_s.current);var t=Jn(en.current),n=Ci(t,e.type);t!==n&&(Ie(Ps,e),Ie(en,n))}function Za(e){Ps.current===e&&(Ae(en),Ae(Ps))}var Oe=Un(0);function Gl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Jo=[];function ec(){for(var e=0;e<Jo.length;e++)Jo[e]._workInProgressVersionPrimary=null;Jo.length=0}var Nl=gn.ReactCurrentDispatcher,Zo=gn.ReactCurrentBatchConfig,rr=0,Fe=null,Ye=null,Ze=null,Kl=!1,fs=!1,Rs=0,Kg=0;function ot(){throw Error(Y(321))}function tc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wt(e[n],t[n]))return!1;return!0}function nc(e,t,n,r,s,o){if(rr=o,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Nl.current=e===null||e.memoizedState===null?Xg:Jg,e=n(r,s),fs){o=0;do{if(fs=!1,Rs=0,25<=o)throw Error(Y(301));o+=1,Ze=Ye=null,t.updateQueue=null,Nl.current=Zg,e=n(r,s)}while(fs)}if(Nl.current=Ql,t=Ye!==null&&Ye.next!==null,rr=0,Ze=Ye=Fe=null,Kl=!1,t)throw Error(Y(300));return e}function rc(){var e=Rs!==0;return Rs=0,e}function Kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Fe.memoizedState=Ze=e:Ze=Ze.next=e,Ze}function At(){if(Ye===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=Ze===null?Fe.memoizedState:Ze.next;if(t!==null)Ze=t,Ye=e;else{if(e===null)throw Error(Y(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},Ze===null?Fe.memoizedState=Ze=e:Ze=Ze.next=e}return Ze}function Is(e,t){return typeof t=="function"?t(e):t}function ei(e){var t=At(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=Ye,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=i=null,c=null,d=o;do{var g=d.lane;if((rr&g)===g)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:g,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=m,i=r):c=c.next=m,Fe.lanes|=g,sr|=g}d=d.next}while(d!==null&&d!==o);c===null?i=r:c.next=a,Wt(r,t.memoizedState)||(gt=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Fe.lanes|=o,sr|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ti(e){var t=At(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);Wt(o,t.memoizedState)||(gt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function np(){}function rp(e,t){var n=Fe,r=At(),s=t(),o=!Wt(r.memoizedState,s);if(o&&(r.memoizedState=s,gt=!0),r=r.queue,sc(op.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,Ts(9,lp.bind(null,n,r,s,t),void 0,null),et===null)throw Error(Y(349));rr&30||sp(n,t,s)}return s}function sp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function lp(e,t,n,r){t.value=n,t.getSnapshot=r,ip(t)&&ap(e)}function op(e,t,n){return n(function(){ip(t)&&ap(e)})}function ip(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wt(e,n)}catch{return!0}}function ap(e){var t=mn(e,1);t!==null&&Bt(t,e,1,-1)}function bu(e){var t=Kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:e},t.queue=e,e=e.dispatch=qg.bind(null,Fe,e),[t.memoizedState,e]}function Ts(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function cp(){return At().memoizedState}function kl(e,t,n,r){var s=Kt();Fe.flags|=e,s.memoizedState=Ts(1|t,n,void 0,r===void 0?null:r)}function go(e,t,n,r){var s=At();r=r===void 0?null:r;var o=void 0;if(Ye!==null){var i=Ye.memoizedState;if(o=i.destroy,r!==null&&tc(r,i.deps)){s.memoizedState=Ts(t,n,o,r);return}}Fe.flags|=e,s.memoizedState=Ts(1|t,n,o,r)}function Eu(e,t){return kl(8390656,8,e,t)}function sc(e,t){return go(2048,8,e,t)}function up(e,t){return go(4,2,e,t)}function dp(e,t){return go(4,4,e,t)}function fp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pp(e,t,n){return n=n!=null?n.concat([e]):null,go(4,4,fp.bind(null,t,e),n)}function lc(){}function mp(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function hp(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function gp(e,t,n){return rr&21?(Wt(n,t)||(n=jf(),Fe.lanes|=n,sr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=n)}function Qg(e,t){var n=Pe;Pe=n!==0&&4>n?n:4,e(!0);var r=Zo.transition;Zo.transition={};try{e(!1),t()}finally{Pe=n,Zo.transition=r}}function yp(){return At().memoizedState}function Yg(e,t,n){var r=Tn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},vp(e))xp(t,n);else if(n=Zf(e,t,n,r),n!==null){var s=dt();Bt(n,e,r,s),wp(n,t,r)}}function qg(e,t,n){var r=Tn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(vp(e))xp(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,a=o(i,n);if(s.hasEagerState=!0,s.eagerState=a,Wt(a,i)){var c=t.interleaved;c===null?(s.next=s,qa(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Zf(e,t,s,r),n!==null&&(s=dt(),Bt(n,e,r,s),wp(n,t,r))}}function vp(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function xp(e,t){fs=Kl=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$a(e,n)}}var Ql={readContext:zt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},Xg={readContext:zt,useCallback:function(e,t){return Kt().memoizedState=[e,t===void 0?null:t],e},useContext:zt,useEffect:Eu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,kl(4194308,4,fp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return kl(4194308,4,e,t)},useInsertionEffect:function(e,t){return kl(4,2,e,t)},useMemo:function(e,t){var n=Kt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Kt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yg.bind(null,Fe,e),[r.memoizedState,e]},useRef:function(e){var t=Kt();return e={current:e},t.memoizedState=e},useState:bu,useDebugValue:lc,useDeferredValue:function(e){return Kt().memoizedState=e},useTransition:function(){var e=bu(!1),t=e[0];return e=Qg.bind(null,e[1]),Kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Fe,s=Kt();if($e){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=t(),et===null)throw Error(Y(349));rr&30||sp(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Eu(op.bind(null,r,o,e),[e]),r.flags|=2048,Ts(9,lp.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Kt(),t=et.identifierPrefix;if($e){var n=an,r=on;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Rs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Kg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Jg={readContext:zt,useCallback:mp,useContext:zt,useEffect:sc,useImperativeHandle:pp,useInsertionEffect:up,useLayoutEffect:dp,useMemo:hp,useReducer:ei,useRef:cp,useState:function(){return ei(Is)},useDebugValue:lc,useDeferredValue:function(e){var t=At();return gp(t,Ye.memoizedState,e)},useTransition:function(){var e=ei(Is)[0],t=At().memoizedState;return[e,t]},useMutableSource:np,useSyncExternalStore:rp,useId:yp,unstable_isNewReconciler:!1},Zg={readContext:zt,useCallback:mp,useContext:zt,useEffect:sc,useImperativeHandle:pp,useInsertionEffect:up,useLayoutEffect:dp,useMemo:hp,useReducer:ti,useRef:cp,useState:function(){return ti(Is)},useDebugValue:lc,useDeferredValue:function(e){var t=At();return Ye===null?t.memoizedState=e:gp(t,Ye.memoizedState,e)},useTransition:function(){var e=ti(Is)[0],t=At().memoizedState;return[e,t]},useMutableSource:np,useSyncExternalStore:rp,useId:yp,unstable_isNewReconciler:!1};function Ot(e,t){if(e&&e.defaultProps){t=Ue({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Gi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ue({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var yo={isMounted:function(e){return(e=e._reactInternals)?ir(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=dt(),s=Tn(e),o=un(r,s);o.payload=t,n!=null&&(o.callback=n),t=Rn(e,o,s),t!==null&&(Bt(t,e,s,r),Sl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=dt(),s=Tn(e),o=un(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Rn(e,o,s),t!==null&&(Bt(t,e,s,r),Sl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=dt(),r=Tn(e),s=un(n,r);s.tag=2,t!=null&&(s.callback=t),t=Rn(e,s,r),t!==null&&(Bt(t,e,r,n),Sl(t,e,r))}};function Lu(e,t,n,r,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!Cs(n,r)||!Cs(s,o):!0}function jp(e,t,n){var r=!1,s=On,o=t.contextType;return typeof o=="object"&&o!==null?o=zt(o):(s=vt(t)?tr:ct.current,r=t.contextTypes,o=(r=r!=null)?zr(e,s):On),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=yo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Pu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yo.enqueueReplaceState(t,t.state,null)}function Ki(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Xa(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=zt(o):(o=vt(t)?tr:ct.current,s.context=zr(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Gi(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&yo.enqueueReplaceState(s,s.state,null),Hl(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Or(e,t){try{var n="",r=t;do n+=Eh(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function ni(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ey=typeof WeakMap=="function"?WeakMap:Map;function Sp(e,t,n){n=un(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,sa=r),Qi(e,t)},n}function Np(e,t,n){n=un(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Qi(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Qi(e,t),typeof r!="function"&&(In===null?In=new Set([this]):In.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function _u(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ey;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=my.bind(null,e,t,n),t.then(e,e))}function Ru(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Iu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=un(-1,1),t.tag=2,Rn(n,t,1))),n.lanes|=1),e)}var ty=gn.ReactCurrentOwner,gt=!1;function ut(e,t,n,r){t.child=e===null?Jf(t,null,n,r):$r(t,e.child,n,r)}function Tu(e,t,n,r,s){n=n.render;var o=t.ref;return Pr(t,s),r=nc(e,t,n,r,o,s),n=rc(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hn(e,t,s)):($e&&n&&Va(t),t.flags|=1,ut(e,t,r,s),t.child)}function zu(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!pc(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,kp(e,t,o,r,s)):(e=Ll(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Cs,n(i,r)&&e.ref===t.ref)return hn(e,t,s)}return t.flags|=1,e=zn(o,r),e.ref=t.ref,e.return=t,t.child=e}function kp(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Cs(o,r)&&e.ref===t.ref)if(gt=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(gt=!0);else return t.lanes=e.lanes,hn(e,t,s)}return Yi(e,t,n,r,s)}function Cp(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(kr,jt),jt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ie(kr,jt),jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ie(kr,jt),jt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ie(kr,jt),jt|=r;return ut(e,t,s,n),t.child}function bp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Yi(e,t,n,r,s){var o=vt(n)?tr:ct.current;return o=zr(t,o),Pr(t,s),n=nc(e,t,n,r,o,s),r=rc(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hn(e,t,s)):($e&&r&&Va(t),t.flags|=1,ut(e,t,n,s),t.child)}function Au(e,t,n,r,s){if(vt(n)){var o=!0;Dl(t)}else o=!1;if(Pr(t,s),t.stateNode===null)Cl(e,t),jp(t,n,r),Ki(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var c=i.context,d=n.contextType;typeof d=="object"&&d!==null?d=zt(d):(d=vt(n)?tr:ct.current,d=zr(t,d));var g=n.getDerivedStateFromProps,m=typeof g=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||c!==d)&&Pu(t,i,r,d),jn=!1;var h=t.memoizedState;i.state=h,Hl(t,r,i,s),c=t.memoizedState,a!==r||h!==c||yt.current||jn?(typeof g=="function"&&(Gi(t,n,g,r),c=t.memoizedState),(a=jn||Lu(t,n,a,r,h,c,d))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=d,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ep(e,t),a=t.memoizedProps,d=t.type===t.elementType?a:Ot(t.type,a),i.props=d,m=t.pendingProps,h=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=zt(c):(c=vt(n)?tr:ct.current,c=zr(t,c));var v=n.getDerivedStateFromProps;(g=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==m||h!==c)&&Pu(t,i,r,c),jn=!1,h=t.memoizedState,i.state=h,Hl(t,r,i,s);var w=t.memoizedState;a!==m||h!==w||yt.current||jn?(typeof v=="function"&&(Gi(t,n,v,r),w=t.memoizedState),(d=jn||Lu(t,n,d,r,h,w,c)||!1)?(g||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,w,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,w,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),i.props=r,i.state=w,i.context=c,r=d):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return qi(e,t,n,r,o,s)}function qi(e,t,n,r,s,o){bp(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&wu(t,n,!1),hn(e,t,o);r=t.stateNode,ty.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=$r(t,e.child,null,o),t.child=$r(t,null,a,o)):ut(e,t,a,o),t.memoizedState=r.state,s&&wu(t,n,!0),t.child}function Ep(e){var t=e.stateNode;t.pendingContext?xu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xu(e,t.context,!1),Ja(e,t.containerInfo)}function $u(e,t,n,r,s){return Ar(),Ga(s),t.flags|=256,ut(e,t,n,r),t.child}var Xi={dehydrated:null,treeContext:null,retryLane:0};function Ji(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lp(e,t,n){var r=t.pendingProps,s=Oe.current,o=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ie(Oe,s&1),e===null)return Vi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=wo(i,r,0,null),e=er(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ji(n),t.memoizedState=Xi,e):oc(t,i));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return ny(e,t,i,r,a,s,n);if(o){o=r.fallback,i=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=zn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=zn(a,o):(o=er(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?Ji(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=Xi,r}return o=e.child,e=o.sibling,r=zn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function oc(e,t){return t=wo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ul(e,t,n,r){return r!==null&&Ga(r),$r(t,e.child,null,n),e=oc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ny(e,t,n,r,s,o,i){if(n)return t.flags&256?(t.flags&=-257,r=ni(Error(Y(422))),ul(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=wo({mode:"visible",children:r.children},s,0,null),o=er(o,s,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&$r(t,e.child,null,i),t.child.memoizedState=Ji(i),t.memoizedState=Xi,o);if(!(t.mode&1))return ul(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Y(419)),r=ni(o,r,void 0),ul(e,t,i,r)}if(a=(i&e.childLanes)!==0,gt||a){if(r=et,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,mn(e,s),Bt(r,e,s,-1))}return fc(),r=ni(Error(Y(421))),ul(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=hy.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,St=_n(s.nextSibling),Nt=t,$e=!0,Dt=null,e!==null&&(_t[Rt++]=on,_t[Rt++]=an,_t[Rt++]=nr,on=e.id,an=e.overflow,nr=t),t=oc(t,r.children),t.flags|=4096,t)}function Mu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Hi(e.return,t,n)}function ri(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Pp(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(ut(e,t,r.children,n),r=Oe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mu(e,n,t);else if(e.tag===19)Mu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ie(Oe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Gl(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ri(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Gl(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ri(t,!0,n,null,o);break;case"together":ri(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),sr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,n=zn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=zn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ry(e,t,n){switch(t.tag){case 3:Ep(t),Ar();break;case 5:tp(t);break;case 1:vt(t.type)&&Dl(t);break;case 4:Ja(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ie(Wl,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Oe,Oe.current&1),t.flags|=128,null):n&t.child.childLanes?Lp(e,t,n):(Ie(Oe,Oe.current&1),e=hn(e,t,n),e!==null?e.sibling:null);Ie(Oe,Oe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Pp(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Oe,Oe.current),r)break;return null;case 22:case 23:return t.lanes=0,Cp(e,t,n)}return hn(e,t,n)}var _p,Zi,Rp,Ip;_p=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zi=function(){};Rp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Jn(en.current);var o=null;switch(n){case"input":s=ji(e,s),r=ji(e,r),o=[];break;case"select":s=Ue({},s,{value:void 0}),r=Ue({},r,{value:void 0}),o=[];break;case"textarea":s=ki(e,s),r=ki(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ol)}bi(n,r);var i;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(vs.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(i in a)!a.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&a[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(vs.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ze("scroll",e),o||a===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};Ip=function(e,t,n,r){n!==r&&(t.flags|=4)};function Jr(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function it(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function sy(e,t,n){var r=t.pendingProps;switch(Ha(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(t),null;case 1:return vt(t.type)&&Fl(),it(t),null;case 3:return r=t.stateNode,Mr(),Ae(yt),Ae(ct),ec(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(al(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Dt!==null&&(ia(Dt),Dt=null))),Zi(e,t),it(t),null;case 5:Za(t);var s=Jn(_s.current);if(n=t.type,e!==null&&t.stateNode!=null)Rp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Y(166));return it(t),null}if(e=Jn(en.current),al(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Qt]=t,r[Ls]=o,e=(t.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(s=0;s<ss.length;s++)ze(ss[s],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":Gc(r,o),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ze("invalid",r);break;case"textarea":Qc(r,o),ze("invalid",r)}bi(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&il(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&il(r.textContent,a,e),s=["children",""+a]):vs.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&ze("scroll",r)}switch(n){case"input":Zs(r),Kc(r,o,!0);break;case"textarea":Zs(r),Yc(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ol)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Qt]=t,e[Ls]=r,_p(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ei(n,r),n){case"dialog":ze("cancel",e),ze("close",e),s=r;break;case"iframe":case"object":case"embed":ze("load",e),s=r;break;case"video":case"audio":for(s=0;s<ss.length;s++)ze(ss[s],e);s=r;break;case"source":ze("error",e),s=r;break;case"img":case"image":case"link":ze("error",e),ze("load",e),s=r;break;case"details":ze("toggle",e),s=r;break;case"input":Gc(e,r),s=ji(e,r),ze("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ue({},r,{value:void 0}),ze("invalid",e);break;case"textarea":Qc(e,r),s=ki(e,r),ze("invalid",e);break;default:s=r}bi(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?cf(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&of(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&xs(e,c):typeof c=="number"&&xs(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(vs.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ze("scroll",e):c!=null&&_a(e,o,c,i))}switch(n){case"input":Zs(e),Kc(e,r,!1);break;case"textarea":Zs(e),Yc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Mn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Cr(e,!!r.multiple,o,!1):r.defaultValue!=null&&Cr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ol)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return it(t),null;case 6:if(e&&t.stateNode!=null)Ip(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Y(166));if(n=Jn(_s.current),Jn(en.current),al(t)){if(r=t.stateNode,n=t.memoizedProps,r[Qt]=t,(o=r.nodeValue!==n)&&(e=Nt,e!==null))switch(e.tag){case 3:il(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&il(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qt]=t,t.stateNode=r}return it(t),null;case 13:if(Ae(Oe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&St!==null&&t.mode&1&&!(t.flags&128))qf(),Ar(),t.flags|=98560,o=!1;else if(o=al(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Y(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[Qt]=t}else Ar(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;it(t),o=!1}else Dt!==null&&(ia(Dt),Dt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Oe.current&1?qe===0&&(qe=3):fc())),t.updateQueue!==null&&(t.flags|=4),it(t),null);case 4:return Mr(),Zi(e,t),e===null&&bs(t.stateNode.containerInfo),it(t),null;case 10:return Ya(t.type._context),it(t),null;case 17:return vt(t.type)&&Fl(),it(t),null;case 19:if(Ae(Oe),o=t.memoizedState,o===null)return it(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)Jr(o,!1);else{if(qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Gl(e),i!==null){for(t.flags|=128,Jr(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ie(Oe,Oe.current&1|2),t.child}e=e.sibling}o.tail!==null&&He()>Fr&&(t.flags|=128,r=!0,Jr(o,!1),t.lanes=4194304)}else{if(!r)if(e=Gl(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Jr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!$e)return it(t),null}else 2*He()-o.renderingStartTime>Fr&&n!==1073741824&&(t.flags|=128,r=!0,Jr(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=He(),t.sibling=null,n=Oe.current,Ie(Oe,r?n&1|2:n&1),t):(it(t),null);case 22:case 23:return dc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?jt&1073741824&&(it(t),t.subtreeFlags&6&&(t.flags|=8192)):it(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function ly(e,t){switch(Ha(t),t.tag){case 1:return vt(t.type)&&Fl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mr(),Ae(yt),Ae(ct),ec(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Za(t),null;case 13:if(Ae(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));Ar()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ae(Oe),null;case 4:return Mr(),null;case 10:return Ya(t.type._context),null;case 22:case 23:return dc(),null;case 24:return null;default:return null}}var dl=!1,at=!1,oy=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Nr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(e,t,r)}else n.current=null}function ea(e,t,n){try{n()}catch(r){We(e,t,r)}}var Ou=!1;function iy(e,t){if(Mi=Al,e=Mf(),Wa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,c=-1,d=0,g=0,m=e,h=null;t:for(;;){for(var v;m!==n||s!==0&&m.nodeType!==3||(a=i+s),m!==o||r!==0&&m.nodeType!==3||(c=i+r),m.nodeType===3&&(i+=m.nodeValue.length),(v=m.firstChild)!==null;)h=m,m=v;for(;;){if(m===e)break t;if(h===n&&++d===s&&(a=i),h===o&&++g===r&&(c=i),(v=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=v}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Oi={focusedElem:e,selectionRange:n},Al=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var N=w.memoizedProps,j=w.memoizedState,p=t.stateNode,f=p.getSnapshotBeforeUpdate(t.elementType===t.type?N:Ot(t.type,N),j);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(S){We(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return w=Ou,Ou=!1,w}function ps(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&ea(t,n,o)}s=s.next}while(s!==r)}}function vo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ta(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Tp(e){var t=e.alternate;t!==null&&(e.alternate=null,Tp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Qt],delete t[Ls],delete t[Ui],delete t[Wg],delete t[Vg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zp(e){return e.tag===5||e.tag===3||e.tag===4}function Fu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function na(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ol));else if(r!==4&&(e=e.child,e!==null))for(na(e,t,n),e=e.sibling;e!==null;)na(e,t,n),e=e.sibling}function ra(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ra(e,t,n),e=e.sibling;e!==null;)ra(e,t,n),e=e.sibling}var nt=null,Ft=!1;function xn(e,t,n){for(n=n.child;n!==null;)Ap(e,t,n),n=n.sibling}function Ap(e,t,n){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(co,n)}catch{}switch(n.tag){case 5:at||Nr(n,t);case 6:var r=nt,s=Ft;nt=null,xn(e,t,n),nt=r,Ft=s,nt!==null&&(Ft?(e=nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(Ft?(e=nt,n=n.stateNode,e.nodeType===8?qo(e.parentNode,n):e.nodeType===1&&qo(e,n),Ns(e)):qo(nt,n.stateNode));break;case 4:r=nt,s=Ft,nt=n.stateNode.containerInfo,Ft=!0,xn(e,t,n),nt=r,Ft=s;break;case 0:case 11:case 14:case 15:if(!at&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&ea(n,t,i),s=s.next}while(s!==r)}xn(e,t,n);break;case 1:if(!at&&(Nr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){We(n,t,a)}xn(e,t,n);break;case 21:xn(e,t,n);break;case 22:n.mode&1?(at=(r=at)||n.memoizedState!==null,xn(e,t,n),at=r):xn(e,t,n);break;default:xn(e,t,n)}}function Du(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new oy),t.forEach(function(r){var s=gy.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function $t(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,Ft=!1;break e;case 3:nt=a.stateNode.containerInfo,Ft=!0;break e;case 4:nt=a.stateNode.containerInfo,Ft=!0;break e}a=a.return}if(nt===null)throw Error(Y(160));Ap(o,i,s),nt=null,Ft=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){We(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$p(t,e),t=t.sibling}function $p(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($t(t,e),Gt(e),r&4){try{ps(3,e,e.return),vo(3,e)}catch(N){We(e,e.return,N)}try{ps(5,e,e.return)}catch(N){We(e,e.return,N)}}break;case 1:$t(t,e),Gt(e),r&512&&n!==null&&Nr(n,n.return);break;case 5:if($t(t,e),Gt(e),r&512&&n!==null&&Nr(n,n.return),e.flags&32){var s=e.stateNode;try{xs(s,"")}catch(N){We(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&rf(s,o),Ei(a,i);var d=Ei(a,o);for(i=0;i<c.length;i+=2){var g=c[i],m=c[i+1];g==="style"?cf(s,m):g==="dangerouslySetInnerHTML"?of(s,m):g==="children"?xs(s,m):_a(s,g,m,d)}switch(a){case"input":Si(s,o);break;case"textarea":sf(s,o);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?Cr(s,!!o.multiple,v,!1):h!==!!o.multiple&&(o.defaultValue!=null?Cr(s,!!o.multiple,o.defaultValue,!0):Cr(s,!!o.multiple,o.multiple?[]:"",!1))}s[Ls]=o}catch(N){We(e,e.return,N)}}break;case 6:if($t(t,e),Gt(e),r&4){if(e.stateNode===null)throw Error(Y(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(N){We(e,e.return,N)}}break;case 3:if($t(t,e),Gt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ns(t.containerInfo)}catch(N){We(e,e.return,N)}break;case 4:$t(t,e),Gt(e);break;case 13:$t(t,e),Gt(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(cc=He())),r&4&&Du(e);break;case 22:if(g=n!==null&&n.memoizedState!==null,e.mode&1?(at=(d=at)||g,$t(t,e),at=d):$t(t,e),Gt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!g&&e.mode&1)for(oe=e,g=e.child;g!==null;){for(m=oe=g;oe!==null;){switch(h=oe,v=h.child,h.tag){case 0:case 11:case 14:case 15:ps(4,h,h.return);break;case 1:Nr(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(N){We(r,n,N)}}break;case 5:Nr(h,h.return);break;case 22:if(h.memoizedState!==null){Bu(m);continue}}v!==null?(v.return=h,oe=v):Bu(m)}g=g.sibling}e:for(g=null,m=e;;){if(m.tag===5){if(g===null){g=m;try{s=m.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=af("display",i))}catch(N){We(e,e.return,N)}}}else if(m.tag===6){if(g===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(N){We(e,e.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;g===m&&(g=null),m=m.return}g===m&&(g=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:$t(t,e),Gt(e),r&4&&Du(e);break;case 21:break;default:$t(t,e),Gt(e)}}function Gt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(zp(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(xs(s,""),r.flags&=-33);var o=Fu(e);ra(e,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=Fu(e);na(e,a,i);break;default:throw Error(Y(161))}}catch(c){We(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ay(e,t,n){oe=e,Mp(e)}function Mp(e,t,n){for(var r=(e.mode&1)!==0;oe!==null;){var s=oe,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||dl;if(!i){var a=s.alternate,c=a!==null&&a.memoizedState!==null||at;a=dl;var d=at;if(dl=i,(at=c)&&!d)for(oe=s;oe!==null;)i=oe,c=i.child,i.tag===22&&i.memoizedState!==null?Wu(s):c!==null?(c.return=i,oe=c):Wu(s);for(;o!==null;)oe=o,Mp(o),o=o.sibling;oe=s,dl=a,at=d}Uu(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,oe=o):Uu(e)}}function Uu(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:at||vo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!at)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ot(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Cu(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Cu(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var g=d.memoizedState;if(g!==null){var m=g.dehydrated;m!==null&&Ns(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}at||t.flags&512&&ta(t)}catch(h){We(t,t.return,h)}}if(t===e){oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,oe=n;break}oe=t.return}}function Bu(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,oe=n;break}oe=t.return}}function Wu(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vo(4,t)}catch(c){We(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){We(t,s,c)}}var o=t.return;try{ta(t)}catch(c){We(t,o,c)}break;case 5:var i=t.return;try{ta(t)}catch(c){We(t,i,c)}}}catch(c){We(t,t.return,c)}if(t===e){oe=null;break}var a=t.sibling;if(a!==null){a.return=t.return,oe=a;break}oe=t.return}}var cy=Math.ceil,Yl=gn.ReactCurrentDispatcher,ic=gn.ReactCurrentOwner,Tt=gn.ReactCurrentBatchConfig,Ce=0,et=null,Qe=null,rt=0,jt=0,kr=Un(0),qe=0,zs=null,sr=0,xo=0,ac=0,ms=null,ht=null,cc=0,Fr=1/0,nn=null,ql=!1,sa=null,In=null,fl=!1,Cn=null,Xl=0,hs=0,la=null,bl=-1,El=0;function dt(){return Ce&6?He():bl!==-1?bl:bl=He()}function Tn(e){return e.mode&1?Ce&2&&rt!==0?rt&-rt:Gg.transition!==null?(El===0&&(El=jf()),El):(e=Pe,e!==0||(e=window.event,e=e===void 0?16:Lf(e.type)),e):1}function Bt(e,t,n,r){if(50<hs)throw hs=0,la=null,Error(Y(185));Os(e,n,r),(!(Ce&2)||e!==et)&&(e===et&&(!(Ce&2)&&(xo|=n),qe===4&&Nn(e,rt)),xt(e,r),n===1&&Ce===0&&!(t.mode&1)&&(Fr=He()+500,ho&&Bn()))}function xt(e,t){var n=e.callbackNode;Gh(e,t);var r=zl(e,e===et?rt:0);if(r===0)n!==null&&Jc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Jc(n),t===1)e.tag===0?Hg(Vu.bind(null,e)):Kf(Vu.bind(null,e)),Ug(function(){!(Ce&6)&&Bn()}),n=null;else{switch(Sf(r)){case 1:n=Aa;break;case 4:n=xf;break;case 16:n=Tl;break;case 536870912:n=wf;break;default:n=Tl}n=Hp(n,Op.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Op(e,t){if(bl=-1,El=0,Ce&6)throw Error(Y(327));var n=e.callbackNode;if(_r()&&e.callbackNode!==n)return null;var r=zl(e,e===et?rt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Jl(e,r);else{t=r;var s=Ce;Ce|=2;var o=Dp();(et!==e||rt!==t)&&(nn=null,Fr=He()+500,Zn(e,t));do try{fy();break}catch(a){Fp(e,a)}while(!0);Qa(),Yl.current=o,Ce=s,Qe!==null?t=0:(et=null,rt=0,t=qe)}if(t!==0){if(t===2&&(s=Ii(e),s!==0&&(r=s,t=oa(e,s))),t===1)throw n=zs,Zn(e,0),Nn(e,r),xt(e,He()),n;if(t===6)Nn(e,r);else{if(s=e.current.alternate,!(r&30)&&!uy(s)&&(t=Jl(e,r),t===2&&(o=Ii(e),o!==0&&(r=o,t=oa(e,o))),t===1))throw n=zs,Zn(e,0),Nn(e,r),xt(e,He()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Y(345));case 2:Qn(e,ht,nn);break;case 3:if(Nn(e,r),(r&130023424)===r&&(t=cc+500-He(),10<t)){if(zl(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){dt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Di(Qn.bind(null,e,ht,nn),t);break}Qn(e,ht,nn);break;case 4:if(Nn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-Ut(r);o=1<<i,i=t[i],i>s&&(s=i),r&=~o}if(r=s,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cy(r/1960))-r,10<r){e.timeoutHandle=Di(Qn.bind(null,e,ht,nn),r);break}Qn(e,ht,nn);break;case 5:Qn(e,ht,nn);break;default:throw Error(Y(329))}}}return xt(e,He()),e.callbackNode===n?Op.bind(null,e):null}function oa(e,t){var n=ms;return e.current.memoizedState.isDehydrated&&(Zn(e,t).flags|=256),e=Jl(e,t),e!==2&&(t=ht,ht=n,t!==null&&ia(t)),e}function ia(e){ht===null?ht=e:ht.push.apply(ht,e)}function uy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Wt(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nn(e,t){for(t&=~ac,t&=~xo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ut(t),r=1<<n;e[n]=-1,t&=~r}}function Vu(e){if(Ce&6)throw Error(Y(327));_r();var t=zl(e,0);if(!(t&1))return xt(e,He()),null;var n=Jl(e,t);if(e.tag!==0&&n===2){var r=Ii(e);r!==0&&(t=r,n=oa(e,r))}if(n===1)throw n=zs,Zn(e,0),Nn(e,t),xt(e,He()),n;if(n===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qn(e,ht,nn),xt(e,He()),null}function uc(e,t){var n=Ce;Ce|=1;try{return e(t)}finally{Ce=n,Ce===0&&(Fr=He()+500,ho&&Bn())}}function lr(e){Cn!==null&&Cn.tag===0&&!(Ce&6)&&_r();var t=Ce;Ce|=1;var n=Tt.transition,r=Pe;try{if(Tt.transition=null,Pe=1,e)return e()}finally{Pe=r,Tt.transition=n,Ce=t,!(Ce&6)&&Bn()}}function dc(){jt=kr.current,Ae(kr)}function Zn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Dg(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(Ha(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Fl();break;case 3:Mr(),Ae(yt),Ae(ct),ec();break;case 5:Za(r);break;case 4:Mr();break;case 13:Ae(Oe);break;case 19:Ae(Oe);break;case 10:Ya(r.type._context);break;case 22:case 23:dc()}n=n.return}if(et=e,Qe=e=zn(e.current,null),rt=jt=t,qe=0,zs=null,ac=xo=sr=0,ht=ms=null,Xn!==null){for(t=0;t<Xn.length;t++)if(n=Xn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}Xn=null}return e}function Fp(e,t){do{var n=Qe;try{if(Qa(),Nl.current=Ql,Kl){for(var r=Fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Kl=!1}if(rr=0,Ze=Ye=Fe=null,fs=!1,Rs=0,ic.current=null,n===null||n.return===null){qe=1,zs=t,Qe=null;break}e:{var o=e,i=n.return,a=n,c=t;if(t=rt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,g=a,m=g.tag;if(!(g.mode&1)&&(m===0||m===11||m===15)){var h=g.alternate;h?(g.updateQueue=h.updateQueue,g.memoizedState=h.memoizedState,g.lanes=h.lanes):(g.updateQueue=null,g.memoizedState=null)}var v=Ru(i);if(v!==null){v.flags&=-257,Iu(v,i,a,o,t),v.mode&1&&_u(o,d,t),t=v,c=d;var w=t.updateQueue;if(w===null){var N=new Set;N.add(c),t.updateQueue=N}else w.add(c);break e}else{if(!(t&1)){_u(o,d,t),fc();break e}c=Error(Y(426))}}else if($e&&a.mode&1){var j=Ru(i);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Iu(j,i,a,o,t),Ga(Or(c,a));break e}}o=c=Or(c,a),qe!==4&&(qe=2),ms===null?ms=[o]:ms.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var p=Sp(o,c,t);ku(o,p);break e;case 1:a=c;var f=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof f.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(In===null||!In.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=Np(o,a,t);ku(o,S);break e}}o=o.return}while(o!==null)}Bp(n)}catch(R){t=R,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function Dp(){var e=Yl.current;return Yl.current=Ql,e===null?Ql:e}function fc(){(qe===0||qe===3||qe===2)&&(qe=4),et===null||!(sr&268435455)&&!(xo&268435455)||Nn(et,rt)}function Jl(e,t){var n=Ce;Ce|=2;var r=Dp();(et!==e||rt!==t)&&(nn=null,Zn(e,t));do try{dy();break}catch(s){Fp(e,s)}while(!0);if(Qa(),Ce=n,Yl.current=r,Qe!==null)throw Error(Y(261));return et=null,rt=0,qe}function dy(){for(;Qe!==null;)Up(Qe)}function fy(){for(;Qe!==null&&!Mh();)Up(Qe)}function Up(e){var t=Vp(e.alternate,e,jt);e.memoizedProps=e.pendingProps,t===null?Bp(e):Qe=t,ic.current=null}function Bp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ly(n,t),n!==null){n.flags&=32767,Qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Qe=null;return}}else if(n=sy(n,t,jt),n!==null){Qe=n;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);qe===0&&(qe=5)}function Qn(e,t,n){var r=Pe,s=Tt.transition;try{Tt.transition=null,Pe=1,py(e,t,n,r)}finally{Tt.transition=s,Pe=r}return null}function py(e,t,n,r){do _r();while(Cn!==null);if(Ce&6)throw Error(Y(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Kh(e,o),e===et&&(Qe=et=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fl||(fl=!0,Hp(Tl,function(){return _r(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Tt.transition,Tt.transition=null;var i=Pe;Pe=1;var a=Ce;Ce|=4,ic.current=null,iy(e,n),$p(n,e),Tg(Oi),Al=!!Mi,Oi=Mi=null,e.current=n,ay(n),Oh(),Ce=a,Pe=i,Tt.transition=o}else e.current=n;if(fl&&(fl=!1,Cn=e,Xl=s),o=e.pendingLanes,o===0&&(In=null),Uh(n.stateNode),xt(e,He()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ql)throw ql=!1,e=sa,sa=null,e;return Xl&1&&e.tag!==0&&_r(),o=e.pendingLanes,o&1?e===la?hs++:(hs=0,la=e):hs=0,Bn(),null}function _r(){if(Cn!==null){var e=Sf(Xl),t=Tt.transition,n=Pe;try{if(Tt.transition=null,Pe=16>e?16:e,Cn===null)var r=!1;else{if(e=Cn,Cn=null,Xl=0,Ce&6)throw Error(Y(331));var s=Ce;for(Ce|=4,oe=e.current;oe!==null;){var o=oe,i=o.child;if(oe.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(oe=d;oe!==null;){var g=oe;switch(g.tag){case 0:case 11:case 15:ps(8,g,o)}var m=g.child;if(m!==null)m.return=g,oe=m;else for(;oe!==null;){g=oe;var h=g.sibling,v=g.return;if(Tp(g),g===d){oe=null;break}if(h!==null){h.return=v,oe=h;break}oe=v}}}var w=o.alternate;if(w!==null){var N=w.child;if(N!==null){w.child=null;do{var j=N.sibling;N.sibling=null,N=j}while(N!==null)}}oe=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,oe=i;else e:for(;oe!==null;){if(o=oe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ps(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,oe=p;break e}oe=o.return}}var f=e.current;for(oe=f;oe!==null;){i=oe;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,oe=y;else e:for(i=f;oe!==null;){if(a=oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vo(9,a)}}catch(R){We(a,a.return,R)}if(a===i){oe=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,oe=S;break e}oe=a.return}}if(Ce=s,Bn(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(co,e)}catch{}r=!0}return r}finally{Pe=n,Tt.transition=t}}return!1}function Hu(e,t,n){t=Or(n,t),t=Sp(e,t,1),e=Rn(e,t,1),t=dt(),e!==null&&(Os(e,1,t),xt(e,t))}function We(e,t,n){if(e.tag===3)Hu(e,e,n);else for(;t!==null;){if(t.tag===3){Hu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(In===null||!In.has(r))){e=Or(n,e),e=Np(t,e,1),t=Rn(t,e,1),e=dt(),t!==null&&(Os(t,1,e),xt(t,e));break}}t=t.return}}function my(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=dt(),e.pingedLanes|=e.suspendedLanes&n,et===e&&(rt&n)===n&&(qe===4||qe===3&&(rt&130023424)===rt&&500>He()-cc?Zn(e,0):ac|=n),xt(e,t)}function Wp(e,t){t===0&&(e.mode&1?(t=nl,nl<<=1,!(nl&130023424)&&(nl=4194304)):t=1);var n=dt();e=mn(e,t),e!==null&&(Os(e,t,n),xt(e,n))}function hy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Wp(e,n)}function gy(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(t),Wp(e,n)}var Vp;Vp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||yt.current)gt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return gt=!1,ry(e,t,n);gt=!!(e.flags&131072)}else gt=!1,$e&&t.flags&1048576&&Qf(t,Bl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Cl(e,t),e=t.pendingProps;var s=zr(t,ct.current);Pr(t,n),s=nc(null,t,r,e,s,n);var o=rc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vt(r)?(o=!0,Dl(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xa(t),s.updater=yo,t.stateNode=s,s._reactInternals=t,Ki(t,r,e,n),t=qi(null,t,r,!0,o,n)):(t.tag=0,$e&&o&&Va(t),ut(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Cl(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=vy(r),e=Ot(r,e),s){case 0:t=Yi(null,t,r,e,n);break e;case 1:t=Au(null,t,r,e,n);break e;case 11:t=Tu(null,t,r,e,n);break e;case 14:t=zu(null,t,r,Ot(r.type,e),n);break e}throw Error(Y(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ot(r,s),Yi(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ot(r,s),Au(e,t,r,s,n);case 3:e:{if(Ep(t),e===null)throw Error(Y(387));r=t.pendingProps,o=t.memoizedState,s=o.element,ep(e,t),Hl(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Or(Error(Y(423)),t),t=$u(e,t,r,n,s);break e}else if(r!==s){s=Or(Error(Y(424)),t),t=$u(e,t,r,n,s);break e}else for(St=_n(t.stateNode.containerInfo.firstChild),Nt=t,$e=!0,Dt=null,n=Jf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ar(),r===s){t=hn(e,t,n);break e}ut(e,t,r,n)}t=t.child}return t;case 5:return tp(t),e===null&&Vi(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,Fi(r,s)?i=null:o!==null&&Fi(r,o)&&(t.flags|=32),bp(e,t),ut(e,t,i,n),t.child;case 6:return e===null&&Vi(t),null;case 13:return Lp(e,t,n);case 4:return Ja(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=$r(t,null,r,n):ut(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ot(r,s),Tu(e,t,r,s,n);case 7:return ut(e,t,t.pendingProps,n),t.child;case 8:return ut(e,t,t.pendingProps.children,n),t.child;case 12:return ut(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,Ie(Wl,r._currentValue),r._currentValue=i,o!==null)if(Wt(o.value,i)){if(o.children===s.children&&!yt.current){t=hn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=un(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var g=d.pending;g===null?c.next=c:(c.next=g.next,g.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Hi(o.return,n,t),a.lanes|=n;break}c=c.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(Y(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Hi(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}ut(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Pr(t,n),s=zt(s),r=r(s),t.flags|=1,ut(e,t,r,n),t.child;case 14:return r=t.type,s=Ot(r,t.pendingProps),s=Ot(r.type,s),zu(e,t,r,s,n);case 15:return kp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ot(r,s),Cl(e,t),t.tag=1,vt(r)?(e=!0,Dl(t)):e=!1,Pr(t,n),jp(t,r,s),Ki(t,r,s,n),qi(null,t,r,!0,e,n);case 19:return Pp(e,t,n);case 22:return Cp(e,t,n)}throw Error(Y(156,t.tag))};function Hp(e,t){return vf(e,t)}function yy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function It(e,t,n,r){return new yy(e,t,n,r)}function pc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vy(e){if(typeof e=="function")return pc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ia)return 11;if(e===Ta)return 14}return 2}function zn(e,t){var n=e.alternate;return n===null?(n=It(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,s,o){var i=2;if(r=e,typeof e=="function")pc(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case mr:return er(n.children,s,o,t);case Ra:i=8,s|=8;break;case yi:return e=It(12,n,t,s|2),e.elementType=yi,e.lanes=o,e;case vi:return e=It(13,n,t,s),e.elementType=vi,e.lanes=o,e;case xi:return e=It(19,n,t,s),e.elementType=xi,e.lanes=o,e;case ef:return wo(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Jd:i=10;break e;case Zd:i=9;break e;case Ia:i=11;break e;case Ta:i=14;break e;case wn:i=16,r=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=It(i,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function er(e,t,n,r){return e=It(7,e,r,t),e.lanes=n,e}function wo(e,t,n,r){return e=It(22,e,r,t),e.elementType=ef,e.lanes=n,e.stateNode={isHidden:!1},e}function si(e,t,n){return e=It(6,e,null,t),e.lanes=n,e}function li(e,t,n){return t=It(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function xy(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fo(0),this.expirationTimes=Fo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mc(e,t,n,r,s,o,i,a,c){return e=new xy(e,t,n,a,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=It(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xa(o),e}function wy(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Gp(e){if(!e)return On;e=e._reactInternals;e:{if(ir(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var n=e.type;if(vt(n))return Gf(e,n,t)}return t}function Kp(e,t,n,r,s,o,i,a,c){return e=mc(n,r,!0,e,s,o,i,a,c),e.context=Gp(null),n=e.current,r=dt(),s=Tn(n),o=un(r,s),o.callback=t??null,Rn(n,o,s),e.current.lanes=s,Os(e,s,r),xt(e,r),e}function jo(e,t,n,r){var s=t.current,o=dt(),i=Tn(s);return n=Gp(n),t.context===null?t.context=n:t.pendingContext=n,t=un(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Rn(s,t,i),e!==null&&(Bt(e,s,i,o),Sl(e,s,i)),i}function Zl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hc(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}function jy(){return null}var Qp=typeof reportError=="function"?reportError:function(e){console.error(e)};function gc(e){this._internalRoot=e}So.prototype.render=gc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));jo(e,t,null,null)};So.prototype.unmount=gc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lr(function(){jo(null,e,null,null)}),t[pn]=null}};function So(e){this._internalRoot=e}So.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sn.length&&t!==0&&t<Sn[n].priority;n++);Sn.splice(n,0,e),n===0&&Ef(e)}};function yc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function No(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ku(){}function Sy(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=Zl(i);o.call(d)}}var i=Kp(t,r,e,0,null,!1,!1,"",Ku);return e._reactRootContainer=i,e[pn]=i.current,bs(e.nodeType===8?e.parentNode:e),lr(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=Zl(c);a.call(d)}}var c=mc(e,0,!1,null,null,!1,!1,"",Ku);return e._reactRootContainer=c,e[pn]=c.current,bs(e.nodeType===8?e.parentNode:e),lr(function(){jo(t,c,n,r)}),c}function ko(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var a=s;s=function(){var c=Zl(i);a.call(c)}}jo(t,i,e,s)}else i=Sy(n,t,e,s,r);return Zl(i)}Nf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=rs(t.pendingLanes);n!==0&&($a(t,n|1),xt(t,He()),!(Ce&6)&&(Fr=He()+500,Bn()))}break;case 13:lr(function(){var r=mn(e,1);if(r!==null){var s=dt();Bt(r,e,1,s)}}),hc(e,1)}};Ma=function(e){if(e.tag===13){var t=mn(e,134217728);if(t!==null){var n=dt();Bt(t,e,134217728,n)}hc(e,134217728)}};kf=function(e){if(e.tag===13){var t=Tn(e),n=mn(e,t);if(n!==null){var r=dt();Bt(n,e,t,r)}hc(e,t)}};Cf=function(){return Pe};bf=function(e,t){var n=Pe;try{return Pe=e,t()}finally{Pe=n}};Pi=function(e,t,n){switch(t){case"input":if(Si(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=mo(r);if(!s)throw Error(Y(90));nf(r),Si(r,s)}}}break;case"textarea":sf(e,n);break;case"select":t=n.value,t!=null&&Cr(e,!!n.multiple,t,!1)}};ff=uc;pf=lr;var Ny={usingClientEntryPoint:!1,Events:[Ds,vr,mo,uf,df,uc]},Zr={findFiberByHostInstance:qn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ky={bundleType:Zr.bundleType,version:Zr.version,rendererPackageName:Zr.rendererPackageName,rendererConfig:Zr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=gf(e),e===null?null:e.stateNode},findFiberByHostInstance:Zr.findFiberByHostInstance||jy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{co=pl.inject(ky),Zt=pl}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ny;bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yc(t))throw Error(Y(200));return wy(e,t,null,n)};bt.createRoot=function(e,t){if(!yc(e))throw Error(Y(299));var n=!1,r="",s=Qp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=mc(e,1,!1,null,null,n,!1,r,s),e[pn]=t.current,bs(e.nodeType===8?e.parentNode:e),new gc(t)};bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=gf(t),e=e===null?null:e.stateNode,e};bt.flushSync=function(e){return lr(e)};bt.hydrate=function(e,t,n){if(!No(t))throw Error(Y(200));return ko(null,e,t,!0,n)};bt.hydrateRoot=function(e,t,n){if(!yc(e))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=Qp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Kp(t,null,e,1,n??null,s,!1,o,i),e[pn]=t.current,bs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new So(t)};bt.render=function(e,t,n){if(!No(t))throw Error(Y(200));return ko(null,e,t,!1,n)};bt.unmountComponentAtNode=function(e){if(!No(e))throw Error(Y(40));return e._reactRootContainer?(lr(function(){ko(null,null,e,!1,function(){e._reactRootContainer=null,e[pn]=null})}),!0):!1};bt.unstable_batchedUpdates=uc;bt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!No(n))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return ko(e,t,n,!1,r)};bt.version="18.3.1-next-f1338f8080-20240426";function Yp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yp)}catch(e){console.error(e)}}Yp(),Qd.exports=bt;var vc=Qd.exports,Qu=vc;hi.createRoot=Qu.createRoot,hi.hydrateRoot=Qu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function As(){return As=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},As.apply(this,arguments)}var bn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(bn||(bn={}));const Yu="popstate";function Cy(e){e===void 0&&(e={});function t(s,o){let{pathname:i="/",search:a="",hash:c=""}=ar(s.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),aa("",{pathname:i,search:a,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){let i=s.document.querySelector("base"),a="";if(i&&i.getAttribute("href")){let c=s.location.href,d=c.indexOf("#");a=d===-1?c:c.slice(0,d)}return a+"#"+(typeof o=="string"?o:eo(o))}function r(s,o){xc(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return Ey(t,n,r,e)}function De(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function by(){return Math.random().toString(36).substr(2,8)}function qu(e,t){return{usr:e.state,key:e.key,idx:t}}function aa(e,t,n,r){return n===void 0&&(n=null),As({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ar(t):t,{state:n,key:t&&t.key||r||by()})}function eo(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ar(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Ey(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,i=s.history,a=bn.Pop,c=null,d=g();d==null&&(d=0,i.replaceState(As({},i.state,{idx:d}),""));function g(){return(i.state||{idx:null}).idx}function m(){a=bn.Pop;let j=g(),p=j==null?null:j-d;d=j,c&&c({action:a,location:N.location,delta:p})}function h(j,p){a=bn.Push;let f=aa(N.location,j,p);n&&n(f,j),d=g()+1;let y=qu(f,d),S=N.createHref(f);try{i.pushState(y,"",S)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(S)}o&&c&&c({action:a,location:N.location,delta:1})}function v(j,p){a=bn.Replace;let f=aa(N.location,j,p);n&&n(f,j),d=g();let y=qu(f,d),S=N.createHref(f);i.replaceState(y,"",S),o&&c&&c({action:a,location:N.location,delta:0})}function w(j){let p=s.location.origin!=="null"?s.location.origin:s.location.href,f=typeof j=="string"?j:eo(j);return f=f.replace(/ $/,"%20"),De(p,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,p)}let N={get action(){return a},get location(){return e(s,i)},listen(j){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Yu,m),c=j,()=>{s.removeEventListener(Yu,m),c=null}},createHref(j){return t(s,j)},createURL:w,encodeLocation(j){let p=w(j);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:v,go(j){return i.go(j)}};return N}var Xu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Xu||(Xu={}));function Ly(e,t,n){return n===void 0&&(n="/"),Py(e,t,n)}function Py(e,t,n,r){let s=typeof t=="string"?ar(t):t,o=Dr(s.pathname||"/",n);if(o==null)return null;let i=qp(e);_y(i);let a=null;for(let c=0;a==null&&c<i.length;++c){let d=Uy(o);a=Fy(i[c],d)}return a}function qp(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,i,a)=>{let c={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};c.relativePath.startsWith("/")&&(De(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=An([r,c.relativePath]),g=n.concat(c);o.children&&o.children.length>0&&(De(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),qp(o.children,t,g,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:My(d,o.index),routesMeta:g})};return e.forEach((o,i)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,i);else for(let c of Xp(o.path))s(o,i,c)}),t}function Xp(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let i=Xp(r.join("/")),a=[];return a.push(...i.map(c=>c===""?o:[o,c].join("/"))),s&&a.push(...i),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function _y(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Oy(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Ry=/^:[\w-]+$/,Iy=3,Ty=2,zy=1,Ay=10,$y=-2,Ju=e=>e==="*";function My(e,t){let n=e.split("/"),r=n.length;return n.some(Ju)&&(r+=$y),t&&(r+=Ty),n.filter(s=>!Ju(s)).reduce((s,o)=>s+(Ry.test(o)?Iy:o===""?zy:Ay),r)}function Oy(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Fy(e,t,n){let{routesMeta:r}=e,s={},o="/",i=[];for(let a=0;a<r.length;++a){let c=r[a],d=a===r.length-1,g=o==="/"?t:t.slice(o.length)||"/",m=ca({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},g),h=c.route;if(!m)return null;Object.assign(s,m.params),i.push({params:s,pathname:An([o,m.pathname]),pathnameBase:Hy(An([o,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(o=An([o,m.pathnameBase]))}return i}function ca(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Dy(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],i=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((d,g,m)=>{let{paramName:h,isOptional:v}=g;if(h==="*"){let N=a[m]||"";i=o.slice(0,o.length-N.length).replace(/(.)\/+$/,"$1")}const w=a[m];return v&&!w?d[h]=void 0:d[h]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:i,pattern:e}}function Dy(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),xc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Uy(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Dr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function By(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?ar(e):e;return{pathname:n?n.startsWith("/")?n:Wy(n,t):t,search:Gy(r),hash:Ky(s)}}function Wy(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function oi(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Vy(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function wc(e,t){let n=Vy(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function jc(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=ar(e):(s=As({},e),De(!s.pathname||!s.pathname.includes("?"),oi("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),oi("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),oi("#","search","hash",s)));let o=e===""||s.pathname==="",i=o?"/":s.pathname,a;if(i==null)a=n;else{let m=t.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),m-=1;s.pathname=h.join("/")}a=m>=0?t[m]:"/"}let c=By(s,a),d=i&&i!=="/"&&i.endsWith("/"),g=(o||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||g)&&(c.pathname+="/"),c}const An=e=>e.join("/").replace(/\/\/+/g,"/"),Hy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Gy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ky=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Qy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Jp=["post","put","patch","delete"];new Set(Jp);const Yy=["get",...Jp];new Set(Yy);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $s(){return $s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$s.apply(this,arguments)}const Co=u.createContext(null),Zp=u.createContext(null),yn=u.createContext(null),bo=u.createContext(null),vn=u.createContext({outlet:null,matches:[],isDataRoute:!1}),em=u.createContext(null);function qy(e,t){let{relative:n}=t===void 0?{}:t;Vr()||De(!1);let{basename:r,navigator:s}=u.useContext(yn),{hash:o,pathname:i,search:a}=Eo(e,{relative:n}),c=i;return r!=="/"&&(c=i==="/"?r:An([r,i])),s.createHref({pathname:c,search:a,hash:o})}function Vr(){return u.useContext(bo)!=null}function Lt(){return Vr()||De(!1),u.useContext(bo).location}function tm(e){u.useContext(yn).static||u.useLayoutEffect(e)}function tn(){let{isDataRoute:e}=u.useContext(vn);return e?dv():Xy()}function Xy(){Vr()||De(!1);let e=u.useContext(Co),{basename:t,future:n,navigator:r}=u.useContext(yn),{matches:s}=u.useContext(vn),{pathname:o}=Lt(),i=JSON.stringify(wc(s,n.v7_relativeSplatPath)),a=u.useRef(!1);return tm(()=>{a.current=!0}),u.useCallback(function(d,g){if(g===void 0&&(g={}),!a.current)return;if(typeof d=="number"){r.go(d);return}let m=jc(d,JSON.parse(i),o,g.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:An([t,m.pathname])),(g.replace?r.replace:r.push)(m,g.state,g)},[t,r,i,o,e])}const Jy=u.createContext(null);function Zy(e){let t=u.useContext(vn).outlet;return t&&u.createElement(Jy.Provider,{value:e},t)}function Eo(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=u.useContext(yn),{matches:s}=u.useContext(vn),{pathname:o}=Lt(),i=JSON.stringify(wc(s,r.v7_relativeSplatPath));return u.useMemo(()=>jc(e,JSON.parse(i),o,n==="path"),[e,i,o,n])}function ev(e,t){return tv(e,t)}function tv(e,t,n,r){Vr()||De(!1);let{navigator:s}=u.useContext(yn),{matches:o}=u.useContext(vn),i=o[o.length-1],a=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=Lt(),g;if(t){var m;let j=typeof t=="string"?ar(t):t;c==="/"||(m=j.pathname)!=null&&m.startsWith(c)||De(!1),g=j}else g=d;let h=g.pathname||"/",v=h;if(c!=="/"){let j=c.replace(/^\//,"").split("/");v="/"+h.replace(/^\//,"").split("/").slice(j.length).join("/")}let w=Ly(e,{pathname:v}),N=ov(w&&w.map(j=>Object.assign({},j,{params:Object.assign({},a,j.params),pathname:An([c,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:An([c,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,n,r);return t&&N?u.createElement(bo.Provider,{value:{location:$s({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:bn.Pop}},N):N}function nv(){let e=uv(),t=Qy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),n?u.createElement("pre",{style:s},n):null,null)}const rv=u.createElement(nv,null);class sv extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?u.createElement(vn.Provider,{value:this.props.routeContext},u.createElement(em.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lv(e){let{routeContext:t,match:n,children:r}=e,s=u.useContext(Co);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),u.createElement(vn.Provider,{value:t},r)}function ov(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let g=i.findIndex(m=>m.route.id&&(a==null?void 0:a[m.route.id])!==void 0);g>=0||De(!1),i=i.slice(0,Math.min(i.length,g+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<i.length;g++){let m=i[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=g),m.route.id){let{loaderData:h,errors:v}=n,w=m.route.loader&&h[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||w){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((g,m,h)=>{let v,w=!1,N=null,j=null;n&&(v=a&&m.route.id?a[m.route.id]:void 0,N=m.route.errorElement||rv,c&&(d<0&&h===0?(fv("route-fallback"),w=!0,j=null):d===h&&(w=!0,j=m.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,h+1)),f=()=>{let y;return v?y=N:w?y=j:m.route.Component?y=u.createElement(m.route.Component,null):m.route.element?y=m.route.element:y=g,u.createElement(lv,{match:m,routeContext:{outlet:g,matches:p,isDataRoute:n!=null},children:y})};return n&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?u.createElement(sv,{location:n.location,revalidation:n.revalidation,component:N,error:v,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()},null)}var nm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(nm||{}),rm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(rm||{});function iv(e){let t=u.useContext(Co);return t||De(!1),t}function av(e){let t=u.useContext(Zp);return t||De(!1),t}function cv(e){let t=u.useContext(vn);return t||De(!1),t}function sm(e){let t=cv(),n=t.matches[t.matches.length-1];return n.route.id||De(!1),n.route.id}function uv(){var e;let t=u.useContext(em),n=av(),r=sm();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function dv(){let{router:e}=iv(nm.UseNavigateStable),t=sm(rm.UseNavigateStable),n=u.useRef(!1);return tm(()=>{n.current=!0}),u.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,$s({fromRouteId:t},o)))},[e,t])}const Zu={};function fv(e,t,n){Zu[e]||(Zu[e]=!0)}function pv(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ua(e){let{to:t,replace:n,state:r,relative:s}=e;Vr()||De(!1);let{future:o,static:i}=u.useContext(yn),{matches:a}=u.useContext(vn),{pathname:c}=Lt(),d=tn(),g=jc(t,wc(a,o.v7_relativeSplatPath),c,s==="path"),m=JSON.stringify(g);return u.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function mv(e){return Zy(e.context)}function Mt(e){De(!1)}function hv(e){let{basename:t="/",children:n=null,location:r,navigationType:s=bn.Pop,navigator:o,static:i=!1,future:a}=e;Vr()&&De(!1);let c=t.replace(/^\/*/,"/"),d=u.useMemo(()=>({basename:c,navigator:o,static:i,future:$s({v7_relativeSplatPath:!1},a)}),[c,a,o,i]);typeof r=="string"&&(r=ar(r));let{pathname:g="/",search:m="",hash:h="",state:v=null,key:w="default"}=r,N=u.useMemo(()=>{let j=Dr(g,c);return j==null?null:{location:{pathname:j,search:m,hash:h,state:v,key:w},navigationType:s}},[c,g,m,h,v,w,s]);return N==null?null:u.createElement(yn.Provider,{value:d},u.createElement(bo.Provider,{children:n,value:N}))}function gv(e){let{children:t,location:n}=e;return ev(da(t),n)}new Promise(()=>{});function da(e,t){t===void 0&&(t=[]);let n=[];return u.Children.forEach(e,(r,s)=>{if(!u.isValidElement(r))return;let o=[...t,s];if(r.type===u.Fragment){n.push.apply(n,da(r.props.children,o));return}r.type!==Mt&&De(!1),!r.props.index||!r.props.children||De(!1);let i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=da(r.props.children,o)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function to(){return to=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},to.apply(this,arguments)}function lm(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function yv(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function vv(e,t){return e.button===0&&(!t||t==="_self")&&!yv(e)}function fa(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function xv(e,t){let n=fa(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(o=>{n.append(s,o)})}),n}const wv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jv=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Sv="6";try{window.__reactRouterVersion=Sv}catch{}const Nv=u.createContext({isTransitioning:!1}),kv="startTransition",ed=mh[kv];function Cv(e){let{basename:t,children:n,future:r,window:s}=e,o=u.useRef();o.current==null&&(o.current=Cy({window:s,v5Compat:!0}));let i=o.current,[a,c]=u.useState({action:i.action,location:i.location}),{v7_startTransition:d}=r||{},g=u.useCallback(m=>{d&&ed?ed(()=>c(m)):c(m)},[c,d]);return u.useLayoutEffect(()=>i.listen(g),[i,g]),u.useEffect(()=>pv(r),[r]),u.createElement(hv,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:i,future:r})}const bv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ev=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,om=u.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:i,state:a,target:c,to:d,preventScrollReset:g,viewTransition:m}=t,h=lm(t,wv),{basename:v}=u.useContext(yn),w,N=!1;if(typeof d=="string"&&Ev.test(d)&&(w=d,bv))try{let y=new URL(window.location.href),S=d.startsWith("//")?new URL(y.protocol+d):new URL(d),R=Dr(S.pathname,v);S.origin===y.origin&&R!=null?d=R+S.search+S.hash:N=!0}catch{}let j=qy(d,{relative:s}),p=Pv(d,{replace:i,state:a,target:c,preventScrollReset:g,relative:s,viewTransition:m});function f(y){r&&r(y),y.defaultPrevented||p(y)}return u.createElement("a",to({},h,{href:w||j,onClick:N||o?r:f,ref:n,target:c}))}),ur=u.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:o="",end:i=!1,style:a,to:c,viewTransition:d,children:g}=t,m=lm(t,jv),h=Eo(c,{relative:m.relative}),v=Lt(),w=u.useContext(Zp),{navigator:N,basename:j}=u.useContext(yn),p=w!=null&&_v(h)&&d===!0,f=N.encodeLocation?N.encodeLocation(h).pathname:h.pathname,y=v.pathname,S=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;s||(y=y.toLowerCase(),S=S?S.toLowerCase():null,f=f.toLowerCase()),S&&j&&(S=Dr(S,j)||S);const R=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let P=y===f||!i&&y.startsWith(f)&&y.charAt(R)==="/",O=S!=null&&(S===f||!i&&S.startsWith(f)&&S.charAt(f.length)==="/"),_={isActive:P,isPending:O,isTransitioning:p},V=P?r:void 0,A;typeof o=="function"?A=o(_):A=[o,P?"active":null,O?"pending":null,p?"transitioning":null].filter(Boolean).join(" ");let W=typeof a=="function"?a(_):a;return u.createElement(om,to({},m,{"aria-current":V,className:A,ref:n,style:W,to:c,viewTransition:d}),typeof g=="function"?g(_):g)});var pa;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(pa||(pa={}));var td;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(td||(td={}));function Lv(e){let t=u.useContext(Co);return t||De(!1),t}function Pv(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:i,viewTransition:a}=t===void 0?{}:t,c=tn(),d=Lt(),g=Eo(e,{relative:i});return u.useCallback(m=>{if(vv(m,n)){m.preventDefault();let h=r!==void 0?r:eo(d)===eo(g);c(e,{replace:h,state:s,preventScrollReset:o,relative:i,viewTransition:a})}},[d,c,g,r,s,n,e,o,i,a])}function im(e){let t=u.useRef(fa(e)),n=u.useRef(!1),r=Lt(),s=u.useMemo(()=>xv(r.search,n.current?null:t.current),[r.search]),o=tn(),i=u.useCallback((a,c)=>{const d=fa(typeof a=="function"?a(s):a);n.current=!0,o("?"+d,c)},[o,s]);return[s,i]}function _v(e,t){t===void 0&&(t={});let n=u.useContext(Nv);n==null&&De(!1);let{basename:r}=Lv(pa.useViewTransitionState),s=Eo(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=Dr(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Dr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ca(s.pathname,i)!=null||ca(s.pathname,o)!=null}function am(){const[e,t]=u.useState(()=>{if(typeof window>"u")return!1;try{return window.localStorage.getItem("cozygen_gallery_pending")==="1"}catch{return!1}});return u.useEffect(()=>{const n=()=>t(!0),r=()=>t(!1),s=o=>{o.key==="cozygen_gallery_pending"&&t(o.newValue==="1")};return window.addEventListener("cozygen:gallery-pending",n),window.addEventListener("cozygen:gallery-viewed",r),window.addEventListener("storage",s),()=>{window.removeEventListener("cozygen:gallery-pending",n),window.removeEventListener("cozygen:gallery-viewed",r),window.removeEventListener("storage",s)}},[]),e}const ma="cozygen_token";function Sc(){try{return typeof window>"u"?null:localStorage.getItem(ma)}catch{return null}}function cm(e){try{if(typeof window>"u")return;e?localStorage.setItem(ma,e):localStorage.removeItem(ma)}catch{}}function ii(){cm(null)}function Bs(){const e=Sc();return e?{Authorization:`Bearer ${e}`}:{}}const Ws=async(e,t)=>{if(t.status===401){const r=new Error("unauthorized");throw r.unauthorized=!0,r.status=401,r}if(!t.ok)throw new Error(`${e} failed`);return(t.headers.get("content-type")||"").includes("application/json")?t.json():t.text()},Wn=async(e,t={})=>{const{signal:n}=t,r=await fetch(e,{headers:{...Bs()},credentials:"include",signal:n});return Ws(e,r)},Vs=async(e,t,n={})=>{const{signal:r}=n,s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",...Bs()},body:JSON.stringify(t),credentials:"include",signal:r});return Ws(e,s)};async function Rv(e={}){return Wn("/cozygen/workflows",e)}async function Iv(e,t={}){return Wn(`/cozygen/workflows/${encodeURIComponent(e)}`,t)}async function Tv(e,t={}){const{refresh:n=!1,cacheBust:r="",...s}=t||{},o=new URLSearchParams({type:String(e||"")});return n&&o.set("refresh","1"),r&&o.set("cache_bust",String(r)),Wn(`/cozygen/get_choices?${o.toString()}`,s)}async function um(e){const t=await fetch("/prompt",{method:"POST",headers:{"Content-Type":"application/json",...Bs()},body:JSON.stringify(e),credentials:"include"});return Ws("/prompt",t)}async function zv(e){const t=new FormData;t.append("image",e);const n=await fetch("/cozygen/upload_image",{method:"POST",headers:{...Bs()},body:t,credentials:"include"});return Ws("/cozygen/upload_image",n)}async function dm(e="",t=1,n=50,r=!1,s=!1,o="all",i="",a={}){const{includeMeta:c=!1,...d}=a||{},g=new URLSearchParams({subfolder:e,page:String(t),per_page:String(n),show_hidden:r?"1":"0",recursive:s?"1":"0",kind:o});return c&&g.set("include_meta","1"),i&&g.set("cache_bust",String(i)),Wn(`/cozygen/api/gallery?${g.toString()}`,d)}async function Av(){return Wn("/cozygen/api/aliases")}async function $v(e){return Vs("/cozygen/api/aliases",e||{})}async function fm(e={}){return Wn("/cozygen/api/tags/categories",e)}async function no({q:e="",category:t="",sort:n="count",limit:r=80,offset:s=0}={},o={}){const i=new URLSearchParams({q:String(e||""),category:String(t||""),sort:String(n||"count"),limit:String(r||80),offset:String(s||0)});return Wn(`/cozygen/api/tags/search?${i.toString()}`,o)}async function ai(e=[],t={}){return Vs("/cozygen/api/tags/validate",{tags:Array.isArray(e)?e:[]},t)}async function Mv(e,t={}){const n=new URLSearchParams;return e&&n.set("workflow",e),Wn(`/cozygen/api/workflow_presets?${n.toString()}`,t)}async function Ov(e,t,n={}){return Vs("/cozygen/api/workflow_presets",{workflow:e,preset:t},n)}async function Fv(e,t,n={}){return Vs("/cozygen/api/workflow_presets",{workflow:e,delete:t},n)}async function Dv(e,t){return Vs("/cozygen/api/login",{username:e,password:t})}async function Uv(){return fetch("/cozygen/api/auth_status",{headers:{...Bs()},credentials:"include"}).then(e=>Ws("/cozygen/api/auth_status",e))}const Bv=30*60*1e3,nd="cozygen_idle_logout",pm=u.createContext(null);function Wv({children:e}){const[t,n]=u.useState(!1),[r,s]=u.useState(null),[o,i]=u.useState(!1),[a,c]=u.useState(null),d=u.useCallback(async()=>{if(!Sc()){s(null),i(!1),n(!0);return}try{const w=await Uv();s((w==null?void 0:w.user)||null),i(!!(w!=null&&w.default_credentials))}catch{ii(),s(null),i(!1)}finally{n(!0)}},[]);u.useEffect(()=>{d()},[d]);const g=u.useCallback(async(v,w)=>{const N=await Dv(v,w);cm((N==null?void 0:N.token)||""),s((N==null?void 0:N.user)||v),i(!!(N!=null&&N.default_credentials));try{localStorage.removeItem(nd)}catch{}return N},[]),m=u.useCallback(()=>{ii(),s(null),i(!1)},[]);u.useEffect(()=>{if(!t)return;const v=()=>{a&&clearTimeout(a);const N=setTimeout(()=>{ii(),s(null),i(!1);try{localStorage.setItem(nd,"1")}catch{}window.location.hash="#/login"},Bv);c(N)};v();const w=["pointerdown","keydown","visibilitychange"];return w.forEach(N=>window.addEventListener(N,v,{passive:!0})),()=>{a&&clearTimeout(a),w.forEach(N=>window.removeEventListener(N,v))}},[t,a]);const h=u.useMemo(()=>({ready:t,user:r,authed:!!r,defaultCreds:o,login:g,logout:m,refresh:d}),[t,r,o,g,m,d]);return l.jsx(pm.Provider,{value:h,children:e})}function Lo(){const e=u.useContext(pm);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function Vv({children:e}){return l.jsx(Wv,{children:e})}const mm="cozygen_last_render_payload";function Hv(e){if(e)try{if(typeof window>"u")return;window.localStorage.setItem(mm,JSON.stringify(e))}catch{}}function hm(){try{if(typeof window>"u")return null;const e=window.localStorage.getItem(mm);return e?JSON.parse(e):null}catch{return null}}async function gm(){const e=hm();if(!e||!e.workflow)return{success:!1,error:"No previous render to repeat"};try{return window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!0}})),await um({prompt:e.workflow}),window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!1}})),{success:!0}}catch(t){return console.error("Failed to requeue prompt",t),window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:!1}})),t!=null&&t.unauthorized?(window.location.hash="#/login",{success:!1,error:"Session expired"}):{success:!1,error:"Failed to queue prompt"}}}function ym(){const e=hm();return!!(e&&e.workflow)}function Nc(e,t=!1){const n=()=>typeof window>"u"||!window.matchMedia?t:window.matchMedia(e).matches,[r,s]=u.useState(n);return u.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const o=window.matchMedia(e),i=()=>s(o.matches);return i(),typeof o.addEventListener=="function"?(o.addEventListener("change",i),()=>o.removeEventListener("change",i)):(o.addListener(i),()=>o.removeListener(i))},[e]),r}const vm=({size:e=32,className:t=""})=>l.jsxs("svg",{width:e,height:e,viewBox:"0 0 32 32",fill:"none",className:t,"aria-hidden":"true",children:[l.jsx("path",{d:"M8 24L20 4",stroke:"url(#logo-gradient)",strokeWidth:"3",strokeLinecap:"round"}),l.jsx("path",{d:"M6 26C6 26 7 24 8 24C9 24 10 25 8 27C6 29 4 28 6 26Z",fill:"url(#logo-warm)"}),l.jsx("circle",{cx:"22",cy:"8",r:"2",fill:"url(#logo-spark)"}),l.jsx("circle",{cx:"26",cy:"12",r:"1.5",fill:"url(#logo-spark)",opacity:"0.8"}),l.jsx("circle",{cx:"24",cy:"16",r:"1",fill:"url(#logo-spark)",opacity:"0.6"}),l.jsxs("defs",{children:[l.jsxs("linearGradient",{id:"logo-gradient",x1:"8",y1:"24",x2:"20",y2:"4",gradientUnits:"userSpaceOnUse",children:[l.jsx("stop",{stopColor:"#FF9F7A"}),l.jsx("stop",{offset:"0.5",stopColor:"#9F8CFF"}),l.jsx("stop",{offset:"1",stopColor:"#44E1C5"})]}),l.jsxs("linearGradient",{id:"logo-warm",x1:"4",y1:"24",x2:"10",y2:"28",gradientUnits:"userSpaceOnUse",children:[l.jsx("stop",{stopColor:"#FF9F7A"}),l.jsx("stop",{offset:"1",stopColor:"#FFD666"})]}),l.jsxs("radialGradient",{id:"logo-spark",cx:"0.3",cy:"0.3",r:"0.7",children:[l.jsx("stop",{stopColor:"#FFFFFF"}),l.jsx("stop",{offset:"0.5",stopColor:"#44E1C5"}),l.jsx("stop",{offset:"1",stopColor:"#9F8CFF"})]})]})]}),Ve=({children:e,size:t=16,className:n="",...r})=>l.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,"aria-hidden":"true",...r,children:e}),Gv=e=>l.jsxs(Ve,{...e,children:[l.jsx("path",{d:"M3 10l9-7 9 7"}),l.jsx("path",{d:"M5 10v10h14V10"}),l.jsx("path",{d:"M9 20v-6h6v6"})]}),kc=e=>l.jsxs(Ve,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5",fill:"currentColor",stroke:"none"}),l.jsx("path",{d:"M21 15l-5-5L5 21"})]}),Fn=e=>l.jsxs(Ve,{...e,children:[l.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"}),l.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7",strokeWidth:"3"})]}),Hs=e=>l.jsxs(Ve,{...e,children:[l.jsx("path",{d:"M14 3H4a2 2 0 00-2 2v10l6 6h10a2 2 0 002-2V9l-6-6z"}),l.jsx("path",{d:"M14 3v6h6"}),l.jsx("path",{d:"M7 7h5"}),l.jsx("path",{d:"M7 11h7"})]}),Cc=e=>l.jsx(Ve,{...e,children:l.jsx("path",{d:"M17 3a2.828 2.828 0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),xm=e=>l.jsx(Ve,{...e,children:l.jsx("polygon",{points:"5 3 19 12 5 21 5 3",fill:"currentColor",stroke:"none"})}),rd=e=>l.jsxs(Ve,{...e,children:[l.jsx("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"}),l.jsx("polyline",{points:"16 17 21 12 16 7"}),l.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),bc=e=>l.jsxs(Ve,{...e,children:[l.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),l.jsx("line",{x1:"9",y1:"9",x2:"9",y2:"15"}),l.jsx("line",{x1:"15",y1:"9",x2:"15",y2:"15"}),l.jsx("circle",{cx:"9",cy:"12",r:"1.5",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"10",r:"1.5",fill:"currentColor",stroke:"none"})]}),Kv=e=>l.jsxs(Ve,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("circle",{cx:"12",cy:"12",r:"4"}),l.jsx("line",{x1:"3",y1:"9",x2:"6",y2:"9"})]}),sd=e=>l.jsxs(Ve,{...e,children:[l.jsx("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"}),l.jsx("path",{d:"M2 10h20"})]}),ld=e=>l.jsx(Ve,{...e,children:l.jsx("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"})}),od=e=>l.jsxs(Ve,{...e,children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),id=e=>l.jsxs(Ve,{...e,children:[l.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"}),l.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),ad=e=>l.jsx(Ve,{...e,children:l.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),cd=e=>l.jsxs(Ve,{...e,children:[l.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),l.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}),ha=e=>l.jsxs(Ve,{...e,children:[l.jsx("polyline",{points:"23 4 23 10 17 10"}),l.jsx("path",{d:"M20.49 15a9 9 0 11-2.12-9.36L23 10"})]}),Qv=e=>l.jsx(Ve,{...e,children:l.jsx("polyline",{points:"15 18 9 12 15 6"})}),Ec=e=>l.jsx(Ve,{...e,children:l.jsx("polyline",{points:"9 18 15 12 9 6"})}),ga=e=>l.jsxs(Ve,{...e,children:[l.jsx("circle",{cx:"9",cy:"6",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"6",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"9",cy:"12",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"12",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"9",cy:"18",r:"1",fill:"currentColor",stroke:"none"}),l.jsx("circle",{cx:"15",cy:"18",r:"1",fill:"currentColor",stroke:"none"})]}),ya=e=>l.jsxs(Ve,{...e,children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Yv=e=>l.jsxs(Ve,{...e,children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",strokeDasharray:"4 2"}),l.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]}),qv=e=>l.jsxs(Ve,{...e,children:[l.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),l.jsx("polyline",{points:"5 12 12 5 19 12"})]}),ud=[{to:"/studio",label:"Studio",Icon:Gv,end:!0},{to:"/controls",label:"Controls",Icon:bc}],Xv=[{to:"/gallery",label:"Gallery",Icon:kc},{to:"/tags",label:"Tag Library",Icon:Fn},{to:"/aliases",label:"Aliases",Icon:Hs}],es=({isActive:e})=>["slim-nav-link btn-touch",e?"is-active":null].filter(Boolean).join(" ");function Jv({isMobileAlignedNav:e=!1}){const[t,n]=u.useState(!1),{pathname:r}=Lt(),s=am(),{logout:o,user:i}=Lo(),[a,c]=u.useState(!1),d=Nc("(min-width: 768px)"),g=()=>n(S=>!S),m=()=>n(!1),h=r==="/login",v=d&&!e,w=!h&&v,N=v,j=!d||e;u.useEffect(()=>{const S=R=>{var O;const P=!!((O=R==null?void 0:R.detail)!=null&&O.active);c(P)};return window.addEventListener("cozygen:render-state",S),()=>window.removeEventListener("cozygen:render-state",S)},[]);const p=async()=>{if(a)return;if(r==="/controls"){try{window.dispatchEvent(new Event("cozygen:request-render"))}catch{}return}if(!ym()){alert("No previous render found yet. Render once from Studio first.");return}c(!0);const R=await gm();c(!1),R!=null&&R.success||alert((R==null?void 0:R.error)||"Failed to render.")},f=()=>{try{o()}catch{}window.location.hash="#/login"},y=[...ud,...Xv];return l.jsxs("header",{className:"top-bar",children:[l.jsx("div",{className:"top-bar-shell",children:l.jsxs("div",{className:"brand-row",children:[l.jsxs(om,{to:"/studio",className:"brand-mark",onClick:m,children:[l.jsx(vm,{size:28,className:"brand-logo"}),l.jsx("span",{className:"brand-text",children:"CozyGen"})]}),v?l.jsx("nav",{className:"desktop-nav","aria-label":"Main navigation",children:y.map(S=>l.jsx(ur,{to:S.to,end:S.end,className:es,children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[l.jsx(S.Icon,{size:16}),l.jsx("span",{children:S.label}),S.to==="/gallery"&&s?l.jsx("span",{className:"badge-dot","aria-hidden":"true"}):null]})},S.to))}):null,l.jsx("div",{className:"flex-1"}),w?l.jsxs("button",{type:"button",className:`desktop-render-btn ${a?"is-busy":""}`,onClick:p,title:a?"Rendering":"Render","aria-busy":a,"aria-disabled":a,disabled:a,children:[l.jsx("span",{className:"render-icon",children:a?l.jsx("span",{className:"render-spinner","aria-hidden":"true"}):l.jsx(xm,{size:16})}),l.jsx("span",{className:"render-label",children:a?"Rendering":"Render"})]}):null,N?l.jsxs("button",{type:"button",className:"desktop-logout-btn",onClick:f,title:"Sign out",children:[l.jsx("span",{className:"logout-icon",children:l.jsx(rd,{size:16})}),l.jsx("span",{className:"logout-label",children:"Logout"}),i?l.jsxs("span",{className:"logout-user",children:["@",i]}):null]}):null,j?l.jsx("button",{type:"button",className:`mobile-menu-toggle btn-touch ${t?"is-active":""}`,onClick:g,"aria-expanded":t,"aria-controls":"cozygen-mobile-nav","aria-label":t?"Close menu":"Open menu",children:l.jsx("span",{className:"mobile-menu-icon",children:l.jsx("span",{})})}):null]})}),j?l.jsxs("div",{id:"cozygen-mobile-nav",className:`mobile-nav-drawer ${t?"is-open":""}`,role:"menu",children:[l.jsx("div",{className:"mobile-nav-section",children:ud.map(S=>l.jsx(ur,{to:S.to,end:S.end,className:es,onClick:m,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(S.Icon,{size:16}),l.jsx("span",{children:S.label})]})},S.to))}),l.jsxs("div",{className:"mobile-nav-section secondary",children:[l.jsx(ur,{to:"/gallery",className:es,onClick:m,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(kc,{size:16}),l.jsx("span",{children:"Gallery"}),s?l.jsx("span",{className:"badge-dot","aria-hidden":"true"}):null]})}),l.jsx(ur,{to:"/tags",className:es,onClick:m,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Fn,{size:16}),l.jsx("span",{children:"Tag Library"})]})}),l.jsx(ur,{to:"/aliases",className:es,onClick:m,role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Hs,{size:16}),l.jsx("span",{children:"Aliases"})]})}),l.jsx("button",{type:"button",className:"slim-nav-link btn-touch text-left",onClick:()=>{m(),f()},role:"menuitem",children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(rd,{size:16}),l.jsx("span",{children:"Logout"}),i?l.jsxs("span",{className:"text-[rgba(159,178,215,0.75)] text-xs",children:["@",i]}):null]})})]})]}):null]})}const dd=[{to:"/controls",label:"Controls",Icon:bc},{to:"/compose",label:"Compose",Icon:Cc},{to:"/gallery",label:"Gallery",Icon:kc}],Zv=[{to:"/aliases",label:"Aliases",Icon:Hs},{to:"/tags",label:"Tags",Icon:Fn}],ex=({isActive:e})=>["bottom-nav-link",e?"is-active":""].filter(Boolean).join(" ");function tx(){const e=Lt(),t=tn(),n=am(),[r,s]=Pt.useState(!1),[o,i]=Pt.useState(!1),[a,c]=Pt.useState(!1),[d,g]=Pt.useState({}),m=Nc("(min-width: 768px)"),h=Pt.useRef(null),v=Pt.useRef(null),w=e.pathname==="/controls",N=async()=>{if(!(typeof window>"u"))if(s(!0),setTimeout(()=>s(!1),400),w)try{window.dispatchEvent(new CustomEvent("cozygen:request-render"))}catch{}else{if(!ym())return;const p=await gm();p.success||console.warn("Requeue failed:",p.error)}};Pt.useEffect(()=>{const p=f=>{var S;const y=!!((S=f==null?void 0:f.detail)!=null&&S.active);i(y),y&&(s(!0),setTimeout(()=>s(!1),400))};return window.addEventListener("cozygen:render-state",p),()=>window.removeEventListener("cozygen:render-state",p)},[]),Pt.useEffect(()=>{if(!a||m)return;const p=f=>{h.current&&h.current.contains(f.target)||v.current&&v.current.contains(f.target)||c(!1)};return window.addEventListener("pointerdown",p),()=>window.removeEventListener("pointerdown",p)},[a,m]),Pt.useEffect(()=>{if(!a||m||!v.current)return;const p=v.current.getBoundingClientRect(),f=p.left+p.width/2,y=window.innerHeight-p.top+8;g({left:`${Math.min(window.innerWidth-80,Math.max(40,f))}px`,bottom:`${y}px`,top:"auto"})},[a,m]),Pt.useEffect(()=>{m&&c(!1)},[m]);const j=m?[...dd,...Zv]:dd;return l.jsxs(l.Fragment,{children:[l.jsxs("nav",{className:"bottom-nav","aria-label":"Bottom navigation",children:[j.map(p=>l.jsxs(ur,{to:p.to,end:p.end,className:ex,children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(p.Icon,{size:20})}),l.jsxs("span",{className:"bottom-nav-label",children:[p.label,p.to==="/gallery"&&n?l.jsx("span",{className:"badge-dot pulse","aria-hidden":"true"}):null]})]},p.to)),m?null:l.jsxs("button",{ref:v,type:"button",className:"bottom-nav-link",onClick:()=>c(p=>!p),"aria-expanded":a,"aria-label":"Open library",children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(Fn,{size:20})}),l.jsx("span",{className:"bottom-nav-label",children:"Library"})]},"library"),l.jsxs("button",{type:"button",className:`bottom-nav-link is-action ${r?"is-flash":""} ${o?"is-rendering":""}`,onClick:N,"aria-label":"Render",children:[l.jsx("span",{className:"bottom-nav-icon","aria-hidden":"true",children:l.jsx(xm,{size:20})}),l.jsx("span",{className:"bottom-nav-label",children:"Render"})]},"render")]}),m?null:l.jsxs("div",{ref:h,className:`library-popover ${a?"is-open":""}`,style:d,children:[l.jsxs("button",{type:"button",className:"library-popover-btn",onClick:()=>{c(!1),t("/aliases")},children:[l.jsx(Hs,{size:18}),l.jsx("span",{children:"Aliases"})]}),l.jsxs("button",{type:"button",className:"library-popover-btn",onClick:()=>{c(!1),t("/tags")},children:[l.jsx(Fn,{size:18}),l.jsx("span",{children:"Tags"})]})]})]})}function nx(e,t){if(!t||t<=0)return null;const n=Number(e)||0,r=Number(t)||0,s=Math.round(n/r*100);return Number.isFinite(s)?Math.max(0,Math.min(100,s)):null}function rx({busy:e=!1,progressValue:t=0,progressMax:n=0,statusText:r="Idle",statusPhase:s="idle",primaryLabel:o="Render",onPrimary:i,primaryDisabled:a=!1,onLogs:c,logsLabel:d="Logs"}){const g=nx(t,n),m=s==="queued"?"rgba(255, 143, 112, 0.95)":s==="running"?"rgba(68, 225, 197, 0.95)":s==="finished"?"rgba(92, 255, 154, 0.95)":s==="error"?"rgba(255, 143, 112, 0.95)":"rgba(159, 178, 215, 0.55)",v={idle:"Idle",queued:"Queued",running:"Running",finished:"Finished",error:"Error"}[s]||"Status",w=e||a;return l.jsxs("div",{className:"dock-bar-inner",children:[l.jsx("button",{type:"button",onClick:i,disabled:w,className:"dock-primary-btn",children:e?"Rendering":o}),l.jsxs("div",{className:"dock-status-row",children:[l.jsxs("span",{className:"dock-status-left",children:[l.jsx("span",{className:"dock-status-dot",style:{background:m}}),l.jsx("span",{className:"dock-status-label",children:v})]}),l.jsxs("span",{className:"dock-status-right",children:[g!=null&&e?l.jsxs("span",{className:"dock-progress",children:[l.jsx("span",{className:"dock-progress-bar","aria-hidden":"true",children:l.jsx("span",{className:"dock-progress-fill",style:{width:`${g}%`}})}),l.jsxs("span",{children:[g,"%"]})]}):null,l.jsx("span",{className:"dock-status-text",children:r||(e?"Working":"Idle")}),c?l.jsx("button",{type:"button",className:"dock-logs-btn",onClick:c,children:d}):null]})]})]})}const wm="jpg,jpeg,png,webp,gif,bmp,tif,tiff",Lc=(e="")=>/\.(png|jpe?g|gif|webp|bmp|tif?f)$/i.test(e),jm=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e);async function ci({subfolder:e="",page:t=1,perPage:n=50,exts:r=wm}={}){const s=new URLSearchParams({subfolder:e,page:String(t),per_page:String(n),exts:r}),o=await fetch(`/cozygen/input?${s.toString()}`);if(!o.ok)throw new Error(`Input list failed: ${o.status}`);return o.json()}const ro=e=>`/cozygen/input/file?path=${encodeURIComponent(e)}`,va="output::",Po=(e="")=>e.replace(/\\/g,"/").replace(/^\/+/,"").replace(/\/+$/,""),Sm=(e="")=>{const t=e.replace(/\\/g,"/").split("/").filter(Boolean);return t[t.length-1]||""},sx=({subfolder:e="",filename:t=""}={})=>{const n=Sm(t);if(!n)return"";const r=Po(e);return`${va}${r}::${n}`},xa=(e="")=>{if(typeof e!="string"||!e.startsWith(va))return null;const t=e.slice(va.length);if(!t)return null;const n=t.lastIndexOf("::"),r=n===-1?t:t.slice(n+2);return r?{subfolder:n===-1?"":t.slice(0,n),filename:r}:null},so=({filename:e="",subfolder:t="",type:n="output"}={})=>{const r=Sm(e);return r?`/view?${new URLSearchParams({filename:r,subfolder:Po(t),type:n||"output"}).toString()}`:""},wa=(e="")=>e.split("/").slice(0,-1).join("/"),lx=e=>{if(typeof e!="string"||!e)return e!=null&&e.path?wa(e.path):"";const t=xa(e);return t?Po(t.subfolder):wa(e)},fd=(e=[])=>e.map(t=>{const n=t.rel_path||t.name||"",r=t.name||n||"Untitled",s=!!t.is_dir,o=s?"":ro(n);return{...t,name:r,rel_path:n,is_dir:s,is_image:!s&&Lc(r),is_video:!s&&jm(r),source:"input",preview_url:o}}),ox=(e=[])=>e.map(t=>{const n=t.filename||"",r=t.subfolder||"",s=t.type==="directory",o=s?r||n:[r,n].filter(Boolean).join("/"),i=n||r||o||"Untitled",a=s?"":so({filename:n,subfolder:r,type:t.type});return{...t,name:i,rel_path:o,is_dir:s,is_image:!s&&Lc(n),is_video:!s&&jm(n),source:"output",preview_url:a}}),Gn={get(e,t){try{return(typeof window<"u"?JSON.parse(localStorage.getItem(e)):null)??t}catch{return t}},set(e,t){try{typeof window<"u"&&localStorage.setItem(e,JSON.stringify(t))}catch{}}};function ix({input:e,value:t,onFormChange:n}){var H;const r=((H=e==null?void 0:e.inputs)==null?void 0:H.param_name)||"Image Input",s=(e==null?void 0:e.class_type)||"CozyGenImageInput",o=`cg_last_input_cwd::${r}`,i=`cg_last_picker_source::${r}`,[a,c]=u.useState(""),[d,g]=u.useState(!1),[m,h]=u.useState(!1),[v,w]=u.useState(Gn.get(o,"")),[N,j]=u.useState(1),[p,f]=u.useState(50),[y,S]=u.useState([]),[R,P]=u.useState(1),[O,_]=u.useState(!1),[V,A]=u.useState(""),[W,ue]=u.useState([]),[se,pe]=u.useState(!0),[q,le]=u.useState(()=>Gn.get(i,"inputs")==="outputs"?"outputs":"inputs"),ae=q,k=u.useCallback(D=>{const U=D==="outputs"?"outputs":"inputs";le(U),Gn.set(i,U),w(""),j(1)},[]),I=u.useMemo(()=>{if(a)try{const D=new URL(a,window.location.origin);return(D.searchParams.get("path")||D.searchParams.get("filename")||D.pathname.split("/").pop()||"").split("/").pop()||"No file selected."}catch{}if(!t)return"No file selected.";if(typeof t=="string"){const D=xa(t);return D!=null&&D.filename?D.filename.split("/").pop():t.split("/").pop()}return t!=null&&t.path?t.path.split("/").pop():"No file selected."},[a,t]);u.useEffect(()=>{if(typeof t=="string"&&t){const D=xa(t);D!=null&&D.filename?c(so({filename:D.filename,subfolder:D.subfolder,type:"output"})):c(ro(t)),g(!1)}else t!=null&&t.url?(c(t.url),g(!1)):(c(""),g(!1))},[t]);const E=u.useCallback(async D=>{const U=await zv(D),te=`/view?filename=${U.filename}&type=input`;c(te),g(!1),Gn.set(o,""),s==="CozyGenImageInput"?n(r,U.filename):n(r,{source:"Upload",path:U.filename,url:te})},[s,n,r]),L=u.useCallback(()=>{c(""),g(!1),s==="CozyGenImageInput"?n(r,""):n(r,{source:"Upload",path:"",url:""})},[s,n,r]),M=u.useCallback(()=>{const U=lx(t)||Gn.get(o,"");w(U),j(1),h(!0)},[t]),z=u.useCallback(()=>{h(!1)},[]);u.useEffect(()=>{if(m){if(ae!=="inputs"){ue([]);return}(async()=>{try{const D=await ci({subfolder:"",page:1,perPage:0,exts:""});ue((D.items||[]).filter(U=>U.is_dir))}catch{}})()}},[m,ae]),u.useEffect(()=>{if(!m)return;let D=!1;async function U(){_(!0);try{if(ae==="outputs"){const te=await dm(v,N,p);if(D)return;const J=ox(te&&te.items||[]);D||(S(J),P(te&&te.total_pages||1))}else{const J=await ci({subfolder:v,page:N,perPage:p,exts:se?wm:""}),X=(J.items||[]).some(de=>!de.is_dir);if(se&&!X){const de=await ci({subfolder:v,page:N,perPage:p,exts:""});D||(S(fd(de.items||[])),P(de.total_pages||1),pe(!1));return}D||(S(fd(J.items||[])),P(J.total_pages||1))}}catch(te){console.error(ae==="outputs"?"Failed to load output directory":"Failed to load input directory",te),D||(S([]),P(1))}finally{D||_(!1)}}return U(),()=>{D=!0}},[m,v,N,p,se,ae]);const $=u.useMemo(()=>{const D=V.trim().toLowerCase();let U=y;return se&&(U=U.filter(te=>{if(te.is_dir)return!0;const J=te.name||te.filename||te.rel_path||"";return Lc(String(J))})),D?U.filter(te=>(te.name||te.filename||te.rel_path||"").toLowerCase().includes(D)):U},[y,V,se]),Z=u.useCallback(D=>{if(!D)return;const U=typeof D=="object"?D:null;if(((U==null?void 0:U.source)||"inputs")==="output"){const de=sx({subfolder:(U==null?void 0:U.subfolder)||"",filename:(U==null?void 0:U.filename)||(U==null?void 0:U.name)||""});if(!de)return;const Le=(U==null?void 0:U.preview_url)||so({filename:U==null?void 0:U.filename,subfolder:U==null?void 0:U.subfolder,type:U==null?void 0:U.type});c(Le),g(!1),Gn.set(o,Po((U==null?void 0:U.subfolder)||"")),s==="CozyGenImageInput"?n(r,de):n(r,{source:"OutputGallery",path:de,url:Le}),h(!1);return}const J=typeof D=="string"?D:(U==null?void 0:U.rel_path)||(U==null?void 0:U.path)||"";if(!J)return;const X=(U==null?void 0:U.preview_url)||ro(J);c(X),g(!1),Gn.set(o,wa(J)),s==="CozyGenImageInput"?n(r,J):n(r,{source:"Server",path:J,url:X}),h(!1)},[s,n,r]);return{param:r,previewUrl:a,imgReady:d,setImgReady:g,displayName:I,serverOpen:m,openServer:M,closeServer:z,cwd:v,setCwd:w,page:N,setPage:j,perPage:p,setPerPage:f,totalPages:R,loading:O,search:V,setSearch:A,topDirs:W,imagesOnly:se,setImagesOnly:pe,shownEntries:$,pickerSource:ae,setPickerSource:k,handleUpload:E,clearImage:L,selectServer:Z}}function kt({open:e,onClose:t,title:n,children:r,footer:s,variant:o="sheet",className:i="",contentClassName:a="",shouldCloseOnOverlayClick:c=!0,shouldCloseOnEsc:d=!0}){const g=u.useRef(!1),m=u.useMemo(()=>["bottom-sheet-content",o==="fullscreen"?"is-fullscreen":"is-sheet",a].filter(Boolean).join(" "),[a,o]),h=u.useMemo(()=>["bottom-sheet-overlay",i].filter(Boolean).join(" "),[i]);return u.useEffect(()=>{if(!e||!d)return;const v=w=>{w.key==="Escape"&&(t==null||t())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[e,t,d]),!e||typeof document>"u"?null:vc.createPortal(l.jsx("div",{className:h,role:"presentation",onPointerDown:v=>{g.current=v.target===v.currentTarget},onClick:v=>{c&&g.current&&v.target===v.currentTarget&&(t==null||t())},children:l.jsx("div",{className:m,role:"dialog","aria-modal":"true","aria-label":n||"Sheet",onClick:v=>v.stopPropagation(),children:l.jsxs("div",{className:"bottom-sheet-panel",children:[l.jsxs("header",{className:"bottom-sheet-head",children:[l.jsx("div",{className:"bottom-sheet-title",children:n||""}),l.jsx("button",{type:"button",className:"bottom-sheet-close",onClick:t,"aria-label":"Close",children:""})]}),l.jsx("div",{className:"bottom-sheet-body",children:r}),s?l.jsx("footer",{className:"bottom-sheet-foot",children:s}):null]})})}),document.body)}function ax({items:e=[],value:t,onChange:n,ariaLabel:r,role:s="tablist",className:o="",tabClassName:i="",size:a="md",layout:c="equal",wrap:d=!1}){const g=["segmented-tabs",a==="sm"?"is-compact":"",c==="auto"?"is-auto":"",c==="icon"?"is-icon":"",d?"is-wrap":"",o].filter(Boolean).join(" "),m=s==="tablist"?"tab":"button";return l.jsx("div",{className:g,role:s,"aria-label":r,children:e.map(h=>{const v=h.key===t,w=h.label?String(h.label):"";return l.jsxs("button",{type:"button",role:m,"aria-selected":s==="tablist"?v:void 0,"aria-pressed":s!=="tablist"?v:void 0,className:["segmented-tab",v?"is-active":"",h.icon&&!w?"is-icon":"",h.className||"",i].filter(Boolean).join(" "),onClick:()=>{h.disabled||n==null||n(h.key)},disabled:h.disabled,title:h.title||w||h.ariaLabel,"aria-label":h.ariaLabel,children:[h.icon?l.jsx("span",{className:"segmented-tab-icon",children:h.icon}):null,w?l.jsx("span",{className:"segmented-tab-label",children:w}):null,h.badge?l.jsx("span",{className:"segmented-tab-badge",children:h.badge}):null]},h.key)})})}const Rr=u.memo(ax);function cx({open:e,cwd:t,setCwd:n,page:r,setPage:s,perPage:o,setPerPage:i,totalPages:a,topDirs:c,loading:d,imagesOnly:g,setImagesOnly:m,search:h,setSearch:v,shownEntries:w,onSelect:N,onClose:j,pickerSource:p,setPickerSource:f}){if(!e)return null;const y=p||"inputs",S=typeof f=="function",R=()=>{n(""),s(1)},P=W=>{S&&W!==y&&(f(W),n(""),s(1))},O=t.split("/").filter(Boolean),_=y==="outputs"?"Choose output":"Choose input",V=[{key:"",label:"Root"},...c.map(W=>({key:W.rel_path,label:W.name}))],A=W=>{n(W),s(1)};return l.jsx(kt,{open:e,onClose:j,title:_,variant:"fullscreen",footer:l.jsxs("div",{className:"flex items-center gap-2 w-full",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",disabled:r<=1||d,onClick:()=>s(W=>Math.max(1,W-1)),children:"Prev"}),l.jsxs("div",{className:"text-xs text-center text-[rgba(159,178,215,0.75)] min-w-[92px]",children:[r," / ",a]}),l.jsx("button",{type:"button",className:"ui-button is-muted w-full",disabled:r>=a||d,onClick:()=>s(W=>W<a?W+1:W),children:"Next"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Location"}),l.jsxs("div",{className:"imagepicker-breadcrumb",children:[l.jsx("button",{type:"button",className:"imagepicker-crumb",onClick:R,children:"Root"}),O.map((W,ue)=>{const se=O.slice(0,ue+1).join("/");return l.jsx("button",{type:"button",className:"imagepicker-crumb",onClick:()=>{n(se),s(1)},children:W},se)})]})]}),S?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Source"}),l.jsx(Rr,{ariaLabel:"Source",value:y,onChange:P,size:"sm",items:[{key:"inputs",label:"Inputs"},{key:"outputs",label:"Outputs"}]})]}):null,l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Filters"}),l.jsxs("div",{className:"composer-filters",children:[l.jsxs("label",{className:"inline-flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:g,onChange:W=>{m(W.target.checked),s(1)}}),l.jsx("span",{className:"text-sm text-[rgba(159,178,215,0.85)]",children:"Images only"})]}),l.jsx("input",{type:"search",value:h,onChange:W=>v(W.target.value),placeholder:"Search files",className:"sheet-input ui-control ui-input"}),l.jsxs("select",{className:"sheet-select ui-control ui-select",value:o,onChange:W=>{const ue=parseInt(W.target.value,10)||50;i(ue),s(1)},"aria-label":"Items per page",children:[l.jsx("option",{value:25,children:"25"}),l.jsx("option",{value:50,children:"50"}),l.jsx("option",{value:100,children:"100"})]})]})]}),c.length>0?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Quick folders"}),l.jsx(Rr,{ariaLabel:"Quick folders",value:t,onChange:A,size:"sm",layout:"auto",wrap:!0,className:"imagepicker-chips",items:V})]}):null,l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Results"}),d?l.jsxs("div",{className:"sheet-hint",children:["Scanning ",y==="outputs"?"output":"input"," folders"]}):w.length===0?l.jsx("div",{className:"sheet-hint",children:"Nothing here yet. Try a different folder or turn off Images only."}):null,l.jsx("div",{className:"imagepicker-grid",children:!d&&w.map(W=>{const ue=`${W.source||"input"}::${W.rel_path||W.name}`,se=W.is_dir?"":W.preview_url||(W.source==="output"?so({filename:W.filename,subfolder:W.subfolder,type:W.type}):ro(W.rel_path||""));return l.jsx("button",{type:"button",className:`imagepicker-item ${W.is_dir?"is-dir":""}`,onClick:()=>{W.is_dir?(n(W.rel_path||""),s(1)):N(W)},children:W.is_dir?l.jsxs("div",{className:"imagepicker-dir-row",children:[l.jsx("div",{className:"imagepicker-dir-dot","aria-hidden":"true"}),l.jsx("div",{className:"imagepicker-name",children:W.name})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"imagepicker-thumb",children:se?l.jsx("img",{className:"imagepicker-img",alt:W.name,src:se}):l.jsx("div",{className:"imagepicker-img is-placeholder"})}),l.jsx("div",{className:"imagepicker-name",children:W.name})]})},ue)})})]})]})})}function ux({open:e,onClose:t,title:n,url:r,kind:s="image"}){return r?l.jsx(kt,{open:e,onClose:t,title:n||"Preview",variant:"fullscreen",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("a",{href:r,target:"_blank",rel:"noreferrer",className:"ui-button is-muted w-full text-center",children:"Open"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Close"})]}),children:l.jsx("div",{className:"url-viewer-stage",children:s==="video"?l.jsx("video",{src:r,controls:!0,className:"url-viewer-media",autoPlay:!0}):l.jsx("img",{src:r,alt:n||"Preview",className:"url-viewer-media"})})}):null}function dx({input:e,value:t,onFormChange:n}){const{previewUrl:r,imgReady:s,setImgReady:o,displayName:i,serverOpen:a,openServer:c,closeServer:d,cwd:g,setCwd:m,page:h,setPage:v,perPage:w,setPerPage:N,totalPages:j,topDirs:p,loading:f,search:y,setSearch:S,imagesOnly:R,setImagesOnly:P,shownEntries:O,pickerSource:_,setPickerSource:V,handleUpload:A,clearImage:W,selectServer:ue}=ix({input:e,value:t,onFormChange:n}),se=u.useRef(null),pe=u.useRef(null),[q,le]=u.useState(0),[ae,k]=u.useState(!1);u.useEffect(()=>{const L=pe.current;if(!L)return;const M=$=>{$.preventDefault(),$.stopPropagation()},z=async $=>{var H,D;M($);const Z=(D=(H=$.dataTransfer)==null?void 0:H.files)==null?void 0:D[0];Z&&(await A(Z),se.current&&(se.current.value=""),le(U=>U+1))};return["dragenter","dragover","dragleave","drop"].forEach($=>L.addEventListener($,$==="drop"?z:M)),()=>{["dragenter","dragover","dragleave","drop"].forEach($=>L.removeEventListener($,$==="drop"?z:M))}},[A]);const I=async L=>{var z;const M=(z=L.target.files)==null?void 0:z[0];M&&(await A(M),se.current&&(se.current.value=""),le($=>$+1))},E=()=>{se.current&&se.current.click()};return l.jsxs("div",{className:"asset-card",children:[l.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[l.jsx("h3",{className:"text-sm font-semibold text-[#F8F4FF] truncate",children:i}),l.jsx("span",{className:"text-[11px] text-[#C3C7FFB3] truncate",children:"Image"})]}),l.jsx("div",{ref:pe,className:"mb-3 rounded-xl border border-dashed border-[rgba(255,255,255,0.14)] bg-[rgba(255,255,255,0.02)] flex items-center justify-center min-h-[140px] sm:min-h-[180px] overflow-hidden",children:r?l.jsx("button",{type:"button",className:"asset-preview-btn",onClick:()=>k(!0),"aria-label":`Preview ${i}`,title:"Open preview",children:l.jsx("img",{src:r,alt:i,className:`max-h-64 max-w-full object-contain transition-opacity ${s?"opacity-100":"opacity-0"}`,onLoad:()=>o(!0)})}):l.jsx("div",{className:"text-[11px] text-[#9DA3FFCC] text-center px-6",children:"Drop an image here, upload from your device, or choose one from your server."})}),l.jsx("input",{ref:se,type:"file",accept:"image/*",className:"hidden",onChange:I},q),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:"ui-button is-primary is-compact",onClick:c,children:"Choose"}),l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:E,children:"Upload"}),l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:W,children:"Clear"})]}),l.jsx(cx,{open:a,cwd:g,setCwd:m,page:h,setPage:v,perPage:w,setPerPage:N,totalPages:j,topDirs:p,loading:f,imagesOnly:R,setImagesOnly:P,search:y,setSearch:S,shownEntries:O,pickerSource:_,setPickerSource:V,onSelect:ue,onClose:d}),l.jsx(ux,{open:ae,onClose:()=>k(!1),title:i||"Preview",url:r,kind:"image"})]})}function fx({open:e,onClose:t,title:n,description:r,render:s,index:o=0,total:i=0,children:a}){const[c,d]=u.useState("idle");if(u.useEffect(()=>{if(c==="queued"){const m=setTimeout(()=>d("idle"),1600);return()=>clearTimeout(m)}},[c]),!e)return null;const g=typeof s=="function"?s():a;return l.jsxs("div",{className:"spotlight-overlay",role:"dialog","aria-modal":"true",children:[l.jsx("div",{className:"spotlight-backdrop",onClick:t}),l.jsxs("div",{className:"spotlight-sheet",children:[l.jsxs("div",{className:"spotlight-header",children:[l.jsxs("div",{className:"spotlight-meta",children:[l.jsx("div",{className:"spotlight-kicker",children:"Focused control"}),l.jsx("div",{className:"spotlight-title",children:n||"Control"}),r?l.jsx("div",{className:"spotlight-hint",children:r}):null]}),l.jsx("button",{type:"button",className:"spotlight-close",onClick:t,"aria-label":"Close",children:""})]}),l.jsx("div",{className:"spotlight-body",children:g}),l.jsx("div",{className:"spotlight-footer",children:l.jsx("div",{className:"spotlight-footer-right",children:l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:t,"aria-label":"Close",children:"Close"})})})]})]})}function px({open:e,onClose:t,title:n,value:r,onChange:s,placeholder:o="",description:i}){const a=n||"Edit",c=u.useMemo(()=>`sheet-textarea-${Math.random().toString(36).slice(2,9)}`,[]);return l.jsxs(kt,{open:e,onClose:t,title:a,variant:"fullscreen",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Done"}),children:[i?l.jsx("div",{className:"text-[12px] text-[rgba(159,178,215,0.75)] mb-3",children:i}):null,l.jsx("textarea",{id:c,value:r??"",onChange:d=>s==null?void 0:s(d.target.value),placeholder:o,className:"sheet-textarea ui-control ui-textarea",rows:12})]})}function cn(e){const t=Number(e);return Number.isFinite(t)?t.toFixed(2).replace(/\.?0+$/u,""):"1"}function mx(e=""){const t=String(e||"");if(!t.trim())return[];const n=[];let r=0;for(;r<t.length;){for(;r<t.length&&/[\s,]/.test(t[r]);)r++;if(r>=t.length)break;let s=r,o=r,i="tag",a="";const c=t[r]==="(";if(c&&(s=r,r++),t[r]==="$"){i="alias";const d=r;for(r++;r<t.length&&t[r]!=="$"&&t[r]!==","&&t[r]!==`
`;)a+=t[r],r++;t[r]==="$"&&r++,c||(s=d)}else{i="tag";const d=r;for(;r<t.length&&!(t[r]===","||t[r]==="$"||t[r]===`
`||c&&t[r]===":"||!c&&t[r]==="(");)a+=t[r],r++;a=a.trim(),c||(s=d)}if(c&&t[r]===":"){for(r++;r<t.length&&t[r]!==")"&&t[r]!==","&&t[r]!==`
`;)r++;t[r]===")"&&r++}o=r,a&&n.push({type:i,text:a,start:s,end:o})}return n}function pd(e="",t){if(!t||typeof t.start!="number"||typeof t.end!="number")return null;const r=String(e||"").slice(t.start,t.end);if(!r.startsWith("(")||!r.includes(":"))return null;const s=r.lastIndexOf(":");if(s===-1)return null;const o=r.slice(s+1);if(!o.endsWith(")"))return null;const i=o.slice(0,-1).trim();if(!/^\d+(\.\d+)?$/u.test(i))return null;const a=Number.parseFloat(i);return Number.isFinite(a)?{weight:a,wrapperStart:t.start,wrapperEnd:t.end}:null}function md(e="",t,n){const r=String(e||"");if(!t||typeof t.start!="number"||typeof t.end!="number")return r;const s=n==null?null:Number(n),o=s===null||!Number.isFinite(s)||Math.abs(s-1)<1e-6,i=t.type==="alias"?`$${t.text}$`:t.text;if(o)return r.slice(0,t.start)+i+r.slice(t.end);const a=cn(s),c=`(${i}:${a})`;return r.slice(0,t.start)+c+r.slice(t.end)}function hd(e="",t,n,r){var h;if(n===r||n===null||r===null||!(t!=null&&t.length))return e;const s=String(e||""),o=t.map(v=>({start:v.start,end:v.end,text:s.slice(v.start,v.end)})),i=o.slice(0,-1).map((v,w)=>{const N=o[w+1];return s.slice(v.end,N.start)}),a=o.length?s.slice(0,o[0].start):"",c=o.length?s.slice(o[o.length-1].end):"",d=[...o],[g]=d.splice(n,1);d.splice(r,0,g);let m=a+(((h=d[0])==null?void 0:h.text)||"");for(let v=1;v<d.length;v++)m+=(i[v-1]??", ")+d[v].text;return m+=c,m}function hx(e="",t){const n=String(e||"");if(!t||typeof t.start!="number"||typeof t.end!="number")return n;const r=n.slice(0,t.start).replace(/[\s,]*$/,""),s=n.slice(t.end).replace(/^[\s,]*/,"");return r?`${r}, ${s}`.trim():s.trim()}function dr(e="",t){if(!t||typeof t.index!="number"||typeof t.length!="number")return null;const n=String(e||""),r=t.index,s=t.index+t.length;if(r<=0||n[r-1]!=="("||n[s]!==":")return null;let o=s+1,i="";for(;o<n.length&&n[o]!==")";)if(i+=n[o],o+=1,i.length>12)return null;if(o>=n.length||n[o]!==")")return null;const a=i.trim();if(!/^\d+(\.\d+)?$/u.test(a))return null;const c=Number.parseFloat(a);return Number.isFinite(c)?{weight:c,wrapperStart:r-1,wrapperEnd:o+1}:null}function ml(e="",t,n){const r=String(e||"");if(!t||typeof t.index!="number"||typeof t.length!="number")return r;const s=t.index,o=t.index+t.length,i=dr(r,t),a=n==null?null:Number(n),c=a===null||!Number.isFinite(a)||Math.abs(a-1)<1e-6;if(i){if(c)return r.slice(0,i.wrapperStart)+r.slice(s,o)+r.slice(i.wrapperEnd);const g=cn(a);return r.slice(0,o+1)+g+r.slice(i.wrapperEnd-1)}if(c)return r;const d=cn(a);return r.slice(0,s)+"("+r.slice(s,o)+":"+d+")"+r.slice(o)}function hl(e,t,n){const r=Number(e);return Number.isFinite(r)?Math.max(t,Math.min(n,r)):t}function ja({open:e,onClose:t,title:n="Alias strength",tokenLabel:r="",weight:s=1,onApply:o,onRemoveWeight:i,onDeleteToken:a}){const c=u.useMemo(()=>hl(s||1,.2,2),[s]),[d,g]=u.useState(c);u.useEffect(()=>{e&&g(c)},[e,c]);const m=cn(d);return l.jsx(kt,{open:e,onClose:t,title:n,footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:t,children:"Cancel"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>{o==null||o(d),t==null||t()},children:"Done"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Alias"}),l.jsx("div",{className:"sheet-hint",children:r||""})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Strength"}),l.jsxs("div",{className:"flex items-center justify-between gap-3",children:[l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>g(h=>hl(h-.05,.2,2)),children:""}),l.jsxs("div",{className:"text-sm text-[rgba(237,242,255,0.92)] tabular-nums",children:[m,""]}),l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>g(h=>hl(h+.05,.2,2)),children:"+"})]}),l.jsx("input",{type:"range",min:.2,max:2,step:.05,value:d,onChange:h=>g(hl(h.target.value,.2,2)),className:"w-full","aria-label":"Alias strength"}),l.jsx("div",{className:"sheet-hint",children:"1.0 is normal. Increase to emphasize or reduce to soften."})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Actions"}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>g(1),children:"Reset to 1.0"}),l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>{i==null||i(),t==null||t()},children:"Remove strength"}),l.jsx("button",{type:"button",className:"ui-button is-danger is-compact",onClick:()=>{a==null||a(),t==null||t()},children:"Remove alias"})]})]})]})})}function Yn(e){const t=String(e||"").trim();if(!t)return"";const n=t.toLowerCase(),r={scifi:"Sci-Fi",sci:"Sci",ui:"UI",vfx:"VFX",hdr:"HDR",dof:"DoF",bokeh:"Bokeh",vhs:"VHS",jpeg:"JPEG",jpg:"JPG",png:"PNG",gif:"GIF",webp:"WebP",api:"API",nsfw:"NSFW",sfw:"SFW",sfx:"SFX",fx:"FX",lora:"LoRA",loras:"LoRAs",ip:"IP",egirl:"E-girl",i2v:"I2V",t2i:"T2I",img2img:"Img2Img",txt2img:"Txt2Img",tts:"TTS",asmr:"ASMR",ai:"AI",highleg:"High-Leg","one-piece":"One-Piece","three-quarter":"Three-Quarter"};return r[n]?r[n]:/^\d+$/.test(n)?n:n==="3d"?"3D":n==="2d"?"2D":n.length===1?n.toUpperCase():n.charAt(0).toUpperCase()+n.slice(1)}function gx(e=""){const t=String(e||"").trim().toLowerCase();return t?t.startsWith("flirty_")?"flirty":t.startsWith("action_")||t.startsWith("dynamic_")||t.startsWith("stealth_")||t.startsWith("athletic_")||t.startsWith("running_")||t.startsWith("walking_")?"action":t.startsWith("sleepy_")||t.startsWith("relaxed_")||t.startsWith("reclining_")||t.startsWith("sitting_")||t.startsWith("kneeling_")?"rest":t.startsWith("happy_")||t.startsWith("sad_")||t.startsWith("angry_")||t.startsWith("nervous_")||t.startsWith("smug_")||t.startsWith("surprised_")||t.startsWith("scared_")||t.startsWith("tipsy_")?"emotion":t.startsWith("composed_")||t.startsWith("contemplative_")||t.startsWith("looking_")?"posed":"everyday":""}function yx(e=""){const t=String(e||"").trim().toLowerCase();if(!t)return"";const n=t.split("_")[0]||"";return n==="lingerie"?"lingerie":n==="swimwear"||n==="swim"?"swimwear":n==="costumes"||n==="tech"?"costumes":n==="uniform"?"uniform":n==="formal"?"formal":n==="alt"?"alt":n==="casual"||n==="street"||n==="lounge"||n==="sporty"||n==="dress"?"everyday":n||"everyday"}function vx(e=""){const t=String(e||"").trim().toLowerCase();if(!t)return"";const n=t.split("_")[0]||"";return["fire","candlelight","embers"].includes(n)?"fire":["moonlight"].includes(n)?"night":["neon"].includes(n)?"neon":["studio","stage","sidelighting","dim"].includes(n)?"studio":["golden","sunbeam","dappled"].includes(n)?"natural":["lens","light"].includes(n)?"effects":n||"other"}function ls(e="",t=""){const n=String(e||"").trim(),r=String(t||"").trim().toLowerCase();if(!n)return"";if(r==="outfit")return yx(n)||"everyday";if(r==="pose")return gx(n)||"everyday";if(r==="lighting")return vx(n)||"effects";const s=n.indexOf("_");return s<=0?"":n.slice(0,s).trim()}function Nm(e=""){const t=String(e||"").trim();return t?t.includes(":")?t.split(":").slice(1).join(":"):t:""}function Pl({token:e="",name:t=""}={}){const n=String(t||"").trim()||Nm(e);if(!n)return"";let s=n.replace(/_(\d+)$/u,"").split("_").filter(Boolean);if(s.length===0)return n;const o=[];for(let m=0;m<s.length;m++){const h=s[m],v=s[m+1];if(h&&v&&h.toLowerCase()==="one"&&v.toLowerCase()==="piece"){o.push("one-piece"),m+=1;continue}if(h&&v&&h.toLowerCase()==="three"&&v.toLowerCase()==="quarter"){o.push("three-quarter"),m+=1;continue}o.push(h)}if(s=o,Array.from(new Set(s.map(m=>String(m).toLowerCase()))).length===1)return Yn(s[0]);const a=s[0],c=s.slice(1),d=Yn(a),g=c.map(Yn).join(" ").trim();return g?g.toLowerCase()===d.toLowerCase()?c.length===1&&String(c[0]).toLowerCase()===String(a).toLowerCase()?d||n:s.map(Yn).join(" ").trim()||n:`${d} - ${g}`:s.map(Yn).join(" ").trim()||n}function Pc(e){if(!e)return{subcategory:"",displayName:""};const t=e.name||"",n=e.token||"",r=Nm(n)||t,s=ls(r,e.category)||"other",o=Pl({token:n,name:t})||n||t||"Alias";return{subcategory:s,displayName:o}}function ln(e=""){const t=String(e||"").trim();return t?t==="All"?"All":{action:"Actions",camera:"Camera",body:"Body",char:"Characters",mood:"Mood",outfit:"Outfits",pose:"Poses",prop:"Props",scene:"Scenes",weather:"Weather",style:"Style",hair:"Hair",lighting:"Lighting"}[t]||Yn(t):""}function $n(e=""){const t=String(e||"").trim();return t?t==="All"?"All":t.split(/[_-]+/u).filter(Boolean).map(n=>Yn(n)).join(" ").trim():""}function xx({name:e,label:t,description:n,value:r,onChange:s,onEnter:o,disabled:i=!1,multiline:a=!1,aliasOptions:c=[],aliasCatalog:d=[],onOpenComposer:g}){var tt,lt;const m=u.useRef(null),h=u.useRef(null),v=u.useRef({start:null,end:null}),w=u.useRef(null),N=u.useRef(null),[j,p]=u.useState(null),[f,y]=u.useState(null),[S,R]=u.useState(!1),[P,O]=u.useState(""),[_,V]=u.useState("All"),[A,W]=u.useState("All"),[ue]=u.useState([]),se=u.useRef(null),[pe,q]=u.useState(!1),[le,ae]=u.useState(!1),[k,I]=u.useState(null),E=typeof r=="string"?r:String(r??"");u.useMemo(()=>Array.isArray(c)?c.filter(Boolean):[],[c]);const L=u.useMemo(()=>(Array.isArray(d)?d.filter(x=>x&&x.name):[]).map(x=>({...x,...Pc(x)})),[d]),M=u.useMemo(()=>L,[L]),z=x=>{const b=x.target.value;s==null||s(b)},$=x=>{if(!a&&x.key==="Enter"){x.preventDefault(),o==null||o(x.target.value,x);return}},Z=u.useMemo(()=>{const x=new Map;return M.forEach(b=>{b!=null&&b.token&&x.set(String(b.token).toLowerCase(),b)}),x},[M]),H=u.useMemo(()=>{const x=new Set(["All"]);return L.forEach(b=>{b.category&&x.add(b.category)}),Array.from(x).sort((b,B)=>b.localeCompare(B))},[L]),D=u.useMemo(()=>{const x=new Set(["All"]);return M.forEach(b=>{(!_||_==="All"||b.category===_)&&b.subcategory&&x.add(b.subcategory)}),Array.from(x).sort((b,B)=>b.localeCompare(B))},[M,_]);u.useEffect(()=>{W("All")},[_]);const U=u.useMemo(()=>{const x=E||"";if(!x||!x.includes("$"))return[];const b=[],B=/\$([a-z0-9_:-]+)\$/gi;let Q;for(;Q=B.exec(x);)b.push({token:Q[1],index:Q.index,length:Q[0].length});return b},[E]),te=()=>{try{const x=m.current;x?v.current={start:x.selectionStart??null,end:x.selectionEnd??null}:v.current={start:null,end:null}}catch{v.current={start:null,end:null}}h.current&&h.current.scrollIntoView({block:"center",behavior:"smooth"}),R(!0)},J=u.useMemo(()=>{const x=P.trim().toLowerCase();return M.filter(b=>{var B,Q,ie,ee;return _!=="All"&&(b.category||"")!==_||A!=="All"&&(b.subcategory||"other")!==A?!1:x?((B=b.token)==null?void 0:B.toLowerCase().includes(x))||((Q=b.text)==null?void 0:Q.toLowerCase().includes(x))||((ie=b.name)==null?void 0:ie.toLowerCase().includes(x))||((ee=b.displayName)==null?void 0:ee.toLowerCase().includes(x)):!0}).sort((b,B)=>{const Q=(b.subcategory||"").toLowerCase(),ie=(B.subcategory||"").toLowerCase();return Q!==ie?Q.localeCompare(ie):b.token.localeCompare(B.token)})},[M,_,A,P]),[X,de]=u.useState(30),Le=u.useMemo(()=>J.slice(0,X),[J,X]);u.useEffect(()=>{de(30)},[_,A,P,L]),u.useEffect(()=>{W("All")},[_]);const me=(x,{closeAfter:b=!0}={})=>{var Ks,Qs;const B=m.current,Q=`$${x}$`,ie=E||"",ee=(Ks=v.current)==null?void 0:Ks.start,Ne=(Qs=v.current)==null?void 0:Qs.end,we=(B==null?void 0:B.selectionStart)??(typeof ee=="number"?ee:ie.length),ye=(B==null?void 0:B.selectionEnd)??(typeof Ne=="number"?Ne:ie.length),Te=ie.slice(0,we),mt=ie.slice(ye),Be=Te.match(/[^\s]$/),wt=mt.match(/^[^\s]/),Ht=Be&&Be[0]!==","?", ":"",Vn=wt&&wt[0]!==","?", ":"",Io=Te+Ht+Q+Vn+mt;s==null||s(Io);const Gs=(Te+Ht+Q+Vn).length;v.current={start:Gs,end:Gs},b&&(R(!1),requestAnimationFrame(()=>{var Ys;(Ys=B==null?void 0:B.blur)==null||Ys.call(B)}))},xe=x=>{const b=E||"",B=dr(b,x),Q=B?B.wrapperStart:x.index,ie=B?B.wrapperEnd:x.index+x.length,ee=b.slice(0,Q).replace(/[\s,]*$/,""),Ne=b.slice(ie).replace(/^[\s,]*/,""),we=ee?`${ee} ${Ne}`.trim():Ne.trim();s==null||s(we)},K=x=>{if(!x)return;const b=Z.get(x.token.toLowerCase()),B=(b==null?void 0:b.displayName)||x.token,Q=dr(E||"",x);I({tokenObj:x,displayName:B,weight:(Q==null?void 0:Q.weight)??1}),ae(!0),requestAnimationFrame(()=>{var ie,ee;return(ee=(ie=m.current)==null?void 0:ie.blur)==null?void 0:ee.call(ie)})},ve=u.useMemo(()=>(x,b)=>{var mt;if(x===b||x===null||b===null||!(U!=null&&U.length))return;const B=E||"",Q=U.map(Be=>{const wt=dr(B,Be),Ht=wt?wt.wrapperStart:Be.index,Vn=wt?wt.wrapperEnd:Be.index+Be.length;return{start:Ht,end:Vn,text:B.slice(Ht,Vn)||`$${Be.token}$`}}),ie=Q.slice(0,-1).map((Be,wt)=>{const Ht=Q[wt+1];return B.slice(Be.end,Ht.start)}),ee=Q.length?B.slice(0,Q[0].start):"",Ne=Q.length?B.slice(Q[Q.length-1].end):"",we=[...Q],[ye]=we.splice(x,1);we.splice(b,0,ye);let Te=ee+(((mt=we[0])==null?void 0:mt.text)||"");for(let Be=1;Be<we.length;Be+=1)Te+=(ie[Be-1]??", ")+we[Be].text;Te+=Ne,s==null||s(Te)},[s,U,E]),ke=(x,b)=>{p(b),w.current=x.currentTarget,x.dataTransfer.effectAllowed="move",x.dataTransfer.setData("text/plain",String(b)),requestAnimationFrame(()=>{w.current&&w.current.classList.add("is-dragging")})},_e=(x,b)=>{x.preventDefault(),x.dataTransfer.dropEffect="move",b!==f&&y(b)},Xe=x=>{x!==f&&y(x)},Je=x=>{j!==null&&x!==null&&j!==x&&ve(j,x),p(null),y(null),w.current=null},be=()=>{w.current&&w.current.classList.remove("is-dragging"),Je(f)},re=(x,b)=>{x.preventDefault(),Je(b)},F=(x,b)=>{var ie,ee;if(!((ee=(ie=x.target)==null?void 0:ie.closest)==null?void 0:ee.call(ie,".token-chip-drag-handle")))return;const Q=x.touches[0];N.current={idx:b,startX:Q.clientX,startY:Q.clientY,moved:!1}},G=x=>{if(!N.current)return;const b=x.touches[0],B=Math.abs(b.clientX-N.current.startX),Q=Math.abs(b.clientY-N.current.startY);if(B<=10&&Q<=10)return;N.current.moved=!0,p(N.current.idx),x.preventDefault();const ie=h.current,ee=ie?ie.querySelectorAll(".token-chip-draggable"):document.querySelectorAll(".token-chip-draggable"),Ne=b.clientX,we=b.clientY;for(let ye=0;ye<ee.length;ye++){const Te=ee[ye].getBoundingClientRect();if(Ne>=Te.left&&Ne<=Te.right&&we>=Te.top&&we<=Te.bottom){y(ye);break}}},ne=()=>{var x;(x=N.current)!=null&&x.moved&&j!==null&&f!==null&&j!==f&&ve(j,f),N.current=null,p(null),y(null)},fe={id:e,name:e,value:E,onChange:z,disabled:i,className:"ui-control ui-input pr-10 text-[13px] sm:text-sm",placeholder:"","aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0},he=()=>{R(!1),requestAnimationFrame(()=>{var x,b;(b=(x=m.current)==null?void 0:x.blur)==null||b.call(x)})},Ee=(()=>{const x=String(e||"").toLowerCase(),b=String(t||"").toLowerCase();return!!`${x} ${b}`.trim().includes("prompt")})(),Se=()=>l.jsx(kt,{open:S,onClose:he,title:Ee?"Insert alias":"Aliases",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:he,children:"Done"}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Search"}),l.jsxs("div",{className:"composer-filters",children:[l.jsx("input",{ref:se,type:"text",value:P,onChange:x=>O(x.target.value),placeholder:"Search aliases",className:"composer-search ui-control ui-input"}),l.jsx("select",{value:_,onChange:x=>V(x.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Filter by category",children:["All",...H.filter(x=>x!=="All")].map(x=>l.jsx("option",{value:x,children:x==="All"?"Category: All":ln(x)},`cat-${x}`))}),D.length>2?l.jsx("select",{value:A,onChange:x=>W(x.target.value),className:"composer-subcategory-select ui-control ui-select is-compact",children:D.map(x=>l.jsx("option",{value:x,children:x==="All"?"All subcategories":$n(x)},x))}):null]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Results"}),l.jsx("div",{className:"composer-alias-list",children:J.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases found."}):l.jsxs(l.Fragment,{children:[Le.map(x=>l.jsxs("button",{type:"button",onClick:()=>me(x.token,{closeAfter:!Ee}),className:"composer-alias-item",children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:x.displayName||x.token}),x.category?l.jsx("span",{className:"composer-alias-category",children:ln(x.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",x.token,"$"]}),l.jsx("div",{className:"composer-alias-text",children:x.text})]},x.key)),X<J.length?l.jsxs("button",{type:"button",onClick:()=>de(x=>Math.min(x+30,J.length)),className:"ui-button is-muted w-full",children:["Show more (",J.length-X," left)"]}):null]})})]})]})});return a?l.jsxs("div",{className:"relative space-y-2",ref:h,children:[g&&!Ee?l.jsxs("div",{className:"stringinput-toolbar",children:[l.jsx("button",{type:"button",className:"ui-button is-muted is-compact",onClick:()=>g(e),children:"Open composer"}),L.length?l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:te,children:"Aliases"}):null,l.jsx("button",{type:"button",className:"ui-button is-ghost is-compact",onClick:()=>q(!0),children:"Expand"})]}):null,l.jsx("textarea",{ref:m,...fe,rows:3,wrap:"soft",onKeyDown:$,className:fe.className+" resize-none min-h-[88px] max-h-[160px] leading-relaxed overflow-y-auto overflow-x-hidden break-words whitespace-pre-wrap",style:{whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"}}),g&&Ee?l.jsx("div",{className:"stringinput-underbar",children:l.jsxs("div",{className:"stringinput-underbar-actions",children:[l.jsx("button",{type:"button",className:"stringinput-action-link",onClick:()=>g(e),children:"Open composer"}),L.length?l.jsx("button",{type:"button",className:"stringinput-action-link",onClick:te,children:"Insert alias"}):null]})}):null,l.jsx(px,{open:pe,onClose:()=>q(!1),title:t||e,value:E,onChange:s,description:n}),U.length?l.jsxs("div",{className:"stringinput-tokens",children:[l.jsxs("div",{className:"stringinput-tokens-label",children:["Active aliases ",l.jsx("span",{className:"stringinput-tokens-hint",children:"(drag to reorder)"})]}),l.jsx("div",{className:"stringinput-tokens-list",children:U.map((x,b)=>{var we;const B=Z.get(x.token.toLowerCase()),Q=(B==null?void 0:B.displayName)||x.token,ie=j===b,ee=f===b&&j!==null&&j!==b,Ne=((we=dr(E||"",x))==null?void 0:we.weight)??1;return l.jsxs("div",{className:`token-chip token-chip-draggable ${ie?"is-dragging":""} ${ee?"is-drop-target":""}`,title:`$${x.token}$`,role:"button",tabIndex:0,draggable:!0,onDragStart:ye=>ke(ye,b),onDragEnd:be,onDragEnter:()=>Xe(b),onDragOver:ye=>_e(ye,b),onDrop:ye=>re(ye,b),onTouchStart:ye=>F(ye,b),onTouchMove:G,onTouchEnd:ne,onClick:()=>{j===null&&K(x)},onKeyDown:ye=>{(ye.key==="Enter"||ye.key===" ")&&(ye.preventDefault(),K(x))},children:[l.jsx("span",{className:"token-chip-drag-handle","aria-hidden":"true",children:l.jsx(ga,{size:14})}),l.jsx("span",{className:"token-chip-label",children:Q}),Math.abs(Ne-1)>1e-6?l.jsxs("span",{className:"token-chip-weight","aria-label":`Strength ${cn(Ne)}x`,children:["",cn(Ne)]}):null,l.jsx("button",{type:"button",className:"token-chip-remove",onClick:ye=>{ye.stopPropagation(),xe(x)},"aria-label":`Remove ${x.token}`,children:l.jsx(ya,{size:12})})]},`${x.token}-${x.index}`)})})]}):null,l.jsx(ja,{open:le,onClose:()=>ae(!1),title:"Alias strength",tokenLabel:k?`${k.displayName}  $${(tt=k.tokenObj)==null?void 0:tt.token}$`:"",weight:(k==null?void 0:k.weight)??1,onApply:x=>{k!=null&&k.tokenObj&&(s==null||s(ml(E||"",k.tokenObj,x)))},onRemoveWeight:()=>{k!=null&&k.tokenObj&&(s==null||s(ml(E||"",k.tokenObj,null)))},onDeleteToken:()=>{k!=null&&k.tokenObj&&xe(k.tokenObj)}}),S?l.jsx(Se,{}):null]}):l.jsxs("div",{className:"relative space-y-2",ref:h,children:[l.jsx("input",{...fe,type:"text",inputMode:"text",autoComplete:"off",onKeyDown:$,className:fe.className+" min-h-[44px]",ref:m}),U.length?l.jsxs("div",{className:"stringinput-tokens",children:[l.jsxs("div",{className:"stringinput-tokens-label",children:["Active aliases ",l.jsx("span",{className:"stringinput-tokens-hint",children:"(drag to reorder)"})]}),l.jsx("div",{className:"stringinput-tokens-list",children:U.map((x,b)=>{var we;const B=Z.get(x.token.toLowerCase()),Q=(B==null?void 0:B.displayName)||x.token,ie=j===b,ee=f===b&&j!==null&&j!==b,Ne=((we=dr(E||"",x))==null?void 0:we.weight)??1;return l.jsxs("div",{className:`token-chip token-chip-draggable ${ie?"is-dragging":""} ${ee?"is-drop-target":""}`,title:`$${x.token}$`,onClick:()=>{j===null&&K(x)},role:"button",tabIndex:0,draggable:!0,onDragStart:ye=>ke(ye,b),onDragEnd:be,onDragEnter:()=>Xe(b),onDragOver:ye=>_e(ye,b),onDrop:ye=>re(ye,b),onTouchStart:ye=>F(ye,b),onTouchMove:G,onTouchEnd:ne,onKeyDown:ye=>{(ye.key==="Enter"||ye.key===" ")&&(ye.preventDefault(),K(x))},children:[l.jsx("span",{className:"token-chip-drag-handle","aria-hidden":"true",children:l.jsx(ga,{size:14})}),l.jsx("span",{className:"token-chip-label",children:Q}),Math.abs(Ne-1)>1e-6?l.jsxs("span",{className:"token-chip-weight","aria-label":`Strength ${cn(Ne)}x`,children:["",cn(Ne)]}):null,l.jsx("button",{type:"button",className:"token-chip-remove",onClick:ye=>{ye.stopPropagation(),xe(x)},"aria-label":`Remove ${x.token}`,children:l.jsx(ya,{size:12})})]},`${x.token}-${x.index}`)})})]}):null,l.jsx(ja,{open:le,onClose:()=>ae(!1),title:"Alias strength",tokenLabel:k?`${k.displayName}  $${(lt=k.tokenObj)==null?void 0:lt.token}$`:"",weight:(k==null?void 0:k.weight)??1,onApply:x=>{k!=null&&k.tokenObj&&(s==null||s(ml(E||"",k.tokenObj,x)))},onRemoveWeight:()=>{k!=null&&k.tokenObj&&(s==null||s(ml(E||"",k.tokenObj,null)))},onDeleteToken:()=>{k!=null&&k.tokenObj&&xe(k.tokenObj)}}),L.length?l.jsx("button",{type:"button",className:"stringinput-trailing ui-button is-ghost is-compact",onClick:()=>g?g(e):te(),title:g?"Open prompt composer":"Insert alias",children:g?l.jsx(Cc,{size:16}):l.jsx(Fn,{size:16})}):null,l.jsx(Se,{})]})}const gd=u.memo(xx),yd=e=>e==null?void 0:String(e).trim().replace(/[^A-Za-z0-9_-]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")||void 0;function wx({name:e,label:t,description:n,value:r,onChange:s,disabled:o=!1,min:i,max:a,step:c,isFloat:d=!1,inputId:g}){const m=c??(d?.01:1),h=g??yd(e),v=j=>{if(j===""||j===null||j===void 0)return"";const p=d?parseFloat(j):parseInt(j,10);return Number.isNaN(p)?"":p},w=j=>{const p=j.target.value,f=v(p);s==null||s(f)},N=j=>{if(j.key!=="ArrowUp"&&j.key!=="ArrowDown")return;j.preventDefault();const p=typeof r=="number"?r:v(String(r??""))||0,f=j.key==="ArrowUp"?m:-m;let y=p+f;if(typeof i=="number"&&(y=Math.max(i,y)),typeof a=="number"&&(y=Math.min(a,y)),d){const S=typeof m=="number"?(String(m).split(".")[1]||"").length:2;y=parseFloat(y.toFixed(Math.max(S,2)))}s==null||s(y)};return l.jsxs("div",{className:"w-full flex items-center gap-2",children:[l.jsx("input",{id:h,name:e,type:"number",inputMode:d?"decimal":"numeric",value:r??"",onChange:w,onKeyDown:N,disabled:o,min:i,max:a,step:m,"aria-label":t||e,"aria-describedby":n?`${h||yd(e)||e}-description`:void 0,className:"ui-control ui-input"}),typeof i=="number"||typeof a=="number"?l.jsxs("div",{className:"hidden sm:flex flex-col text-[10px] text-[#6A6FA8] text-right leading-tight",children:[typeof i=="number"&&l.jsxs("span",{children:["min ",i]}),typeof a=="number"&&l.jsxs("span",{children:["max ",a]})]}):null]})}const gs=u.memo(wx);function jx({name:e,label:t,description:n,value:r,onChange:s,disabled:o=!1}){const i=!!r,a=()=>{o||s==null||s(!i)},c=d=>{(d.key===" "||d.key==="Enter")&&(d.preventDefault(),a())};return l.jsxs("button",{id:e,type:"button",role:"switch","aria-checked":i,"aria-label":t||e,"aria-describedby":n?`${e}-description`:void 0,onClick:a,onKeyDown:c,disabled:o,className:`ui-switch ${i?"is-on":""}`,children:[l.jsx("span",{className:"ui-switch-track",children:l.jsx("span",{className:"ui-switch-knob"})}),l.jsx("span",{className:"ui-switch-state",children:i?"On":"Off"})]})}const vd=u.memo(jx),Sx=/\.(safetensors|ckpt|pt|pth)$/i;function _c(e){if(typeof e!="string")return!1;const t=e.trim();if(!t)return!1;const r=t.replace(/\\/g,"/").split("/").filter(Boolean).pop()||"";return Sx.test(r)}function km(e){if(typeof e!="string")return{folder:"",base:""};const n=e.trim().replace(/\\/g,"/").split("/").filter(Boolean),s=(n.pop()||"").replace(/\.[^.]+$/,"");return{folder:n.join(" ").trim(),base:s}}function Sa(e){if(!_c(e))return e;const{folder:t,base:n}=km(e);if(!n)return e;if(!t)return n;const r=t.split(/\s+/).filter(Boolean),s=r[r.length-1]||"";if(s&&n.toLowerCase().startsWith(s.toLowerCase())){const o=n.slice(s.length);return o?`${t}${o}`:t}return`${t} ${n}`.trim()}function Nx(e,t){try{if(typeof window>"u"||!e)return null;const n=e.getItem(t);return n?JSON.parse(n):null}catch{return null}}function _o(e,t,n){try{if(typeof window>"u"||!e)return;e.setItem(t,JSON.stringify(n))}catch{}}function Vt(){try{return typeof window>"u"?null:window.sessionStorage||null}catch{return null}}function Hr(){try{return typeof window>"u"?null:window.localStorage||null}catch{return null}}const Cm=750,dn=new Map,Yt=new Map,qt=new Map,Ir=new Map,Xt=new Map,Jt=new Map;function bm(e){var t;if(Yt.has(e)&&(clearTimeout(Yt.get(e)),Yt.delete(e)),qt.has(e)){try{(t=window.cancelIdleCallback)==null||t.call(window,qt.get(e))}catch{}qt.delete(e)}dn.has(e)&&(_o(Vt(),e,dn.get(e)),dn.delete(e))}function kx(e){var r;if(Yt.has(e)&&(clearTimeout(Yt.get(e)),Yt.delete(e)),qt.has(e)){try{(r=window.cancelIdleCallback)==null||r.call(window,qt.get(e))}catch{}qt.delete(e)}const t=()=>{dn.has(e)&&(_o(Vt(),e,dn.get(e)),dn.delete(e))},n=setTimeout(()=>{Yt.delete(e);try{if(typeof window<"u"&&typeof window.requestIdleCallback=="function"){const s=window.requestIdleCallback(()=>{qt.delete(e),t()},{timeout:2500});qt.set(e,s);return}}catch{}t()},Cm);Yt.set(e,n)}function Cx(){Array.from(Yt.values()).forEach(e=>clearTimeout(e)),Yt.clear(),Array.from(qt.values()).forEach(e=>{var t;try{(t=window.cancelIdleCallback)==null||t.call(window,e)}catch{}}),qt.clear(),Array.from(dn.entries()).forEach(([e,t])=>{_o(Vt(),e,t)}),dn.clear(),Array.from(Xt.values()).forEach(e=>clearTimeout(e)),Xt.clear(),Array.from(Jt.values()).forEach(e=>{var t;try{(t=window.cancelIdleCallback)==null||t.call(window,e)}catch{}}),Jt.clear(),Array.from(Ir.entries()).forEach(([e,t])=>{try{const n=Vt();n&&n.setItem(e,t)}catch{}}),Ir.clear()}if(typeof window<"u"&&!window.__cozygenFormStateFlush){const e=()=>Cx();window.addEventListener("beforeunload",e),window.addEventListener("pagehide",e),window.__cozygenFormStateFlush=!0}function bx(e){var r;if(!e)return{};const t=`${e}_formData`,n=Nx(Vt(),t);if(n&&typeof n=="object")return n;try{const s=Hr();(r=s==null?void 0:s.removeItem)==null||r.call(s,t)}catch{}return{}}function lo(e,t,n={}){var o;if(!e)return;const{immediate:r=!1}=n||{},s=`${e}_formData`;if(r){bm(s),_o(Vt(),s,t||{});try{const i=Hr();(o=i==null?void 0:i.removeItem)==null||o.call(i,s)}catch{}return}dn.set(s,t||{}),kx(s)}function Ex(e){e&&bm(`${e}_formData`)}function Lx(e,t,n=Cm){var o;if(Ir.set(e,t),Xt.has(e)&&(clearTimeout(Xt.get(e)),Xt.delete(e)),Jt.has(e)){try{(o=window.cancelIdleCallback)==null||o.call(window,Jt.get(e))}catch{}Jt.delete(e)}const r=()=>{const i=Ir.get(e);Ir.delete(e);try{const a=Vt();a&&a.setItem(e,i)}catch{}},s=setTimeout(()=>{Xt.delete(e);try{if(typeof window<"u"&&typeof window.requestIdleCallback=="function"){const i=window.requestIdleCallback(()=>{Jt.delete(e),r()},{timeout:2e3});Jt.set(e,i);return}}catch{}r()},n);Xt.set(e,s)}function Px(e,t={}){var s,o;const{immediate:n=!1}=t||{},r="cozygen_last_param";if(n){if(Xt.has(r)&&(clearTimeout(Xt.get(r)),Xt.delete(r)),Jt.has(r)){try{(s=window.cancelIdleCallback)==null||s.call(window,Jt.get(r))}catch{}Jt.delete(r)}Ir.delete(r);try{const i=Vt();i&&i.setItem(r,e||"");const a=Hr();(o=a==null?void 0:a.removeItem)==null||o.call(a,r)}catch{}return}Lx(r,e||"")}function _x(){var t,n;const e="cozygen_last_param";try{const r=Vt(),s=((t=r==null?void 0:r.getItem)==null?void 0:t.call(r,e))||"";if(s)return s;const o=Hr();(n=o==null?void 0:o.removeItem)==null||n.call(o,e)}catch{}return""}function Em(e,t){const n=e?String(e):"global",r=t?String(t):"";return`cozygen_dropdown_folder:${n}:${r}`}function xd(e,t){var r,s;const n=Em(e,t);try{const o=Vt(),i=((r=o==null?void 0:o.getItem)==null?void 0:r.call(o,n))||"";if(i)return i;const a=Hr();(s=a==null?void 0:a.removeItem)==null||s.call(a,n)}catch{}return""}function Rx(e,t,n){var s;const r=Em(e,t);try{const o=Vt();o&&o.setItem(r,String(n||""));const i=Hr();(s=i==null?void 0:i.removeItem)==null||s.call(i,r)}catch{}}function Ix({workflowName:e,name:t,label:n,description:r,value:s,onChange:o,disabled:i=!1,options:a=[]}){const c=s??"",[d,g]=u.useState(()=>xd(e,t)||"All");u.useEffect(()=>{const p=xd(e,t);g(p||"All")},[e,t]);const m=u.useMemo(()=>(a||[]).map(p=>typeof p=="string"?{value:p,label:p}:{value:p.value??p.name??"",label:p.label??p.name??String(p.value??"")}),[a]),h=(p="")=>{if(typeof p!="string")return"Other";if(!p.includes("/"))return"root";const f=p.split("/");return f.slice(0,f.length-1).join("/")||"root"},v=u.useMemo(()=>{const p=new Set(["All"]);return m.forEach(f=>p.add(h(f.label))),Array.from(p).sort((f,y)=>f.localeCompare(y))},[m]);u.useEffect(()=>{v.includes(d)||g("All")},[v,d]),u.useEffect(()=>{Rx(e,t,d)},[e,t,d]);const w=u.useMemo(()=>{const p=f=>f.replace(/\.[^.]+$/,"");return m.filter(f=>{const y=h(f.label);return d==="All"||y===d}).map(f=>{const y=f.label||"";if(_c(y)){const{base:P}=km(y),O=Sa(y);return{...f,label:d==="All"?O:P||O}}if(d==="All")return f;const S=y.split("/"),R=p(S[S.length-1]||y);return{...f,label:R}}).sort((f,y)=>f.label.localeCompare(y.label))},[m,d]),N=u.useMemo(()=>c===""||c===null||c===void 0?!0:w.some(p=>String(p.value)===String(c)),[w,c]),j=p=>{o==null||o(p.target.value)};return l.jsxs("div",{className:"w-full space-y-2",children:[l.jsx("div",{className:"relative w-full",children:l.jsx("select",{value:d,onChange:p=>g(p.target.value),disabled:i,className:"ui-control ui-select is-compact","aria-label":`Choose folder for ${n||t}`,children:v.map(p=>l.jsx("option",{value:p,children:p},p))})}),l.jsx("div",{className:"relative w-full",children:l.jsxs("select",{id:t,name:t,value:c,onChange:j,disabled:i,"aria-label":n||t,"aria-describedby":r?`${t}-description`:void 0,className:"ui-control ui-select",children:[!N&&c!==""&&l.jsx("option",{value:c,children:Sa(String(c))}),w.length>0&&(c===void 0||c==="")&&l.jsx("option",{value:"",children:"Select"}),w.map(p=>l.jsx("option",{value:p.value,children:p.label},p.value)),w.length===0&&l.jsx("option",{value:"",children:"No matches"})]},`${t||"field"}:${d}`)})]})}const Na=u.memo(Ix);function wd(e=[]){return e.map(t=>typeof t=="string"?{value:t,label:t}:{value:t.value??t.name??"",label:t.label??t.name??String(t.value??"")})}function jd(e,t){if(!e)return null;const n=String(e);if(t==="high"){const r=n.match(/(.+)-high(\.[^.]*)?$/i);return r?r[1]:null}if(t==="low"){const r=n.match(/(.+)-low(\.[^.]*)?$/i);return r?r[1]:null}return null}function Tx(e){return e?e.replace(/[_-]+/g," ").replace(/\s+/g," ").trim().replace(/^./,t=>t.toUpperCase()):""}const zx=(...e)=>e.flat().map(n=>String(n??"").trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")).filter(Boolean).join("-")||"field";function Ax({name:e,label:t,description:n,highParam:r,lowParam:s,highChoices:o=[],lowChoices:i=[],formData:a={},onChangeParam:c,highStrengthParam:d,lowStrengthParam:g,strengthValue:m,onChangeStrength:h,highStrengthValue:v,lowStrengthValue:w,onChangeHighStrength:N,onChangeLowStrength:j,disabled:p=!1}){const f=u.useMemo(()=>wd(o),[o]),y=u.useMemo(()=>wd(i),[i]),S=u.useMemo(()=>{const H=new Map;y.forEach(U=>{const te=jd(U.value,"low");te&&(H.has(te)||H.set(te,U))});const D=[];return f.forEach(U=>{const te=jd(U.value,"high");if(!te)return;const J=H.get(te);J&&D.push({base:te,label:Tx(te),highValue:U.value,lowValue:J.value})}),D.sort((U,te)=>U.label.localeCompare(te.label)),D},[f,y]),R=u.useMemo(()=>{const H=a[r],D=a[s];if(!H||!D)return"";const U=S.find(te=>te.highValue===H&&te.lowValue===D);return U?U.base:""},[a,r,s,S]),P=d||g||`${e}_strength`,O=u.useMemo(()=>zx(e||"lora",P||"strength"),[e,P]),_=!!(d||g),V=!!(d&&g),A=(H,D=1)=>typeof H=="number"?H:D,W=A(typeof m=="number"?m:typeof v=="number"?v:typeof w=="number"?w:void 0,1),ue=A(typeof v=="number"?v:void 0,W),se=A(typeof w=="number"?w:void 0,V?W:ue),pe=V&&Math.abs(ue-se)>1e-4,[q,le]=u.useState(pe);u.useEffect(()=>{le(pe)},[pe,r,s]);const ae=H=>{if(!c)return;const D=S.find(U=>U.base===H);D&&(c(r,D.highValue),c(s,D.lowValue))};if(S.length===0)return l.jsxs("div",{className:"text-[11px] text-[#9DA3FFCC]",children:["No matching ",l.jsx("span",{className:"font-semibold",children:"-high"})," /"," ",l.jsx("span",{className:"font-semibold",children:"-low"})," LoRA pairs found."]});const k=`${O}-linked`,I=`${O}-high`,E=`${O}-low`,L=V?"Linked":"Strength",M=V?"Applies to high + low":d||g||"",z=(H,D)=>{const U=Array.isArray(H)?H:[H];let te=!1;U.forEach(J=>{if(J==="high"&&typeof N=="function"){N(D);return}if(J==="low"&&typeof j=="function"){j(D);return}typeof h=="function"&&!te&&(h(D),te=!0)})},$=H=>{(d||!d&&!g)&&z("high",H),g&&z("low",H)},Z=()=>{V&&le(H=>{const D=!H;return D||$(typeof ue=="number"?ue:typeof se=="number"?se:W),D})};return l.jsxs("div",{className:"space-y-2",children:[l.jsx(Na,{name:`${e}_pair`,label:t,description:n,value:R||"",onChange:ae,disabled:p,options:S.map(H=>({value:H.base,label:H.label}))}),_&&l.jsxs("div",{className:"space-y-1.5",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-[10px] uppercase tracking-[0.16em] text-[#9DA3FFCC]",children:"Strength"}),V&&l.jsx("button",{type:"button",className:"text-[10px] font-semibold tracking-[0.12em] uppercase text-[#E5E7FF]",onClick:Z,disabled:p,children:q?"Link values":"Split values"})]}),q&&V?l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-3",children:[l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:I,className:"lora-strength-label is-high",children:[l.jsx("span",{className:"lora-strength-label-pill",children:"High"}),l.jsxs("span",{className:"lora-strength-label-text",children:["High strength",d&&l.jsx("span",{className:"lora-strength-label-hint",children:d})]})]}),l.jsx(gs,{name:`${P}_high`,label:"High strength",description:"",value:ue,onChange:H=>z("high",H),disabled:p,isFloat:!0,min:0,max:2,step:.05,inputId:I})]}),l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:E,className:"lora-strength-label is-low",children:[l.jsx("span",{className:"lora-strength-label-pill",children:"Low"}),l.jsxs("span",{className:"lora-strength-label-text",children:["Low strength",g&&l.jsx("span",{className:"lora-strength-label-hint",children:g})]})]}),l.jsx(gs,{name:`${P}_low`,label:"Low strength",description:"",value:se,onChange:H=>z("low",H),disabled:p,isFloat:!0,min:0,max:2,step:.05,inputId:E})]})]}):l.jsxs("div",{className:"flex-1 max-w-[220px]",children:[l.jsxs("label",{htmlFor:k,className:"lora-strength-label is-linked",children:[l.jsx("span",{className:"lora-strength-label-pill",children:L}),l.jsxs("span",{className:"lora-strength-label-text",children:["LoRA strength",M&&l.jsx("span",{className:"lora-strength-label-hint",children:M})]})]}),l.jsx(gs,{name:P,label:"LoRA strength",description:"",value:W,onChange:$,disabled:p,isFloat:!0,min:0,max:2,step:.05,inputId:k})]})]})]})}function $x(e,t){if(e.disabled!==t.disabled||e.name!==t.name||e.label!==t.label||e.description!==t.description||e.highParam!==t.highParam||e.lowParam!==t.lowParam||e.highStrengthParam!==t.highStrengthParam||e.lowStrengthParam!==t.lowStrengthParam||e.strengthValue!==t.strengthValue||e.highStrengthValue!==t.highStrengthValue||e.lowStrengthValue!==t.lowStrengthValue||e.highChoices!==t.highChoices||e.lowChoices!==t.lowChoices||e.onChangeParam!==t.onChangeParam||e.onChangeStrength!==t.onChangeStrength||e.onChangeHighStrength!==t.onChangeHighStrength||e.onChangeLowStrength!==t.onChangeLowStrength)return!1;const n=e.formData||{},r=t.formData||{};return!(n[e.highParam]!==r[t.highParam]||n[e.lowParam]!==r[t.lowParam])}const Sd=u.memo(Ax,$x);function Mx({id:e,label:t,description:n,preview:r,expanded:s=!1,onToggle:o,children:i,trailing:a,className:c=""}){const d=typeof o=="function",g=e?`${e}-description`:void 0,m=e?`${e}-panel`:void 0,h=typeof t=="string"?t.trim().replace(/\s+/gu," ").replace(/:\s*$/u,""):t,v=typeof n=="string"?n.trim().replace(/\s+/gu," "):n,w=typeof r=="string"||typeof r=="number"?String(r):void 0,N=d?"button":"div",j=d?{type:"button",onClick:o,"aria-expanded":s,"aria-controls":m,"aria-describedby":v?g:void 0}:{};return l.jsxs("div",{className:["field-row",c].filter(Boolean).join(" "),children:[l.jsxs(N,{...j,className:["field-row-head",d?"is-collapsible":"is-static",s?"is-expanded":""].filter(Boolean).join(" "),children:[l.jsxs("div",{className:"field-row-main",children:[l.jsx("div",{className:"field-row-label",children:h}),v?l.jsx("div",{id:g,className:"field-row-description",children:v}):null]}),l.jsxs("div",{className:"field-row-trailing",children:[a?l.jsx("div",{className:"field-row-trailing-control",children:a}):null,r?l.jsx("div",{className:"field-row-preview",title:w,children:r}):null,d?l.jsx("div",{className:"field-row-chevron","aria-hidden":"true",children:l.jsx(Ec,{size:16})}):null]})]}),d&&s?l.jsx("div",{id:m,className:"field-row-body",children:i}):null]})}const ui=u.memo(Mx),Ox=16,Fx=[" - "," ","-","_"],Lm=e=>[...new Set(e.filter(Boolean))],oo=(e,t)=>{const n=String(e||"").trim(),r=Fx.map(s=>`${n}${s}${t}`);return r.push(`${n}${t}`),Lm(r)},Nd=(e,t)=>{const n=oo(`${e} Strength`,t),r=oo(e,t).map(s=>`${s} Strength`);return Lm([...n,...r])},kd=e=>String(e||"").toLowerCase().replace(/[\s_-]+/g,""),gl=(e,t=[])=>{if(!e)return null;const n=Array.isArray(t)?t:[t];for(const s of n){if(!s)continue;const o=e.get(s);if(o)return{name:s,input:o}}const r=new Map;n.forEach(s=>{s&&r.set(kd(s),s)});for(const[s,o]of e.entries()){const i=kd(s);if(r.has(i))return{name:s,input:o}}return null},Dx=Array.from({length:Ox},(e,t)=>{const n=t+1,r=oo("Lora High",n),s=oo("Lora Low",n),o=Nd("Lora High",n),i=Nd("Lora Low",n);return{id:`video_lora_${n}`,label:`Video LoRA ${n}`,highParam:r[0],lowParam:s[0],highParamAliases:r,lowParamAliases:s,highStrengthParam:o[0],lowStrengthParam:i[0],highStrengthParamAliases:o,lowStrengthParamAliases:i}});function Ux(e){var r,s;const t=((r=e==null?void 0:e.inputs)==null?void 0:r.param_type)||((s=e==null?void 0:e.inputs)==null?void 0:s.Param_type),n=String(t||"STRING").toUpperCase();return["NUMBER","FLOAT","INT"].includes(n)?"NUMBER":["BOOLEAN","BOOL"].includes(n)?"BOOLEAN":["DROPDOWN","CHOICE","SELECT"].includes(n)?"DROPDOWN":"STRING"}function Bx(e){const t=(e==null?void 0:e.inputs)||{};return t.label||t.display_name||t.title||t.param_name||(e==null?void 0:e.title)||(e==null?void 0:e.class_type)||"Parameter"}function Wx(e){const t=(e==null?void 0:e.inputs)||{};return t.description||t.help||t.tooltip||t.doc||""}function fr(e){const t=(e==null?void 0:e.inputs)||{};return t.param_name||t.name||t.key||t.id||`param_${(e==null?void 0:e.id)||"unknown"}`}function os(e){const t=(e==null?void 0:e.inputs)||{},n=t.choices||t.options||[],r=t.default_value??t.value??t.default_choice??(n&&n.length?n[0]:"")??"";return{paramName:fr(e),label:Bx(e),description:Wx(e),paramType:Ux(e),multiline:!!t.multiline,min:typeof t.min=="number"?t.min:void 0,max:typeof t.max=="number"?t.max:void 0,step:typeof t.step=="number"?t.step:void 0,choices:n,defaultValue:r}}function Vx({inputs:e=[],formData:t={},onFormChange:n,workflowName:r,onParamEdited:s,onSpotlight:o,compactControls:i=!0,collapseAllKey:a=0,collapseAllCollapsed:c=!0,lastEditedParam:d="",spotlightName:g="",onCloseSpotlight:m=()=>{},onVisibleParamsChange:h=()=>{},aliasOptions:v=[],aliasCatalog:w=[],onOpenComposer:N}){const[j,p]=u.useState({}),[f,y]=u.useState(0),S=u.useRef(t);u.useEffect(()=>{S.current=t},[t]);const R=u.useCallback((I,E)=>{if((I==null?void 0:I.paramType)==="BOOLEAN")return E?"On":"Off";if(E==null||E==="")return"Empty";if(typeof E=="string"){const L=E.trim();if(!L)return"Empty";const M=240,z=140,$=L.length>M?L.slice(0,M):L,H=/[\r\n\t]/.test($)||/\s{2,}/u.test($)?$.replace(/\s+/gu," ").trim():$;if(H.length>z)return`${H.slice(0,z)}`;const D=Sa(H);return L.length>M?`${D}`:D}return String(E)},[]),P=u.useCallback((I,E)=>{!n||!I||(n(I,E),s==null||s(I),p(L=>(L==null?void 0:L[I])===!1?L:{...L,[I]:!1}))},[n,s]),O=u.useCallback(I=>{I&&p(E=>({...E,[I]:!(E!=null&&E[I])}))},[]),_=u.useMemo(()=>e||[],[e]),V=u.useMemo(()=>{const I=new Map;return(_||[]).forEach(E=>{const L=fr(E);L&&I.set(L,M=>P(L,M))}),I},[P,_]),A=u.useMemo(()=>{const I=new Map;return(_||[]).forEach(E=>{const L=fr(E);L&&I.set(L,(M,z)=>{var $,Z;P(L,M),(Z=($=z==null?void 0:z.target)==null?void 0:$.blur)==null||Z.call($),g===L&&(m==null||m())})}),I},[P,m,g,_]),W=u.useMemo(()=>{const I=new Map;return(_||[]).forEach(E=>{const L=fr(E);L&&I.set(L,()=>O(L))}),I},[O,_]);u.useEffect(()=>{const I={};(e||[]).forEach(E=>{const L=fr(E);L&&(I[L]=c)}),d&&(I[d]=!1),p(I)},[a,c,e,d]);const ue=u.useMemo(()=>{const I=new Map;return(e||[]).forEach(E=>{const L=fr(E);L&&I.set(L,E)}),I},[e]),se=u.useMemo(()=>{const I=[];return Dx.forEach(E=>{const L=gl(ue,E.highParamAliases||E.highParam),M=gl(ue,E.lowParamAliases||E.lowParam);if(!L||!M)return;const z=L.input,$=M.input,Z=os(z),H=os($);if(Z.paramType!=="DROPDOWN"||H.paramType!=="DROPDOWN")return;const D=Z.choices||[],U=H.choices||[];if(!D.length||!U.length)return;const te=gl(ue,E.highStrengthParamAliases||E.highStrengthParam),J=gl(ue,E.lowStrengthParamAliases||E.lowStrengthParam);I.push({...E,highParam:L.name,lowParam:M.name,highStrengthParam:te==null?void 0:te.name,lowStrengthParam:J==null?void 0:J.name,highInput:z,lowInput:$,highCfg:Z,lowCfg:H})}),I},[ue]),pe=u.useMemo(()=>{const I=new Map;return se.forEach(E=>{I.set(E.highParam,E)}),I},[se]),q=u.useMemo(()=>{const I=new Set;return se.forEach(E=>{I.add(E.highParam),I.add(E.lowParam),E.highStrengthParam&&I.add(E.highStrengthParam),E.lowStrengthParam&&I.add(E.lowStrengthParam)}),I},[se]),le=u.useMemo(()=>{const I=[];return(_||[]).forEach(E=>{const L=os(E),M=L.paramName,z=pe.get(M);if(z){I.push({name:M,label:z.label||L.label,description:L.description,render:$=>{const Z=$||S.current||{},H=z.highStrengthParam?Z[z.highStrengthParam]:void 0,D=z.lowStrengthParam?Z[z.lowStrengthParam]:void 0,U=H??D??1;return l.jsx(Sd,{name:z.id||z.highParam,label:z.label||L.label,highParam:z.highParam,lowParam:z.lowParam,highChoices:z.highCfg.choices,lowChoices:z.lowCfg.choices,formData:Z,onChangeParam:P,highStrengthParam:z.highStrengthParam,lowStrengthParam:z.lowStrengthParam,strengthValue:U,highStrengthValue:H,lowStrengthValue:D,onChangeHighStrength:z.highStrengthParam?V.get(z.highStrengthParam):void 0,onChangeLowStrength:z.lowStrengthParam?V.get(z.lowStrengthParam):void 0,disabled:!1},`lora-${M}-${f}`)}});return}q.has(M)||I.push({name:M,label:L.label,description:L.description,render:$=>{const Z=$||S.current||{},H={name:M,label:L.label,description:L.description,value:Z[M],defaultValue:L.defaultValue,disabled:!1};return L.paramType==="NUMBER"?l.jsx(gs,{...H,onChange:V.get(M),min:L.min,max:L.max,step:L.step,isFloat:!0},`field-${M}-number-${f}`):L.paramType==="BOOLEAN"?l.jsx(vd,{...H,onChange:V.get(M)},`field-${M}-bool-${f}`):L.paramType==="DROPDOWN"?l.jsx(Na,{...H,workflowName:r,onChange:V.get(M),options:L.choices||[]},`field-${M}-dropdown-${f}`):l.jsx(gd,{...H,aliasOptions:v,aliasCatalog:w,onOpenComposer:N,onChange:V.get(M),onEnter:A.get(M),multiline:L.multiline},`field-${M}-string-${f}`)}})}),I},[_,pe,q,f,r,v,w,N,P,V,A,g,m]),ae=u.useMemo(()=>{const I=new Map;return le.forEach(E=>I.set(E.name,E)),I},[le]);u.useEffect(()=>{h==null||h(le.map(I=>I.name))},[le,h]);const k=u.useCallback(I=>{const E=le.map(Z=>Z.name),L=ae.get(I);if(!L)return;const M=E.indexOf(I),z=M>0?E[M-1]:null,$=M>=0&&M<E.length-1?E[M+1]:null;y(Z=>Z+1),o==null||o({name:I,label:L.label,description:L.description,render:Z=>L.render(Z||S.current),order:E,index:M>=0?M:0,total:E.length,onPrev:z?()=>k(z):null,onNext:$?()=>k($):null})},[ae,o,le]);return l.jsx("div",{className:"settings-list",children:_.map(I=>{const E=os(I),L=E.paramName,M=pe.get(L);if(M){const{id:J,label:X,highParam:de,lowParam:Le,highStrengthParam:me,lowStrengthParam:xe,highCfg:K,lowCfg:ve}=M,ke=me?t[me]:void 0,_e=xe?t[xe]:void 0,Xe=ke??_e??1,Je=L?`param-${L}`:void 0,be=i?j[L]??!0:!!j[L],re=be?R(E,[t[de],t[Le]].filter(Boolean).join("  ")):null,F=(G=t)=>{const ne=me?G==null?void 0:G[me]:void 0,fe=xe?G==null?void 0:G[xe]:void 0,he=ne??fe??Xe;return l.jsx(Sd,{name:J||de,label:X||E.label,highParam:de,lowParam:Le,highChoices:K.choices,lowChoices:ve.choices,formData:G,onChangeParam:P,highStrengthParam:me,lowStrengthParam:xe,strengthValue:he,highStrengthValue:ne,lowStrengthValue:fe,onChangeHighStrength:me?V.get(me):void 0,onChangeLowStrength:xe?V.get(xe):void 0,disabled:!1},`lora-${L}`)};return l.jsx("div",{id:Je,"data-param-name":L,"data-param-label":X||E.label,"data-param-type":"lora_pair",className:"settings-row",children:l.jsx(ui,{id:L,label:X||E.label,description:E.description,preview:re,expanded:!be,onToggle:W.get(L),children:be?null:F(t)})},`lora_pair_${J||de}`)}if(q.has(L))return null;const z=t[L],Z={name:L,label:E.label,description:E.description,value:z,disabled:!1,defaultValue:E.defaultValue},H=(J=t,X=!1)=>{const de={...Z,value:J==null?void 0:J[L]};return E.paramType==="NUMBER"?l.jsx(gs,{...de,inputId:L,onChange:V.get(L),min:E.min,max:E.max,step:E.step,isFloat:!0},`field-${L}-number-${f}`):E.paramType==="BOOLEAN"?l.jsx(vd,{...de,onChange:V.get(L)},`field-${L}-bool-${f}`):E.paramType==="DROPDOWN"?l.jsx(Na,{...de,workflowName:r,onChange:V.get(L),options:E.choices||[]},`field-${L}-dropdown-${f}`):l.jsx(gd,{...de,aliasOptions:v,aliasCatalog:w,onOpenComposer:N,onChange:V.get(L),onEnter:A.get(L),multiline:E.multiline||g===L||X},`field-${L}-string-${f}`)},D=L?`param-${L}`:void 0,U=i?j[L]??!0:!!j[L];if(E.paramType==="BOOLEAN")return l.jsx("div",{id:D,"data-param-name":L,"data-param-label":E.label,"data-param-type":"single",className:"settings-row",children:l.jsx(ui,{id:L,label:E.label,description:E.description,trailing:H(t,!0)})},L);const te=U?R(E,z):null;return l.jsx("div",{id:D,"data-param-name":L,"data-param-label":E.label,"data-param-type":"single",className:"settings-row",children:l.jsx(ui,{id:L,label:E.label,description:E.description,preview:te,expanded:!U,onToggle:W.get(L),children:U?null:H(t,!0)})},L)})})}function Hx(e){return(e||[]).map(t=>{var n;if(["CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput","CozyGenChoiceInput"].includes(t.class_type)){let r=t.class_type.replace("CozyGen","").replace("Input","").toUpperCase();return r==="CHOICE"&&(r="DROPDOWN"),{...t,inputs:{...t.inputs,param_type:r,Multiline:((n=t.inputs)==null?void 0:n.display_multiline)||!1}}}return t})}function Gx({workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,sectionRef:s,compactControls:o=!1,collapseAllState:i=null,onSpotlight:a,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:g,aliasOptions:m=[],aliasCatalog:h=[],onOpenComposer:v}){const w=u.useMemo(()=>Hx((t||[]).filter(N=>N.class_type!=="CozyGenImageInput")),[t]);return l.jsx("section",{className:"settings-surface scroll-mt-24",ref:s,children:l.jsx(Vx,{workflowName:e,inputs:w,formData:n,onFormChange:r,compactControls:o,collapseAllKey:(i==null?void 0:i.key)??0,collapseAllCollapsed:(i==null?void 0:i.collapsed)??!0,onSpotlight:a,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:g,aliasOptions:m,aliasCatalog:h,onOpenComposer:v})})}function Kx({workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,parameterSectionRef:s,compactControls:o=!0,collapseAllState:i=null,onSpotlight:a,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:g,aliasOptions:m=[],aliasCatalog:h=[],onOpenComposer:v}){return l.jsx(Gx,{workflowName:e,dynamicInputs:t,formData:n,onFormChange:r,sectionRef:s,compactControls:o,collapseAllState:i,onSpotlight:a,spotlightName:c,onCloseSpotlight:d,onVisibleParamsChange:g,aliasOptions:m,aliasCatalog:h,onOpenComposer:v})}const Cd=u.forwardRef(function({title:t,kicker:n,meta:r,defaultOpen:s=!0,variant:o="card",className:i="",bodyClassName:a,children:c},d){const g=o==="bare",m=(g?["collapsible-section","collapsible-section--bare",i]:["ui-panel","collapsible-card","sectioned-card",i]).filter(Boolean).join(" "),h=(g?["collapsible-section-body",a||"space-y-4"]:["collapsible-card-body",a||"space-y-4"]).filter(Boolean).join(" "),v=r!=null?l.jsx("div",{className:"collapsible-card-summary-meta",children:r}):null;return l.jsxs("details",{ref:d,className:m,open:s,children:[l.jsxs("summary",{className:g?"collapsible-section-summary":"collapsible-card-summary",children:[l.jsxs("div",{className:"flex flex-col gap-1",children:[n?l.jsx("span",{className:"ui-kicker",children:n}):null,l.jsx("span",{className:"text-sm font-semibold tracking-wide",children:t})]}),v,g?l.jsx("span",{className:"collapsible-section-chevron","aria-hidden":"true",children:l.jsx(Ec,{size:16})}):null]}),l.jsx("div",{className:h,children:c})]})});function bd(e){try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return""}}function Qx({open:e,onClose:t,logs:n=[],onClear:r}){const s=u.useMemo(()=>(n||[]).map(o=>`[${bd(o.ts)}] ${String(o.level||"info").toUpperCase()} ${o.message}`).join(`
`),[n]);return l.jsx(kt,{open:e,onClose:t,title:"Run logs",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>{var o,i;try{(i=(o=navigator.clipboard)==null?void 0:o.writeText)==null||i.call(o,s||"")}catch{}},children:"Copy"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:r,children:"Clear"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:t,children:"Close"})]}),children:l.jsx("pre",{className:"runlog-pre",children:n!=null&&n.length?n.map((o,i)=>l.jsxs("div",{className:`runlog-line is-${o.level||"info"}`,children:[l.jsx("span",{className:"runlog-ts",children:bd(o.ts)}),l.jsx("span",{className:"runlog-msg",children:o.message})]},`${o.ts}-${i}`)):"No logs yet."})})}const Yx="cozygen_field_order_v1";function qx(e,t){if(!e)return t;try{const n=JSON.parse(e);return n&&typeof n=="object"?n:t}catch{return t}}function Xx(){if(typeof window>"u")return{};try{return qx(window.localStorage.getItem(Yx),{})}catch{return{}}}function Jx(e){if(Array.isArray(e))return{order:e.filter(Boolean),hidden:{}};if(!e||typeof e!="object")return{order:[],hidden:{}};const t=Array.isArray(e.order)?e.order.filter(Boolean):[],n=e.hidden&&typeof e.hidden=="object"?e.hidden:{};return{order:t,hidden:n}}function Zx(e){if(!e)return{order:[],hidden:{}};const n=Xx()[e];return Jx(n)}function ew(e,t){let n=Array.isArray(t)?t:[];if(!e||n.length===0)return n;const{order:r,hidden:s}=Zx(e);if(r&&r.length){const o=new Map;n.forEach(a=>{var d;const c=(d=a==null?void 0:a.inputs)==null?void 0:d.param_name;c&&!o.has(c)&&o.set(c,a)});const i=[];r.forEach(a=>{const c=o.get(a);c&&(i.push(c),o.delete(a))}),n.forEach(a=>{var d;const c=(d=a==null?void 0:a.inputs)==null?void 0:d.param_name;if(!c){i.push(a);return}o.has(c)&&(i.push(a),o.delete(c))}),n=i}return n=n.filter(o=>{var a;const i=(a=o==null?void 0:o.inputs)==null?void 0:a.param_name;return i?!s[i]:!0}),n}function tw(){const[e,t]=u.useState([]),[n,r]=u.useState(null),[s,o]=u.useState(!0),[i,a]=u.useState(null);u.useEffect(()=>{let d=!1;async function g(){o(!0),a(null);try{const m=await Rv();if(d)return;const h=(m==null?void 0:m.workflows)||[];t(h);let v=null;try{if(v=typeof window<"u"?sessionStorage.getItem("selectedWorkflow"):null,typeof window<"u")try{localStorage.removeItem("selectedWorkflow")}catch{}}catch{v=null}if(v&&h.includes(v))r(v);else if(h.length>0){r(h[0]);try{typeof window<"u"&&sessionStorage.setItem("selectedWorkflow",h[0])}catch{}}else r(null)}catch(m){if(d)return;console.error("Failed to load workflows",m),a(m)}finally{d||o(!1)}}return g(),()=>{d=!0}},[]);const c=u.useCallback(d=>{r(d);try{if(typeof window<"u"&&sessionStorage.setItem("selectedWorkflow",d),typeof window<"u")try{localStorage.removeItem("selectedWorkflow")}catch{}}catch{}},[]);return{workflows:e,selectedWorkflow:n,selectWorkflow:c,loading:s,error:i}}const nw={clip_name1:"clip",clip_name2:"clip",unet_name:"unet",vae_name:"vae",sampler_name:"sampler",scheduler:"scheduler"},rw=["CozyGenDynamicInput","CozyGenImageInput","CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput","CozyGenChoiceInput"];function sw(e){const[t,n]=u.useState(null),[r,s]=u.useState([]),[o,i]=u.useState({}),[a,c]=u.useState(!1),[d,g]=u.useState(null);u.useEffect(()=>{if(!e){n(null),s([]),i({});return}let w=!1;const N=new AbortController;async function j(){c(!0),g(null);try{typeof performance<"u"&&performance.mark&&performance.mark("cozygen:workflow:load")}catch{}try{const p=await Iv(e,{signal:N.signal});if(w)return;for(const P in p){const O=p[P];O.class_type==="CozyGenImageInput"&&!O.inputs.param_name&&(O.inputs.param_name="Image Input"),p[P].id=P}n(p);const f=Object.values(p).filter(P=>rw.includes(P.class_type)),y=await Promise.all(f.map(async P=>{const O=P.class_type==="CozyGenDynamicInput"&&P.inputs.param_type==="DROPDOWN",_=P.class_type==="CozyGenChoiceInput";if(O||_){const V=P.inputs.param_name;let A=P.inputs.choice_type||P.properties&&P.properties.choice_type;if(!A&&O&&(A=nw[V]),A)try{const W=await Tv(A,{signal:N.signal,refresh:A==="loras"});P.inputs.choices=W.choices||[]}catch(W){(W==null?void 0:W.name)!=="AbortError"&&console.error(`Choices for ${V} failed`,W),P.inputs.choices=[]}}return P}));if(w)return;s(y);const S=bx(e),R={};y.forEach(P=>{const O=P.inputs.param_name;if(!O)return;if(S[O]!==void 0){R[O]=S[O];return}let _;if(["CozyGenDynamicInput","CozyGenFloatInput","CozyGenIntInput","CozyGenStringInput"].includes(P.class_type)){if(_=P.inputs.default_value,P.class_type==="CozyGenIntInput"){const V=parseInt(_,10);_=Number.isNaN(V)?0:V}else if(P.class_type==="CozyGenFloatInput"){const V=parseFloat(_);_=Number.isNaN(V)?0:V}}else if(P.class_type==="CozyGenChoiceInput"){const V=P.inputs.choices||[];_=V.length?V[0]:""}else P.class_type,_="";R[O]=_}),i(R);try{typeof performance<"u"&&performance.measure&&(performance.mark("cozygen:workflow:ready"),performance.measure(`cozygen:workflow:ready:${e||"unknown"}`,"cozygen:workflow:load","cozygen:workflow:ready"))}catch{}}catch(p){if(w)return;console.error("Failed to load workflow",p),g(p),n(null),s([])}finally{w||c(!1)}}return j(),()=>{Ex(e),w=!0,N.abort()}},[e]);const m=u.useMemo(()=>r.filter(w=>w.class_type==="CozyGenImageInput"),[r]),h=m[0]||null,v=u.useCallback((w,N)=>{i(j=>{const p={...j,[w]:N};return e&&lo(e,p),p})},[e]);return{workflowData:t,dynamicInputs:r,imageInputs:m,primaryImageInput:h,formData:o,setFormData:i,handleFormChange:v,loading:a,error:d}}const Ed="::";function ys(e){const t={};return Object.entries(e||{}).forEach(([n,r])=>{const s=String(n||"").trim();if(!s||typeof r!="string")return;const o=r.trim();o&&(t[s]=o)}),t}function Rc(e){const t=new Map;return Object.entries(ys(e)).forEach(([n,r])=>{const s=n.toLowerCase();t.set(s,r),s.includes(Ed)&&t.set(s.replace(Ed,":"),r)}),t}function Pm(e,t){if(typeof e!="string"||!e.includes("$"))return e;const n=t instanceof Map?t:Rc(t);return n.size?e.replace(/\$([a-z0-9_:-]+)\$/gi,(r,s)=>{const o=n.get(s.toLowerCase());return typeof o=="string"?o:r}):e}function lw(e,t){const n=t instanceof Map?t:Rc(t);if(!n.size||!e||typeof e!="object")return e;let r=!1;const s={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"){const a=Pm(i,n);s[o]=a,a!==i&&(r=!0)}else s[o]=i}),r?s:e}function ow(e){return e?JSON.parse(JSON.stringify(e)):{}}function iw(e,t,n){const r=ow(e),s={...n||{}};if(!t||!Array.isArray(t))return{workflow:r,formData:s};for(const o of t){if(!o||!o.id||!o.inputs||!r[o.id])continue;const i=o.inputs.param_name;if(!i||o.class_type==="CozyGenImageInput")continue;let a=s[i];const c=r[o.id];if(!c||!c.inputs)continue;const d=o.class_type;a===void 0&&(d==="CozyGenChoiceInput"?a=o.inputs.value??o.inputs.default_choice??(o.inputs.choices&&o.inputs.choices[0])??"":a=o.inputs.default_value),a===void 0&&(a=""),s[i]=a,d==="CozyGenFloatInput"||d==="CozyGenIntInput"||d==="CozyGenStringInput"||d==="CozyGenDynamicInput"?c.inputs.default_value=a:d==="CozyGenChoiceInput"&&(c.inputs.value=a)}return{workflow:r,formData:s}}function aw({selectedWorkflow:e,workflowData:t,dynamicInputs:n,imageInputs:r,formData:s,setFormData:o,promptAliases:i=null}){const[a,c]=u.useState(!1),[d,g]=u.useState(!1),[m,h]=u.useState(0),[v,w]=u.useState(0),[N,j]=u.useState("Idle"),[p,f]=u.useState("idle"),[y,S]=u.useState([]),R=u.useRef({ts:0,value:0,max:0}),P=u.useRef(null),O=u.useRef(t),_=u.useRef(s),V=u.useRef(!1),A=u.useRef(0),W=u.useRef(0),ue=u.useRef("idle"),se=u.useRef(null),pe=u.useRef(null);u.useEffect(()=>{O.current=t},[t]),u.useEffect(()=>{V.current=d},[d]),u.useEffect(()=>{A.current=m},[m]),u.useEffect(()=>{W.current=v},[v]),u.useEffect(()=>{ue.current=p},[p]),u.useEffect(()=>{_.current=s},[s]);const q=()=>{se.current&&(clearTimeout(se.current),se.current=null)},le=()=>{pe.current&&(clearTimeout(pe.current),pe.current=null)},ae=u.useCallback(($,Z,H=null)=>{const D={ts:Date.now(),level:$||"info",message:String(Z||""),extra:H||null};S(U=>{const te=[...U||[],D];return te.length>250?te.slice(te.length-250):te})},[]),k=u.useCallback(()=>S([]),[]),I=()=>{if(!(typeof window>"u"||typeof window.dispatchEvent!="function"))try{window.dispatchEvent(new CustomEvent("cozygen:queue-finished"))}catch{}},E=()=>{le(),pe.current=setTimeout(()=>{V.current||(f("idle"),j("Idle"),h(0),w(0))},8e3)},L=u.useCallback(()=>{q(),c(!1),g(!1),h(0),w(0),j("Finished"),f("finished"),ae("success","Finished"),E(),I()},[ae]),M=u.useCallback(($="Error")=>{q(),c(!1),g(!1),j($),f("error"),ae("error",$||"Error"),E()},[ae]);u.useEffect(()=>{q(),!(!d||!v||v<=0||m<v)&&(se.current=setTimeout(()=>{const $=V.current,Z=A.current,H=W.current,D=ue.current;$&&H>0&&Z>=H&&D!=="finished"&&D!=="error"&&L()},800))},[d,m,v,L]),u.useEffect(()=>{const $=()=>{const Z=window.location.protocol==="https:"?"wss":"ws",H=window.location.host,D=Sc(),U=`${Z}://${H}/ws${D?`?token=${encodeURIComponent(D)}`:""}`,te=new WebSocket(U);P.current=te,te.onmessage=J=>{var Le,me,xe;if(typeof J.data!="string")return;let X;try{X=JSON.parse(J.data)}catch{return}const de=X.type;if(de==="cozygen_batch_ready"){L();return}if(de==="execution_success"||de==="execution_finished"){V.current&&L();return}if(de==="execution_error"||de==="execution_interrupted"){ae("error","Execution error"),M("Execution error");return}if(de==="status"){const K=X.data||{},ve=K.status||K,ke=ve.exec_info||K.exec_info||ve;if(ke&&V.current){const _e=ke.queue_remaining??ke.queue_pending??ke.queue_remaining_items??0;(ke.queue_running??ke.running??0)===0&&_e===0&&L()}return}if(de==="executing"){le(),f("running");const K=(Le=X.data)==null?void 0:Le.node,ve=O.current;if(K&&ve&&ve[K]){const ke=ve[K],_e=ke.title||ke.class_type||"Node";ae("info",`Executing: ${_e}`,{nodeId:K}),j(`Executing: ${_e}`)}else ae("info","Executing"),j("Executing");return}if(de==="progress"){const K=((me=X.data)==null?void 0:me.value)??0,ve=((xe=X.data)==null?void 0:xe.max)??0;h(K),w(ve);const ke=Date.now(),_e=R.current;ke-_e.ts>2500&&(K!==_e.value||ve!==_e.max)&&ve>0&&(R.current={ts:ke,value:K,max:ve},ae("info",`Progress: ${K}/${ve}`));return}},te.onclose=()=>{setTimeout($,1e3)}};return $(),()=>{q(),le(),P.current&&(P.current.onclose=null,P.current.close())}},[ae,M,L]);const z=u.useCallback(async($={})=>{if(!t)return;const{overrides:Z=null,persistFormState:H=!0}=$||{};q(),le(),c(!0),g(!0),j("Queuing prompt"),f("queued"),h(0),w(0),ae("info","Queuing prompt",{workflow:e||""});const D=_.current||{},U=Z?{...D,...Z||{}}:D,te=lw(U,i||{}),{workflow:J,formData:X}=iw(t,n||[],te||{}),de={...X,...U};H&&e&&lo(e,de),H&&o(de);const Le=r||[];for(const me of Le){if(!me||!me.id||!me.inputs)continue;const xe=me.inputs.param_name;if(!xe)continue;const K=de[xe];if(!K){alert(`Please upload or select an image for "${xe}" before generating.`),M("Missing image input");return}J[me.id]&&J[me.id].inputs&&(J[me.id].inputs.image_filename=K)}try{let me=J;if(i){const xe=K=>{if(typeof K=="string")return Pm(K,i);if(Array.isArray(K))return K.map(ve=>xe(ve));if(K&&typeof K=="object"){const ve=Array.isArray(K)?[]:{};return Object.entries(K).forEach(([ke,_e])=>{ve[ke]=xe(_e)}),ve}return K};try{me=xe(J)}catch{me=J}}Hv({workflowName:e,workflow:me,timestamp:Date.now()}),await um({prompt:me}),ae("info","Prompt queued")}catch(me){console.error("Failed to queue prompt",me),me!=null&&me.unauthorized?(ae("error","Session expired. Please sign in again."),M("Session expired. Please sign in again."),window.location.hash="#/login"):(ae("error","Error queuing prompt"),M("Error queuing prompt"))}},[t,n,r,i,e,o,M,ae]);return{isLoading:a,progressValue:m,progressMax:v,statusText:N,statusPhase:p,handleGenerate:z,logEntries:y,clearLogs:k}}const _m="cozygen_prompt_aliases",Rm="cozygen_alias_categories",Im="cozygen_alias_category_list";function Ld(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem(_m);return e?JSON.parse(e)||{}:{}}catch{return{}}}function di(e){if(!(typeof window>"u"))try{window.localStorage.setItem(_m,JSON.stringify(e||{}))}catch{}}function Pd(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem(Rm);return e?JSON.parse(e)||{}:{}}catch{return{}}}function fi(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Rm,JSON.stringify(e||{}))}catch{}}function _d(){if(typeof window>"u")return[];try{const e=window.localStorage.getItem(Im);return Array.isArray(JSON.parse(e))?JSON.parse(e):[]}catch{return[]}}function pi(e){if(!(typeof window>"u"))try{window.localStorage.setItem(Im,JSON.stringify(e||[]))}catch{}}function Tm(){const[e,t]=u.useState(()=>Ld()),[n,r]=u.useState(()=>Pd()),[s,o]=u.useState(()=>_d()),[i,a]=u.useState(!1),[c,d]=u.useState(!1),[g,m]=u.useState(null),h=u.useCallback(async()=>{a(!0),m(null);try{const j=await Av(),p=ys((j==null?void 0:j.items)||j||{}),f=(j==null?void 0:j.categories)||{},y=Array.isArray(j==null?void 0:j.categoryList)?j.categoryList:[];t(p),r(f),o(y),di(p),fi(f),pi(y)}catch(j){console.error("Failed to load prompt aliases",j),m(j);const p=ys(Ld()),f=Pd(),y=_d();t(p),r(f),o(y)}finally{a(!1)}},[]),v=u.useCallback(async j=>{const p=(j==null?void 0:j.items)||j||{},f=(j==null?void 0:j.categories)||n||{},y=Array.isArray(j==null?void 0:j.categoryList)&&j.categoryList.length?j.categoryList:s.length?s:Array.from(new Set(Object.values(f).filter(Boolean))),S=ys(p||{});d(!0),m(null);try{await $v({items:S,categories:f,categoryList:y}),t(S),r(f),o(y),di(S),fi(f),pi(y)}catch(R){throw console.error("Failed to save prompt aliases",R),m(R),di(S),fi(f),pi(y),R}finally{d(!1)}},[n,s]);u.useEffect(()=>{h()},[h]);const w=u.useMemo(()=>{const j=Rc(e),p=new Map(j);return Object.entries(n||{}).forEach(([f,y])=>{const S=String(y||"").trim();S&&(e!=null&&e[f])&&p.set(`${S}:${f}`,e[f])}),p},[e,n]),N=u.useMemo(()=>{const j=new Set,p=[];return w.forEach((f,y)=>{let S=y.includes("::")?y.replace("::",":"):y;const R=S.split(":");R.length>=3&&R[0]&&R[1]&&R[0].toLowerCase()===R[1].toLowerCase()&&(S=[R[0],...R.slice(2)].join(":"));const P=S.toLowerCase();j.has(P)||(j.add(P),p.push(S))}),p},[w]);return{aliases:e,aliasCategories:n,categoryList:s,aliasLookup:w,aliasOptions:N,loading:i,saving:c,error:g,refreshAliases:h,persistAliases:v}}const zm=u.createContext(null);function Am(){const e=u.useContext(zm);if(!e)throw new Error("useStudioContext must be used within a StudioProvider");return e}function cw({children:e}){const{workflows:t,selectedWorkflow:n,selectWorkflow:r,loading:s,error:o}=tw(),{workflowData:i,dynamicInputs:a,imageInputs:c,primaryImageInput:d,formData:g,setFormData:m,handleFormChange:h,loading:v,error:w}=sw(n),N=Tm(),j=u.useMemo(()=>{const ue=[];return Object.entries(N.aliases||{}).forEach(([se,pe])=>{const q=String(se).split("::"),le=q.length>1,ae=N.aliasCategories&&N.aliasCategories[se]||(le?q[0]:""),k=le?q.slice(1).join("::"):se,I={key:se,name:k,category:ae,text:pe,token:ae?`${ae}:${k}`:k};ue.push({...I,...Pc(I)})}),ue},[N.aliases,N.aliasCategories]),p=u.useMemo(()=>ew(n,a),[n,a]),f=u.useMemo(()=>{const ue=(p||a||[]).filter(k=>(k==null?void 0:k.class_type)!=="CozyGenImageInput"),se=/\b(checkpoint|ckpt|lora|model|vae|embedding|clip|sampler|scheduler|seed)\b/i,pe=k=>{const I=String((k==null?void 0:k.paramName)||"").toLowerCase(),E=String((k==null?void 0:k.label)||"").toLowerCase(),L=`${I} ${E}`,M=g==null?void 0:g[k==null?void 0:k.paramName],z=typeof M=="string"?M:"";let $=0;return L.includes("prompt")&&($+=100),L.includes("negative")&&L.includes("prompt")&&($-=15),k!=null&&k.multiline&&($+=10),z.includes("$")&&($+=20),se.test(L)&&($-=200),_c(z)&&($-=200),$};if(typeof(g==null?void 0:g.prompt)=="string")return"prompt";const q=ue.map(k=>os(k)).filter(k=>(k==null?void 0:k.paramType)==="STRING"&&(k==null?void 0:k.paramName));if(!q.length)return"prompt";let le=q[0],ae=pe(le);for(let k=1;k<q.length;k+=1){const I=q[k],E=pe(I);E>ae&&(le=I,ae=E)}return(le==null?void 0:le.paramName)||"prompt"},[a,g,p]),{isLoading:y,progressValue:S,progressMax:R,statusText:P,statusPhase:O,handleGenerate:_,logEntries:V,clearLogs:A}=aw({selectedWorkflow:n,workflowData:i,dynamicInputs:a,imageInputs:c,formData:g,setFormData:m,promptAliases:N.aliasLookup}),W=u.useMemo(()=>({workflows:t,selectedWorkflow:n,selectWorkflow:r,workflowsLoading:s,workflowsError:o,workflowData:i,dynamicInputs:a,orderedDynamicInputs:p,imageInputs:c,primaryImageInput:d,formData:g,setFormData:m,handleFormChange:h,workflowLoading:v,workflowError:w,promptFieldName:f,aliasOptions:N.aliasOptions,aliasCatalog:j,aliasLookup:N.aliasLookup,aliasCategories:N.aliasCategories,aliasLoading:N.loading,aliasSaving:N.saving,aliasError:N.error,refreshAliases:N.refreshAliases,persistAliases:N.persistAliases,isLoading:y,progressValue:S,progressMax:R,statusText:P,statusPhase:O,handleGenerate:_,logEntries:V,clearLogs:A}),[t,n,r,s,o,i,a,p,c,d,g,m,h,v,w,f,N.aliasOptions,N.aliasLookup,N.aliasCategories,j,N.loading,N.saving,N.error,N.refreshAliases,N.persistAliases,y,S,R,P,O,_,V,A]);return l.jsx(zm.Provider,{value:W,children:e})}const uw=u.memo(function({workflows:t,selectedWorkflow:n,onWorkflowChange:r,workflowData:s,presets:o,presetName:i,onPresetNameChange:a,selectedPresetId:c,onPresetSelect:d,onPresetSave:g,onPresetApply:m,onPresetDelete:h,presetStatus:v}){const w=o.length,N=w?`${w} saved`:"No presets yet",[j,p]=u.useState(!1),f=()=>p(S=>!S),y=()=>p(!1);return l.jsxs("div",{className:"controls-context",children:[l.jsxs("div",{className:"controls-context-row",children:[l.jsxs("div",{className:"controls-context-field",children:[l.jsx("label",{className:"controls-context-label",htmlFor:"workflow-select",children:"Workflow"}),l.jsxs("select",{id:"workflow-select",value:n||"",onChange:S=>r(S.target.value),className:"controls-context-select","aria-label":"Workflow",children:[l.jsx("option",{value:"",children:"Select workflow"}),t.map(S=>l.jsx("option",{value:S,children:S},S))]})]}),l.jsxs("div",{className:"controls-context-field",children:[l.jsx("label",{className:"controls-context-label",htmlFor:"preset-select",children:"Preset"}),l.jsxs("select",{id:"preset-select",value:c||"",onChange:S=>d(S.target.value),className:"controls-context-select","aria-label":"Workflow preset",disabled:!s,children:[l.jsx("option",{value:"",children:"Presets"}),o.map(S=>l.jsx("option",{value:S.id,children:S.name},S.id))]})]}),l.jsxs("div",{className:"controls-context-actions",children:[l.jsx("button",{type:"button",className:"controls-context-btn is-primary",onClick:m,disabled:!s||!c,children:"Apply"}),l.jsxs("div",{className:"controls-context-menu",children:[l.jsx("button",{type:"button",className:"controls-context-btn is-ghost",onClick:f,"aria-haspopup":"true","aria-expanded":j,children:""}),j?l.jsxs("div",{className:"controls-context-menu-items",role:"menu",children:[l.jsxs("div",{className:"controls-context-menu-row",children:[l.jsx("input",{type:"text",value:i,onChange:S=>a(S.target.value),className:"controls-context-input",placeholder:"Preset name","aria-label":"Preset name",disabled:!s}),l.jsx("button",{type:"button",className:"controls-context-menu-btn",onClick:()=>{g(),y()},disabled:!s||!i.trim(),role:"menuitem",children:"Save"})]}),l.jsx("button",{type:"button",className:"controls-context-menu-btn is-danger",onClick:()=>{h(),y()},disabled:!s||!c,role:"menuitem",children:"Delete"})]}):null]})]})]}),l.jsxs("div",{className:"controls-context-meta",children:[l.jsx("span",{children:N}),v?l.jsx("span",{className:"controls-context-status",children:v}):null]})]})});function dw(){const e=tn(),{workflows:t=[],selectedWorkflow:n,selectWorkflow:r,workflowData:s,dynamicInputs:o=[],imageInputs:i=[],formData:a,setFormData:c,handleFormChange:d,aliasOptions:g,aliasCatalog:m,isLoading:h,progressValue:v,progressMax:w,statusText:N,statusPhase:j,handleGenerate:p,logEntries:f,clearLogs:y,promptFieldName:S,orderedDynamicInputs:R}=Am(),P=u.useRef(null),O=u.useRef(null),[_,V]=u.useState(()=>_x()),[A,W]=u.useState(null),ue=(A==null?void 0:A.name)||"",se=u.useCallback(()=>W(null),[]),[pe,q]=u.useState(!1),[le,ae]=u.useState([]),[k,I]=u.useState([]),[E,L]=u.useState(""),[M,z]=u.useState(""),[$,Z]=u.useState(""),H=u.useRef(new Map),D=u.useCallback((re="")=>{const G=`?field=${encodeURIComponent(re||S||"prompt")}`;e(`/compose${G}`)},[e,S]);u.useEffect(()=>{if(j==="finished"&&typeof window<"u"){try{window.localStorage.setItem("cozygen_gallery_pending","1")}catch{}window.dispatchEvent(new Event("cozygen:gallery-pending"))}},[j]);const U=u.useCallback(re=>{!re||re===n||(n&&lo(n,a||{},{immediate:!0}),L(""),z(""),Z(""),r(re))},[a,n,r]),te=u.useCallback(re=>{z(re);const F=k.find(G=>G.id===re);L((F==null?void 0:F.name)||"")},[k]),J=i||[],X=!!(s&&n),de=J.length>0,Le=u.useCallback((re,F)=>{const G=H.current;F&&re&&G.set(re,F);const ne=le.length?le:(F==null?void 0:F.order)||[],fe=ne.length,he=fe>0?ne.indexOf(re):-1,Ee=he>0?ne[he-1]:null,Se=he>=0&&he<fe-1?ne[he+1]:null,tt=Ee?G.get(Ee):null,lt=Se?G.get(Se):null;return{...F,index:he>=0?he:0,total:fe,onPrev:tt?()=>W(Le(Ee,tt)):null,onNext:lt?()=>W(Le(Se,lt)):null,onRender:p}},[le,p]),me=u.useCallback(re=>{const F=re||[];ae(G=>G.length===F.length&&G.every((ne,fe)=>ne===F[fe])?G:F)},[]),xe=u.useCallback(re=>{const F=re||"";V(F),Px(F)},[]),K=u.useCallback(re=>{re!=null&&re.name&&W(Le(re.name,re))},[Le]),ve=u.useMemo(()=>{const F=[...R||[],...i||[]].map(G=>{var ne;return(ne=G==null?void 0:G.inputs)==null?void 0:ne.param_name}).filter(G=>G&&typeof G=="string");return new Set(F)},[R,i]),ke=u.useCallback(async re=>{if(!re){I([]),z("");return}try{const F=await Mv(re),G=Array.isArray(F==null?void 0:F.presets)?F.presets:[];I(G),z(ne=>ne&&G.some(fe=>fe.id===ne)?ne:""),setPresetMenuOpen(!1)}catch(F){console.error("Failed to load workflow presets",F),I([]),Z("Presets unavailable.")}},[]);u.useEffect(()=>{ke(n)},[n,ke]);const _e=u.useCallback(async()=>{if(!n)return;const re=E.trim();if(!re){Z("Name a preset to save.");return}const F={},G=ve;Object.entries(a||{}).forEach(([he,Ee])=>{(!G.size||G.has(he))&&(F[he]=Ee)});const ne=k.find(he=>he.id===M),fe=ne&&ne.name.toLowerCase()===re.toLowerCase()?ne.id:void 0;try{const he=await Ov(n,{id:fe,name:re,values:F}),Ee=Array.isArray(he==null?void 0:he.presets)?he.presets:[],Se=he==null?void 0:he.preset;I(Ee),Se!=null&&Se.id&&z(Se.id),Z(`Saved "${re}".`)}catch(he){console.error("Failed to save preset",he),Z("Save failed.")}},[ve,a,E,k,M,n]),Xe=u.useCallback(()=>{if(!n||!M)return;const re=k.find(ne=>ne.id===M);if(!(re!=null&&re.values))return;const F=ve,G={};Object.entries(re.values).forEach(([ne,fe])=>{(!F.size||F.has(ne))&&(G[ne]=fe)}),c(ne=>{const fe={...ne,...G};return lo(n,fe,{immediate:!0}),fe}),Z(`Applied "${re.name}".`)},[ve,k,M,n,c]),Je=u.useCallback(async()=>{if(!(!n||!M))try{const re=await Fv(n,M),F=Array.isArray(re==null?void 0:re.presets)?re.presets:[];I(F),z(""),Z("Preset deleted.")}catch(re){console.error("Failed to delete preset",re),Z("Delete failed.")}},[M,n]),be=u.useCallback(()=>{var re;return(re=A==null?void 0:A.render)==null?void 0:re.call(A,a)},[A,a]);return u.useEffect(()=>{const re=()=>{!X||h||p()};return window.addEventListener("cozygen:request-render",re),()=>window.removeEventListener("cozygen:request-render",re)},[p,X,h]),u.useEffect(()=>{const re=j==="queued"||j==="running"||h;try{window.dispatchEvent(new CustomEvent("cozygen:render-state",{detail:{active:re}}))}catch{}},[j,h]),!t||t.length===0?l.jsx("div",{className:"page-shell",children:l.jsx("div",{className:"neon-card px-3 py-3 sm:px-4 sm:py-4",children:l.jsx("p",{className:"text-sm text-[#9DA3FFCC]",children:"No workflows found. Drop a workflow file in CozyGen and refresh."})})}):l.jsxs("div",{className:"page-shell page-stack has-dock controls-page",children:[l.jsxs("div",{className:"page-bar controls-bar",children:[l.jsx("h1",{className:"page-bar-title",children:"Controls"}),l.jsx("div",{className:"page-bar-actions",children:_?l.jsxs("span",{className:"controls-meta",children:["Last: ",_]}):null})]}),l.jsxs("section",{className:"controls-board",children:[l.jsxs(Cd,{title:l.jsxs(l.Fragment,{children:[l.jsx(bc,{size:18,className:"inline-block mr-2 align-text-bottom"}),"Parameters"]}),bodyClassName:"control-shell controls-body",defaultOpen:!0,className:"controls-panel",children:[l.jsx(uw,{workflows:t,selectedWorkflow:n,onWorkflowChange:U,workflowData:s,presets:k,presetName:E,onPresetNameChange:L,selectedPresetId:M,onPresetSelect:te,onPresetSave:_e,onPresetApply:Xe,onPresetDelete:Je,presetStatus:$}),s?l.jsx(Kx,{workflowName:n,dynamicInputs:R,formData:a,onFormChange:d,parameterSectionRef:P,compactControls:!0,lastEditedParam:_,spotlightName:ue,onCloseSpotlight:se,onVisibleParamsChange:me,aliasOptions:g,aliasCatalog:m,onOpenComposer:D,onParamEdited:xe,onSpotlight:K}):l.jsxs("div",{className:"empty-state-inline",children:[l.jsx("span",{className:"empty-state-arrow",children:l.jsx(qv,{size:20})}),l.jsx("span",{children:"Select a workflow above to get started"})]})]}),de?l.jsx(Cd,{ref:O,className:"scroll-mt-24 controls-panel controls-subpanel",title:l.jsxs(l.Fragment,{children:[l.jsx(Kv,{size:18,className:"inline-block mr-2 align-text-bottom"}),"Images"]}),defaultOpen:!1,variant:"bare",children:s?l.jsx("div",{className:"grid grid-cols-1 gap-3 lg:grid-cols-2",children:J.map(re=>l.jsx(dx,{input:re,value:a[re.inputs.param_name]||"",onFormChange:d},re.id))}):null}):null]}),l.jsxs("div",{className:"controls-status-strip",children:[l.jsxs("div",{className:"controls-status-left",children:[l.jsx("span",{className:`controls-status-dot is-${j||"idle"}`,"aria-hidden":"true"}),l.jsxs("div",{className:"controls-status-text",children:[l.jsx("span",{className:"controls-status-phase",children:j||"idle"}),l.jsx("span",{className:"controls-status-msg",children:N||"Idle"})]})]}),l.jsxs("div",{className:"controls-status-right",children:[h&&w>0?l.jsx("div",{className:"controls-status-meter","aria-label":"Progress",children:l.jsx("div",{className:"controls-status-meter-fill",style:{width:`${Math.max(0,Math.min(100,Math.round((v||0)/w*100)))}%`}})}):null,l.jsx("button",{type:"button",className:"controls-status-btn",onClick:()=>q(!0),children:"Logs"})]})]}),l.jsx("section",{className:"dock-panel",children:l.jsx(rx,{busy:h,progressValue:v,progressMax:w,statusText:N,statusPhase:j,primaryLabel:"Render",onPrimary:p,primaryDisabled:!X,onLogs:()=>q(!0)})}),l.jsx(fx,{open:!!A,onClose:se,title:A==null?void 0:A.label,description:A==null?void 0:A.description,render:be,index:(A==null?void 0:A.index)??0,total:(A==null?void 0:A.total)??0,onPrev:(A==null?void 0:A.onPrev)||null,onNext:(A==null?void 0:A.onNext)||null,onRender:(A==null?void 0:A.onRender)||null,children:null}),l.jsx(Qx,{open:pe,onClose:()=>q(!1),logs:f,onClear:y})]})}function fw(){return l.jsx("div",{className:"page-shell page-stack",children:l.jsxs("section",{className:"home-hero",children:[l.jsx("span",{className:"home-hero-orb is-warm","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-orb is-cool","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-spark","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-beam","aria-hidden":"true"}),l.jsx("span",{className:"home-hero-ring","aria-hidden":"true"}),l.jsxs("div",{className:"home-hero-inner home-hero-full",children:[l.jsx("div",{className:"home-hero-kicker",children:"CozyGen Studio"}),l.jsx("h1",{className:"home-hero-title",children:"Creative studio for prompt-first storytelling"}),l.jsx("p",{className:"home-hero-description",children:"CozyGen is a quiet, cinematic workspace for people who sketch with wordsshape the mood, stage the scene, then send it down the render runway without losing your flow."}),l.jsxs("div",{className:"home-info-grid",children:[l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Control as composition"}),l.jsx("p",{children:"Dial the palette, tempo, and texture in one place. The controls read like a creative brief, not a checklist."})]}),l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Alias & tag storyboards"}),l.jsx("p",{children:"Save characters, atmospheres, and motifs as building blocks, then arrange them like panels in a storyboard."})]}),l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Gallery inspiration"}),l.jsx("p",{children:"Pin your strongest frames, compare variations, and carry the aesthetic through to your next scene."})]}),l.jsxs("article",{className:"home-info-card",children:[l.jsx("h3",{children:"Render runway"}),l.jsx("p",{children:"Stack iterations like takes on a set. Keep composing while the queue runs in the background."})]})]})]})]})})}function pw({subfolder:e,crumbs:t=[],dirChips:n=[],onBack:r,onRoot:s,onCrumb:o,onSelectDir:i}){return l.jsxs("div",{className:"gallery-nav",children:[l.jsx("div",{className:"gallery-crumbs",role:"navigation","aria-label":"Gallery path",children:t.map((a,c)=>l.jsxs(u.Fragment,{children:[l.jsx("span",{className:"text-[#6A6FA8]",children:"/"}),l.jsx("button",{type:"button",className:"gallery-chip-btn",onClick:()=>o==null?void 0:o(a.path),"aria-current":c===t.length-1?"page":void 0,children:a.name})]},a.path||a.name||c))}),n.length>0?l.jsx("div",{className:"gallery-dir-chips",children:n.map(a=>l.jsx("button",{type:"button",className:"gallery-chip-btn",onClick:()=>i==null?void 0:i(a.subfolder),children:a.filename||a.subfolder||"Collection"},a.subfolder||a.filename))}):null]})}const mw=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e),hw=({src:e,poster:t,autoPlay:n})=>{const r=u.useRef(null);return u.useEffect(()=>{const s=r.current;s&&(s.pause(),s.currentTime=0,s.load())},[e]),u.useEffect(()=>{const s=r.current;if(!s)return;let o;const i=()=>{const c=s.play();c&&typeof c.catch=="function"&&c.catch(()=>{})},a=()=>{s.pause()};return n?typeof window<"u"&&"IntersectionObserver"in window?(o=new IntersectionObserver(d=>{d.forEach(g=>{g.isIntersecting?i():a()})},{threshold:.65}),o.observe(s)):i():(a(),s.currentTime=0),()=>{o&&o.disconnect(),a()}},[n,e]),e?l.jsx("video",{ref:r,src:e,poster:t||void 0,muted:!0,playsInline:!0,loop:!0,preload:"metadata",className:"w-full h-auto max-h-[80vh] rounded-2xl object-contain bg-black/40"}):l.jsx("div",{className:"flex items-center justify-center py-16 text-[11px] text-[#9DA3FFCC]",children:"No preview available"})},Rd={contentVisibility:"auto",containIntrinsicSize:"260px 320px"};function gw({item:e,onSelect:t,variant:n="grid",autoPlay:r=!1}){if(!e)return null;const s=e.type==="directory",o=e.filename||"",i=e.subfolder||"",a=o||i||"Unknown",c=!!(e!=null&&e.meta&&(e.meta.model||e.meta.prompt||Array.isArray(e.meta.loras)&&e.meta.loras.length)),d=()=>{t&&t(e)},g=n==="feed"?768:384,m=!s&&o?`/cozygen/thumb?type=output&subfolder=${encodeURIComponent(i)}&filename=${encodeURIComponent(o)}&w=${g}`:null,h=!s&&o?(()=>{const w=e.type&&e.type!=="directory"?e.type:"output",N=e.mtime?`&v=${encodeURIComponent(String(e.mtime))}`:"";return`/view?filename=${encodeURIComponent(o)}&subfolder=${encodeURIComponent(i)}&type=${encodeURIComponent(w)}${N}`})():null,v=mw(o);if(s)return l.jsx("button",{type:"button",onClick:d,className:"gallery-dir-tile",style:Rd,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"h-7 w-7 rounded-lg bg-gradient-to-br from-[#6B5BFF] to-[#FF4F9A] opacity-80 group-hover:opacity-100 flex items-center justify-center text-[11px] text-white",children:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-[11px] font-medium text-[#E5E7FF] truncate",children:a}),l.jsx("div",{className:"text-[10px] text-[#9DA3FFCC] truncate",children:"Collection"})]})]})});if(n==="feed"){const w={contentVisibility:"auto",containIntrinsicSize:"520px 720px"};return l.jsxs("div",{className:"gallery-feed-item",style:w,children:[l.jsxs("button",{type:"button",onClick:d,className:"gallery-feed-media",children:[c?l.jsx("span",{className:"gallery-meta-badge",role:"img","aria-label":"Metadata available",title:"Metadata available",children:"i"}):null,l.jsx("div",{className:"relative w-full flex items-center justify-center bg-[#020312]",children:v?l.jsx(hw,{src:h,poster:m,autoPlay:r}):m?l.jsx("img",{src:m,alt:a,className:"w-full h-auto max-h-[80vh] rounded-2xl object-contain bg-black/40",loading:"lazy",decoding:"async"}):l.jsx("div",{className:"flex items-center justify-center py-16 text-[11px] text-[#9DA3FFCC]",children:"No preview available"})}),l.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-[#05071680] opacity-0 group-hover:opacity-100 transition-opacity"}),v&&l.jsx("div",{className:"pointer-events-none absolute left-2 top-2 rounded-md bg-[#050716CC] px-2 py-[1px] text-[10px] text-[#CFFAFE] border border-[#3EF0FF80]",children:"Video"})]}),l.jsx("div",{className:"gallery-feed-meta",children:l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"gallery-feed-title",children:a}),i&&l.jsx("div",{className:"gallery-feed-subfolder",children:i})]})})]})}return l.jsxs("button",{type:"button",onClick:d,className:"gallery-tile",style:Rd,children:[l.jsxs("div",{className:"gallery-tile-media",children:[c?l.jsx("span",{className:"gallery-meta-badge",role:"img","aria-label":"Metadata available",title:"Metadata available",children:"i"}):null,m?l.jsx("img",{src:m,alt:a,className:"gallery-tile-img",loading:"lazy",decoding:"async"}):l.jsx("div",{className:"gallery-tile-empty",children:"No preview"}),v&&l.jsx("div",{className:"gallery-badge",children:"Video"})]}),l.jsx("div",{className:"gallery-tile-caption",children:l.jsxs("div",{className:"flex items-center justify-between gap-2",children:[l.jsx("div",{className:"gallery-tile-title",children:a}),v&&l.jsx("span",{className:"gallery-tile-flag",children:"Vid"})]})})]})}const Id=u.memo(gw),yw=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e),vw=e=>{if(!e)return"";const t=e.filename||"",n=e.subfolder||"",r=e.type||"output",s=e.mtime?`&v=${encodeURIComponent(String(e.mtime))}`:"";return`/view?filename=${encodeURIComponent(t)}&subfolder=${encodeURIComponent(n)}&type=${encodeURIComponent(r)}${s}`};function xw({isOpen:e,media:t,onClose:n,onPrev:r,onNext:s,total:o=0,canPrev:i=!1,canNext:a=!1}){const c=u.useRef(!1),d=u.useRef(null),[g,m]=u.useState(!1);if(u.useEffect(()=>{if(!e)return;const f=y=>{y.key==="Escape"&&(n==null||n()),y.key==="ArrowLeft"&&i&&(r==null||r()),y.key==="ArrowRight"&&a&&(s==null||s())};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[e,n,s,r,i,a]),u.useEffect(()=>{var f,y;e&&((y=(f=d.current)==null?void 0:f.focus)==null||y.call(f))},[e]),u.useEffect(()=>{e&&m(!1)},[e,t]),!t||!e||typeof document>"u")return null;const h=vw(t),v=t.subfolder||"Gallery",w=yw(t.filename),N=o>1,j=(t==null?void 0:t.meta)||{},p=[j!=null&&j.model?{label:"Model",value:j.model}:null,j!=null&&j.prompt?{label:"Prompt",value:j.prompt,isPrompt:!0}:null,Array.isArray(j==null?void 0:j.loras)&&j.loras.length?{label:"LoRAs",value:j.loras.join(", ")}:null].filter(Boolean);return vc.createPortal(l.jsx("div",{className:"react-modal-overlay",role:"presentation",onPointerDown:f=>{c.current=f.target===f.currentTarget},onClick:f=>{c.current&&f.target===f.currentTarget&&(n==null||n())},children:l.jsx("div",{className:"react-modal-content",role:"dialog","aria-modal":"true","aria-label":"Preview",onClick:f=>f.stopPropagation(),children:l.jsxs("div",{className:"media-viewer-panel",children:[l.jsxs("header",{className:"media-viewer-head",children:[l.jsxs("div",{className:"media-viewer-meta",children:[l.jsx("div",{className:"media-viewer-title",title:t.filename,children:t.filename}),l.jsxs("div",{className:"media-viewer-sub",children:[l.jsx("span",{className:"media-chip",children:v}),l.jsx("span",{className:`media-chip ${w?"is-clip":"is-still"}`,children:w?"Video":"Image"})]})]}),l.jsxs("div",{className:"media-viewer-actions",children:[p.length?l.jsx("button",{type:"button",className:"media-btn ghost",onClick:()=>m(f=>!f),"aria-expanded":g,"aria-label":g?"Hide metadata":"Show metadata",children:g?"Hide metadata":"Metadata"}):null,l.jsx("a",{href:h,target:"_blank",rel:"noreferrer",className:"media-btn",children:"Open"}),l.jsx("button",{ref:d,type:"button",className:"media-btn solid",onClick:n,children:"Close"})]})]}),g&&p.length?l.jsx("div",{className:"media-viewer-info","aria-label":"Generation metadata",children:p.map(f=>l.jsxs("div",{className:"media-info-row",children:[l.jsx("span",{className:"media-info-label",children:f.label}),l.jsx("span",{className:`media-info-value ${f.isPrompt?"is-prompt":""}`,children:f.value})]},f.label))}):null,l.jsxs("div",{className:"media-viewer-stage",children:[N?l.jsx("button",{type:"button",className:`media-stage-nav is-left ${i?"":"is-disabled"}`,onClick:r,"aria-label":"Previous",disabled:!i,children:""}):null,l.jsx("div",{className:"media-viewer-frame",children:w?l.jsx("video",{src:h,controls:!0,className:"media-viewer-media",autoPlay:!0,muted:!0,playsInline:!0}):l.jsx("img",{src:h,alt:t.filename,className:"media-viewer-media"})}),N?l.jsx("button",{type:"button",className:`media-stage-nav is-right ${a?"":"is-disabled"}`,onClick:s,"aria-label":"Next",disabled:!a,children:""}):null]})]})})}),document.body)}const ww=(e="")=>e.startsWith("."),jw=(e="")=>/\.(png|jpe?g|gif|webp|bmp|tif?f)$/i.test(e),Sw=(e="")=>/\.(mp4|webm|mov|mkv)$/i.test(e);function Nw(){const e=(z,$="")=>{try{return typeof window<"u"&&localStorage.getItem(z)||$}catch{return $}},t=(z,$)=>{try{typeof window<"u"&&localStorage.setItem(z,$)}catch{}},[n,r]=u.useState(e("galleryPath","")),[s,o]=u.useState([]),[i,a]=u.useState(!1),[c,d]=u.useState(!1),[g,m]=u.useState(1),[h,v]=u.useState(1),[w,N]=u.useState(()=>{const z=e("galleryPageSize","30"),$=parseInt(z,10);return Number.isFinite($)?$:30}),[j,p]=u.useState("all"),[f,y]=u.useState(!1),[S,R]=u.useState(""),[P,O]=u.useState(()=>e("galleryRecursive","0")==="1"),[_,V]=u.useState(0);u.useEffect(()=>{let z=!1;const $=new AbortController;return(async()=>{a(!0);try{typeof performance<"u"&&performance.mark&&performance.mark("cozygen:gallery:fetch")}catch{}try{const H=await dm(n,g,w,f,P,j,_,{signal:$.signal,includeMeta:!0});if(z)return;H&&H.items?(o(H.items),v(H.total_pages||1)):(o([]),v(1));try{typeof performance<"u"&&performance.measure&&(performance.mark("cozygen:gallery:ready"),performance.measure("cozygen:gallery:first-paint","cozygen:gallery:fetch","cozygen:gallery:ready"))}catch{}}catch(H){if((H==null?void 0:H.name)==="AbortError")return;console.error("Failed to load gallery",H),z||(o([]),v(1))}finally{!z&&!$.signal.aborted&&(a(!1),d(!0))}})(),t("galleryPath",n),t("galleryPageSize",String(w)),()=>{z=!0,$.abort()}},[n,g,w,_,f,P,j]);const A=u.useMemo(()=>{if(!n)return[];const z=n.replace(/\\/g,"/").split("/").filter(Boolean),$=[];for(let Z=0;Z<z.length;Z++)$.push({name:z[Z],path:z.slice(0,Z+1).join("/")});return $},[n]),W=u.useMemo(()=>s.filter(z=>z.type==="directory").map(z=>({filename:z.filename,subfolder:z.subfolder})),[s]),ue=u.useMemo(()=>{const z=(S||"").trim().toLowerCase();return s.filter($=>{const Z=($.filename||"").toLowerCase();return!(!f&&ww(Z)||$.type!=="directory"&&(j==="image"&&!jw(Z)||j==="video"&&!Sw(Z))||z&&!Z.includes(z))})},[s,f,j,S]),se=u.useMemo(()=>ue.filter(z=>z.type!=="directory"),[ue]),pe=u.useCallback(()=>{if(!n)return;const z=n.replace(/\\/g,"/").lastIndexOf("/"),$=z===-1?"":n.slice(0,z);r($),m(1)},[n]),q=u.useCallback(()=>{r(""),m(1)},[]),le=u.useCallback(z=>{r(z||""),m(1)},[]),ae=u.useCallback(z=>{r(z),m(1)},[]),k=u.useCallback(z=>{const $=parseInt(String(z),10)||30;N($),m(1)},[]),I=u.useCallback(z=>{p(z),m(1)},[]),E=u.useCallback(z=>{const $=!!z;O($),m(1),t("galleryRecursive",$?"1":"0")},[]),L=u.useCallback(z=>{R(z),m(1)},[]),M=u.useCallback(()=>{V(z=>z+1)},[]);return u.useEffect(()=>{const z=()=>M();return typeof window<"u"&&window.addEventListener&&window.addEventListener("cozygen:queue-finished",z),()=>{typeof window<"u"&&window.removeEventListener&&window.removeEventListener("cozygen:queue-finished",z)}},[M]),u.useEffect(()=>{if(typeof window>"u")return;let z=!1,$,Z;const H=()=>{Z&&(clearTimeout(Z),Z=null)},D=(te=8e3)=>{H(),Z=window.setTimeout(()=>{z||(M(),D(8e3))},te)};return(()=>{if(!("EventSource"in window)){D();return}const te=new URLSearchParams({subfolder:n||"",recursive:P?"1":"0",show_hidden:f?"1":"0"});$=new EventSource(`/cozygen/api/gallery/stream?${te.toString()}`),$.onmessage=()=>{z||M()},$.onerror=()=>{$&&($.close(),$=null),D()}})(),()=>{z=!0,H(),$&&($.close(),$=null)}},[n,P,f,M]),{path:n,items:s,loading:i,hasLoaded:c,page:g,totalPages:h,perPage:w,kind:j,showHidden:f,query:S,recursive:P,crumbs:A,dirChips:W,filtered:ue,mediaItems:se,setPage:m,setPerPage:k,setShowHidden:y,setQuery:L,setKind:I,setRecursive:E,goBack:pe,goRoot:q,goToPath:le,selectDir:ae,refresh:M}}function kw(e){const[t,n]=u.useState(!1),[r,s]=u.useState(null);u.useEffect(()=>{if(!e||e.length===0){s(null),n(!1);return}s(v=>v==null?v:v>=e.length?e.length-1:v)},[e]);const o=u.useCallback(v=>{if(!e||!e.length||!v)return;const w=e.indexOf(v);w!==-1&&(s(w),n(!0))},[e]),i=u.useCallback(()=>{n(!1),s(null)},[]),a=u.useCallback(()=>{!e||!e.length||s(v=>v==null||v>=e.length-1?v:v+1)},[e]),c=u.useCallback(()=>{!e||!e.length||s(v=>v==null||v<=0?v:v-1)},[e]),d=r!=null&&r>=0&&e&&r<e.length?e[r]:null,g=(e==null?void 0:e.length)||0,m=r!==null&&r>0,h=r!==null&&r<g-1;return{viewerOpen:t,viewerIndex:r,currentMedia:d,total:g,canPrev:m,canNext:h,open:o,close:i,next:a,prev:c,setViewerOpen:n}}const Td="cozygen_gallery_view_mode",zd="cozygen_gallery_feed_autoplay";function Cw(e,t){const n=u.useRef(null),[r,s]=u.useState(0),[o,i]=u.useState({width:0,cols:0,top:0,viewport:typeof window<"u"&&window.innerHeight||800}),a=h=>{if(!h||typeof window>"u")return null;let v=h.parentElement;for(;v;){const w=window.getComputedStyle(v);if(w.overflowY==="auto"||w.overflowY==="scroll")return v;v=v.parentElement}return window};u.useEffect(()=>{if(!t)return;const h=n.current;if(!h||typeof window>"u"||typeof ResizeObserver>"u")return;const v=a(h)||window,w=()=>{const f=h.getBoundingClientRect(),y=f.width||h.clientWidth||1,S=Math.max(1,Math.floor(y/160)),R=v===window?window.scrollY||0:v.scrollTop||0,P=v===window?{top:0}:v.getBoundingClientRect(),O=v===window?f.top+(window.scrollY||0):f.top-P.top+R,_=v===window?window.innerHeight||800:v.clientHeight||800;i(V=>V.width===y&&V.cols===S&&V.top===O&&V.viewport===_?V:{width:y,cols:S,top:O,viewport:_}),s(R)};w();const N=new ResizeObserver(()=>w());N.observe(h),window.addEventListener("resize",w);let j=!1;const p=()=>{j||(j=!0,window.requestAnimationFrame(()=>{j=!1;const f=v===window?window.scrollY||0:v.scrollTop||0;s(f)}))};return v.addEventListener("scroll",p,{passive:!0}),()=>{N.disconnect(),window.removeEventListener("resize",w),v.removeEventListener("scroll",p)}},[t]);const c=t&&o.cols>0&&e.length>60,{visibleItems:d,topSpacer:g,bottomSpacer:m}=u.useMemo(()=>{if(!c)return{visibleItems:e,topSpacer:0,bottomSpacer:0};const h=o.width/o.cols,v=Math.max(180,Math.ceil(h*1.25)+32),w=Math.ceil(e.length/o.cols),N=Math.max(0,r-o.top),j=Math.max(0,Math.floor(N/v)-2),p=Math.min(w,Math.ceil((N+o.viewport)/v)+2),f=j*o.cols,y=Math.min(e.length,p*o.cols);return{visibleItems:e.slice(f,y),topSpacer:j*v,bottomSpacer:Math.max(0,(w-p)*v)}},[e,o,r,c]);return{containerRef:n,visibleItems:d,topSpacer:g,bottomSpacer:m,virtualized:c}}function bw(){const{path:e,loading:t,hasLoaded:n,page:r,totalPages:s,perPage:o,kind:i,showHidden:a,recursive:c,crumbs:d,dirChips:g,filtered:m,mediaItems:h,setPage:v,setPerPage:w,setShowHidden:N,setKind:j,setRecursive:p,goBack:f,goRoot:y,goToPath:S,selectDir:R,refresh:P}=Nw(),{viewerOpen:O,currentMedia:_,total:V,canPrev:A,canNext:W,open:ue,close:se,next:pe,prev:q}=kw(h),[le,ae]=u.useState(()=>{if(typeof window>"u")return"grid";const K=window.localStorage.getItem(Td);return K==="feed"||K==="grid"?K:"grid"}),[k,I]=u.useState(()=>typeof window>"u"?!1:window.localStorage.getItem(zd)==="true");u.useEffect(()=>{try{window.localStorage.setItem(Td,le)}catch{}},[le]),u.useEffect(()=>{try{window.localStorage.setItem(zd,k?"true":"false")}catch{}},[k]);const E=u.useCallback(K=>{if(K.type==="directory"){R(K.subfolder);return}ue(K)},[ue,R]),L=le==="grid",[M,z]=u.useState(!1),$=u.useMemo(()=>[{key:"all",label:"All"},{key:"image",label:"Images"},{key:"video",label:"Videos"}],[]),Z=u.useMemo(()=>[{key:"grid",ariaLabel:"Grid view",icon:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("rect",{x:"1",y:"1",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"9",y:"1",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"1",y:"9",width:"6",height:"6",rx:"1"}),l.jsx("rect",{x:"9",y:"9",width:"6",height:"6",rx:"1"})]})},{key:"feed",ariaLabel:"Feed view",icon:l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:[l.jsx("rect",{x:"2",y:"1",width:"12",height:"5",rx:"1"}),l.jsx("rect",{x:"2",y:"8",width:"12",height:"5",rx:"1"})]})}],[]),H=K=>K.type==="directory"?`dir:${K.subfolder||K.filename}`:`${K.subfolder||""}|${K.filename}`;u.useEffect(()=>{try{window.localStorage.setItem("cozygen_gallery_pending","0")}catch{}window.dispatchEvent(new Event("cozygen:gallery-viewed"))},[]);const D=t&&!n,U=t&&n,te=`${m.length} items`,J=D?"Loading":te,{containerRef:X,visibleItems:de,topSpacer:Le,bottomSpacer:me,virtualized:xe}=Cw(m,L);return l.jsxs("div",{className:"page-shell gallery-shell",children:[l.jsx("div",{className:"screen-sticky gallery-header",children:l.jsxs("div",{className:"gallery-header-inner",children:[l.jsxs("div",{className:"page-bar gallery-bar",children:[l.jsx("h1",{className:"page-bar-title",children:"Gallery"}),l.jsxs("div",{className:"page-bar-actions",children:[l.jsx("span",{className:"gallery-status",children:J}),l.jsx(Rr,{ariaLabel:"View mode",value:le,onChange:ae,layout:"icon",size:"sm",items:Z}),l.jsx("button",{type:"button",className:"page-bar-btn gallery-filter-btn",onClick:()=>z(!0),children:"Filters"})]})]}),l.jsx("div",{className:"gallery-nav-row",children:l.jsx(pw,{subfolder:e,crumbs:d,dirChips:g,onBack:f,onRoot:y,onCrumb:K=>S(K),onSelectDir:K=>R(K)})}),l.jsxs("div",{className:"gallery-toolbar",children:[l.jsx("div",{className:"gallery-toolbar-left",children:l.jsx(Rr,{ariaLabel:"Filter by type",value:i,onChange:j,size:"sm",items:$})}),l.jsx("div",{className:"gallery-toolbar-right",children:l.jsxs("div",{className:"gallery-options",children:[l.jsx("button",{type:"button",className:`gallery-option-btn ${c?"is-active":""}`,onClick:()=>p(K=>!K),title:c?"Showing subfolders":"This folder only",children:c?l.jsx(sd,{size:16}):l.jsx(ld,{size:16})}),l.jsx("button",{type:"button",className:`gallery-option-btn ${a?"is-active":""}`,onClick:()=>N(K=>!K),title:a?"Showing hidden":"Hiding hidden",children:a?l.jsx(od,{size:16}):l.jsx(id,{size:16})}),le==="feed"&&l.jsx("button",{type:"button",className:`gallery-option-btn ${k?"is-active":""}`,onClick:()=>I(K=>!K),title:k?"Autoplay on":"Autoplay off",children:k?l.jsx(ad,{size:16}):l.jsx(cd,{size:16})}),l.jsx("button",{type:"button",className:"gallery-option-btn",onClick:P,title:"Refresh",children:l.jsx(ha,{size:16})})]})})]}),l.jsxs("div",{className:"gallery-pagination",children:[l.jsxs("div",{className:"gallery-pagination-info",children:[U?l.jsx("span",{className:"loading-spinner","aria-hidden":"true"}):null,l.jsx("span",{className:D?"gallery-loading-text":"",children:J})]}),l.jsxs("div",{className:"gallery-pagination-controls",children:[l.jsx("button",{type:"button",className:"gallery-page-btn",onClick:()=>v(K=>Math.max(1,K-1)),disabled:r<=1||t,"aria-label":"Previous page",children:l.jsx(Qv,{size:16})}),l.jsxs("span",{className:"gallery-page-indicator",children:[r," / ",s]}),l.jsx("button",{type:"button",className:"gallery-page-btn",onClick:()=>v(K=>K<s?K+1:K),disabled:r>=s||t,"aria-label":"Next page",children:l.jsx(Ec,{size:16})}),l.jsxs("select",{value:o,onChange:K=>w(parseInt(K.target.value,10)||30),className:"gallery-page-size","aria-label":"Items per page",children:[l.jsx("option",{value:15,children:"15"}),l.jsx("option",{value:30,children:"30"}),l.jsx("option",{value:60,children:"60"}),l.jsx("option",{value:120,children:"120"})]})]})]})]})}),D&&m.length===0?l.jsx("div",{className:"gallery-grid-responsive",children:Array.from({length:8}).map((K,ve)=>l.jsxs("div",{className:"gallery-skeleton-item",children:[l.jsx("div",{className:"gallery-skeleton-thumb skeleton"}),l.jsx("div",{className:"gallery-skeleton-label skeleton skeleton-text"})]},ve))}):m.length===0?l.jsxs("div",{className:"gallery-empty",children:[l.jsx("div",{className:"gallery-empty-icon",children:l.jsx(Yv,{size:48})}),l.jsx("div",{className:"gallery-empty-title",children:"No media found"}),l.jsx("div",{className:"gallery-empty-desc",children:i!=="all"?`No ${i}s match your filters. Try selecting "All" or adjusting your search.`:"This folder is empty. Render something new or navigate to a different folder."})]}):L?l.jsx("div",{className:"w-full overflow-hidden",children:l.jsxs("div",{className:"gallery-grid-responsive",ref:X,children:[xe&&Le>0?l.jsx("div",{"aria-hidden":!0,style:{gridColumn:"1 / -1",height:`${Le}px`}}):null,de.map(K=>l.jsx(Id,{item:K,onSelect:E,variant:"grid",autoPlay:!1},H(K))),xe&&me>0?l.jsx("div",{"aria-hidden":!0,style:{gridColumn:"1 / -1",height:`${me}px`}}):null]})}):l.jsx("div",{className:"flex flex-col gap-6 items-center",children:m.filter(K=>K.type!=="directory").map(K=>l.jsx("div",{className:"w-full flex justify-center",children:l.jsx(Id,{item:K,onSelect:E,variant:"feed",autoPlay:k})},H(K)))}),l.jsx(xw,{isOpen:O,media:_,onClose:se,onPrev:q,onNext:pe,total:V,canPrev:A,canNext:W}),l.jsx(kt,{open:M,onClose:()=>z(!1),title:"Gallery filters",footer:l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>z(!1),children:"Done"}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Type"}),l.jsx(Rr,{ariaLabel:"Filter by type",value:i,onChange:j,size:"sm",items:$})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Options"}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("button",{type:"button",className:`ui-button is-compact ${c?"is-primary":"is-muted"}`,onClick:()=>p(K=>!K),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[c?l.jsx(sd,{size:14}):l.jsx(ld,{size:14}),l.jsx("span",{children:c?"Subfolders":"This folder"})]})}),l.jsx("button",{type:"button",className:`ui-button is-compact ${a?"is-primary":"is-muted"}`,onClick:()=>N(K=>!K),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[a?l.jsx(od,{size:14}):l.jsx(id,{size:14}),l.jsx("span",{children:a?"Hidden on":"Hidden off"})]})}),le==="feed"?l.jsx("button",{type:"button",className:`ui-button is-compact ${k?"is-primary":"is-muted"}`,onClick:()=>I(K=>!K),children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[k?l.jsx(ad,{size:14}):l.jsx(cd,{size:14}),l.jsx("span",{children:k?"Autoplay":"No autoplay"})]})}):null,l.jsx("button",{type:"button",className:"ui-button is-compact is-ghost",onClick:P,children:l.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[l.jsx(ha,{size:14}),l.jsx("span",{children:"Refresh"})]})})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Page size"}),l.jsxs("select",{value:o,onChange:K=>w(parseInt(K.target.value,10)||30),className:"sheet-select ui-control ui-select","aria-label":"Items per page",children:[l.jsx("option",{value:15,children:"15"}),l.jsx("option",{value:30,children:"30"}),l.jsx("option",{value:60,children:"60"}),l.jsx("option",{value:120,children:"120"})]}),l.jsxs("div",{className:"sheet-hint",children:[U?l.jsx("span",{className:"loading-spinner","aria-hidden":"true"}):null,l.jsxs("span",{children:[J,"  Page ",r," of ",s]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>v(K=>Math.max(1,K-1)),disabled:r<=1||t,children:"Prev"}),l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>v(K=>K<s?K+1:K),disabled:r>=s||t,children:"Next"})]})]})]})})]})}const io="::";function Ew(){return`alias-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,6)}`}function sn(e){return String(e||"").split(",").map(t=>t.trim()).filter(Boolean)}function Ro(e){return(e||[]).map(t=>String(t||"").trim()).filter(Boolean).join(", ")}function Lw(e,t){const n=String(t||"").trim();if(!n)return String(e||"");const r=sn(e);return new Set(r.map(o=>o.toLowerCase())).has(n.toLowerCase())||r.push(n),Ro(r)}function Pw(e,t){const n=String(t||"").trim().toLowerCase();if(!n)return String(e||"");const r=sn(e).filter(s=>s.toLowerCase()!==n);return Ro(r)}function _w(e,t,n){const r=String(t||"").trim().toLowerCase(),s=String(n||"").trim();if(!r||!s)return String(e||"");const o=sn(e).map(c=>c.toLowerCase()===r?s:c),i=new Set,a=[];return o.forEach(c=>{const d=String(c||"").trim().toLowerCase();!d||i.has(d)||(i.add(d),a.push(c))}),Ro(a)}function mi(e,t={}){return Object.entries(ys(e)).map(([n,r],s)=>{const[o,i]=String(n).includes(io)?n.split(io):["",n],a=i||n,c=t[n]||t[a]||o||"";return{id:`existing-${s}-${n}`,name:a,text:r,category:c}})}function Ad(e){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.name)||"").trim(),s=typeof(n==null?void 0:n.text)=="string"?n.text.trim():"";if(r&&s){const o=String((n==null?void 0:n.category)||"").trim(),i=o?`${o}${io}${r}`:r;t[i]=s}}),t}function $d(e){const t={};return e.forEach(n=>{const r=String((n==null?void 0:n.name)||"").trim(),s=typeof(n==null?void 0:n.category)=="string"?n.category.trim():"";if(r){const o=s?`${s}${io}${r}`:r;t[o]=s}}),t}function Rw(){var lt;const e=tn(),{aliases:t,aliasCategories:n,categoryList:r,loading:s,saving:o,error:i,persistAliases:a}=Tm(),[c,d]=u.useState(()=>mi(t,n)),[g,m]=u.useState(()=>Array.isArray(r)?r:[]),[h,v]=u.useState("All"),[w,N]=u.useState("All"),[j,p]=u.useState(""),[f,y]=u.useState(""),[S,R]=u.useState(!1),[P,O]=u.useState(!1),[_,V]=u.useState({loading:!1,invalid:[],suggestions:{}}),[A,W]=u.useState(!1),[ue,se]=u.useState(null),[pe,q]=u.useState(""),le=u.useRef(null),ae=u.useRef(null),[k,I]=u.useState(!1),[E,L]=u.useState(""),[M,z]=u.useState(""),$=Nc("(min-width: 1024px)");u.useEffect(()=>{if(k)return;const x=mi(t,n||{});d(x),f&&!x.some(b=>b.id===f)&&(y(""),R(!1))},[n,k]),u.useEffect(()=>{k||Array.isArray(r)&&m(r)},[r,k]),u.useEffect(()=>{if(k)return;const x=mi(t,n||{});d(x),f&&!x.some(b=>b.id===f)&&(y(""),R(!1))},[t,n,f,k]);const Z=u.useMemo(()=>Ad(c),[c]),H=()=>{const x={id:Ew(),name:"",text:"",category:""};d(b=>[...b,x]),y(x.id),q(""),I(!0),R(!0)},D=(x,b,B)=>{I(!0),d(Q=>Q.map((ie,ee)=>ee===x?{...ie,[b]:B}:ie))},U=x=>{I(!0),d(b=>{var Q;const B=b.filter((ie,ee)=>ee!==x);return(B.length===0||f===((Q=b[x])==null?void 0:Q.id))&&(y(""),R(!1)),B})},te=async()=>{q("");try{const x=new Map;if(c.forEach(B=>{sn((B==null?void 0:B.text)||"").forEach(ie=>{const ee=String(ie).toLowerCase();ee&&(x.has(ee)||x.set(ee,{tag:ie,rows:[]}),x.get(ee).rows.push(B.id))})}),x.size){const B=Array.from(x.values()).map(Q=>Q.tag);try{const Q=await ai(B),ie=Array.isArray(Q==null?void 0:Q.invalid)?Q.invalid:[],ee=new Set(ie.map(Ne=>String(Ne).toLowerCase()));if(ee.size){const Ne=c.map(we=>{const Te=sn((we==null?void 0:we.text)||"").filter(Be=>ee.has(String(Be).toLowerCase()));if(!Te.length)return null;const mt=we.category?`${we.category}:${we.name}`:we.name;return{id:we.id,token:mt,friendlyName:Pl({name:we.name})||we.name||"Untitled",category:we.category||"",invalid:Te}}).filter(Boolean);se({invalid:ie,invalidLower:Array.from(ee),rows:Ne,suggestions:(Q==null?void 0:Q.suggestions)||{}}),W(!0),q("Fix invalid tags before saving.");return}}catch(Q){console.error("Unable to validate tags",Q),q("Unable to validate tags right now.");return}}const b=$d(c);await a({items:Z,categories:b,categoryList:g}),I(!1),q("Saved.")}catch{q("Unable to save right now.")}},J=u.useMemo(()=>{const x=j.trim().toLowerCase(),B=[...c.filter(Q=>{const ie=(Q.category||"").trim();if(h===""&&ie||h!=="All"&&h!==""&&ie!==h)return!1;const ee=ls(Q.name||"",Q.category||"");if(w!=="All"&&ee!==w)return!1;if(!x)return!0;const Ne=ie?`${ie}:${Q.name}`:Q.name;return(Q.name||"").toLowerCase().includes(x)||(Q.text||"").toLowerCase().includes(x)||(ie||"").toLowerCase().includes(x)||(Ne||"").toLowerCase().includes(x)})];return B.sort((Q,ie)=>(Q.name||"").localeCompare(ie.name||"")),B},[c,h,w,j]),X=J.find(x=>x.id===f)||c.find(x=>x.id===f)||null,de=X?X.category?`${X.category}:${X.name}`:X.name||"alias":"",Le=X&&(Pl({name:X.name})||X.name)||"Alias",me=de?`$${de}$`:"$alias$",xe=J.length?J:c,K=X?xe.findIndex(x=>x.id===X.id):-1,ve=K>0?xe[K-1]:null,ke=K>=0&&K<xe.length-1?xe[K+1]:null,_e=x=>{x&&(y(x.id),R(!0),q(""))},Xe=u.useMemo(()=>{const x=new Set(g||[]);return c.forEach(b=>{b.category&&x.add(b.category)}),Array.from(x).sort((b,B)=>b.localeCompare(B))},[c,g]),Je=u.useMemo(()=>{const x=new Set;return c.forEach(b=>{const B=(b.category||"").trim();if(h===""&&B||h!=="All"&&h!==""&&B!==h)return;const Q=ls(b.name||"",b.category||"");Q&&x.add(Q)}),Array.from(x).sort((b,B)=>b.localeCompare(B))},[c,h]);u.useEffect(()=>{w!=="All"&&(Je.includes(w)||N("All"))},[Je,w]),u.useEffect(()=>{z("")},[f]);const be=u.useMemo(()=>sn((X==null?void 0:X.text)||""),[X==null?void 0:X.text]),re=u.useMemo(()=>{const x=Array.isArray(_==null?void 0:_.invalid)?_.invalid:[];return new Set(x.map(b=>String(b).toLowerCase()))},[_]);u.useEffect(()=>{if(!X||!(S||$))return;const x=be,b=[],B=new Set;if(x.forEach(ee=>{const Ne=String(ee).toLowerCase();!Ne||B.has(Ne)||(B.add(Ne),b.push(ee))}),!b.length){V({loading:!1,invalid:[],suggestions:{}});return}let Q=!1;const ie=window.setTimeout(async()=>{V(ee=>({...ee,loading:!0}));try{const ee=await ai(b);if(Q)return;V({loading:!1,invalid:Array.isArray(ee==null?void 0:ee.invalid)?ee.invalid:[],suggestions:(ee==null?void 0:ee.suggestions)||{}})}catch(ee){console.error("Failed to validate tags",ee),Q||V({loading:!1,invalid:[],suggestions:{}})}},260);return()=>{Q=!0,window.clearTimeout(ie)}},[S,$,X,be]);const F=x=>{var B,Q;const b=String(x||"");if(!b)return!1;try{return(Q=(B=navigator.clipboard)==null?void 0:B.writeText)==null||Q.call(B,b),!0}catch{return!1}},G=(x="")=>{const b=x?`?q=${encodeURIComponent(x)}`:"";e(`/tags${b}`)},ne=()=>{var Q;if(!X)return;const x=sn(M);if(!x.length){q("Enter a tag to add.");return}const b=c.findIndex(ie=>ie.id===X.id);if(b===-1)return;let B=((Q=c[b])==null?void 0:Q.text)||"";x.forEach(ie=>{B=Lw(B,ie)}),D(b,"text",B),z(""),q(`Added ${x.length} tag${x.length===1?"":"s"}.`)},fe=async()=>{const x=E.trim();if(!x){q("Enter a category name.");return}const b=Array.from(new Set([...g||[],x]));m(b),L(""),q("Category added.");const B=Ad(c),Q=$d(c);I(!0);try{await a({items:B,categories:Q,categoryList:b}),I(!1),q("Category saved.")}catch{q("Unable to save right now.")}},he=x=>{x&&(y(x.id),R(!0),q(""))},Ee=()=>{$&&y(""),R(!1),q("")};u.useMemo(()=>{const x=c.length,b=J.length;return s&&x===0?"Loading":x===b?`${x} aliases`:`${b} of ${x} aliases`},[c.length,J.length,s]),u.useEffect(()=>{const x=b=>{var we,ye;if(b.defaultPrevented)return;const B=b.target,Q=(B==null?void 0:B.tagName)||"",ie=["INPUT","TEXTAREA","SELECT"].includes(Q)||(B==null?void 0:B.isContentEditable),ee=String(b.key||"").toLowerCase(),Ne=b.metaKey||b.ctrlKey;if(Ne&&ee==="s"){b.preventDefault(),k&&!o&&te();return}if(Ne&&ee==="n"){b.preventDefault(),H();return}if(!ie&&ee==="/"){b.preventDefault(),(ye=(we=ae.current)==null?void 0:we.focus)==null||ye.call(we);return}ee==="escape"&&S&&!$&&(b.preventDefault(),Ee())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[H,Ee,k,S,te,$,o]);const Se=l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:Ee,children:$?"Clear selection":"Close"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:te,disabled:o||!k,children:o?"Saving":k?"Save":"Saved"})]}),tt=X?l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"alias-editor-toolbar",children:[l.jsxs("div",{className:"alias-editor-heading",children:[l.jsx("div",{className:"alias-editor-title",children:Le}),l.jsx("div",{className:"alias-editor-meta",children:me})]}),l.jsxs("div",{className:"alias-editor-actions",children:[l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>_e(ve),disabled:!ve,title:"Previous alias",children:"Prev"}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>_e(ke),disabled:!ke,title:"Next alias",children:"Next"}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>{de&&F(me)?q("Token copied."):q("Copy not available on this browser.")},title:"Copy token",children:"Copy token"})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Token"}),l.jsx("div",{className:"composer-token",children:me}),ls(X.name||"",X.category||"")?l.jsxs("div",{className:"sheet-hint",children:["Subcategory: ",$n(ls(X.name||"",X.category||""))]}):null]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Friendly name"}),l.jsx("div",{className:"composer-field",children:Le})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Alias name"}),l.jsx("input",{ref:le,type:"text",value:X.name||"",onChange:x=>{const b=c.findIndex(B=>B.id===X.id);b!==-1&&D(b,"name",x.target.value)},placeholder:"e.g. cherry_fruit",className:"sheet-input ui-control ui-input"})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Category"}),l.jsxs("select",{value:X.category||"",onChange:x=>{const b=c.findIndex(B=>B.id===X.id);b!==-1&&D(b,"category",x.target.value)},className:"sheet-select ui-control ui-select",children:[l.jsx("option",{value:"",children:"Uncategorized"}),Xe.map(x=>l.jsx("option",{value:x,children:x?ln(x):"Uncategorized"},x||"uncat"))]}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>O(!0),children:"Manage categories"})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Expands to"}),l.jsx("textarea",{value:X.text,onChange:x=>{const b=c.findIndex(B=>B.id===X.id);b!==-1&&D(b,"text",x.target.value)},placeholder:"Prompt text for this alias",className:"sheet-textarea ui-control ui-textarea is-compact",rows:6}),l.jsxs("div",{className:"tag-quick-add",children:[l.jsx("input",{type:"text",value:M,onChange:x=>z(x.target.value),onKeyDown:x=>{x.key==="Enter"&&(x.preventDefault(),ne())},placeholder:"Add tags (comma separated)",className:"ui-control ui-input tag-quick-input","aria-label":"Add tags"}),l.jsx("button",{type:"button",className:"ui-button is-compact is-primary",onClick:ne,disabled:!M.trim(),children:"Add"})]}),l.jsxs("div",{className:"tag-editor-actions",children:[l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>G(""),children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Fn,{size:14}),"Open tag library"]})}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:()=>{V(b=>({...b,loading:!0}));const x=sn(X.text||"");ai(x).then(b=>{V({loading:!1,invalid:Array.isArray(b==null?void 0:b.invalid)?b.invalid:[],suggestions:(b==null?void 0:b.suggestions)||{}})}).catch(()=>V({loading:!1,invalid:[],suggestions:{}}))},disabled:_.loading,title:"Validate against danbooru_tags.md",children:_.loading?"Validating":"Validate"})]}),be.length?l.jsx("div",{className:"tag-chip-list","aria-label":"Alias tags",children:be.map(x=>{const b=re.has(String(x).toLowerCase());return l.jsxs("span",{className:`tag-chip ${b?"is-invalid":""}`,children:[l.jsx("code",{className:"tag-chip-code",children:x}),l.jsx("button",{type:"button",className:"tag-chip-remove",onClick:()=>{const B=c.findIndex(Q=>Q.id===X.id);B!==-1&&D(B,"text",Pw(X.text||"",x))},"aria-label":`Remove ${x}`,title:"Remove",children:""})]},x)})}):l.jsx("div",{className:"sheet-hint",children:"Tip: Use the Tag library to add validated tags quickly."}),!_.loading&&Array.isArray(_.invalid)&&_.invalid.length?l.jsxs("div",{className:"tag-invalid-panel",role:"alert",children:[l.jsxs("div",{className:"tag-invalid-title",children:["Invalid tags (",_.invalid.length,")"]}),l.jsx("div",{className:"tag-invalid-body",children:_.invalid.map(x=>{var B;const b=((B=_==null?void 0:_.suggestions)==null?void 0:B[x])||[];return l.jsxs("div",{className:"tag-invalid-row",children:[l.jsxs("div",{className:"tag-invalid-tag",children:[l.jsx("code",{children:x}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-ghost",onClick:()=>G(x),children:"Find"})]}),Array.isArray(b)&&b.length?l.jsx("div",{className:"tag-invalid-suggestions",children:b.slice(0,6).map(Q=>l.jsx("button",{type:"button",className:"tag-suggestion",onClick:()=>{const ie=c.findIndex(ee=>ee.id===X.id);ie!==-1&&D(ie,"text",_w(X.text||"",x,Q))},title:`Replace ${x} with ${Q}`,children:Q},`${x}-${Q}`))}):l.jsx("div",{className:"sheet-hint",children:"No suggestions found for this tag."})]},x)})})]}):null]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("button",{type:"button",className:"ui-button is-danger",onClick:()=>{const x=c.findIndex(b=>b.id===X.id);x!==-1&&(U(x),R(!1))},children:"Delete alias"}),l.jsx("div",{className:"sheet-hint",children:"Deleting removes it from your library. Use Save changes to persist."})]})]}):l.jsx("div",{className:"alias-editor-empty",children:"Select an alias to edit, or create a new one."});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"page-shell page-stack alias-page",children:[l.jsxs("div",{className:"page-bar",children:[l.jsx("h1",{className:"page-bar-title",children:"Aliases"}),l.jsxs("div",{className:"page-bar-actions",children:[l.jsx("button",{type:"button",className:"page-bar-btn",onClick:()=>openTagLibrary({query:j||"",targetId:""}),title:"Browse danbooru tags",children:"Tags"}),l.jsx("button",{type:"button",className:"page-bar-btn is-primary",onClick:H,children:"Add"})]})]}),l.jsx("div",{className:"library-toolbar screen-sticky",children:l.jsxs("div",{className:"library-toolbar-inner",children:[l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:ae,type:"search",value:j,onChange:x=>p(x.target.value),className:"composer-search ui-control ui-input",placeholder:"Search aliases","aria-label":"Search aliases"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>p(""),disabled:!j,children:"Clear"})]}),l.jsxs("select",{className:"composer-subcategory-select ui-control ui-select is-compact",value:h,onChange:x=>v(x.target.value),"aria-label":"Filter by category",children:[l.jsx("option",{value:"All",children:"Category: All"}),l.jsx("option",{value:"",children:"Uncategorized"}),Xe.map(x=>l.jsx("option",{value:x,children:x?ln(x):"Uncategorized"},x||"uncat"))]}),l.jsxs("select",{className:"composer-subcategory-select ui-control ui-select is-compact",value:w,onChange:x=>N(x.target.value),"aria-label":"Filter by subcategory",children:[l.jsx("option",{value:"All",children:"Subcategory: All"}),Je.map(x=>l.jsx("option",{value:x,children:$n(x)},x))]}),k?l.jsx("button",{type:"button",className:"ui-button is-compact is-primary",onClick:te,disabled:o,children:o?"Saving":"Save changes"}):null]}),i?l.jsx("div",{className:"library-toolbar-status is-error",children:"Could not load aliases. Try again later."}):null,pe?l.jsx("div",{className:"library-toolbar-status",children:pe}):null]})}),l.jsxs("div",{className:"alias-layout",children:[l.jsx("div",{className:"alias-list",children:c.length===0&&!s?l.jsx("section",{className:"ui-panel text-center py-16",children:l.jsx("p",{className:"text-base text-[rgba(159,178,215,0.8)]",children:"No aliases yet. Add your first one."})}):l.jsxs("div",{className:"composer-alias-list",role:"list",children:[J.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases match your filters."}):null,J.map(x=>{const b=(x.category||"").trim(),B=b?`${b}:${x.name}`:x.name,Q=(x.text||"").slice(0,140)+((x.text||"").length>140?"":"");return l.jsxs("button",{type:"button",role:"listitem",className:`composer-alias-item ${f===x.id?"is-selected":""}`,onClick:()=>he(x),children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:Pl({name:x.name})||x.name||"Untitled"}),b?l.jsx("span",{className:"composer-alias-category",children:ln(b)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",B||"alias","$"]}),l.jsx("div",{className:"composer-alias-text",children:Q||""})]},x.id)})]})}),l.jsx("aside",{className:"alias-editor-panel",children:l.jsxs("div",{className:"alias-editor-card ui-panel",children:[tt,X?l.jsx("div",{className:"alias-editor-footer",children:Se}):null]})})]})]}),l.jsx(kt,{open:S&&!!X&&!$,onClose:Ee,title:"Alias",variant:"fullscreen",footer:Se,children:tt}),l.jsx(kt,{open:P,onClose:()=>{O(!1),L(""),q("")},title:"Categories",variant:"sheet",footer:l.jsx("div",{className:"sheet-hint",children:"Categories help you organize aliases and improve the Insert alias picker."}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Add category"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:E,onChange:x=>L(x.target.value),placeholder:"e.g. styles",className:"sheet-input ui-control ui-input"}),l.jsx("button",{type:"button",className:"ui-button is-primary is-compact",onClick:fe,children:"Add"})]})]}),l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Existing"}),Xe.length===0?l.jsx("div",{className:"sheet-hint",children:"No categories yet."}):l.jsxs("select",{className:"sheet-select ui-control ui-select",defaultValue:"",onChange:x=>{const b=x.target.value;b&&(v(b),O(!1))},children:[l.jsx("option",{value:"",children:"Select a category"}),Xe.map(x=>l.jsx("option",{value:x,children:ln(x)},x))]})]})]})}),l.jsx(kt,{open:A,onClose:()=>W(!1),title:"Fix invalid tags",variant:"fullscreen",footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>W(!1),children:"Close"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:()=>{const x=new Set(((ue==null?void 0:ue.invalidLower)||[]).map(b=>String(b).toLowerCase()));if(!x.size){W(!1);return}d(b=>b.map(B=>{const ie=sn((B==null?void 0:B.text)||"").filter(Ne=>!x.has(String(Ne).toLowerCase())),ee=Ro(ie);return ee===((B==null?void 0:B.text)||"")?B:{...B,text:ee}})),I(!0),W(!1),q("Removed invalid tags. Review and save again.")},children:"Remove invalid tags"})]}),children:l.jsxs("div",{className:"sheet-stack",children:[l.jsx("div",{className:"sheet-section",children:l.jsxs("div",{className:"sheet-hint",children:["These aliases contain tags not found in ",l.jsx("code",{className:"font-mono",children:"danbooru_tags.md"}),". Fix them before saving."]})}),(lt=ue==null?void 0:ue.rows)!=null&&lt.length?l.jsxs("div",{className:"sheet-section",children:[l.jsx("div",{className:"sheet-label",children:"Aliases with issues"}),l.jsx("div",{className:"composer-alias-list",role:"list",children:ue.rows.map(x=>l.jsxs("button",{type:"button",role:"listitem",className:"composer-alias-item",onClick:()=>{y(x.id),R(!0),W(!1)},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:x.friendlyName}),x.category?l.jsx("span",{className:"composer-alias-category",children:ln(x.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",x.token,"$"]}),l.jsx("div",{className:"tag-invalid-inline",children:x.invalid.map(b=>l.jsx("span",{className:"tag-chip is-invalid",children:l.jsx("code",{className:"tag-chip-code",children:b})},`${x.id}-${b}`))})]},x.id))})]}):null]})})]})}function Iw(e){var n,r;const t=String(e||"");if(!t)return!1;try{return(r=(n=navigator.clipboard)==null?void 0:n.writeText)==null||r.call(n,t),!0}catch{return!1}}function Tw({open:e,onClose:t,onSelectTag:n,initialQuery:r="",title:s="Tag library",contextTitle:o="",contextToken:i="",contextText:a="",contextTagCount:c=null,inline:d=!1}){const[g,m]=u.useState(r||""),[h,v]=u.useState(""),[w,N]=u.useState("count"),[j,p]=u.useState([]),[f,y]=u.useState([]),[S,R]=u.useState(0),[P,O]=u.useState(0),[_,V]=u.useState(!1),[A,W]=u.useState(!1),[ue,se]=u.useState(""),[pe,q]=u.useState(""),[le,ae]=u.useState([]),[k,I]=u.useState(!1),[E,L]=u.useState(null),[M,z]=u.useState(null),$=u.useRef(null),Z=u.useRef(null),H=u.useRef(null),D=u.useRef(null),U=u.useRef(null),te=f.length<S,J=d||e,X=u.useMemo(()=>le.join(", "),[le]),de=u.useMemo(()=>new Set(le.map(F=>F.toLowerCase())),[le]),Le=u.useCallback(F=>{const G=String(F||"").trim();G&&ae(ne=>new Set(ne.map(he=>he.toLowerCase())).has(G.toLowerCase())?ne:[...ne,G])},[]),me=u.useCallback(F=>{const G=String(F||"").trim().toLowerCase();G&&ae(ne=>ne.filter(fe=>fe.toLowerCase()!==G))},[]),xe=u.useCallback(()=>{ae([]),q("Cleared collected tags.")},[]),K=u.useCallback(()=>{var G,ne;if(!le.length){q("No tags to copy.");return}if(Iw(X)){q(`Copied ${le.length} tag${le.length===1?"":"s"}.`);return}const F=H.current;if(F)try{F.value=X,F.removeAttribute("readonly"),F.select(),F.setSelectionRange(0,X.length);const fe=document.execCommand&&document.execCommand("copy");if(F.setAttribute("readonly","readonly"),(ne=(G=window.getSelection())==null?void 0:G.removeAllRanges)==null||ne.call(G),fe){q(`Copied ${le.length} tag${le.length===1?"":"s"}.`);return}}catch{}q("Copy not available on this browser.")},[le,X]),ve=u.useCallback((F,G)=>{ae(ne=>{const fe=[...ne],[he]=fe.splice(F,1);return fe.splice(G,0,he),fe})},[]);u.useCallback((F,G)=>{L(G),D.current=F.target,F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/plain",G.toString()),requestAnimationFrame(()=>{D.current&&D.current.classList.add("is-dragging")})},[]),u.useCallback(()=>{D.current&&D.current.classList.remove("is-dragging"),E!==null&&M!==null&&E!==M&&ve(E,M),L(null),z(null),D.current=null},[E,M,ve]),u.useCallback((F,G)=>{F.preventDefault(),F.dataTransfer.dropEffect="move",z(G)},[]),u.useCallback(()=>{},[]),u.useCallback((F,G)=>{const ne=F.touches[0];U.current={idx:G,startX:ne.clientX,startY:ne.clientY,moved:!1}},[]),u.useCallback(F=>{if(!U.current)return;const G=F.touches[0],ne=Math.abs(G.clientX-U.current.startX),fe=Math.abs(G.clientY-U.current.startY);if(ne>10||fe>10){U.current.moved=!0,L(U.current.idx),F.preventDefault();const he=document.querySelectorAll(".collected-tag-chip"),Ee=G.clientX,Se=G.clientY;for(let tt=0;tt<he.length;tt++){const lt=he[tt].getBoundingClientRect();if(Ee>=lt.left&&Ee<=lt.right&&Se>=lt.top&&Se<=lt.bottom){z(tt);break}}}},[]),u.useCallback(()=>{var F;(F=U.current)!=null&&F.moved&&E!==null&&M!==null&&E!==M&&ve(E,M),U.current=null,L(null),z(null)},[E,M,ve]);const ke=u.useCallback(async({nextQuery:F,nextCategory:G,nextSort:ne}={})=>{const fe=typeof F=="string"?F:g,he=typeof G=="string"?G:h,Ee=typeof ne=="string"?ne:w;V(!0),se(""),q(""),O(0);try{const Se=await no({q:fe,category:he,sort:Ee,limit:80,offset:0});y((Se==null?void 0:Se.items)||[]),R(Number((Se==null?void 0:Se.total)||0))}catch(Se){console.error("Failed to search tags",Se),se("Unable to load tags right now."),y([]),R(0)}finally{V(!1)}},[h,g,w]),_e=u.useCallback(async()=>{if(_||A||!te)return;const F=P+80;W(!0),se("");try{const G=await no({q:g,category:h,sort:w,limit:80,offset:F}),ne=(G==null?void 0:G.items)||[];y(fe=>[...fe,...ne]),R(Number((G==null?void 0:G.total)||0)),O(F)}catch(G){console.error("Failed to load more tags",G),se("Unable to load more tags.")}finally{W(!1)}},[te,h,_,A,P,g,w]);u.useEffect(()=>{if(!J)return;se(""),q("");let F=!1;return(async()=>{try{const G=await fm();if(F)return;p(Array.isArray(G==null?void 0:G.categories)?G.categories:[])}catch(G){console.error("Failed to load tag categories",G),F||p([])}})(),()=>{F=!0}},[J]),u.useEffect(()=>{J&&(m(r||""),v(""),N("count"),y([]),R(0),O(0),V(!1),W(!1),se(""),q(""),ae([]))},[r,J]),u.useEffect(()=>{if(!J)return;const F=window.setTimeout(()=>{ke()},220);return()=>window.clearTimeout(F)},[h,J,g,ke,w]),u.useEffect(()=>{if(!J)return;const F=$.current;if(!F||typeof IntersectionObserver>"u")return;const G=new IntersectionObserver(ne=>{const fe=ne[0];fe!=null&&fe.isIntersecting&&_e()},{threshold:.1});return G.observe(F),()=>G.disconnect()},[J,_e]);const Xe=u.useMemo(()=>d?null:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:t,children:"Done"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:()=>ke(),disabled:_||A,children:l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(ha,{size:14}),"Refresh"]})})]}),[d,_,A,t,ke]),Je=!!(n&&(o||i||a)),be=Number.isFinite(c)?`${c} tags`:"",re=l.jsxs("div",{className:`sheet-stack ${d?"tag-library-page":""}`,children:[Je?l.jsxs("div",{className:"tag-library-context",children:[l.jsxs("div",{className:"tag-library-context-head",children:[l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"sheet-label",children:"Adding to alias"}),l.jsx("div",{className:"tag-library-context-title",children:o||"Alias"}),i?l.jsx("div",{className:"tag-library-context-token",children:i}):null]}),l.jsx("button",{type:"button",className:"ui-button is-tiny is-muted",onClick:t,children:"Back"})]}),l.jsx("div",{className:"tag-library-context-preview",children:a||""}),be?l.jsx("div",{className:"tag-library-context-meta",children:be}):null]}):null,l.jsxs("div",{className:"sheet-section",children:[d?null:l.jsx("div",{className:"sheet-label",children:"Browse"}),l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:Z,type:"search",value:g,onChange:F=>m(F.target.value),placeholder:"Search tags (e.g. smile, city, sword)",className:"composer-search ui-control ui-input","aria-label":"Search tags"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>m(""),disabled:!g,children:"Clear"})]}),l.jsxs("select",{value:h,onChange:F=>v(F.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Filter by category",children:[l.jsx("option",{value:"",children:"Category: All"}),j.map(F=>l.jsxs("option",{value:F.key,children:[$n(F.key)," (",Number(F.actual||F.count||0).toLocaleString(),")"]},F.key))]}),l.jsxs("select",{value:w,onChange:F=>N(F.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Sort tags",children:[l.jsx("option",{value:"count",children:"Sort: Popular"}),l.jsx("option",{value:"alpha",children:"Sort: AZ"})]})]}),pe?l.jsx("div",{className:"text-xs text-[#9DA3FFCC]",children:pe}):null,ue?l.jsx("div",{className:"text-xs text-[#FF8F70]",children:ue}):null]}),l.jsx("div",{className:"composer-alias-list tag-library-grid",role:"list",children:_?l.jsx("div",{className:"composer-alias-empty",children:"Loading tags"}):f.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No tags found."}):l.jsxs(l.Fragment,{children:[f.map(F=>l.jsx("div",{className:"tag-library-row",role:"listitem",children:l.jsxs("button",{type:"button",className:`composer-alias-item tag-library-item ${!n&&de.has(String(F.tag||"").toLowerCase())?"is-collected":""}`,onClick:()=>{if(n){n(String(F.tag||"")),q(`Added: ${F.tag}`);return}const G=String(F.tag||"");de.has(G.toLowerCase())?(me(G),q(`Removed: ${F.tag}`)):(Le(G),q(`Added: ${F.tag}`))},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name tag-library-name",children:l.jsx("code",{className:"tag-library-code",children:F.tag})}),F.category?l.jsx("span",{className:"composer-alias-category",children:$n(F.category)}):null]}),l.jsx("div",{className:"composer-alias-token",children:Number(F.count||0).toLocaleString()})]})},`${F.tag}-${F.category}`)),l.jsx("div",{ref:$,className:"composer-sentinel"}),A?l.jsx("div",{className:"composer-alias-empty",children:"Loading more"}):null]})})]});return J?d?l.jsxs("section",{className:"tag-library-surface",children:[s?l.jsx("div",{className:"sheet-label tag-library-page-title",children:s}):null,re,n?null:l.jsxs("div",{className:"tag-collection-bar","aria-live":"polite",children:[l.jsxs("div",{className:"tag-collection-bar-main",children:[l.jsx("div",{className:"tag-collection-bar-title",children:"Tags"}),l.jsx("div",{className:"tag-collection-bar-count","aria-live":"polite",children:le.length===0?"No tags selected":`${le.length} selected`})]}),l.jsx("button",{type:"button",className:"tag-collection-menu-btn",onClick:()=>I(!0),"aria-label":"Manage collected tags",children:""}),l.jsx("textarea",{ref:H,value:X,onChange:F=>{const G=F.target.value.split(",").map(he=>he.trim()).filter(Boolean),ne=new Set,fe=[];G.forEach(he=>{const Ee=he.toLowerCase();ne.has(Ee)||(ne.add(Ee),fe.push(he))}),ae(fe)},className:"sr-only","aria-label":"Collected tags text"})]}),n?null:l.jsx(kt,{open:k,onClose:()=>I(!1),title:"Collected tags",variant:"sheet",shouldCloseOnOverlayClick:!0,children:l.jsxs("div",{className:"sheet-stack",children:[l.jsxs("div",{className:"sheet-section",children:[l.jsxs("div",{className:"sheet-label",children:["Tags (",le.length,")"]}),l.jsxs("div",{className:"tag-collection-codeblock",children:[l.jsx("pre",{className:"tag-collection-pre",children:X||""}),l.jsx("button",{type:"button",className:"tag-collection-copy-btn",onClick:K,disabled:le.length===0,"aria-label":"Copy collected tags",children:""}),l.jsx("textarea",{ref:H,value:X,readOnly:!0,className:"sr-only","aria-label":"Collected tags text"})]}),le.length?l.jsx("div",{className:"tag-collection-chips",children:le.map((F,G)=>l.jsxs("span",{className:"collected-tag-chip",onClick:()=>me(F),children:[l.jsx("code",{className:"collected-tag-code",children:F}),l.jsx("button",{type:"button",className:"collected-tag-remove","aria-label":`Remove ${F}`,onClick:ne=>{ne.stopPropagation(),me(F)},children:""})]},`${F}-${G}`))}):l.jsx("div",{className:"sheet-hint",children:"No tags collected yet."})]}),l.jsxs("div",{className:"sheet-section flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:()=>I(!1),children:"Close"}),l.jsx("button",{type:"button",className:"ui-button is-ghost w-full",onClick:xe,disabled:le.length===0,children:"Clear"})]})]})})]}):l.jsx(kt,{open:e,onClose:t,title:s,variant:"fullscreen",contentClassName:"tag-library-sheet",footer:Xe,shouldCloseOnOverlayClick:!1,children:re}):null}function zw(){const e=tn(),[t]=im(),n=t.get("q")||"",r=u.useMemo(()=>n?`Tag Library  ${n}`:"Tag Library",[n]);return l.jsxs("div",{className:"page-shell page-stack",children:[l.jsxs("div",{className:"page-bar",children:[l.jsx("h1",{className:"page-bar-title",children:r}),l.jsxs("div",{className:"page-bar-actions",children:[l.jsx("button",{type:"button",className:"page-bar-btn",onClick:()=>e("/aliases"),children:"Aliases"}),l.jsx("button",{type:"button",className:"page-bar-btn",onClick:()=>e("/compose"),children:"Composer"})]})]}),l.jsx(Tw,{inline:!0,initialQuery:n,title:"Browse",onSelectTag:null})]})}function Aw({open:e=!1,onClose:t,value:n="",onChange:r,aliasOptions:s=[],aliasCatalog:o=[],fieldLabel:i="Prompt",variant:a="sheet"}){var Mc,Oc,Fc;const c=u.useRef(null),d=u.useRef(null),g=u.useRef(null),m=u.useRef(null),[h,v]=u.useState(n),[w,N]=u.useState(""),[j,p]=u.useState("All"),[f,y]=u.useState("All"),[S,R]=u.useState(30),[P,O]=u.useState("compose"),[_,V]=u.useState(null),[A,W]=u.useState(null),[ue,se]=u.useState(null),pe=u.useRef(null),q=u.useRef(null),[le,ae]=u.useState(!1),[k,I]=u.useState(null),E=u.useRef(null),L=u.useRef(null),[M,z]=u.useState(""),[$,Z]=u.useState(""),[H,D]=u.useState("count"),[U,te]=u.useState([]),[J,X]=u.useState([]),[de,Le]=u.useState(0),[me,xe]=u.useState(0),[K,ve]=u.useState(!1),[ke,_e]=u.useState(!1),[Xe,Je]=u.useState(""),[be,re]=u.useState([]),[F,G]=u.useState(""),[ne,fe]=u.useState([]),[he,Ee]=u.useState("");u.useEffect(()=>{e&&(v(n),O("compose"),N(""),p("All"),y("All"),R(30),V(null),W(null),se(null),ae(!1),I(null),wt(""),z(""),Z(""),D("count"),X([]),Le(0),xe(0),ve(!1),_e(!1),Je(""))},[e,n]),u.useEffect(()=>{if(_===null||typeof document>"u")return;const C=document.querySelector("main.app-content"),T={htmlOverscroll:document.documentElement.style.overscrollBehavior,bodyOverscroll:document.body.style.overscrollBehavior,bodyOverflow:document.body.style.overflow,scrollOverflow:C==null?void 0:C.style.overflow,scrollTouch:C==null?void 0:C.style.touchAction,scrollOverscroll:C==null?void 0:C.style.overscrollBehavior};return document.documentElement.style.overscrollBehavior="none",document.body.style.overscrollBehavior="none",document.body.style.overflow="hidden",C&&(C.style.overflow="hidden",C.style.touchAction="none",C.style.overscrollBehavior="none"),()=>{document.documentElement.style.overscrollBehavior=T.htmlOverscroll||"",document.body.style.overscrollBehavior=T.bodyOverscroll||"",document.body.style.overflow=T.bodyOverflow||"",C&&(C.style.overflow=T.scrollOverflow||"",C.style.touchAction=T.scrollTouch||"",C.style.overscrollBehavior=T.scrollOverscroll||"")}},[_]);const Se=u.useMemo(()=>(Array.isArray(o)?o.filter(C=>C&&C.name):[]).map(C=>({...C,...Pc(C)})),[o]),tt=u.useMemo(()=>{const C=new Map;return Se.forEach(T=>{T!=null&&T.token&&C.set(String(T.token).toLowerCase(),T)}),C},[Se]),lt=u.useMemo(()=>{const C=new Set(["All"]);return Se.forEach(T=>{T.category&&C.add(T.category)}),Array.from(C).sort((T,ce)=>T.localeCompare(ce))},[Se]),x=u.useMemo(()=>{const C=new Set(["All"]);return Se.forEach(T=>{(!j||j==="All"||T.category===j)&&T.subcategory&&C.add(T.subcategory)}),Array.from(C).sort((T,ce)=>T.localeCompare(ce))},[Se,j]),b=u.useMemo(()=>["All",...lt.filter(C=>C!=="All")],[lt]),B=u.useMemo(()=>["All",...x.filter(C=>C!=="All")],[x]),Q=u.useMemo(()=>{const C=w.trim().toLowerCase();return Se.filter(T=>{var ce,ge,Ge,Re;return j!=="All"&&(T.category||"")!==j||f!=="All"&&(T.subcategory||"other")!==f?!1:C?((ce=T.token)==null?void 0:ce.toLowerCase().includes(C))||((ge=T.text)==null?void 0:ge.toLowerCase().includes(C))||((Ge=T.name)==null?void 0:Ge.toLowerCase().includes(C))||((Re=T.displayName)==null?void 0:Re.toLowerCase().includes(C)):!0}).sort((T,ce)=>{const ge=(T.subcategory||"").toLowerCase(),Ge=(ce.subcategory||"").toLowerCase();return ge!==Ge?ge.localeCompare(Ge):T.token.localeCompare(ce.token)})},[Se,j,f,w]),ie=u.useMemo(()=>Q.slice(0,S),[Q,S]);u.useEffect(()=>{R(30)},[j,f,w,Se]),u.useEffect(()=>{y("All")},[j]),u.useEffect(()=>{const C=g.current;if(!C)return;const T=new IntersectionObserver(ce=>{ce[0].isIntersecting&&S<Q.length&&R(Ge=>Math.min(Ge+20,Q.length))},{threshold:.1});return T.observe(C),()=>T.disconnect()},[S,Q.length]);const ee=u.useMemo(()=>typeof h!="string"?[]:mx(h),[h]);u.useEffect(()=>{if(!e||P!=="tags"||U.length>0)return;let C=!1;return(async()=>{try{const T=await fm();if(C)return;te(Array.isArray(T==null?void 0:T.categories)?T.categories:[])}catch(T){console.error("Failed to load tag categories",T),C||te([])}})(),()=>{C=!0}},[e,P,U.length]);const Ne=u.useCallback(async({nextQuery:C,nextCategory:T,nextSort:ce}={})=>{const ge=typeof C=="string"?C:M,Ge=typeof T=="string"?T:$,Re=typeof ce=="string"?ce:H;ve(!0),Je(""),xe(0);try{const Ke=await no({q:ge,category:Ge,sort:Re,limit:80,offset:0});X((Ke==null?void 0:Ke.items)||[]),Le(Number((Ke==null?void 0:Ke.total)||0))}catch(Ke){console.error("Failed to search tags",Ke),Je("Unable to load tags right now."),X([]),Le(0)}finally{ve(!1)}},[$,M,H]),we=u.useCallback(async()=>{if(K||ke||J.length>=de)return;const C=me+80;_e(!0),Je("");try{const T=await no({q:M,category:$,sort:H,limit:80,offset:C}),ce=(T==null?void 0:T.items)||[];X(ge=>[...ge,...ce]),Le(Number((T==null?void 0:T.total)||0)),xe(C)}catch(T){console.error("Failed to load more tags",T),Je("Unable to load more tags.")}finally{_e(!1)}},[$,K,ke,me,M,H,J.length,de]);u.useEffect(()=>{if(!e||P!=="tags")return;const C=window.setTimeout(()=>{Ne()},220);return()=>window.clearTimeout(C)},[e,P,M,$,H,Ne]),u.useEffect(()=>{if(!e||P!=="tags")return;const C=L.current;if(!C||typeof IntersectionObserver>"u")return;const T=new IntersectionObserver(ce=>{const ge=ce[0];ge!=null&&ge.isIntersecting&&we()},{threshold:.1});return T.observe(C),()=>T.disconnect()},[e,P,we]);const ye=de?`${J.length.toLocaleString()} / ${de.toLocaleString()}`:`${J.length.toLocaleString()}`,Te=u.useCallback(C=>{v(T=>{const ge=typeof C=="function"?C(typeof T=="string"?T:""):String(C||"");return a==="page"&&(r==null||r(ge)),ge})},[r,a]),mt=u.useCallback(C=>{const T=String(C||"").trim();if(T&&(Te(ce=>{const ge=ce.length,Ge=ce.length,Re=ce.slice(0,ge),Ke=ce.slice(Ge),Me=Re.match(/[^\s]$/),Hn=Ke.match(/^[^\s]/),Ym=Me&&Me[0]!==","?", ":"",qm=Hn&&Hn[0]!==","?", ":"";return Re+Ym+T+qm+Ke}),c.current))try{c.current.blur()}catch{}},[Te]),[Be,wt]=u.useState(""),Ht=u.useCallback(()=>{const C=String(Be||"").trim();if(!C)return;const ce=C.split(",").map(ge=>ge.trim()).filter(Boolean).join(", ");ce&&(mt(ce),wt(""),O("compose"))},[Be,mt]),Vn=u.useCallback(()=>{re([]),G("Cleared collected tags.")},[]),Io=u.useCallback(C=>{const T=String(C||"").trim().toLowerCase();T&&re(ce=>ce.filter(ge=>ge.toLowerCase()!==T))},[]),Gs=u.useCallback(()=>{if(!be.length){G("No tags to apply.");return}mt(be.join(", ")),G(`Applied ${be.length} tag${be.length===1?"":"s"}.`),re([]),O("compose")},[be,mt]),Ks=u.useCallback(C=>{const T=String(C||"").trim();T&&re(ce=>{const ge=T.toLowerCase();return ce.some(Re=>Re.toLowerCase()===ge)?(G(`Removed: ${T}`),ce.filter(Re=>Re.toLowerCase()!==ge)):(G(`Selected: ${T}`),[...ce,T])})},[]),Qs=u.useCallback(C=>{const T=String(C||"").trim();T&&fe(ce=>{const ge=T.toLowerCase();return ce.some(Re=>Re.toLowerCase()===ge)?(Ee(`Removed: ${T}`),ce.filter(Re=>Re.toLowerCase()!==ge)):(Ee(`Selected: ${T}`),[...ce,T])})},[]),Ys=u.useCallback(()=>{fe([]),Ee("Cleared selected aliases.")},[]),$m=u.useCallback(C=>{const T=String(C||"").trim().toLowerCase();T&&fe(ce=>ce.filter(ge=>ge.toLowerCase()!==T))},[]),Mm=u.useCallback(()=>{if(!ne.length){Ee("No aliases to apply.");return}const C=ne.map(T=>`$${T}$`).join(", ");mt(C),Ee(`Applied ${ne.length} alias${ne.length===1?"":"es"}.`),fe([]),O("compose")},[ne,mt]),Ic=C=>{Te(T=>hx(T||"",C))},Tc=u.useCallback((C,T)=>{if(!(ee!=null&&ee.length))return;const ce=C+T;ce<0||ce>=ee.length||(Te(ge=>hd(ge||"",ee,C,ce)),se(ce))},[ee,Te]),Om=C=>{if(!C)return;let T=C.text;if(C.type==="alias"){const ge=tt.get(C.text.toLowerCase());T=(ge==null?void 0:ge.displayName)||C.text}const ce=pd(h||"",C);I({element:C,displayName:T,weight:(ce==null?void 0:ce.weight)??1}),ae(!0)},qs=u.useCallback((C,T)=>{C===T||C===null||T===null||ee!=null&&ee.length&&Te(ce=>hd(ce||"",ee,C,T))},[ee,Te]),Fm=u.useCallback((C,T)=>{V(T),pe.current=C.target,C.dataTransfer.effectAllowed="move",C.dataTransfer.setData("text/plain",T.toString()),requestAnimationFrame(()=>{pe.current&&pe.current.classList.add("is-dragging")})},[]),Dm=u.useCallback(()=>{pe.current&&pe.current.classList.remove("is-dragging"),_!==null&&A!==null&&_!==A&&qs(_,A),V(null),W(null),pe.current=null},[_,A,qs]),Um=u.useCallback((C,T)=>{C.preventDefault(),C.dataTransfer.dropEffect="move",T!==A&&W(T)},[A]),Bm=u.useCallback(()=>{},[]),Wm=u.useCallback((C,T)=>{var Re,Ke;if(!((Ke=(Re=C.target)==null?void 0:Re.closest)==null?void 0:Ke.call(Re,".composer-token-drag-handle")))return;const ge=C.touches[0],Ge=window.setTimeout(()=>{q.current&&(q.current.active=!0,V(T),W(T))},240);q.current={idx:T,startX:ge.clientX,startY:ge.clientY,active:!1,timer:Ge}},[]),Vm=u.useCallback(C=>{if(!q.current)return;const T=C.touches[0],ce=Math.abs(T.clientX-q.current.startX),ge=Math.abs(T.clientY-q.current.startY);if(!q.current.active){(ce>8||ge>8)&&(window.clearTimeout(q.current.timer),q.current=null);return}C.preventDefault();const Ge=document.querySelectorAll(".composer-token-draggable"),Re=T.clientX,Ke=T.clientY;for(let Me=0;Me<Ge.length;Me++){const Hn=Ge[Me].getBoundingClientRect();if(Re>=Hn.left&&Re<=Hn.right&&Ke>=Hn.top&&Ke<=Hn.bottom){W(Me);break}}},[]),Hm=u.useCallback(()=>{var C,T;(C=q.current)!=null&&C.timer&&window.clearTimeout(q.current.timer),(T=q.current)!=null&&T.active&&_!==null&&A!==null&&_!==A&&qs(_,A),q.current=null,V(null),W(null)},[_,A,qs]),Gm=u.useCallback(()=>{var C;(C=q.current)!=null&&C.timer&&window.clearTimeout(q.current.timer),q.current=null,V(null),W(null)},[]),Km=()=>{r==null||r(h),t==null||t()},zc=()=>{t==null||t()},To=a==="page";if(!(To||e))return null;const Ac=l.jsxs("div",{className:`composer-shell ${To?"is-page":""}`,children:[l.jsx(Rr,{ariaLabel:"Composer tabs",value:P,onChange:O,items:[{key:"compose",label:"Compose",icon:l.jsx(Cc,{size:14})},{key:"aliases",label:"Aliases",icon:l.jsx(Hs,{size:14})},{key:"tags",label:"Tags",icon:l.jsx(Fn,{size:14})}]}),l.jsxs("div",{className:`composer-panel composer-panel-compose ${P==="compose"?"is-visible":""}`,children:[l.jsx("div",{className:"composer-editor",children:l.jsxs("div",{className:"composer-input-row",children:[l.jsx("input",{ref:c,type:"text",value:Be,onChange:C=>wt(C.target.value),onKeyDown:C=>{C.key==="Enter"&&(C.preventDefault(),Ht())},className:"composer-input ui-control ui-input is-compact",placeholder:"Add prompt text"}),l.jsx("button",{type:"button",className:"composer-add-btn",onClick:Ht,disabled:!Be.trim(),"aria-label":"Add prompt text",children:"+"})]})}),l.jsxs("div",{className:"composer-tokens",children:[l.jsxs("div",{className:"composer-tokens-header",children:[l.jsxs("span",{className:"composer-tokens-label",children:["Elements",l.jsx("span",{className:"composer-tokens-count",children:ee.length})]}),l.jsx("span",{className:"composer-tokens-hint",children:"Drag to reorder  Tap to adjust"})]}),ee.length?l.jsx("div",{ref:m,className:`composer-tokens-list ${_!==null?"is-dragging":""}`,children:ee.map((C,T)=>{let ce=C.text;if(C.type==="alias"){const Me=tt.get(C.text.toLowerCase());ce=(Me==null?void 0:Me.displayName)||C.text}const ge=_===T,Ge=A===T&&_!==null&&_!==T,Re=pd(h||"",C),Ke=(Re==null?void 0:Re.weight)??1;return l.jsxs("span",{className:`composer-token composer-token-draggable ${C.type==="alias"?"is-alias":"is-tag"} ${ge?"is-dragging":""} ${Ge?"is-drop-target":""} ${ue===T?"is-selected":""}`,title:C.type==="alias"?`Alias: $${C.text}$`:`Tag: ${C.text}`,draggable:!0,onDragStart:Me=>Fm(Me,T),onDragEnd:Dm,onDragOver:Me=>Um(Me,T),onDragLeave:Bm,onTouchStart:Me=>Wm(Me,T),onTouchMove:Vm,onTouchEnd:Hm,onTouchCancel:Gm,onClick:()=>{_===null&&(se(T),Om(C))},children:[l.jsx("span",{className:"composer-token-order",children:T+1}),l.jsx("span",{className:"composer-token-drag-handle","aria-hidden":"true",children:l.jsx(ga,{size:10})}),l.jsx("span",{className:"composer-token-name",children:ce}),C.type==="alias"&&l.jsx("span",{className:"composer-token-type",children:"$"}),Math.abs(Ke-1)>1e-6&&l.jsxs("span",{className:"composer-token-weight",children:[cn(Ke),""]}),l.jsxs("div",{className:"composer-token-shift",role:"group","aria-label":"Reorder token",children:[l.jsx("button",{type:"button",className:"composer-token-shift-btn",onClick:Me=>{Me.stopPropagation(),Tc(T,-1)},"aria-label":"Move up",disabled:T===0,children:""}),l.jsx("button",{type:"button",className:"composer-token-shift-btn",onClick:Me=>{Me.stopPropagation(),Tc(T,1)},"aria-label":"Move down",disabled:T===ee.length-1,children:""})]}),l.jsx("button",{type:"button",className:"composer-token-remove",onClick:Me=>{Me.stopPropagation(),Ic(C)},"aria-label":`Remove ${C.text}`,children:l.jsx(ya,{size:9})})]},`${C.type}-${C.text}-${C.start}`)})}):l.jsx("div",{className:"composer-empty",children:"No elements yet."})]}),l.jsxs("div",{className:"composer-expanded",children:[l.jsxs("div",{className:"composer-expanded-header",children:[l.jsx("span",{className:"composer-expanded-label",children:"Expanded prompt"}),l.jsx("span",{className:"composer-expanded-meta",children:h?`${h.length} chars`:"Empty"})]}),l.jsx("div",{className:"composer-expanded-box","aria-label":"Expanded prompt",children:h||"No prompt yet."})]})]}),l.jsxs("div",{className:`composer-panel composer-panel-aliases ${P==="aliases"?"is-visible":""}`,children:[l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:d,type:"text",value:w,onChange:C=>N(C.target.value),placeholder:"Search aliases",className:"composer-search ui-control ui-input"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>N(""),disabled:!w,children:"Clear"})]}),l.jsx("select",{value:j,onChange:C=>p(C.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Filter by category",children:b.map(C=>l.jsx("option",{value:C,children:C==="All"?"Category: All":ln(C)},`cat-${C}`))}),B.length>2&&l.jsx("select",{value:f,onChange:C=>y(C.target.value),className:"composer-subcategory-select ui-control ui-select is-compact",children:B.map(C=>l.jsx("option",{value:C,children:C==="All"?"All subcategories":$n(C)},C))})]}),l.jsxs("div",{className:"composer-tag-collection-bar is-sticky",children:[l.jsxs("div",{children:[l.jsx("div",{className:"composer-tag-collection-label",children:ne.length?`${ne.length} selected`:"No aliases selected"}),he?l.jsx("div",{className:"composer-tag-collection-status",children:he}):null]}),l.jsxs("div",{className:"composer-tag-collection-actions",children:[l.jsx("button",{type:"button",className:"composer-tag-collection-btn",onClick:Ys,disabled:!ne.length,children:"Clear"}),l.jsx("button",{type:"button",className:"composer-tag-collection-btn is-primary",onClick:Mm,disabled:!ne.length,children:"Apply"})]})]}),ne.length?l.jsxs("div",{className:"composer-collection-inline",role:"list",children:[ne.slice(0,3).map(C=>{const T=tt.get(C.toLowerCase()),ce=(T==null?void 0:T.displayName)||C;return l.jsxs("button",{type:"button",className:"collected-tag-chip",onClick:()=>$m(C),"aria-label":`Remove ${C}`,title:`$${C}$`,children:[l.jsx("code",{className:"collected-tag-code",children:ce}),l.jsx("span",{"aria-hidden":"true",children:""})]},C)}),ne.length>3?l.jsxs("div",{className:"collected-tag-chip tag-overflow-chip","aria-hidden":"true",children:["+",ne.length-3," more"]}):null]}):null,l.jsx("div",{className:"composer-alias-list",children:Q.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No aliases found."}):l.jsxs(l.Fragment,{children:[ie.map(C=>l.jsxs("button",{type:"button",onClick:()=>Qs(C.token),className:`composer-alias-item ${ne.some(T=>T.toLowerCase()===C.token.toLowerCase())?"is-collected":""}`,children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name",children:C.displayName||C.token}),C.category?l.jsx("span",{className:"composer-alias-category",children:ln(C.category)}):null]}),l.jsxs("div",{className:"composer-alias-token",children:["$",C.token,"$"]}),l.jsx("div",{className:"composer-alias-text",children:C.text})]},C.key)),S<Q.length&&l.jsx("div",{ref:g,className:"composer-sentinel"})]})})]}),l.jsxs("div",{className:`composer-panel composer-panel-tags ${P==="tags"?"is-visible":""}`,onClick:C=>C.stopPropagation(),children:[l.jsxs("div",{className:"composer-filters",children:[l.jsxs("div",{className:"input-with-action",children:[l.jsx("input",{ref:E,type:"search",value:M,onChange:C=>z(C.target.value),placeholder:"Search tags (e.g. smile, city, sword)",className:"composer-search ui-control ui-input","aria-label":"Search tags"}),l.jsx("button",{type:"button",className:"input-action-btn",onClick:()=>z(""),disabled:!M,children:"Clear"})]}),l.jsxs("select",{value:$,onChange:C=>Z(C.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Filter by category",children:[l.jsx("option",{value:"",children:"Category: All"}),U.map(C=>l.jsxs("option",{value:C.key,children:[$n(C.key)," (",Number(C.actual||C.count||0).toLocaleString(),")"]},C.key))]}),l.jsxs("select",{value:H,onChange:C=>D(C.target.value),className:"composer-subcategory-select ui-control ui-select is-compact","aria-label":"Sort tags",children:[l.jsx("option",{value:"count",children:"Sort: Popular"}),l.jsx("option",{value:"alpha",children:"Sort: AZ"})]})]}),l.jsx("div",{className:"composer-tags-header",children:l.jsx("div",{className:"composer-tags-hint",children:l.jsx("span",{className:"ml-3 opacity-80",children:ye})})}),l.jsxs("div",{className:"composer-tag-collection-bar is-sticky",children:[l.jsxs("div",{children:[l.jsx("div",{className:"composer-tag-collection-label",children:be.length?`${be.length} selected`:"No tags selected"}),F?l.jsx("div",{className:"composer-tag-collection-status",children:F}):null]}),l.jsxs("div",{className:"composer-tag-collection-actions",children:[l.jsx("button",{type:"button",className:"composer-tag-collection-btn",onClick:Vn,disabled:!be.length,children:"Clear"}),l.jsx("button",{type:"button",className:"composer-tag-collection-btn is-primary",onClick:Gs,disabled:!be.length,children:"Apply"})]})]}),be.length?l.jsxs("div",{className:"composer-collection-inline",role:"list",children:[be.slice(0,3).map(C=>l.jsxs("button",{type:"button",className:"collected-tag-chip",onClick:()=>Io(C),"aria-label":`Remove ${C}`,children:[l.jsx("code",{className:"collected-tag-code",children:C}),l.jsx("span",{"aria-hidden":"true",children:""})]},C)),be.length>3?l.jsxs("div",{className:"collected-tag-chip tag-overflow-chip","aria-hidden":"true",children:["+",be.length-3," more"]}):null]}):null,Xe?l.jsx("div",{className:"composer-tags-error",children:Xe}):null,l.jsx("div",{className:"composer-alias-list composer-tags-grid",role:"list",children:K?l.jsx("div",{className:"composer-alias-empty",children:"Loading tags"}):J.length===0?l.jsx("div",{className:"composer-alias-empty",children:"No tags found."}):l.jsxs(l.Fragment,{children:[J.map(C=>{const T=be.some(ce=>ce.toLowerCase()===String(C.tag||"").toLowerCase());return l.jsxs("button",{type:"button",className:`composer-alias-item composer-tag-item ${T?"is-collected":""}`,onClick:ce=>{ce.stopPropagation(),Ks(C.tag)},children:[l.jsxs("div",{className:"composer-alias-header",children:[l.jsx("div",{className:"composer-alias-name composer-tag-name",children:l.jsx("code",{className:"composer-tag-code",children:C.tag})}),C.category?l.jsx("span",{className:"composer-alias-category",children:$n(C.category)}):null]}),l.jsx("div",{className:"composer-alias-token composer-tag-count",children:Number(C.count||0).toLocaleString()})]},`${C.tag}-${C.category}`)}),J.length<de&&l.jsx("div",{ref:L,className:"composer-sentinel"}),ke?l.jsx("div",{className:"composer-alias-empty",children:"Loading more"}):null]})})]})]}),$c=l.jsx(ja,{open:le,onClose:()=>ae(!1),title:((Mc=k==null?void 0:k.element)==null?void 0:Mc.type)==="alias"?"Alias strength":"Tag strength",tokenLabel:k?((Oc=k.element)==null?void 0:Oc.type)==="alias"?`${k.displayName}  $${(Fc=k.element)==null?void 0:Fc.text}$`:k.displayName:"",weight:(k==null?void 0:k.weight)??1,onApply:C=>{k!=null&&k.element&&Te(T=>md(T||"",k.element,C))},onRemoveWeight:()=>{k!=null&&k.element&&Te(C=>md(C||"",k.element,null))},onDeleteToken:()=>{k!=null&&k.element&&Ic(k.element)}}),Qm=l.jsx("div",{className:"page-bar composer-bar",children:l.jsx("h1",{className:"page-bar-title",children:i||"Prompt"})});return To?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"page-shell page-stack",children:[Qm,Ac]}),$c]}):l.jsxs(l.Fragment,{children:[l.jsx(kt,{open:e,onClose:zc,title:"Composer",variant:"fullscreen",shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,footer:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"ui-button is-muted w-full",onClick:zc,children:"Cancel"}),l.jsx("button",{type:"button",className:"ui-button is-primary w-full",onClick:Km,children:"Apply"})]}),children:Ac}),$c]})}function $w(){const e=tn(),[t]=im(),{formData:n,handleFormChange:r,aliasOptions:s,aliasCatalog:o,promptFieldName:i}=Am(),c=t.get("field")||i||"prompt",d=(n==null?void 0:n[c])||"";return u.useEffect(()=>{if(!(typeof document>"u"))return document.body.classList.add("no-pull-refresh"),document.documentElement.classList.add("no-pull-refresh"),()=>{document.body.classList.remove("no-pull-refresh"),document.documentElement.classList.remove("no-pull-refresh")}},[]),l.jsx(Aw,{open:!0,onClose:()=>e("/controls"),value:d,onChange:g=>r(c,g),aliasOptions:s,aliasCatalog:o,fieldLabel:c,variant:"page"})}function Mw(){var p,f;const{authed:e,ready:t,login:n}=Lo(),r=tn(),o=((f=(p=Lt().state)==null?void 0:p.from)==null?void 0:f.pathname)||"/studio",[i,a]=u.useState(""),[c,d]=u.useState(""),[g,m]=u.useState(""),[h,v]=u.useState(!1),[w,N]=u.useState(!1);u.useEffect(()=>{try{localStorage.getItem("cozygen_idle_logout")&&(N(!0),localStorage.removeItem("cozygen_idle_logout"))}catch{}},[]),u.useEffect(()=>{t&&e&&r(o,{replace:!0})},[t,e,o,r]);const j=async y=>{y.preventDefault(),m(""),v(!0);try{await n(i,c),r(o,{replace:!0})}catch(S){S!=null&&S.unauthorized?m("Invalid username or password."):m("Unable to sign in. Please try again.")}finally{v(!1)}};return l.jsx("div",{className:"login-shell",children:l.jsxs("div",{className:"neon-card login-card",children:[l.jsxs("div",{className:"login-brand",children:[l.jsx(vm,{size:34}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"login-title",children:"Sign in"}),l.jsx("div",{className:"login-subtitle",children:"Continue to CozyGen Studio"})]})]}),l.jsxs("form",{className:"login-form",onSubmit:j,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"login-username",className:"login-label",children:"Username"}),l.jsx("input",{id:"login-username",type:"text",className:"ui-control ui-input",value:i,onChange:y=>a(y.target.value),autoComplete:"username",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"login-password",className:"login-label",children:"Password"}),l.jsx("input",{id:"login-password",type:"password",className:"ui-control ui-input",value:c,onChange:y=>d(y.target.value),autoComplete:"current-password",required:!0})]}),g?l.jsx("div",{className:"ui-alert",children:g}):w?l.jsx("div",{className:"ui-alert is-warn",children:"You were signed out due to inactivity. Please sign in again."}):null,l.jsx("button",{type:"submit",disabled:h,className:"ui-button is-primary w-full",children:h?"Signing in":"Sign in"})]}),l.jsxs("p",{className:"login-footnote",children:["Access is protected by CozyGen auth. Set ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /"," ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server to enable."]})]})})}function Ow({containerRef:e}){const{pathname:t,hash:n}=Lt();return u.useEffect(()=>{if(n)return;const r=e==null?void 0:e.current;if(r&&typeof r.scrollTo=="function"){r.scrollTo({top:0,left:0,behavior:"auto"});return}typeof window<"u"&&window.scrollTo(0,0)},[t,n,e]),null}function Fw({children:e}){const{authed:t,ready:n}=Lo(),r=Lt();return n?t?e:l.jsx(ua,{to:"/login",state:{from:r},replace:!0}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-200",children:l.jsxs("div",{className:"page-loading",children:[l.jsx("span",{className:"loading-spinner lg","aria-hidden":"true"}),l.jsx("span",{className:"sr-only",children:"Checking session"})]})})}function Dw(){const{pathname:e}=Lt(),t=tn(),{defaultCreds:n,authed:r}=Lo(),s=e==="/login",o=u.useRef(null),i=!s,a=i;return u.useEffect(()=>{if(!r)return;const c=d=>{var h;const g=String(((h=d==null?void 0:d.detail)==null?void 0:h.fieldName)||"").trim(),m=g?`?field=${encodeURIComponent(g)}`:"";t(`/compose${m}`)};return window.addEventListener("cozygen:open-composer",c),()=>window.removeEventListener("cozygen:open-composer",c)},[r,t]),l.jsxs("div",{className:"app-shell",children:[!s&&l.jsx(Jv,{isMobileAlignedNav:i}),!s&&r&&n&&l.jsxs("div",{className:"flex-shrink-0 bg-amber-500/10 text-amber-200 border-b border-amber-400/50 px-4 py-2 text-sm text-center",children:["Default CozyGen credentials are still in use. Change ",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_USER"})," /",l.jsx("code",{className:"font-mono",children:"COZYGEN_AUTH_PASS"})," on the server."]}),l.jsx(Ow,{containerRef:o}),l.jsxs("div",{className:"app-body",children:[l.jsx("main",{ref:o,className:s?"app-content is-login":"app-content",children:l.jsxs(gv,{children:[l.jsx(Mt,{path:"/login",element:l.jsx(Mw,{})}),l.jsxs(Mt,{element:l.jsx(Fw,{children:l.jsx(cw,{children:l.jsx(mv,{})})}),children:[l.jsx(Mt,{path:"/",element:l.jsx(ua,{to:"/studio",replace:!0})}),l.jsx(Mt,{path:"/studio",element:l.jsx(fw,{})}),l.jsx(Mt,{path:"/controls",element:l.jsx(dw,{})}),l.jsx(Mt,{path:"/compose",element:l.jsx($w,{})}),l.jsx(Mt,{path:"/gallery",element:l.jsx(bw,{})}),l.jsx(Mt,{path:"/aliases",element:l.jsx(Rw,{})}),l.jsx(Mt,{path:"/tags",element:l.jsx(zw,{})})]}),l.jsx(Mt,{path:"*",element:l.jsx(ua,{to:"/studio",replace:!0})})]})}),a?l.jsx(tx,{}):null]})]})}function Uw(){return l.jsx(Cv,{children:l.jsx(Vv,{children:l.jsx(Dw,{})})})}hi.createRoot(document.getElementById("root")).render(l.jsx(Pt.StrictMode,{children:l.jsx(Uw,{})}));
